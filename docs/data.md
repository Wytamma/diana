# Loading Data into Diana

Diana analyzes transposon insertion data in the context of a genome. To use Diana, you need three types of files:

1. **Transposon insertion counts** (required)
2. **Genome annotations** (required)
3. **Reference genome sequence** (optional)

You can load these files by clicking the **"Load files"** button or by dragging and dropping them into the drop zone:

![](./images/dropzone.png)

Diana will automatically detect the file types. Supported formats:

| File Type                   | Accepted Formats                           |
| :-------------------------- | :----------------------------------------- |
| Transposon insertion counts | `.wig` (recommended), `.plot`              |
| Genome annotations          | `.gbk`, `.genbank`, `.gb`, `.gff`, `.gff3` |
| Reference genome            | `.fasta`, `.fa`, `.fna`                    |

---

## 1. Transposon Insertion Count Data

The primary input is transposon insertion counts, typically generated by high-throughput sequencing.  
For an end-to-end experimental and computational pipeline, see [Krause et al. (2025)](https://journals.asm.org/doi/10.1128/spectrum.00628-25).

From long read sequence data you can generate insertion counts using our scripts available at [rrwick/TraDIS-ONT](https://github.com/rrwick/TraDIS-ONT) or via our [web interface portal](https://portal.cpg.unimelb.edu.au/tools/TraDIS-ONT).

### Accepted Formats:

- **WIG format** (recommended)
- **Plot format** (simple but less flexible)

### WIG Format (`.wig`) â€” Recommended

The [WIG (Wiggle)](https://asia.ensembl.org/info/website/upload/wig.html) format efficiently represents continuous genomic data. In Diana, forward and reverse strand counts are stored in the same file:

- **Forward strand** counts are **positive** values.
- **Reverse strand** counts are **negative** values.

Multiple chromosomes can be included in a single WIG file.

#### Example WIG file:

```
variableStep chrom=chromosome
1 -2
2 -1
2 1
3 -2
5 20
5 -1
variableStep chrom=plasmid
1 1
1 -3
2 1
2 -10
```

!!! note

    At site `5` on the chromosome in the example file there `20` insert counts on the forward strand (`5 20`) and `1` insert counts on the reverse strand (`5 -1`).
   

---

### Plot Format (`.plot`)

The Plot format is a simpler, less flexible format:

- Each line represents one position in the genome.
- Two columns: forward count and reverse count.

!!! warning

    **Plot files are not recommended**. They do not specify chromosome names, and Diana assumes a single contiguous genome based on the reference sequence. Use `.wig` files whenever possible.

#### Example Plot file:

```
0 2
1 1
0 2
0 0
20 1
```

!!! note

    Site 4 has no inserts on the forward or reverse strand (`0 0`)

---

## 2. Genome Annotation Files

Genome annotations describe genes, operons, and other functional elements needed for analyzing and visualizing insertion data.

Accepted formats:

- GenBank: `.gbk`, `.gb`, `.genbank`
- GFF3: `.gff`, `.gff3`

Once loaded, the "Annotations" tab lets you:

- View a list of features.
- Select features for analysis.
- Filter features by various criteria.

See [Annotations](/docs/annotations/) for details.

---

### GenBank Format (`.gbk`, `.gb`)

A standard, human-readable format that includes genome features.

#### Example GenBank file:

```
LOCUS       chromosome             60 bp    DNA     linear   UNA 01-JAN-1980
FEATURES             Location/Qualifiers
     gene            0..10
                     /ID="gene1"
                     /Name="gene1"
     gene            10..20
                     /ID="gene2"
                     /Name="gene2"
     gene            20..30
                     /ID="gene3"
                     /Name="gene3"
ORIGIN
        1 atgcgtacgt agctagctag ctagctagct agctagctag ctagctagct agctagctag
LOCUS       plasmid                60 bp    DNA     linear   UNA 01-JAN-1980
FEATURES             Location/Qualifiers
     gene            0..10
                     /ID="gene4"
                     /Name="gene4"
     gene            10..20
                     /ID="gene5"
                     /Name="gene5"
     gene            20..30
                     /ID="gene6"
                     /Name="gene6"
ORIGIN
        1 atgcgtacgt agctagctag ctagctagct agctagctag ctagctagct agctagctag
```

---

### GFF3 Format (`.gff`, `.gff3`)

A tab-separated format for genomic features.

GFF3 files may optionally include sequence data via a `##FASTA` section, allowing a single file to contain both features and genome sequences.

```
##gff-version 3
chromosome	NCBI	gene	1	10	.	+	.	ID=gene1;Name=gene1
chromosome	NCBI	gene	11	20	.	+	.	ID=gene2;Name=gene2
chromosome	NCBI	gene	21	30	.	+	.	ID=gene3;Name=gene3
plasmid	NCBI	gene	1	10	.	+	.	ID=gene4;Name=gene4
plasmid	NCBI	gene	11	20	.	+	.	ID=gene5;Name=gene5
plasmid	NCBI	gene	21	30	.	+	.	ID=gene6;Name=gene6
##FASTA
>chromosome
ATGCGTACGTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAG
>plasmid
ATGCGTACGTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAG
```

---

## 3. Reference Genome Sequence (FASTA)

!!! info

    If your annotation file includes sequences (e.g., GenBank or GFF+FASTA), a separate reference genome file is **not required**.

Otherwise, supply a reference genome in FASTA format:

- One or more sequences.
- Each sequence preceded by a header line starting with `>`.

#### Example FASTA file:

```
>chromosome
ATGCGTACGTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAG
>plasmid
ATGCGTACGTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAGCTAG
```
