import{d,w as h}from"./index.Ccku256h.js";function C(){const{subscribe:i,set:r,update:e}=h(new Map);return{subscribe:i,set:r,update:e,reset:()=>r(new Map),load:async(t,o)=>{const n=await w(o);t.toLowerCase().includes("0")&&(n.isControl=!0),e(s=>(s.set(t,n),s))},remove:t=>e(o=>(o.delete(t),o)),setIsControl:(t,o)=>e(n=>{const s=n.get(t);return s&&(s.isControl=o),n}),containsControlAndCondition:()=>{let t=!1,o=!1;return i(n=>{n.forEach(s=>{console.log(s.isControl),s.isControl?t=!0:o=!0})}),t&&o}}}async function w(i,r=5e4){const e=i.split(`
`),t=[],o={wig:"",total:[],isControl:!1};t.push("track type=wiggle_0 visibility=full autoScale=on color=255,150,0 yLineMark=0 yLineOnOff=on"),t.push("variableStep chrom=chrom span=2");for(let n=0;n<e.length;n+=r)e.slice(n,n+r).forEach((l,u)=>{const[c,f]=l.split(/\s+/).map(p=>parseInt(p,10));let a=f;isNaN(a)&&(a=0),o.total.push(c+a),c!==0&&t.push(`${n+u} ${c}`),a!==0&&t.push(`${n+u} -${a}`)}),await new Promise(l=>setTimeout(l,0));return o.wig=t.join(`
`),o}const m=C(),y=d(m,i=>{let r=!1,e=!1;return i.forEach(t=>{t.isControl?r=!0:e=!0}),r&&e});export{y as c,m as i};
