var oe=Object.defineProperty;var ce=(s,e,t)=>e in s?oe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var h=(s,e,t)=>ce(s,typeof e!="symbol"?e+"":e,t);import{s as U,A as ue,e as v,a as z,c as k,b as N,g as G,f as p,m as b,i as w,h as S,Q as F,B as he,C as fe,D as de,k as M,t as B,d as A,n as R,M as ee,ae as K,E as Z,T as ge,af as te,J as le,ag as pe,j as X,l as Q,v as T,L as O}from"./DfgCqy7z.js";import{S as W,i as q,t as _e,a as be}from"./P-XqeZIV.js";import{e as Y}from"./DvuRD1Iq.js";import{w as I,d as j}from"./BOext3aJ.js";function me(s){let e;return{c(){e=B("↕")},l(t){e=A(t,"↕")},m(t,r){w(t,e,r)},p:R,d(t){t&&p(e)}}}function we(s){let e;function t(i,l){if(i[2].direction==="asc")return ke;if(i[2].direction==="desc")return ve}let r=t(s),n=r&&r(s);return{c(){n&&n.c(),e=ee()},l(i){n&&n.l(i),e=ee()},m(i,l){n&&n.m(i,l),w(i,e,l)},p(i,l){r!==(r=t(i))&&(n&&n.d(1),n=r&&r(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&p(e),n&&n.d(i)}}}function ve(s){let e;return{c(){e=B("↑")},l(t){e=A(t,"↑")},m(t,r){w(t,e,r)},d(t){t&&p(e)}}}function ke(s){let e;return{c(){e=B("↓")},l(t){e=A(t,"↓")},m(t,r){w(t,e,r)},d(t){t&&p(e)}}}function Ce(s){let e,t,r,n,i,l;const c=s[5].default,o=ue(c,s,s[4],null);function u(f,d){return f[2].identifier===f[1]?we:me}let a=u(s),g=a(s);return{c(){e=v("th"),t=v("div"),o&&o.c(),r=z(),g.c(),this.h()},l(f){e=k(f,"TH",{class:!0});var d=N(e);t=k(d,"DIV",{class:!0});var H=N(t);o&&o.l(H),r=G(H),g.l(H),H.forEach(p),d.forEach(p),this.h()},h(){b(t,"class","flex h-full items-center justify-center gap-x-2"),b(e,"class","cursor-pointer select-none")},m(f,d){w(f,e,d),S(e,t),o&&o.m(t,null),S(t,r),g.m(t,null),n=!0,i||(l=F(e,"click",s[6]),i=!0)},p(f,[d]){o&&o.p&&(!n||d&16)&&he(o,c,f,f[4],n?de(c,f[4],d,null):fe(f[4]),null),a===(a=u(f))&&g?g.p(f,d):(g.d(1),g=a(f),g&&(g.c(),g.m(t,null)))},i(f){n||(_e(o,f),n=!0)},o(f){be(o,f),n=!1},d(f){f&&p(e),o&&o.d(f),g.d(),i=!1,l()}}}function Se(s,e,t){let r,{$$slots:n={},$$scope:i}=e,{handler:l}=e,{orderBy:c}=e;const o=l.getSort();M(s,o,a=>t(2,r=a));const u=()=>l.sort(c);return s.$$set=a=>{"handler"in a&&t(0,l=a.handler),"orderBy"in a&&t(1,c=a.orderBy),"$$scope"in a&&t(4,i=a.$$scope)},[l,c,r,o,i,n,u]}class et extends W{constructor(e){super(),q(this,e,Se,Ce,U,{handler:0,orderBy:1})}}function ye(s){let e,t,r,n;return{c(){e=v("th"),t=v("input"),this.h()},l(i){e=k(i,"TH",{});var l=N(e);t=k(l,"INPUT",{class:!0,type:!0,placeholder:!0}),l.forEach(p),this.h()},h(){b(t,"class","input text-sm w-full"),b(t,"type","text"),b(t,"placeholder","Filter")},m(i,l){w(i,e,l),S(e,t),K(t,s[2]),r||(n=[F(t,"input",s[3]),F(t,"input",s[4])],r=!0)},p(i,[l]){l&4&&t.value!==i[2]&&K(t,i[2])},i:R,o:R,d(i){i&&p(e),r=!1,Z(n)}}}function Pe(s,e,t){let{handler:r}=e,{filterBy:n}=e,i;function l(){i=this.value,t(2,i)}const c=()=>{n&&r.filter(i,n)};return s.$$set=o=>{"handler"in o&&t(0,r=o.handler),"filterBy"in o&&t(1,n=o.filterBy)},[r,n,i,l,c]}class tt extends W{constructor(e){super(),q(this,e,Pe,ye,U,{handler:0,filterBy:1})}}function Re(s){let e,t,r;return{c(){e=v("input"),this.h()},l(n){e=k(n,"INPUT",{class:!0,type:!0,placeholder:!0}),this.h()},h(){b(e,"class","input sm:w-64 w-36"),b(e,"type","search"),b(e,"placeholder","Search...")},m(n,i){w(n,e,i),K(e,s[1]),t||(r=[F(e,"input",s[2]),F(e,"input",s[3])],t=!0)},p(n,[i]){i&2&&e.value!==n[1]&&K(e,n[1])},i:R,o:R,d(n){n&&p(e),t=!1,Z(r)}}}function He(s,e,t){let{handler:r}=e,n;function i(){n=this.value,t(1,n)}const l=()=>r.search(n);return s.$$set=c=>{"handler"in c&&t(0,r=c.handler)},[r,n,i,l]}class rt extends W{constructor(e){super(),q(this,e,He,Re,U,{handler:0})}}function re(s,e,t){const r=s.slice();return r[5]=e[t],r}function se(s){let e,t=s[5]+"",r,n;return{c(){e=v("option"),r=B(t),n=z(),this.h()},l(i){e=k(i,"OPTION",{});var l=N(e);r=A(l,t),n=G(l),l.forEach(p),this.h()},h(){e.__value=s[5],K(e,e.__value)},m(i,l){w(i,e,l),S(e,r),S(e,n)},p:R,d(i){i&&p(e)}}}function Ne(s){let e,t,r,n,i,l=Y(s[2]),c=[];for(let o=0;o<l.length;o+=1)c[o]=se(re(s,l,o));return{c(){e=v("aside"),t=B(`Show
	`),r=v("select");for(let o=0;o<c.length;o+=1)c[o].c();this.h()},l(o){e=k(o,"ASIDE",{class:!0});var u=N(e);t=A(u,`Show
	`),r=k(u,"SELECT",{class:!0});var a=N(r);for(let g=0;g<c.length;g+=1)c[g].l(a);a.forEach(p),u.forEach(p),this.h()},h(){b(r,"class","select ml-2"),s[0]===void 0&&ge(()=>s[4].call(r)),b(e,"class","flex place-items-center")},m(o,u){w(o,e,u),S(e,t),S(e,r);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(r,null);te(r,s[0],!0),n||(i=F(r,"change",s[4]),n=!0)},p(o,[u]){if(u&4){l=Y(o[2]);let a;for(a=0;a<l.length;a+=1){const g=re(o,l,a);c[a]?c[a].p(g,u):(c[a]=se(g),c[a].c(),c[a].m(r,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=l.length}u&5&&te(r,o[0])},i:R,o:R,d(o){o&&p(e),le(c,o),n=!1,i()}}}function Ee(s,e,t){let r,{handler:n}=e;const i=n.getRowsPerPage();M(s,i,o=>t(0,r=o));const l=[5,10,20,50,100];function c(){r=pe(this),i.set(r),t(2,l)}return s.$$set=o=>{"handler"in o&&t(3,n=o.handler)},[r,i,l,n,c]}class st extends W{constructor(e){super(),q(this,e,Ee,Ne,U,{handler:3})}}function Te(s){let e;return{c(){e=B("No entries found")},l(t){e=A(t,"No entries found")},m(t,r){w(t,e,r)},p:R,d(t){t&&p(e)}}}function Be(s){let e,t=s[0].start+"",r,n,i,l=s[0].end+"",c,o,u,a=s[0].total+"",g;return{c(){e=v("b"),r=B(t),n=B(`
		- `),i=v("b"),c=B(l),o=B(`
		/ `),u=v("b"),g=B(a)},l(f){e=k(f,"B",{});var d=N(e);r=A(d,t),d.forEach(p),n=A(f,`
		- `),i=k(f,"B",{});var H=N(i);c=A(H,l),H.forEach(p),o=A(f,`
		/ `),u=k(f,"B",{});var C=N(u);g=A(C,a),C.forEach(p)},m(f,d){w(f,e,d),S(e,r),w(f,n,d),w(f,i,d),S(i,c),w(f,o,d),w(f,u,d),S(u,g)},p(f,d){d&1&&t!==(t=f[0].start+"")&&X(r,t),d&1&&l!==(l=f[0].end+"")&&X(c,l),d&1&&a!==(a=f[0].total+"")&&X(g,a)},d(f){f&&(p(e),p(n),p(i),p(o),p(u))}}}function Ae(s){let e;function t(i,l){return i[0].total>0?Be:Te}let r=t(s),n=r(s);return{c(){e=v("aside"),n.c(),this.h()},l(i){e=k(i,"ASIDE",{class:!0});var l=N(e);n.l(l),l.forEach(p),this.h()},h(){b(e,"class","text-sm leading-8 mr-6")},m(i,l){w(i,e,l),n.m(e,null)},p(i,[l]){r===(r=t(i))&&n?n.p(i,l):(n.d(1),n=r(i),n&&(n.c(),n.m(e,null)))},i:R,o:R,d(i){i&&p(e),n.d()}}}function Oe(s,e,t){let r,{handler:n}=e;const i=n.getRowCount();return M(s,i,l=>t(0,r=l)),s.$$set=l=>{"handler"in l&&t(2,n=l.handler)},[r,i,n]}class nt extends W{constructor(e){super(),q(this,e,Oe,Ae,U,{handler:2})}}function ne(s,e,t){const r=s.slice();return r[12]=e[t],r}function ie(s){let e,t=(s[12]??"...")+"",r,n,i;function l(){return s[8](s[12])}return{c(){e=v("button"),r=B(t),this.h()},l(c){e=k(c,"BUTTON",{type:!0,class:!0});var o=N(e);r=A(o,t),o.forEach(p),this.h()},h(){b(e,"type","button"),b(e,"class","hover:variant-soft-primary"),T(e,"active",s[1]===s[12]),T(e,"ellipse",s[12]===null)},m(c,o){w(c,e,o),S(e,r),n||(i=F(e,"click",l),n=!0)},p(c,o){s=c,o&4&&t!==(t=(s[12]??"...")+"")&&X(r,t),o&6&&T(e,"active",s[1]===s[12]),o&4&&T(e,"ellipse",s[12]===null)},d(c){c&&p(e),n=!1,i()}}}function Fe(s){let e,t,r="←",n,i,l,c="→",o,u,a,g="←",f,d,H="→",C,$,J=Y(s[2]),y=[];for(let _=0;_<J.length;_+=1)y[_]=ie(ne(s,J,_));return{c(){e=v("section"),t=v("button"),t.textContent=r,n=z();for(let _=0;_<y.length;_+=1)y[_].c();i=z(),l=v("button"),l.textContent=c,o=z(),u=v("section"),a=v("button"),a.textContent=g,f=z(),d=v("button"),d.textContent=H,this.h()},l(_){e=k(_,"SECTION",{class:!0});var P=N(e);t=k(P,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-4wopud"&&(t.textContent=r),n=G(P);for(let V=0;V<y.length;V+=1)y[V].l(P);i=G(P),l=k(P,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-qpr6ty"&&(l.textContent=c),P.forEach(p),o=G(_),u=k(_,"SECTION",{class:!0});var m=N(u);a=k(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-1o27j1k"&&(a.textContent=g),f=G(m),d=k(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(d)!=="svelte-r4bvtf"&&(d.textContent=H),m.forEach(p),this.h()},h(){b(t,"type","button"),b(t,"class","hover:variant-soft-primary"),T(t,"disabled",s[1]===1),b(l,"type","button"),b(l,"class","hover:variant-soft-primary"),T(l,"disabled",s[1]===s[3]),b(e,"class","btn-group variant-ghost-surface [&>*+*]:border-surface-500 h-10 hidden lg:block"),b(a,"type","button"),b(a,"class","btn variant-ghost-surface mr-2 mb-2 hover:variant-soft-primary"),T(a,"disabled",s[1]===1),b(d,"type","button"),b(d,"class","btn variant-ghost-surface mb-2 hover:variant-soft-primary"),T(d,"disabled",s[1]===s[3]),b(u,"class","lg:hidden")},m(_,P){w(_,e,P),S(e,t),S(e,n);for(let m=0;m<y.length;m+=1)y[m]&&y[m].m(e,null);S(e,i),S(e,l),w(_,o,P),w(_,u,P),S(u,a),S(u,f),S(u,d),C||($=[F(t,"click",s[7]),F(l,"click",s[9]),F(a,"click",s[10]),F(d,"click",s[11])],C=!0)},p(_,[P]){if(P&2&&T(t,"disabled",_[1]===1),P&7){J=Y(_[2]);let m;for(m=0;m<J.length;m+=1){const V=ne(_,J,m);y[m]?y[m].p(V,P):(y[m]=ie(V),y[m].c(),y[m].m(e,i))}for(;m<y.length;m+=1)y[m].d(1);y.length=J.length}P&10&&T(l,"disabled",_[1]===_[3]),P&2&&T(a,"disabled",_[1]===1),P&10&&T(d,"disabled",_[1]===_[3])},i:R,o:R,d(_){_&&(p(e),p(o),p(u)),le(y,_),C=!1,Z($)}}}function je(s,e,t){let r,n,i,{handler:l}=e;const c=l.getPageNumber();M(s,c,C=>t(1,r=C));const o=l.getPageCount();M(s,o,C=>t(3,i=C));const u=l.getPages({ellipsis:!0});M(s,u,C=>t(2,n=C));const a=()=>l.setPage("previous"),g=C=>l.setPage(C),f=()=>l.setPage("next"),d=()=>l.setPage("previous"),H=()=>l.setPage("next");return s.$$set=C=>{"handler"in C&&t(0,l=C.handler)},[l,r,n,i,c,o,u,a,g,f,d,H]}class it extends W{constructor(e){super(),q(this,e,je,Fe,U,{handler:0})}}const ae=s=>s==null||s==="",Ie=s=>!ae(s),D=(s,e)=>{const t=e??s.toString();if(typeof s=="string")return{callback:r=>r[s],identifier:t,key:s};if(typeof s=="function")return{callback:s,identifier:t,key:void 0};throw new Error(`Invalid field argument: ${String(s)}`)},x={isLike:(s,e)=>E(s).indexOf(E(e))>-1,isNotLike:(s,e)=>E(s).indexOf(E(e))===-1,startsWith:(s,e)=>E(s).startsWith(E(e)),endsWith:(s,e)=>E(s).endsWith(E(e)),isEqualTo:(s,e)=>E(s)===E(e),isNotEqualTo:(s,e)=>E(s)!==E(e),isGreaterThan:(s,e)=>L(s)?!1:s>e,isGreaterThanOrEqualTo:(s,e)=>L(s)?!1:s>=e,isLessThan:(s,e)=>L(s)?!1:s<e,isLessThanOrEqualTo:(s,e)=>L(s)?!1:s<=e,isBetween:(s,e)=>{if(L(s))return!1;const[t,r]=e;return s>=t&&s<=r},isStrictlyBetween:(s,e)=>{if(L(s))return!1;const[t,r]=e;return s>t&&s<r},isTrue:(s,e)=>s===!0,isFalse:(s,e)=>s===!1,isNull:(s,e)=>s==null,isNotNull:(s,e)=>s!=null,whereIn:(s,e=[])=>{if(L(s)||e.length===0)return!1;for(const{value:t,comparator:r}of e)if(r(s,t))return!0;return!1},contains:(s,e)=>x.isLike(s,e)};function E(s=null){return String(s).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function L(s){if(s==null)return!0}class Le{constructor(){h(this,"events",{change:[],clearFilters:[],clearSearch:[]});h(this,"triggerChange",I(0))}add(e,t){this.events[e].push(t)}trigger(e){for(const t of this.events[e])t();e==="change"&&this.triggerChange.update(t=>t+1)}}class De{constructor(e,t){h(this,"event");h(this,"rowsPerPage");h(this,"pageNumber");h(this,"search");h(this,"filters");h(this,"filterCount");h(this,"rawRows");h(this,"filteredRows");h(this,"pagedRows");h(this,"rowCount");h(this,"pages");h(this,"pagesWithEllipsis");h(this,"pageCount");h(this,"sort");h(this,"selected");h(this,"selectScope");h(this,"isAllSelected");this.event=new Le,this.rowsPerPage=I(t.rowsPerPage),this.pageNumber=I(1),this.search=I({}),this.filters=I([]),this.filterCount=this.createFilterCount(),this.rawRows=I(e),this.filteredRows=this.createFilteredRows(),this.pagedRows=this.createPagedRows(),this.rowCount=this.createRowCount(),this.pages=this.createPages(),this.pagesWithEllipsis=this.createPagesWithEllipsis(),this.pageCount=this.createPageCount(),this.sort=I({}),this.selected=I([]),this.selectScope=I("all"),this.isAllSelected=this.createIsAllSelected()}createFilterCount(){return j(this.filters,e=>e.length)}createFilteredRows(){return j([this.rawRows,this.search,this.filters],([e,t,r])=>(t.value&&(e=e.filter(n=>(t.scope??Object.keys(n)).map(c=>{const{callback:o}=D(c);return o}).some(c=>this.match(c(n),t.value))),this.pageNumber.set(1),this.selected.set([]),this.event.trigger("change")),r.length>0&&(r.forEach(n=>e=e.filter(i=>{const l=n.callback(i);return this.match(l,n.value,n.comparator)})),this.pageNumber.set(1),this.selected.set([]),this.event.trigger("change")),e))}match(e,t,r=null){if(ae(t))return!0;if(!e&&r)return r(e,t);if(e){if(typeof e=="object")return Object.keys(e).some(n=>this.match(e[n],t,r))}else return x.isLike(e,t);return r?r(e,t):x.isLike(e,t)}createPagedRows(){return j([this.filteredRows,this.rowsPerPage,this.pageNumber],([e,t,r])=>t?e.slice((r-1)*t,r*t):e)}createRowCount(){return j([this.filteredRows,this.pageNumber,this.rowsPerPage],([e,t,r])=>{const n=e.length;return r?{total:n,start:t*r-r+1,end:Math.min(t*r,e.length)}:{total:n,start:1,end:n}})}createPages(){return j([this.rowsPerPage,this.filteredRows],([e,t])=>e?Array.from(Array(Math.ceil(t.length/e))).map((n,i)=>i+1):[1])}createPagesWithEllipsis(){return j([this.pages,this.pageNumber],([e,t])=>{if(e.length<=7)return e;const r=null,n=1,i=e.length;return t<=4?[...e.slice(0,5),r,i]:t<e.length-3?[n,r,...e.slice(t-2,t+1),r,i]:[n,r,...e.slice(e.length-5,e.length)]})}createPageCount(){return j(this.pages,e=>e.length)}createIsAllSelected(){return j([this.selected,this.pagedRows,this.filteredRows,this.selectScope],([e,t,r,n])=>{const i=n==="currentPage"?t.length:r.length;return i===e.length&&i!==0})}}class Me{constructor(e){h(this,"rawRows");h(this,"event");h(this,"sort");h(this,"backup");this.rawRows=e.rawRows,this.event=e.event,this.sort=e.sort,this.backup=[]}set(e=null,t){if(!e)return;const r=O(this.sort),{identifier:n}=D(e,t);r.identifier!==n&&this.sort.update(i=>i.direction=null),r.direction===null||r.direction==="desc"?this.asc(e,t):r.direction==="asc"&&this.desc(e,t)}asc(e,t){if(!e)return;const{identifier:r,callback:n,key:i}=D(e,t);this.sort.set({identifier:r,callback:n,direction:"asc",key:i}),this.rawRows.update(l=>(l.sort((c,o)=>{const[u,a]=[n(c),n(o)];return u===a?0:u===null?1:a===null?-1:typeof u=="boolean"?u===!1?1:-1:typeof u=="string"?u.localeCompare(a):typeof u=="number"?u-a:typeof u=="object"?JSON.stringify(u).localeCompare(JSON.stringify(a)):String(u).localeCompare(String(a))}),l)),this.log({identifier:r,callback:n,direction:"asc"}),this.event.trigger("change")}desc(e,t){if(!e)return;const{identifier:r,callback:n,key:i}=D(e,t);this.sort.set({identifier:r,callback:n,direction:"desc",key:i}),this.rawRows.update(l=>(l.sort((c,o)=>{const[u,a]=[n(c),n(o)];return u===a?0:u===null?1:a===null?-1:typeof a=="boolean"?a===!1?1:-1:typeof a=="string"?a.localeCompare(u):typeof a=="number"?a-u:typeof a=="object"?JSON.stringify(a).localeCompare(JSON.stringify(u)):String(a).localeCompare(String(u))}),l)),this.log({identifier:r,callback:n,direction:"desc"}),this.event.trigger("change")}apply(e=null){if(e)switch(e.direction){case"asc":return this.asc(e.orderBy);case"desc":return this.desc(e.orderBy);default:return this.set(e.orderBy)}else this.restore()}clear(){this.backup=[],this.sort.set({})}define(e,t="asc"){if(!e)return;const{identifier:r,callback:n,key:i}=D(e);this.sort.set({identifier:r,callback:n,direction:t,key:i})}restore(){for(const e of this.backup){const{key:t,callback:r,direction:n}=e,i=t??r;this[n](i)}}log(e){if(this.backup=this.backup.filter(t=>t.identifier!==e.identifier),this.backup.length>=3){const[t,r,n]=this.backup;this.backup=[r,n,e]}else this.backup=[...this.backup,e]}}class xe{constructor(e){h(this,"filteredRows");h(this,"pagedRows");h(this,"selected");h(this,"scope");h(this,"isAllSelected");h(this,"event");this.filteredRows=e.filteredRows,this.pagedRows=e.pagedRows,this.selected=e.selected,this.scope=e.selectScope,this.isAllSelected=e.isAllSelected,this.event=e.event}set(e){const t=O(this.selected);t.includes(e)?this.selected.set(t.filter(r=>r!==e)):this.selected.set([e,...t])}all(e=null){if(O(this.isAllSelected))return this.clear();const r=O(this.scope),n=r==="currentPage"?O(this.pagedRows):O(this.filteredRows);r==="currentPage"&&this.event.add("change",()=>this.clear()),e?this.selected.set(n.map(i=>i[e])):this.selected.set(n)}clear(){this.selected.set([])}}class Ue{constructor(e){h(this,"pageNumber");h(this,"rowCount");h(this,"rowsPerPage");h(this,"event");this.pageNumber=e.pageNumber,this.rowCount=e.rowCount,this.rowsPerPage=e.rowsPerPage,this.event=e.event}goto(e){this.pageNumber.update(t=>{const r=O(this.rowsPerPage);if(r){const n=O(this.rowCount).total;e>=1&&e<=Math.ceil(n/r)&&(t=e,this.event.trigger("change"))}return t})}previous(){const e=O(this.pageNumber)-1;this.goto(e)}next(){const e=O(this.pageNumber)+1;this.goto(e)}}class We{constructor(e){h(this,"search");h(this,"event");this.search=e.search,this.event=e.event}set(e,t=null){this.search.update(r=>(r={value:e??"",scope:t??null},r))}clear(){this.search.set({value:null,scope:null}),this.event.trigger("change"),this.event.trigger("clearSearch")}}class qe{constructor(e){h(this,"filters");h(this,"event");h(this,"collection");this.filters=e.filters,this.event=e.event}set(e,t,r=null,n){const{callback:i,identifier:l,key:c}=D(t,n),o={value:e,identifier:l,callback:i,comparator:r,key:c};this.filters.update(u=>(u=u.filter(a=>a.identifier!==l),Ie(e)&&u.push(o),u))}clear(){this.filters.set([]),this.event.trigger("change"),this.event.trigger("clearFilters")}get(){return this.collection?this.collection:(this.collection=this.createCollection(),this.collection)}createCollection(){return j(this.filters,e=>e.map(({value:t,callback:r,key:n,comparator:i})=>({value:t,filterBy:n??r,check:i?i.name:"isLike"})))}}class Je{constructor(e,t,r){h(this,"filterHandler");h(this,"filterBy");h(this,"uid");h(this,"comparator");h(this,"callback");this.filterHandler=e,this.filterBy=t,this.uid="f_"+Math.random().toString(28).substring(2),this.comparator=r??x.isLike,this.callback=()=>null}set(e,t){t&&(this.comparator=t),this.filterHandler.set(e,this.filterBy,this.comparator,this.uid)}clear(){this.callback(),this.filterHandler.set(void 0,this.filterBy)}on(e,t){this.callback=t}}class Ve{constructor(e,t){h(this,"filterHandler");h(this,"criteria");h(this,"filterBy");h(this,"selected");this.filterHandler=e,this.filterBy=t,this.criteria=[],this.selected=I([])}set(e,t=x.isLike){if(this.criteria.find(r=>r.value===e)?this.criteria=this.criteria.filter(r=>r.value!==e):this.criteria=[{value:e,comparator:t},...this.criteria],this.criteria.length===0)return this.clear();this.filterHandler.set(this.criteria,this.filterBy,x.whereIn),this.selected.set(this.criteria.map(r=>r.value))}getSelected(){return this.selected}clear(){this.criteria=[],this.selected.set([]),this.filterHandler.set(void 0,this.filterBy,x.whereIn)}}class ze{constructor(e,t,r){h(this,"rawRows");h(this,"filteredRows");h(this,"callback");h(this,"precision");this.rawRows=e.rawRows,this.filteredRows=e.filteredRows,this.callback=D(t).callback,this.precision=r.precision}distinct(e=null){const r=O(this.rawRows).map(l=>this.callback(l)),i=(e?e(r):r).reduce((l,c)=>(l[c]=(l[c]??0)+1,l),{});return Object.entries(i).map(([l,c])=>({value:l,count:c}))}avg(e=null){return j(this.filteredRows,t=>{if(t.length===0)return 0;const r=t.map(i=>this.callback(i)).filter(Boolean),n=e?e(r):r;return this.round(n.reduce((i,l)=>i+l,0)/n.length)})}sum(e=null){return j(this.filteredRows,t=>{const r=t.map(i=>this.callback(i)),n=e?e(r):r;return this.round(n.reduce((i,l)=>i+l,0))})}bounds(e=null){const r=O(this.rawRows).map(i=>this.callback(i)),n=e?e(r):r;return[Math.min(...n.filter(Boolean)),Math.max(...n.filter(Boolean))]}setPrecision(e){this.precision=e}round(e){if(this.precision===0)return Math.round(e);const t=Math.pow(10,this.precision);return Math.round((e+Number.EPSILON)*t)/t}}class lt{constructor(e=[],t={rowsPerPage:null}){h(this,"context");h(this,"sortHandler");h(this,"selectHandler");h(this,"pageHandler");h(this,"searchHandler");h(this,"filterHandler");h(this,"i18n");this.i18n=this.translate(t.i18n),this.context=new De(e,t),this.sortHandler=new Me(this.context),this.selectHandler=new xe(this.context),this.pageHandler=new Ue(this.context),this.searchHandler=new We(this.context),this.filterHandler=new qe(this.context)}setRows(e){this.context.rawRows.set(e),this.context.event.trigger("change"),this.applySort()}getRows(){return this.context.pagedRows}getAllRows(){return this.context.filteredRows}getRowCount(){return this.context.rowCount}getRowsPerPage(){return this.context.rowsPerPage}getPages(e={ellipsis:!1}){return e.ellipsis?this.context.pagesWithEllipsis:this.context.pages}getPageCount(){return this.context.pageCount}getPageNumber(){return this.context.pageNumber}setPage(e){switch(e){case"previous":return this.pageHandler.previous();case"next":return this.pageHandler.next();default:return this.pageHandler.goto(e)}}search(e,t=null){this.searchHandler.set(e,t)}clearSearch(){this.searchHandler.clear()}sort(e,t){this.setPage(1),this.sortHandler.set(e,t)}sortAsc(e,t){this.setPage(1),this.sortHandler.asc(e,t)}sortDesc(e,t){this.setPage(1),this.sortHandler.desc(e,t)}getSort(){return this.context.sort}applySort(e=null){this.sortHandler.apply(e)}defineSort(e,t){this.sortHandler.define(e,t)}clearSort(){this.sortHandler.clear()}filter(e,t,r=null){this.filterHandler.set(e,t,r)}getFilters(){return this.filterHandler.get()}createFilter(e,t){return new Je(this.filterHandler,e,t)}createAdvancedFilter(e){return new Ve(this.filterHandler,e)}getFilterCount(){return this.context.filterCount}clearFilters(){this.filterHandler.clear()}select(e){this.selectHandler.set(e)}getSelected(){return this.context.selected}selectAll(e={}){this.context.selectScope.set(e.scope==="currentPage"?"currentPage":"all"),this.selectHandler.all(e.selectBy??null)}isAllSelected(){return this.context.isAllSelected}on(e,t){this.context.event.add(e,t)}createCalculation(e,t=null){return new ze(this.context,e,{precision:(t==null?void 0:t.precision)??2})}translate(e){return{search:"Search...",show:"Show",entries:"entries",filter:"Filter",rowCount:"Showing {start} to {end} of {total} entries",noRows:"No entries found",previous:"Previous",next:"Next",...e}}update(e){console.log("%c%s","color:#e65100;background:#fff3e0;font-size:12px;border-radius:4px;padding:4px;text-align:center;","DataHandler.update(data) method is deprecated. Please use DataHandler.setRows(data) instead"),this.context.rawRows.set(e)}applySorting(e=null){this.applySort(e)}getSorted(){return this.getSort()}getTriggerChange(){return this.context.event.triggerChange}}function Ge(s){let e,t="Export CSV",r,n;return{c(){e=v("button"),e.textContent=t,this.h()},l(i){e=k(i,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1c38tgo"&&(e.textContent=t),this.h()},h(){b(e,"type","button"),b(e,"class","btn variant-ghost-surface mr-2 hover:variant-soft-primary")},m(i,l){w(i,e,l),r||(n=F(e,"click",s[3]),r=!0)},p:R,i:R,o:R,d(i){i&&p(e),r=!1,n()}}}function Qe(s,e,t){let r,{handler:n}=e,i=n.getAllRows();M(s,i,u=>t(4,r=u));function l(){const u=Object.keys(r[0]),a=r.map(g=>Object.entries(g).map(([f,d])=>f==="attributes"?Object.entries(d).map(([H,C])=>`${H}=${C}`).join(";"):d).join(","));return a.unshift(u.join(",")),a.join(`\r
`)}function c(u){let a=l();const g=document.createElement("a");g.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(a)),g.setAttribute("download",u),g.style.display="none",document.body.appendChild(g),g.click(),document.body.removeChild(g)}const o=()=>c("diana.csv");return s.$$set=u=>{"handler"in u&&t(2,n=u.handler)},[i,c,n,o]}class at extends W{constructor(e){super(),q(this,e,Qe,Ge,U,{handler:2})}}export{at as D,it as P,st as R,rt as S,et as T,tt as a,nt as b,lt as c};
