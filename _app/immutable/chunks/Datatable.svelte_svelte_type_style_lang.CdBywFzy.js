var oe=Object.defineProperty;var ce=(r,e,t)=>e in r?oe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var u=(r,e,t)=>(ce(r,typeof e!="symbol"?e+"":e,t),t);import{s as z,h as ue,u as he,i as fe,j as de,c as x,n as H,r as Z,z as ge,y as B}from"./scheduler.Cxdq5DjT.js";import{S as G,i as Q,e as v,s as U,c as k,a as R,f as J,d as g,l as b,g as m,h as P,F as I,q as pe,u as _e,t as A,b as F,B as ee,P as V,Q as te,C as le,R as be,j as X,k as K,p as T}from"./index.Bp_61F_m.js";import{e as Y}from"./each.J0AVf1RG.js";import{w as L,d as O}from"./index.BuGhtYYs.js";function we(r){let e;return{c(){e=A("↕")},l(t){e=F(t,"↕")},m(t,s){m(t,e,s)},p:H,d(t){t&&g(e)}}}function me(r){let e;function t(n,l){if(n[2].direction==="asc")return ke;if(n[2].direction==="desc")return ve}let s=t(r),i=s&&s(r);return{c(){i&&i.c(),e=ee()},l(n){i&&i.l(n),e=ee()},m(n,l){i&&i.m(n,l),m(n,e,l)},p(n,l){s!==(s=t(n))&&(i&&i.d(1),i=s&&s(n),i&&(i.c(),i.m(e.parentNode,e)))},d(n){n&&g(e),i&&i.d(n)}}}function ve(r){let e;return{c(){e=A("↑")},l(t){e=F(t,"↑")},m(t,s){m(t,e,s)},d(t){t&&g(e)}}}function ke(r){let e;return{c(){e=A("↓")},l(t){e=F(t,"↓")},m(t,s){m(t,e,s)},d(t){t&&g(e)}}}function Pe(r){let e,t,s,i,n,l;const c=r[5].default,a=ue(c,r,r[4],null);function h(f,d){return f[2].identifier===f[1]?me:we}let o=h(r),p=o(r);return{c(){e=v("th"),t=v("div"),a&&a.c(),s=U(),p.c(),this.h()},l(f){e=k(f,"TH",{class:!0});var d=R(e);t=k(d,"DIV",{class:!0});var N=R(t);a&&a.l(N),s=J(N),p.l(N),N.forEach(g),d.forEach(g),this.h()},h(){b(t,"class","flex h-full items-center justify-start gap-x-2"),b(e,"class","cursor-pointer select-none")},m(f,d){m(f,e,d),P(e,t),a&&a.m(t,null),P(t,s),p.m(t,null),i=!0,n||(l=I(e,"click",r[6]),n=!0)},p(f,[d]){a&&a.p&&(!i||d&16)&&he(a,c,f,f[4],i?de(c,f[4],d,null):fe(f[4]),null),o===(o=h(f))&&p?p.p(f,d):(p.d(1),p=o(f),p&&(p.c(),p.m(t,null)))},i(f){i||(pe(a,f),i=!0)},o(f){_e(a,f),i=!1},d(f){f&&g(e),a&&a.d(f),p.d(),n=!1,l()}}}function Se(r,e,t){let s,{$$slots:i={},$$scope:n}=e,{handler:l}=e,{orderBy:c}=e;const a=l.getSort();x(r,a,o=>t(2,s=o));const h=()=>l.sort(c);return r.$$set=o=>{"handler"in o&&t(0,l=o.handler),"orderBy"in o&&t(1,c=o.orderBy),"$$scope"in o&&t(4,n=o.$$scope)},[l,c,s,a,n,i,h]}class Ze extends G{constructor(e){super(),Q(this,e,Se,Pe,z,{handler:0,orderBy:1})}}function Ce(r){let e,t,s,i;return{c(){e=v("th"),t=v("input"),this.h()},l(n){e=k(n,"TH",{});var l=R(e);t=k(l,"INPUT",{class:!0,type:!0,placeholder:!0}),l.forEach(g),this.h()},h(){b(t,"class","input text-sm w-full"),b(t,"type","text"),b(t,"placeholder","Filter")},m(n,l){m(n,e,l),P(e,t),V(t,r[2]),s||(i=[I(t,"input",r[3]),I(t,"input",r[4])],s=!0)},p(n,[l]){l&4&&t.value!==n[2]&&V(t,n[2])},i:H,o:H,d(n){n&&g(e),s=!1,Z(i)}}}function ye(r,e,t){let{handler:s}=e,{filterBy:i}=e,n;function l(){n=this.value,t(2,n)}const c=()=>{i&&s.filter(n,i)};return r.$$set=a=>{"handler"in a&&t(0,s=a.handler),"filterBy"in a&&t(1,i=a.filterBy)},[s,i,n,l,c]}class $e extends G{constructor(e){super(),Q(this,e,ye,Ce,z,{handler:0,filterBy:1})}}function Re(r){let e,t,s;return{c(){e=v("input"),this.h()},l(i){e=k(i,"INPUT",{class:!0,type:!0,placeholder:!0}),this.h()},h(){b(e,"class","input sm:w-64 w-36"),b(e,"type","search"),b(e,"placeholder","Search...")},m(i,n){m(i,e,n),V(e,r[1]),t||(s=[I(e,"input",r[2]),I(e,"input",r[3])],t=!0)},p(i,[n]){n&2&&e.value!==i[1]&&V(e,i[1])},i:H,o:H,d(i){i&&g(e),t=!1,Z(s)}}}function He(r,e,t){let{handler:s}=e,i;function n(){i=this.value,t(1,i)}const l=()=>s.search(i);return r.$$set=c=>{"handler"in c&&t(0,s=c.handler)},[s,i,n,l]}class et extends G{constructor(e){super(),Q(this,e,He,Re,z,{handler:0})}}function se(r,e,t){const s=r.slice();return s[5]=e[t],s}function re(r){let e,t=r[5]+"",s,i;return{c(){e=v("option"),s=A(t),i=U(),this.h()},l(n){e=k(n,"OPTION",{});var l=R(e);s=F(l,t),i=J(l),l.forEach(g),this.h()},h(){e.__value=r[5],V(e,e.__value)},m(n,l){m(n,e,l),P(e,s),P(e,i)},p:H,d(n){n&&g(e)}}}function Ne(r){let e,t,s,i,n,l=Y(r[2]),c=[];for(let a=0;a<l.length;a+=1)c[a]=re(se(r,l,a));return{c(){e=v("aside"),t=A(`Show
	`),s=v("select");for(let a=0;a<c.length;a+=1)c[a].c();this.h()},l(a){e=k(a,"ASIDE",{class:!0});var h=R(e);t=F(h,`Show
	`),s=k(h,"SELECT",{class:!0});var o=R(s);for(let p=0;p<c.length;p+=1)c[p].l(o);o.forEach(g),h.forEach(g),this.h()},h(){b(s,"class","select ml-2"),r[0]===void 0&&ge(()=>r[4].call(s)),b(e,"class","flex place-items-center")},m(a,h){m(a,e,h),P(e,t),P(e,s);for(let o=0;o<c.length;o+=1)c[o]&&c[o].m(s,null);te(s,r[0],!0),i||(n=I(s,"change",r[4]),i=!0)},p(a,[h]){if(h&4){l=Y(a[2]);let o;for(o=0;o<l.length;o+=1){const p=se(a,l,o);c[o]?c[o].p(p,h):(c[o]=re(p),c[o].c(),c[o].m(s,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=l.length}h&5&&te(s,a[0])},i:H,o:H,d(a){a&&g(e),le(c,a),i=!1,n()}}}function Ee(r,e,t){let s,{handler:i}=e;const n=i.getRowsPerPage();x(r,n,a=>t(0,s=a));const l=[5,10,20,50,100];function c(){s=be(this),n.set(s),t(2,l)}return r.$$set=a=>{"handler"in a&&t(3,i=a.handler)},[s,n,l,i,c]}class tt extends G{constructor(e){super(),Q(this,e,Ee,Ne,z,{handler:3})}}function Te(r){let e;return{c(){e=A("No entries found")},l(t){e=F(t,"No entries found")},m(t,s){m(t,e,s)},p:H,d(t){t&&g(e)}}}function Be(r){let e,t=r[0].start+"",s,i,n,l=r[0].end+"",c,a,h,o=r[0].total+"",p;return{c(){e=v("b"),s=A(t),i=A(`
		- `),n=v("b"),c=A(l),a=A(`
		/ `),h=v("b"),p=A(o)},l(f){e=k(f,"B",{});var d=R(e);s=F(d,t),d.forEach(g),i=F(f,`
		- `),n=k(f,"B",{});var N=R(n);c=F(N,l),N.forEach(g),a=F(f,`
		/ `),h=k(f,"B",{});var S=R(h);p=F(S,o),S.forEach(g)},m(f,d){m(f,e,d),P(e,s),m(f,i,d),m(f,n,d),P(n,c),m(f,a,d),m(f,h,d),P(h,p)},p(f,d){d&1&&t!==(t=f[0].start+"")&&X(s,t),d&1&&l!==(l=f[0].end+"")&&X(c,l),d&1&&o!==(o=f[0].total+"")&&X(p,o)},d(f){f&&(g(e),g(i),g(n),g(a),g(h))}}}function Ae(r){let e;function t(n,l){return n[0].total>0?Be:Te}let s=t(r),i=s(r);return{c(){e=v("aside"),i.c(),this.h()},l(n){e=k(n,"ASIDE",{class:!0});var l=R(e);i.l(l),l.forEach(g),this.h()},h(){b(e,"class","text-sm leading-8 mr-6")},m(n,l){m(n,e,l),i.m(e,null)},p(n,[l]){s===(s=t(n))&&i?i.p(n,l):(i.d(1),i=s(n),i&&(i.c(),i.m(e,null)))},i:H,o:H,d(n){n&&g(e),i.d()}}}function Fe(r,e,t){let s,{handler:i}=e;const n=i.getRowCount();return x(r,n,l=>t(0,s=l)),r.$$set=l=>{"handler"in l&&t(2,i=l.handler)},[s,n,i]}class st extends G{constructor(e){super(),Q(this,e,Fe,Ae,z,{handler:2})}}function ie(r,e,t){const s=r.slice();return s[12]=e[t],s}function ne(r){let e,t=(r[12]??"...")+"",s,i,n;function l(){return r[8](r[12])}return{c(){e=v("button"),s=A(t),this.h()},l(c){e=k(c,"BUTTON",{type:!0,class:!0});var a=R(e);s=F(a,t),a.forEach(g),this.h()},h(){b(e,"type","button"),b(e,"class","hover:variant-soft-primary"),T(e,"active",r[1]===r[12]),T(e,"ellipse",r[12]===null)},m(c,a){m(c,e,a),P(e,s),i||(n=I(e,"click",l),i=!0)},p(c,a){r=c,a&4&&t!==(t=(r[12]??"...")+"")&&X(s,t),a&6&&T(e,"active",r[1]===r[12]),a&4&&T(e,"ellipse",r[12]===null)},d(c){c&&g(e),i=!1,n()}}}function Oe(r){let e,t,s="←",i,n,l,c="→",a,h,o,p="←",f,d,N="→",S,$,W=Y(r[2]),C=[];for(let _=0;_<W.length;_+=1)C[_]=ne(ie(r,W,_));return{c(){e=v("section"),t=v("button"),t.textContent=s,i=U();for(let _=0;_<C.length;_+=1)C[_].c();n=U(),l=v("button"),l.textContent=c,a=U(),h=v("section"),o=v("button"),o.textContent=p,f=U(),d=v("button"),d.textContent=N,this.h()},l(_){e=k(_,"SECTION",{class:!0});var y=R(e);t=k(y,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),K(t)!=="svelte-4wopud"&&(t.textContent=s),i=J(y);for(let q=0;q<C.length;q+=1)C[q].l(y);n=J(y),l=k(y,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),K(l)!=="svelte-qpr6ty"&&(l.textContent=c),y.forEach(g),a=J(_),h=k(_,"SECTION",{class:!0});var w=R(h);o=k(w,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),K(o)!=="svelte-1o27j1k"&&(o.textContent=p),f=J(w),d=k(w,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),K(d)!=="svelte-r4bvtf"&&(d.textContent=N),w.forEach(g),this.h()},h(){b(t,"type","button"),b(t,"class","hover:variant-soft-primary"),T(t,"disabled",r[1]===1),b(l,"type","button"),b(l,"class","hover:variant-soft-primary"),T(l,"disabled",r[1]===r[3]),b(e,"class","btn-group variant-ghost-surface [&>*+*]:border-surface-500 h-10 hidden lg:block"),b(o,"type","button"),b(o,"class","btn variant-ghost-surface mr-2 mb-2 hover:variant-soft-primary"),T(o,"disabled",r[1]===1),b(d,"type","button"),b(d,"class","btn variant-ghost-surface mb-2 hover:variant-soft-primary"),T(d,"disabled",r[1]===r[3]),b(h,"class","lg:hidden")},m(_,y){m(_,e,y),P(e,t),P(e,i);for(let w=0;w<C.length;w+=1)C[w]&&C[w].m(e,null);P(e,n),P(e,l),m(_,a,y),m(_,h,y),P(h,o),P(h,f),P(h,d),S||($=[I(t,"click",r[7]),I(l,"click",r[9]),I(o,"click",r[10]),I(d,"click",r[11])],S=!0)},p(_,[y]){if(y&2&&T(t,"disabled",_[1]===1),y&7){W=Y(_[2]);let w;for(w=0;w<W.length;w+=1){const q=ie(_,W,w);C[w]?C[w].p(q,y):(C[w]=ne(q),C[w].c(),C[w].m(e,n))}for(;w<C.length;w+=1)C[w].d(1);C.length=W.length}y&10&&T(l,"disabled",_[1]===_[3]),y&2&&T(o,"disabled",_[1]===1),y&10&&T(d,"disabled",_[1]===_[3])},i:H,o:H,d(_){_&&(g(e),g(a),g(h)),le(C,_),S=!1,Z($)}}}function Ie(r,e,t){let s,i,n,{handler:l}=e;const c=l.getPageNumber();x(r,c,S=>t(1,s=S));const a=l.getPageCount();x(r,a,S=>t(3,n=S));const h=l.getPages({ellipsis:!0});x(r,h,S=>t(2,i=S));const o=()=>l.setPage("previous"),p=S=>l.setPage(S),f=()=>l.setPage("next"),d=()=>l.setPage("previous"),N=()=>l.setPage("next");return r.$$set=S=>{"handler"in S&&t(0,l=S.handler)},[l,s,i,n,c,a,h,o,p,f,d,N]}class rt extends G{constructor(e){super(),Q(this,e,Ie,Oe,z,{handler:0})}}const ae=r=>r==null||r==="",Le=r=>!ae(r),D=(r,e)=>{const t=e??r.toString();if(typeof r=="string")return{callback:s=>s[r],identifier:t,key:r};if(typeof r=="function")return{callback:r,identifier:t,key:void 0};throw new Error(`Invalid field argument: ${String(r)}`)},M={isLike:(r,e)=>E(r).indexOf(E(e))>-1,isNotLike:(r,e)=>E(r).indexOf(E(e))===-1,startsWith:(r,e)=>E(r).startsWith(E(e)),endsWith:(r,e)=>E(r).endsWith(E(e)),isEqualTo:(r,e)=>E(r)===E(e),isNotEqualTo:(r,e)=>E(r)!==E(e),isGreaterThan:(r,e)=>j(r)?!1:r>e,isGreaterThanOrEqualTo:(r,e)=>j(r)?!1:r>=e,isLessThan:(r,e)=>j(r)?!1:r<e,isLessThanOrEqualTo:(r,e)=>j(r)?!1:r<=e,isBetween:(r,e)=>{if(j(r))return!1;const[t,s]=e;return r>=t&&r<=s},isStrictlyBetween:(r,e)=>{if(j(r))return!1;const[t,s]=e;return r>t&&r<s},isTrue:(r,e)=>r===!0,isFalse:(r,e)=>r===!1,isNull:(r,e)=>r==null,isNotNull:(r,e)=>r!=null,whereIn:(r,e=[])=>{if(j(r)||e.length===0)return!1;for(const{value:t,comparator:s}of e)if(s(r,t))return!0;return!1},contains:(r,e)=>M.isLike(r,e)};function E(r=null){return String(r).toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function j(r){if(r==null)return!0}class je{constructor(){u(this,"events",{change:[],clearFilters:[],clearSearch:[]});u(this,"triggerChange",L(0))}add(e,t){this.events[e].push(t)}trigger(e){for(const t of this.events[e])t();e==="change"&&this.triggerChange.update(t=>t+1)}}class De{constructor(e,t){u(this,"event");u(this,"rowsPerPage");u(this,"pageNumber");u(this,"search");u(this,"filters");u(this,"filterCount");u(this,"rawRows");u(this,"filteredRows");u(this,"pagedRows");u(this,"rowCount");u(this,"pages");u(this,"pagesWithEllipsis");u(this,"pageCount");u(this,"sort");u(this,"selected");u(this,"selectScope");u(this,"isAllSelected");this.event=new je,this.rowsPerPage=L(t.rowsPerPage),this.pageNumber=L(1),this.search=L({}),this.filters=L([]),this.filterCount=this.createFilterCount(),this.rawRows=L(e),this.filteredRows=this.createFilteredRows(),this.pagedRows=this.createPagedRows(),this.rowCount=this.createRowCount(),this.pages=this.createPages(),this.pagesWithEllipsis=this.createPagesWithEllipsis(),this.pageCount=this.createPageCount(),this.sort=L({}),this.selected=L([]),this.selectScope=L("all"),this.isAllSelected=this.createIsAllSelected()}createFilterCount(){return O(this.filters,e=>e.length)}createFilteredRows(){return O([this.rawRows,this.search,this.filters],([e,t,s])=>(t.value&&(e=e.filter(i=>(t.scope??Object.keys(i)).map(c=>{const{callback:a}=D(c);return a}).some(c=>this.match(c(i),t.value))),this.pageNumber.set(1),this.selected.set([]),this.event.trigger("change")),s.length>0&&(s.forEach(i=>e=e.filter(n=>{const l=i.callback(n);return this.match(l,i.value,i.comparator)})),this.pageNumber.set(1),this.selected.set([]),this.event.trigger("change")),e))}match(e,t,s=null){if(ae(t))return!0;if(!e&&s)return s(e,t);if(e){if(typeof e=="object")return Object.keys(e).some(i=>this.match(e[i],t,s))}else return M.isLike(e,t);return s?s(e,t):M.isLike(e,t)}createPagedRows(){return O([this.filteredRows,this.rowsPerPage,this.pageNumber],([e,t,s])=>t?e.slice((s-1)*t,s*t):e)}createRowCount(){return O([this.filteredRows,this.pageNumber,this.rowsPerPage],([e,t,s])=>{const i=e.length;return s?{total:i,start:t*s-s+1,end:Math.min(t*s,e.length)}:{total:i,start:1,end:i}})}createPages(){return O([this.rowsPerPage,this.filteredRows],([e,t])=>e?Array.from(Array(Math.ceil(t.length/e))).map((i,n)=>n+1):[1])}createPagesWithEllipsis(){return O([this.pages,this.pageNumber],([e,t])=>{if(e.length<=7)return e;const s=null,i=1,n=e.length;return t<=4?[...e.slice(0,5),s,n]:t<e.length-3?[i,s,...e.slice(t-2,t+1),s,n]:[i,s,...e.slice(e.length-5,e.length)]})}createPageCount(){return O(this.pages,e=>e.length)}createIsAllSelected(){return O([this.selected,this.pagedRows,this.filteredRows,this.selectScope],([e,t,s,i])=>{const n=i==="currentPage"?t.length:s.length;return n===e.length&&n!==0})}}class Me{constructor(e){u(this,"rawRows");u(this,"event");u(this,"sort");u(this,"backup");this.rawRows=e.rawRows,this.event=e.event,this.sort=e.sort,this.backup=[]}set(e=null,t){if(!e)return;const s=B(this.sort),{identifier:i}=D(e,t);s.identifier!==i&&this.sort.update(n=>n.direction=null),s.direction===null||s.direction==="desc"?this.asc(e,t):s.direction==="asc"&&this.desc(e,t)}asc(e,t){if(!e)return;const{identifier:s,callback:i,key:n}=D(e,t);this.sort.set({identifier:s,callback:i,direction:"asc",key:n}),this.rawRows.update(l=>(l.sort((c,a)=>{const[h,o]=[i(c),i(a)];return h===o?0:h===null?1:o===null?-1:typeof h=="boolean"?h===!1?1:-1:typeof h=="string"?h.localeCompare(o):typeof h=="number"?h-o:typeof h=="object"?JSON.stringify(h).localeCompare(JSON.stringify(o)):String(h).localeCompare(String(o))}),l)),this.log({identifier:s,callback:i,direction:"asc"}),this.event.trigger("change")}desc(e,t){if(!e)return;const{identifier:s,callback:i,key:n}=D(e,t);this.sort.set({identifier:s,callback:i,direction:"desc",key:n}),this.rawRows.update(l=>(l.sort((c,a)=>{const[h,o]=[i(c),i(a)];return h===o?0:h===null?1:o===null?-1:typeof o=="boolean"?o===!1?1:-1:typeof o=="string"?o.localeCompare(h):typeof o=="number"?o-h:typeof o=="object"?JSON.stringify(o).localeCompare(JSON.stringify(h)):String(o).localeCompare(String(h))}),l)),this.log({identifier:s,callback:i,direction:"desc"}),this.event.trigger("change")}apply(e=null){if(e)switch(e.direction){case"asc":return this.asc(e.orderBy);case"desc":return this.desc(e.orderBy);default:return this.set(e.orderBy)}else this.restore()}clear(){this.backup=[],this.sort.set({})}define(e,t="asc"){if(!e)return;const{identifier:s,callback:i,key:n}=D(e);this.sort.set({identifier:s,callback:i,direction:t,key:n})}restore(){for(const e of this.backup){const{key:t,callback:s,direction:i}=e,n=t??s;this[i](n)}}log(e){if(this.backup=this.backup.filter(t=>t.identifier!==e.identifier),this.backup.length>=3){const[t,s,i]=this.backup;this.backup=[s,i,e]}else this.backup=[...this.backup,e]}}class We{constructor(e){u(this,"filteredRows");u(this,"pagedRows");u(this,"selected");u(this,"scope");u(this,"isAllSelected");u(this,"event");this.filteredRows=e.filteredRows,this.pagedRows=e.pagedRows,this.selected=e.selected,this.scope=e.selectScope,this.isAllSelected=e.isAllSelected,this.event=e.event}set(e){const t=B(this.selected);t.includes(e)?this.selected.set(t.filter(s=>s!==e)):this.selected.set([e,...t])}all(e=null){if(B(this.isAllSelected))return this.clear();const s=B(this.scope),i=s==="currentPage"?B(this.pagedRows):B(this.filteredRows);s==="currentPage"&&this.event.add("change",()=>this.clear()),e?this.selected.set(i.map(n=>n[e])):this.selected.set(i)}clear(){this.selected.set([])}}class qe{constructor(e){u(this,"pageNumber");u(this,"rowCount");u(this,"rowsPerPage");u(this,"event");this.pageNumber=e.pageNumber,this.rowCount=e.rowCount,this.rowsPerPage=e.rowsPerPage,this.event=e.event}goto(e){this.pageNumber.update(t=>{const s=B(this.rowsPerPage);if(s){const i=B(this.rowCount).total;e>=1&&e<=Math.ceil(i/s)&&(t=e,this.event.trigger("change"))}return t})}previous(){const e=B(this.pageNumber)-1;this.goto(e)}next(){const e=B(this.pageNumber)+1;this.goto(e)}}class Ue{constructor(e){u(this,"search");u(this,"event");this.search=e.search,this.event=e.event}set(e,t=null){this.search.update(s=>(s={value:e??"",scope:t??null},s))}clear(){this.search.set({value:null,scope:null}),this.event.trigger("change"),this.event.trigger("clearSearch")}}class Je{constructor(e){u(this,"filters");u(this,"event");u(this,"collection");this.filters=e.filters,this.event=e.event}set(e,t,s=null,i){const{callback:n,identifier:l,key:c}=D(t,i),a={value:e,identifier:l,callback:n,comparator:s,key:c};this.filters.update(h=>(h=h.filter(o=>o.identifier!==l),Le(e)&&h.push(a),h))}clear(){this.filters.set([]),this.event.trigger("change"),this.event.trigger("clearFilters")}get(){return this.collection?this.collection:(this.collection=this.createCollection(),this.collection)}createCollection(){return O(this.filters,e=>e.map(({value:t,callback:s,key:i,comparator:n})=>({value:t,filterBy:i??s,check:n?n.name:"isLike"})))}}class xe{constructor(e,t,s){u(this,"filterHandler");u(this,"filterBy");u(this,"uid");u(this,"comparator");u(this,"callback");this.filterHandler=e,this.filterBy=t,this.uid="f_"+Math.random().toString(28).substring(2),this.comparator=s??M.isLike,this.callback=()=>null}set(e,t){t&&(this.comparator=t),this.filterHandler.set(e,this.filterBy,this.comparator,this.uid)}clear(){this.callback(),this.filterHandler.set(void 0,this.filterBy)}on(e,t){this.callback=t}}class ze{constructor(e,t){u(this,"filterHandler");u(this,"criteria");u(this,"filterBy");u(this,"selected");this.filterHandler=e,this.filterBy=t,this.criteria=[],this.selected=L([])}set(e,t=M.isLike){if(this.criteria.find(s=>s.value===e)?this.criteria=this.criteria.filter(s=>s.value!==e):this.criteria=[{value:e,comparator:t},...this.criteria],this.criteria.length===0)return this.clear();this.filterHandler.set(this.criteria,this.filterBy,M.whereIn),this.selected.set(this.criteria.map(s=>s.value))}getSelected(){return this.selected}clear(){this.criteria=[],this.selected.set([]),this.filterHandler.set(void 0,this.filterBy,M.whereIn)}}class Ge{constructor(e,t,s){u(this,"rawRows");u(this,"filteredRows");u(this,"callback");u(this,"precision");this.rawRows=e.rawRows,this.filteredRows=e.filteredRows,this.callback=D(t).callback,this.precision=s.precision}distinct(e=null){const s=B(this.rawRows).map(l=>this.callback(l)),n=(e?e(s):s).reduce((l,c)=>(l[c]=(l[c]??0)+1,l),{});return Object.entries(n).map(([l,c])=>({value:l,count:c}))}avg(e=null){return O(this.filteredRows,t=>{if(t.length===0)return 0;const s=t.map(n=>this.callback(n)).filter(Boolean),i=e?e(s):s;return this.round(i.reduce((n,l)=>n+l,0)/i.length)})}sum(e=null){return O(this.filteredRows,t=>{const s=t.map(n=>this.callback(n)),i=e?e(s):s;return this.round(i.reduce((n,l)=>n+l,0))})}bounds(e=null){const s=B(this.rawRows).map(n=>this.callback(n)),i=e?e(s):s;return[Math.min(...i.filter(Boolean)),Math.max(...i.filter(Boolean))]}setPrecision(e){this.precision=e}round(e){if(this.precision===0)return Math.round(e);const t=Math.pow(10,this.precision);return Math.round((e+Number.EPSILON)*t)/t}}class it{constructor(e=[],t={rowsPerPage:null}){u(this,"context");u(this,"sortHandler");u(this,"selectHandler");u(this,"pageHandler");u(this,"searchHandler");u(this,"filterHandler");u(this,"i18n");this.i18n=this.translate(t.i18n),this.context=new De(e,t),this.sortHandler=new Me(this.context),this.selectHandler=new We(this.context),this.pageHandler=new qe(this.context),this.searchHandler=new Ue(this.context),this.filterHandler=new Je(this.context)}setRows(e){this.context.rawRows.set(e),this.context.event.trigger("change"),this.applySort()}getRows(){return this.context.pagedRows}getAllRows(){return this.context.filteredRows}getRowCount(){return this.context.rowCount}getRowsPerPage(){return this.context.rowsPerPage}getPages(e={ellipsis:!1}){return e.ellipsis?this.context.pagesWithEllipsis:this.context.pages}getPageCount(){return this.context.pageCount}getPageNumber(){return this.context.pageNumber}setPage(e){switch(e){case"previous":return this.pageHandler.previous();case"next":return this.pageHandler.next();default:return this.pageHandler.goto(e)}}search(e,t=null){this.searchHandler.set(e,t)}clearSearch(){this.searchHandler.clear()}sort(e,t){this.setPage(1),this.sortHandler.set(e,t)}sortAsc(e,t){this.setPage(1),this.sortHandler.asc(e,t)}sortDesc(e,t){this.setPage(1),this.sortHandler.desc(e,t)}getSort(){return this.context.sort}applySort(e=null){this.sortHandler.apply(e)}defineSort(e,t){this.sortHandler.define(e,t)}clearSort(){this.sortHandler.clear()}filter(e,t,s=null){this.filterHandler.set(e,t,s)}getFilters(){return this.filterHandler.get()}createFilter(e,t){return new xe(this.filterHandler,e,t)}createAdvancedFilter(e){return new ze(this.filterHandler,e)}getFilterCount(){return this.context.filterCount}clearFilters(){this.filterHandler.clear()}select(e){this.selectHandler.set(e)}getSelected(){return this.context.selected}selectAll(e={}){this.context.selectScope.set(e.scope==="currentPage"?"currentPage":"all"),this.selectHandler.all(e.selectBy??null)}isAllSelected(){return this.context.isAllSelected}on(e,t){this.context.event.add(e,t)}createCalculation(e,t=null){return new Ge(this.context,e,{precision:(t==null?void 0:t.precision)??2})}translate(e){return{search:"Search...",show:"Show",entries:"entries",filter:"Filter",rowCount:"Showing {start} to {end} of {total} entries",noRows:"No entries found",previous:"Previous",next:"Next",...e}}update(e){console.log("%c%s","color:#e65100;background:#fff3e0;font-size:12px;border-radius:4px;padding:4px;text-align:center;","DataHandler.update(data) method is deprecated. Please use DataHandler.setRows(data) instead"),this.context.rawRows.set(e)}applySorting(e=null){this.applySort(e)}getSorted(){return this.getSort()}getTriggerChange(){return this.context.event.triggerChange}}export{it as D,rt as P,tt as R,et as S,Ze as T,$e as a,st as b};
