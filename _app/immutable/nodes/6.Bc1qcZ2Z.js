import{s as L,c as R,o as G,q as M,n as W}from"../chunks/scheduler.Cxdq5DjT.js";import{S as q,i as O,e as _,t as J,s as b,c as g,a as y,b as K,d as h,f as $,k as Q,l as v,o as P,g as k,h as p,j as U,q as E,r as j,u as w,v as B,w as H,x as N,y as A,z as F,C as X}from"../chunks/index.Bp_61F_m.js";import{e as S}from"../chunks/each.J0AVf1RG.js";import{i as Y}from"../chunks/insertStore.DYjMpW1P.js";import{a as Z}from"../chunks/annotationStore.D01fgoLY.js";import{g as ee}from"../chunks/generateGeneInsertSites.ozbo97IV.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.DkJRRaEQ.js";import{P as te}from"../chunks/ProgressRadial.BwNK8EGC.js";import{P as C}from"../chunks/plotly.cbd5aJyv.js";function V(f){let t,s,o;return s=new te({props:{value:void 0,width:"w-14",strokeLinecap:"round"}}),{c(){t=_("div"),H(s.$$.fragment),this.h()},l(r){t=g(r,"DIV",{class:!0});var e=y(t);N(s.$$.fragment,e),e.forEach(h),this.h()},h(){v(t,"class","flex items-center justify-center align-middle m-12")},m(r,e){k(r,t,e),A(s,t,null),o=!0},p:W,i(r){o||(E(s.$$.fragment,r),o=!0)},o(r){w(s.$$.fragment,r),o=!1},d(r){r&&h(t),F(s)}}}function ne(f){let t,s,o,r,e,l,a,i,n,m="The insert index is the number of inserts in a locus divided by the gene length.",x,c=f[1]&&V();return{c(){t=_("div"),s=_("header"),o=J(f[0]),r=b(),e=_("section"),l=_("div"),a=b(),c&&c.c(),i=b(),n=_("footer"),n.textContent=m,this.h()},l(d){t=g(d,"DIV",{class:!0});var u=y(t);s=g(u,"HEADER",{class:!0});var D=y(s);o=K(D,f[0]),D.forEach(h),r=$(u),e=g(u,"SECTION",{class:!0});var I=y(e);l=g(I,"DIV",{id:!0,style:!0}),y(l).forEach(h),a=$(I),c&&c.l(I),I.forEach(h),i=$(u),n=g(u,"FOOTER",{class:!0,"data-svelte-h":!0}),Q(n)!=="svelte-xdpvse"&&(n.textContent=m),u.forEach(h),this.h()},h(){v(s,"class","card-header"),v(l,"id",f[2]),P(l,"width","100%"),P(l,"height","100%"),v(e,"class","p-4"),v(n,"class","card-footer"),v(t,"class","card")},m(d,u){k(d,t,u),p(t,s),p(s,o),p(t,r),p(t,e),p(e,l),p(e,a),c&&c.m(e,null),p(t,i),p(t,n),x=!0},p(d,[u]){(!x||u&1)&&U(o,d[0]),d[1]?c?(c.p(d,u),u&2&&E(c,1)):(c=V(),c.c(),E(c,1),c.m(e,null)):c&&(j(),w(c,1,1,()=>{c=null}),B())},i(d){x||(E(c),x=!0)},o(d){w(c),x=!1},d(d){d&&h(t),c&&c.d()}}}function se(f,t,s){let o;R(f,Z,n=>s(4,o=n));let{filename:r}=t,{data:e}=t,l=`plotly-${r}`,a=!0;const i=()=>{const n=document.getElementById(l);n&&C.relayout(n,{width:n.clientWidth,height:n.clientHeight})};return G(async()=>{const n=e.map(d=>d.minus+d.plus),m=await ee(o.features,n,[],0,0),x={yaxis:{title:"Insert Index"},margin:{b:25,t:25}},c={x:m.map(d=>d.start),y:m.map(d=>d.insIndex),text:m.map(d=>d.name),textfont:{family:"Times New Roman"},textposition:"bottom center",type:"scatter",mode:"markers"};C.newPlot(l,[c],x),window.addEventListener("resize",i),s(1,a=!1)}),M(()=>{window.removeEventListener("resize",i)}),f.$$set=n=>{"filename"in n&&s(0,r=n.filename),"data"in n&&s(3,e=n.data)},[r,a,l,e]}class ae extends q{constructor(t){super(),O(this,t,se,ne,L,{filename:0,data:3})}}function T(f,t,s){const o=f.slice();return o[1]=t[s][0],o[2]=t[s][1],o[4]=s,o}function z(f){let t,s,o,r;return s=new ae({props:{filename:f[1],data:f[2].insertions}}),{c(){t=_("div"),H(s.$$.fragment),o=b(),this.h()},l(e){t=g(e,"DIV",{class:!0});var l=y(t);N(s.$$.fragment,l),o=$(l),l.forEach(h),this.h()},h(){v(t,"class","m-4")},m(e,l){k(e,t,l),A(s,t,null),p(t,o),r=!0},p(e,l){const a={};l&1&&(a.filename=e[1]),l&1&&(a.data=e[2].insertions),s.$set(a)},i(e){r||(E(s.$$.fragment,e),r=!0)},o(e){w(s.$$.fragment,e),r=!1},d(e){e&&h(t),F(s)}}}function re(f){let t,s,o,r=S(f[0]),e=[];for(let a=0;a<r.length;a+=1)e[a]=z(T(f,r,a));const l=a=>w(e[a],1,1,()=>{e[a]=null});return{c(){t=_("div"),s=_("div");for(let a=0;a<e.length;a+=1)e[a].c();this.h()},l(a){t=g(a,"DIV",{class:!0});var i=y(t);s=g(i,"DIV",{class:!0});var n=y(s);for(let m=0;m<e.length;m+=1)e[m].l(n);n.forEach(h),i.forEach(h),this.h()},h(){v(s,"class","grid grid-cols-1 2xl:grid-cols-2 gap-4"),v(t,"class","m-4")},m(a,i){k(a,t,i),p(t,s);for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(s,null);o=!0},p(a,[i]){if(i&1){r=S(a[0]);let n;for(n=0;n<r.length;n+=1){const m=T(a,r,n);e[n]?(e[n].p(m,i),E(e[n],1)):(e[n]=z(m),e[n].c(),E(e[n],1),e[n].m(s,null))}for(j(),n=r.length;n<e.length;n+=1)l(n);B()}},i(a){if(!o){for(let i=0;i<r.length;i+=1)E(e[i]);o=!0}},o(a){e=e.filter(Boolean);for(let i=0;i<e.length;i+=1)w(e[i]);o=!1},d(a){a&&h(t),X(e,a)}}}function oe(f,t,s){let o;return R(f,Y,r=>s(0,o=r)),[o]}class _e extends q{constructor(t){super(),O(this,t,oe,re,L,{})}}export{_e as component};
