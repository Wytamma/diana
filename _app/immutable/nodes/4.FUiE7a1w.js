import{s as Le,e as T,t as C,a as _,c as k,b as D,d as O,f as i,g as b,m as j,i as W,h as l,Q as Oe,j as ie,n as Fe,k as Pe,J as Ge,l as ze}from"../chunks/DfgCqy7z.js";import{S as He,i as Ce,b as N,d as A,m as P,t as w,g as Je,c as Qe,a as y,e as F}from"../chunks/P-XqeZIV.js";import{e as Re}from"../chunks/DvuRD1Iq.js";import{S as Ke,R as We,T as we,a as Ee,b as Xe,P as Ze,D as xe}from"../chunks/0eMk3Lon.js";import{a as Ie}from"../chunks/Chyq7ORs.js";function et(n){let e,t,r,h,s,$=je(n[2],n[0])+"",o,v,u;return{c(){e=T("button"),t=T("span"),r=C(n[1]),h=_(),s=T("span"),o=C($),this.h()},l(E){e=k(E,"BUTTON",{class:!0});var I=D(e);t=k(I,"SPAN",{class:!0});var g=D(t);r=O(g,n[1]),g.forEach(i),h=b(I),s=k(I,"SPAN",{class:!0});var Y=D(s);o=O(Y,$),Y.forEach(i),I.forEach(i),this.h()},h(){j(t,"class","font-semibold bg-surface-500 px-1 py-1"),j(s,"class","px-1 py-1 mr-1"),j(e,"class","inline-flex items-center rounded m-1 overflow-hidden border border-surface-200 [&>*]:pointer-events-none")},m(E,I){W(E,e,I),l(e,t),l(t,r),l(e,h),l(e,s),l(s,o),v||(u=Oe(e,"click",n[3]),v=!0)},p(E,[I]){I&2&&ie(r,E[1]),I&5&&$!==($=je(E[2],E[0])+"")&&ie(o,$)},i:Fe,o:Fe,d(E){E&&i(e),v=!1,u()}}}function je(n,e){return n.length>e?n.substring(0,e)+"...":n}function tt(n,e,t){let{keyName:r}=e,{value:h}=e,{maxLength:s=15}=e;function $(){s===h.length?t(0,s=15):t(0,s=h.length)}return n.$$set=o=>{"keyName"in o&&t(1,r=o.keyName),"value"in o&&t(2,h=o.value),"maxLength"in o&&t(0,s=o.maxLength)},[s,r,h,$]}class nt extends He{constructor(e){super(),Ce(this,e,tt,et,Le,{keyName:1,value:2,maxLength:0})}}function rt(n){let e,t,r,h;return{c(){e=T("th"),t=T("input"),this.h()},l(s){e=k(s,"TH",{class:!0});var $=D(e);t=k($,"INPUT",{type:!0,class:!0}),$.forEach(i),this.h()},h(){j(t,"type","checkbox"),j(t,"class","checkbox"),t.checked=n[0],j(e,"class","cursor-pointer select-none text-center")},m(s,$){W(s,e,$),l(e,t),r||(h=Oe(e,"click",n[3]),r=!0)},p(s,[$]){$&1&&(t.checked=s[0])},i:Fe,o:Fe,d(s){s&&i(e),r=!1,h()}}}function at(n,e,t){let r,h,{handler:s}=e;const $=s.isAllSelected();Pe(n,$,u=>t(0,h=u));const o=s.getSelected();Pe(n,o,u=>t(5,r=u));function v(){s.selectAll({selectBy:"_id"}),Ie.setFilteredFeatures(r)}return n.$$set=u=>{"handler"in u&&t(4,s=u.handler)},[h,$,o,v,s]}class lt extends He{constructor(e){super(),Ce(this,e,at,rt,Le,{handler:4})}}function qe(n,e,t){const r=n.slice();return r[9]=e[t],r}function Ve(n,e,t){const r=n.slice();return r[12]=e[t][0],r[13]=e[t][1],r}function st(n){let e;return{c(){e=C("Chromosome")},l(t){e=O(t,"Chromosome")},m(t,r){W(t,e,r)},d(t){t&&i(e)}}}function ot(n){let e;return{c(){e=C("Name")},l(t){e=O(t,"Name")},m(t,r){W(t,e,r)},d(t){t&&i(e)}}}function ft(n){let e;return{c(){e=C("Type")},l(t){e=O(t,"Type")},m(t,r){W(t,e,r)},d(t){t&&i(e)}}}function ut(n){let e;return{c(){e=C("Start")},l(t){e=O(t,"Start")},m(t,r){W(t,e,r)},d(t){t&&i(e)}}}function ht(n){let e;return{c(){e=C("End")},l(t){e=O(t,"End")},m(t,r){W(t,e,r)},d(t){t&&i(e)}}}function it(n){let e;return{c(){e=C("Strand")},l(t){e=O(t,"Strand")},m(t,r){W(t,e,r)},d(t){t&&i(e)}}}function $t(n){let e;return{c(){e=C("Attributes")},l(t){e=O(t,"Attributes")},m(t,r){W(t,e,r)},d(t){t&&i(e)}}}function Ue(n){let e,t;return e=new nt({props:{keyName:n[12],value:n[13]?n[13]:"",maxLength:15}}),{c(){N(e.$$.fragment)},l(r){A(e.$$.fragment,r)},m(r,h){P(e,r,h),t=!0},p(r,h){const s={};h&2&&(s.keyName=r[12]),h&2&&(s.value=r[13]?r[13]:""),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){y(e.$$.fragment,r),t=!1},d(r){F(e,r)}}}function Me(n){let e,t,r,h,s,$,o=n[9].seqId+"",v,u,E,I=n[9].attributes.Name+"",g,Y,V,le=n[9].type+"",G,ce,U,se=n[9].start+"",J,de,M,oe=n[9].stop+"",Q,me,B,z=n[9].strand+"",te,$e,ne,X,q,Z,Te;function fe(){return n[6](n[9])}let x=Re(Object.entries(n[9].attributes)),d=[];for(let p=0;p<x.length;p+=1)d[p]=Ue(Ve(n,x,p));const Se=p=>y(d[p],1,1,()=>{d[p]=null});return{c(){e=T("tr"),t=T("td"),r=T("input"),s=_(),$=T("td"),v=C(o),u=_(),E=T("td"),g=C(I),Y=_(),V=T("td"),G=C(le),ce=_(),U=T("td"),J=C(se),de=_(),M=T("td"),Q=C(oe),me=_(),B=T("td"),te=C(z),$e=_(),ne=T("td");for(let p=0;p<d.length;p+=1)d[p].c();X=_(),this.h()},l(p){e=k(p,"TR",{});var f=D(e);t=k(f,"TD",{class:!0});var m=D(t);r=k(m,"INPUT",{class:!0,type:!0}),m.forEach(i),s=b(f),$=k(f,"TD",{});var ue=D($);v=O(ue,o),ue.forEach(i),u=b(f),E=k(f,"TD",{});var re=D(E);g=O(re,I),re.forEach(i),Y=b(f),V=k(f,"TD",{});var ke=D(V);G=O(ke,le),ke.forEach(i),ce=b(f),U=k(f,"TD",{});var he=D(U);J=O(he,se),he.forEach(i),de=b(f),M=k(f,"TD",{});var Be=D(M);Q=O(Be,oe),Be.forEach(i),me=b(f),B=k(f,"TD",{});var ee=D(B);te=O(ee,z),ee.forEach(i),$e=b(f),ne=k(f,"TD",{});var ae=D(ne);for(let ge=0;ge<d.length;ge+=1)d[ge].l(ae);ae.forEach(i),X=b(f),f.forEach(i),this.h()},h(){j(r,"class","checkbox"),j(r,"type","checkbox"),r.checked=h=n[0].includes(n[9]._id),j(t,"class","text-center")},m(p,f){W(p,e,f),l(e,t),l(t,r),l(e,s),l(e,$),l($,v),l(e,u),l(e,E),l(E,g),l(e,Y),l(e,V),l(V,G),l(e,ce),l(e,U),l(U,J),l(e,de),l(e,M),l(M,Q),l(e,me),l(e,B),l(B,te),l(e,$e),l(e,ne);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(ne,null);l(e,X),q=!0,Z||(Te=Oe(r,"click",fe),Z=!0)},p(p,f){if(n=p,(!q||f&3&&h!==(h=n[0].includes(n[9]._id)))&&(r.checked=h),(!q||f&2)&&o!==(o=n[9].seqId+"")&&ie(v,o),(!q||f&2)&&I!==(I=n[9].attributes.Name+"")&&ie(g,I),(!q||f&2)&&le!==(le=n[9].type+"")&&ie(G,le),(!q||f&2)&&se!==(se=n[9].start+"")&&ie(J,se),(!q||f&2)&&oe!==(oe=n[9].stop+"")&&ie(Q,oe),(!q||f&2)&&z!==(z=n[9].strand+"")&&ie(te,z),f&2){x=Re(Object.entries(n[9].attributes));let m;for(m=0;m<x.length;m+=1){const ue=Ve(n,x,m);d[m]?(d[m].p(ue,f),w(d[m],1)):(d[m]=Ue(ue),d[m].c(),w(d[m],1),d[m].m(ne,null))}for(Je(),m=x.length;m<d.length;m+=1)Se(m);Qe()}},i(p){if(!q){for(let f=0;f<x.length;f+=1)w(d[f]);q=!0}},o(p){d=d.filter(Boolean);for(let f=0;f<d.length;f+=1)y(d[f]);q=!1},d(p){p&&i(e),Ge(d,p),Z=!1,Te()}}}function ct(n){let e,t,r,h,s,$,o,v,u,E,I,g,Y,V,le,G,ce,U,se,J,de,M,oe,Q,me,B,z,te=n[0].length+"",$e,ne,X,q,Z,Te,fe,x,d,Se,p,f,m,ue,re,ke,he,Be,ee,ae,ge,pe,De;r=new Ke({props:{handler:n[2]}}),s=new We({props:{handler:n[2]}}),E=new lt({props:{handler:n[2]}}),g=new we({props:{handler:n[2],orderBy:"seqId",$$slots:{default:[st]},$$scope:{ctx:n}}}),V=new we({props:{handler:n[2],orderBy:"attributes",$$slots:{default:[ot]},$$scope:{ctx:n}}}),G=new we({props:{handler:n[2],orderBy:"type",$$slots:{default:[ft]},$$scope:{ctx:n}}}),U=new we({props:{handler:n[2],orderBy:"start",$$slots:{default:[ut]},$$scope:{ctx:n}}}),J=new we({props:{handler:n[2],orderBy:"end",$$slots:{default:[ht]},$$scope:{ctx:n}}}),M=new we({props:{handler:n[2],orderBy:"strand",$$slots:{default:[it]},$$scope:{ctx:n}}}),Q=new we({props:{handler:n[2],orderBy:"attributes",$$slots:{default:[$t]},$$scope:{ctx:n}}}),X=new Ee({props:{handler:n[2],filterBy:"seqId"}}),Z=new Ee({props:{handler:n[2],filterBy:"attributes"}}),fe=new Ee({props:{handler:n[2],filterBy:"type"}}),d=new Ee({props:{handler:n[2],filterBy:"start"}}),p=new Ee({props:{handler:n[2],filterBy:"end"}}),m=new Ee({props:{handler:n[2],filterBy:"strand"}}),re=new Ee({props:{handler:n[2],filterBy:"attributes"}});let _e=Re(n[1]),S=[];for(let a=0;a<_e.length;a+=1)S[a]=Me(qe(n,_e,a));const Ye=a=>y(S[a],1,1,()=>{S[a]=null});return ae=new Xe({props:{handler:n[2]}}),pe=new Ze({props:{handler:n[2]}}),{c(){e=T("div"),t=T("header"),N(r.$$.fragment),h=_(),N(s.$$.fragment),$=_(),o=T("table"),v=T("thead"),u=T("tr"),N(E.$$.fragment),I=_(),N(g.$$.fragment),Y=_(),N(V.$$.fragment),le=_(),N(G.$$.fragment),ce=_(),N(U.$$.fragment),se=_(),N(J.$$.fragment),de=_(),N(M.$$.fragment),oe=_(),N(Q.$$.fragment),me=_(),B=T("tr"),z=T("th"),$e=C(te),ne=_(),N(X.$$.fragment),q=_(),N(Z.$$.fragment),Te=_(),N(fe.$$.fragment),x=_(),N(d.$$.fragment),Se=_(),N(p.$$.fragment),f=_(),N(m.$$.fragment),ue=_(),N(re.$$.fragment),ke=_(),he=T("tbody");for(let a=0;a<S.length;a+=1)S[a].c();Be=_(),ee=T("footer"),N(ae.$$.fragment),ge=_(),N(pe.$$.fragment),this.h()},l(a){e=k(a,"DIV",{class:!0});var c=D(e);t=k(c,"HEADER",{class:!0});var K=D(t);A(r.$$.fragment,K),h=b(K),A(s.$$.fragment,K),K.forEach(i),$=b(c),o=k(c,"TABLE",{class:!0});var be=D(o);v=k(be,"THEAD",{});var ve=D(v);u=k(ve,"TR",{});var L=D(u);A(E.$$.fragment,L),I=b(L),A(g.$$.fragment,L),Y=b(L),A(V.$$.fragment,L),le=b(L),A(G.$$.fragment,L),ce=b(L),A(U.$$.fragment,L),se=b(L),A(J.$$.fragment,L),de=b(L),A(M.$$.fragment,L),oe=b(L),A(Q.$$.fragment,L),L.forEach(i),me=b(ve),B=k(ve,"TR",{});var H=D(B);z=k(H,"TH",{class:!0});var Ne=D(z);$e=O(Ne,te),Ne.forEach(i),ne=b(H),A(X.$$.fragment,H),q=b(H),A(Z.$$.fragment,H),Te=b(H),A(fe.$$.fragment,H),x=b(H),A(d.$$.fragment,H),Se=b(H),A(p.$$.fragment,H),f=b(H),A(m.$$.fragment,H),ue=b(H),A(re.$$.fragment,H),H.forEach(i),ve.forEach(i),ke=b(be),he=k(be,"TBODY",{});var Ae=D(he);for(let ye=0;ye<S.length;ye+=1)S[ye].l(Ae);Ae.forEach(i),be.forEach(i),Be=b(c),ee=k(c,"FOOTER",{class:!0});var R=D(ee);A(ae.$$.fragment,R),ge=b(R),A(pe.$$.fragment,R),R.forEach(i),c.forEach(i),this.h()},h(){j(t,"class","flex justify-between gap-4"),j(z,"class","text-center"),j(o,"class","table table-hover table-compact w-full table-auto"),j(ee,"class","flex justify-between"),j(e,"class","overflow-x-auto space-y-4")},m(a,c){W(a,e,c),l(e,t),P(r,t,null),l(t,h),P(s,t,null),l(e,$),l(e,o),l(o,v),l(v,u),P(E,u,null),l(u,I),P(g,u,null),l(u,Y),P(V,u,null),l(u,le),P(G,u,null),l(u,ce),P(U,u,null),l(u,se),P(J,u,null),l(u,de),P(M,u,null),l(u,oe),P(Q,u,null),l(v,me),l(v,B),l(B,z),l(z,$e),l(B,ne),P(X,B,null),l(B,q),P(Z,B,null),l(B,Te),P(fe,B,null),l(B,x),P(d,B,null),l(B,Se),P(p,B,null),l(B,f),P(m,B,null),l(B,ue),P(re,B,null),l(o,ke),l(o,he);for(let K=0;K<S.length;K+=1)S[K]&&S[K].m(he,null);l(e,Be),l(e,ee),P(ae,ee,null),l(ee,ge),P(pe,ee,null),De=!0},p(a,[c]){const K={};c&65536&&(K.$$scope={dirty:c,ctx:a}),g.$set(K);const be={};c&65536&&(be.$$scope={dirty:c,ctx:a}),V.$set(be);const ve={};c&65536&&(ve.$$scope={dirty:c,ctx:a}),G.$set(ve);const L={};c&65536&&(L.$$scope={dirty:c,ctx:a}),U.$set(L);const H={};c&65536&&(H.$$scope={dirty:c,ctx:a}),J.$set(H);const Ne={};c&65536&&(Ne.$$scope={dirty:c,ctx:a}),M.$set(Ne);const Ae={};if(c&65536&&(Ae.$$scope={dirty:c,ctx:a}),Q.$set(Ae),(!De||c&1)&&te!==(te=a[0].length+"")&&ie($e,te),c&35){_e=Re(a[1]);let R;for(R=0;R<_e.length;R+=1){const ye=qe(a,_e,R);S[R]?(S[R].p(ye,c),w(S[R],1)):(S[R]=Me(ye),S[R].c(),w(S[R],1),S[R].m(he,null))}for(Je(),R=_e.length;R<S.length;R+=1)Ye(R);Qe()}},i(a){if(!De){w(r.$$.fragment,a),w(s.$$.fragment,a),w(E.$$.fragment,a),w(g.$$.fragment,a),w(V.$$.fragment,a),w(G.$$.fragment,a),w(U.$$.fragment,a),w(J.$$.fragment,a),w(M.$$.fragment,a),w(Q.$$.fragment,a),w(X.$$.fragment,a),w(Z.$$.fragment,a),w(fe.$$.fragment,a),w(d.$$.fragment,a),w(p.$$.fragment,a),w(m.$$.fragment,a),w(re.$$.fragment,a);for(let c=0;c<_e.length;c+=1)w(S[c]);w(ae.$$.fragment,a),w(pe.$$.fragment,a),De=!0}},o(a){y(r.$$.fragment,a),y(s.$$.fragment,a),y(E.$$.fragment,a),y(g.$$.fragment,a),y(V.$$.fragment,a),y(G.$$.fragment,a),y(U.$$.fragment,a),y(J.$$.fragment,a),y(M.$$.fragment,a),y(Q.$$.fragment,a),y(X.$$.fragment,a),y(Z.$$.fragment,a),y(fe.$$.fragment,a),y(d.$$.fragment,a),y(p.$$.fragment,a),y(m.$$.fragment,a),y(re.$$.fragment,a),S=S.filter(Boolean);for(let c=0;c<S.length;c+=1)y(S[c]);y(ae.$$.fragment,a),y(pe.$$.fragment,a),De=!1},d(a){a&&i(e),F(r),F(s),F(E),F(g),F(V),F(G),F(U),F(J),F(M),F(Q),F(X),F(Z),F(fe),F(d),F(p),F(m),F(re),Ge(S,a),F(ae),F(pe)}}}function dt(n,e,t){let r,h,s;Pe(n,Ie,g=>t(7,h=g));const $=h.features,o=new xe($,{rowsPerPage:5}),v=o.getRows();Pe(n,v,g=>t(1,s=g));const u=o.getSelected();Pe(n,u,g=>t(0,r=g)),o.on("change",()=>{u.set(h.filteredFeatures.map(g=>g._id))}),Ie.subscribe(g=>{u.set(g.filteredFeatures.map(Y=>Y._id))});function E(g){o.select(g),Ie.setFilteredFeatures(r)}return[r,s,o,v,u,E,g=>E(g._id)]}class mt extends He{constructor(e){super(),Ce(this,e,dt,ct,Le,{})}}function gt(n){let e,t,r='<h1 class="h1 mb-1">Features &amp; annotations</h1> <p>Explore and filter the features and annotations that will be used for downstream analysis.</p>',h,s,$;return s=new mt({}),{c(){e=T("div"),t=T("div"),t.innerHTML=r,h=_(),N(s.$$.fragment),this.h()},l(o){e=k(o,"DIV",{class:!0});var v=D(e);t=k(v,"DIV",{class:!0,"data-svelte-h":!0}),ze(t)!=="svelte-1fc3wog"&&(t.innerHTML=r),h=b(v),A(s.$$.fragment,v),v.forEach(i),this.h()},h(){j(t,"class","mb-4"),j(e,"class","m-4")},m(o,v){W(o,e,v),l(e,t),l(e,h),P(s,e,null),$=!0},p:Fe,i(o){$||(w(s.$$.fragment,o),$=!0)},o(o){y(s.$$.fragment,o),$=!1},d(o){o&&i(e),F(s)}}}class Et extends He{constructor(e){super(),Ce(this,e,null,gt,Le,{})}}export{Et as component};
