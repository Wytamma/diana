import{s as Pe,e as N,a as P,c as V,b as q,g as L,f as v,m as ae,i as M,h,I as fe,k as ue,t as J,d as K,n as le,j as ie,F as he,G as de,H as Te}from"../chunks/scheduler.Ctx98Cov.js";import{S as Le,i as Ge,b as R,d as B,m as j,t as w,g as we,c as ke,a as k,e as F,f as be}from"../chunks/index.DzosD7qk.js";import{e as U}from"../chunks/each.tnL4mEXE.js";import{S as Ne,R as Ve,T as ce,a as $e,b as qe,P as Me,D as Ye}from"../chunks/Datatable.svelte_svelte_type_style_lang.Ck4gLMND.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.HlYL--rL.js";import{T as ze,a as ve}from"../chunks/Tab.D0jmWT4o.js";import{i as Je}from"../chunks/insertStore.MaCQ88it.js";import{g as Ke}from"../chunks/generateGeneInsertSites.TkpiqTe1.js";import{a as Qe}from"../chunks/annotationStore.Dn3m1aBo.js";import{t as Ue}from"../chunks/TAStore.BMmLN0sp.js";function De(r,e,t){const n=r.slice();return n[7]=e[t],n}function Se(r,e,t){const n=r.slice();return n[10]=e[t],n}function Ce(r,e,t){const n=r.slice();return n[10]=e[t],n}function Re(r,e,t){const n=r.slice();return n[10]=e[t],n}function We(r){let e;return{c(){e=J("Name")},l(t){e=K(t,"Name")},m(t,n){M(t,e,n)},d(t){t&&v(e)}}}function Xe(r){let e;return{c(){e=J("Start")},l(t){e=K(t,"Start")},m(t,n){M(t,e,n)},d(t){t&&v(e)}}}function Ze(r){let e;return{c(){e=J("Length")},l(t){e=K(t,"Length")},m(t,n){M(t,e,n)},d(t){t&&v(e)}}}function ye(r){let e=r[10]+"",t;return{c(){t=J(e)},l(n){t=K(n,e)},m(n,l){M(n,t,l)},p:le,d(n){n&&v(t)}}}function Be(r){let e,t;return e=new ce({props:{handler:r[2],orderBy:r[10],$$slots:{default:[ye]},$$scope:{ctx:r}}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p(n,l){const u={};l&131072&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function je(r){let e,t;return e=new $e({props:{handler:r[2],filterBy:r[10]}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p:le,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function Fe(r){let e,t=parseFloat(r[7][r[10]]).toFixed(2)+"",n;return{c(){e=N("td"),n=J(t)},l(l){e=V(l,"TD",{});var u=q(e);n=K(u,t),u.forEach(v)},m(l,u){M(l,e,u),h(e,n)},p(l,u){u&1&&t!==(t=parseFloat(l[7][l[10]]).toFixed(2)+"")&&ie(n,t)},d(l){l&&v(e)}}}function Oe(r){let e,t,n=r[7].name+"",l,u,g,_=r[7].start+"",i,m,p,D=r[7].length+"",c,S,C,O=U(r[1]),o=[];for(let f=0;f<O.length;f+=1)o[f]=Fe(Se(r,O,f));return{c(){e=N("tr"),t=N("td"),l=J(n),u=P(),g=N("td"),i=J(_),m=P(),p=N("td"),c=J(D),S=P();for(let f=0;f<o.length;f+=1)o[f].c();C=P()},l(f){e=V(f,"TR",{});var d=q(e);t=V(d,"TD",{});var b=q(t);l=K(b,n),b.forEach(v),u=L(d),g=V(d,"TD",{});var G=q(g);i=K(G,_),G.forEach(v),m=L(d),p=V(d,"TD",{});var te=q(p);c=K(te,D),te.forEach(v),S=L(d);for(let Y=0;Y<o.length;Y+=1)o[Y].l(d);C=L(d),d.forEach(v)},m(f,d){M(f,e,d),h(e,t),h(t,l),h(e,u),h(e,g),h(g,i),h(e,m),h(e,p),h(p,c),h(e,S);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);h(e,C)},p(f,d){if(d&1&&n!==(n=f[7].name+"")&&ie(l,n),d&1&&_!==(_=f[7].start+"")&&ie(i,_),d&1&&D!==(D=f[7].length+"")&&ie(c,D),d&3){O=U(f[1]);let b;for(b=0;b<O.length;b+=1){const G=Se(f,O,b);o[b]?o[b].p(G,d):(o[b]=Fe(G),o[b].c(),o[b].m(e,C))}for(;b<o.length;b+=1)o[b].d(1);o.length=O.length}},d(f){f&&v(e),fe(o,f)}}}function xe(r){let e,t,n,l,u,g,_,i,m,p,D,c,S,C,O,o,f,d,b,G,te,Y,me,ge,ne,_e,Q,W,pe,X,oe;n=new Ne({props:{handler:r[2]}}),u=new Ve({props:{handler:r[2]}}),p=new ce({props:{handler:r[2],orderBy:"name",$$slots:{default:[We]},$$scope:{ctx:r}}}),c=new ce({props:{handler:r[2],orderBy:"start",$$slots:{default:[Xe]},$$scope:{ctx:r}}}),C=new ce({props:{handler:r[2],orderBy:"length",$$slots:{default:[Ze]},$$scope:{ctx:r}}});let Z=U(r[1]),E=[];for(let a=0;a<Z.length;a+=1)E[a]=Be(Re(r,Z,a));const He=a=>k(E[a],1,1,()=>{E[a]=null});d=new $e({props:{handler:r[2],filterBy:"name"}}),G=new $e({props:{handler:r[2],filterBy:"start"}}),Y=new $e({props:{handler:r[2],filterBy:"length"}});let y=U(r[1]),I=[];for(let a=0;a<y.length;a+=1)I[a]=je(Ce(r,y,a));const Ae=a=>k(I[a],1,1,()=>{I[a]=null});let re=U(r[0]),H=[];for(let a=0;a<re.length;a+=1)H[a]=Oe(De(r,re,a));return W=new qe({props:{handler:r[2]}}),X=new Me({props:{handler:r[2]}}),{c(){e=N("div"),t=N("header"),R(n.$$.fragment),l=P(),R(u.$$.fragment),g=P(),_=N("table"),i=N("thead"),m=N("tr"),R(p.$$.fragment),D=P(),R(c.$$.fragment),S=P(),R(C.$$.fragment),O=P();for(let a=0;a<E.length;a+=1)E[a].c();o=P(),f=N("tr"),R(d.$$.fragment),b=P(),R(G.$$.fragment),te=P(),R(Y.$$.fragment),me=P();for(let a=0;a<I.length;a+=1)I[a].c();ge=P(),ne=N("tbody");for(let a=0;a<H.length;a+=1)H[a].c();_e=P(),Q=N("footer"),R(W.$$.fragment),pe=P(),R(X.$$.fragment),this.h()},l(a){e=V(a,"DIV",{class:!0});var $=q(e);t=V($,"HEADER",{class:!0});var T=q(t);B(n.$$.fragment,T),l=L(T),B(u.$$.fragment,T),T.forEach(v),g=L($),_=V($,"TABLE",{class:!0});var x=q(_);i=V(x,"THEAD",{});var ee=q(i);m=V(ee,"TR",{});var s=q(m);B(p.$$.fragment,s),D=L(s),B(c.$$.fragment,s),S=L(s),B(C.$$.fragment,s),O=L(s);for(let z=0;z<E.length;z+=1)E[z].l(s);s.forEach(v),o=L(ee),f=V(ee,"TR",{});var A=q(f);B(d.$$.fragment,A),b=L(A),B(G.$$.fragment,A),te=L(A),B(Y.$$.fragment,A),me=L(A);for(let z=0;z<I.length;z+=1)I[z].l(A);A.forEach(v),ee.forEach(v),ge=L(x),ne=V(x,"TBODY",{});var Ie=q(ne);for(let z=0;z<H.length;z+=1)H[z].l(Ie);Ie.forEach(v),x.forEach(v),_e=L($),Q=V($,"FOOTER",{class:!0});var se=q(Q);B(W.$$.fragment,se),pe=L(se),B(X.$$.fragment,se),se.forEach(v),$.forEach(v),this.h()},h(){ae(t,"class","flex justify-between gap-4"),ae(_,"class","table table-hover table-compact w-full table-auto"),ae(Q,"class","flex justify-between"),ae(e,"class","overflow-x-auto space-y-4")},m(a,$){M(a,e,$),h(e,t),j(n,t,null),h(t,l),j(u,t,null),h(e,g),h(e,_),h(_,i),h(i,m),j(p,m,null),h(m,D),j(c,m,null),h(m,S),j(C,m,null),h(m,O);for(let T=0;T<E.length;T+=1)E[T]&&E[T].m(m,null);h(i,o),h(i,f),j(d,f,null),h(f,b),j(G,f,null),h(f,te),j(Y,f,null),h(f,me);for(let T=0;T<I.length;T+=1)I[T]&&I[T].m(f,null);h(_,ge),h(_,ne);for(let T=0;T<H.length;T+=1)H[T]&&H[T].m(ne,null);h(e,_e),h(e,Q),j(W,Q,null),h(Q,pe),j(X,Q,null),oe=!0},p(a,[$]){const T={};$&131072&&(T.$$scope={dirty:$,ctx:a}),p.$set(T);const x={};$&131072&&(x.$$scope={dirty:$,ctx:a}),c.$set(x);const ee={};if($&131072&&(ee.$$scope={dirty:$,ctx:a}),C.$set(ee),$&6){Z=U(a[1]);let s;for(s=0;s<Z.length;s+=1){const A=Re(a,Z,s);E[s]?(E[s].p(A,$),w(E[s],1)):(E[s]=Be(A),E[s].c(),w(E[s],1),E[s].m(m,null))}for(we(),s=Z.length;s<E.length;s+=1)He(s);ke()}if($&6){y=U(a[1]);let s;for(s=0;s<y.length;s+=1){const A=Ce(a,y,s);I[s]?(I[s].p(A,$),w(I[s],1)):(I[s]=je(A),I[s].c(),w(I[s],1),I[s].m(f,null))}for(we(),s=y.length;s<I.length;s+=1)Ae(s);ke()}if($&3){re=U(a[0]);let s;for(s=0;s<re.length;s+=1){const A=De(a,re,s);H[s]?H[s].p(A,$):(H[s]=Oe(A),H[s].c(),H[s].m(ne,null))}for(;s<H.length;s+=1)H[s].d(1);H.length=re.length}},i(a){if(!oe){w(n.$$.fragment,a),w(u.$$.fragment,a),w(p.$$.fragment,a),w(c.$$.fragment,a),w(C.$$.fragment,a);for(let $=0;$<Z.length;$+=1)w(E[$]);w(d.$$.fragment,a),w(G.$$.fragment,a),w(Y.$$.fragment,a);for(let $=0;$<y.length;$+=1)w(I[$]);w(W.$$.fragment,a),w(X.$$.fragment,a),oe=!0}},o(a){k(n.$$.fragment,a),k(u.$$.fragment,a),k(p.$$.fragment,a),k(c.$$.fragment,a),k(C.$$.fragment,a),E=E.filter(Boolean);for(let $=0;$<E.length;$+=1)k(E[$]);k(d.$$.fragment,a),k(G.$$.fragment,a),k(Y.$$.fragment,a),I=I.filter(Boolean);for(let $=0;$<I.length;$+=1)k(I[$]);k(W.$$.fragment,a),k(X.$$.fragment,a),oe=!1},d(a){a&&v(e),F(n),F(u),F(p),F(c),F(C),fe(E,a),F(d),F(G),F(Y),fe(I,a),fe(H,a),F(W),F(X)}}}function et(r,e,t){let n,{data:l}=e,{column:u}=e;const g=Object.keys(l[0]).sort();let _=[];for(const p of l){let D={};for(const[c,S]of Object.entries(p))D[c]=S[u],D.name=S.name,D.start=S.start,D.length=S.geneLength;_.push(D)}const i=new Ye(_,{rowsPerPage:5}),m=i.getRows();return ue(r,m,p=>t(0,n=p)),r.$$set=p=>{"data"in p&&t(4,l=p.data),"column"in p&&t(5,u=p.column)},[n,g,i,m,l,u]}class Ee extends Le{constructor(e){super(),Ge(this,e,et,xe,Pe,{data:4,column:5})}}function tt(r){let e;return{c(){e=J("Read Counts")},l(t){e=K(t,"Read Counts")},m(t,n){M(t,e,n)},d(t){t&&v(e)}}}function nt(r){let e;return{c(){e=J("Insert Count")},l(t){e=K(t,"Insert Count")},m(t,n){M(t,e,n)},d(t){t&&v(e)}}}function rt(r){let e;return{c(){e=J("Insert Index")},l(t){e=K(t,"Insert Index")},m(t,n){M(t,e,n)},d(t){t&&v(e)}}}function at(r){let e,t,n,l,u,g,_,i,m;function p(o){r[2](o)}let D={name:"readCount",value:"readCount",$$slots:{default:[tt]},$$scope:{ctx:r}};r[0]!==void 0&&(D.group=r[0]),e=new ve({props:D}),he.push(()=>be(e,"group",p));function c(o){r[3](o)}let S={name:"insertCount",value:"insertCount",$$slots:{default:[nt]},$$scope:{ctx:r}};r[0]!==void 0&&(S.group=r[0]),l=new ve({props:S}),he.push(()=>be(l,"group",c));function C(o){r[4](o)}let O={name:"insertIndex",value:"insertIndex",$$slots:{default:[rt]},$$scope:{ctx:r}};return r[0]!==void 0&&(O.group=r[0]),_=new ve({props:O}),he.push(()=>be(_,"group",C)),{c(){R(e.$$.fragment),n=P(),R(l.$$.fragment),g=P(),R(_.$$.fragment)},l(o){B(e.$$.fragment,o),n=L(o),B(l.$$.fragment,o),g=L(o),B(_.$$.fragment,o)},m(o,f){j(e,o,f),M(o,n,f),j(l,o,f),M(o,g,f),j(_,o,f),m=!0},p(o,f){const d={};f&1024&&(d.$$scope={dirty:f,ctx:o}),!t&&f&1&&(t=!0,d.group=o[0],de(()=>t=!1)),e.$set(d);const b={};f&1024&&(b.$$scope={dirty:f,ctx:o}),!u&&f&1&&(u=!0,b.group=o[0],de(()=>u=!1)),l.$set(b);const G={};f&1024&&(G.$$scope={dirty:f,ctx:o}),!i&&f&1&&(i=!0,G.group=o[0],de(()=>i=!1)),_.$set(G)},i(o){m||(w(e.$$.fragment,o),w(l.$$.fragment,o),w(_.$$.fragment,o),m=!0)},o(o){k(e.$$.fragment,o),k(l.$$.fragment,o),k(_.$$.fragment,o),m=!1},d(o){o&&(v(n),v(g)),F(e,o),F(l,o),F(_,o)}}}function lt(r){let e,t;return e=new Ee({props:{data:r[1],column:"readCount"}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p:le,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function ot(r){let e,t;return e=new Ee({props:{data:r[1],column:"insertCount"}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p:le,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function st(r){let e,t;return e=new Ee({props:{data:r[1],column:"insIndex"}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p:le,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function ft(r){let e,t,n,l;const u=[st,ot,lt],g=[];function _(i,m){return i[0]=="insertIndex"?0:i[0]=="insertCount"?1:i[0]=="readCount"?2:-1}return~(e=_(r))&&(t=g[e]=u[e](r)),{c(){t&&t.c(),n=Te()},l(i){t&&t.l(i),n=Te()},m(i,m){~e&&g[e].m(i,m),M(i,n,m),l=!0},p(i,m){let p=e;e=_(i),e===p?~e&&g[e].p(i,m):(t&&(we(),k(g[p],1,1,()=>{g[p]=null}),ke()),~e?(t=g[e],t?t.p(i,m):(t=g[e]=u[e](i),t.c()),w(t,1),t.m(n.parentNode,n)):t=null)},i(i){l||(w(t),l=!0)},o(i){k(t),l=!1},d(i){i&&v(n),~e&&g[e].d(i)}}}function ut(r){let e,t,n;return t=new ze({props:{$$slots:{panel:[ft],default:[at]},$$scope:{ctx:r}}}),{c(){e=N("div"),R(t.$$.fragment),this.h()},l(l){e=V(l,"DIV",{class:!0});var u=q(e);B(t.$$.fragment,u),u.forEach(v),this.h()},h(){ae(e,"class","m-4")},m(l,u){M(l,e,u),j(t,e,null),n=!0},p(l,[u]){const g={};u&1025&&(g.$$scope={dirty:u,ctx:l}),t.$set(g)},i(l){n||(w(t.$$.fragment,l),n=!0)},o(l){k(t.$$.fragment,l),n=!1},d(l){l&&v(e),F(t)}}}function it(r,e,t){let n,l;ue(r,Ue,c=>t(6,c)),ue(r,Qe,c=>t(7,n=c)),ue(r,Je,c=>t(8,l=c));let u="insertIndex";const g={};for(const[c,S]of l){const C=S.map(o=>o.minus+o.plus),O=Ke(n.features,C);g[c]=O}const _=Math.max(...Object.values(g).map(c=>c.length)),i=[];for(let c=0;c<_;c++){const S={};for(const[C,O]of Object.entries(g))O[c]&&(S[C]=O[c]);i.push(S)}function m(c){u=c,t(0,u)}function p(c){u=c,t(0,u)}function D(c){u=c,t(0,u)}return[u,i,m,p,D]}class wt extends Le{constructor(e){super(),Ge(this,e,it,ut,Pe,{})}}export{wt as component};
