import{s as W,e as P,c as w,b as y,f as _,p as J,i as b,k as B,E as X,x as Y,F as M,a as F,g as j,G as N,H as K,I as Z,t as C,d as S,h as v,j as x}from"../chunks/scheduler.Cnzm-Pn7.js";import{S as tt,i as et,b as D,d as R,m as G,t as H,a as V,e as A,f as U}from"../chunks/index.BWxcAyja.js";import{e as L}from"../chunks/each.SoU_5gPK.js";import{g as nt}from"../chunks/generateGeneInsertSites.ozbo97IV.js";import{a as ot}from"../chunks/annotationStore.CSH3VeDA.js";import{i as at}from"../chunks/insertStore.2CzxKJCQ.js";import{P as st}from"../chunks/plotly.cbd5aJyv.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.aA2OJerz.js";import{T as rt,a as z}from"../chunks/Tab.Ml3Vmoq9.js";import{t as it}from"../chunks/TAStore.auniZptI.js";function O(r,e,t){const o=r.slice();return o[12]=e[t],o[14]=t,o}function lt(r){let e;return{c(){e=C("Read Counts")},l(t){e=S(t,"Read Counts")},m(t,o){b(t,e,o)},d(t){t&&_(e)}}}function ut(r){let e;return{c(){e=C("Insert Count")},l(t){e=S(t,"Insert Count")},m(t,o){b(t,e,o)},d(t){t&&_(e)}}}function ft(r){let e;return{c(){e=C("Insert Index")},l(t){e=S(t,"Insert Index")},m(t,o){b(t,e,o)},d(t){t&&_(e)}}}function pt(r){let e,t,o,n,i,s,f,c,g;function I(a){r[2](a)}let p={name:"readCount",value:"readCount",$$slots:{default:[lt]},$$scope:{ctx:r}};r[0]!==void 0&&(p.group=r[0]),e=new z({props:p}),M.push(()=>U(e,"group",I));function m(a){r[3](a)}let $={name:"insertCount",value:"insertCount",$$slots:{default:[ut]},$$scope:{ctx:r}};r[0]!==void 0&&($.group=r[0]),n=new z({props:$}),M.push(()=>U(n,"group",m));function q(a){r[4](a)}let l={name:"insertIndex",value:"insertIndex",$$slots:{default:[ft]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.group=r[0]),f=new z({props:l}),M.push(()=>U(f,"group",q)),{c(){D(e.$$.fragment),o=F(),D(n.$$.fragment),s=F(),D(f.$$.fragment)},l(a){R(e.$$.fragment,a),o=j(a),R(n.$$.fragment,a),s=j(a),R(f.$$.fragment,a)},m(a,u){G(e,a,u),b(a,o,u),G(n,a,u),b(a,s,u),G(f,a,u),g=!0},p(a,u){const d={};u&32768&&(d.$$scope={dirty:u,ctx:a}),!t&&u&1&&(t=!0,d.group=a[0],N(()=>t=!1)),e.$set(d);const h={};u&32768&&(h.$$scope={dirty:u,ctx:a}),!i&&u&1&&(i=!0,h.group=a[0],N(()=>i=!1)),n.$set(h);const E={};u&32768&&(E.$$scope={dirty:u,ctx:a}),!c&&u&1&&(c=!0,E.group=a[0],N(()=>c=!1)),f.$set(E)},i(a){g||(H(e.$$.fragment,a),H(n.$$.fragment,a),H(f.$$.fragment,a),g=!0)},o(a){V(e.$$.fragment,a),V(n.$$.fragment,a),V(f.$$.fragment,a),g=!1},d(a){a&&(_(o),_(s)),A(e,a),A(n,a),A(f,a)}}}function Q(r){let e,t,o=r[12]+"",n,i,s,f,c,g,I;return{c(){e=P("div"),t=P("h3"),n=C(o),i=C(" - "),s=C(r[0]),f=F(),c=P("div"),I=F(),this.h()},l(p){e=w(p,"DIV",{});var m=y(e);t=w(m,"H3",{});var $=y(t);n=S($,o),i=S($," - "),s=S($,r[0]),$.forEach(_),f=j(m),c=w(m,"DIV",{id:!0}),y(c).forEach(_),I=j(m),m.forEach(_),this.h()},h(){J(c,"id",g=`plotly-histogram-${r[0]}-${r[14]}`)},m(p,m){b(p,e,m),v(e,t),v(t,n),v(t,i),v(t,s),v(e,f),v(e,c),v(e,I)},p(p,m){m&1&&x(s,p[0]),m&1&&g!==(g=`plotly-histogram-${p[0]}-${p[14]}`)&&J(c,"id",g)},d(p){p&&_(e)}}}function mt(r){let e,t=L(r[1].sort()),o=[];for(let n=0;n<t.length;n+=1)o[n]=Q(O(r,t,n));return{c(){for(let n=0;n<o.length;n+=1)o[n].c();e=K()},l(n){for(let i=0;i<o.length;i+=1)o[i].l(n);e=K()},m(n,i){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(n,i);b(n,e,i)},p(n,i){if(i&3){t=L(n[1].sort());let s;for(s=0;s<t.length;s+=1){const f=O(n,t,s);o[s]?o[s].p(f,i):(o[s]=Q(f),o[s].c(),o[s].m(e.parentNode,e))}for(;s<o.length;s+=1)o[s].d(1);o.length=t.length}},d(n){n&&_(e),Z(o,n)}}}function ct(r){let e,t,o;return t=new rt({props:{$$slots:{panel:[mt],default:[pt]},$$scope:{ctx:r}}}),{c(){e=P("div"),D(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var i=y(e);R(t.$$.fragment,i),i.forEach(_),this.h()},h(){J(e,"class","m-4")},m(n,i){b(n,e,i),G(t,e,null),o=!0},p(n,[i]){const s={};i&32769&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(H(t.$$.fragment,n),o=!0)},o(n){V(t.$$.fragment,n),o=!1},d(n){n&&_(e),A(t)}}}function _t(r,e,t){let o,n,i;B(r,it,l=>t(5,o=l)),B(r,ot,l=>t(6,n=l)),B(r,at,l=>t(7,i=l));let s="insertIndex";const f=Array.from(i.keys()),c=Array.from(i.values());function g(l){const a=l.map(u=>u.minus+u.plus);return nt(n.features,a,o,0,0)}function I(l,a,u){const d={title:`Histogram of ${u}`,xaxis:{title:`${u}`},yaxis:{title:"Count"}};document.getElementById(l)&&st.newPlot(l,[a],d)}function p(l){c.forEach((a,u)=>{const d=g(a);let h;l==="readCount"?h={x:d.map(k=>k.readCount),type:"histogram"}:l==="insertCount"?h={x:d.map(k=>k.insertCount),type:"histogram"}:l==="insertIndex"&&(h={x:d.map(k=>k.insIndex),type:"histogram"});const E=`plotly-histogram-${l}-${u}`,T=f[u];I(E,h,T)})}X(()=>{p(s)}),Y(()=>{p(s)});function m(l){s=l,t(0,s)}function $(l){s=l,t(0,s)}function q(l){s=l,t(0,s)}return[s,f,m,$,q]}class kt extends tt{constructor(e){super(),et(this,e,_t,ct,W,{})}}export{kt as component};
