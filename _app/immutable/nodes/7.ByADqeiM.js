import{s as R,e as p,t as F,a as k,c as _,b as y,d as G,f as h,g as D,o as W,p as v,u as P,i as S,h as g,j as J,k as z,E as K,M as Q,n as U,I as X}from"../chunks/scheduler.Cnzm-Pn7.js";import{S as L,i as A,t as E,g as O,a as x,c as j,b as q,d as H,m as M,e as N}from"../chunks/index.BWxcAyja.js";import{e as B}from"../chunks/each.SoU_5gPK.js";import{i as Y}from"../chunks/insertStore.2CzxKJCQ.js";import{a as Z}from"../chunks/annotationStore.DGj68on5.js";import{g as ee}from"../chunks/generateGeneInsertSites.ozbo97IV.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.aA2OJerz.js";import{P as te}from"../chunks/ProgressRadial.ILNWxSmG.js";import{P as b}from"../chunks/plotly.cbd5aJyv.js";function T(d){let t,a,r;return a=new te({props:{value:void 0,width:"w-14",strokeLinecap:"round"}}),{c(){t=p("div"),q(a.$$.fragment),this.h()},l(o){t=_(o,"DIV",{class:!0});var e=y(t);H(a.$$.fragment,e),e.forEach(h),this.h()},h(){v(t,"class","flex items-center justify-center align-middle m-12")},m(o,e){S(o,t,e),M(a,t,null),r=!0},p:U,i(o){r||(E(a.$$.fragment,o),r=!0)},o(o){x(a.$$.fragment,o),r=!1},d(o){o&&h(t),N(a)}}}function ae(d){let t,a,r,o,e,i,n,c,s,l="The insert index is the number of inserts in a locus divided by the locus length.",I,f=d[1]&&T();return{c(){t=p("div"),a=p("header"),r=F(d[0]),o=k(),e=p("section"),i=p("div"),n=k(),f&&f.c(),c=k(),s=p("footer"),s.textContent=l,this.h()},l(u){t=_(u,"DIV",{class:!0});var m=y(t);a=_(m,"HEADER",{class:!0});var $=y(a);r=G($,d[0]),$.forEach(h),o=D(m),e=_(m,"SECTION",{class:!0});var w=y(e);i=_(w,"DIV",{id:!0,style:!0}),y(i).forEach(h),n=D(w),f&&f.l(w),w.forEach(h),c=D(m),s=_(m,"FOOTER",{class:!0,"data-svelte-h":!0}),W(s)!=="svelte-v6qryd"&&(s.textContent=l),m.forEach(h),this.h()},h(){v(a,"class","card-header"),v(i,"id",d[2]),P(i,"width","100%"),P(i,"height","100%"),v(e,"class","p-4"),v(s,"class","card-footer"),v(t,"class","card")},m(u,m){S(u,t,m),g(t,a),g(a,r),g(t,o),g(t,e),g(e,i),g(e,n),f&&f.m(e,null),g(t,c),g(t,s),I=!0},p(u,[m]){(!I||m&1)&&J(r,u[0]),u[1]?f?(f.p(u,m),m&2&&E(f,1)):(f=T(),f.c(),E(f,1),f.m(e,null)):f&&(O(),x(f,1,1,()=>{f=null}),j())},i(u){I||(E(f),I=!0)},o(u){x(f),I=!1},d(u){u&&h(t),f&&f.d()}}}function ne(d,t,a){let r;z(d,Z,l=>a(4,r=l));let{filename:o}=t,{data:e}=t,i=`plotly-${o}`,n=!0;const c=()=>{const l=document.getElementById(i);l&&b.relayout(l,{width:l.clientWidth,height:l.clientHeight})},s=()=>{b.downloadImage(document.getElementById(i),{format:"svg",filename:o||"plot"})};return K(async()=>{const l=await ee(r.features,e,[],0,0),I={yaxis:{title:"Insert Index"},xaxis:{zeroline:!1,rangemode:"nonnegative"},margin:{b:25,t:25,r:25},barmode:"overlay",modebar:{orientation:"v"}},f={modeBarButtonsToRemove:["autoScale2d"],responsive:!0,displaylogo:!1,modeBarButtonsToAdd:[{name:"Download plot as svg",icon:b.Icons.camera,click:s}]},u={x:l.map(m=>m.start),y:l.map(m=>m.insIndex),text:l.map(m=>m.name),textfont:{family:"Times New Roman"},textposition:"bottom center",type:"scatter",mode:"markers"};b.newPlot(i,[u],I,f),window.addEventListener("resize",c),a(1,n=!1)}),Q(()=>{window.removeEventListener("resize",c)}),d.$$set=l=>{"filename"in l&&a(0,o=l.filename),"data"in l&&a(3,e=l.data)},[o,n,i,e]}class oe extends L{constructor(t){super(),A(this,t,ne,ae,R,{filename:0,data:3})}}function V(d,t,a){const r=d.slice();return r[1]=t[a][0],r[2]=t[a][1],r[4]=a,r}function C(d){let t,a,r,o;return a=new oe({props:{filename:d[1],data:d[2].total}}),{c(){t=p("div"),q(a.$$.fragment),r=k(),this.h()},l(e){t=_(e,"DIV",{class:!0});var i=y(t);H(a.$$.fragment,i),r=D(i),i.forEach(h),this.h()},h(){v(t,"class","m-4")},m(e,i){S(e,t,i),M(a,t,null),g(t,r),o=!0},p(e,i){const n={};i&1&&(n.filename=e[1]),i&1&&(n.data=e[2].total),a.$set(n)},i(e){o||(E(a.$$.fragment,e),o=!0)},o(e){x(a.$$.fragment,e),o=!1},d(e){e&&h(t),N(a)}}}function se(d){let t,a,r,o=B(d[0]),e=[];for(let n=0;n<o.length;n+=1)e[n]=C(V(d,o,n));const i=n=>x(e[n],1,1,()=>{e[n]=null});return{c(){t=p("div"),a=p("div");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=_(n,"DIV",{class:!0});var c=y(t);a=_(c,"DIV",{class:!0});var s=y(a);for(let l=0;l<e.length;l+=1)e[l].l(s);s.forEach(h),c.forEach(h),this.h()},h(){v(a,"class","grid grid-cols-1 2xl:grid-cols-2 gap-4"),v(t,"class","m-4")},m(n,c){S(n,t,c),g(t,a);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(a,null);r=!0},p(n,[c]){if(c&1){o=B(n[0]);let s;for(s=0;s<o.length;s+=1){const l=V(n,o,s);e[s]?(e[s].p(l,c),E(e[s],1)):(e[s]=C(l),e[s].c(),E(e[s],1),e[s].m(a,null))}for(O(),s=o.length;s<e.length;s+=1)i(s);j()}},i(n){if(!r){for(let c=0;c<o.length;c+=1)E(e[c]);r=!0}},o(n){e=e.filter(Boolean);for(let c=0;c<e.length;c+=1)x(e[c]);r=!1},d(n){n&&h(t),X(e,n)}}}function re(d,t,a){let r;return z(d,Y,o=>a(0,r=o)),[r]}class pe extends L{constructor(t){super(),A(this,t,re,se,R,{})}}export{pe as component};
