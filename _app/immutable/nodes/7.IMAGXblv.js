import{s as T,e as w,c as y,b as D,f as _,m as J,i as I,k as B,E as W,x as X,F as M,a as j,g as q,G as N,H as K,I as Y,t as C,d as E,h as v,j as Z}from"../chunks/scheduler.Ctx98Cov.js";import{S as x,i as tt,b as R,d as G,m as H,t as V,a as A,e as F,f as U}from"../chunks/index.DzosD7qk.js";import{e as L}from"../chunks/each.tnL4mEXE.js";import{g as et}from"../chunks/generateGeneInsertSites.BEXrlg2W.js";import{a as nt}from"../chunks/annotationStore.CzCgp2Ox.js";import{i as ot}from"../chunks/insertStore.Bo2G9Fro.js";import{P as at}from"../chunks/plotly.KXwo0Jee.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.HlYL--rL.js";import{T as st,a as z}from"../chunks/Tab.D0jmWT4o.js";import{t as rt}from"../chunks/TAStore.BXt4gxhj.js";function O(r,e,t){const a=r.slice();return a[12]=e[t],a[14]=t,a}function it(r){let e;return{c(){e=C("Read Counts")},l(t){e=E(t,"Read Counts")},m(t,a){I(t,e,a)},d(t){t&&_(e)}}}function lt(r){let e;return{c(){e=C("Insert Count")},l(t){e=E(t,"Insert Count")},m(t,a){I(t,e,a)},d(t){t&&_(e)}}}function ut(r){let e;return{c(){e=C("Insert Index")},l(t){e=E(t,"Insert Index")},m(t,a){I(t,e,a)},d(t){t&&_(e)}}}function ft(r){let e,t,a,n,s,i,f,c,g;function h(o){r[2](o)}let p={name:"readCount",value:"readCount",$$slots:{default:[it]},$$scope:{ctx:r}};r[0]!==void 0&&(p.group=r[0]),e=new z({props:p}),M.push(()=>U(e,"group",h));function m(o){r[3](o)}let $={name:"insertCount",value:"insertCount",$$slots:{default:[lt]},$$scope:{ctx:r}};r[0]!==void 0&&($.group=r[0]),n=new z({props:$}),M.push(()=>U(n,"group",m));function l(o){r[4](o)}let b={name:"insertIndex",value:"insertIndex",$$slots:{default:[ut]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.group=r[0]),f=new z({props:b}),M.push(()=>U(f,"group",l)),{c(){R(e.$$.fragment),a=j(),R(n.$$.fragment),i=j(),R(f.$$.fragment)},l(o){G(e.$$.fragment,o),a=q(o),G(n.$$.fragment,o),i=q(o),G(f.$$.fragment,o)},m(o,u){H(e,o,u),I(o,a,u),H(n,o,u),I(o,i,u),H(f,o,u),g=!0},p(o,u){const d={};u&32768&&(d.$$scope={dirty:u,ctx:o}),!t&&u&1&&(t=!0,d.group=o[0],N(()=>t=!1)),e.$set(d);const S={};u&32768&&(S.$$scope={dirty:u,ctx:o}),!s&&u&1&&(s=!0,S.group=o[0],N(()=>s=!1)),n.$set(S);const k={};u&32768&&(k.$$scope={dirty:u,ctx:o}),!c&&u&1&&(c=!0,k.group=o[0],N(()=>c=!1)),f.$set(k)},i(o){g||(V(e.$$.fragment,o),V(n.$$.fragment,o),V(f.$$.fragment,o),g=!0)},o(o){A(e.$$.fragment,o),A(n.$$.fragment,o),A(f.$$.fragment,o),g=!1},d(o){o&&(_(a),_(i)),F(e,o),F(n,o),F(f,o)}}}function Q(r){let e,t,a=r[12]+"",n,s,i,f,c,g,h;return{c(){e=w("div"),t=w("h3"),n=C(a),s=C(" - "),i=C(r[0]),f=j(),c=w("div"),h=j(),this.h()},l(p){e=y(p,"DIV",{});var m=D(e);t=y(m,"H3",{});var $=D(t);n=E($,a),s=E($," - "),i=E($,r[0]),$.forEach(_),f=q(m),c=y(m,"DIV",{id:!0}),D(c).forEach(_),h=q(m),m.forEach(_),this.h()},h(){J(c,"id",g=`plotly-histogram-${r[0]}-${r[14]}`)},m(p,m){I(p,e,m),v(e,t),v(t,n),v(t,s),v(t,i),v(e,f),v(e,c),v(e,h)},p(p,m){m&1&&Z(i,p[0]),m&1&&g!==(g=`plotly-histogram-${p[0]}-${p[14]}`)&&J(c,"id",g)},d(p){p&&_(e)}}}function pt(r){let e,t=L(r[1].sort()),a=[];for(let n=0;n<t.length;n+=1)a[n]=Q(O(r,t,n));return{c(){for(let n=0;n<a.length;n+=1)a[n].c();e=K()},l(n){for(let s=0;s<a.length;s+=1)a[s].l(n);e=K()},m(n,s){for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(n,s);I(n,e,s)},p(n,s){if(s&3){t=L(n[1].sort());let i;for(i=0;i<t.length;i+=1){const f=O(n,t,i);a[i]?a[i].p(f,s):(a[i]=Q(f),a[i].c(),a[i].m(e.parentNode,e))}for(;i<a.length;i+=1)a[i].d(1);a.length=t.length}},d(n){n&&_(e),Y(a,n)}}}function mt(r){let e,t,a;return t=new st({props:{$$slots:{panel:[pt],default:[ft]},$$scope:{ctx:r}}}),{c(){e=w("div"),R(t.$$.fragment),this.h()},l(n){e=y(n,"DIV",{class:!0});var s=D(e);G(t.$$.fragment,s),s.forEach(_),this.h()},h(){J(e,"class","m-4")},m(n,s){I(n,e,s),H(t,e,null),a=!0},p(n,[s]){const i={};s&32769&&(i.$$scope={dirty:s,ctx:n}),t.$set(i)},i(n){a||(V(t.$$.fragment,n),a=!0)},o(n){A(t.$$.fragment,n),a=!1},d(n){n&&_(e),F(t)}}}function ct(r,e,t){let a,n;B(r,rt,l=>t(5,l)),B(r,nt,l=>t(6,a=l)),B(r,ot,l=>t(7,n=l));let s="insertIndex";const i=Array.from(n.keys()),f=Array.from(n.values());function c(l){const b=l.map(o=>o.minus+o.plus);return et(a.features,b)}function g(l,b,o){const u={title:`Histogram of ${o}`,xaxis:{title:`${o}`},yaxis:{title:"Count"}};document.getElementById(l)&&at.newPlot(l,[b],u)}function h(l){f.forEach((b,o)=>{const u=c(b);let d;l==="readCount"?d={x:u.map(P=>P.readCount),type:"histogram"}:l==="insertCount"?d={x:u.map(P=>P.insertCount),type:"histogram"}:l==="insertIndex"&&(d={x:u.map(P=>P.insIndex),type:"histogram"});const S=`plotly-histogram-${l}-${o}`,k=i[o];g(S,d,k)})}W(()=>{h(s)}),X(()=>{h(s)});function p(l){s=l,t(0,s)}function m(l){s=l,t(0,s)}function $(l){s=l,t(0,s)}return[s,i,p,m,$]}class St extends x{constructor(e){super(),tt(this,e,ct,mt,T,{})}}export{St as component};
