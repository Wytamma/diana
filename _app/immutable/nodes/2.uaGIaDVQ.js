import{s as Y,y as Q,A as ce,e as E,a as N,c as y,b as F,g as W,f as k,O as ie,p as g,v as q,i as U,h as z,P as w,B as fe,C as ue,D as de,J as Be,Q as oe,w as Ae,z as re,R as A,F as Te,t as Z,o as O,d as x,n as X,W as Ge,L as He,j as ze,G as Ue,I as Oe,k as pe,S as qe}from"../chunks/scheduler.Cnzm-Pn7.js";import{S as $,i as ee,t as j,g as J,a as B,c as K,f as Ne,b as te,d as le,m as se,e as ne}from"../chunks/index.BWxcAyja.js";import{e as Ee}from"../chunks/each.SoU_5gPK.js";import{g as Je}from"../chunks/stores.9yxo98nw.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.aA2OJerz.js";import{g as We}from"../chunks/spread.CN4WR7uZ.js";import{P as Ke}from"../chunks/ProgressRadial.ILNWxSmG.js";import{a as Qe}from"../chunks/annotationStore.DGj68on5.js";import{i as ae}from"../chunks/insertStore.BQt5VxlP.js";import{t as Xe}from"../chunks/TAStore.Br7d3jbf.js";import{r as Ie}from"../chunks/refStore.BAK9rk7l.js";import{i as ye}from"../chunks/igvStore.BiOSav-K.js";const Ye=t=>({}),Ce=t=>({}),Ze=t=>({}),De=t=>({}),xe=t=>({}),Le=t=>({});function Se(t){let e,l,s;const i=t[18].lead,n=ce(i,t,t[17],Le);return{c(){e=E("div"),n&&n.c(),this.h()},l(a){e=y(a,"DIV",{class:!0});var f=F(e);n&&n.l(f),f.forEach(k),this.h()},h(){g(e,"class",l="dropzone-lead "+t[5])},m(a,f){U(a,e,f),n&&n.m(e,null),s=!0},p(a,f){n&&n.p&&(!s||f[0]&131072)&&fe(n,i,a,a[17],s?de(i,a[17],f,xe):ue(a[17]),Le),(!s||f[0]&32&&l!==(l="dropzone-lead "+a[5]))&&g(e,"class",l)},i(a){s||(j(n,a),s=!0)},o(a){B(n,a),s=!1},d(a){a&&k(e),n&&n.d(a)}}}function $e(t){let e,l="Upload a file",s;return{c(){e=E("strong"),e.textContent=l,s=Z(" or drag and drop")},l(i){e=y(i,"STRONG",{"data-svelte-h":!0}),O(e)!=="svelte-13uz6lq"&&(e.textContent=l),s=x(i," or drag and drop")},m(i,n){U(i,e,n),U(i,s,n)},p:X,d(i){i&&(k(e),k(s))}}}function Ve(t){let e,l,s;const i=t[18].meta,n=ce(i,t,t[17],Ce);return{c(){e=E("small"),n&&n.c(),this.h()},l(a){e=y(a,"SMALL",{class:!0});var f=F(e);n&&n.l(f),f.forEach(k),this.h()},h(){g(e,"class",l="dropzone-meta "+t[7])},m(a,f){U(a,e,f),n&&n.m(e,null),s=!0},p(a,f){n&&n.p&&(!s||f[0]&131072)&&fe(n,i,a,a[17],s?de(i,a[17],f,Ye):ue(a[17]),Ce),(!s||f[0]&128&&l!==(l="dropzone-meta "+a[7]))&&g(e,"class",l)},i(a){s||(j(n,a),s=!0)},o(a){B(n,a),s=!1},d(a){a&&k(e),n&&n.d(a)}}}function et(t){let e,l,s,i,n,a,f,b,p,C,I,S,u,T,D,R,L=[{type:"file"},{name:t[2]},{class:s="dropzone-input "+t[9]},t[11]()],d={};for(let c=0;c<L.length;c+=1)d=Q(d,L[c]);let o=t[13].lead&&Se(t);const _=t[18].message,v=ce(_,t,t[17],De),M=v||$e();let m=t[13].meta&&Ve(t);return{c(){e=E("div"),l=E("input"),i=N(),n=E("div"),a=E("div"),o&&o.c(),f=N(),b=E("div"),M&&M.c(),C=N(),m&&m.c(),this.h()},l(c){e=y(c,"DIV",{class:!0,"data-testid":!0});var h=F(e);l=y(h,"INPUT",{type:!0,name:!0,class:!0}),i=W(h),n=y(h,"DIV",{class:!0});var P=F(n);a=y(P,"DIV",{class:!0});var V=F(a);o&&o.l(V),f=W(V),b=y(V,"DIV",{class:!0});var H=F(b);M&&M.l(H),H.forEach(k),C=W(V),m&&m.l(V),V.forEach(k),P.forEach(k),h.forEach(k),this.h()},h(){ie(l,d),g(b,"class",p="dropzone-message "+t[6]),g(a,"class",I="dropzone-interface-text "+t[4]),g(n,"class",S="dropzone-interface "+t[8]+" "+t[3]),g(e,"class",u="dropzone "+t[10]),g(e,"data-testid","file-dropzone"),q(e,"opacity-50",t[12].disabled)},m(c,h){U(c,e,h),z(e,l),l.autofocus&&l.focus(),t[32](l),z(e,i),z(e,n),z(n,a),o&&o.m(a,null),z(a,f),z(a,b),M&&M.m(b,null),z(a,C),m&&m.m(a,null),T=!0,D||(R=[w(l,"change",t[31]),w(l,"change",t[19]),w(l,"dragenter",t[20]),w(l,"dragover",t[21]),w(l,"dragleave",t[22]),w(l,"drop",t[23]),w(l,"click",t[24]),w(l,"keydown",t[25]),w(l,"keyup",t[26]),w(l,"keypress",t[27]),w(l,"focus",t[28]),w(l,"focusin",t[29]),w(l,"focusout",t[30])],D=!0)},p(c,h){ie(l,d=We(L,[{type:"file"},(!T||h[0]&4)&&{name:c[2]},(!T||h[0]&512&&s!==(s="dropzone-input "+c[9]))&&{class:s},c[11]()])),c[13].lead?o?(o.p(c,h),h[0]&8192&&j(o,1)):(o=Se(c),o.c(),j(o,1),o.m(a,f)):o&&(J(),B(o,1,1,()=>{o=null}),K()),v&&v.p&&(!T||h[0]&131072)&&fe(v,_,c,c[17],T?de(_,c[17],h,Ze):ue(c[17]),De),(!T||h[0]&64&&p!==(p="dropzone-message "+c[6]))&&g(b,"class",p),c[13].meta?m?(m.p(c,h),h[0]&8192&&j(m,1)):(m=Ve(c),m.c(),j(m,1),m.m(a,null)):m&&(J(),B(m,1,1,()=>{m=null}),K()),(!T||h[0]&16&&I!==(I="dropzone-interface-text "+c[4]))&&g(a,"class",I),(!T||h[0]&264&&S!==(S="dropzone-interface "+c[8]+" "+c[3]))&&g(n,"class",S),(!T||h[0]&1024&&u!==(u="dropzone "+c[10]))&&g(e,"class",u),(!T||h[0]&5120)&&q(e,"opacity-50",c[12].disabled)},i(c){T||(j(o),j(M,c),j(m),T=!0)},o(c){B(o),B(M,c),B(m),T=!1},d(c){c&&k(e),t[32](null),o&&o.d(),M&&M.d(c),m&&m.d(),D=!1,Be(R)}}}const tt="textarea relative flex justify-center items-center",lt="w-full absolute top-0 left-0 right-0 bottom-0 z-[1] opacity-0 disabled:!opacity-0 cursor-pointer",st="flex justify-center items-center text-center";function nt(t,e,l){let s,i,n;const a=["files","fileInput","name","border","padding","rounded","regionInterface","regionInterfaceText","slotLead","slotMessage","slotMeta"];let f=oe(e,a),{$$slots:b={},$$scope:p}=e;const C=Ae(b);let{files:I=void 0}=e,{fileInput:S=void 0}=e,{name:u}=e,{border:T="border-2 border-dashed"}=e,{padding:D="p-4 py-8"}=e,{rounded:R="rounded-container-token"}=e,{regionInterface:L=""}=e,{regionInterfaceText:d=""}=e,{slotLead:o="mb-4"}=e,{slotMessage:_=""}=e,{slotMeta:v="opacity-75"}=e;function M(){return delete f.class,f}function m(r){A.call(this,t,r)}function c(r){A.call(this,t,r)}function h(r){A.call(this,t,r)}function P(r){A.call(this,t,r)}function V(r){A.call(this,t,r)}function H(r){A.call(this,t,r)}function G(r){A.call(this,t,r)}function me(r){A.call(this,t,r)}function he(r){A.call(this,t,r)}function ge(r){A.call(this,t,r)}function _e(r){A.call(this,t,r)}function ve(r){A.call(this,t,r)}function be(){I=this.files,l(0,I)}function ke(r){Te[r?"unshift":"push"](()=>{S=r,l(1,S)})}return t.$$set=r=>{l(33,e=Q(Q({},e),re(r))),l(12,f=oe(e,a)),"files"in r&&l(0,I=r.files),"fileInput"in r&&l(1,S=r.fileInput),"name"in r&&l(2,u=r.name),"border"in r&&l(14,T=r.border),"padding"in r&&l(15,D=r.padding),"rounded"in r&&l(16,R=r.rounded),"regionInterface"in r&&l(3,L=r.regionInterface),"regionInterfaceText"in r&&l(4,d=r.regionInterfaceText),"slotLead"in r&&l(5,o=r.slotLead),"slotMessage"in r&&l(6,_=r.slotMessage),"slotMeta"in r&&l(7,v=r.slotMeta),"$$scope"in r&&l(17,p=r.$$scope)},t.$$.update=()=>{l(10,s=`${tt} ${T} ${D} ${R} ${e.class??""}`)},l(9,i=`${lt}`),l(8,n=`${st}`),e=re(e),[I,S,u,L,d,o,_,v,n,i,s,M,f,C,T,D,R,p,b,m,c,h,P,V,H,G,me,he,ge,_e,ve,be,ke]}class at extends ${constructor(e){super(),ee(this,e,nt,et,Y,{files:0,fileInput:1,name:2,border:14,padding:15,rounded:16,regionInterface:3,regionInterfaceText:4,slotLead:5,slotMessage:6,slotMeta:7},null,[-1,-1])}}function Re(t){let e,l;const s=t[22].default,i=ce(s,t,t[21],null);return{c(){e=E("div"),i&&i.c(),this.h()},l(n){e=y(n,"DIV",{class:!0});var a=F(e);i&&i.l(a),a.forEach(k),this.h()},h(){g(e,"class","slide-toggle-text ml-3")},m(n,a){U(n,e,a),i&&i.m(e,null),l=!0},p(n,a){i&&i.p&&(!l||a[0]&2097152)&&fe(i,s,n,n[21],l?de(s,n[21],a,null):ue(n[21]),null)},i(n){l||(j(i,n),l=!0)},o(n){B(i,n),l=!1},d(n){n&&k(e),i&&i.d(n)}}}function it(t){let e,l,s,i,n,a,f,b,p,C,I,S,u,T,D,R=[{type:"checkbox"},{class:"slide-toggle-input hidden"},{name:t[1]},t[8](),{disabled:i=t[9].disabled}],L={};for(let o=0;o<R.length;o+=1)L=Q(L,R[o]);let d=t[10].default&&Re(t);return{c(){e=E("div"),l=E("label"),s=E("input"),n=N(),a=E("div"),f=E("div"),C=N(),d&&d.c(),this.h()},l(o){e=y(o,"DIV",{id:!0,class:!0,"data-testid":!0,role:!0,"aria-label":!0,"aria-checked":!0,tabindex:!0});var _=F(e);l=y(_,"LABEL",{class:!0});var v=F(l);s=y(v,"INPUT",{type:!0,class:!0,name:!0}),n=W(v),a=y(v,"DIV",{class:!0});var M=F(a);f=y(M,"DIV",{class:!0}),F(f).forEach(k),M.forEach(k),C=W(v),d&&d.l(v),v.forEach(k),_.forEach(k),this.h()},h(){ie(s,L),g(f,"class",b="slide-toggle-thumb "+t[3]),q(f,"cursor-not-allowed",t[9].disabled),g(a,"class",p="slide-toggle-track "+t[4]),q(a,"cursor-not-allowed",t[9].disabled),g(l,"class",I="slide-toggle-label "+t[5]),g(e,"id",t[2]),g(e,"class",S="slide-toggle "+t[6]),g(e,"data-testid","slide-toggle"),g(e,"role","switch"),g(e,"aria-label",t[2]),g(e,"aria-checked",t[0]),g(e,"tabindex","0")},m(o,_){U(o,e,_),z(e,l),z(l,s),s.autofocus&&s.focus(),s.checked=t[0],z(l,n),z(l,a),z(a,f),z(l,C),d&&d.m(l,null),u=!0,T||(D=[w(s,"change",t[31]),w(s,"click",t[23]),w(s,"keydown",t[24]),w(s,"keyup",t[25]),w(s,"keypress",t[26]),w(s,"mouseover",t[27]),w(s,"change",t[28]),w(s,"focus",t[29]),w(s,"blur",t[30]),w(e,"keydown",t[7])],T=!0)},p(o,_){ie(s,L=We(R,[{type:"checkbox"},{class:"slide-toggle-input hidden"},(!u||_[0]&2)&&{name:o[1]},o[8](),(!u||_[0]&512&&i!==(i=o[9].disabled))&&{disabled:i}])),_[0]&1&&(s.checked=o[0]),(!u||_[0]&8&&b!==(b="slide-toggle-thumb "+o[3]))&&g(f,"class",b),(!u||_[0]&520)&&q(f,"cursor-not-allowed",o[9].disabled),(!u||_[0]&16&&p!==(p="slide-toggle-track "+o[4]))&&g(a,"class",p),(!u||_[0]&528)&&q(a,"cursor-not-allowed",o[9].disabled),o[10].default?d?(d.p(o,_),_[0]&1024&&j(d,1)):(d=Re(o),d.c(),j(d,1),d.m(l,null)):d&&(J(),B(d,1,1,()=>{d=null}),K()),(!u||_[0]&32&&I!==(I="slide-toggle-label "+o[5]))&&g(l,"class",I),(!u||_[0]&4)&&g(e,"id",o[2]),(!u||_[0]&64&&S!==(S="slide-toggle "+o[6]))&&g(e,"class",S),(!u||_[0]&4)&&g(e,"aria-label",o[2]),(!u||_[0]&1)&&g(e,"aria-checked",o[0])},i(o){u||(j(d),u=!0)},o(o){B(d),u=!1},d(o){o&&k(e),d&&d.d(),T=!1,Be(D)}}}const ot="inline-block",rt="unstyled flex items-center",ct="flex transition-all duration-[200ms] cursor-pointer",ft="w-[50%] h-full scale-[0.8] transition-all duration-[200ms] shadow";function ut(t,e,l){let s,i,n,a,f,b,p,C;const I=["name","checked","size","background","active","border","rounded","label"];let S=oe(e,I),{$$slots:u={},$$scope:T}=e;const D=Ae(u),R=Ge();let{name:L}=e,{checked:d=!1}=e,{size:o="md"}=e,{background:_="bg-surface-400 dark:bg-surface-700"}=e,{active:v="bg-surface-900 dark:bg-surface-300"}=e,{border:M=""}=e,{rounded:m="rounded-full"}=e,{label:c=""}=e,h;switch(o){case"sm":h="w-12 h-6";break;case"lg":h="w-20 h-10";break;default:h="w-16 h-8"}function P(r){["Enter","Space"].includes(r.code)&&(r.preventDefault(),R("keyup",r),r.currentTarget.firstChild.click())}function V(){return delete S.class,S}function H(r){A.call(this,t,r)}function G(r){A.call(this,t,r)}function me(r){A.call(this,t,r)}function he(r){A.call(this,t,r)}function ge(r){A.call(this,t,r)}function _e(r){A.call(this,t,r)}function ve(r){A.call(this,t,r)}function be(r){A.call(this,t,r)}function ke(){d=this.checked,l(0,d)}return t.$$set=r=>{l(9,e=Q(Q({},e),re(r))),l(33,S=oe(e,I)),"name"in r&&l(1,L=r.name),"checked"in r&&l(0,d=r.checked),"size"in r&&l(11,o=r.size),"background"in r&&l(12,_=r.background),"active"in r&&l(13,v=r.active),"border"in r&&l(14,M=r.border),"rounded"in r&&l(15,m=r.rounded),"label"in r&&l(2,c=r.label),"$$scope"in r&&l(21,T=r.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&12289&&l(19,s=d?v:`${_} cursor-pointer`),t.$$.dirty[0]&1&&l(18,i=d?"bg-white/75":"bg-white"),t.$$.dirty[0]&1&&l(17,n=d?"translate-x-full":""),l(20,a=e.disabled===!0?"opacity-50":"hover:brightness-[105%] dark:hover:brightness-110 cursor-pointer"),l(6,f=`${ot} ${m} ${a} ${e.class??""}`),t.$$.dirty[0]&638976&&l(4,p=`${ct} ${M} ${m} ${h} ${s}`),t.$$.dirty[0]&425984&&l(3,C=`${ft} ${m} ${i} ${n}`)},l(5,b=`${rt}`),e=re(e),[d,L,c,C,p,b,f,P,V,e,D,o,_,v,M,m,h,n,i,s,a,T,u,H,G,me,he,ge,_e,ve,be,ke]}class dt extends ${constructor(e){super(),ee(this,e,ut,it,Y,{name:1,checked:0,size:11,background:12,active:13,border:14,rounded:15,label:2},null,[-1,-1])}}function mt(t){let e,l=t[0]?"Control":"Condition",s;return{c(){e=E("span"),s=Z(l),this.h()},l(i){e=y(i,"SPAN",{class:!0});var n=F(e);s=x(n,l),n.forEach(k),this.h()},h(){g(e,"class","chip variant-filled")},m(i,n){U(i,e,n),z(e,s)},p(i,n){n&1&&l!==(l=i[0]?"Control":"Condition")&&ze(s,l)},d(i){i&&k(e)}}}function ht(t){let e,l,s,i,n,a,f,b,p,C,I,S='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',u,T,D;function R(d){t[4](d)}let L={size:"sm",class:"mr-2",name:"slide",$$slots:{default:[mt]},$$scope:{ctx:t}};return t[0]!==void 0&&(L.checked=t[0]),b=new dt({props:L}),Te.push(()=>Ne(b,"checked",R)),b.$on("change",t[5]),{c(){e=E("div"),l=E("div"),s=E("div"),i=E("p"),n=Z(t[1]),a=N(),f=E("div"),te(b.$$.fragment),C=N(),I=E("button"),I.innerHTML=S,this.h()},l(d){e=y(d,"DIV",{class:!0});var o=F(e);l=y(o,"DIV",{class:!0});var _=F(l);s=y(_,"DIV",{class:!0});var v=F(s);i=y(v,"P",{class:!0});var M=F(i);n=x(M,t[1]),M.forEach(k),a=W(v),f=y(v,"DIV",{class:!0});var m=F(f);le(b.$$.fragment,m),C=W(m),I=y(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(I)!=="svelte-1m0ck3b"&&(I.innerHTML=S),m.forEach(k),v.forEach(k),_.forEach(k),o.forEach(k),this.h()},h(){g(i,"class","text-lg"),g(I,"type","button"),g(I,"class","btn-icon hover:variant-ringed-tertiary"),g(f,"class","flex justify-between items-center min-w-56"),g(s,"class","flex flex-col space-y-2"),g(l,"class","flex justify-center items-center space-x-2"),g(e,"class","card p-4 m-2")},m(d,o){U(d,e,o),z(e,l),z(l,s),z(s,i),z(i,n),z(s,a),z(s,f),se(b,f,null),z(f,C),z(f,I),u=!0,T||(D=w(I,"click",function(){He(t[2])&&t[2].apply(this,arguments)}),T=!0)},p(d,[o]){t=d,(!u||o&2)&&ze(n,t[1]);const _={};o&65&&(_.$$scope={dirty:o,ctx:t}),!p&&o&1&&(p=!0,_.checked=t[0],Ue(()=>p=!1)),b.$set(_)},i(d){u||(j(b.$$.fragment,d),u=!0)},o(d){B(b.$$.fragment,d),u=!1},d(d){d&&k(e),ne(b),T=!1,D()}}}function gt(t,e,l){let{filename:s}=e,{onRemove:i}=e,{onToggle:n}=e,{isControl:a=!1}=e;function f(p){a=p,l(0,a)}const b=()=>n(a);return t.$$set=p=>{"filename"in p&&l(1,s=p.filename),"onRemove"in p&&l(2,i=p.onRemove),"onToggle"in p&&l(3,n=p.onToggle),"isControl"in p&&l(0,a=p.isControl)},[a,s,i,n,f,b]}class _t extends ${constructor(e){super(),ee(this,e,gt,ht,Y,{filename:1,onRemove:2,onToggle:3,isControl:0})}}function vt(t){let e,l,s,i,n,a,f,b,p="Reference",C,I,S='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',u,T;return{c(){e=E("div"),l=E("div"),s=E("div"),i=E("p"),n=Z(t[0]),a=N(),f=E("div"),b=E("span"),b.textContent=p,C=N(),I=E("button"),I.innerHTML=S,this.h()},l(D){e=y(D,"DIV",{class:!0});var R=F(e);l=y(R,"DIV",{class:!0});var L=F(l);s=y(L,"DIV",{class:!0});var d=F(s);i=y(d,"P",{class:!0});var o=F(i);n=x(o,t[0]),o.forEach(k),a=W(d),f=y(d,"DIV",{class:!0});var _=F(f);b=y(_,"SPAN",{class:!0,"data-svelte-h":!0}),O(b)!=="svelte-1hcg9ig"&&(b.textContent=p),C=W(_),I=y(_,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(I)!=="svelte-1m0ck3b"&&(I.innerHTML=S),_.forEach(k),d.forEach(k),L.forEach(k),R.forEach(k),this.h()},h(){g(i,"class","text-lg"),g(b,"class","chip variant-filled"),g(I,"type","button"),g(I,"class","btn-icon hover:variant-ringed-tertiary"),g(f,"class","flex justify-between items-center min-w-56"),g(s,"class","flex flex-col space-y-2"),g(l,"class","flex justify-center items-center space-x-2"),g(e,"class","card p-4 m-2")},m(D,R){U(D,e,R),z(e,l),z(l,s),z(s,i),z(i,n),z(s,a),z(s,f),z(f,b),z(f,C),z(f,I),u||(T=w(I,"click",function(){He(t[1])&&t[1].apply(this,arguments)}),u=!0)},p(D,[R]){t=D,R&1&&ze(n,t[0])},i:X,o:X,d(D){D&&k(e),u=!1,T()}}}function bt(t,e,l){let{filename:s}=e,{onRemove:i}=e;return t.$$set=n=>{"filename"in n&&l(0,s=n.filename),"onRemove"in n&&l(1,i=n.onRemove)},[s,i]}class kt extends ${constructor(e){super(),ee(this,e,bt,vt,Y,{filename:0,onRemove:1})}}function Me(t,e,l){const s=t.slice();return s[12]=e[l],s[14]=l,s}function pt(t){let e,l='<span class="font-semibold">Load files</span> or drag and drop';return{c(){e=E("p"),e.innerHTML=l,this.h()},l(s){e=y(s,"P",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-10rbgmq"&&(e.innerHTML=l),this.h()},h(){g(e,"class","text-xl ")},m(s,i){U(s,e,i)},p:X,d(s){s&&k(e)}}}function It(t){let e;return{c(){e=Z("Only GFF+FASTA and .userplot files allowed.")},l(l){e=x(l,"Only GFF+FASTA and .userplot files allowed.")},m(l,s){U(l,e,s)},d(l){l&&k(e)}}}function Pe(t){let e,l;return e=new kt({props:{filename:t[2].name,onRemove:Ie.reset}}),{c(){te(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,i){se(e,s,i),l=!0},p(s,i){const n={};i&4&&(n.filename=s[2].name),e.$set(n)},i(s){l||(j(e.$$.fragment,s),l=!0)},o(s){B(e.$$.fragment,s),l=!1},d(s){ne(e,s)}}}function je(t){let e,l;function s(...n){return t[6](t[12],...n)}function i(){return t[7](t[12])}return e=new _t({props:{isControl:t[12][1].isControl,onToggle:s,onRemove:i,filename:t[12][0]}}),{c(){te(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,a){se(e,n,a),l=!0},p(n,a){t=n;const f={};a&8&&(f.isControl=t[12][1].isControl),a&8&&(f.onToggle=s),a&8&&(f.onRemove=i),a&8&&(f.filename=t[12][0]),e.$set(f)},i(n){l||(j(e.$$.fragment,n),l=!0)},o(n){B(e.$$.fragment,n),l=!1},d(n){ne(e,n)}}}function Fe(t){let e,l,s;return l=new Ke({props:{value:void 0,width:"w-14",strokeLinecap:"round"}}),{c(){e=E("div"),te(l.$$.fragment),this.h()},l(i){e=y(i,"DIV",{class:!0});var n=F(e);le(l.$$.fragment,n),n.forEach(k),this.h()},h(){g(e,"class","flex items-center justify-center align-middle ml-8")},m(i,n){U(i,e,n),se(l,e,null),s=!0},p:X,i(i){s||(j(l.$$.fragment,i),s=!0)},o(i){B(l.$$.fragment,i),s=!1},d(i){i&&k(e),ne(l)}}}function Tt(t){let e,l,s,i='<div><section class="img-bg svelte-cmzijy"></section></div> <img class="logo-img mt-16 svelte-cmzijy" src="/images/logo2.png" alt="Skeleton Logo"/>',n,a,f="Transposon Sequencing Data Visualiser",b,p,C,I,S,u,T,D,R;function L(c){t[5](c)}let d={name:"files",multiple:!0,$$slots:{meta:[It],message:[pt]},$$scope:{ctx:t}};t[0]!==void 0&&(d.files=t[0]),C=new at({props:d}),Te.push(()=>Ne(C,"files",L)),C.$on("change",t[4]),C.$on("click",we),C.$on("drop",we);let o=t[2].name&&Pe(t),_=Ee(t[3]),v=[];for(let c=0;c<_.length;c+=1)v[c]=je(Me(t,_,c));const M=c=>B(v[c],1,1,()=>{v[c]=null});let m=t[1]&&Fe();return{c(){e=E("div"),l=E("div"),s=E("figure"),s.innerHTML=i,n=N(),a=E("h1"),a.textContent=f,b=N(),p=E("div"),te(C.$$.fragment),S=N(),u=E("div"),o&&o.c(),T=N();for(let c=0;c<v.length;c+=1)v[c].c();D=N(),m&&m.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var h=F(e);l=y(h,"DIV",{class:!0});var P=F(l);s=y(P,"FIGURE",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-vpzkus"&&(s.innerHTML=i),n=W(P),a=y(P,"H1",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-1opypuh"&&(a.textContent=f),b=W(P),p=y(P,"DIV",{class:!0});var V=F(p);le(C.$$.fragment,V),V.forEach(k),P.forEach(k),h.forEach(k),S=W(c),u=y(c,"DIV",{class:!0});var H=F(u);o&&o.l(H),T=W(H);for(let G=0;G<v.length;G+=1)v[G].l(H);D=W(H),m&&m.l(H),H.forEach(k),this.h()},h(){g(s,"class","card-hover rounded-full svelte-cmzijy"),g(a,"class","text-center text-3xl"),g(p,"class","px-2 w-full"),g(l,"class","flex flex-col items-center align-baseline justify-center max-w-4xl space-y-10 "),g(e,"class","flex justify-center mb-6"),g(u,"class","flex flex-wrap space-4 justify-center")},m(c,h){U(c,e,h),z(e,l),z(l,s),z(l,n),z(l,a),z(l,b),z(l,p),se(C,p,null),U(c,S,h),U(c,u,h),o&&o.m(u,null),z(u,T);for(let P=0;P<v.length;P+=1)v[P]&&v[P].m(u,null);z(u,D),m&&m.m(u,null),R=!0},p(c,[h]){const P={};if(h&32768&&(P.$$scope={dirty:h,ctx:c}),!I&&h&1&&(I=!0,P.files=c[0],Ue(()=>I=!1)),C.$set(P),c[2].name?o?(o.p(c,h),h&4&&j(o,1)):(o=Pe(c),o.c(),j(o,1),o.m(u,T)):o&&(J(),B(o,1,1,()=>{o=null}),K()),h&8){_=Ee(c[3]);let V;for(V=0;V<_.length;V+=1){const H=Me(c,_,V);v[V]?(v[V].p(H,h),j(v[V],1)):(v[V]=je(H),v[V].c(),j(v[V],1),v[V].m(u,D))}for(J(),V=_.length;V<v.length;V+=1)M(V);K()}c[1]?m?(m.p(c,h),h&2&&j(m,1)):(m=Fe(),m.c(),j(m,1),m.m(u,null)):m&&(J(),B(m,1,1,()=>{m=null}),K())},i(c){if(!R){j(C.$$.fragment,c),j(o);for(let h=0;h<_.length;h+=1)j(v[h]);j(m),R=!0}},o(c){B(C.$$.fragment,c),B(o),v=v.filter(Boolean);for(let h=0;h<v.length;h+=1)B(v[h]);B(m),R=!1},d(c){c&&(k(e),k(S),k(u)),ne(C),o&&o.d(),Oe(v,c),m&&m.d()}}}function zt(t){const e=t.split(`
`);let l="",s="",i=!1;for(const n of e){if(n.startsWith("##FASTA")){i=!0;continue}i&&(n.startsWith(">")?(s&&(l+=s+`
`),s=n+`
`):s+=n.trim())}return s&&(l+=s+`
`),l.trim()}function we(){const t=document.getElementsByName("files")[0];t.value=""}function Et(t,e,l){let s,i,n;pe(t,ye,u=>l(8,s=u)),pe(t,Ie,u=>l(2,i=u)),pe(t,ae,u=>l(3,n=u));const a=Je();let f,b=!1;function p(u){if(!f||f.length===0)return;l(1,b=!0);let T=[];for(let D=0;D<f.length;D++){const R=f[D],L=R.name,d=new FileReader;T.push(new Promise((o,_)=>{d.onload=async v=>{var m,c;let M=(c=(m=v.target)==null?void 0:m.result)==null?void 0:c.toString();if(L.endsWith(".gff")||L.endsWith(".gff3")){await Qe.load(M);const h=zt(M);await Ie.load(L,h).catch(P=>{console.error("Error loading reference:",P);const H={message:"Error loading reference: "+P,background:"variant-glass-error"};a.trigger(H)}),qe(ye,s.locus=void 0,s),await Xe.load(h),o(0)}else if(L.endsWith(".userplot")||L.endsWith(".plot"))await ae.load(L,M);else{console.error("Unsupported file type:",L);const P={message:"Unsupported file type: "+L,background:"variant-glass-error"};a.trigger(P),_("Unsupported file type: "+L)}o(0)},d.onerror=_,d.readAsText(R)}))}Promise.all(T).then(D=>{l(1,b=!1)}).catch(D=>{console.error("Error reading files:",D),l(1,b=!1)})}function C(u){f=u,l(0,f)}return[f,b,i,n,p,C,(u,T)=>ae.setIsControl(u[0],T),u=>ae.remove(u[0])]}class At extends ${constructor(e){super(),ee(this,e,Et,Tt,Y,{})}}export{At as component};
