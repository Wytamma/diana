import{s as V,n as D,c as z,o as R,h as q}from"../chunks/scheduler.D4l2_50T.js";import{S as $,i as O,e as p,t as B,s as x,c as _,a as v,b as H,d as m,f as E,k as L,l as g,x as S,g as w,h,j as N,p as y,y as j,q as I,w as A,m as F,n as G,o as M,r as W,z as J}from"../chunks/index.GLNPzUOZ.js";import{e as k}from"../chunks/each.bfnIeBsL.js";import{i as K}from"../chunks/TAStore.CTzqrDah.js";import{a as Q}from"../chunks/annotationStore.B8SpThiG.js";import{g as U}from"../chunks/generateGeneInsertSites.4dBDGHwj.js";import{P}from"../chunks/plotly.cbd5aJyv.js";function X(d){let t,s,i,l,e,c,n,r,o="The insert index is the number of inserts in a locus divided by the gene length.";return{c(){t=p("div"),s=p("header"),i=B(d[0]),l=x(),e=p("section"),c=p("div"),n=x(),r=p("footer"),r.textContent=o,this.h()},l(a){t=_(a,"DIV",{class:!0});var f=v(t);s=_(f,"HEADER",{class:!0});var u=v(s);i=H(u,d[0]),u.forEach(m),l=E(f),e=_(f,"SECTION",{class:!0});var b=v(e);c=_(b,"DIV",{id:!0,style:!0}),v(c).forEach(m),b.forEach(m),n=E(f),r=_(f,"FOOTER",{class:!0,"data-svelte-h":!0}),L(r)!=="svelte-xdpvse"&&(r.textContent=o),f.forEach(m),this.h()},h(){g(s,"class","card-header"),g(c,"id",d[1]),S(c,"width","100%"),S(c,"height","100%"),g(e,"class","p-4"),g(r,"class","card-footer"),g(t,"class","card")},m(a,f){w(a,t,f),h(t,s),h(s,i),h(t,l),h(t,e),h(e,c),h(t,n),h(t,r)},p(a,[f]){f&1&&N(i,a[0])},i:D,o:D,d(a){a&&m(t)}}}function Y(d,t,s){let i;z(d,Q,a=>s(3,i=a));let{filename:l}=t,{data:e}=t;const c=e.map(a=>a.minus+a.plus),n=U(i.features,c,[],0,0);console.log(n);let r=`plotly-${l}`;const o=()=>{const a=document.getElementById(r);a&&P.relayout(a,{width:a.clientWidth,height:a.clientHeight})};return R(()=>{const a={yaxis:{title:"Insert Index"},margin:{b:25,t:25}},f={x:n.map(u=>u.start),y:n.map(u=>u.insIndex),text:n.map(u=>u.name),textfont:{family:"Times New Roman"},textposition:"bottom center",type:"scatter",mode:"markers"};P.newPlot(r,[f],a),window.addEventListener("resize",o)}),q(()=>{window.removeEventListener("resize",o)}),d.$$set=a=>{"filename"in a&&s(0,l=a.filename),"data"in a&&s(2,e=a.data)},[l,r,e]}class Z extends ${constructor(t){super(),O(this,t,Y,X,V,{filename:0,data:2})}}function C(d,t,s){const i=d.slice();return i[1]=t[s][0],i[2]=t[s][1],i[4]=s,i}function T(d){let t,s,i,l;return s=new Z({props:{filename:d[1],data:d[2].insertions}}),{c(){t=p("div"),F(s.$$.fragment),i=x(),this.h()},l(e){t=_(e,"DIV",{class:!0});var c=v(t);G(s.$$.fragment,c),i=E(c),c.forEach(m),this.h()},h(){g(t,"class","m-4")},m(e,c){w(e,t,c),M(s,t,null),h(t,i),l=!0},p(e,c){const n={};c&1&&(n.filename=e[1]),c&1&&(n.data=e[2].insertions),s.$set(n)},i(e){l||(y(s.$$.fragment,e),l=!0)},o(e){I(s.$$.fragment,e),l=!1},d(e){e&&m(t),W(s)}}}function ee(d){let t,s,i,l=k(d[0]),e=[];for(let n=0;n<l.length;n+=1)e[n]=T(C(d,l,n));const c=n=>I(e[n],1,1,()=>{e[n]=null});return{c(){t=p("div"),s=p("div");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=_(n,"DIV",{class:!0});var r=v(t);s=_(r,"DIV",{class:!0});var o=v(s);for(let a=0;a<e.length;a+=1)e[a].l(o);o.forEach(m),r.forEach(m),this.h()},h(){g(s,"class","grid grid-cols-1 2xl:grid-cols-2 gap-4"),g(t,"class","m-4")},m(n,r){w(n,t,r),h(t,s);for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(s,null);i=!0},p(n,[r]){if(r&1){l=k(n[0]);let o;for(o=0;o<l.length;o+=1){const a=C(n,l,o);e[o]?(e[o].p(a,r),y(e[o],1)):(e[o]=T(a),e[o].c(),y(e[o],1),e[o].m(s,null))}for(J(),o=l.length;o<e.length;o+=1)c(o);j()}},i(n){if(!i){for(let r=0;r<l.length;r+=1)y(e[r]);i=!0}},o(n){e=e.filter(Boolean);for(let r=0;r<e.length;r+=1)I(e[r]);i=!1},d(n){n&&m(t),A(e,n)}}}function te(d,t,s){let i;return z(d,K,l=>s(0,i=l)),[i]}class ce extends ${constructor(t){super(),O(this,t,te,ee,V,{})}}export{ce as component};
