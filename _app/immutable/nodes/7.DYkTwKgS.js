var u1=Object.defineProperty;var ef=i=>{throw TypeError(i)};var p1=(i,e,t)=>e in i?u1(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var ke=(i,e,t)=>p1(i,typeof e!="symbol"?e+"":e,t),zo=(i,e,t)=>e.has(i)||ef("Cannot "+t);var Ve=(i,e,t)=>(zo(i,e,"read from private field"),t?t.call(i):e.get(i)),ct=(i,e,t)=>e.has(i)?ef("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),ci=(i,e,t,n)=>(zo(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),Ke=(i,e,t)=>(zo(i,e,"access private method"),t);import{s as l2,a as g1,e as th,g as m1,c as ih,b as c2,f as or,m as h2,i as Qa,n as Jl,k as Or,H as w1,l as b1,K as tf}from"../chunks/BhI1zJCn.js";import{S as f2,i as d2,b as F1,d as y1,m as A1,t as v1,a as _1,e as C1}from"../chunks/Cx8QCVXx.js";import{t as x1,r as k1,i as Ho}from"../chunks/D8c3ECzJ.js";import{a as I1,c as E1}from"../chunks/mV2uT2b_.js";import{i as S1}from"../chunks/C1t0Bbsy.js";import{b as N1}from"../chunks/BA9xAKX9.js";function Fe(i){return u2("div",i)}function u2(i,e){const t=document.createElement(i);return e&&(e.class&&t.classList.add(e.class),e.id&&(t.id=e.id),e.style&&T1(t,e.style)),t}function Ct(i){const e=getComputedStyle(i);e.display!=="none"&&(i._initialDisplay=e.display),i.style.display="none"}function qs(i){if(getComputedStyle(i).display==="none"){const t=i._initialDisplay||"block";i.style.display=t}}function bs(i){if(i.type.startsWith("touch")){const e=i.touches[0];return{x:e.pageX,y:e.pageY}}else return{x:i.pageX,y:i.pageY}}const B1=(i,e)=>{const{x:t,y:n,width:r,height:s}=i.getBoundingClientRect(),{x:a,y:o,width:l,height:c}=e.getBoundingClientRect();return{x:a-t,y:o-n,width:l,height:c}};function T1(i,e){for(let t of Object.keys(e))i.style[t]=e[t]}function Et(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}let M1=(i,{clientX:e,clientY:t})=>{const{left:n,top:r,width:s,height:a}=i.getBoundingClientRect(),o=e-n,l=t-r;return{x:o,y:l,xNormalized:o/s,yNormalized:l/a,width:s,height:a}};function xt(i,e){const{clientX:t,clientY:n}=i;return M1(e,{clientX:t,clientY:n})}class R1{constructor(){this.elem=u2("div",{class:"igv-ui-panel-column"})}add(e){if(e instanceof Node)this.elem.append(e);else if(typeof e=="object")this.elem.append(e.elem);else{const t=Fe();t.innerHTML=e,this.elem.append(t),this.html=t}}}function D1(i,e){const t=Fe({class:"igv-ui-trackgear-popover-check-container"}),n=p2("check",e===!0?"#444":"transparent");n.style.borderColor="gray",n.style.borderWidth="1px",n.style.borderStyle="solid",t.appendChild(n);let r=Fe();return r.textContent=i,t.appendChild(r),t}function Pi(i,e){return p2(i,e)}function p2(i,e){e=e||"currentColor";let t=nf[i];t||(console.error(`No icon named: ${i}`),t=nf.question);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"viewBox","0 0 "+t[0]+" "+t[1]);const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttributeNS(null,"fill",e),r.setAttributeNS(null,"d",t[4]),n.appendChild(r),n}const nf={check:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"],cog:[512,512,[],"f013","M444.788 291.1l42.616 24.599c4.867 2.809 7.126 8.618 5.459 13.985-11.07 35.642-29.97 67.842-54.689 94.586a12.016 12.016 0 0 1-14.832 2.254l-42.584-24.595a191.577 191.577 0 0 1-60.759 35.13v49.182a12.01 12.01 0 0 1-9.377 11.718c-34.956 7.85-72.499 8.256-109.219.007-5.49-1.233-9.403-6.096-9.403-11.723v-49.184a191.555 191.555 0 0 1-60.759-35.13l-42.584 24.595a12.016 12.016 0 0 1-14.832-2.254c-24.718-26.744-43.619-58.944-54.689-94.586-1.667-5.366.592-11.175 5.459-13.985L67.212 291.1a193.48 193.48 0 0 1 0-70.199l-42.616-24.599c-4.867-2.809-7.126-8.618-5.459-13.985 11.07-35.642 29.97-67.842 54.689-94.586a12.016 12.016 0 0 1 14.832-2.254l42.584 24.595a191.577 191.577 0 0 1 60.759-35.13V25.759a12.01 12.01 0 0 1 9.377-11.718c34.956-7.85 72.499-8.256 109.219-.007 5.49 1.233 9.403 6.096 9.403 11.723v49.184a191.555 191.555 0 0 1 60.759 35.13l42.584-24.595a12.016 12.016 0 0 1 14.832 2.254c24.718 26.744 43.619 58.944 54.689 94.586 1.667 5.366-.592 11.175-5.459 13.985L444.788 220.9a193.485 193.485 0 0 1 0 70.2zM336 256c0-44.112-35.888-80-80-80s-80 35.888-80 80 35.888 80 80 80 80-35.888 80-80z"],exclamation:[192,512,[],"f12a","M176 432c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zM25.26 25.199l13.6 272C39.499 309.972 50.041 320 62.83 320h66.34c12.789 0 23.331-10.028 23.97-22.801l13.6-272C167.425 11.49 156.496 0 142.77 0H49.23C35.504 0 24.575 11.49 25.26 25.199z"],"exclamation-circle":[512,512,[],"f06a","M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],"exclamation-triangle":[576,512,[],"f071","M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"],minus:[448,512,[],"f068","M424 318.2c13.3 0 24-10.7 24-24v-76.4c0-13.3-10.7-24-24-24H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h400z"],"minus-circle":[512,512,[],"f056","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"],"minus-square":[448,512,[],"f146","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM92 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H92z"],plus:[448,512,[],"f067","M448 294.2v-76.4c0-13.3-10.7-24-24-24H286.2V56c0-13.3-10.7-24-24-24h-76.4c-13.3 0-24 10.7-24 24v137.8H24c-13.3 0-24 10.7-24 24v76.4c0 13.3 10.7 24 24 24h137.8V456c0 13.3 10.7 24 24 24h76.4c13.3 0 24-10.7 24-24V318.2H424c13.3 0 24-10.7 24-24z"],"plus-circle":[512,512,[],"f055","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],"plus-square":[448,512,[],"f0fe","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-32 252c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92H92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"],question:[384,512,[],"f128","M202.021 0C122.202 0 70.503 32.703 29.914 91.026c-7.363 10.58-5.093 25.086 5.178 32.874l43.138 32.709c10.373 7.865 25.132 6.026 33.253-4.148 25.049-31.381 43.63-49.449 82.757-49.449 30.764 0 68.816 19.799 68.816 49.631 0 22.552-18.617 34.134-48.993 51.164-35.423 19.86-82.299 44.576-82.299 106.405V320c0 13.255 10.745 24 24 24h72.471c13.255 0 24-10.745 24-24v-5.773c0-42.86 125.268-44.645 125.268-160.627C377.504 66.256 286.902 0 202.021 0zM192 373.459c-38.196 0-69.271 31.075-69.271 69.271 0 38.195 31.075 69.27 69.271 69.27s69.271-31.075 69.271-69.271-31.075-69.27-69.271-69.27z"],save:[448,512,[],"f0c7","M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"],search:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"],share:[512,512,[],"f064","M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"],spinner:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"],square:[448,512,[],"f0c8","M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"],"square-full":[512,512,[],"f45c","M512 512H0V0h512v512z"],times:[384,512,[],"f00d","M323.1 441l53.9-53.9c9.4-9.4 9.4-24.5 0-33.9L279.8 256l97.2-97.2c9.4-9.4 9.4-24.5 0-33.9L323.1 71c-9.4-9.4-24.5-9.4-33.9 0L192 168.2 94.8 71c-9.4-9.4-24.5-9.4-33.9 0L7 124.9c-9.4 9.4-9.4 24.5 0 33.9l97.2 97.2L7 353.2c-9.4 9.4-9.4 24.5 0 33.9L60.9 441c9.4 9.4 24.5 9.4 33.9 0l97.2-97.2 97.2 97.2c9.3 9.3 24.5 9.3 33.9 0z"],"times-circle":[512,512,[],"f057","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"],wrench:[512,512,[],"f0ad","M481.156 200c9.3 0 15.12 10.155 10.325 18.124C466.295 259.992 420.419 288 368 288c-79.222 0-143.501-63.974-143.997-143.079C223.505 65.469 288.548-.001 368.002 0c52.362.001 98.196 27.949 123.4 69.743C496.24 77.766 490.523 88 481.154 88H376l-40 56 40 56h105.156zm-171.649 93.003L109.255 493.255c-24.994 24.993-65.515 24.994-90.51 0-24.993-24.994-24.993-65.516 0-90.51L218.991 202.5c16.16 41.197 49.303 74.335 90.516 90.503zM104 432c0-13.255-10.745-24-24-24s-24 10.745-24 24 10.745 24 24 24 24-10.745 24-24z"]};function Dn(i,e){var t=document.createElement("div");i.appendChild(t),t.appendChild(Pi("times")),t.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e()})}let ii;function Ui(i,e,t){e.addEventListener("mousedown",n.bind(i));function n(r){r.stopPropagation(),r.preventDefault();const s=L1.bind(this),a=z1.bind(this),o=getComputedStyle(this),l=this.getBoundingClientRect();ii={constraint:t,dragFunction:s,dragEndFunction:a,screenX:r.screenX,screenY:r.screenY,minDy:-l.top,minDx:-l.left,top:parseInt(o.top.replace("px","")),left:parseInt(o.left.replace("px",""))},document.addEventListener("mousemove",s),document.addEventListener("mouseup",a),document.addEventListener("mouseleave",a),document.addEventListener("mouseexit",a)}}function L1(i){if(!ii){console.error("No drag data!");return}i.stopPropagation(),i.preventDefault();const e=Math.max(ii.minDx,i.screenX-ii.screenX),t=Math.max(ii.minDy,i.screenY-ii.screenY),n=ii.left+e,r=ii.top+t;this.style.left=`${n}px`,this.style.top=`${r}px`}function z1(i){if(!ii){console.error("No drag data!");return}i.stopPropagation(),i.preventDefault();const e=ii.dragFunction,t=ii.dragEndFunction;document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("mouseleave",t),document.removeEventListener("mouseexit",t),ii=void 0}class H1{constructor({parent:e,label:t,content:n,okHandler:r,cancelHandler:s}){this.parent=e;const a=()=>{Ct(this.elem),typeof s=="function"&&s(this)};this.elem=Fe(),this.elem.classList.add("igv-ui-generic-dialog-container","igv-ui-center-fixed");const o=Fe({class:"igv-ui-generic-dialog-header"});if(this.elem.appendChild(o),Dn(o,a),t){const c=Fe({class:"igv-ui-dialog-one-liner"});this.elem.appendChild(c),c.innerHTML=t}n.elem.style.margin="16px",this.elem.appendChild(n.elem),this.content=n;const l=Fe({class:"igv-ui-generic-dialog-ok-cancel"});this.elem.appendChild(l),this.ok=Fe(),l.appendChild(this.ok),this.ok.textContent="OK",this.cancel=Fe(),l.appendChild(this.cancel),this.cancel.textContent="Cancel",this.callback=void 0,this.ok.addEventListener("click",c=>{Ct(this.elem),typeof r=="function"?r(this):this.callback&&typeof this.callback=="function"&&this.callback(this)}),this.cancel.addEventListener("click",a),Ui(this.elem,o),this.elem.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation()})}present(e,t){if(e.label&&this.label&&(this.label.textContent=e.label),e.html){const n=this.content.html;n.innerHTML=e.html}if(e.text){const n=this.content.html;n.innerText=e.text}e.value&&this.input&&(this.input.value=e.value),e.callback&&(this.callback=e.callback),qs(this.elem)}clampLocation(e,t){let n=this.elem.getBoundingClientRect(),r=this.parent.getBoundingClientRect();const s=Math.min(Math.max(t,r.y),r.y+r.height-n.height),a=Math.min(Math.max(e,r.x),r.x+r.width-n.width);this.elem.style.left=a+"px",this.elem.style.top=s+"px"}}/*!
 * jQuery JavaScript Library v3.3.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */var Cn=[],tt=window.document,P1=Object.getPrototypeOf,_n=Cn.slice,g2=Cn.concat,nh=Cn.push,Ga=Cn.indexOf,xo={},m2=xo.toString,$a=xo.hasOwnProperty,w2=$a.toString,O1=w2.call(Object),gt={},et=function(e){return typeof e=="function"&&typeof e.nodeType!="number"},Fr=function(e){return e!=null&&e===e.window},U1={type:!0,src:!0,noModule:!0};function b2(i,e,t){e=e||tt;var n,r=e.createElement("script");if(r.text=i,t)for(n in U1)t[n]&&(r[n]=t[n]);e.head.appendChild(r).parentNode.removeChild(r)}function Er(i){return i==null?i+"":typeof i=="object"||typeof i=="function"?xo[m2.call(i)]||"object":typeof i}var F2="3.3.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector",z=function(i,e){return new z.fn.init(i,e)},q1=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;z.fn=z.prototype={jquery:F2,constructor:z,length:0,toArray:function(){return _n.call(this)},get:function(i){return i==null?_n.call(this):i<0?this[i+this.length]:this[i]},pushStack:function(i){var e=z.merge(this.constructor(),i);return e.prevObject=this,e},each:function(i){return z.each(this,i)},map:function(i){return this.pushStack(z.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(_n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var e=this.length,t=+i+(i<0?e:0);return this.pushStack(t>=0&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:nh,sort:Cn.sort,splice:Cn.splice};z.extend=z.fn.extend=function(){var i,e,t,n,r,s,a=arguments[0]||{},o=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[o]||{},o++),typeof a!="object"&&!et(a)&&(a={}),o===l&&(a=this,o--);o<l;o++)if((i=arguments[o])!=null)for(e in i)t=a[e],n=i[e],a!==n&&(c&&n&&(z.isPlainObject(n)||(r=Array.isArray(n)))?(r?(r=!1,s=t&&Array.isArray(t)?t:[]):s=t&&z.isPlainObject(t)?t:{},a[e]=z.extend(c,s,n)):n!==void 0&&(a[e]=n));return a};z.extend({expando:"jQuery"+(F2+Math.random()).replace(/\D/g,""),isReady:!0,error:function(i){throw new Error(i)},noop:function(){},isPlainObject:function(i){var e,t;return!i||m2.call(i)!=="[object Object]"?!1:(e=P1(i),e?(t=$a.call(e,"constructor")&&e.constructor,typeof t=="function"&&w2.call(t)===O1):!0)},isEmptyObject:function(i){var e;for(e in i)return!1;return!0},globalEval:function(i){b2(i)},each:function(i,e){var t,n=0;if(Po(i))for(t=i.length;n<t&&e.call(i[n],n,i[n])!==!1;n++);else for(n in i)if(e.call(i[n],n,i[n])===!1)break;return i},trim:function(i){return i==null?"":(i+"").replace(q1,"")},makeArray:function(i,e){var t=e||[];return i!=null&&(Po(Object(i))?z.merge(t,typeof i=="string"?[i]:i):nh.call(t,i)),t},inArray:function(i,e,t){return e==null?-1:Ga.call(e,i,t)},merge:function(i,e){for(var t=+e.length,n=0,r=i.length;n<t;n++)i[r++]=e[n];return i.length=r,i},grep:function(i,e,t){for(var n,r=[],s=0,a=i.length,o=!t;s<a;s++)n=!e(i[s],s),n!==o&&r.push(i[s]);return r},map:function(i,e,t){var n,r,s=0,a=[];if(Po(i))for(n=i.length;s<n;s++)r=e(i[s],s,t),r!=null&&a.push(r);else for(s in i)r=e(i[s],s,t),r!=null&&a.push(r);return g2.apply([],a)},guid:1,support:gt});typeof Symbol=="function"&&(z.fn[Symbol.iterator]=Cn[Symbol.iterator]);z.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,e){xo["[object "+e+"]"]=e.toLowerCase()});function Po(i){var e=!!i&&"length"in i&&i.length,t=Er(i);return et(i)||Fr(i)?!1:t==="array"||e===0||typeof e=="number"&&e>0&&e-1 in i}var Ln=function(i){var e,t,n,r,s,a,o,l,c,h,f,d,u,p,m,F,g,w,b,y="sizzle"+1*new Date,v=i.document,T=0,A=0,C=L(),k=L(),I=L(),B=function(V,Z){return V===Z&&(f=!0),0},M={}.hasOwnProperty,N=[],x=N.pop,D=N.push,S=N.push,U=N.slice,O=function(V,Z){for(var ae=0,ge=V.length;ae<ge;ae++)if(V[ae]===Z)return ae;return-1},Q="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",G="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ne="\\["+K+"*("+G+")(?:"+K+"*([*^$|!~]?=)"+K+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+G+"))|)"+K+"*\\]",H=":("+G+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+ne+")*)|.*)\\)|)",$=new RegExp(K+"+","g"),X=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),ee=new RegExp("^"+K+"*,"+K+"*"),te=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),be=new RegExp("="+K+`*([^\\]'"]*?)`+K+"*\\]","g"),q=new RegExp(H),J=new RegExp("^"+G+"$"),E={ID:new RegExp("^#("+G+")"),CLASS:new RegExp("^\\.("+G+")"),TAG:new RegExp("^("+G+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+Q+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,j=/^h\d$/i,P=/^[^{]+\{\s*\[native \w/,fe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oe=/[+~]/,ce=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),ue=function(V,Z,ae){var ge="0x"+Z-65536;return ge!==ge||ae?Z:ge<0?String.fromCharCode(ge+65536):String.fromCharCode(ge>>10|55296,ge&1023|56320)},he=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ye=function(V,Z){return Z?V==="\0"?"ï¿½":V.slice(0,-1)+"\\"+V.charCodeAt(V.length-1).toString(16)+" ":"\\"+V},Ie=function(){d()},_=li(function(V){return V.disabled===!0&&("form"in V||"label"in V)},{dir:"parentNode",next:"legend"});try{S.apply(N=U.call(v.childNodes),v.childNodes),N[v.childNodes.length].nodeType}catch{S={apply:N.length?function(Z,ae){D.apply(Z,U.call(ae))}:function(Z,ae){for(var ge=Z.length,le=0;Z[ge++]=ae[le++];);Z.length=ge-1}}}function R(V,Z,ae,ge){var le,we,Ae,Ce,xe,Re,Te,Ne=Z&&Z.ownerDocument,Ue=Z?Z.nodeType:9;if(ae=ae||[],typeof V!="string"||!V||Ue!==1&&Ue!==9&&Ue!==11)return ae;if(!ge&&((Z?Z.ownerDocument||Z:v)!==u&&d(Z),Z=Z||u,m)){if(Ue!==11&&(xe=fe.exec(V)))if(le=xe[1]){if(Ue===9)if(Ae=Z.getElementById(le)){if(Ae.id===le)return ae.push(Ae),ae}else return ae;else if(Ne&&(Ae=Ne.getElementById(le))&&b(Z,Ae)&&Ae.id===le)return ae.push(Ae),ae}else{if(xe[2])return S.apply(ae,Z.getElementsByTagName(V)),ae;if((le=xe[3])&&t.getElementsByClassName&&Z.getElementsByClassName)return S.apply(ae,Z.getElementsByClassName(le)),ae}if(t.qsa&&!I[V+" "]&&(!F||!F.test(V))){if(Ue!==1)Ne=Z,Te=V;else if(Z.nodeName.toLowerCase()!=="object"){for((Ce=Z.getAttribute("id"))?Ce=Ce.replace(he,ye):Z.setAttribute("id",Ce=y),Re=a(V),we=Re.length;we--;)Re[we]="#"+Ce+" "+At(Re[we]);Te=Re.join(","),Ne=oe.test(V)&&Oe(Z.parentNode)||Z}if(Te)try{return S.apply(ae,Ne.querySelectorAll(Te)),ae}catch{}finally{Ce===y&&Z.removeAttribute("id")}}}return l(V.replace(X,"$1"),Z,ae,ge)}function L(){var V=[];function Z(ae,ge){return V.push(ae+" ")>n.cacheLength&&delete Z[V.shift()],Z[ae+" "]=ge}return Z}function W(V){return V[y]=!0,V}function ie(V){var Z=u.createElement("fieldset");try{return!!V(Z)}catch{return!1}finally{Z.parentNode&&Z.parentNode.removeChild(Z),Z=null}}function se(V,Z){var ae=Z&&V,ge=ae&&V.nodeType===1&&Z.nodeType===1&&V.sourceIndex-Z.sourceIndex;if(ge)return ge;if(ae){for(;ae=ae.nextSibling;)if(ae===Z)return-1}return V?1:-1}function me(V){return function(Z){var ae=Z.nodeName.toLowerCase();return ae==="input"&&Z.type===V}}function ze(V){return function(Z){var ae=Z.nodeName.toLowerCase();return(ae==="input"||ae==="button")&&Z.type===V}}function Pe(V){return function(Z){return"form"in Z?Z.parentNode&&Z.disabled===!1?"label"in Z?"label"in Z.parentNode?Z.parentNode.disabled===V:Z.disabled===V:Z.isDisabled===V||Z.isDisabled!==!V&&_(Z)===V:Z.disabled===V:"label"in Z?Z.disabled===V:!1}}function je(V){return W(function(Z){return Z=+Z,W(function(ae,ge){for(var le,we=V([],ae.length,Z),Ae=we.length;Ae--;)ae[le=we[Ae]]&&(ae[le]=!(ge[le]=ae[le]))})})}function Oe(V){return V&&typeof V.getElementsByTagName<"u"&&V}t=R.support={},s=R.isXML=function(V){var Z=V&&(V.ownerDocument||V).documentElement;return Z?Z.nodeName!=="HTML":!1},d=R.setDocument=function(V){var Z,ae,ge=V?V.ownerDocument||V:v;return ge===u||ge.nodeType!==9||!ge.documentElement||(u=ge,p=u.documentElement,m=!s(u),v!==u&&(ae=u.defaultView)&&ae.top!==ae&&(ae.addEventListener?ae.addEventListener("unload",Ie,!1):ae.attachEvent&&ae.attachEvent("onunload",Ie)),t.attributes=ie(function(le){return le.className="i",!le.getAttribute("className")}),t.getElementsByTagName=ie(function(le){return le.appendChild(u.createComment("")),!le.getElementsByTagName("*").length}),t.getElementsByClassName=P.test(u.getElementsByClassName),t.getById=ie(function(le){return p.appendChild(le).id=y,!u.getElementsByName||!u.getElementsByName(y).length}),t.getById?(n.filter.ID=function(le){var we=le.replace(ce,ue);return function(Ae){return Ae.getAttribute("id")===we}},n.find.ID=function(le,we){if(typeof we.getElementById<"u"&&m){var Ae=we.getElementById(le);return Ae?[Ae]:[]}}):(n.filter.ID=function(le){var we=le.replace(ce,ue);return function(Ae){var Ce=typeof Ae.getAttributeNode<"u"&&Ae.getAttributeNode("id");return Ce&&Ce.value===we}},n.find.ID=function(le,we){if(typeof we.getElementById<"u"&&m){var Ae,Ce,xe,Re=we.getElementById(le);if(Re){if(Ae=Re.getAttributeNode("id"),Ae&&Ae.value===le)return[Re];for(xe=we.getElementsByName(le),Ce=0;Re=xe[Ce++];)if(Ae=Re.getAttributeNode("id"),Ae&&Ae.value===le)return[Re]}return[]}}),n.find.TAG=t.getElementsByTagName?function(le,we){if(typeof we.getElementsByTagName<"u")return we.getElementsByTagName(le);if(t.qsa)return we.querySelectorAll(le)}:function(le,we){var Ae,Ce=[],xe=0,Re=we.getElementsByTagName(le);if(le==="*"){for(;Ae=Re[xe++];)Ae.nodeType===1&&Ce.push(Ae);return Ce}return Re},n.find.CLASS=t.getElementsByClassName&&function(le,we){if(typeof we.getElementsByClassName<"u"&&m)return we.getElementsByClassName(le)},g=[],F=[],(t.qsa=P.test(u.querySelectorAll))&&(ie(function(le){p.appendChild(le).innerHTML="<a id='"+y+"'></a><select id='"+y+"-\r\\' msallowcapture=''><option selected=''></option></select>",le.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+K+`*(?:''|"")`),le.querySelectorAll("[selected]").length||F.push("\\["+K+"*(?:value|"+Q+")"),le.querySelectorAll("[id~="+y+"-]").length||F.push("~="),le.querySelectorAll(":checked").length||F.push(":checked"),le.querySelectorAll("a#"+y+"+*").length||F.push(".#.+[+~]")}),ie(function(le){le.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var we=u.createElement("input");we.setAttribute("type","hidden"),le.appendChild(we).setAttribute("name","D"),le.querySelectorAll("[name=d]").length&&F.push("name"+K+"*[*^$|!~]?="),le.querySelectorAll(":enabled").length!==2&&F.push(":enabled",":disabled"),p.appendChild(le).disabled=!0,le.querySelectorAll(":disabled").length!==2&&F.push(":enabled",":disabled"),le.querySelectorAll("*,:x"),F.push(",.*:")})),(t.matchesSelector=P.test(w=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ie(function(le){t.disconnectedMatch=w.call(le,"*"),w.call(le,"[s!='']:x"),g.push("!=",H)}),F=F.length&&new RegExp(F.join("|")),g=g.length&&new RegExp(g.join("|")),Z=P.test(p.compareDocumentPosition),b=Z||P.test(p.contains)?function(le,we){var Ae=le.nodeType===9?le.documentElement:le,Ce=we&&we.parentNode;return le===Ce||!!(Ce&&Ce.nodeType===1&&(Ae.contains?Ae.contains(Ce):le.compareDocumentPosition&&le.compareDocumentPosition(Ce)&16))}:function(le,we){if(we){for(;we=we.parentNode;)if(we===le)return!0}return!1},B=Z?function(le,we){if(le===we)return f=!0,0;var Ae=!le.compareDocumentPosition-!we.compareDocumentPosition;return Ae||(Ae=(le.ownerDocument||le)===(we.ownerDocument||we)?le.compareDocumentPosition(we):1,Ae&1||!t.sortDetached&&we.compareDocumentPosition(le)===Ae?le===u||le.ownerDocument===v&&b(v,le)?-1:we===u||we.ownerDocument===v&&b(v,we)?1:h?O(h,le)-O(h,we):0:Ae&4?-1:1)}:function(le,we){if(le===we)return f=!0,0;var Ae,Ce=0,xe=le.parentNode,Re=we.parentNode,Te=[le],Ne=[we];if(!xe||!Re)return le===u?-1:we===u?1:xe?-1:Re?1:h?O(h,le)-O(h,we):0;if(xe===Re)return se(le,we);for(Ae=le;Ae=Ae.parentNode;)Te.unshift(Ae);for(Ae=we;Ae=Ae.parentNode;)Ne.unshift(Ae);for(;Te[Ce]===Ne[Ce];)Ce++;return Ce?se(Te[Ce],Ne[Ce]):Te[Ce]===v?-1:Ne[Ce]===v?1:0}),u},R.matches=function(V,Z){return R(V,null,null,Z)},R.matchesSelector=function(V,Z){if((V.ownerDocument||V)!==u&&d(V),Z=Z.replace(be,"='$1']"),t.matchesSelector&&m&&!I[Z+" "]&&(!g||!g.test(Z))&&(!F||!F.test(Z)))try{var ae=w.call(V,Z);if(ae||t.disconnectedMatch||V.document&&V.document.nodeType!==11)return ae}catch{}return R(Z,u,null,[V]).length>0},R.contains=function(V,Z){return(V.ownerDocument||V)!==u&&d(V),b(V,Z)},R.attr=function(V,Z){(V.ownerDocument||V)!==u&&d(V);var ae=n.attrHandle[Z.toLowerCase()],ge=ae&&M.call(n.attrHandle,Z.toLowerCase())?ae(V,Z,!m):void 0;return ge!==void 0?ge:t.attributes||!m?V.getAttribute(Z):(ge=V.getAttributeNode(Z))&&ge.specified?ge.value:null},R.escape=function(V){return(V+"").replace(he,ye)},R.error=function(V){throw new Error("Syntax error, unrecognized expression: "+V)},R.uniqueSort=function(V){var Z,ae=[],ge=0,le=0;if(f=!t.detectDuplicates,h=!t.sortStable&&V.slice(0),V.sort(B),f){for(;Z=V[le++];)Z===V[le]&&(ge=ae.push(le));for(;ge--;)V.splice(ae[ge],1)}return h=null,V},r=R.getText=function(V){var Z,ae="",ge=0,le=V.nodeType;if(le){if(le===1||le===9||le===11){if(typeof V.textContent=="string")return V.textContent;for(V=V.firstChild;V;V=V.nextSibling)ae+=r(V)}else if(le===3||le===4)return V.nodeValue}else for(;Z=V[ge++];)ae+=r(Z);return ae},n=R.selectors={cacheLength:50,createPseudo:W,match:E,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(V){return V[1]=V[1].replace(ce,ue),V[3]=(V[3]||V[4]||V[5]||"").replace(ce,ue),V[2]==="~="&&(V[3]=" "+V[3]+" "),V.slice(0,4)},CHILD:function(V){return V[1]=V[1].toLowerCase(),V[1].slice(0,3)==="nth"?(V[3]||R.error(V[0]),V[4]=+(V[4]?V[5]+(V[6]||1):2*(V[3]==="even"||V[3]==="odd")),V[5]=+(V[7]+V[8]||V[3]==="odd")):V[3]&&R.error(V[0]),V},PSEUDO:function(V){var Z,ae=!V[6]&&V[2];return E.CHILD.test(V[0])?null:(V[3]?V[2]=V[4]||V[5]||"":ae&&q.test(ae)&&(Z=a(ae,!0))&&(Z=ae.indexOf(")",ae.length-Z)-ae.length)&&(V[0]=V[0].slice(0,Z),V[2]=ae.slice(0,Z)),V.slice(0,3))}},filter:{TAG:function(V){var Z=V.replace(ce,ue).toLowerCase();return V==="*"?function(){return!0}:function(ae){return ae.nodeName&&ae.nodeName.toLowerCase()===Z}},CLASS:function(V){var Z=C[V+" "];return Z||(Z=new RegExp("(^|"+K+")"+V+"("+K+"|$)"))&&C(V,function(ae){return Z.test(typeof ae.className=="string"&&ae.className||typeof ae.getAttribute<"u"&&ae.getAttribute("class")||"")})},ATTR:function(V,Z,ae){return function(ge){var le=R.attr(ge,V);return le==null?Z==="!=":Z?(le+="",Z==="="?le===ae:Z==="!="?le!==ae:Z==="^="?ae&&le.indexOf(ae)===0:Z==="*="?ae&&le.indexOf(ae)>-1:Z==="$="?ae&&le.slice(-ae.length)===ae:Z==="~="?(" "+le.replace($," ")+" ").indexOf(ae)>-1:Z==="|="?le===ae||le.slice(0,ae.length+1)===ae+"-":!1):!0}},CHILD:function(V,Z,ae,ge,le){var we=V.slice(0,3)!=="nth",Ae=V.slice(-4)!=="last",Ce=Z==="of-type";return ge===1&&le===0?function(xe){return!!xe.parentNode}:function(xe,Re,Te){var Ne,Ue,Je,De,wt,vt,pt=we!==Ae?"nextSibling":"previousSibling",st=xe.parentNode,Vi=Ce&&xe.nodeName.toLowerCase(),Qi=!Te&&!Ce,Rt=!1;if(st){if(we){for(;pt;){for(De=xe;De=De[pt];)if(Ce?De.nodeName.toLowerCase()===Vi:De.nodeType===1)return!1;vt=pt=V==="only"&&!vt&&"nextSibling"}return!0}if(vt=[Ae?st.firstChild:st.lastChild],Ae&&Qi){for(De=st,Je=De[y]||(De[y]={}),Ue=Je[De.uniqueID]||(Je[De.uniqueID]={}),Ne=Ue[V]||[],wt=Ne[0]===T&&Ne[1],Rt=wt&&Ne[2],De=wt&&st.childNodes[wt];De=++wt&&De&&De[pt]||(Rt=wt=0)||vt.pop();)if(De.nodeType===1&&++Rt&&De===xe){Ue[V]=[T,wt,Rt];break}}else if(Qi&&(De=xe,Je=De[y]||(De[y]={}),Ue=Je[De.uniqueID]||(Je[De.uniqueID]={}),Ne=Ue[V]||[],wt=Ne[0]===T&&Ne[1],Rt=wt),Rt===!1)for(;(De=++wt&&De&&De[pt]||(Rt=wt=0)||vt.pop())&&!((Ce?De.nodeName.toLowerCase()===Vi:De.nodeType===1)&&++Rt&&(Qi&&(Je=De[y]||(De[y]={}),Ue=Je[De.uniqueID]||(Je[De.uniqueID]={}),Ue[V]=[T,Rt]),De===xe)););return Rt-=le,Rt===ge||Rt%ge===0&&Rt/ge>=0}}},PSEUDO:function(V,Z){var ae,ge=n.pseudos[V]||n.setFilters[V.toLowerCase()]||R.error("unsupported pseudo: "+V);return ge[y]?ge(Z):ge.length>1?(ae=[V,V,"",Z],n.setFilters.hasOwnProperty(V.toLowerCase())?W(function(le,we){for(var Ae,Ce=ge(le,Z),xe=Ce.length;xe--;)Ae=O(le,Ce[xe]),le[Ae]=!(we[Ae]=Ce[xe])}):function(le){return ge(le,0,ae)}):ge}},pseudos:{not:W(function(V){var Z=[],ae=[],ge=o(V.replace(X,"$1"));return ge[y]?W(function(le,we,Ae,Ce){for(var xe,Re=ge(le,null,Ce,[]),Te=le.length;Te--;)(xe=Re[Te])&&(le[Te]=!(we[Te]=xe))}):function(le,we,Ae){return Z[0]=le,ge(Z,null,Ae,ae),Z[0]=null,!ae.pop()}}),has:W(function(V){return function(Z){return R(V,Z).length>0}}),contains:W(function(V){return V=V.replace(ce,ue),function(Z){return(Z.textContent||Z.innerText||r(Z)).indexOf(V)>-1}}),lang:W(function(V){return J.test(V||"")||R.error("unsupported lang: "+V),V=V.replace(ce,ue).toLowerCase(),function(Z){var ae;do if(ae=m?Z.lang:Z.getAttribute("xml:lang")||Z.getAttribute("lang"))return ae=ae.toLowerCase(),ae===V||ae.indexOf(V+"-")===0;while((Z=Z.parentNode)&&Z.nodeType===1);return!1}}),target:function(V){var Z=i.location&&i.location.hash;return Z&&Z.slice(1)===V.id},root:function(V){return V===p},focus:function(V){return V===u.activeElement&&(!u.hasFocus||u.hasFocus())&&!!(V.type||V.href||~V.tabIndex)},enabled:Pe(!1),disabled:Pe(!0),checked:function(V){var Z=V.nodeName.toLowerCase();return Z==="input"&&!!V.checked||Z==="option"&&!!V.selected},selected:function(V){return V.parentNode&&V.parentNode.selectedIndex,V.selected===!0},empty:function(V){for(V=V.firstChild;V;V=V.nextSibling)if(V.nodeType<6)return!1;return!0},parent:function(V){return!n.pseudos.empty(V)},header:function(V){return j.test(V.nodeName)},input:function(V){return Y.test(V.nodeName)},button:function(V){var Z=V.nodeName.toLowerCase();return Z==="input"&&V.type==="button"||Z==="button"},text:function(V){var Z;return V.nodeName.toLowerCase()==="input"&&V.type==="text"&&((Z=V.getAttribute("type"))==null||Z.toLowerCase()==="text")},first:je(function(){return[0]}),last:je(function(V,Z){return[Z-1]}),eq:je(function(V,Z,ae){return[ae<0?ae+Z:ae]}),even:je(function(V,Z){for(var ae=0;ae<Z;ae+=2)V.push(ae);return V}),odd:je(function(V,Z){for(var ae=1;ae<Z;ae+=2)V.push(ae);return V}),lt:je(function(V,Z,ae){for(var ge=ae<0?ae+Z:ae;--ge>=0;)V.push(ge);return V}),gt:je(function(V,Z,ae){for(var ge=ae<0?ae+Z:ae;++ge<Z;)V.push(ge);return V})}},n.pseudos.nth=n.pseudos.eq;for(e in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=me(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=ze(e);function We(){}We.prototype=n.filters=n.pseudos,n.setFilters=new We,a=R.tokenize=function(V,Z){var ae,ge,le,we,Ae,Ce,xe,Re=k[V+" "];if(Re)return Z?0:Re.slice(0);for(Ae=V,Ce=[],xe=n.preFilter;Ae;){(!ae||(ge=ee.exec(Ae)))&&(ge&&(Ae=Ae.slice(ge[0].length)||Ae),Ce.push(le=[])),ae=!1,(ge=te.exec(Ae))&&(ae=ge.shift(),le.push({value:ae,type:ge[0].replace(X," ")}),Ae=Ae.slice(ae.length));for(we in n.filter)(ge=E[we].exec(Ae))&&(!xe[we]||(ge=xe[we](ge)))&&(ae=ge.shift(),le.push({value:ae,type:we,matches:ge}),Ae=Ae.slice(ae.length));if(!ae)break}return Z?Ae.length:Ae?R.error(V):k(V,Ce).slice(0)};function At(V){for(var Z=0,ae=V.length,ge="";Z<ae;Z++)ge+=V[Z].value;return ge}function li(V,Z,ae){var ge=Z.dir,le=Z.next,we=le||ge,Ae=ae&&we==="parentNode",Ce=A++;return Z.first?function(xe,Re,Te){for(;xe=xe[ge];)if(xe.nodeType===1||Ae)return V(xe,Re,Te);return!1}:function(xe,Re,Te){var Ne,Ue,Je,De=[T,Ce];if(Te){for(;xe=xe[ge];)if((xe.nodeType===1||Ae)&&V(xe,Re,Te))return!0}else for(;xe=xe[ge];)if(xe.nodeType===1||Ae)if(Je=xe[y]||(xe[y]={}),Ue=Je[xe.uniqueID]||(Je[xe.uniqueID]={}),le&&le===xe.nodeName.toLowerCase())xe=xe[ge]||xe;else{if((Ne=Ue[we])&&Ne[0]===T&&Ne[1]===Ce)return De[2]=Ne[2];if(Ue[we]=De,De[2]=V(xe,Re,Te))return!0}return!1}}function on(V){return V.length>1?function(Z,ae,ge){for(var le=V.length;le--;)if(!V[le](Z,ae,ge))return!1;return!0}:V[0]}function zr(V,Z,ae){for(var ge=0,le=Z.length;ge<le;ge++)R(V,Z[ge],ae);return ae}function On(V,Z,ae,ge,le){for(var we,Ae=[],Ce=0,xe=V.length,Re=Z!=null;Ce<xe;Ce++)(we=V[Ce])&&(!ae||ae(we,ge,le))&&(Ae.push(we),Re&&Z.push(Ce));return Ae}function Ei(V,Z,ae,ge,le,we){return ge&&!ge[y]&&(ge=Ei(ge)),le&&!le[y]&&(le=Ei(le,we)),W(function(Ae,Ce,xe,Re){var Te,Ne,Ue,Je=[],De=[],wt=Ce.length,vt=Ae||zr(Z||"*",xe.nodeType?[xe]:xe,[]),pt=V&&(Ae||!Z)?On(vt,Je,V,xe,Re):vt,st=ae?le||(Ae?V:wt||ge)?[]:Ce:pt;if(ae&&ae(pt,st,xe,Re),ge)for(Te=On(st,De),ge(Te,[],xe,Re),Ne=Te.length;Ne--;)(Ue=Te[Ne])&&(st[De[Ne]]=!(pt[De[Ne]]=Ue));if(Ae){if(le||V){if(le){for(Te=[],Ne=st.length;Ne--;)(Ue=st[Ne])&&Te.push(pt[Ne]=Ue);le(null,st=[],Te,Re)}for(Ne=st.length;Ne--;)(Ue=st[Ne])&&(Te=le?O(Ae,Ue):Je[Ne])>-1&&(Ae[Te]=!(Ce[Te]=Ue))}}else st=On(st===Ce?st.splice(wt,st.length):st),le?le(null,Ce,st,Re):S.apply(Ce,st)})}function Hr(V){for(var Z,ae,ge,le=V.length,we=n.relative[V[0].type],Ae=we||n.relative[" "],Ce=we?1:0,xe=li(function(Ne){return Ne===Z},Ae,!0),Re=li(function(Ne){return O(Z,Ne)>-1},Ae,!0),Te=[function(Ne,Ue,Je){var De=!we&&(Je||Ue!==c)||((Z=Ue).nodeType?xe(Ne,Ue,Je):Re(Ne,Ue,Je));return Z=null,De}];Ce<le;Ce++)if(ae=n.relative[V[Ce].type])Te=[li(on(Te),ae)];else{if(ae=n.filter[V[Ce].type].apply(null,V[Ce].matches),ae[y]){for(ge=++Ce;ge<le&&!n.relative[V[ge].type];ge++);return Ei(Ce>1&&on(Te),Ce>1&&At(V.slice(0,Ce-1).concat({value:V[Ce-2].type===" "?"*":""})).replace(X,"$1"),ae,Ce<ge&&Hr(V.slice(Ce,ge)),ge<le&&Hr(V=V.slice(ge)),ge<le&&At(V))}Te.push(ae)}return on(Te)}function Lo(V,Z){var ae=Z.length>0,ge=V.length>0,le=function(we,Ae,Ce,xe,Re){var Te,Ne,Ue,Je=0,De="0",wt=we&&[],vt=[],pt=c,st=we||ge&&n.find.TAG("*",Re),Vi=T+=pt==null?1:Math.random()||.1,Qi=st.length;for(Re&&(c=Ae===u||Ae||Re);De!==Qi&&(Te=st[De])!=null;De++){if(ge&&Te){for(Ne=0,!Ae&&Te.ownerDocument!==u&&(d(Te),Ce=!m);Ue=V[Ne++];)if(Ue(Te,Ae||u,Ce)){xe.push(Te);break}Re&&(T=Vi)}ae&&((Te=!Ue&&Te)&&Je--,we&&wt.push(Te))}if(Je+=De,ae&&De!==Je){for(Ne=0;Ue=Z[Ne++];)Ue(wt,vt,Ae,Ce);if(we){if(Je>0)for(;De--;)wt[De]||vt[De]||(vt[De]=x.call(xe));vt=On(vt)}S.apply(xe,vt),Re&&!we&&vt.length>0&&Je+Z.length>1&&R.uniqueSort(xe)}return Re&&(T=Vi,c=pt),wt};return ae?W(le):le}return o=R.compile=function(V,Z){var ae,ge=[],le=[],we=I[V+" "];if(!we){for(Z||(Z=a(V)),ae=Z.length;ae--;)we=Hr(Z[ae]),we[y]?ge.push(we):le.push(we);we=I(V,Lo(le,ge)),we.selector=V}return we},l=R.select=function(V,Z,ae,ge){var le,we,Ae,Ce,xe,Re=typeof V=="function"&&V,Te=!ge&&a(V=Re.selector||V);if(ae=ae||[],Te.length===1){if(we=Te[0]=Te[0].slice(0),we.length>2&&(Ae=we[0]).type==="ID"&&Z.nodeType===9&&m&&n.relative[we[1].type]){if(Z=(n.find.ID(Ae.matches[0].replace(ce,ue),Z)||[])[0],Z)Re&&(Z=Z.parentNode);else return ae;V=V.slice(we.shift().value.length)}for(le=E.needsContext.test(V)?0:we.length;le--&&(Ae=we[le],!n.relative[Ce=Ae.type]);)if((xe=n.find[Ce])&&(ge=xe(Ae.matches[0].replace(ce,ue),oe.test(we[0].type)&&Oe(Z.parentNode)||Z))){if(we.splice(le,1),V=ge.length&&At(we),!V)return S.apply(ae,ge),ae;break}}return(Re||o(V,Te))(ge,Z,!m,ae,!Z||oe.test(V)&&Oe(Z.parentNode)||Z),ae},t.sortStable=y.split("").sort(B).join("")===y,t.detectDuplicates=!!f,d(),R}(window);z.find=Ln;z.expr=Ln.selectors;z.expr[":"]=z.expr.pseudos;z.uniqueSort=z.unique=Ln.uniqueSort;z.text=Ln.getText;z.isXMLDoc=Ln.isXML;z.contains=Ln.contains;z.escapeSelector=Ln.escape;var Un=function(i,e,t){for(var n=[],r=t!==void 0;(i=i[e])&&i.nodeType!==9;)if(i.nodeType===1){if(r&&z(i).is(t))break;n.push(i)}return n},rf=function(i,e){for(var t=[];i;i=i.nextSibling)i.nodeType===1&&i!==e&&t.push(i);return t},y2=z.expr.match.needsContext;function xi(i,e){return i.nodeName&&i.nodeName.toLowerCase()===e.toLowerCase()}var A2=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Oo(i,e,t){return et(e)?z.grep(i,function(n,r){return!!e.call(n,r,n)!==t}):e.nodeType?z.grep(i,function(n){return n===e!==t}):typeof e!="string"?z.grep(i,function(n){return Ga.call(e,n)>-1!==t}):z.filter(e,i,t)}z.filter=function(i,e,t){var n=e[0];return t&&(i=":not("+i+")"),e.length===1&&n.nodeType===1?z.find.matchesSelector(n,i)?[n]:[]:z.find.matches(i,z.grep(e,function(r){return r.nodeType===1}))};z.fn.extend({find:function(i){var e,t,n=this.length,r=this;if(typeof i!="string")return this.pushStack(z(i).filter(function(){for(e=0;e<n;e++)if(z.contains(r[e],this))return!0}));for(t=this.pushStack([]),e=0;e<n;e++)z.find(i,r[e],t);return n>1?z.uniqueSort(t):t},filter:function(i){return this.pushStack(Oo(this,i||[],!1))},not:function(i){return this.pushStack(Oo(this,i||[],!0))},is:function(i){return!!Oo(this,typeof i=="string"&&y2.test(i)?z(i):i||[],!1).length}});var v2,V1=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Q1=z.fn.init=function(i,e,t){var n,r;if(!i)return this;if(t=t||v2,typeof i=="string")if(i[0]==="<"&&i[i.length-1]===">"&&i.length>=3?n=[null,i,null]:n=V1.exec(i),n&&(n[1]||!e))if(n[1]){if(e=e instanceof z?e[0]:e,z.merge(this,z.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:tt,!0)),A2.test(n[1])&&z.isPlainObject(e))for(n in e)et(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}else return r=tt.getElementById(n[2]),r&&(this[0]=r,this.length=1),this;else return!e||e.jquery?(e||t).find(i):this.constructor(e).find(i);else{if(i.nodeType)return this[0]=i,this.length=1,this;if(et(i))return t.ready!==void 0?t.ready(i):i(z)}return z.makeArray(i,this)};Q1.prototype=z.fn;v2=z(tt);var G1=/^(?:parents|prev(?:Until|All))/,$1={children:!0,contents:!0,next:!0,prev:!0};z.fn.extend({has:function(i){var e=z(i,this),t=e.length;return this.filter(function(){for(var n=0;n<t;n++)if(z.contains(this,e[n]))return!0})},closest:function(i,e){var t,n=0,r=this.length,s=[],a=typeof i!="string"&&z(i);if(!y2.test(i)){for(;n<r;n++)for(t=this[n];t&&t!==e;t=t.parentNode)if(t.nodeType<11&&(a?a.index(t)>-1:t.nodeType===1&&z.find.matchesSelector(t,i))){s.push(t);break}}return this.pushStack(s.length>1?z.uniqueSort(s):s)},index:function(i){return i?typeof i=="string"?Ga.call(z(i),this[0]):Ga.call(this,i.jquery?i[0]:i):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(i,e){return this.pushStack(z.uniqueSort(z.merge(this.get(),z(i,e))))},addBack:function(i){return this.add(i==null?this.prevObject:this.prevObject.filter(i))}});function sf(i,e){for(;(i=i[e])&&i.nodeType!==1;);return i}z.each({parent:function(i){var e=i.parentNode;return e&&e.nodeType!==11?e:null},parents:function(i){return Un(i,"parentNode")},parentsUntil:function(i,e,t){return Un(i,"parentNode",t)},next:function(i){return sf(i,"nextSibling")},prev:function(i){return sf(i,"previousSibling")},nextAll:function(i){return Un(i,"nextSibling")},prevAll:function(i){return Un(i,"previousSibling")},nextUntil:function(i,e,t){return Un(i,"nextSibling",t)},prevUntil:function(i,e,t){return Un(i,"previousSibling",t)},siblings:function(i){return rf((i.parentNode||{}).firstChild,i)},children:function(i){return rf(i.firstChild)},contents:function(i){return xi(i,"iframe")?i.contentDocument:(xi(i,"template")&&(i=i.content||i),z.merge([],i.childNodes))}},function(i,e){z.fn[i]=function(t,n){var r=z.map(this,e,t);return i.slice(-5)!=="Until"&&(n=t),n&&typeof n=="string"&&(r=z.filter(n,r)),this.length>1&&($1[i]||z.uniqueSort(r),G1.test(i)&&r.reverse()),this.pushStack(r)}});var xn=/[^\x20\t\r\n\f]+/g;function j1(i){var e={};return z.each(i.match(xn)||[],function(t,n){e[n]=!0}),e}z.Callbacks=function(i){i=typeof i=="string"?j1(i):z.extend({},i);var e,t,n,r,s=[],a=[],o=-1,l=function(){for(r=r||i.once,n=e=!0;a.length;o=-1)for(t=a.shift();++o<s.length;)s[o].apply(t[0],t[1])===!1&&i.stopOnFalse&&(o=s.length,t=!1);i.memory||(t=!1),e=!1,r&&(t?s=[]:s="")},c={add:function(){return s&&(t&&!e&&(o=s.length-1,a.push(t)),function h(f){z.each(f,function(d,u){et(u)?(!i.unique||!c.has(u))&&s.push(u):u&&u.length&&Er(u)!=="string"&&h(u)})}(arguments),t&&!e&&l()),this},remove:function(){return z.each(arguments,function(h,f){for(var d;(d=z.inArray(f,s,d))>-1;)s.splice(d,1),d<=o&&o--}),this},has:function(h){return h?z.inArray(h,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=t="",this},disabled:function(){return!s},lock:function(){return r=a=[],!t&&!e&&(s=t=""),this},locked:function(){return!!r},fireWith:function(h,f){return r||(f=f||[],f=[h,f.slice?f.slice():f],a.push(f),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c};function qn(i){return i}function ta(i){throw i}function af(i,e,t,n){var r;try{i&&et(r=i.promise)?r.call(i).done(e).fail(t):i&&et(r=i.then)?r.call(i,e,t):e.apply(void 0,[i].slice(n))}catch(s){t.apply(void 0,[s])}}z.extend({Deferred:function(i){var e=[["notify","progress",z.Callbacks("memory"),z.Callbacks("memory"),2],["resolve","done",z.Callbacks("once memory"),z.Callbacks("once memory"),0,"resolved"],["reject","fail",z.Callbacks("once memory"),z.Callbacks("once memory"),1,"rejected"]],t="pending",n={state:function(){return t},always:function(){return r.done(arguments).fail(arguments),this},catch:function(s){return n.then(null,s)},pipe:function(){var s=arguments;return z.Deferred(function(a){z.each(e,function(o,l){var c=et(s[l[4]])&&s[l[4]];r[l[1]](function(){var h=c&&c.apply(this,arguments);h&&et(h.promise)?h.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[l[0]+"With"](this,c?[h]:arguments)})}),s=null}).promise()},then:function(s,a,o){var l=0;function c(h,f,d,u){return function(){var p=this,m=arguments,F=function(){var w,b;if(!(h<l)){if(w=d.apply(p,m),w===f.promise())throw new TypeError("Thenable self-resolution");b=w&&(typeof w=="object"||typeof w=="function")&&w.then,et(b)?u?b.call(w,c(l,f,qn,u),c(l,f,ta,u)):(l++,b.call(w,c(l,f,qn,u),c(l,f,ta,u),c(l,f,qn,f.notifyWith))):(d!==qn&&(p=void 0,m=[w]),(u||f.resolveWith)(p,m))}},g=u?F:function(){try{F()}catch(w){z.Deferred.exceptionHook&&z.Deferred.exceptionHook(w,g.stackTrace),h+1>=l&&(d!==ta&&(p=void 0,m=[w]),f.rejectWith(p,m))}};h?g():(z.Deferred.getStackHook&&(g.stackTrace=z.Deferred.getStackHook()),window.setTimeout(g))}}return z.Deferred(function(h){e[0][3].add(c(0,h,et(o)?o:qn,h.notifyWith)),e[1][3].add(c(0,h,et(s)?s:qn)),e[2][3].add(c(0,h,et(a)?a:ta))}).promise()},promise:function(s){return s!=null?z.extend(s,n):n}},r={};return z.each(e,function(s,a){var o=a[2],l=a[5];n[a[1]]=o.add,l&&o.add(function(){t=l},e[3-s][2].disable,e[3-s][3].disable,e[0][2].lock,e[0][3].lock),o.add(a[3].fire),r[a[0]]=function(){return r[a[0]+"With"](this===r?void 0:this,arguments),this},r[a[0]+"With"]=o.fireWith}),n.promise(r),i&&i.call(r,r),r},when:function(i){var e=arguments.length,t=e,n=Array(t),r=_n.call(arguments),s=z.Deferred(),a=function(o){return function(l){n[o]=this,r[o]=arguments.length>1?_n.call(arguments):l,--e||s.resolveWith(n,r)}};if(e<=1&&(af(i,s.done(a(t)).resolve,s.reject,!e),s.state()==="pending"||et(r[t]&&r[t].then)))return s.then();for(;t--;)af(r[t],a(t),s.reject);return s.promise()}});var W1=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;z.Deferred.exceptionHook=function(i,e){window.console&&window.console.warn&&i&&W1.test(i.name)&&window.console.warn("jQuery.Deferred exception: "+i.message,i.stack,e)};z.readyException=function(i){window.setTimeout(function(){throw i})};var rh=z.Deferred();z.fn.ready=function(i){return rh.then(i).catch(function(e){z.readyException(e)}),this};z.extend({isReady:!1,readyWait:1,ready:function(i){(i===!0?--z.readyWait:z.isReady)||(z.isReady=!0,!(i!==!0&&--z.readyWait>0)&&rh.resolveWith(tt,[z]))}});z.ready.then=rh.then;function ja(){tt.removeEventListener("DOMContentLoaded",ja),window.removeEventListener("load",ja),z.ready()}tt.readyState==="complete"||tt.readyState!=="loading"&&!tt.documentElement.doScroll?window.setTimeout(z.ready):(tt.addEventListener("DOMContentLoaded",ja),window.addEventListener("load",ja));var Oi=function(i,e,t,n,r,s,a){var o=0,l=i.length,c=t==null;if(Er(t)==="object"){r=!0;for(o in t)Oi(i,e,o,t[o],!0,s,a)}else if(n!==void 0&&(r=!0,et(n)||(a=!0),c&&(a?(e.call(i,n),e=null):(c=e,e=function(h,f,d){return c.call(z(h),d)})),e))for(;o<l;o++)e(i[o],t,a?n:n.call(i[o],o,e(i[o],t)));return r?i:c?e.call(i):l?e(i[0],t):s},K1=/^-ms-/,Y1=/-([a-z])/g;function Z1(i,e){return e.toUpperCase()}function Li(i){return i.replace(K1,"ms-").replace(Y1,Z1)}var Wa=function(i){return i.nodeType===1||i.nodeType===9||!+i.nodeType};function Vs(){this.expando=z.expando+Vs.uid++}Vs.uid=1;Vs.prototype={cache:function(i){var e=i[this.expando];return e||(e={},Wa(i)&&(i.nodeType?i[this.expando]=e:Object.defineProperty(i,this.expando,{value:e,configurable:!0}))),e},set:function(i,e,t){var n,r=this.cache(i);if(typeof e=="string")r[Li(e)]=t;else for(n in e)r[Li(n)]=e[n];return r},get:function(i,e){return e===void 0?this.cache(i):i[this.expando]&&i[this.expando][Li(e)]},access:function(i,e,t){return e===void 0||e&&typeof e=="string"&&t===void 0?this.get(i,e):(this.set(i,e,t),t!==void 0?t:e)},remove:function(i,e){var t,n=i[this.expando];if(n!==void 0){if(e!==void 0)for(Array.isArray(e)?e=e.map(Li):(e=Li(e),e=e in n?[e]:e.match(xn)||[]),t=e.length;t--;)delete n[e[t]];(e===void 0||z.isEmptyObject(n))&&(i.nodeType?i[this.expando]=void 0:delete i[this.expando])}},hasData:function(i){var e=i[this.expando];return e!==void 0&&!z.isEmptyObject(e)}};var $e=new Vs,$t=new Vs,X1=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J1=/[A-Z]/g;function ew(i){return i==="true"?!0:i==="false"?!1:i==="null"?null:i===+i+""?+i:X1.test(i)?JSON.parse(i):i}function of(i,e,t){var n;if(t===void 0&&i.nodeType===1)if(n="data-"+e.replace(J1,"-$&").toLowerCase(),t=i.getAttribute(n),typeof t=="string"){try{t=ew(t)}catch{}$t.set(i,e,t)}else t=void 0;return t}z.extend({hasData:function(i){return $t.hasData(i)||$e.hasData(i)},data:function(i,e,t){return $t.access(i,e,t)},removeData:function(i,e){$t.remove(i,e)},_data:function(i,e,t){return $e.access(i,e,t)},_removeData:function(i,e){$e.remove(i,e)}});z.fn.extend({data:function(i,e){var t,n,r,s=this[0],a=s&&s.attributes;if(i===void 0){if(this.length&&(r=$t.get(s),s.nodeType===1&&!$e.get(s,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&(n=a[t].name,n.indexOf("data-")===0&&(n=Li(n.slice(5)),of(s,n,r[n])));$e.set(s,"hasDataAttrs",!0)}return r}return typeof i=="object"?this.each(function(){$t.set(this,i)}):Oi(this,function(o){var l;if(s&&o===void 0)return l=$t.get(s,i),l!==void 0||(l=of(s,i),l!==void 0)?l:void 0;this.each(function(){$t.set(this,i,o)})},null,e,arguments.length>1,null,!0)},removeData:function(i){return this.each(function(){$t.remove(this,i)})}});z.extend({queue:function(i,e,t){var n;if(i)return e=(e||"fx")+"queue",n=$e.get(i,e),t&&(!n||Array.isArray(t)?n=$e.access(i,e,z.makeArray(t)):n.push(t)),n||[]},dequeue:function(i,e){e=e||"fx";var t=z.queue(i,e),n=t.length,r=t.shift(),s=z._queueHooks(i,e),a=function(){z.dequeue(i,e)};r==="inprogress"&&(r=t.shift(),n--),r&&(e==="fx"&&t.unshift("inprogress"),delete s.stop,r.call(i,a,s)),!n&&s&&s.empty.fire()},_queueHooks:function(i,e){var t=e+"queueHooks";return $e.get(i,t)||$e.access(i,t,{empty:z.Callbacks("once memory").add(function(){$e.remove(i,[e+"queue",t])})})}});z.fn.extend({queue:function(i,e){var t=2;return typeof i!="string"&&(e=i,i="fx",t--),arguments.length<t?z.queue(this[0],i):e===void 0?this:this.each(function(){var n=z.queue(this,i,e);z._queueHooks(this,i),i==="fx"&&n[0]!=="inprogress"&&z.dequeue(this,i)})},dequeue:function(i){return this.each(function(){z.dequeue(this,i)})},clearQueue:function(i){return this.queue(i||"fx",[])},promise:function(i,e){var t,n=1,r=z.Deferred(),s=this,a=this.length,o=function(){--n||r.resolveWith(s,[s])};for(typeof i!="string"&&(e=i,i=void 0),i=i||"fx";a--;)t=$e.get(s[a],i+"queueHooks"),t&&t.empty&&(n++,t.empty.add(o));return o(),r.promise(e)}});var _2=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ko=new RegExp("^(?:([+-])=|)("+_2+")([a-z%]*)$","i"),ji=["Top","Right","Bottom","Left"],C2=function(i,e){return i=i,i.style.display==="none"||i.style.display===""&&z.contains(i.ownerDocument,i)&&z.css(i,"display")==="none"},x2=function(i,e,t,n){var r,s,a={};for(s in e)a[s]=i.style[s],i.style[s]=e[s];r=t.apply(i,[]);for(s in e)i.style[s]=a[s];return r};function tw(i,e,t,n){var r,s,a=20,o=function(){return z.css(i,e,"")},l=o(),c=t&&t[3]||(z.cssNumber[e]?"":"px"),h=(z.cssNumber[e]||c!=="px"&&+l)&&ko.exec(z.css(i,e));if(h&&h[3]!==c){for(l=l/2,c=c||h[3],h=+l||1;a--;)z.style(i,e,h+c),(1-s)*(1-(s=o()/l||.5))<=0&&(a=0),h=h/s;h=h*2,z.style(i,e,h+c),t=t||[]}return t&&(h=+h||+l||0,r=t[1]?h+(t[1]+1)*t[2]:+t[2]),r}var lf={};function iw(i){var e,t=i.ownerDocument,n=i.nodeName,r=lf[n];return r||(e=t.body.appendChild(t.createElement(n)),r=z.css(e,"display"),e.parentNode.removeChild(e),r==="none"&&(r="block"),lf[n]=r,r)}function cf(i,e){for(var t,n,r=[],s=0,a=i.length;s<a;s++)n=i[s],n.style&&(t=n.style.display,e?(t==="none"&&(r[s]=$e.get(n,"display")||null,r[s]||(n.style.display="")),n.style.display===""&&C2(n)&&(r[s]=iw(n))):t!=="none"&&(r[s]="none",$e.set(n,"display",t)));for(s=0;s<a;s++)r[s]!=null&&(i[s].style.display=r[s]);return i}z.fn.extend({show:function(){return cf(this,!0)},hide:function(){return cf(this)},toggle:function(i){return typeof i=="boolean"?i?this.show():this.hide():this.each(function(){C2(this)?z(this).show():z(this).hide()})}});var k2=/^(?:checkbox|radio)$/i,I2=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,E2=/^$|^module$|\/(?:java|ecma)script/i,ni={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ni.optgroup=ni.option;ni.tbody=ni.tfoot=ni.colgroup=ni.caption=ni.thead;ni.th=ni.td;function Gt(i,e){var t;return typeof i.getElementsByTagName<"u"?t=i.getElementsByTagName(e||"*"):typeof i.querySelectorAll<"u"?t=i.querySelectorAll(e||"*"):t=[],e===void 0||e&&xi(i,e)?z.merge([i],t):t}function sh(i,e){for(var t=0,n=i.length;t<n;t++)$e.set(i[t],"globalEval",!e||$e.get(e[t],"globalEval"))}var nw=/<|&#?\w+;/;function S2(i,e,t,n,r){for(var s,a,o,l,c,h,f=e.createDocumentFragment(),d=[],u=0,p=i.length;u<p;u++)if(s=i[u],s||s===0)if(Er(s)==="object")z.merge(d,s.nodeType?[s]:s);else if(!nw.test(s))d.push(e.createTextNode(s));else{for(a=a||f.appendChild(e.createElement("div")),o=(I2.exec(s)||["",""])[1].toLowerCase(),l=ni[o]||ni._default,a.innerHTML=l[1]+z.htmlPrefilter(s)+l[2],h=l[0];h--;)a=a.lastChild;z.merge(d,a.childNodes),a=f.firstChild,a.textContent=""}for(f.textContent="",u=0;s=d[u++];){if(n&&z.inArray(s,n)>-1){r&&r.push(s);continue}if(c=z.contains(s.ownerDocument,s),a=Gt(f.appendChild(s),"script"),c&&sh(a),t)for(h=0;s=a[h++];)E2.test(s.type||"")&&t.push(s)}return f}(function(){var i=tt.createDocumentFragment(),e=i.appendChild(tt.createElement("div")),t=tt.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),gt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",gt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue})();var Ka=tt.documentElement,rw=/^key/,sw=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,hf=/^([^.]*)(?:\.(.+)|)/;function Ba(){return!0}function lr(){return!1}function ff(){try{return tt.activeElement}catch{}}function ec(i,e,t,n,r,s){var a,o;if(typeof e=="object"){typeof t!="string"&&(n=n||t,t=void 0);for(o in e)ec(i,o,t,n,e[o],s);return i}if(n==null&&r==null?(r=t,n=t=void 0):r==null&&(typeof t=="string"?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=lr;else if(!r)return i;return s===1&&(a=r,r=function(l){return z().off(l),a.apply(this,arguments)},r.guid=a.guid||(a.guid=z.guid++)),i.each(function(){z.event.add(this,e,r,n,t)})}z.event={global:{},add:function(i,e,t,n,r){var s,a,o,l,c,h,f,d,u,p,m,F=$e.get(i);if(F)for(t.handler&&(s=t,t=s.handler,r=s.selector),r&&z.find.matchesSelector(Ka,r),t.guid||(t.guid=z.guid++),(l=F.events)||(l=F.events={}),(a=F.handle)||(a=F.handle=function(g){return typeof z<"u"&&z.event.triggered!==g.type?z.event.dispatch.apply(i,arguments):void 0}),e=(e||"").match(xn)||[""],c=e.length;c--;)o=hf.exec(e[c])||[],u=m=o[1],p=(o[2]||"").split(".").sort(),u&&(f=z.event.special[u]||{},u=(r?f.delegateType:f.bindType)||u,f=z.event.special[u]||{},h=z.extend({type:u,origType:m,data:n,handler:t,guid:t.guid,selector:r,needsContext:r&&z.expr.match.needsContext.test(r),namespace:p.join(".")},s),(d=l[u])||(d=l[u]=[],d.delegateCount=0,(!f.setup||f.setup.call(i,n,p,a)===!1)&&i.addEventListener&&i.addEventListener(u,a)),f.add&&(f.add.call(i,h),h.handler.guid||(h.handler.guid=t.guid)),r?d.splice(d.delegateCount++,0,h):d.push(h),z.event.global[u]=!0)},remove:function(i,e,t,n,r){var s,a,o,l,c,h,f,d,u,p,m,F=$e.hasData(i)&&$e.get(i);if(!(!F||!(l=F.events))){for(e=(e||"").match(xn)||[""],c=e.length;c--;){if(o=hf.exec(e[c])||[],u=m=o[1],p=(o[2]||"").split(".").sort(),!u){for(u in l)z.event.remove(i,u+e[c],t,n,!0);continue}for(f=z.event.special[u]||{},u=(n?f.delegateType:f.bindType)||u,d=l[u]||[],o=o[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=d.length;s--;)h=d[s],(r||m===h.origType)&&(!t||t.guid===h.guid)&&(!o||o.test(h.namespace))&&(!n||n===h.selector||n==="**"&&h.selector)&&(d.splice(s,1),h.selector&&d.delegateCount--,f.remove&&f.remove.call(i,h));a&&!d.length&&((!f.teardown||f.teardown.call(i,p,F.handle)===!1)&&z.removeEvent(i,u,F.handle),delete l[u])}z.isEmptyObject(l)&&$e.remove(i,"handle events")}},dispatch:function(i){var e=z.event.fix(i),t,n,r,s,a,o,l=new Array(arguments.length),c=($e.get(this,"events")||{})[e.type]||[],h=z.event.special[e.type]||{};for(l[0]=e,t=1;t<arguments.length;t++)l[t]=arguments[t];if(e.delegateTarget=this,!(h.preDispatch&&h.preDispatch.call(this,e)===!1)){for(o=z.event.handlers.call(this,e,c),t=0;(s=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=s.elem,n=0;(a=s.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.rnamespace||e.rnamespace.test(a.namespace))&&(e.handleObj=a,e.data=a.data,r=((z.event.special[a.origType]||{}).handle||a.handler).apply(s.elem,l),r!==void 0&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,e),e.result}},handlers:function(i,e){var t,n,r,s,a,o=[],l=e.delegateCount,c=i.target;if(l&&c.nodeType&&!(i.type==="click"&&i.button>=1)){for(;c!==this;c=c.parentNode||this)if(c.nodeType===1&&!(i.type==="click"&&c.disabled===!0)){for(s=[],a={},t=0;t<l;t++)n=e[t],r=n.selector+" ",a[r]===void 0&&(a[r]=n.needsContext?z(r,this).index(c)>-1:z.find(r,this,null,[c]).length),a[r]&&s.push(n);s.length&&o.push({elem:c,handlers:s})}}return c=this,l<e.length&&o.push({elem:c,handlers:e.slice(l)}),o},addProp:function(i,e){Object.defineProperty(z.Event.prototype,i,{enumerable:!0,configurable:!0,get:et(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[i]},set:function(t){Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(i){return i[z.expando]?i:new z.Event(i)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ff()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ff()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&xi(this,"input"))return this.click(),!1},_default:function(i){return xi(i.target,"a")}},beforeunload:{postDispatch:function(i){i.result!==void 0&&i.originalEvent&&(i.originalEvent.returnValue=i.result)}}}};z.removeEvent=function(i,e,t){i.removeEventListener&&i.removeEventListener(e,t)};z.Event=function(i,e){if(!(this instanceof z.Event))return new z.Event(i,e);i&&i.type?(this.originalEvent=i,this.type=i.type,this.isDefaultPrevented=i.defaultPrevented||i.defaultPrevented===void 0&&i.returnValue===!1?Ba:lr,this.target=i.target&&i.target.nodeType===3?i.target.parentNode:i.target,this.currentTarget=i.currentTarget,this.relatedTarget=i.relatedTarget):this.type=i,e&&z.extend(this,e),this.timeStamp=i&&i.timeStamp||Date.now(),this[z.expando]=!0};z.Event.prototype={constructor:z.Event,isDefaultPrevented:lr,isPropagationStopped:lr,isImmediatePropagationStopped:lr,isSimulated:!1,preventDefault:function(){var i=this.originalEvent;this.isDefaultPrevented=Ba,i&&!this.isSimulated&&i.preventDefault()},stopPropagation:function(){var i=this.originalEvent;this.isPropagationStopped=Ba,i&&!this.isSimulated&&i.stopPropagation()},stopImmediatePropagation:function(){var i=this.originalEvent;this.isImmediatePropagationStopped=Ba,i&&!this.isSimulated&&i.stopImmediatePropagation(),this.stopPropagation()}};z.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(i){var e=i.button;return i.which==null&&rw.test(i.type)?i.charCode!=null?i.charCode:i.keyCode:!i.which&&e!==void 0&&sw.test(i.type)?e&1?1:e&2?3:e&4?2:0:i.which}},z.event.addProp);z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(i,e){z.event.special[i]={delegateType:e,bindType:e,handle:function(t){var n,r=this,s=t.relatedTarget,a=t.handleObj;return(!s||s!==r&&!z.contains(r,s))&&(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=e),n}}});z.fn.extend({on:function(i,e,t,n){return ec(this,i,e,t,n)},one:function(i,e,t,n){return ec(this,i,e,t,n,1)},off:function(i,e,t){var n,r;if(i&&i.preventDefault&&i.handleObj)return n=i.handleObj,z(i.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if(typeof i=="object"){for(r in i)this.off(r,e,i[r]);return this}return(e===!1||typeof e=="function")&&(t=e,e=void 0),t===!1&&(t=lr),this.each(function(){z.event.remove(this,i,t,e)})}});var aw=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ow=/<script|<style|<link/i,lw=/checked\s*(?:[^=]|=\s*.checked.)/i,cw=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function df(i,e){return xi(i,"table")&&xi(e.nodeType!==11?e:e.firstChild,"tr")&&z(i).children("tbody")[0]||i}function hw(i){return i.type=(i.getAttribute("type")!==null)+"/"+i.type,i}function fw(i){return(i.type||"").slice(0,5)==="true/"?i.type=i.type.slice(5):i.removeAttribute("type"),i}function uf(i,e){var t,n,r,s,a,o,l,c;if(e.nodeType===1){if($e.hasData(i)&&(s=$e.access(i),a=$e.set(e,s),c=s.events,c)){delete a.handle,a.events={};for(r in c)for(t=0,n=c[r].length;t<n;t++)z.event.add(e,r,c[r][t])}$t.hasData(i)&&(o=$t.access(i),l=z.extend({},o),$t.set(e,l))}}function dw(i,e){var t=e.nodeName.toLowerCase();t==="input"&&k2.test(i.type)?e.checked=i.checked:(t==="input"||t==="textarea")&&(e.defaultValue=i.defaultValue)}function Jn(i,e,t,n){e=g2.apply([],e);var r,s,a,o,l,c,h=0,f=i.length,d=f-1,u=e[0],p=et(u);if(p||f>1&&typeof u=="string"&&!gt.checkClone&&lw.test(u))return i.each(function(m){var F=i.eq(m);p&&(e[0]=u.call(this,m,F.html())),Jn(F,e,t,n)});if(f&&(r=S2(e,i[0].ownerDocument,!1,i,n),s=r.firstChild,r.childNodes.length===1&&(r=s),s||n)){for(a=z.map(Gt(r,"script"),hw),o=a.length;h<f;h++)l=r,h!==d&&(l=z.clone(l,!0,!0),o&&z.merge(a,Gt(l,"script"))),t.call(i[h],l,h);if(o)for(c=a[a.length-1].ownerDocument,z.map(a,fw),h=0;h<o;h++)l=a[h],E2.test(l.type||"")&&!$e.access(l,"globalEval")&&z.contains(c,l)&&(l.src&&(l.type||"").toLowerCase()!=="module"?z._evalUrl&&z._evalUrl(l.src):b2(l.textContent.replace(cw,""),c,l))}return i}function pf(i,e,t){for(var n,r=e?z.filter(e,i):i,s=0;(n=r[s])!=null;s++)!t&&n.nodeType===1&&z.cleanData(Gt(n)),n.parentNode&&(t&&z.contains(n.ownerDocument,n)&&sh(Gt(n,"script")),n.parentNode.removeChild(n));return i}z.extend({htmlPrefilter:function(i){return i.replace(aw,"<$1></$2>")},clone:function(i,e,t){var n,r,s,a,o=i.cloneNode(!0),l=z.contains(i.ownerDocument,i);if(!gt.noCloneChecked&&(i.nodeType===1||i.nodeType===11)&&!z.isXMLDoc(i))for(a=Gt(o),s=Gt(i),n=0,r=s.length;n<r;n++)dw(s[n],a[n]);if(e)if(t)for(s=s||Gt(i),a=a||Gt(o),n=0,r=s.length;n<r;n++)uf(s[n],a[n]);else uf(i,o);return a=Gt(o,"script"),a.length>0&&sh(a,!l&&Gt(i,"script")),o},cleanData:function(i){for(var e,t,n,r=z.event.special,s=0;(t=i[s])!==void 0;s++)if(Wa(t)){if(e=t[$e.expando]){if(e.events)for(n in e.events)r[n]?z.event.remove(t,n):z.removeEvent(t,n,e.handle);t[$e.expando]=void 0}t[$t.expando]&&(t[$t.expando]=void 0)}}});z.fn.extend({detach:function(i){return pf(this,i,!0)},remove:function(i){return pf(this,i)},text:function(i){return Oi(this,function(e){return e===void 0?z.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=e)})},null,i,arguments.length)},append:function(){return Jn(this,arguments,function(i){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var e=df(this,i);e.appendChild(i)}})},prepend:function(){return Jn(this,arguments,function(i){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var e=df(this,i);e.insertBefore(i,e.firstChild)}})},before:function(){return Jn(this,arguments,function(i){this.parentNode&&this.parentNode.insertBefore(i,this)})},after:function(){return Jn(this,arguments,function(i){this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling)})},empty:function(){for(var i,e=0;(i=this[e])!=null;e++)i.nodeType===1&&(z.cleanData(Gt(i,!1)),i.textContent="");return this},clone:function(i,e){return i=i??!1,e=e??i,this.map(function(){return z.clone(this,i,e)})},html:function(i){return Oi(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===void 0&&t.nodeType===1)return t.innerHTML;if(typeof e=="string"&&!ow.test(e)&&!ni[(I2.exec(e)||["",""])[1].toLowerCase()]){e=z.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},t.nodeType===1&&(z.cleanData(Gt(t,!1)),t.innerHTML=e);t=0}catch{}}t&&this.empty().append(e)},null,i,arguments.length)},replaceWith:function(){var i=[];return Jn(this,arguments,function(e){var t=this.parentNode;z.inArray(this,i)<0&&(z.cleanData(Gt(this)),t&&t.replaceChild(e,this))},i)}});z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(i,e){z.fn[i]=function(t){for(var n,r=[],s=z(t),a=s.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),z(s[o])[e](n),nh.apply(r,n.get());return this.pushStack(r)}});var ah=new RegExp("^("+_2+")(?!px)[a-z%]+$","i"),Io=function(i){var e=i.ownerDocument.defaultView;return(!e||!e.opener)&&(e=window),e.getComputedStyle(i)},uw=new RegExp(ji.join("|"),"i");(function(){function i(){if(l){o.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ka.appendChild(o).appendChild(l);var c=window.getComputedStyle(l);t=c.top!=="1%",a=e(c.marginLeft)===12,l.style.right="60%",s=e(c.right)===36,n=e(c.width)===36,l.style.position="absolute",r=l.offsetWidth===36||"absolute",Ka.removeChild(o),l=null}}function e(c){return Math.round(parseFloat(c))}var t,n,r,s,a,o=tt.createElement("div"),l=tt.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",gt.clearCloneStyle=l.style.backgroundClip==="content-box",z.extend(gt,{boxSizingReliable:function(){return i(),n},pixelBoxStyles:function(){return i(),s},pixelPosition:function(){return i(),t},reliableMarginLeft:function(){return i(),a},scrollboxSize:function(){return i(),r}}))})();function Fs(i,e,t){var n,r,s,a,o=i.style;return t=t||Io(i),t&&(a=t.getPropertyValue(e)||t[e],a===""&&!z.contains(i.ownerDocument,i)&&(a=z.style(i,e)),!gt.pixelBoxStyles()&&ah.test(a)&&uw.test(e)&&(n=o.width,r=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=a,a=t.width,o.width=n,o.minWidth=r,o.maxWidth=s)),a!==void 0?a+"":a}function N2(i,e){return{get:function(){if(i()){delete this.get;return}return(this.get=e).apply(this,arguments)}}}var pw=/^(none|table(?!-c[ea]).+)/,gf=/^--/,gw={position:"absolute",visibility:"hidden",display:"block"},mf={letterSpacing:"0",fontWeight:"400"},wf=["Webkit","Moz","ms"],bf=tt.createElement("div").style;function mw(i){if(i in bf)return i;for(var e=i[0].toUpperCase()+i.slice(1),t=wf.length;t--;)if(i=wf[t]+e,i in bf)return i}function Ff(i){var e=z.cssProps[i];return e||(e=z.cssProps[i]=mw(i)||i),e}function B2(i,e,t){var n=ko.exec(e);return n?Math.max(0,n[2]-(t||0))+(n[3]||"px"):e}function tc(i,e,t,n,r,s){var a=e==="width"?1:0,o=0,l=0;if(t===(n?"border":"content"))return 0;for(;a<4;a+=2)t==="margin"&&(l+=z.css(i,t+ji[a],!0,r)),n?(t==="content"&&(l-=z.css(i,"padding"+ji[a],!0,r)),t!=="margin"&&(l-=z.css(i,"border"+ji[a]+"Width",!0,r))):(l+=z.css(i,"padding"+ji[a],!0,r),t!=="padding"?l+=z.css(i,"border"+ji[a]+"Width",!0,r):o+=z.css(i,"border"+ji[a]+"Width",!0,r));return!n&&s>=0&&(l+=Math.max(0,Math.ceil(i["offset"+e[0].toUpperCase()+e.slice(1)]-s-l-o-.5))),l}function yf(i,e,t){var n=Io(i),r=Fs(i,e,n),s=z.css(i,"boxSizing",!1,n)==="border-box",a=s;if(ah.test(r)){if(!t)return r;r="auto"}return a=a&&(gt.boxSizingReliable()||r===i.style[e]),(r==="auto"||!parseFloat(r)&&z.css(i,"display",!1,n)==="inline")&&(r=i["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),r=parseFloat(r)||0,r+tc(i,e,t||(s?"border":"content"),a,n,r)+"px"}z.extend({cssHooks:{opacity:{get:function(i,e){if(e){var t=Fs(i,"opacity");return t===""?"1":t}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(i,e,t,n){if(!(!i||i.nodeType===3||i.nodeType===8||!i.style)){var r,s,a,o=Li(e),l=gf.test(e),c=i.style;if(l||(e=Ff(o)),a=z.cssHooks[e]||z.cssHooks[o],t!==void 0){if(s=typeof t,s==="string"&&(r=ko.exec(t))&&r[1]&&(t=tw(i,e,r),s="number"),t==null||t!==t)return;s==="number"&&(t+=r&&r[3]||(z.cssNumber[o]?"":"px")),!gt.clearCloneStyle&&t===""&&e.indexOf("background")===0&&(c[e]="inherit"),(!a||!("set"in a)||(t=a.set(i,t,n))!==void 0)&&(l?c.setProperty(e,t):c[e]=t)}else return a&&"get"in a&&(r=a.get(i,!1,n))!==void 0?r:c[e]}},css:function(i,e,t,n){var r,s,a,o=Li(e),l=gf.test(e);return l||(e=Ff(o)),a=z.cssHooks[e]||z.cssHooks[o],a&&"get"in a&&(r=a.get(i,!0,t)),r===void 0&&(r=Fs(i,e,n)),r==="normal"&&e in mf&&(r=mf[e]),t===""||t?(s=parseFloat(r),t===!0||isFinite(s)?s||0:r):r}});z.each(["height","width"],function(i,e){z.cssHooks[e]={get:function(t,n,r){if(n)return pw.test(z.css(t,"display"))&&(!t.getClientRects().length||!t.getBoundingClientRect().width)?x2(t,gw,function(){return yf(t,e,r)}):yf(t,e,r)},set:function(t,n,r){var s,a=Io(t),o=z.css(t,"boxSizing",!1,a)==="border-box",l=r&&tc(t,e,r,o,a);return o&&gt.scrollboxSize()===a.position&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-tc(t,e,"border",!1,a)-.5)),l&&(s=ko.exec(n))&&(s[3]||"px")!=="px"&&(t.style[e]=n,n=z.css(t,e)),B2(t,n,l)}}});z.cssHooks.marginLeft=N2(gt.reliableMarginLeft,function(i,e){if(e)return(parseFloat(Fs(i,"marginLeft"))||i.getBoundingClientRect().left-x2(i,{marginLeft:0},function(){return i.getBoundingClientRect().left}))+"px"});z.each({margin:"",padding:"",border:"Width"},function(i,e){z.cssHooks[i+e]={expand:function(t){for(var n=0,r={},s=typeof t=="string"?t.split(" "):[t];n<4;n++)r[i+ji[n]+e]=s[n]||s[n-2]||s[0];return r}},i!=="margin"&&(z.cssHooks[i+e].set=B2)});z.fn.extend({css:function(i,e){return Oi(this,function(t,n,r){var s,a,o={},l=0;if(Array.isArray(n)){for(s=Io(t),a=n.length;l<a;l++)o[n[l]]=z.css(t,n[l],!1,s);return o}return r!==void 0?z.style(t,n,r):z.css(t,n)},i,e,arguments.length>1)}});z.fn.delay=function(i,e){return i=z.fx&&z.fx.speeds[i]||i,e=e||"fx",this.queue(e,function(t,n){var r=window.setTimeout(t,i);n.stop=function(){window.clearTimeout(r)}})};(function(){var i=tt.createElement("input"),e=tt.createElement("select"),t=e.appendChild(tt.createElement("option"));i.type="checkbox",gt.checkOn=i.value!=="",gt.optSelected=t.selected,i=tt.createElement("input"),i.value="t",i.type="radio",gt.radioValue=i.value==="t"})();var T2,Ur=z.expr.attrHandle;z.fn.extend({attr:function(i,e){return Oi(this,z.attr,i,e,arguments.length>1)},removeAttr:function(i){return this.each(function(){z.removeAttr(this,i)})}});z.extend({attr:function(i,e,t){var n,r,s=i.nodeType;if(!(s===3||s===8||s===2)){if(typeof i.getAttribute>"u")return z.prop(i,e,t);if((s!==1||!z.isXMLDoc(i))&&(r=z.attrHooks[e.toLowerCase()]||(z.expr.match.bool.test(e)?T2:void 0)),t!==void 0){if(t===null){z.removeAttr(i,e);return}return r&&"set"in r&&(n=r.set(i,t,e))!==void 0?n:(i.setAttribute(e,t+""),t)}return r&&"get"in r&&(n=r.get(i,e))!==null?n:(n=z.find.attr(i,e),n??void 0)}},attrHooks:{type:{set:function(i,e){if(!gt.radioValue&&e==="radio"&&xi(i,"input")){var t=i.value;return i.setAttribute("type",e),t&&(i.value=t),e}}}},removeAttr:function(i,e){var t,n=0,r=e&&e.match(xn);if(r&&i.nodeType===1)for(;t=r[n++];)i.removeAttribute(t)}});T2={set:function(i,e,t){return e===!1?z.removeAttr(i,t):i.setAttribute(t,t),t}};z.each(z.expr.match.bool.source.match(/\w+/g),function(i,e){var t=Ur[e]||z.find.attr;Ur[e]=function(n,r,s){var a,o,l=r.toLowerCase();return s||(o=Ur[l],Ur[l]=a,a=t(n,r,s)!=null?l:null,Ur[l]=o),a}});var ww=/^(?:input|select|textarea|button)$/i,bw=/^(?:a|area)$/i;z.fn.extend({prop:function(i,e){return Oi(this,z.prop,i,e,arguments.length>1)},removeProp:function(i){return this.each(function(){delete this[z.propFix[i]||i]})}});z.extend({prop:function(i,e,t){var n,r,s=i.nodeType;if(!(s===3||s===8||s===2))return(s!==1||!z.isXMLDoc(i))&&(e=z.propFix[e]||e,r=z.propHooks[e]),t!==void 0?r&&"set"in r&&(n=r.set(i,t,e))!==void 0?n:i[e]=t:r&&"get"in r&&(n=r.get(i,e))!==null?n:i[e]},propHooks:{tabIndex:{get:function(i){var e=z.find.attr(i,"tabindex");return e?parseInt(e,10):ww.test(i.nodeName)||bw.test(i.nodeName)&&i.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}});gt.optSelected||(z.propHooks.selected={get:function(i){var e=i.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(i){var e=i.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}});z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){z.propFix[this.toLowerCase()]=this});function er(i){var e=i.match(xn)||[];return e.join(" ")}function ln(i){return i.getAttribute&&i.getAttribute("class")||""}function Uo(i){return Array.isArray(i)?i:typeof i=="string"?i.match(xn)||[]:[]}z.fn.extend({addClass:function(i){var e,t,n,r,s,a,o,l=0;if(et(i))return this.each(function(c){z(this).addClass(i.call(this,c,ln(this)))});if(e=Uo(i),e.length){for(;t=this[l++];)if(r=ln(t),n=t.nodeType===1&&" "+er(r)+" ",n){for(a=0;s=e[a++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");o=er(n),r!==o&&t.setAttribute("class",o)}}return this},removeClass:function(i){var e,t,n,r,s,a,o,l=0;if(et(i))return this.each(function(c){z(this).removeClass(i.call(this,c,ln(this)))});if(!arguments.length)return this.attr("class","");if(e=Uo(i),e.length){for(;t=this[l++];)if(r=ln(t),n=t.nodeType===1&&" "+er(r)+" ",n){for(a=0;s=e[a++];)for(;n.indexOf(" "+s+" ")>-1;)n=n.replace(" "+s+" "," ");o=er(n),r!==o&&t.setAttribute("class",o)}}return this},toggleClass:function(i,e){var t=typeof i,n=t==="string"||Array.isArray(i);return typeof e=="boolean"&&n?e?this.addClass(i):this.removeClass(i):et(i)?this.each(function(r){z(this).toggleClass(i.call(this,r,ln(this),e),e)}):this.each(function(){var r,s,a,o;if(n)for(s=0,a=z(this),o=Uo(i);r=o[s++];)a.hasClass(r)?a.removeClass(r):a.addClass(r);else(i===void 0||t==="boolean")&&(r=ln(this),r&&$e.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||i===!1?"":$e.get(this,"__className__")||""))})},hasClass:function(i){var e,t,n=0;for(e=" "+i+" ";t=this[n++];)if(t.nodeType===1&&(" "+er(ln(t))+" ").indexOf(e)>-1)return!0;return!1}});var Fw=/\r/g;z.fn.extend({val:function(i){var e,t,n,r=this[0];return arguments.length?(n=et(i),this.each(function(s){var a;this.nodeType===1&&(n?a=i.call(this,s,z(this).val()):a=i,a==null?a="":typeof a=="number"?a+="":Array.isArray(a)&&(a=z.map(a,function(o){return o==null?"":o+""})),e=z.valHooks[this.type]||z.valHooks[this.nodeName.toLowerCase()],(!e||!("set"in e)||e.set(this,a,"value")===void 0)&&(this.value=a))})):r?(e=z.valHooks[r.type]||z.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&(t=e.get(r,"value"))!==void 0?t:(t=r.value,typeof t=="string"?t.replace(Fw,""):t??"")):void 0}});z.extend({valHooks:{option:{get:function(i){var e=z.find.attr(i,"value");return e??er(z.text(i))}},select:{get:function(i){var e,t,n,r=i.options,s=i.selectedIndex,a=i.type==="select-one",o=a?null:[],l=a?s+1:r.length;for(s<0?n=l:n=a?s:0;n<l;n++)if(t=r[n],(t.selected||n===s)&&!t.disabled&&(!t.parentNode.disabled||!xi(t.parentNode,"optgroup"))){if(e=z(t).val(),a)return e;o.push(e)}return o},set:function(i,e){for(var t,n,r=i.options,s=z.makeArray(e),a=r.length;a--;)n=r[a],(n.selected=z.inArray(z.valHooks.option.get(n),s)>-1)&&(t=!0);return t||(i.selectedIndex=-1),s}}}});z.each(["radio","checkbox"],function(){z.valHooks[this]={set:function(i,e){if(Array.isArray(e))return i.checked=z.inArray(z(i).val(),e)>-1}},gt.checkOn||(z.valHooks[this].get=function(i){return i.getAttribute("value")===null?"on":i.value})});gt.focusin="onfocusin"in window;var Af=/^(?:focusinfocus|focusoutblur)$/,vf=function(i){i.stopPropagation()};z.extend(z.event,{trigger:function(i,e,t,n){var r,s,a,o,l,c,h,f,d=[t||tt],u=$a.call(i,"type")?i.type:i,p=$a.call(i,"namespace")?i.namespace.split("."):[];if(s=f=a=t=t||tt,!(t.nodeType===3||t.nodeType===8)&&!Af.test(u+z.event.triggered)&&(u.indexOf(".")>-1&&(p=u.split("."),u=p.shift(),p.sort()),l=u.indexOf(":")<0&&"on"+u,i=i[z.expando]?i:new z.Event(u,typeof i=="object"&&i),i.isTrigger=n?2:3,i.namespace=p.join("."),i.rnamespace=i.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=void 0,i.target||(i.target=t),e=e==null?[i]:z.makeArray(e,[i]),h=z.event.special[u]||{},!(!n&&h.trigger&&h.trigger.apply(t,e)===!1))){if(!n&&!h.noBubble&&!Fr(t)){for(o=h.delegateType||u,Af.test(o+u)||(s=s.parentNode);s;s=s.parentNode)d.push(s),a=s;a===(t.ownerDocument||tt)&&d.push(a.defaultView||a.parentWindow||window)}for(r=0;(s=d[r++])&&!i.isPropagationStopped();)f=s,i.type=r>1?o:h.bindType||u,c=($e.get(s,"events")||{})[i.type]&&$e.get(s,"handle"),c&&c.apply(s,e),c=l&&s[l],c&&c.apply&&Wa(s)&&(i.result=c.apply(s,e),i.result===!1&&i.preventDefault());return i.type=u,!n&&!i.isDefaultPrevented()&&(!h._default||h._default.apply(d.pop(),e)===!1)&&Wa(t)&&l&&et(t[u])&&!Fr(t)&&(a=t[l],a&&(t[l]=null),z.event.triggered=u,i.isPropagationStopped()&&f.addEventListener(u,vf),t[u](),i.isPropagationStopped()&&f.removeEventListener(u,vf),z.event.triggered=void 0,a&&(t[l]=a)),i.result}},simulate:function(i,e,t){var n=z.extend(new z.Event,t,{type:i,isSimulated:!0});z.event.trigger(n,null,e)}});z.fn.extend({trigger:function(i,e){return this.each(function(){z.event.trigger(i,e,this)})},triggerHandler:function(i,e){var t=this[0];if(t)return z.event.trigger(i,e,t,!0)}});gt.focusin||z.each({focus:"focusin",blur:"focusout"},function(i,e){var t=function(n){z.event.simulate(e,n.target,z.event.fix(n))};z.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=$e.access(n,e);r||n.addEventListener(i,t,!0),$e.access(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=$e.access(n,e)-1;r?$e.access(n,e,r):(n.removeEventListener(i,t,!0),$e.remove(n,e))}}});var yw=/\[\]$/,_f=/\r?\n/g,Aw=/^(?:submit|button|image|reset|file)$/i,vw=/^(?:input|select|textarea|keygen)/i;function ic(i,e,t,n){var r;if(Array.isArray(e))z.each(e,function(s,a){t||yw.test(i)?n(i,a):ic(i+"["+(typeof a=="object"&&a!=null?s:"")+"]",a,t,n)});else if(!t&&Er(e)==="object")for(r in e)ic(i+"["+r+"]",e[r],t,n);else n(i,e)}z.param=function(i,e){var t,n=[],r=function(s,a){var o=et(a)?a():a;n[n.length]=encodeURIComponent(s)+"="+encodeURIComponent(o??"")};if(Array.isArray(i)||i.jquery&&!z.isPlainObject(i))z.each(i,function(){r(this.name,this.value)});else for(t in i)ic(t,i[t],e,r);return n.join("&")};z.fn.extend({serialize:function(){return z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var i=z.prop(this,"elements");return i?z.makeArray(i):this}).filter(function(){var i=this.type;return this.name&&!z(this).is(":disabled")&&vw.test(this.nodeName)&&!Aw.test(i)&&(this.checked||!k2.test(i))}).map(function(i,e){var t=z(this).val();return t==null?null:Array.isArray(t)?z.map(t,function(n){return{name:e.name,value:n.replace(_f,`\r
`)}}):{name:e.name,value:t.replace(_f,`\r
`)}}).get()}});z.fn.extend({wrapAll:function(i){var e;return this[0]&&(et(i)&&(i=i.call(this[0])),e=z(i,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(i){return et(i)?this.each(function(e){z(this).wrapInner(i.call(this,e))}):this.each(function(){var e=z(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(i){var e=et(i);return this.each(function(t){z(this).wrapAll(e?i.call(this,t):i)})},unwrap:function(i){return this.parent(i).not("body").each(function(){z(this).replaceWith(this.childNodes)}),this}});z.expr.pseudos.hidden=function(i){return!z.expr.pseudos.visible(i)};z.expr.pseudos.visible=function(i){return!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length)};gt.createHTMLDocument=function(){var i=tt.implementation.createHTMLDocument("").body;return i.innerHTML="<form></form><form></form>",i.childNodes.length===2}();z.parseHTML=function(i,e,t){if(typeof i!="string")return[];typeof e=="boolean"&&(t=e,e=!1);var n,r,s;return e||(gt.createHTMLDocument?(e=tt.implementation.createHTMLDocument(""),n=e.createElement("base"),n.href=tt.location.href,e.head.appendChild(n)):e=tt),r=A2.exec(i),s=!t&&[],r?[e.createElement(r[1])]:(r=S2([i],e,s),s&&s.length&&z(s).remove(),z.merge([],r.childNodes))};z.offset={setOffset:function(i,e,t){var n,r,s,a,o,l,c,h=z.css(i,"position"),f=z(i),d={};h==="static"&&(i.style.position="relative"),o=f.offset(),s=z.css(i,"top"),l=z.css(i,"left"),c=(h==="absolute"||h==="fixed")&&(s+l).indexOf("auto")>-1,c?(n=f.position(),a=n.top,r=n.left):(a=parseFloat(s)||0,r=parseFloat(l)||0),et(e)&&(e=e.call(i,t,z.extend({},o))),e.top!=null&&(d.top=e.top-o.top+a),e.left!=null&&(d.left=e.left-o.left+r),"using"in e?e.using.call(i,d):f.css(d)}};z.fn.extend({offset:function(i){if(arguments.length)return i===void 0?this:this.each(function(r){z.offset.setOffset(this,i,r)});var e,t,n=this[0];if(n)return n.getClientRects().length?(e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView,{top:e.top+t.pageYOffset,left:e.left+t.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var i,e,t,n=this[0],r={top:0,left:0};if(z.css(n,"position")==="fixed")e=n.getBoundingClientRect();else{for(e=this.offset(),t=n.ownerDocument,i=n.offsetParent||t.documentElement;i&&(i===t.body||i===t.documentElement)&&z.css(i,"position")==="static";)i=i.parentNode;i&&i!==n&&i.nodeType===1&&(r=z(i).offset(),r.top+=z.css(i,"borderTopWidth",!0),r.left+=z.css(i,"borderLeftWidth",!0))}return{top:e.top-r.top-z.css(n,"marginTop",!0),left:e.left-r.left-z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var i=this.offsetParent;i&&z.css(i,"position")==="static";)i=i.offsetParent;return i||Ka})}});z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(i,e){var t=e==="pageYOffset";z.fn[i]=function(n){return Oi(this,function(r,s,a){var o;if(Fr(r)?o=r:r.nodeType===9&&(o=r.defaultView),a===void 0)return o?o[e]:r[s];o?o.scrollTo(t?o.pageXOffset:a,t?a:o.pageYOffset):r[s]=a},i,n,arguments.length)}});z.each(["top","left"],function(i,e){z.cssHooks[e]=N2(gt.pixelPosition,function(t,n){if(n)return n=Fs(t,e),ah.test(n)?z(t).position()[e]+"px":n})});z.each({Height:"height",Width:"width"},function(i,e){z.each({padding:"inner"+i,content:e,"":"outer"+i},function(t,n){z.fn[n]=function(r,s){var a=arguments.length&&(t||typeof r!="boolean"),o=t||(r===!0||s===!0?"margin":"border");return Oi(this,function(l,c,h){var f;return Fr(l)?n.indexOf("outer")===0?l["inner"+i]:l.document.documentElement["client"+i]:l.nodeType===9?(f=l.documentElement,Math.max(l.body["scroll"+i],f["scroll"+i],l.body["offset"+i],f["offset"+i],f["client"+i])):h===void 0?z.css(l,c,o):z.style(l,c,h,o)},e,a?r:void 0,a)}})});z.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(i,e){z.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}});z.fn.extend({hover:function(i,e){return this.mouseenter(i).mouseleave(e||i)}});z.fn.extend({bind:function(i,e,t){return this.on(i,null,e,t)},unbind:function(i,e){return this.off(i,null,e)},delegate:function(i,e,t,n){return this.on(e,i,t,n)},undelegate:function(i,e,t){return arguments.length===1?this.off(i,"**"):this.off(e,i||"**",t)}});z.proxy=function(i,e){var t,n,r;if(typeof e=="string"&&(t=i[e],e=i,i=t),!!et(i))return n=_n.call(arguments,2),r=function(){return i.apply(e||this,n.concat(_n.call(arguments)))},r.guid=i.guid=i.guid||z.guid++,r};z.holdReady=function(i){i?z.readyWait++:z.ready(!0)};z.isArray=Array.isArray;z.parseJSON=JSON.parse;z.nodeName=xi;z.isFunction=et;z.isWindow=Fr;z.camelCase=Li;z.type=Er;z.now=Date.now;z.isNumeric=function(i){var e=z.type(i);return(e==="number"||e==="string")&&!isNaN(i-parseFloat(i))};const ve=z;function ut(i){return typeof i=="string"||i instanceof String}function He(i){var e=String(i).split(/[.,]/),t=",",n=".";return e[0].split("").reverse().reduce(function(r,s,a){return a%3===0?r+t+s:r+s}).split("").reverse().join("")+(e[1]?n+e[1]:"")}const zn=function(i){return i.split(/\n|\r\n|\r/g)};function _w(i,e){var t=[],n=i.length,r,s=0,a=!1,o;if(n>0)for(t[s]=i.charAt(0),r=1;r<n;r++)o=i.charAt(r),o==='"'?a=!a:!a&&o===e?(s++,t[s]=""):t[s]+=o;return t}function Cw(i){return i===void 0||((i.startsWith("'")||i.startsWith('"'))&&(i=i.substring(1)),(i.endsWith("'")||i.endsWith('"'))&&(i=i.substring(0,i.length-1))),i}function nc(i){return i.length>0?i.charAt(0).toUpperCase()+i.slice(1):i}function xw(i){const e=i.split(":"),t=e[1].split("-"),n={chr:e[0],start:Number.parseInt(t[0].replace(/,/g,""))-1};return t.length>1?n.end=Number.parseInt(t[1].replace(/,/g,"")):n.end=n.start+1,n}function M2(i){if(i.name!==void 0)return i.name;if(ut(i)){let e=i.lastIndexOf("/"),t=e<0?i:i.substr(e+1);return e=t.indexOf("?"),e>0&&(t=t.substr(0,e)),t}else throw Error(`Expected File or string, got ${typeof i}`)}function tn(i){return i?typeof i!="function"&&(i instanceof File||i.hasOwnProperty("name")&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function"):!1}function Ya(i,e){const t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",i),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}typeof process=="object"&&typeof window>"u"&&(global.atob=function(i){return Buffer.from(i,"base64").toString("binary")});function R2(i){for(var e=kw,t=e.parser.loose.exec(i),n={},r=14;r--;)n[e.key[r]]=t[r]||"";return n[e.q.name]={},n[e.key[12]].replace(e.q.parser,function(s,a,o){a&&(n[e.q.name][a]=o)}),n}const kw={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};async function Iw(i){return typeof i=="function"?i():i}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Ew=4,Cf=0,xf=1,Sw=2;function Sr(i){let e=i.length;for(;--e>=0;)i[e]=0}const Nw=0,D2=1,Bw=2,Tw=3,Mw=258,oh=29,Qs=256,ys=Qs+1+oh,cr=30,lh=19,L2=2*ys+1,un=15,qo=16,Rw=7,ch=256,z2=16,H2=17,P2=18,rc=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ta=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Dw=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),O2=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Lw=512,Mi=new Array((ys+2)*2);Sr(Mi);const cs=new Array(cr*2);Sr(cs);const As=new Array(Lw);Sr(As);const vs=new Array(Mw-Tw+1);Sr(vs);const hh=new Array(oh);Sr(hh);const Za=new Array(cr);Sr(Za);function Vo(i,e,t,n,r){this.static_tree=i,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=r,this.has_stree=i&&i.length}let U2,q2,V2;function Qo(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}const Q2=i=>i<256?As[i]:As[256+(i>>>7)],_s=(i,e)=>{i.pending_buf[i.pending++]=e&255,i.pending_buf[i.pending++]=e>>>8&255},jt=(i,e,t)=>{i.bi_valid>qo-t?(i.bi_buf|=e<<i.bi_valid&65535,_s(i,i.bi_buf),i.bi_buf=e>>qo-i.bi_valid,i.bi_valid+=t-qo):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=t)},bi=(i,e,t)=>{jt(i,t[e*2],t[e*2+1])},G2=(i,e)=>{let t=0;do t|=i&1,i>>>=1,t<<=1;while(--e>0);return t>>>1},zw=i=>{i.bi_valid===16?(_s(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)},Hw=(i,e)=>{const t=e.dyn_tree,n=e.max_code,r=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let c,h,f,d,u,p,m=0;for(d=0;d<=un;d++)i.bl_count[d]=0;for(t[i.heap[i.heap_max]*2+1]=0,c=i.heap_max+1;c<L2;c++)h=i.heap[c],d=t[t[h*2+1]*2+1]+1,d>l&&(d=l,m++),t[h*2+1]=d,!(h>n)&&(i.bl_count[d]++,u=0,h>=o&&(u=a[h-o]),p=t[h*2],i.opt_len+=p*(d+u),s&&(i.static_len+=p*(r[h*2+1]+u)));if(m!==0){do{for(d=l-1;i.bl_count[d]===0;)d--;i.bl_count[d]--,i.bl_count[d+1]+=2,i.bl_count[l]--,m-=2}while(m>0);for(d=l;d!==0;d--)for(h=i.bl_count[d];h!==0;)f=i.heap[--c],!(f>n)&&(t[f*2+1]!==d&&(i.opt_len+=(d-t[f*2+1])*t[f*2],t[f*2+1]=d),h--)}},$2=(i,e,t)=>{const n=new Array(un+1);let r=0,s,a;for(s=1;s<=un;s++)r=r+t[s-1]<<1,n[s]=r;for(a=0;a<=e;a++){let o=i[a*2+1];o!==0&&(i[a*2]=G2(n[o]++,o))}},Pw=()=>{let i,e,t,n,r;const s=new Array(un+1);for(t=0,n=0;n<oh-1;n++)for(hh[n]=t,i=0;i<1<<rc[n];i++)vs[t++]=n;for(vs[t-1]=n,r=0,n=0;n<16;n++)for(Za[n]=r,i=0;i<1<<Ta[n];i++)As[r++]=n;for(r>>=7;n<cr;n++)for(Za[n]=r<<7,i=0;i<1<<Ta[n]-7;i++)As[256+r++]=n;for(e=0;e<=un;e++)s[e]=0;for(i=0;i<=143;)Mi[i*2+1]=8,i++,s[8]++;for(;i<=255;)Mi[i*2+1]=9,i++,s[9]++;for(;i<=279;)Mi[i*2+1]=7,i++,s[7]++;for(;i<=287;)Mi[i*2+1]=8,i++,s[8]++;for($2(Mi,ys+1,s),i=0;i<cr;i++)cs[i*2+1]=5,cs[i*2]=G2(i,5);U2=new Vo(Mi,rc,Qs+1,ys,un),q2=new Vo(cs,Ta,0,cr,un),V2=new Vo(new Array(0),Dw,0,lh,Rw)},j2=i=>{let e;for(e=0;e<ys;e++)i.dyn_ltree[e*2]=0;for(e=0;e<cr;e++)i.dyn_dtree[e*2]=0;for(e=0;e<lh;e++)i.bl_tree[e*2]=0;i.dyn_ltree[ch*2]=1,i.opt_len=i.static_len=0,i.sym_next=i.matches=0},W2=i=>{i.bi_valid>8?_s(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0},kf=(i,e,t,n)=>{const r=e*2,s=t*2;return i[r]<i[s]||i[r]===i[s]&&n[e]<=n[t]},Go=(i,e,t)=>{const n=i.heap[t];let r=t<<1;for(;r<=i.heap_len&&(r<i.heap_len&&kf(e,i.heap[r+1],i.heap[r],i.depth)&&r++,!kf(e,n,i.heap[r],i.depth));)i.heap[t]=i.heap[r],t=r,r<<=1;i.heap[t]=n},If=(i,e,t)=>{let n,r,s=0,a,o;if(i.sym_next!==0)do n=i.pending_buf[i.sym_buf+s++]&255,n+=(i.pending_buf[i.sym_buf+s++]&255)<<8,r=i.pending_buf[i.sym_buf+s++],n===0?bi(i,r,e):(a=vs[r],bi(i,a+Qs+1,e),o=rc[a],o!==0&&(r-=hh[a],jt(i,r,o)),n--,a=Q2(n),bi(i,a,t),o=Ta[a],o!==0&&(n-=Za[a],jt(i,n,o)));while(s<i.sym_next);bi(i,ch,e)},sc=(i,e)=>{const t=e.dyn_tree,n=e.stat_desc.static_tree,r=e.stat_desc.has_stree,s=e.stat_desc.elems;let a,o,l=-1,c;for(i.heap_len=0,i.heap_max=L2,a=0;a<s;a++)t[a*2]!==0?(i.heap[++i.heap_len]=l=a,i.depth[a]=0):t[a*2+1]=0;for(;i.heap_len<2;)c=i.heap[++i.heap_len]=l<2?++l:0,t[c*2]=1,i.depth[c]=0,i.opt_len--,r&&(i.static_len-=n[c*2+1]);for(e.max_code=l,a=i.heap_len>>1;a>=1;a--)Go(i,t,a);c=s;do a=i.heap[1],i.heap[1]=i.heap[i.heap_len--],Go(i,t,1),o=i.heap[1],i.heap[--i.heap_max]=a,i.heap[--i.heap_max]=o,t[c*2]=t[a*2]+t[o*2],i.depth[c]=(i.depth[a]>=i.depth[o]?i.depth[a]:i.depth[o])+1,t[a*2+1]=t[o*2+1]=c,i.heap[1]=c++,Go(i,t,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],Hw(i,e),$2(t,l,i.bl_count)},Ef=(i,e,t)=>{let n,r=-1,s,a=e[0*2+1],o=0,l=7,c=4;for(a===0&&(l=138,c=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)s=a,a=e[(n+1)*2+1],!(++o<l&&s===a)&&(o<c?i.bl_tree[s*2]+=o:s!==0?(s!==r&&i.bl_tree[s*2]++,i.bl_tree[z2*2]++):o<=10?i.bl_tree[H2*2]++:i.bl_tree[P2*2]++,o=0,r=s,a===0?(l=138,c=3):s===a?(l=6,c=3):(l=7,c=4))},Sf=(i,e,t)=>{let n,r=-1,s,a=e[0*2+1],o=0,l=7,c=4;for(a===0&&(l=138,c=3),n=0;n<=t;n++)if(s=a,a=e[(n+1)*2+1],!(++o<l&&s===a)){if(o<c)do bi(i,s,i.bl_tree);while(--o!==0);else s!==0?(s!==r&&(bi(i,s,i.bl_tree),o--),bi(i,z2,i.bl_tree),jt(i,o-3,2)):o<=10?(bi(i,H2,i.bl_tree),jt(i,o-3,3)):(bi(i,P2,i.bl_tree),jt(i,o-11,7));o=0,r=s,a===0?(l=138,c=3):s===a?(l=6,c=3):(l=7,c=4)}},Ow=i=>{let e;for(Ef(i,i.dyn_ltree,i.l_desc.max_code),Ef(i,i.dyn_dtree,i.d_desc.max_code),sc(i,i.bl_desc),e=lh-1;e>=3&&i.bl_tree[O2[e]*2+1]===0;e--);return i.opt_len+=3*(e+1)+5+5+4,e},Uw=(i,e,t,n)=>{let r;for(jt(i,e-257,5),jt(i,t-1,5),jt(i,n-4,4),r=0;r<n;r++)jt(i,i.bl_tree[O2[r]*2+1],3);Sf(i,i.dyn_ltree,e-1),Sf(i,i.dyn_dtree,t-1)},qw=i=>{let e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&i.dyn_ltree[t*2]!==0)return Cf;if(i.dyn_ltree[9*2]!==0||i.dyn_ltree[10*2]!==0||i.dyn_ltree[13*2]!==0)return xf;for(t=32;t<Qs;t++)if(i.dyn_ltree[t*2]!==0)return xf;return Cf};let Nf=!1;const Vw=i=>{Nf||(Pw(),Nf=!0),i.l_desc=new Qo(i.dyn_ltree,U2),i.d_desc=new Qo(i.dyn_dtree,q2),i.bl_desc=new Qo(i.bl_tree,V2),i.bi_buf=0,i.bi_valid=0,j2(i)},K2=(i,e,t,n)=>{jt(i,(Nw<<1)+(n?1:0),3),W2(i),_s(i,t),_s(i,~t),t&&i.pending_buf.set(i.window.subarray(e,e+t),i.pending),i.pending+=t},Qw=i=>{jt(i,D2<<1,3),bi(i,ch,Mi),zw(i)},Gw=(i,e,t,n)=>{let r,s,a=0;i.level>0?(i.strm.data_type===Sw&&(i.strm.data_type=qw(i)),sc(i,i.l_desc),sc(i,i.d_desc),a=Ow(i),r=i.opt_len+3+7>>>3,s=i.static_len+3+7>>>3,s<=r&&(r=s)):r=s=t+5,t+4<=r&&e!==-1?K2(i,e,t,n):i.strategy===Ew||s===r?(jt(i,(D2<<1)+(n?1:0),3),If(i,Mi,cs)):(jt(i,(Bw<<1)+(n?1:0),3),Uw(i,i.l_desc.max_code+1,i.d_desc.max_code+1,a+1),If(i,i.dyn_ltree,i.dyn_dtree)),j2(i),n&&W2(i)},$w=(i,e,t)=>(i.pending_buf[i.sym_buf+i.sym_next++]=e,i.pending_buf[i.sym_buf+i.sym_next++]=e>>8,i.pending_buf[i.sym_buf+i.sym_next++]=t,e===0?i.dyn_ltree[t*2]++:(i.matches++,e--,i.dyn_ltree[(vs[t]+Qs+1)*2]++,i.dyn_dtree[Q2(e)*2]++),i.sym_next===i.sym_end);var jw=Vw,Ww=K2,Kw=Gw,Yw=$w,Zw=Qw,Xw={_tr_init:jw,_tr_stored_block:Ww,_tr_flush_block:Kw,_tr_tally:Yw,_tr_align:Zw};const Jw=(i,e,t,n)=>{let r=i&65535|0,s=i>>>16&65535|0,a=0;for(;t!==0;){a=t>2e3?2e3:t,t-=a;do r=r+e[n++]|0,s=s+r|0;while(--a);r%=65521,s%=65521}return r|s<<16|0};var Cs=Jw;const eb=()=>{let i,e=[];for(var t=0;t<256;t++){i=t;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e},tb=new Uint32Array(eb()),ib=(i,e,t,n)=>{const r=tb,s=n+t;i^=-1;for(let a=n;a<s;a++)i=i>>>8^r[(i^e[a])&255];return i^-1};var It=ib,kn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Nr={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:nb,_tr_stored_block:ac,_tr_flush_block:rb,_tr_tally:Xi,_tr_align:sb}=Xw,{Z_NO_FLUSH:Ji,Z_PARTIAL_FLUSH:ab,Z_FULL_FLUSH:ob,Z_FINISH:ri,Z_BLOCK:Bf,Z_OK:Tt,Z_STREAM_END:Tf,Z_STREAM_ERROR:_i,Z_DATA_ERROR:lb,Z_BUF_ERROR:$o,Z_DEFAULT_COMPRESSION:cb,Z_FILTERED:hb,Z_HUFFMAN_ONLY:ia,Z_RLE:fb,Z_FIXED:db,Z_DEFAULT_STRATEGY:ub,Z_UNKNOWN:pb,Z_DEFLATED:Eo}=Nr,gb=9,mb=15,wb=8,bb=29,Fb=256,oc=Fb+1+bb,yb=30,Ab=19,vb=2*oc+1,_b=15,Ge=3,Zi=258,Ci=Zi+Ge+1,Cb=32,yr=42,fh=57,lc=69,cc=73,hc=91,fc=103,pn=113,ss=666,Ut=1,Br=2,In=3,Tr=4,xb=3,gn=(i,e)=>(i.msg=kn[e],e),Mf=i=>i*2-(i>4?9:0),Ki=i=>{let e=i.length;for(;--e>=0;)i[e]=0},kb=i=>{let e,t,n,r=i.w_size;e=i.hash_size,n=e;do t=i.head[--n],i.head[n]=t>=r?t-r:0;while(--e);e=r,n=e;do t=i.prev[--n],i.prev[n]=t>=r?t-r:0;while(--e)};let Ib=(i,e,t)=>(e<<i.hash_shift^t)&i.hash_mask,en=Ib;const Zt=i=>{const e=i.state;let t=e.pending;t>i.avail_out&&(t=i.avail_out),t!==0&&(i.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),i.next_out),i.next_out+=t,e.pending_out+=t,i.total_out+=t,i.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))},Xt=(i,e)=>{rb(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,Zt(i.strm)},Ye=(i,e)=>{i.pending_buf[i.pending++]=e},qr=(i,e)=>{i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=e&255},dc=(i,e,t,n)=>{let r=i.avail_in;return r>n&&(r=n),r===0?0:(i.avail_in-=r,e.set(i.input.subarray(i.next_in,i.next_in+r),t),i.state.wrap===1?i.adler=Cs(i.adler,e,r,t):i.state.wrap===2&&(i.adler=It(i.adler,e,r,t)),i.next_in+=r,i.total_in+=r,r)},Y2=(i,e)=>{let t=i.max_chain_length,n=i.strstart,r,s,a=i.prev_length,o=i.nice_match;const l=i.strstart>i.w_size-Ci?i.strstart-(i.w_size-Ci):0,c=i.window,h=i.w_mask,f=i.prev,d=i.strstart+Zi;let u=c[n+a-1],p=c[n+a];i.prev_length>=i.good_match&&(t>>=2),o>i.lookahead&&(o=i.lookahead);do if(r=e,!(c[r+a]!==p||c[r+a-1]!==u||c[r]!==c[n]||c[++r]!==c[n+1])){n+=2,r++;do;while(c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&c[++n]===c[++r]&&n<d);if(s=Zi-(d-n),n=d-Zi,s>a){if(i.match_start=e,a=s,s>=o)break;u=c[n+a-1],p=c[n+a]}}while((e=f[e&h])>l&&--t!==0);return a<=i.lookahead?a:i.lookahead},Ar=i=>{const e=i.w_size;let t,n,r;do{if(n=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-Ci)&&(i.window.set(i.window.subarray(e,e+e-n),0),i.match_start-=e,i.strstart-=e,i.block_start-=e,i.insert>i.strstart&&(i.insert=i.strstart),kb(i),n+=e),i.strm.avail_in===0)break;if(t=dc(i.strm,i.window,i.strstart+i.lookahead,n),i.lookahead+=t,i.lookahead+i.insert>=Ge)for(r=i.strstart-i.insert,i.ins_h=i.window[r],i.ins_h=en(i,i.ins_h,i.window[r+1]);i.insert&&(i.ins_h=en(i,i.ins_h,i.window[r+Ge-1]),i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++,i.insert--,!(i.lookahead+i.insert<Ge)););}while(i.lookahead<Ci&&i.strm.avail_in!==0)},Z2=(i,e)=>{let t=i.pending_buf_size-5>i.w_size?i.w_size:i.pending_buf_size-5,n,r,s,a=0,o=i.strm.avail_in;do{if(n=65535,s=i.bi_valid+42>>3,i.strm.avail_out<s||(s=i.strm.avail_out-s,r=i.strstart-i.block_start,n>r+i.strm.avail_in&&(n=r+i.strm.avail_in),n>s&&(n=s),n<t&&(n===0&&e!==ri||e===Ji||n!==r+i.strm.avail_in)))break;a=e===ri&&n===r+i.strm.avail_in?1:0,ac(i,0,0,a),i.pending_buf[i.pending-4]=n,i.pending_buf[i.pending-3]=n>>8,i.pending_buf[i.pending-2]=~n,i.pending_buf[i.pending-1]=~n>>8,Zt(i.strm),r&&(r>n&&(r=n),i.strm.output.set(i.window.subarray(i.block_start,i.block_start+r),i.strm.next_out),i.strm.next_out+=r,i.strm.avail_out-=r,i.strm.total_out+=r,i.block_start+=r,n-=r),n&&(dc(i.strm,i.strm.output,i.strm.next_out,n),i.strm.next_out+=n,i.strm.avail_out-=n,i.strm.total_out+=n)}while(a===0);return o-=i.strm.avail_in,o&&(o>=i.w_size?(i.matches=2,i.window.set(i.strm.input.subarray(i.strm.next_in-i.w_size,i.strm.next_in),0),i.strstart=i.w_size,i.insert=i.strstart):(i.window_size-i.strstart<=o&&(i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,i.insert>i.strstart&&(i.insert=i.strstart)),i.window.set(i.strm.input.subarray(i.strm.next_in-o,i.strm.next_in),i.strstart),i.strstart+=o,i.insert+=o>i.w_size-i.insert?i.w_size-i.insert:o),i.block_start=i.strstart),i.high_water<i.strstart&&(i.high_water=i.strstart),a?Tr:e!==Ji&&e!==ri&&i.strm.avail_in===0&&i.strstart===i.block_start?Br:(s=i.window_size-i.strstart,i.strm.avail_in>s&&i.block_start>=i.w_size&&(i.block_start-=i.w_size,i.strstart-=i.w_size,i.window.set(i.window.subarray(i.w_size,i.w_size+i.strstart),0),i.matches<2&&i.matches++,s+=i.w_size,i.insert>i.strstart&&(i.insert=i.strstart)),s>i.strm.avail_in&&(s=i.strm.avail_in),s&&(dc(i.strm,i.window,i.strstart,s),i.strstart+=s,i.insert+=s>i.w_size-i.insert?i.w_size-i.insert:s),i.high_water<i.strstart&&(i.high_water=i.strstart),s=i.bi_valid+42>>3,s=i.pending_buf_size-s>65535?65535:i.pending_buf_size-s,t=s>i.w_size?i.w_size:s,r=i.strstart-i.block_start,(r>=t||(r||e===ri)&&e!==Ji&&i.strm.avail_in===0&&r<=s)&&(n=r>s?s:r,a=e===ri&&i.strm.avail_in===0&&n===r?1:0,ac(i,i.block_start,n,a),i.block_start+=n,Zt(i.strm)),a?In:Ut)},jo=(i,e)=>{let t,n;for(;;){if(i.lookahead<Ci){if(Ar(i),i.lookahead<Ci&&e===Ji)return Ut;if(i.lookahead===0)break}if(t=0,i.lookahead>=Ge&&(i.ins_h=en(i,i.ins_h,i.window[i.strstart+Ge-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),t!==0&&i.strstart-t<=i.w_size-Ci&&(i.match_length=Y2(i,t)),i.match_length>=Ge)if(n=Xi(i,i.strstart-i.match_start,i.match_length-Ge),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=Ge){i.match_length--;do i.strstart++,i.ins_h=en(i,i.ins_h,i.window[i.strstart+Ge-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=en(i,i.ins_h,i.window[i.strstart+1]);else n=Xi(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(n&&(Xt(i,!1),i.strm.avail_out===0))return Ut}return i.insert=i.strstart<Ge-1?i.strstart:Ge-1,e===ri?(Xt(i,!0),i.strm.avail_out===0?In:Tr):i.sym_next&&(Xt(i,!1),i.strm.avail_out===0)?Ut:Br},Vn=(i,e)=>{let t,n,r;for(;;){if(i.lookahead<Ci){if(Ar(i),i.lookahead<Ci&&e===Ji)return Ut;if(i.lookahead===0)break}if(t=0,i.lookahead>=Ge&&(i.ins_h=en(i,i.ins_h,i.window[i.strstart+Ge-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=Ge-1,t!==0&&i.prev_length<i.max_lazy_match&&i.strstart-t<=i.w_size-Ci&&(i.match_length=Y2(i,t),i.match_length<=5&&(i.strategy===hb||i.match_length===Ge&&i.strstart-i.match_start>4096)&&(i.match_length=Ge-1)),i.prev_length>=Ge&&i.match_length<=i.prev_length){r=i.strstart+i.lookahead-Ge,n=Xi(i,i.strstart-1-i.prev_match,i.prev_length-Ge),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=r&&(i.ins_h=en(i,i.ins_h,i.window[i.strstart+Ge-1]),t=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=Ge-1,i.strstart++,n&&(Xt(i,!1),i.strm.avail_out===0))return Ut}else if(i.match_available){if(n=Xi(i,0,i.window[i.strstart-1]),n&&Xt(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return Ut}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(n=Xi(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<Ge-1?i.strstart:Ge-1,e===ri?(Xt(i,!0),i.strm.avail_out===0?In:Tr):i.sym_next&&(Xt(i,!1),i.strm.avail_out===0)?Ut:Br},Eb=(i,e)=>{let t,n,r,s;const a=i.window;for(;;){if(i.lookahead<=Zi){if(Ar(i),i.lookahead<=Zi&&e===Ji)return Ut;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=Ge&&i.strstart>0&&(r=i.strstart-1,n=a[r],n===a[++r]&&n===a[++r]&&n===a[++r])){s=i.strstart+Zi;do;while(n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&n===a[++r]&&r<s);i.match_length=Zi-(s-r),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=Ge?(t=Xi(i,1,i.match_length-Ge),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(t=Xi(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),t&&(Xt(i,!1),i.strm.avail_out===0))return Ut}return i.insert=0,e===ri?(Xt(i,!0),i.strm.avail_out===0?In:Tr):i.sym_next&&(Xt(i,!1),i.strm.avail_out===0)?Ut:Br},Sb=(i,e)=>{let t;for(;;){if(i.lookahead===0&&(Ar(i),i.lookahead===0)){if(e===Ji)return Ut;break}if(i.match_length=0,t=Xi(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,t&&(Xt(i,!1),i.strm.avail_out===0))return Ut}return i.insert=0,e===ri?(Xt(i,!0),i.strm.avail_out===0?In:Tr):i.sym_next&&(Xt(i,!1),i.strm.avail_out===0)?Ut:Br};function pi(i,e,t,n,r){this.good_length=i,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=r}const as=[new pi(0,0,0,0,Z2),new pi(4,4,8,4,jo),new pi(4,5,16,8,jo),new pi(4,6,32,32,jo),new pi(4,4,16,16,Vn),new pi(8,16,32,32,Vn),new pi(8,16,128,128,Vn),new pi(8,32,128,256,Vn),new pi(32,128,258,1024,Vn),new pi(32,258,258,4096,Vn)],Nb=i=>{i.window_size=2*i.w_size,Ki(i.head),i.max_lazy_match=as[i.level].max_lazy,i.good_match=as[i.level].good_length,i.nice_match=as[i.level].nice_length,i.max_chain_length=as[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=Ge-1,i.match_available=0,i.ins_h=0};function Bb(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Eo,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(vb*2),this.dyn_dtree=new Uint16Array((2*yb+1)*2),this.bl_tree=new Uint16Array((2*Ab+1)*2),Ki(this.dyn_ltree),Ki(this.dyn_dtree),Ki(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(_b+1),this.heap=new Uint16Array(2*oc+1),Ki(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*oc+1),Ki(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Gs=i=>{if(!i)return 1;const e=i.state;return!e||e.strm!==i||e.status!==yr&&e.status!==fh&&e.status!==lc&&e.status!==cc&&e.status!==hc&&e.status!==fc&&e.status!==pn&&e.status!==ss?1:0},X2=i=>{if(Gs(i))return gn(i,_i);i.total_in=i.total_out=0,i.data_type=pb;const e=i.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?fh:e.wrap?yr:pn,i.adler=e.wrap===2?0:1,e.last_flush=-2,nb(e),Tt},J2=i=>{const e=X2(i);return e===Tt&&Nb(i.state),e},Tb=(i,e)=>Gs(i)||i.state.wrap!==2?_i:(i.state.gzhead=e,Tt),eg=(i,e,t,n,r,s)=>{if(!i)return _i;let a=1;if(e===cb&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),r<1||r>gb||t!==Eo||n<8||n>15||e<0||e>9||s<0||s>db||n===8&&a!==1)return gn(i,_i);n===8&&(n=9);const o=new Bb;return i.state=o,o.strm=i,o.status=yr,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+Ge-1)/Ge),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=e,o.strategy=s,o.method=t,J2(i)},Mb=(i,e)=>eg(i,e,Eo,mb,wb,ub),Rb=(i,e)=>{if(Gs(i)||e>Bf||e<0)return i?gn(i,_i):_i;const t=i.state;if(!i.output||i.avail_in!==0&&!i.input||t.status===ss&&e!==ri)return gn(i,i.avail_out===0?$o:_i);const n=t.last_flush;if(t.last_flush=e,t.pending!==0){if(Zt(i),i.avail_out===0)return t.last_flush=-1,Tt}else if(i.avail_in===0&&Mf(e)<=Mf(n)&&e!==ri)return gn(i,$o);if(t.status===ss&&i.avail_in!==0)return gn(i,$o);if(t.status===yr&&t.wrap===0&&(t.status=pn),t.status===yr){let r=Eo+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=ia||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,r|=s<<6,t.strstart!==0&&(r|=Cb),r+=31-r%31,qr(t,r),t.strstart!==0&&(qr(t,i.adler>>>16),qr(t,i.adler&65535)),i.adler=1,t.status=pn,Zt(i),t.pending!==0)return t.last_flush=-1,Tt}if(t.status===fh){if(i.adler=0,Ye(t,31),Ye(t,139),Ye(t,8),t.gzhead)Ye(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Ye(t,t.gzhead.time&255),Ye(t,t.gzhead.time>>8&255),Ye(t,t.gzhead.time>>16&255),Ye(t,t.gzhead.time>>24&255),Ye(t,t.level===9?2:t.strategy>=ia||t.level<2?4:0),Ye(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Ye(t,t.gzhead.extra.length&255),Ye(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(i.adler=It(i.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=lc;else if(Ye(t,0),Ye(t,0),Ye(t,0),Ye(t,0),Ye(t,0),Ye(t,t.level===9?2:t.strategy>=ia||t.level<2?4:0),Ye(t,xb),t.status=pn,Zt(i),t.pending!==0)return t.last_flush=-1,Tt}if(t.status===lc){if(t.gzhead.extra){let r=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>r&&(i.adler=It(i.adler,t.pending_buf,t.pending-r,r)),t.gzindex+=o,Zt(i),t.pending!==0)return t.last_flush=-1,Tt;r=0,s-=o}let a=new Uint8Array(t.gzhead.extra);t.pending_buf.set(a.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>r&&(i.adler=It(i.adler,t.pending_buf,t.pending-r,r)),t.gzindex=0}t.status=cc}if(t.status===cc){if(t.gzhead.name){let r=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>r&&(i.adler=It(i.adler,t.pending_buf,t.pending-r,r)),Zt(i),t.pending!==0)return t.last_flush=-1,Tt;r=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,Ye(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>r&&(i.adler=It(i.adler,t.pending_buf,t.pending-r,r)),t.gzindex=0}t.status=hc}if(t.status===hc){if(t.gzhead.comment){let r=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>r&&(i.adler=It(i.adler,t.pending_buf,t.pending-r,r)),Zt(i),t.pending!==0)return t.last_flush=-1,Tt;r=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,Ye(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>r&&(i.adler=It(i.adler,t.pending_buf,t.pending-r,r))}t.status=fc}if(t.status===fc){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Zt(i),t.pending!==0))return t.last_flush=-1,Tt;Ye(t,i.adler&255),Ye(t,i.adler>>8&255),i.adler=0}if(t.status=pn,Zt(i),t.pending!==0)return t.last_flush=-1,Tt}if(i.avail_in!==0||t.lookahead!==0||e!==Ji&&t.status!==ss){let r=t.level===0?Z2(t,e):t.strategy===ia?Sb(t,e):t.strategy===fb?Eb(t,e):as[t.level].func(t,e);if((r===In||r===Tr)&&(t.status=ss),r===Ut||r===In)return i.avail_out===0&&(t.last_flush=-1),Tt;if(r===Br&&(e===ab?sb(t):e!==Bf&&(ac(t,0,0,!1),e===ob&&(Ki(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Zt(i),i.avail_out===0))return t.last_flush=-1,Tt}return e!==ri?Tt:t.wrap<=0?Tf:(t.wrap===2?(Ye(t,i.adler&255),Ye(t,i.adler>>8&255),Ye(t,i.adler>>16&255),Ye(t,i.adler>>24&255),Ye(t,i.total_in&255),Ye(t,i.total_in>>8&255),Ye(t,i.total_in>>16&255),Ye(t,i.total_in>>24&255)):(qr(t,i.adler>>>16),qr(t,i.adler&65535)),Zt(i),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?Tt:Tf)},Db=i=>{if(Gs(i))return _i;const e=i.state.status;return i.state=null,e===pn?gn(i,lb):Tt},Lb=(i,e)=>{let t=e.length;if(Gs(i))return _i;const n=i.state,r=n.wrap;if(r===2||r===1&&n.status!==yr||n.lookahead)return _i;if(r===1&&(i.adler=Cs(i.adler,e,t,0)),n.wrap=0,t>=n.w_size){r===0&&(Ki(n.head),n.strstart=0,n.block_start=0,n.insert=0);let l=new Uint8Array(n.w_size);l.set(e.subarray(t-n.w_size,t),0),e=l,t=n.w_size}const s=i.avail_in,a=i.next_in,o=i.input;for(i.avail_in=t,i.next_in=0,i.input=e,Ar(n);n.lookahead>=Ge;){let l=n.strstart,c=n.lookahead-(Ge-1);do n.ins_h=en(n,n.ins_h,n.window[l+Ge-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--c);n.strstart=l,n.lookahead=Ge-1,Ar(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Ge-1,n.match_available=0,i.next_in=a,i.input=o,i.avail_in=s,n.wrap=r,Tt};var zb=Mb,Hb=eg,Pb=J2,Ob=X2,Ub=Tb,qb=Rb,Vb=Db,Qb=Lb,Gb="pako deflate (from Nodeca project)",hs={deflateInit:zb,deflateInit2:Hb,deflateReset:Pb,deflateResetKeep:Ob,deflateSetHeader:Ub,deflate:qb,deflateEnd:Vb,deflateSetDictionary:Qb,deflateInfo:Gb};const $b=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var jb=function(i){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)$b(t,n)&&(i[n]=t[n])}}return i},Wb=i=>{let e=0;for(let n=0,r=i.length;n<r;n++)e+=i[n].length;const t=new Uint8Array(e);for(let n=0,r=0,s=i.length;n<s;n++){let a=i[n];t.set(a,r),r+=a.length}return t},So={assign:jb,flattenChunks:Wb};let tg=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{tg=!1}const xs=new Uint8Array(256);for(let i=0;i<256;i++)xs[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;xs[254]=xs[254]=1;var Kb=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let e,t,n,r,s,a=i.length,o=0;for(r=0;r<a;r++)t=i.charCodeAt(r),(t&64512)===55296&&r+1<a&&(n=i.charCodeAt(r+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),r++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(o),s=0,r=0;s<o;r++)t=i.charCodeAt(r),(t&64512)===55296&&r+1<a&&(n=i.charCodeAt(r+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),r++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e};const Yb=(i,e)=>{if(e<65534&&i.subarray&&tg)return String.fromCharCode.apply(null,i.length===e?i:i.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(i[n]);return t};var Zb=(i,e)=>{const t=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));let n,r;const s=new Array(t*2);for(r=0,n=0;n<t;){let a=i[n++];if(a<128){s[r++]=a;continue}let o=xs[a];if(o>4){s[r++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<t;)a=a<<6|i[n++]&63,o--;if(o>1){s[r++]=65533;continue}a<65536?s[r++]=a:(a-=65536,s[r++]=55296|a>>10&1023,s[r++]=56320|a&1023)}return Yb(s,r)},Xb=(i,e)=>{e=e||i.length,e>i.length&&(e=i.length);let t=e-1;for(;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+xs[i[t]]>e?t:e},ks={string2buf:Kb,buf2string:Zb,utf8border:Xb};function Jb(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ig=Jb;const ng=Object.prototype.toString,{Z_NO_FLUSH:eF,Z_SYNC_FLUSH:tF,Z_FULL_FLUSH:iF,Z_FINISH:nF,Z_OK:Xa,Z_STREAM_END:rF,Z_DEFAULT_COMPRESSION:sF,Z_DEFAULT_STRATEGY:aF,Z_DEFLATED:oF}=Nr;function $s(i){this.options=So.assign({level:sF,method:oF,chunkSize:16384,windowBits:15,memLevel:8,strategy:aF},i||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ig,this.strm.avail_out=0;let t=hs.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Xa)throw new Error(kn[t]);if(e.header&&hs.deflateSetHeader(this.strm,e.header),e.dictionary){let n;if(typeof e.dictionary=="string"?n=ks.string2buf(e.dictionary):ng.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,t=hs.deflateSetDictionary(this.strm,n),t!==Xa)throw new Error(kn[t]);this._dict_set=!0}}$s.prototype.push=function(i,e){const t=this.strm,n=this.options.chunkSize;let r,s;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?nF:eF,typeof i=="string"?t.input=ks.string2buf(i):ng.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(s===tF||s===iF)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(r=hs.deflate(t,s),r===rF)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),r=hs.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Xa;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};$s.prototype.onData=function(i){this.chunks.push(i)};$s.prototype.onEnd=function(i){i===Xa&&(this.result=So.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function dh(i,e){const t=new $s(e);if(t.push(i,!0),t.err)throw t.msg||kn[t.err];return t.result}function lF(i,e){return e=e||{},e.raw=!0,dh(i,e)}function cF(i,e){return e=e||{},e.gzip=!0,dh(i,e)}var hF=$s,fF=dh,dF=lF,uF=cF,pF=Nr,gF={Deflate:hF,deflate:fF,deflateRaw:dF,gzip:uF,constants:pF};const na=16209,mF=16191;var wF=function(e,t){let n,r,s,a,o,l,c,h,f,d,u,p,m,F,g,w,b,y,v,T,A,C,k,I;const B=e.state;n=e.next_in,k=e.input,r=n+(e.avail_in-5),s=e.next_out,I=e.output,a=s-(t-e.avail_out),o=s+(e.avail_out-257),l=B.dmax,c=B.wsize,h=B.whave,f=B.wnext,d=B.window,u=B.hold,p=B.bits,m=B.lencode,F=B.distcode,g=(1<<B.lenbits)-1,w=(1<<B.distbits)-1;e:do{p<15&&(u+=k[n++]<<p,p+=8,u+=k[n++]<<p,p+=8),b=m[u&g];t:for(;;){if(y=b>>>24,u>>>=y,p-=y,y=b>>>16&255,y===0)I[s++]=b&65535;else if(y&16){v=b&65535,y&=15,y&&(p<y&&(u+=k[n++]<<p,p+=8),v+=u&(1<<y)-1,u>>>=y,p-=y),p<15&&(u+=k[n++]<<p,p+=8,u+=k[n++]<<p,p+=8),b=F[u&w];i:for(;;){if(y=b>>>24,u>>>=y,p-=y,y=b>>>16&255,y&16){if(T=b&65535,y&=15,p<y&&(u+=k[n++]<<p,p+=8,p<y&&(u+=k[n++]<<p,p+=8)),T+=u&(1<<y)-1,T>l){e.msg="invalid distance too far back",B.mode=na;break e}if(u>>>=y,p-=y,y=s-a,T>y){if(y=T-y,y>h&&B.sane){e.msg="invalid distance too far back",B.mode=na;break e}if(A=0,C=d,f===0){if(A+=c-y,y<v){v-=y;do I[s++]=d[A++];while(--y);A=s-T,C=I}}else if(f<y){if(A+=c+f-y,y-=f,y<v){v-=y;do I[s++]=d[A++];while(--y);if(A=0,f<v){y=f,v-=y;do I[s++]=d[A++];while(--y);A=s-T,C=I}}}else if(A+=f-y,y<v){v-=y;do I[s++]=d[A++];while(--y);A=s-T,C=I}for(;v>2;)I[s++]=C[A++],I[s++]=C[A++],I[s++]=C[A++],v-=3;v&&(I[s++]=C[A++],v>1&&(I[s++]=C[A++]))}else{A=s-T;do I[s++]=I[A++],I[s++]=I[A++],I[s++]=I[A++],v-=3;while(v>2);v&&(I[s++]=I[A++],v>1&&(I[s++]=I[A++]))}}else if(y&64){e.msg="invalid distance code",B.mode=na;break e}else{b=F[(b&65535)+(u&(1<<y)-1)];continue i}break}}else if(y&64)if(y&32){B.mode=mF;break e}else{e.msg="invalid literal/length code",B.mode=na;break e}else{b=m[(b&65535)+(u&(1<<y)-1)];continue t}break}}while(n<r&&s<o);v=p>>3,n-=v,p-=v<<3,u&=(1<<p)-1,e.next_in=n,e.next_out=s,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=s<o?257+(o-s):257-(s-o),B.hold=u,B.bits=p};const Qn=15,Rf=852,Df=592,Lf=0,Wo=1,zf=2,bF=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),FF=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),yF=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),AF=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),vF=(i,e,t,n,r,s,a,o)=>{const l=o.bits;let c=0,h=0,f=0,d=0,u=0,p=0,m=0,F=0,g=0,w=0,b,y,v,T,A,C=null,k;const I=new Uint16Array(Qn+1),B=new Uint16Array(Qn+1);let M=null,N,x,D;for(c=0;c<=Qn;c++)I[c]=0;for(h=0;h<n;h++)I[e[t+h]]++;for(u=l,d=Qn;d>=1&&I[d]===0;d--);if(u>d&&(u=d),d===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<d&&I[f]===0;f++);for(u<f&&(u=f),F=1,c=1;c<=Qn;c++)if(F<<=1,F-=I[c],F<0)return-1;if(F>0&&(i===Lf||d!==1))return-1;for(B[1]=0,c=1;c<Qn;c++)B[c+1]=B[c]+I[c];for(h=0;h<n;h++)e[t+h]!==0&&(a[B[e[t+h]]++]=h);if(i===Lf?(C=M=a,k=20):i===Wo?(C=bF,M=FF,k=257):(C=yF,M=AF,k=0),w=0,h=0,c=f,A=s,p=u,m=0,v=-1,g=1<<u,T=g-1,i===Wo&&g>Rf||i===zf&&g>Df)return 1;for(;;){N=c-m,a[h]+1<k?(x=0,D=a[h]):a[h]>=k?(x=M[a[h]-k],D=C[a[h]-k]):(x=96,D=0),b=1<<c-m,y=1<<p,f=y;do y-=b,r[A+(w>>m)+y]=N<<24|x<<16|D|0;while(y!==0);for(b=1<<c-1;w&b;)b>>=1;if(b!==0?(w&=b-1,w+=b):w=0,h++,--I[c]===0){if(c===d)break;c=e[t+a[h]]}if(c>u&&(w&T)!==v){for(m===0&&(m=u),A+=f,p=c-m,F=1<<p;p+m<d&&(F-=I[p+m],!(F<=0));)p++,F<<=1;if(g+=1<<p,i===Wo&&g>Rf||i===zf&&g>Df)return 1;v=w&T,r[v]=u<<24|p<<16|A-s|0}}return w!==0&&(r[A+w]=c-m<<24|64<<16|0),o.bits=u,0};var fs=vF;const _F=0,rg=1,sg=2,{Z_FINISH:Hf,Z_BLOCK:CF,Z_TREES:ra,Z_OK:En,Z_STREAM_END:xF,Z_NEED_DICT:kF,Z_STREAM_ERROR:si,Z_DATA_ERROR:ag,Z_MEM_ERROR:og,Z_BUF_ERROR:IF,Z_DEFLATED:Pf}=Nr,No=16180,Of=16181,Uf=16182,qf=16183,Vf=16184,Qf=16185,Gf=16186,$f=16187,jf=16188,Wf=16189,Ja=16190,Si=16191,Ko=16192,Kf=16193,Yo=16194,Yf=16195,Zf=16196,Xf=16197,Jf=16198,sa=16199,aa=16200,ed=16201,td=16202,id=16203,nd=16204,rd=16205,Zo=16206,sd=16207,ad=16208,ft=16209,lg=16210,cg=16211,EF=852,SF=592,NF=15,BF=NF,od=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function TF(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Hn=i=>{if(!i)return 1;const e=i.state;return!e||e.strm!==i||e.mode<No||e.mode>cg?1:0},hg=i=>{if(Hn(i))return si;const e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=No,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(EF),e.distcode=e.distdyn=new Int32Array(SF),e.sane=1,e.back=-1,En},fg=i=>{if(Hn(i))return si;const e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,hg(i)},dg=(i,e)=>{let t;if(Hn(i))return si;const n=i.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?si:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,fg(i))},ug=(i,e)=>{if(!i)return si;const t=new TF;i.state=t,t.strm=i,t.window=null,t.mode=No;const n=dg(i,e);return n!==En&&(i.state=null),n},MF=i=>ug(i,BF);let ld=!0,Xo,Jo;const RF=i=>{if(ld){Xo=new Int32Array(512),Jo=new Int32Array(32);let e=0;for(;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(fs(rg,i.lens,0,288,Xo,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;fs(sg,i.lens,0,32,Jo,0,i.work,{bits:5}),ld=!1}i.lencode=Xo,i.lenbits=9,i.distcode=Jo,i.distbits=5},pg=(i,e,t,n)=>{let r;const s=i.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>n&&(r=n),s.window.set(e.subarray(t-n,t-n+r),s.wnext),n-=r,n?(s.window.set(e.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},DF=(i,e)=>{let t,n,r,s,a,o,l,c,h,f,d,u,p,m,F=0,g,w,b,y,v,T,A,C;const k=new Uint8Array(4);let I,B;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Hn(i)||!i.output||!i.input&&i.avail_in!==0)return si;t=i.state,t.mode===Si&&(t.mode=Ko),a=i.next_out,r=i.output,l=i.avail_out,s=i.next_in,n=i.input,o=i.avail_in,c=t.hold,h=t.bits,f=o,d=l,C=En;e:for(;;)switch(t.mode){case No:if(t.wrap===0){t.mode=Ko;break}for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(t.wrap&2&&c===35615){t.wbits===0&&(t.wbits=15),t.check=0,k[0]=c&255,k[1]=c>>>8&255,t.check=It(t.check,k,2,0),c=0,h=0,t.mode=Of;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){i.msg="incorrect header check",t.mode=ft;break}if((c&15)!==Pf){i.msg="unknown compression method",t.mode=ft;break}if(c>>>=4,h-=4,A=(c&15)+8,t.wbits===0&&(t.wbits=A),A>15||A>t.wbits){i.msg="invalid window size",t.mode=ft;break}t.dmax=1<<t.wbits,t.flags=0,i.adler=t.check=1,t.mode=c&512?Wf:Si,c=0,h=0;break;case Of:for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(t.flags=c,(t.flags&255)!==Pf){i.msg="unknown compression method",t.mode=ft;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=ft;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&t.wrap&4&&(k[0]=c&255,k[1]=c>>>8&255,t.check=It(t.check,k,2,0)),c=0,h=0,t.mode=Uf;case Uf:for(;h<32;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.head&&(t.head.time=c),t.flags&512&&t.wrap&4&&(k[0]=c&255,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,t.check=It(t.check,k,4,0)),c=0,h=0,t.mode=qf;case qf:for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&t.wrap&4&&(k[0]=c&255,k[1]=c>>>8&255,t.check=It(t.check,k,2,0)),c=0,h=0,t.mode=Vf;case Vf:if(t.flags&1024){for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&t.wrap&4&&(k[0]=c&255,k[1]=c>>>8&255,t.check=It(t.check,k,2,0)),c=0,h=0}else t.head&&(t.head.extra=null);t.mode=Qf;case Qf:if(t.flags&1024&&(u=t.length,u>o&&(u=o),u&&(t.head&&(A=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+u),A)),t.flags&512&&t.wrap&4&&(t.check=It(t.check,n,u,s)),o-=u,s+=u,t.length-=u),t.length))break e;t.length=0,t.mode=Gf;case Gf:if(t.flags&2048){if(o===0)break e;u=0;do A=n[s+u++],t.head&&A&&t.length<65536&&(t.head.name+=String.fromCharCode(A));while(A&&u<o);if(t.flags&512&&t.wrap&4&&(t.check=It(t.check,n,u,s)),o-=u,s+=u,A)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=$f;case $f:if(t.flags&4096){if(o===0)break e;u=0;do A=n[s+u++],t.head&&A&&t.length<65536&&(t.head.comment+=String.fromCharCode(A));while(A&&u<o);if(t.flags&512&&t.wrap&4&&(t.check=It(t.check,n,u,s)),o-=u,s+=u,A)break e}else t.head&&(t.head.comment=null);t.mode=jf;case jf:if(t.flags&512){for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(t.wrap&4&&c!==(t.check&65535)){i.msg="header crc mismatch",t.mode=ft;break}c=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=Si;break;case Wf:for(;h<32;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}i.adler=t.check=od(c),c=0,h=0,t.mode=Ja;case Ja:if(t.havedict===0)return i.next_out=a,i.avail_out=l,i.next_in=s,i.avail_in=o,t.hold=c,t.bits=h,kF;i.adler=t.check=1,t.mode=Si;case Si:if(e===CF||e===ra)break e;case Ko:if(t.last){c>>>=h&7,h-=h&7,t.mode=Zo;break}for(;h<3;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}switch(t.last=c&1,c>>>=1,h-=1,c&3){case 0:t.mode=Kf;break;case 1:if(RF(t),t.mode=sa,e===ra){c>>>=2,h-=2;break e}break;case 2:t.mode=Zf;break;case 3:i.msg="invalid block type",t.mode=ft}c>>>=2,h-=2;break;case Kf:for(c>>>=h&7,h-=h&7;h<32;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){i.msg="invalid stored block lengths",t.mode=ft;break}if(t.length=c&65535,c=0,h=0,t.mode=Yo,e===ra)break e;case Yo:t.mode=Yf;case Yf:if(u=t.length,u){if(u>o&&(u=o),u>l&&(u=l),u===0)break e;r.set(n.subarray(s,s+u),a),o-=u,s+=u,l-=u,a+=u,t.length-=u;break}t.mode=Si;break;case Zf:for(;h<14;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(t.nlen=(c&31)+257,c>>>=5,h-=5,t.ndist=(c&31)+1,c>>>=5,h-=5,t.ncode=(c&15)+4,c>>>=4,h-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=ft;break}t.have=0,t.mode=Xf;case Xf:for(;t.have<t.ncode;){for(;h<3;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.lens[M[t.have++]]=c&7,c>>>=3,h-=3}for(;t.have<19;)t.lens[M[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,I={bits:t.lenbits},C=fs(_F,t.lens,0,19,t.lencode,0,t.work,I),t.lenbits=I.bits,C){i.msg="invalid code lengths set",t.mode=ft;break}t.have=0,t.mode=Jf;case Jf:for(;t.have<t.nlen+t.ndist;){for(;F=t.lencode[c&(1<<t.lenbits)-1],g=F>>>24,w=F>>>16&255,b=F&65535,!(g<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(b<16)c>>>=g,h-=g,t.lens[t.have++]=b;else{if(b===16){for(B=g+2;h<B;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(c>>>=g,h-=g,t.have===0){i.msg="invalid bit length repeat",t.mode=ft;break}A=t.lens[t.have-1],u=3+(c&3),c>>>=2,h-=2}else if(b===17){for(B=g+3;h<B;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}c>>>=g,h-=g,A=0,u=3+(c&7),c>>>=3,h-=3}else{for(B=g+7;h<B;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}c>>>=g,h-=g,A=0,u=11+(c&127),c>>>=7,h-=7}if(t.have+u>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=ft;break}for(;u--;)t.lens[t.have++]=A}}if(t.mode===ft)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=ft;break}if(t.lenbits=9,I={bits:t.lenbits},C=fs(rg,t.lens,0,t.nlen,t.lencode,0,t.work,I),t.lenbits=I.bits,C){i.msg="invalid literal/lengths set",t.mode=ft;break}if(t.distbits=6,t.distcode=t.distdyn,I={bits:t.distbits},C=fs(sg,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,I),t.distbits=I.bits,C){i.msg="invalid distances set",t.mode=ft;break}if(t.mode=sa,e===ra)break e;case sa:t.mode=aa;case aa:if(o>=6&&l>=258){i.next_out=a,i.avail_out=l,i.next_in=s,i.avail_in=o,t.hold=c,t.bits=h,wF(i,d),a=i.next_out,r=i.output,l=i.avail_out,s=i.next_in,n=i.input,o=i.avail_in,c=t.hold,h=t.bits,t.mode===Si&&(t.back=-1);break}for(t.back=0;F=t.lencode[c&(1<<t.lenbits)-1],g=F>>>24,w=F>>>16&255,b=F&65535,!(g<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(w&&!(w&240)){for(y=g,v=w,T=b;F=t.lencode[T+((c&(1<<y+v)-1)>>y)],g=F>>>24,w=F>>>16&255,b=F&65535,!(y+g<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}c>>>=y,h-=y,t.back+=y}if(c>>>=g,h-=g,t.back+=g,t.length=b,w===0){t.mode=rd;break}if(w&32){t.back=-1,t.mode=Si;break}if(w&64){i.msg="invalid literal/length code",t.mode=ft;break}t.extra=w&15,t.mode=ed;case ed:if(t.extra){for(B=t.extra;h<B;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=td;case td:for(;F=t.distcode[c&(1<<t.distbits)-1],g=F>>>24,w=F>>>16&255,b=F&65535,!(g<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(!(w&240)){for(y=g,v=w,T=b;F=t.distcode[T+((c&(1<<y+v)-1)>>y)],g=F>>>24,w=F>>>16&255,b=F&65535,!(y+g<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}c>>>=y,h-=y,t.back+=y}if(c>>>=g,h-=g,t.back+=g,w&64){i.msg="invalid distance code",t.mode=ft;break}t.offset=b,t.extra=w&15,t.mode=id;case id:if(t.extra){for(B=t.extra;h<B;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=ft;break}t.mode=nd;case nd:if(l===0)break e;if(u=d-l,t.offset>u){if(u=t.offset-u,u>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=ft;break}u>t.wnext?(u-=t.wnext,p=t.wsize-u):p=t.wnext-u,u>t.length&&(u=t.length),m=t.window}else m=r,p=a-t.offset,u=t.length;u>l&&(u=l),l-=u,t.length-=u;do r[a++]=m[p++];while(--u);t.length===0&&(t.mode=aa);break;case rd:if(l===0)break e;r[a++]=t.length,l--,t.mode=aa;break;case Zo:if(t.wrap){for(;h<32;){if(o===0)break e;o--,c|=n[s++]<<h,h+=8}if(d-=l,i.total_out+=d,t.total+=d,t.wrap&4&&d&&(i.adler=t.check=t.flags?It(t.check,r,d,a-d):Cs(t.check,r,d,a-d)),d=l,t.wrap&4&&(t.flags?c:od(c))!==t.check){i.msg="incorrect data check",t.mode=ft;break}c=0,h=0}t.mode=sd;case sd:if(t.wrap&&t.flags){for(;h<32;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(t.wrap&4&&c!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=ft;break}c=0,h=0}t.mode=ad;case ad:C=xF;break e;case ft:C=ag;break e;case lg:return og;case cg:default:return si}return i.next_out=a,i.avail_out=l,i.next_in=s,i.avail_in=o,t.hold=c,t.bits=h,(t.wsize||d!==i.avail_out&&t.mode<ft&&(t.mode<Zo||e!==Hf))&&pg(i,i.output,i.next_out,d-i.avail_out),f-=i.avail_in,d-=i.avail_out,i.total_in+=f,i.total_out+=d,t.total+=d,t.wrap&4&&d&&(i.adler=t.check=t.flags?It(t.check,r,d,i.next_out-d):Cs(t.check,r,d,i.next_out-d)),i.data_type=t.bits+(t.last?64:0)+(t.mode===Si?128:0)+(t.mode===sa||t.mode===Yo?256:0),(f===0&&d===0||e===Hf)&&C===En&&(C=IF),C},LF=i=>{if(Hn(i))return si;let e=i.state;return e.window&&(e.window=null),i.state=null,En},zF=(i,e)=>{if(Hn(i))return si;const t=i.state;return t.wrap&2?(t.head=e,e.done=!1,En):si},HF=(i,e)=>{const t=e.length;let n,r,s;return Hn(i)||(n=i.state,n.wrap!==0&&n.mode!==Ja)?si:n.mode===Ja&&(r=1,r=Cs(r,e,t,0),r!==n.check)?ag:(s=pg(i,e,t,t),s?(n.mode=lg,og):(n.havedict=1,En))};var PF=fg,OF=dg,UF=hg,qF=MF,VF=ug,QF=DF,GF=LF,$F=zF,jF=HF,WF="pako inflate (from Nodeca project)",Ri={inflateReset:PF,inflateReset2:OF,inflateResetKeep:UF,inflateInit:qF,inflateInit2:VF,inflate:QF,inflateEnd:GF,inflateGetHeader:$F,inflateSetDictionary:jF,inflateInfo:WF};function KF(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var YF=KF;const gg=Object.prototype.toString,{Z_NO_FLUSH:ZF,Z_FINISH:XF,Z_OK:Is,Z_STREAM_END:el,Z_NEED_DICT:tl,Z_STREAM_ERROR:JF,Z_DATA_ERROR:cd,Z_MEM_ERROR:e4}=Nr;function js(i){this.options=So.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ig,this.strm.avail_out=0;let t=Ri.inflateInit2(this.strm,e.windowBits);if(t!==Is)throw new Error(kn[t]);if(this.header=new YF,Ri.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=ks.string2buf(e.dictionary):gg.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Ri.inflateSetDictionary(this.strm,e.dictionary),t!==Is)))throw new Error(kn[t])}js.prototype.push=function(i,e){const t=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?XF:ZF,gg.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=Ri.inflate(t,a),s===tl&&r&&(s=Ri.inflateSetDictionary(t,r),s===Is?s=Ri.inflate(t,a):s===cd&&(s=tl));t.avail_in>0&&s===el&&t.state.wrap>0&&i[t.next_in]!==0;)Ri.inflateReset(t),s=Ri.inflate(t,a);switch(s){case JF:case cd:case tl:case e4:return this.onEnd(s),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||s===el))if(this.options.to==="string"){let l=ks.utf8border(t.output,t.next_out),c=t.next_out-l,h=ks.buf2string(t.output,l);t.next_out=c,t.avail_out=n-c,c&&t.output.set(t.output.subarray(l,l+c),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Is&&o===0)){if(s===el)return s=Ri.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};js.prototype.onData=function(i){this.chunks.push(i)};js.prototype.onEnd=function(i){i===Is&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=So.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function uh(i,e){const t=new js(e);if(t.push(i),t.err)throw t.msg||kn[t.err];return t.result}function t4(i,e){return e=e||{},e.raw=!0,uh(i,e)}var i4=js,n4=uh,r4=t4,s4=uh,a4=Nr,o4={Inflate:i4,inflate:n4,inflateRaw:r4,ungzip:s4,constants:a4};const{Deflate:Ek,deflate:Sk,deflateRaw:l4,gzip:Nk}=gF,{Inflate:Bk,inflate:c4,inflateRaw:h4,ungzip:f4}=o4;var d4=l4,Es=c4,ph=h4,mg=f4;const wg=4;function eo(i){const e=ArrayBuffer.isView(i)?i:new Uint8Array(i);return e[0]===31&&e[1]===139}function Ss(i){const e=ArrayBuffer.isView(i)?i:new Uint8Array(i);return(e[3]&wg)!==0&&e[12]===66&&e[13]===67?ki(e.buffer):mg(e)}function ki(i,e){const t=[];let n=0,r=0;for(e=e||i.byteLength-18;n<e;)try{const a=ArrayBuffer.isView(i)?i:new Uint8Array(i,n,18),o=a[11]<<8|a[10],c=a[3]&wg,h=a[12],f=a[13],d=a[15]<<8|a[14],u=(a[17]<<8|a[16])+1,p=12+o+n,m=i.byteLength-p,F=u-o-19;if(m<F||F<=0)break;const g=new Uint8Array(i,p,F),w=ph(g);n+=F-1+26,r+=w.byteLength,t.push(w)}catch(a){console.error(a);break}if(t.length===1)return t[0];{const a=new Uint8Array(r);let o=0;for(let l=0;l<t.length;++l){var s=new Uint8Array(t[l]);g4(s,0,a,o,s.length),o+=s.length}return a}}function gh(i){const e=ArrayBuffer.isView(i)?i:new Uint8Array(i);return(e[17]<<8|e[16])+1}const u4=new Uint8Array(1),p4=typeof u4.subarray=="function";function g4(i,e,t,n,r){if(r!==0){if(i){if(!t)throw"Undef dest"}else throw"Undef src";r===i.length?il(i,t,n):p4?il(i.subarray(e,e+r),t,n):i.BYTES_PER_ELEMENT===1&&r>100?il(new Uint8Array(i.buffer,i.byteOffset+e,r),t,n):m4(i,e,t,n,r)}}function m4(i,e,t,n,r){for(let s=0;s<r;++s)t[n+s]=i[e+s]}function il(i,e,t){e.set(i,t)}function w4(i){const e=new Uint8Array(i.length);for(var t=0;t<i.length;t++)e[t]=i.charCodeAt(t);const n=new d4(e),r=String.fromCharCode.apply(null,n);return btoa(r).replace(/\+/g,".").replace(/\//g,"_").replace(/=/g,"-")}function b4(i){i=i.replace(/\./g,"+").replace(/_/g,"/").replace(/-/g,"=");const e=atob(i),t=[];for(let s=0;s<e.length;s++)t.push(e.charCodeAt(s));const n=ph(t);let r="";for(let s of n)r+=String.fromCharCode(s);return r}function nn(i,e){const t=i.split(","),n=t[0].split(":")[1];let r=t[1];if(n.indexOf("base64")>=0){r=atob(r);const s=new Uint8Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);let a;return n.indexOf("gzip")>0?a=mg(s):a=s,a}else return decodeURIComponent(r)}const Ze={lerp:(i,e,t)=>(1-t)*i+t*e,mean:function(i){var e=0,t=0,n;for(n=0;n<i.length;n++)isNaN(i[n])||(e+=i[n],t++);return t>0?e/t:0},meanAndStdev:function(i){var e,t=0,n=0,r=0,s;for(s=0;s<i.length;s++)e=i[s],isNaN(e)||(t+=e,n+=e*e,r++);return r>0?{mean:t/r,stdev:Math.sqrt(n-t*t/r)}:{mean:0,stdev:0}},median:function(i){var e=0,t=i.length;return i.sort(),t%2===0?e=(i[t/2-1]+i[t/2])/2:e=i[(t-1)/2],e},percentile:function(i,e){if(i.length!==0){var t=Math.floor(i.length*((100-e)/100));return t===0?(i.sort(function(n,r){return r-n}),i[t]):F4(i,t)}},clamp:function(i,e,t){return Math.min(Math.max(i,e),t)},log2:function(i){return Math.log(i)/Math.LN2}};function F4(i,e){var t=new bg,n;for(n=0;n<i.length;n++){var r=i[n];(t.content.length<e||r>t.content[0])&&(t.content.length===e&&t.pop(),t.push(r))}return t.content[0]}function bg(){this.content=[]}bg.prototype={push:function(i){this.content.push(i),this.bubbleUp(this.content.length-1)},pop:function(){var i=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.sinkDown(0)),i},remove:function(i){for(var e=this.content.length,t=0;t<e;t++)if(this.content[t]===i){var n=this.content.pop();if(t===e-1)break;this.content[t]=n,this.bubbleUp(t),this.sinkDown(t);break}},size:function(){return this.content.length},bubbleUp:function(i){for(var e=this.content[i],t=e;i>0;){var n=Math.floor((i+1)/2)-1,r=this.content[n];if(t>=r)break;this.content[n]=e,this.content[i]=r,i=n}},sinkDown:function(i){for(var e=this.content.length,t=this.content[i],n=t;;){var r=(i+1)*2,s=r-1,a=null;if(s<e){var o=this.content[s],l=o;l<n&&(a=s)}if(r<e){var c=this.content[r],h=c;h<(a==null?n:l)&&(a=r)}if(a==null)break;this.content[i]=this.content[a],this.content[a]=t,i=a}}};function cn(i,e){return Math.random()*(e-i)+i}const qe={rgbListFromHSV:()=>{let i=1,e=[];for(let t=1;t>=.5;t-=.1)for(let n=0;n<1;n+=1/28){const r="rgb("+qe.hsvToRgb(n,i,t).join(",")+")";e.push(r)}return e.pop(),e.push(qe.rgbColor(16,16,16)),e},rgbToHex:function(i){return i=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),i&&i.length===4?"#"+("0"+parseInt(i[1],10).toString(16)).slice(-2)+("0"+parseInt(i[2],10).toString(16)).slice(-2)+("0"+parseInt(i[3],10).toString(16)).slice(-2):""},hexToRgb:function(i){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);if(e!==null)return"rgb("+parseInt(e[1],16)+","+parseInt(e[2],16)+","+parseInt(e[3],16)+")"},hsvToRgb:function(i,e,t){var n,r,s,a=Math.floor(i*6),o=i*6-a,l=t*(1-e),c=t*(1-o*e),h=t*(1-(1-o)*e);switch(a%6){case 0:n=t,r=h,s=l;break;case 1:n=c,r=t,s=l;break;case 2:n=l,r=t,s=h;break;case 3:n=l,r=c,s=t;break;case 4:n=h,r=l,s=t;break;case 5:n=t,r=l,s=c;break}return[Math.floor(n*255),Math.floor(r*255),Math.floor(s*255)]},hslToRgb:function(i,e,t){var n,r,s;if(e===0)n=r=s=t;else{var a=t<.5?t*(1+e):t+e-t*e,o=2*t-a;n=qe.hue2rgb(o,a,i+1/3),r=qe.hue2rgb(o,a,i),s=qe.hue2rgb(o,a,i-1/3)}return[n*255,r*255,s*255]},hue2rgb:(i,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i),rgbaColor:function(i,e,t,n){return i=Ze.clamp(i,0,255),e=Ze.clamp(e,0,255),t=Ze.clamp(t,0,255),n=Ze.clamp(n,0,1),"rgba("+i+","+e+","+t+","+n+")"},rgbColor:function(i,e,t){return i=Ze.clamp(i,0,255),e=Ze.clamp(e,0,255),t=Ze.clamp(t,0,255),"rgb("+i+","+e+","+t+")"},greyScale:function(i){var e=Ze.clamp(i,0,255);return"rgb("+e+","+e+","+e+")"},randomGrey:function(i,e){i=Ze.clamp(i,0,255),e=Ze.clamp(e,0,255);var t=Math.round(cn(i,e)).toString(10);return"rgb("+t+","+t+","+t+")"},randomRGB:function(i,e){i=Ze.clamp(i,0,255),e=Ze.clamp(e,0,255);var t=Math.round(cn(i,e)).toString(10),n=Math.round(cn(i,e)).toString(10),r=Math.round(cn(i,e)).toString(10);return"rgb("+t+","+n+","+r+")"},randomRGBConstantAlpha:function(i,e,t){i=Ze.clamp(i,0,255),e=Ze.clamp(e,0,255);var n=Math.round(cn(i,e)).toString(10),r=Math.round(cn(i,e)).toString(10),s=Math.round(cn(i,e)).toString(10);return"rgba("+n+","+r+","+s+","+t+")"},addAlpha:function(i,e){if(i==="0"||i===".")i="rgb(0,0,0)";else{const n=this.colorNameToHex(i);n&&(i=n)}var t=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(i);if(i.startsWith("rgba")){const n=i.lastIndexOf(",");return i.substring(0,n+1)+e.toString()+")"}return t&&(i=qe.hexToRgb(i)),i.startsWith("rgb")?i.replace("rgb","rgba").replace(")",", "+e+")"):(console.log(i+" is not an rgb style string"),i)},rgbComponents:function(i){if(i==="0"||i===".")return[0,0,0];if(/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(i))i=qe.hexToRgb(i);else if(!i.startsWith("rgb")){const t=this.colorNameToHex(i);i=this.hexToRgb(t)}if(i.startsWith("rgb("))return i.substring(4,i.length-1).split(",").map(t=>Number.parseInt(t.trim()));if(i.startsWith("rgba("))return i.substring(5,i.length-1).split(",").map((t,n)=>(t=t.trim(),n===3?Number.parseFloat(t):Number.parseInt(t)));throw Error("Unrecognized color string: color")},getCompositeColor:function(i,e,t){var n=Math.floor(t*e[0]+(1-t)*i[0]),r=Math.floor(t*e[1]+(1-t)*i[1]),s=Math.floor(t*e[2]+(1-t)*i[2]);return"rgb("+n+","+r+","+s+")"},createColorString:function(i){const e=this.createColorStringSafe(i);return e||i},createColorStringSafe:function(i){if(i=Cw(i),i.startsWith("rgb(")&&i.endsWith(")")||i.startsWith("#")&&i.length<8)return i;const e=this.colorNameToHex(i);if(e)return e;const t=i.split(",");if(t.length===3&&nl(t[0])&&nl(t[1])&&nl(t[2]))return`rgb(${i})`},darkenLighten:function(i,e){let t,n=this.colorNameToHex(i);n?t=qe.hexToRgb(n):t=i.startsWith("rgb(")?i:qe.hexToRgb(i);const r=t.replace(")","").substring(4).split(","),s=Math.max(0,Math.min(255,Number.parseInt(r[0].trim())+e)),a=Math.max(0,Math.min(255,Number.parseInt(r[1].trim())+e)),o=Math.max(0,Math.min(255,Number.parseInt(r[2].trim())+e));return"rgb("+s.toString()+","+a.toString()+","+o.toString()+")"},colorNameToHex:function(i){return{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",darkgrey:"#a9a9a9",darkslategrey:"#2f4f4f",dimgrey:"#696969",grey:"#808080",lightgray:"#d3d3d3",lightslategrey:"#778899",slategrey:"#708090"}[i]}};function nl(i){const e=Number.parseInt(i);return!Number.isNaN(e)&&e>=0&&e<=255}const rl="googleapis";class y4{constructor(){this.oauthTokens={}}setToken(e,t){t=t||rl,this.oauthTokens[t]=e}getToken(e){e=e||rl;let t;for(let n of Object.keys(this.oauthTokens))if(hd(n).test(e)){t=this.oauthTokens[n];break}return t}removeToken(e){e=e||rl;for(let t of Object.keys(this.oauthTokens))hd(t).test(e)&&(this.oauthTokens[t]=void 0)}}function hd(i){return new RegExp("^"+i.split(/\*+/).map(A4).join(".*")+"$")}function A4(i){return i.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function Vr(i){return i.includes("googleapis")&&!i.includes("urlshortener")||mh(i)||to(i)}function mh(i){return i.startsWith("gs://")||i.startsWith("https://www.googleapis.com/storage")||i.startsWith("https://storage.cloud.google.com")||i.startsWith("https://storage.googleapis.com")}function to(i){return i.indexOf("drive.google.com")>=0||i.indexOf("www.googleapis.com/drive")>0}function v4(i){let{bucket:e,object:t}=_4(i);t=C4(t);const n=i.indexOf("?"),r=n>0?i.substring(n)+"&alt=media":"?alt=media";return`https://storage.googleapis.com/storage/v1/b/${e}/o/${t}${r}`}function _4(i){let e,t;if(i.startsWith("gs://")){const n=i.indexOf("/",5);if(n>=0){e=i.substring(5,n);const r=i.indexOf("?");t=r<0?i.substring(n+1):i.substring(n+1,r)}}else if(i.startsWith("https://storage.googleapis.com")||i.startsWith("https://storage.cloud.google.com")){const n=i.indexOf("/v1/b/",8);if(n>0){const r=i.indexOf("/o/",n);if(r>0){const s=i.indexOf("?",r);e=i.substring(n+6,r),t=s>0?i.substring(r+3,s):i.substring(r+3)}}else{const r=i.indexOf("/",8),s=i.indexOf("/",r+1),a=i.indexOf("?",s);s>0&&(e=i.substring(r+1,s),t=a<0?i.substring(s+1):i.substring(s+1,a))}}else if(i.startsWith("https://www.googleapis.com/storage/v1/b")){const n=i.indexOf("/v1/b/",8),r=i.indexOf("/o/",n);if(r>0){const s=i.indexOf("?",r);e=i.substring(n+6,r),t=s>0?i.substring(r+3,s):i.substring(r+3)}}if(e&&t)return{bucket:e,object:t};throw Error(`Unrecognized Google Storage URI: ${i}`)}function C4(i){let e="";return i.split("").forEach(function(t){Ft.has(t)?e+=Ft.get(t):e+=t}),e}const Ft=new Map;Ft.set("!","%21");Ft.set("#","%23");Ft.set("$","%24");Ft.set("%","%25");Ft.set("&","%26");Ft.set("'","%27");Ft.set("(","%28");Ft.set(")","%29");Ft.set("*","%2A");Ft.set("+","%2B");Ft.set(",","%2C");Ft.set("/","%2F");Ft.set(":","%3A");Ft.set(";","%3B");Ft.set("=","%3D");Ft.set("?","%3F");Ft.set("@","%40");Ft.set("[","%5B");Ft.set("]","%5D");Ft.set(" ","%20");async function x4(i){if(!google.accounts.oauth2.initTokenClient)throw new Error("Google accounts token client not loaded (https://accounts.google.com/gsi/client)");if(Pn())throw new Error("Google client is already initialized");const e={client_id:i.client_id||i.clientId,scope:i.scope||"https://www.googleapis.com/auth/userinfo.profile",state:i.state||"igv",error:n=>{throw new Error(n.type)},hint:i.hint,hosted_domain:i.hosted_domain},t=google.accounts.oauth2.initTokenClient(e);google.igv={tokenClient:t,apiKey:i.apiKey}}function Pn(){return window.google&&window.google.igv}function k4(){return Pn()&&google.igv.tokenResponse&&Date.now()<google.igv.tokenExpiresAt?google.igv.tokenResponse.access_token:void 0}async function Fg(i){if(!Pn())throw Error("Google oAuth has not been initialized");if(google.igv.tokenResponse&&Date.now()<google.igv.tokenExpiresAt&&google.accounts.oauth2.hasGrantedAllScopes(google.igv.tokenResponse,i))return google.igv.tokenResponse.access_token;{const e=google.igv.tokenClient;return new Promise((t,n)=>{try{e.callback=r=>{r.error!==void 0&&n(r),google.igv.tokenResponse=r,google.igv.tokenExpiresAt=Date.now()+r.expires_in*1e3,t(r.access_token)},e.requestAccessToken({scope:i})}catch(r){console.log(r)}})}}function I4(i){return to(i)?"https://www.googleapis.com/auth/drive.file":mh(i)?"https://www.googleapis.com/auth/devstorage.read_only":"https://www.googleapis.com/auth/userinfo.profile"}function yg(){return google.igv.apiKey}async function E4(i){let t="https://www.googleapis.com/drive/v3/files/"+vg(i)+"?supportsTeamDrives=true";const n=yg();n&&(t+="&key="+n);let s=await(await fetch(t)).json();if(s.error&&s.error.code===404){const o=await Fg("https://www.googleapis.com/auth/drive.readonly");if(o){if(s=await(await fetch(t,{headers:{Authorization:`Bearer ${o}`}})).json(),s.error)throw Error(s.error)}else throw Error(s.error)}return s}function Ag(i){var e=vg(i);return e?"https://www.googleapis.com/drive/v3/files/"+e+"?alt=media&supportsTeamDrives=true":i}function vg(i){if(i.includes("/open?id=")){const e=i.indexOf("/open?id=")+9,t=i.indexOf("&");if(e>0&&t>e)return i.substring(e,t);if(e>0)return i.substring(e)}else if(i.includes("/file/d/")){const e=i.indexOf("/file/d/")+8,t=i.lastIndexOf("/");return i.substring(e,t)}else if(i.startsWith("https://www.googleapis.com/drive")){let e=i.indexOf("/files/");const t=i.indexOf("?");if(e>0)return e+=7,t>0?i.substring(e,t):i.substring(e)}throw Error("Unknown Google Drive url format: "+i)}class S4{constructor(e){this.requestsPerSecond=e.requestsPerSecond||10,this.lastStartTime=0,this.queued=[]}add(e,t){var n=this;return new Promise(function(r,s){n.queued.push({resolve:r,reject:s,asyncFunction:e}),n.dequeue()})}addAll(e,t){var n=e.map((function(r){return this.add(r,t)}).bind(this));return Promise.all(n)}dequeue(){if(this.queued.length>0){var e=new Date,t=1e3/this.requestsPerSecond+1,n=e-this.lastStartTime;n>=t?this._execute():setTimeout((function(){this.dequeue()}).bind(this),t-n)}}async _execute(){this.lastStartTime=new Date;var e=this.queued.shift();const t=e.asyncFunction;try{const n=await t();e.resolve(n)}catch(n){e.reject(n)}}}class N4{constructor(){this.apiKey=void 0,this.googleThrottle=new S4({requestsPerSecond:8}),this.RANGE_WARNING_GIVEN=!1,this.oauth=new y4}setApiKey(e){this.apiKey=e}async loadArrayBuffer(e,t){return t=t||{},t.responseType||(t.responseType="arraybuffer"),tn(e)?this._loadFileSlice(e,t):this.load(e,t)}async loadByteArray(e,t){const n=await this.loadArrayBuffer(e,t);let r;return eo(n)?r=Ss(n):r=new Uint8Array(n),r}async loadJson(e,t){t=t||{},(t.method||(t.sendData?"POST":"GET"))==="POST"&&(t.contentType="application/json");const r=await this.loadString(e,t);return r&&JSON.parse(r)}async loadString(e,t){return t=t||{},e instanceof File?this._loadStringFromFile(e,t):this._loadStringFromUrl(e,t)}async load(e,t){t=t||{};const n=typeof e;if(e=await(typeof e=="function"?e():e),tn(e))return this._loadFileSlice(e,t);if(typeof e.startsWith=="function")if(e.startsWith("data:")){const r=nn(e).buffer;if(t.range){const s=t.range.size?t.range.start+t.range.size:r.byteLength;return r.slice(t.range.start,s)}else return r}else return e.startsWith("https://drive.google.com")&&(e=Ag(e)),to(e)||e.startsWith("https://www.dropbox.com")?this.googleThrottle.add(async()=>this._loadURL(e,t)):this._loadURL(e,t);else throw Error(`url must be either a 'File', 'string', 'function', or 'Promise'.  Actual type: ${n}`)}async _loadURL(e,t){const n=this,r=e;e=L4(e),t=t||{};let s=t.oauthToken||this.getOauthToken(e);return s&&(s=await(typeof s=="function"?s():s)),new Promise(function(a,o){Vr(e)&&!B4(e)&&(mh(e)&&(e=v4(e)),e=R4(e),to(e)&&D4(e),s||(s=fd()));const l=t.headers||{};s&&M4(l,s);const c=t.range,h=new XMLHttpRequest,f=t.sendData||t.body,d=t.method||(f?"POST":"GET"),u=t.responseType,p=t.contentType,m=t.mimeType;if(h.open(d,e),t.timeout&&(h.timeout=t.timeout),c){let w="";c.size&&(w=c.start+c.size-1),h.setRequestHeader("Range","bytes="+c.start+"-"+w)}p&&h.setRequestHeader("Content-Type",p),m&&h.overrideMimeType(m),u&&(h.responseType=u);for(let w of Object.keys(l)){const b=l[w];h.setRequestHeader(w,b)}t.withCredentials===!0&&(h.withCredentials=!0),h.onload=async function(w){if(h.status===0||h.status>=200&&h.status<=300)if(t.method==="HEAD"){const b=t.requestedHeaders||["content-length"],y={};for(let v of b)y[v]=h.getResponseHeader(v);a(y)}else c&&h.status!==206&&c.start!==0?(h.response.length>1e5&&!n.RANGE_WARNING_GIVEN&&alert(`Warning: Range header ignored for URL: ${e}.  This can have severe performance impacts.`),a(h.response.slice(c.start,c.start+c.size))):a(h.response);else h.status===416?F(Error("416 Unsatisfiable Range")):Pn()&&(h.status===404||h.status===401||h.status===403)&&Vr(e)&&!t.retries?g():h.status===403?F("Access forbidden: "+e):F(h.status)},h.onerror=function(w){Vr(e)&&!t.retries?g():F("Error accessing resource: "+e+" Status: "+h.status)},h.ontimeout=function(w){F("Timed out")},h.onabort=function(w){console.log("Aborted"),o(w)};try{h.send(f)}catch(w){Vr(e)&&!t.retries?g():F(w)}function F(w){if(o)o(w);else throw w}async function g(){try{const w=await T4(r);t.retries=1,t.oauthToken=w;const b=await n.load(r,t);a(b)}catch(w){if(w.error){const b=w.error.startsWith("popup_blocked")?"Google login popup blocked by browser.":w.error;alert(b)}else F(w)}}})}async _loadFileSlice(e,t){const r=await(t&&t.range?e.slice(t.range.start,t.range.start+t.range.size):e).arrayBuffer();return t.responseType==="arraybuffer"?r:sl(r)}async _loadStringFromFile(e,t){const r=await(t.range?e.slice(t.range.start,t.range.start+t.range.size):e).arrayBuffer();return sl(r)}async _loadStringFromUrl(e,t){t=t||{},t.responseType="arraybuffer";const n=await this.load(e,t);return sl(n)}setOauthToken(e,t){this.oauth.setToken(e,t)}getOauthToken(e){const t=Vr(e)?void 0:R2(e).host;let n=this.oauth.getToken(t);if(n)return n;if(t===void 0){const r=fd();if(r&&r.expires_at>Date.now())return r.access_token}}async getContentLength(e,t){t=t||{},t.method="HEAD",t.requestedHeaders=["content-length"];const r=(await this._loadURL(e,t))["content-length"];return r?Number.parseInt(r):0}}function B4(i){return i.indexOf("X-Goog-Signature")>-1}async function T4(i){if(Pn()){const e=I4(i);return await Fg(e)}else throw Error("Authorization is required, but Google oAuth has not been initalized. Contact your site administrator for assistance.")}function fd(){if(Pn())return k4()}function M4(i,e){return e&&(i["Cache-Control"]="no-cache",i.Authorization="Bearer "+e),i}function R4(i){let e=Se.apiKey;if(!e&&typeof gapi<"u"&&(e=gapi.apiKey),e!==void 0&&!i.includes("key=")){const t=i.includes("?")?"&":"?";i=i+t+"key="+e}return i}function D4(i){if(i.includes("supportsTeamDrive"))return i;{const e=i.includes("?")?"&":"?";i=i+e+"supportsTeamDrive=true"}}function L4(i){return i.startsWith("https://www.dropbox.com")?i.replace("//www.dropbox.com","//dl.dropboxusercontent.com"):i.startsWith("https://drive.google.com")?Ag(i):i.includes("//www.broadinstitute.org/igvdata")?i.replace("//www.broadinstitute.org/igvdata","//data.broadinstitute.org/igvdata"):i.includes("//igvdata.broadinstitute.org")?i.replace("//igvdata.broadinstitute.org","//s3.amazonaws.com/igv.broadinstitute.org"):i.includes("//igv.genepattern.org")?i.replace("//igv.genepattern.org","//igv-genepattern-org.s3.amazonaws.com"):i.startsWith("ftp://ftp.ncbi.nlm.nih.gov/geo")?i.replace("ftp://","https://"):i}function sl(i){let e;return eo(i)?e=Ss(i):e=new Uint8Array(i),"TextDecoder"in H4()?new TextDecoder().decode(e):z4(e)}function z4(i){for(var e="",t=0;t<i.length;){var n=i[t],r=0,s=0;if(n<=127?(r=0,s=n&255):n<=223?(r=1,s=n&31):n<=239?(r=2,s=n&15):n<=244&&(r=3,s=n&7),i.length-t-r>0)for(var a=0;a<r;)n=i[t+a+1],s=s<<6|n&63,a+=1;else s=65533,r=i.length-t;e+=String.fromCodePoint(s),t+=r+1}return e}function H4(){return typeof self<"u"?self:typeof global<"u"?global:window}const Se=new N4;var $i=1,Ti=2,at={};at.color=$i;at.parent=at;at.left=at;at.right=at;class _g{constructor(){this.root=at}insert(e,t,n){var r=new pd(e,t,n),s=new P4(r);for(this.treeInsert(s),s.color=Ti;s!==this.root&&s.parent.color===Ti;)if(s.parent===s.parent.parent.left){let a=s.parent.parent.right;a.color===Ti?(s.parent.color=$i,a.color=$i,s.parent.parent.color=Ti,s=s.parent.parent):(s===s.parent.right&&(s=s.parent,dd.call(this,s)),s.parent.color=$i,s.parent.parent.color=Ti,ud.call(this,s.parent.parent))}else{let a=s.parent.parent.left;a.color===Ti?(s.parent.color=$i,a.color=$i,s.parent.parent.color=Ti,s=s.parent.parent):(s===s.parent.left&&(s=s.parent,ud.call(this,s)),s.parent.color=$i,s.parent.parent.color=Ti,dd.call(this,s.parent.parent))}this.root.color=$i}findOverlapping(e,t){var n=new pd(e,t,0);if(this.root===at)return[];var r=uc.call(this,n,this.root,[]);return r.length>1&&r.sort(function(s,a){return s.low-a.low}),r}logIntervals(){e(this.root,0);function e(t,n){for(var r="",s=0;s<n;s++)r+=" ";console.log(r+t.interval.low+" "+t.interval.high),n+=5,t.left!==at&&e(t.left,n),t.right!==at&&e(t.right,n)}}mapIntervals(e){t(this.root);function t(n){e(n.interval),n.left!==at&&t(n.left),n.right!==at&&t(n.right)}}treeInsert(e){for(var t=this.root,n=at;t!==at;)n=t,e.interval.low<=t.interval.low?t=t.left:t=t.right;e.parent=n,n===at?(this.root=e,e.left=e.right=at):e.interval.low<=n.interval.low?n.left=e:n.right=e,wh.call(this,e)}}function uc(i,e,t){return e.interval.overlaps(i)&&t.push(e.interval),e.left!==at&&e.left.max>=i.low&&uc.call(this,i,e.left,t),e.right!==at&&e.right.min<=i.high&&uc.call(this,i,e.right,t),t}function dd(i){var e=i.right;i.right=e.left,e.left!==at&&(e.left.parent=i),e.parent=i.parent,i.parent===at?this.root=e:i.parent.left===i?i.parent.left=e:i.parent.right=e,e.left=i,i.parent=e,wh.call(this,i)}function ud(i){var e=i.left;i.left=e.right,e.right!==at&&(e.right.parent=i),e.parent=i.parent,i.parent===at?this.root=e:i.parent.right===i?i.parent.right=e:i.parent.left=e,e.right=i,i.parent=e,wh.call(this,i)}function wh(i){for(;i!==at;){var e=i.left.max>i.right.max?i.left.max:i.right.max,t=i.interval.high;i.max=e>t?e:t;var n=i.left.min<i.right.min?i.left.min:i.right.min,r=i.interval.low;i.min=n<r?n:r,i=i.parent}}class pd{constructor(e,t,n){this.low=e,this.high=t,this.value=n}equals(e){return e?this===e?!0:this.low===e.low&&this.high===e.high:!1}compareTo(e){return this.low<e.low?-1:this.low>e.low?1:this.high<e.high?-1:this.high>e.high?1:0}overlaps(e){return this.low<=e.high&&e.low<=this.high}}function P4(i){this.parent=at,this.left=at,this.right=at,this.interval=i,this.color=Ti}class Ns{constructor(e,t,n){e=e||[],this.treeMap=this.buildTreeMap(e,t),this.range=n,this.count=e.length}containsRange(e){return this.range===void 0||this.range.contains(e.chr,e.start,e.end)}findFeatures(e){const t=[];for(let n of Object.values(this.allFeatures))for(let r of n)e(r)&&t.push(r);return t}queryFeatures(e,t,n){const r=this.treeMap[e];if(!r)return[];const s=r.findOverlapping(t,n);if(s.length===0)return[];{const a=[],o=this.allFeatures[e];if(o){for(let l of s){const c=l.value;for(let h=c.start;h<c.end;h++){let f=o[h];if(f.start>n)break;f.end>=t&&a.push(f)}}a.sort(function(l,c){return l.start-c.start})}return a}}getAllFeatures(){return this.allFeatures}buildTreeMap(e,t){const n={},r=[];if(this.allFeatures={},e){for(let s of e){let a=s.chr;t&&(a=t.getChromosomeName(a));let o=this.allFeatures[a];o||(r.push(a),o=[],this.allFeatures[a]=o),o.push(s)}for(let s of r){const a=this.allFeatures[s];a.sort(function(o,l){return o.start===l.start?0:o.start>l.start?1:-1}),n[s]=O4(a)}}return n}}function O4(i){const e=new _g,t=i.length,n=Math.max(10,Math.round(t/10));for(let r=0;r<t;r+=n){const s=Math.min(t,r+n),a=new U4(r,s),o=i[r].start;let l=o;for(let c=r;c<s;c++)l=Math.max(l,i[c].end);e.insert(o,l,a)}return e}class U4{constructor(e,t){this.start=e,this.end=t}}const io={packFeatures:function(i,e,t){var n,r;if(i){if(e=e||1e4,t||i.sort(function(m,F){return m.start-F.start}),i.length===0)return[];var s=[],a=0,o=0,l,c,h,f,d,u=2,p;for(n=i[0].start,r=i[i.length-1].start,p=Math.max(n,i[0].start),l=p,i.forEach(function(m){var F=Math.max(0,m.start-p);s[F]===void 0&&(s[F]=[]),s[F].push(m)}),c=0;a<i.length&&c<=e;){for(;l<=r;){for(f=void 0;!f&&l<=r;)h=l-p,s[h]===void 0?++l:f=s[h];if(!f)break;d=f.pop(),f.length===0&&(s[h]=void 0),d.row=c,l=d.end+u,++a}if(c++,l=p,a===o)break;o=a}}},findOverlapping:function(i,e,t){if(!i||i.length===0)return[];{const r=q4(i).findOverlapping(e,t);return r.length===0?[]:(i=[],r.forEach(function(s){const a=s.value,o=a.length;for(let l=0;l<o;l++){const c=a[l];if(c.start>t)break;c.end>e&&i.push(c)}}),i.sort(function(s,a){return s.start-a.start}),i)}}};function q4(i){const e=new _g,t=i.length,n=Math.max(10,Math.round(t/100));i.sort(function(r,s){return r.start===s.start?0:r.start>s.start?1:-1});for(let r=0;r<t;r+=n){const s=Math.min(t,r+n),a=i.slice(r,s),o=a[0].start;let l=o;a.forEach(function(c){l=Math.max(l,c.end)}),e.insert(o,l,a)}return e}function gd(i){if(i=i.replace(/^#/,""),i.length===3&&(i=i.split("").map(s=>s+s).join("")),i.length!==6)throw new Error("Invalid HEX color.");let e=parseInt(i,16),t=e>>16&255,n=e>>8&255,r=e&255;return`rgb(${t}, ${n}, ${r})`}const Cg={cantaloupe:{r:255,g:206,b:110},honeydew:{r:206,g:250,b:110},spindrift:{r:104,g:251,b:208},sky:{r:106,g:207,b:255},lavender:{r:210,g:120,b:255},carnation:{r:255,g:127,b:211},licorice:{r:0,g:0,b:0},snow:{r:255,g:255,b:255},salmon:{r:255,g:114,b:110},banana:{r:255,g:251,b:109},flora:{r:104,g:249,b:110},ice:{r:104,g:253,b:255},orchid:{r:110,g:118,b:255},bubblegum:{r:255,g:122,b:255},lead:{r:30,g:30,b:30},mercury:{r:232,g:232,b:232},tangerine:{r:255,g:136,b:2},lime:{r:131,g:249,b:2},sea_foam:{r:3,g:249,b:135},aqua:{r:0,g:140,b:255},grape:{r:137,g:49,b:255},strawberry:{r:255,g:41,b:135},tungsten:{r:58,g:58,b:58},silver:{r:208,g:208,b:208},maraschino:{r:255,g:33,b:1},lemon:{r:255,g:250,b:3},spring:{r:5,g:248,b:2},turquoise:{r:0,g:253,b:255},blueberry:{r:0,g:46,b:255},magenta:{r:255,g:57,b:255},iron:{r:84,g:84,b:83},magnesium:{r:184,g:184,b:184},mocha:{r:137,g:72,b:0},fern:{r:69,g:132,b:1},moss:{r:1,g:132,b:72},ocean:{r:0,g:74,b:136},eggplant:{r:73,g:26,b:136},maroon:{r:137,g:22,b:72},steel:{r:110,g:110,b:110},aluminum:{r:160,g:159,b:160},cayenne:{r:137,g:17,b:0},aspargus:{r:136,g:133,b:1},clover:{r:2,g:132,b:1},teal:{r:0,g:134,b:136},midnight:{r:0,g:24,b:136},plum:{r:137,g:30,b:136},tin:{r:135,g:134,b:135},nickel:{r:136,g:135,b:135}};function Lt(i){const{r:e,g:t,b:n}=Cg[i];return`rgb(${e},${t},${n})`}function V4(i,e){const{r:t,g:n,b:r}=Cg[i];return`rgba(${t},${n},${r},${e})`}const no={Set1:["rgb(228,26,28)","rgb(55,126,184)","rgb(77,175,74)","rgb(166,86,40)","rgb(152,78,163)","rgb(255,127,0)","rgb(247,129,191)","rgb(153,153,153)","rgb(255,255,51)"],Dark2:["rgb(27,158,119)","rgb(217,95,2)","rgb(117,112,179)","rgb(231,41,138)","rgb(102,166,30)","rgb(230,171,2)","rgb(166,118,29)","rgb(102,102,102)"],Set2:["rgb(102, 194,165)","rgb(252,141,98)","rgb(141,160,203)","rgb(231,138,195)","rgb(166,216,84)","rgb(255,217,47)","rgb(229,196,148)","rgb(179,179,179)"],Set3:["rgb(141,211,199)","rgb(255,255,179)","rgb(190,186,218)","rgb(251,128,114)","rgb(128,177,211)","rgb(253,180,98)","rgb(179,222,105)","rgb(252,205,229)","rgb(217,217,217)","rgb(188,128,189)","rgb(204,235,197)","rgb(255,237,111)"],Pastel1:["rgb(251,180,174)","rgb(179,205,227)","rgb(204,235,197)","rgb(222,203,228)","rgb(254,217,166)","rgb(255,255,204)","rgb(229,216,189)","rgb(253,218,236)"],Pastel2:["rgb(173,226,207)","rgb(253,205,172)","rgb(203,213,232)","rgb(244,202,228)","rgb(230,245,201)","rgb(255,242,174)","rgb(243,225,206)"],Accent:["rgb(127,201,127)","rgb(190,174,212)","rgb(253,192,134)","rgb(255,255,153)","rgb(56,108,176)","rgb(240,2,127)","rgb(191,91,23)"]};class Bs{constructor(e){this.colors=no[e],Array.isArray(this.colors)||(this.colors=[]),this.colorTable=new Map,this.nextIdx=0,this.colorGenerator=new Ws}getColor(e){return this.colorTable.has(e)||(this.nextIdx<this.colors.length?this.colorTable.set(e,this.colors[this.nextIdx]):this.colorTable.set(e,this.colorGenerator.get()),this.nextIdx++),this.colorTable.get(e)}}class Sn{constructor(e){this.colorTable=e||{},this.nextIdx=0,this.colorGenerator=new Ws}getColor(e){if(!this.colorTable.hasOwnProperty(e)){if(this.colorTable.hasOwnProperty("*"))return this.colorTable["*"];this.colorTable[e]=this.colorGenerator.get()}return this.colorTable[e]}}function Ws(){this.hue=Math.random(),this.goldenRatio=.618033988749895,this.hexwidth=2}Ws.prototype.hsvToRgb=function(i,e,t){var n=Math.floor(i*6),r=i*6-n,s=t*(1-e),a=t*(1-r*e),o=t*(1-(1-r)*e),l=255,c=255,h=255;switch(n){case 0:l=t,c=o,h=s;break;case 1:l=a,c=t,h=s;break;case 2:l=s,c=t,h=o;break;case 3:l=s,c=a,h=t;break;case 4:l=o,c=s,h=t;break;case 5:l=t,c=s,h=a;break}return[Math.floor(l*256),Math.floor(c*256),Math.floor(h*256)]};Ws.prototype.padHex=function(i){return i.length>this.hexwidth?i:new Array(this.hexwidth-i.length+1).join("0")+i};Ws.prototype.get=function(i,e){this.hue+=this.goldenRatio,this.hue%=1,typeof i!="number"&&(i=.5),typeof e!="number"&&(e=.95);var t=this.hsvToRgb(this.hue,i,e);return"#"+this.padHex(t[0].toString(16))+this.padHex(t[1].toString(16))+this.padHex(t[2].toString(16))};function md(i,e,t,n){return i=Ze.clamp(i,0,255),e=Ze.clamp(e,0,255),t=Ze.clamp(t,0,255),n=Ze.clamp(n,0,1),`rgba(${i}, ${e}, ${t}, ${n})`}function Q4(i,e,t){return i=Ze.clamp(i,0,255),e=Ze.clamp(e,0,255),t=Ze.clamp(t,0,255),`rgb(${i}, ${e}, ${t})`}function G4(i,e){i=Ze.clamp(i,0,255),e=Ze.clamp(e,0,255);const t=Math.round(Math.random()*(e-i)+i).toString(10),n=Math.round(Math.random()*(e-i)+i).toString(10),r=Math.round(Math.random()*(e-i)+i).toString(10);return`rgb(${t},${n},${r})`}function ir(i){if(i.startsWith("rgb(")){const[e,t]=i.split("("),[n]=t.split(")");return n.split(",").map(r=>parseInt(r))}else return}const wd=.005;function $4(i,e,t){if(t<wd)return i;if(t>1-wd)return e;{let n,r,s,a,o,l;t<.5?(t/=.5,[n,r,s]=ir(i),[a,o,l]=ir(Lt("snow"))):(t=(t-.5)/.5,[n,r,s]=ir(Lt("snow")),[a,o,l]=ir(e));const[c,h,f]=[Math.floor(Ze.lerp(n,a,t)),Math.floor(Ze.lerp(r,o,t)),Math.floor(Ze.lerp(s,l,t))];return Q4(c,h,f)}}const j4=new Set(["bedtype","alignment","annotation","variant","wig","interact"]),W4=new Set(["alignment","annotation","variant","eqtl","qtl","snp","shoebox","wig"]),Ma=new Set(["sequence","ruler","ideogram"]),Ra={};class xg{constructor(e){this.browser=e,this.initialize()}initialize(){const e=new R1;e.add("...");const t={parent:this.browser.root,content:e};this.dialog=new H1(t),this.browser.root.appendChild(this.dialog.elem),Ct(this.dialog.elem)}trackMenuItemList(e){const t=[];return e.track.config.type!=="sequence"&&t.push(t3()),K4(e)===!0?t.push(...this.multiSelectMenuItems(e)):(e.track.config.type!=="sequence"&&t.push(e3()),t.push(...this.defaultMenuItems(e))),e.track.removable!==!1&&(t.push("<hr/>"),t.push(J4(e))),t}defaultMenuItems(e){const t=[];return yd(e.track)&&(t.push("<hr/>"),t.push(oa({trackView:e,label:"Set track color",option:"color"})),t.push(bd({trackView:e,label:"Unset track color"})),(e.track.config.type==="wig"||e.track.config.type==="annotation")&&(t.push(oa({trackView:e,label:"Set alt color",option:"altColor"})),t.push(Fd({trackView:e,label:"Unset alt color"})))),e.track.menuItemList&&t.push(...e.track.menuItemList()),Y4(e)&&(t.push("<hr/>"),t.push(X4(e.track.type))),t}multiSelectMenuItems(e){const t=[],n=e.browser.getSelectedTrackViews();return n3(n.map(({track:s})=>s.type))===!0?(t.push(...this.defaultMenuItems(e)),e.track.type==="wig"&&(t.push("<hr/>"),t.push(Z4()))):yd(e.track)&&(t.push("<hr/>"),t.push(oa({trackView:e,label:"Set track color",option:"color"})),t.push(bd({trackView:e,label:"Unset track color"})),(e.track.config.type==="wig"||e.track.config.type==="annotation")&&(t.push(oa({trackView:e,label:"Set alt color",option:"altColor"})),t.push(Fd({trackView:e,label:"Unset alt color"})))),t}}function K4(i){const e=i.browser.getSelectedTrackViews();return e&&e.length>1&&new Set(e).has(i)}function Y4(i){const e=i.track;return e&&e.config&&e.config.visibilityWindow!==void 0||e&&W4.has(e.type)}function Z4(){const i=ve("<div>");i.text("Group autoscale");function e(t){const n=no.Dark2,r=Math.floor(Math.random()*n.length),s=`auto-scale-group-${Et()}`;Ra[s]=n[r];const a=this.browser.getSelectedTrackViews();for(const{track:o}of a)o.autoscaleGroup=s;this.browser.updateViews()}return{object:i,doAllMultiSelectedTracks:!0,click:e}}function X4(i){const e=ve("<div>");e.text("Set visibility window");function t(n){const r=()=>{let o=this.browser.inputDialog.value;o=o===""||o===void 0?-1:o.trim(),this.visibilityWindow=Number.parseInt(o),this.config.visibilityWindow=Number.parseInt(o),this.trackView.updateViews()},a={label:i==="wig"?"Visibility window (bp). Enter 0 for whole chromosome, -1 for whole genome.":"Visibility window (bp). Enter 0 for whole chromosome.",value:this.visibilityWindow,callback:r};this.browser.inputDialog.present(a,n)}return{object:e,click:t}}function J4(i){const e=i.track.selected?"Remove tracks":"Remove track",t=ve("<div>");t.text(e);function n(r){this.trackView.browser._removeTrack(this)}return{object:t,click:n,menuItemType:"removeTrack"}}function oa({trackView:i,label:e,option:t}){const n=ve("<div>");return n.text(e),{object:n,click:()=>i.presentColorPicker(t)}}function bd({trackView:i,label:e}){const t=ve("<div>");return t.text(e),{object:t,click:()=>{i.track.color=void 0,i.repaintViews()}}}function Fd({trackView:i,label:e}){const t=ve("<div>");return t.text(e),{object:t,click:()=>{i.track.altColor=void 0,i.repaintViews()}}}function e3(){const i=ve("<div>");i.text("Set track name");function e(t){const n=()=>{let s=this.browser.inputDialog.value;s=s===""||s===void 0?"untitled":s.trim(),this.name=s},r={label:"Track Name",value:i3(this)||"unnamed",callback:n};this.browser.inputDialog.present(r,t)}return{object:i,click:e}}function t3(){const i=ve("<div>");i.text("Set track height");function e(t){const n=()=>{const s=parseInt(this.browser.inputDialog.value,10);if(s!==void 0){const a=[];this.trackView.track.selected?a.push(...this.trackView.browser.getSelectedTrackViews().map(({track:o})=>o)):a.push(this);for(const o of a)o.trackView.autoHeight=!1,o.minHeight!==void 0&&o.minHeight>s&&(o.minHeight=s),o.maxHeight!==void 0&&o.maxHeight<s&&(o.minHeight=s),o.trackView.setTrackHeight(s,!0),o.trackView.checkContentHeight(),o.trackView.repaintViews()}},r={label:"Track Height",value:this.height,callback:n};this.browser.inputDialog.present(r,t)}return{object:i,dialog:e}}function i3(i){return i.name}function yd(i){return i.type===void 0||j4.has(i.type)}function n3(i){return[...new Set(i)].length===1}class kg{constructor(e,t){this.browser=e,this.$container=ve("<div>",{class:"igv-generic-dialog-container"}),t.append(this.$container),this.$container.offset({left:0,top:0});const n=ve("<div>",{class:"igv-generic-dialog-header"});this.$container.append(n),Dn(n[0],()=>{this.$minimum_input.val(""),this.$maximum_input.val(""),this.$container.offset({left:0,top:0}),this.$container.hide()}),this.$minimum=ve("<div>",{class:"igv-generic-dialog-label-input"}),this.$container.append(this.$minimum);const r=ve("<div>");r.text("Minimum"),this.$minimum.append(r),this.$minimum_input=ve("<input>"),this.$minimum.append(this.$minimum_input),this.$maximum=ve("<div>",{class:"igv-generic-dialog-label-input"}),this.$container.append(this.$maximum);const s=ve("<div>");s.text("Maximum"),this.$maximum.append(s),this.$maximum_input=ve("<input>"),this.$maximum.append(this.$maximum_input);const a=ve("<div>",{class:"igv-generic-dialog-ok-cancel"});this.$container.append(a),this.$ok=ve("<div>"),a.append(this.$ok),this.$ok.text("OK"),this.$cancel=ve("<div>"),a.append(this.$cancel),this.$cancel.text("Cancel"),this.$cancel.on("click",()=>{this.$minimum_input.val(""),this.$maximum_input.val(""),this.$container.offset({left:0,top:0}),this.$container.hide()}),Ui(this.$container.get(0),n.get(0)),this.$container.hide()}configure(e){let t;if(Array.isArray(e)){t={min:Number.MAX_SAFE_INTEGER,max:-Number.MAX_SAFE_INTEGER};for(const n of e)n.track.dataRange&&(t.min=Math.min(n.track.dataRange.min,t.min),t.max=Math.max(n.track.dataRange.max,t.max))}else t=e.track.dataRange;t&&(this.$minimum_input.val(t.min),this.$maximum_input.val(t.max)),this.$minimum_input.unbind(),this.$minimum_input.on("keyup",n=>{n.keyCode===13&&this.processResults(e),n.stopImmediatePropagation()}),this.$maximum_input.unbind(),this.$maximum_input.on("keyup",n=>{n.keyCode===13&&(n.stopImmediatePropagation(),this.processResults(e))}),this.$ok.unbind(),this.$ok.on("click",n=>{this.processResults(e)})}processResults(e){if(this.$minimum_input.val()!==""&&this.$maximum_input.val()!==""){const t=Number(this.$minimum_input.val()),n=Number(this.$maximum_input.val());if(isNaN(t)||isNaN(n))this.browser.alert.present(new Error("Must input numeric values"),void 0);else{const r=Array.isArray(e)?e:[e];for(const s of r)s.track.setDataRange({min:t,max:n})}this.$minimum_input.val(""),this.$maximum_input.val("")}this.$container.offset({left:0,top:0}),this.$container.hide()}present(e){const t=e.offset().top,n=ve("body").scrollTop();this.$container.offset({left:e.width()-this.$container.width(),top:t+n}),this.$container.show()}}const de={configureHighDPICanvas:function(i,e,t){const n=window.devicePixelRatio;i.canvas.style.width=`${e}px`,i.canvas.width=Math.floor(n*e),i.canvas.style.height=`${t}px`,i.canvas.height=Math.floor(n*t),i.scale(n,n)},setProperties:function(i,e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];i[t]=n}},strokeLine:function(i,e,t,n,r,s){e=Math.floor(e)+.5,t=Math.floor(t)+.5,n=Math.floor(n)+.5,r=Math.floor(r)+.5,s&&(i.save(),de.setProperties(i,s)),i.beginPath(),i.moveTo(e,t),i.lineTo(n,r),i.stroke(),s&&i.restore()},fillRect:function(i,e,t,n,r,s){s&&(i.save(),de.setProperties(i,s)),i.fillRect(e,t,n,r),s&&i.restore()},fillPolygon:function(i,e,t,n){n&&(i.save(),de.setProperties(i,n)),Ad(i,e,t),i.fill(),n&&i.restore()},strokePolygon:function(i,e,t,n){n&&(i.save(),de.setProperties(i,n)),Ad(i,e,t),i.stroke(),n&&i.restore()},fillText:function(i,e,t,n,r,s){if((r||s)&&i.save(),r&&de.setProperties(i,r),s){i.translate(t,n);for(var a in s){var o=s[a];a==="translate"&&i.translate(o.x,o.y),a==="rotate"&&i.rotate(o.angle*Math.PI/180)}i.fillText(e,0,0)}else i.fillText(e,t,n);(r||s)&&i.restore()},strokeText:function(i,e,t,n,r,s){if((r||s)&&i.save(),r&&de.setProperties(i,r),s){i.translate(t,n);for(var a in s){var o=s[a];a==="translate"&&i.translate(o.x,o.y),a==="rotate"&&i.rotate(o.angle*Math.PI/180)}i.strokeText(e,0,0)}else i.strokeText(e,t,n);(r||s)&&i.restore()},strokeCircle:function(i,e,t,n,r){r&&(i.save(),de.setProperties(i,r)),i.beginPath(),i.arc(e,t,n,0,2*Math.PI),i.stroke(),r&&i.restore()},fillCircle:function(i,e,t,n,r){r&&(i.save(),de.setProperties(i,r)),i.beginPath(),i.arc(e,t,n,0,2*Math.PI),i.fill(),r&&i.restore()},drawArrowhead:function(i,e,t,n,r){i.save(),n||(n=5),r&&(i.lineWidth=r),i.beginPath(),i.moveTo(e,t-n/2),i.lineTo(e,t+n/2),i.lineTo(e+n,t),i.lineTo(e,t-n/2),i.closePath(),i.fill(),i.restore()},dashedLine:function(i,e,t,n,r,s,a={}){s===void 0&&(s=2),i.setLineDash([s,s]),de.strokeLine(i,e,t,n,r,a),i.setLineDash([])},roundRect:function(i,e,t,n,r,s,a,o){typeof o>"u"&&(o=!0),typeof s>"u"&&(s=5),i.beginPath(),i.moveTo(e+s,t),i.lineTo(e+n-s,t),i.quadraticCurveTo(e+n,t,e+n,t+s),i.lineTo(e+n,t+r-s),i.quadraticCurveTo(e+n,t+r,e+n-s,t+r),i.lineTo(e+s,t+r),i.quadraticCurveTo(e,t+r,e,t+r-s),i.lineTo(e,t+s),i.quadraticCurveTo(e,t,e+s,t),i.closePath(),o&&i.stroke(),a&&i.fill()},polygon:function(i,e,t,n,r){typeof r>"u"&&(r=!0),i.beginPath();var s=e.length;i.moveTo(e[0],t[0]);for(var a=1;a<s;a++)i.lineTo(e[a],t[a]);i.closePath(),r&&i.stroke(),n&&i.fill()},drawRandomColorVerticalLines:i=>{for(let e=0;e<i.canvas.width;e++)de.fillRect(i,e,0,1,i.canvas.height,{fillStyle:G4(100,250)})},labelTransformWithContext:(i,e)=>{i.translate(e,0),i.scale(-1,1),i.translate(-e,0)}};function Ad(i,e,t){var n,r=e.length;for(i.beginPath(),i.moveTo(e[0],t[0]),n=1;n<r;n++)i.lineTo(e[n],t[n]);i.closePath()}/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:Ig,setPrototypeOf:vd,isFrozen:r3,getPrototypeOf:s3,getOwnPropertyDescriptor:a3}=Object;let{freeze:qt,seal:ai,create:Eg}=Object,{apply:pc,construct:gc}=typeof Reflect<"u"&&Reflect;qt||(qt=function(e){return e});ai||(ai=function(e){return e});pc||(pc=function(e,t,n){return e.apply(t,n)});gc||(gc=function(e,t){return new e(...t)});const la=Jt(Array.prototype.forEach),_d=Jt(Array.prototype.pop),Qr=Jt(Array.prototype.push),Da=Jt(String.prototype.toLowerCase),al=Jt(String.prototype.toString),Cd=Jt(String.prototype.match),Gr=Jt(String.prototype.replace),o3=Jt(String.prototype.indexOf),l3=Jt(String.prototype.trim),hi=Jt(Object.prototype.hasOwnProperty),Pt=Jt(RegExp.prototype.test),$r=c3(TypeError);function Jt(i){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return pc(i,e,n)}}function c3(i){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return gc(i,t)}}function Qe(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Da;vd&&vd(i,null);let n=e.length;for(;n--;){let r=e[n];if(typeof r=="string"){const s=t(r);s!==r&&(r3(e)||(e[n]=s),r=s)}i[r]=!0}return i}function h3(i){for(let e=0;e<i.length;e++)hi(i,e)||(i[e]=null);return i}function hn(i){const e=Eg(null);for(const[t,n]of Ig(i))hi(i,t)&&(Array.isArray(n)?e[t]=h3(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=hn(n):e[t]=n);return e}function jr(i,e){for(;i!==null;){const n=a3(i,e);if(n){if(n.get)return Jt(n.get);if(typeof n.value=="function")return Jt(n.value)}i=s3(i)}function t(){return null}return t}const xd=qt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ol=qt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ll=qt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),f3=qt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),cl=qt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),d3=qt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kd=qt(["#text"]),Id=qt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),hl=qt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ed=qt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ca=qt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),u3=ai(/\{\{[\w\W]*|[\w\W]*\}\}/gm),p3=ai(/<%[\w\W]*|[\w\W]*%>/gm),g3=ai(/\${[\w\W]*}/gm),m3=ai(/^data-[\-\w.\u00B7-\uFFFF]/),w3=ai(/^aria-[\-\w]+$/),Sg=ai(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),b3=ai(/^(?:\w+script|data):/i),F3=ai(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ng=ai(/^html$/i),y3=ai(/^[a-z][.\w]*(-[.\w]+)+$/i);var Sd=Object.freeze({__proto__:null,MUSTACHE_EXPR:u3,ERB_EXPR:p3,TMPLIT_EXPR:g3,DATA_ATTR:m3,ARIA_ATTR:w3,IS_ALLOWED_URI:Sg,IS_SCRIPT_OR_DATA:b3,ATTR_WHITESPACE:F3,DOCTYPE_NAME:Ng,CUSTOM_ELEMENT:y3});const Wr={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},A3=function(){return typeof window>"u"?null:window},v3=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function Bg(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A3();const e=Me=>Bg(Me);if(e.version="3.1.7",e.removed=[],!i||!i.document||i.document.nodeType!==Wr.document)return e.isSupported=!1,e;let{document:t}=i;const n=t,r=n.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:c,NamedNodeMap:h=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:f,DOMParser:d,trustedTypes:u}=i,p=l.prototype,m=jr(p,"cloneNode"),F=jr(p,"remove"),g=jr(p,"nextSibling"),w=jr(p,"childNodes"),b=jr(p,"parentNode");if(typeof a=="function"){const Me=t.createElement("template");Me.content&&Me.content.ownerDocument&&(t=Me.content.ownerDocument)}let y,v="";const{implementation:T,createNodeIterator:A,createDocumentFragment:C,getElementsByTagName:k}=t,{importNode:I}=n;let B={};e.isSupported=typeof Ig=="function"&&typeof b=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:M,ERB_EXPR:N,TMPLIT_EXPR:x,DATA_ATTR:D,ARIA_ATTR:S,IS_SCRIPT_OR_DATA:U,ATTR_WHITESPACE:O,CUSTOM_ELEMENT:Q}=Sd;let{IS_ALLOWED_URI:K}=Sd,G=null;const ne=Qe({},[...xd,...ol,...ll,...cl,...kd]);let H=null;const $=Qe({},[...Id,...hl,...Ed,...ca]);let X=Object.seal(Eg(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ee=null,te=null,be=!0,q=!0,J=!1,E=!0,Y=!1,j=!0,P=!1,fe=!1,oe=!1,ce=!1,ue=!1,he=!1,ye=!0,Ie=!1;const _="user-content-";let R=!0,L=!1,W={},ie=null;const se=Qe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let me=null;const ze=Qe({},["audio","video","img","source","image","track"]);let Pe=null;const je=Qe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Oe="http://www.w3.org/1998/Math/MathML",We="http://www.w3.org/2000/svg",At="http://www.w3.org/1999/xhtml";let li=At,on=!1,zr=null;const On=Qe({},[Oe,We,At],al);let Ei=null;const Hr=["application/xhtml+xml","text/html"],Lo="text/html";let V=null,Z=null;const ae=t.createElement("form"),ge=function(re){return re instanceof RegExp||re instanceof Function},le=function(){let re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Z&&Z===re)){if((!re||typeof re!="object")&&(re={}),re=hn(re),Ei=Hr.indexOf(re.PARSER_MEDIA_TYPE)===-1?Lo:re.PARSER_MEDIA_TYPE,V=Ei==="application/xhtml+xml"?al:Da,G=hi(re,"ALLOWED_TAGS")?Qe({},re.ALLOWED_TAGS,V):ne,H=hi(re,"ALLOWED_ATTR")?Qe({},re.ALLOWED_ATTR,V):$,zr=hi(re,"ALLOWED_NAMESPACES")?Qe({},re.ALLOWED_NAMESPACES,al):On,Pe=hi(re,"ADD_URI_SAFE_ATTR")?Qe(hn(je),re.ADD_URI_SAFE_ATTR,V):je,me=hi(re,"ADD_DATA_URI_TAGS")?Qe(hn(ze),re.ADD_DATA_URI_TAGS,V):ze,ie=hi(re,"FORBID_CONTENTS")?Qe({},re.FORBID_CONTENTS,V):se,ee=hi(re,"FORBID_TAGS")?Qe({},re.FORBID_TAGS,V):{},te=hi(re,"FORBID_ATTR")?Qe({},re.FORBID_ATTR,V):{},W=hi(re,"USE_PROFILES")?re.USE_PROFILES:!1,be=re.ALLOW_ARIA_ATTR!==!1,q=re.ALLOW_DATA_ATTR!==!1,J=re.ALLOW_UNKNOWN_PROTOCOLS||!1,E=re.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Y=re.SAFE_FOR_TEMPLATES||!1,j=re.SAFE_FOR_XML!==!1,P=re.WHOLE_DOCUMENT||!1,ce=re.RETURN_DOM||!1,ue=re.RETURN_DOM_FRAGMENT||!1,he=re.RETURN_TRUSTED_TYPE||!1,oe=re.FORCE_BODY||!1,ye=re.SANITIZE_DOM!==!1,Ie=re.SANITIZE_NAMED_PROPS||!1,R=re.KEEP_CONTENT!==!1,L=re.IN_PLACE||!1,K=re.ALLOWED_URI_REGEXP||Sg,li=re.NAMESPACE||At,X=re.CUSTOM_ELEMENT_HANDLING||{},re.CUSTOM_ELEMENT_HANDLING&&ge(re.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=re.CUSTOM_ELEMENT_HANDLING.tagNameCheck),re.CUSTOM_ELEMENT_HANDLING&&ge(re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=re.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),re.CUSTOM_ELEMENT_HANDLING&&typeof re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=re.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Y&&(q=!1),ue&&(ce=!0),W&&(G=Qe({},kd),H=[],W.html===!0&&(Qe(G,xd),Qe(H,Id)),W.svg===!0&&(Qe(G,ol),Qe(H,hl),Qe(H,ca)),W.svgFilters===!0&&(Qe(G,ll),Qe(H,hl),Qe(H,ca)),W.mathMl===!0&&(Qe(G,cl),Qe(H,Ed),Qe(H,ca))),re.ADD_TAGS&&(G===ne&&(G=hn(G)),Qe(G,re.ADD_TAGS,V)),re.ADD_ATTR&&(H===$&&(H=hn(H)),Qe(H,re.ADD_ATTR,V)),re.ADD_URI_SAFE_ATTR&&Qe(Pe,re.ADD_URI_SAFE_ATTR,V),re.FORBID_CONTENTS&&(ie===se&&(ie=hn(ie)),Qe(ie,re.FORBID_CONTENTS,V)),R&&(G["#text"]=!0),P&&Qe(G,["html","head","body"]),G.table&&(Qe(G,["tbody"]),delete ee.tbody),re.TRUSTED_TYPES_POLICY){if(typeof re.TRUSTED_TYPES_POLICY.createHTML!="function")throw $r('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof re.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw $r('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=re.TRUSTED_TYPES_POLICY,v=y.createHTML("")}else y===void 0&&(y=v3(u,r)),y!==null&&typeof v=="string"&&(v=y.createHTML(""));qt&&qt(re),Z=re}},we=Qe({},["mi","mo","mn","ms","mtext"]),Ae=Qe({},["annotation-xml"]),Ce=Qe({},["title","style","font","a","script"]),xe=Qe({},[...ol,...ll,...f3]),Re=Qe({},[...cl,...d3]),Te=function(re){let _e=b(re);(!_e||!_e.tagName)&&(_e={namespaceURI:li,tagName:"template"});const Be=Da(re.tagName),ot=Da(_e.tagName);return zr[re.namespaceURI]?re.namespaceURI===We?_e.namespaceURI===At?Be==="svg":_e.namespaceURI===Oe?Be==="svg"&&(ot==="annotation-xml"||we[ot]):!!xe[Be]:re.namespaceURI===Oe?_e.namespaceURI===At?Be==="math":_e.namespaceURI===We?Be==="math"&&Ae[ot]:!!Re[Be]:re.namespaceURI===At?_e.namespaceURI===We&&!Ae[ot]||_e.namespaceURI===Oe&&!we[ot]?!1:!Re[Be]&&(Ce[Be]||!xe[Be]):!!(Ei==="application/xhtml+xml"&&zr[re.namespaceURI]):!1},Ne=function(re){Qr(e.removed,{element:re});try{b(re).removeChild(re)}catch{F(re)}},Ue=function(re,_e){try{Qr(e.removed,{attribute:_e.getAttributeNode(re),from:_e})}catch{Qr(e.removed,{attribute:null,from:_e})}if(_e.removeAttribute(re),re==="is"&&!H[re])if(ce||ue)try{Ne(_e)}catch{}else try{_e.setAttribute(re,"")}catch{}},Je=function(re){let _e=null,Be=null;if(oe)re="<remove></remove>"+re;else{const Bt=Cd(re,/^[\r\n\t ]+/);Be=Bt&&Bt[0]}Ei==="application/xhtml+xml"&&li===At&&(re='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+re+"</body></html>");const ot=y?y.createHTML(re):re;if(li===At)try{_e=new d().parseFromString(ot,Ei)}catch{}if(!_e||!_e.documentElement){_e=T.createDocument(li,"template",null);try{_e.documentElement.innerHTML=on?v:ot}catch{}}const Dt=_e.body||_e.documentElement;return re&&Be&&Dt.insertBefore(t.createTextNode(Be),Dt.childNodes[0]||null),li===At?k.call(_e,P?"html":"body")[0]:P?_e.documentElement:Dt},De=function(re){return A.call(re.ownerDocument||re,re,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},wt=function(re){return re instanceof f&&(typeof re.nodeName!="string"||typeof re.textContent!="string"||typeof re.removeChild!="function"||!(re.attributes instanceof h)||typeof re.removeAttribute!="function"||typeof re.setAttribute!="function"||typeof re.namespaceURI!="string"||typeof re.insertBefore!="function"||typeof re.hasChildNodes!="function")},vt=function(re){return typeof o=="function"&&re instanceof o},pt=function(re,_e,Be){B[re]&&la(B[re],ot=>{ot.call(e,_e,Be,Z)})},st=function(re){let _e=null;if(pt("beforeSanitizeElements",re,null),wt(re))return Ne(re),!0;const Be=V(re.nodeName);if(pt("uponSanitizeElement",re,{tagName:Be,allowedTags:G}),re.hasChildNodes()&&!vt(re.firstElementChild)&&Pt(/<[/\w]/g,re.innerHTML)&&Pt(/<[/\w]/g,re.textContent)||re.nodeType===Wr.progressingInstruction||j&&re.nodeType===Wr.comment&&Pt(/<[/\w]/g,re.data))return Ne(re),!0;if(!G[Be]||ee[Be]){if(!ee[Be]&&Qi(Be)&&(X.tagNameCheck instanceof RegExp&&Pt(X.tagNameCheck,Be)||X.tagNameCheck instanceof Function&&X.tagNameCheck(Be)))return!1;if(R&&!ie[Be]){const ot=b(re)||re.parentNode,Dt=w(re)||re.childNodes;if(Dt&&ot){const Bt=Dt.length;for(let Vt=Bt-1;Vt>=0;--Vt){const ui=m(Dt[Vt],!0);ui.__removalCount=(re.__removalCount||0)+1,ot.insertBefore(ui,g(re))}}}return Ne(re),!0}return re instanceof l&&!Te(re)||(Be==="noscript"||Be==="noembed"||Be==="noframes")&&Pt(/<\/no(script|embed|frames)/i,re.innerHTML)?(Ne(re),!0):(Y&&re.nodeType===Wr.text&&(_e=re.textContent,la([M,N,x],ot=>{_e=Gr(_e,ot," ")}),re.textContent!==_e&&(Qr(e.removed,{element:re.cloneNode()}),re.textContent=_e)),pt("afterSanitizeElements",re,null),!1)},Vi=function(re,_e,Be){if(ye&&(_e==="id"||_e==="name")&&(Be in t||Be in ae))return!1;if(!(q&&!te[_e]&&Pt(D,_e))){if(!(be&&Pt(S,_e))){if(!H[_e]||te[_e]){if(!(Qi(re)&&(X.tagNameCheck instanceof RegExp&&Pt(X.tagNameCheck,re)||X.tagNameCheck instanceof Function&&X.tagNameCheck(re))&&(X.attributeNameCheck instanceof RegExp&&Pt(X.attributeNameCheck,_e)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(_e))||_e==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&Pt(X.tagNameCheck,Be)||X.tagNameCheck instanceof Function&&X.tagNameCheck(Be))))return!1}else if(!Pe[_e]){if(!Pt(K,Gr(Be,O,""))){if(!((_e==="src"||_e==="xlink:href"||_e==="href")&&re!=="script"&&o3(Be,"data:")===0&&me[re])){if(!(J&&!Pt(U,Gr(Be,O,"")))){if(Be)return!1}}}}}}return!0},Qi=function(re){return re!=="annotation-xml"&&Cd(re,Q)},Rt=function(re){pt("beforeSanitizeAttributes",re,null);const{attributes:_e}=re;if(!_e)return;const Be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H};let ot=_e.length;for(;ot--;){const Dt=_e[ot],{name:Bt,namespaceURI:Vt,value:ui}=Dt,Pr=V(Bt);let Ht=Bt==="value"?ui:l3(ui);if(Be.attrName=Pr,Be.attrValue=Ht,Be.keepAttr=!0,Be.forceKeepAttr=void 0,pt("uponSanitizeAttribute",re,Be),Ht=Be.attrValue,Be.forceKeepAttr||(Ue(Bt,re),!Be.keepAttr))continue;if(!E&&Pt(/\/>/i,Ht)){Ue(Bt,re);continue}Y&&la([M,N,x],Jh=>{Ht=Gr(Ht,Jh," ")});const Xh=V(re.nodeName);if(Vi(Xh,Pr,Ht)){if(Ie&&(Pr==="id"||Pr==="name")&&(Ue(Bt,re),Ht=_+Ht),j&&Pt(/((--!?|])>)|<\/(style|title)/i,Ht)){Ue(Bt,re);continue}if(y&&typeof u=="object"&&typeof u.getAttributeType=="function"&&!Vt)switch(u.getAttributeType(Xh,Pr)){case"TrustedHTML":{Ht=y.createHTML(Ht);break}case"TrustedScriptURL":{Ht=y.createScriptURL(Ht);break}}try{Vt?re.setAttributeNS(Vt,Bt,Ht):re.setAttribute(Bt,Ht),wt(re)?Ne(re):_d(e.removed)}catch{}}}pt("afterSanitizeAttributes",re,null)},d1=function Me(re){let _e=null;const Be=De(re);for(pt("beforeSanitizeShadowDOM",re,null);_e=Be.nextNode();)pt("uponSanitizeShadowNode",_e,null),!st(_e)&&(_e.content instanceof s&&Me(_e.content),Rt(_e));pt("afterSanitizeShadowDOM",re,null)};return e.sanitize=function(Me){let re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=null,Be=null,ot=null,Dt=null;if(on=!Me,on&&(Me="<!-->"),typeof Me!="string"&&!vt(Me))if(typeof Me.toString=="function"){if(Me=Me.toString(),typeof Me!="string")throw $r("dirty is not a string, aborting")}else throw $r("toString is not a function");if(!e.isSupported)return Me;if(fe||le(re),e.removed=[],typeof Me=="string"&&(L=!1),L){if(Me.nodeName){const ui=V(Me.nodeName);if(!G[ui]||ee[ui])throw $r("root node is forbidden and cannot be sanitized in-place")}}else if(Me instanceof o)_e=Je("<!---->"),Be=_e.ownerDocument.importNode(Me,!0),Be.nodeType===Wr.element&&Be.nodeName==="BODY"||Be.nodeName==="HTML"?_e=Be:_e.appendChild(Be);else{if(!ce&&!Y&&!P&&Me.indexOf("<")===-1)return y&&he?y.createHTML(Me):Me;if(_e=Je(Me),!_e)return ce?null:he?v:""}_e&&oe&&Ne(_e.firstChild);const Bt=De(L?Me:_e);for(;ot=Bt.nextNode();)st(ot)||(ot.content instanceof s&&d1(ot.content),Rt(ot));if(L)return Me;if(ce){if(ue)for(Dt=C.call(_e.ownerDocument);_e.firstChild;)Dt.appendChild(_e.firstChild);else Dt=_e;return(H.shadowroot||H.shadowrootmode)&&(Dt=I.call(n,Dt,!0)),Dt}let Vt=P?_e.outerHTML:_e.innerHTML;return P&&G["!doctype"]&&_e.ownerDocument&&_e.ownerDocument.doctype&&_e.ownerDocument.doctype.name&&Pt(Ng,_e.ownerDocument.doctype.name)&&(Vt="<!DOCTYPE "+_e.ownerDocument.doctype.name+`>
`+Vt),Y&&la([M,N,x],ui=>{Vt=Gr(Vt,ui," ")}),y&&he?y.createHTML(Vt):Vt},e.setConfig=function(){let Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};le(Me),fe=!0},e.clearConfig=function(){Z=null,fe=!1},e.isValidAttribute=function(Me,re,_e){Z||le({});const Be=V(Me),ot=V(re);return Vi(Be,ot,_e)},e.addHook=function(Me,re){typeof re=="function"&&(B[Me]=B[Me]||[],Qr(B[Me],re))},e.removeHook=function(Me){if(B[Me])return _d(B[Me])},e.removeHooks=function(Me){B[Me]&&(B[Me]=[])},e.removeAllHooks=function(){B={}},e}var bh=Bg();class _3{constructor(e){this.parent=e,this.container=Fe({class:"igv-ui-generic-dialog-container"}),e.appendChild(this.container);const t=Fe({class:"igv-ui-generic-dialog-header"});this.container.appendChild(t),this.label=Fe({class:"igv-ui-generic-dialog-one-liner"}),this.container.appendChild(this.label),this.label.text="Unlabeled",this.input_container=Fe({class:"igv-ui-generic-dialog-input"}),this.container.appendChild(this.input_container);let n='<input type="range" id="igv-slider-dialog-input" name="igv-slider-dialog-input" />';this._input=document.createRange().createContextualFragment(n).firstChild,this.input_container.appendChild(this._input),n='<output id="igv-slider-dialog-output" name="igv-slider-dialog-output" for="igv-slider-dialog-input"></output>',this._output=document.createRange().createContextualFragment(n).firstChild,this.input_container.appendChild(this._output);const r=Fe({class:"igv-ui-generic-dialog-ok-cancel"});this.container.appendChild(r),this.ok=Fe(),r.appendChild(this.ok),this.ok.textContent="OK",this.cancel=Fe(),r.appendChild(this.cancel),this.cancel.textContent="Cancel",Ct(this.container),this._input.addEventListener("input",()=>{const a=parseFloat(this._input.value)/this._scaleFactor;this.callback(a),this._output.value=`${a.toFixed(2)}`},!1),this.ok.addEventListener("click",()=>{if(typeof this.callback=="function"){const a=parseFloat(this._input.value)/this._scaleFactor;this.callback(a),this.callback=void 0}this._input.value=void 0,Ct(this.container)});const s=()=>{this._input.value=void 0,Ct(this.container)};this.cancel.addEventListener("click",s),Dn(t,s),Ui(this.container,t)}get value(){return bh.sanitize(this._input.value)}present(e,t){this.label.textContent=e.label,this._scaleFactor=e.scaleFactor;const[n,r,s]=[e.min,e.max,e.value].map(c=>Math.floor(this._scaleFactor*c).toString());this._input.min=n,this._input.max=r,this._input.value=s;const a=parseFloat(s),o=this._scaleFactor,l=a/o;this._output.value=`${l.toFixed(2)}`,this.callback=e.callback||e.click,qs(this.container),this.clampLocation(t.clientX,t.clientY)}clampLocation(e,t){const{width:n,height:r}=this.container.getBoundingClientRect(),s=window.innerHeight,a=window.innerWidth,o=Math.min(s-r,t),l=Math.min(a-n,e);this.container.style.left=`${l}px`,this.container.style.top=`${o}px`}}class C3{constructor(e){this.parent=e,this.container=Fe({class:"igv-ui-generic-dialog-container"}),e.appendChild(this.container);const t=Fe({class:"igv-ui-generic-dialog-header"});this.container.appendChild(t),this.label=Fe({class:"igv-ui-generic-dialog-one-liner"}),this.container.appendChild(this.label),this.label.text="Unlabeled",this.input_container=Fe({class:"igv-ui-generic-dialog-input"}),this.container.appendChild(this.input_container),this._input=document.createElement("input"),this.input_container.appendChild(this._input);const n=Fe({class:"igv-ui-generic-dialog-ok-cancel"});this.container.appendChild(n),this.ok=Fe(),n.appendChild(this.ok),this.ok.textContent="OK",this.cancel=Fe(),n.appendChild(this.cancel),this.cancel.textContent="Cancel",Ct(this.container),this._input.addEventListener("keyup",s=>{s.code==="Enter"&&(typeof this.callback=="function"&&(this.callback(this._input.value),this.callback=void 0),this._input.value=void 0,Ct(this.container)),s.stopImmediatePropagation()}),this.ok.addEventListener("click",()=>{typeof this.callback=="function"&&(this.callback(this._input.value),this.callback=void 0),this._input.value=void 0,Ct(this.container)});const r=()=>{this._input.value="",Ct(this.container)};this.cancel.addEventListener("click",r),Dn(t,r),Ui(this.container,t)}get value(){return bh.sanitize(this._input.value)}present(e,t){this.label.textContent=e.label,this._input.value=e.value,this.callback=e.callback||e.click,qs(this.container),this.clampLocation(t.clientX,t.clientY)}clampLocation(e,t){const{width:n,height:r}=this.container.getBoundingClientRect(),s=window.innerHeight,a=window.innerWidth,o=Math.min(s-r,t),l=Math.min(a-n,e);this.container.style.left=`${l}px`,this.container.style.top=`${o}px`}}const Tg={licorice:"#000000",lead:"#1e1e1e",tungsten:"#3a3a3a",iron:"#545453",steel:"#6e6e6e",tin:"#878687",nickel:"#888787",aluminum:"#a09fa0",magnesium:"#b8b8b8",silver:"#d0d0d0",mercury:"#e8e8e8",snow:"#ffffff",cayenne:"#891100",mocha:"#894800",aspargus:"#888501",fern:"#458401",clover:"#028401",moss:"#018448",teal:"#008688",ocean:"#004a88",midnight:"#001888",eggplant:"#491a88",plum:"#891e88",maroon:"#891648",maraschino:"#ff2101",tangerine:"#ff8802",lemon:"#fffa03",lime:"#83f902",spring:"#05f802",seam_foam:"#03f987",turquoise:"#00fdff",aqua:"#008cff",blueberry:"#002eff",grape:"#8931ff",magenta:"#ff39ff",strawberry:"#ff2987",salmon:"#ff726e",cantaloupe:"#ffce6e",banana:"#fffb6d",honeydew:"#cefa6e",flora:"#68f96e",spindrift:"#68fbd0",ice:"#68fdff",sky:"#6acfff",orchid:"#6e76ff",lavender:"#d278ff",bubblegum:"#ff7aff",carnation:"#ff7fd3"};class Mg{constructor({parent:e,top:t,left:n,width:r,height:s,border:a,closeHandler:o}){let l=Fe({class:"igv-ui-generic-container"});e.appendChild(l),Ct(l),this.container=l,t!==void 0&&(this.container.style.top=`${t}px`),n!==void 0&&(this.container.style.left=`${n}px`),r!==void 0&&(this.container.style.width=`${r}px`),s!==void 0&&(this.container.style.height=`${s}px`),a&&(this.container.style.border=a);const c=Fe();this.container.appendChild(c),Dn(c,h=>{Ct(this.container),typeof o=="function"&&o(h)}),Ui(this.container,c)}show(){qs(this.container)}hide(){Ct(this.container)}dispose(){this.container.parent&&this.container.parent.removeChild(this.container)}}class Rg extends Mg{constructor({parent:e,width:t}){super({parent:e,width:t,border:"1px solid gray"})}configure(e,t){this.colorHandlers=t,this.setActiveColorHandler("color"),this.createSwatches(e)}setActiveColorHandler(e){this.activeColorHandler=this.colorHandlers[e]}createSwatches(e){this.container.querySelectorAll(".igv-ui-color-swatch").forEach(n=>n.remove());const t=Object.values(Tg);for(let n of t){const r=Fe({class:"igv-ui-color-swatch"});this.container.appendChild(r),this.decorateSwatch(r,n)}if(e)for(let n of e){const r=Fe({class:"igv-ui-color-swatch"});this.container.appendChild(r),this.decorateSwatch(r,n)}}decorateSwatch(e,t){e.style.backgroundColor=t,e.addEventListener("mouseenter",()=>e.style.borderColor=t),e.addEventListener("mouseleave",()=>e.style.borderColor="white"),e.addEventListener("click",n=>{n.stopPropagation(),this.activeColorHandler(t)}),e.addEventListener("touchend",n=>{n.stopPropagation(),this.activeColorHandler(t)})}}const Nd={401:"Access unauthorized",403:"Access forbidden",404:"Not found"};class Dg{constructor(e,t){this.alertProps=Object.assign({shouldFocus:!0,preventScroll:!1},t),this.container=Fe({class:"igv-ui-alert-dialog-container"}),e.appendChild(this.container),this.container.setAttribute("tabIndex","-1");const n=Fe();this.container.appendChild(n),this.errorHeadline=Fe(),n.appendChild(this.errorHeadline),this.errorHeadline.textContent="";let r=Fe({class:"igv-ui-alert-dialog-body"});this.container.appendChild(r),this.body=Fe({class:"igv-ui-alert-dialog-body-copy"}),r.appendChild(this.body);let s=Fe();this.container.appendChild(s),this.ok=Fe(),s.appendChild(this.ok),this.ok.textContent="OK";const a=()=>{typeof this.callback=="function"&&(this.callback("OK"),this.callback=void 0),this.body.innerHTML="",Ct(this.container)};this.ok.addEventListener("click",o=>{o.stopPropagation(),a()}),this.container.addEventListener("keypress",o=>{o.stopPropagation(),o.key==="Enter"&&a()}),Ui(this.container,n),Ct(this.container)}present(e,t){this.errorHeadline.textContent=e.message?"ERROR":"";let n=e.message||e;Nd.hasOwnProperty(n)&&(n=Nd[n]);const r=bh.sanitize(n);this.body.innerHTML=r,this.callback=t,qs(this.container),this.alertProps.shouldFocus&&this.container.focus({preventScroll:this.alertProps.preventScroll})}}class x3{constructor(e){this.dialog=new Dg(e)}present(e,t){this.dialog.present(e,t)}}function Lg(i){if(i)switch(i.toLowerCase()){case"bw":case"bigwig":case"wig":case"bedgraph":case"tdf":return"wig";case"vcf":return"variant";case"seg":return"seg";case"mut":case"maf":return"mut";case"bam":case"cram":return"alignment";case"hiccups":case"bedpe":case"bedpe-loop":case"biginteract":return"interact";case"bp":return"arc";case"gwas":return"gwas";case"bed":case"bigbed":case"bb":case"biggenepred":case"bignarrowpeak":return"bedtype";case"fasta":return"sequence";case"pytor":return"cnvpytor";case"qtl":return"qtl";default:return"annotation"}}function zg(i){i.featureType&&(i.type=i.type||i.featureType,i.featureType=void 0),i.type==="junctions"?i.type="junction":i.type==="bed"?(i.type="annotation",i.format=i.format||"bed"):i.type==="annotations"?i.type="annotation":i.type==="alignments"?i.type="alignment":i.type==="bam"?(i.type="alignment",i.format="bam"):i.type==="vcf"?(i.type="variant",i.format="vcf"):i.type==="t2d"?i.type="gwas":i.type==="FusionJuncSpan"&&!i.format?i.format="fusionjuncspan":i.type==="aed"&&(i.type="annotation",i.format=i.format||"aed")}var k3=Object.freeze({__proto__:null,inferTrackType:Lg,translateDeprecatedTypes:zg});function La(i){const e=new Set(["boolean","number","string","symbol"]),t=typeof i;return i!==void 0&&(e.has(t)||i.substring||i.toFixed)}function Le(i,e){var t={oauthToken:i.oauthToken,headers:i.headers,withCredentials:i.withCredentials,filename:i.filename};return Object.assign(t,e)}const Ts=function(i){var e,t;if(i&&i.length>0){e=Number.MAX_VALUE,t=-Number.MAX_VALUE;for(let n of i)Number.isNaN(n.value)||(e=Math.min(e,n.value),t=Math.max(t,n.value));t>0&&(e=Math.min(0,e)),t<0&&(t=0)}else e=0,t=100;return{min:e,max:t}},Hg=function(i,e,t){let n=e.start,r=e.end;if(r===void 0)n-=t/2,r=n+t,r>i?(r=i,n=r-t):n<0&&(n=0,r=t);else if(r-n<t){const s=(r+n)/2;s-t/2<0?(n=0,r=n+t):s+t/2>i?(r=i,n=r-t):(n=s-t/2,r=n+t)}e.start=Math.ceil(n),e.end=Math.floor(r)};/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */const mc=function(i){return typeof i=="number"?i-i===0:typeof i=="string"&&i.trim()!==""?Number.isFinite(+i):!1};async function Bo(i){if(ut(i)&&i.startsWith("https://drive.google.com")){if(yg()===void 0)throw Error("Google drive is referenced, but API key is not defined.  An API key is required for Google Drive access");const e=await E4(i);return e.originalFileName||e.name}else return M2(i)}function wc(i){var e,t,n,r;if(i>1e7)e=1e6,t=" mb";else return i>1e4?(e=1e3,t=" kb",n=i/e,r=Math.floor(n),He(r)+t):He(i)+" bp";return n=i/e,r=Math.floor(n),r.toString()+t}function qi(i){return ut(i)&&i.startsWith("data:")}function Wi(i,e){const t=Fe({class:e});i.appendChild(t)}function Bd(i,e){e.parentNode.insertBefore(i,e)}function Td(i,e){e.parentNode.insertBefore(i,e.nextSibling)}function To(){return window.location.protocol==="https:"||window.location.hostname==="localhost"}function I3(i){const e=window.getComputedStyle(i),t=parseInt(e.marginTop),n=parseInt(e.marginBottom),{top:r,bottom:s,height:a}=i.getBoundingClientRect();return{top:Math.floor(r)-t,bottom:Math.floor(s)+n,height:Math.floor(a)+t+n}}class E3 extends Mg{constructor({parent:e,top:t,left:n,width:r,height:s,defaultColors:a,colorHandler:o}){super({parent:e,top:t,left:n,width:r,height:s,border:"1px solid gray"}),S3(this.container,o,a)}}const S3=(i,e,t)=>{const n=Object.values(Tg);for(let r of n){const s=Fe({class:"igv-ui-color-swatch"});i.appendChild(s),Md(s,r,e)}if(t)for(let r of t){const s=Fe({class:"igv-ui-color-swatch"});i.appendChild(s),Md(s,r,e)}},Md=(i,e,t)=>{i.style.backgroundColor=e,i.addEventListener("mouseenter",n=>i.style.borderColor=e),i.addEventListener("mouseleave",n=>i.style.borderColor="white"),i.addEventListener("click",n=>{n.stopPropagation(),t(e)}),i.addEventListener("touchend",n=>{n.stopPropagation(),t(e)})};class fl{constructor(e,t,n,r){this.parent=e,this.popover=Fe({class:"igv-ui-popover"}),e.appendChild(this.popover),this.popoverHeader=Fe(),this.popover.appendChild(this.popoverHeader);const s=Fe();this.popoverHeader.appendChild(s),n&&(s.textContent=n);const a=Fe();this.popoverHeader.appendChild(a),a.appendChild(Pi("times")),a.addEventListener("click",o=>{o.stopPropagation(),o.preventDefault(),r?r():this.dismiss()}),t===!0&&Ui(this.popover,this.popoverHeader,{minX:0,minY:0}),this.popoverContent=Fe(),this.popover.appendChild(this.popoverContent),this.popover.style.display="none"}configure(e){if(e.length===0)return;const t=bc(e,this.popover);for(const{object:n}of t)this.popoverContent.appendChild(n)}present(e){this.popover.style.display="block";const t=this.popover.parentNode,{x:n,y:r,width:s}=xt(e,t);this.popover.style.top=`${r}px`;const{width:a}=this.popover.getBoundingClientRect(),o=n+a,l=o-s;this.popover.style.left=`${o>s?n-l:n}px`,this.popoverContent.style.maxWidth=`${Math.min(a,s)}px`}presentContentWithEvent(e,t){this.popover.style.display="block",this.popoverContent.innerHTML=t,Rd(e,this.popover,this.popoverContent)}presentMenu(e,t){if(t.length===0)return;this.popover.style.display="block";const n=bc(t,this.popover);for(let r of n)this.popoverContent.appendChild(r.object);Rd(e,this.popover,this.popoverContent)}dismiss(){this.popover.style.display="none"}hide(){this.popover.style.display="none",this.dispose()}dispose(){this.popover&&this.popover.parentNode.removeChild(this.popover);const e=Object.keys(this);for(let t of e)this[t]=void 0}}function Rd(i,e,t){const{x:n,y:r,width:s}=xt(i,e.parentNode);e.style.top=`${r}px`;const{width:a}=e.getBoundingClientRect(),o=n+a,l=o-s;e.style.left=`${o>s?n-l:n}px`,t.style.maxWidth=`${Math.min(a,s)}px`}function bc(i,e){return i.map(function(n,r){let s;if(typeof n=="string")s=Fe(),s.innerHTML=n;else if(typeof n=="Node")s=n;else{if(typeof n.init=="function"&&n.init(),n.type==="checkbox")s=D1("Show all bases",n.value);else if(n.type==="color"){const a=new E3({parent:e.parentElement,width:364,colorHandler:l=>n.click(l)});s=Fe(),typeof n.label=="string"&&(s.innerHTML=n.label);const o=l=>{a.show(),Ct(e),l.preventDefault(),l.stopPropagation()};s.addEventListener("click",o),s.addEventListener("touchend",o),s.addEventListener("mouseup",function(l){l.preventDefault(),l.stopPropagation()})}else s=Fe(),typeof n.label=="string"&&(s.innerHTML=n.label);if(n.click&&n.type!=="color"){let a=function(o){n.click(),Ct(e),o.preventDefault(),o.stopPropagation()};s.addEventListener("click",a),s.addEventListener("touchend",a),s.addEventListener("mouseup",function(o){o.preventDefault(),o.stopPropagation()})}}return{object:s,init:n.init}})}const N3=[["A","T"],["G","C"],["Y","R"],["W","S"],["K","M"],["D","H"],["B","V"]],yi=new Map;for(let i of N3){const e=i[0],t=i[1];yi.set(e,t),yi.set(t,e),yi.set(e.toLowerCase(),t.toLowerCase()),yi.set(t.toLowerCase(),e.toLowerCase())}function Fh(i){return yi.has(i)?yi.get(i):i}function Fc(i){let e="";for(let t of i)e+=yi.has(t)?yi.get(t):t;return e}function Hi(i){let e="",t=i.length;for(;t-- >0;){const n=i[t];e+=yi.has(n)?yi.get(n):n}return e}class Nn{constructor(e,t,n,r){this.name=e,this.order=t,this.bpLength=n,this.altNames=r}getAltName(e){return this.altNames&&this.altNames.has(e)?this.altNames.get(e):this.name}}class ro{constructor(e,t,n,r){this.chr=e,this.start=t,this.end=n,this.features=r}contains(e,t,n){return this.chr===e&&this.start<=t&&this.end>=n}containsRange(e){return this.chr===e.chr&&this.start<=e.start&&this.end>=e.end}get locusString(){return`${this.chr}:${this.start+1}-${this.end}`}}class yh extends ro{constructor(e,t,n,r){super(e,t,n,r)}getSequence(e,t){if(e<this.start||t>this.end)return null;const n=e-this.start,r=t-e;return this.features?this.features.substring(n,n+r):null}hasSequence(e,t){return e>=this.start&&t<=this.end}}const B3=zn,T3=new Set(["fastaURL","indexURL","cytobandURL","indexed"]);var pr;class M3{constructor(e){ct(this,pr);ke(this,"chromosomes",new Map);ke(this,"sequences",new Map);this.fastaURL=e.fastaURL,this.withCredentials=e.withCredentials;const t={};for(let n in e)e.hasOwnProperty(n)&&!T3.has(n)&&(t[n]=e[n]);this.config=t}async init(){return this.loadAll()}getSequenceRecord(e){return this.chromosomes.get(e)}get chromosomeNames(){return Ve(this,pr)||ci(this,pr,Array.from(this.chromosomes.keys())),Ve(this,pr)}getFirstChromosomeName(){return this.chromosomeNames[0]}async getSequence(e,t,n){if(this.sequences.size===0&&await this.loadAll(),!this.sequences.has(e))return;let r=this.sequences.get(e).find(l=>l.contains(t,n));if(!r&&(r=this.sequences.get(e).find(l=>l.overlaps(t,n)),!r))return;t-=r.offset,n-=r.offset;let s="";if(t<0)for(let l=t;l<Math.min(n,0);l++)s+="*";if(n<=0)return s;const a=r.sequence,o=Math.min(n,a.length);return s+a.substring(t,o)}async loadAll(){let e;if(qi(this.fastaURL)){let h=nn(this.fastaURL);e="";for(let f of h)e+=String.fromCharCode(f)}else e=await Se.load(this.fastaURL,Le(this.config));const t=new Set,n=B3(e),r=n.length;let s=0,a=0,o,l={};for(;s<r;){if(o=n[s++].trim(),!(o.startsWith("#")||o.length===0))if(o.startsWith(">")){l.seq&&c.call(this,l,a++);const h=o.substr(1).split(/\s+/),f=h[0].split(":");if(l.chr=f[0],l.seq="",l.offset=0,f.length>1&&f[1].indexOf("-")>0){const d=f[1].split("-");d.length===2&&/^[0-9]+$/.test(d[0])&&/^[0-9]+$/.test(d[1]);const u=Number.parseInt(d[0]);if(Number.parseInt(d[1])>u&&(l.offset=u-1),h.length>1&&h[1].startsWith("@len="))try{l.length=parseInt(h[1].trim().substring(5))}catch{l.length=void 0,console.error(`Error parsing sequence length for ${o}`)}else l.length=void 0}}else l.seq+=o;l.seq&&c.call(this,l,a)}function c(h,f){const d=h.length||h.offset+h.seq.length;if(!t.has(h.chr))this.sequences.set(h.chr,[]),this.chromosomes.set(h.chr,new Nn(h.chr,f,d)),t.add(h.chr);else{const u=this.chromosomes.get(h.chr);u.bpLength=Math.max(u.bpLength,d)}this.sequences.get(h.chr).push(new R3(h.offset,h.seq))}}getSequenceInterval(e,t,n){const r=this.sequences.get(e);if(r)for(let s of r){const a=s.sequence,o=s.offset,l=o+a.length;if(o<=t&&l>=n)return new yh(e,o,l,a)}}}pr=new WeakMap;class R3{constructor(e,t){this.offset=e,this.sequence=t}contains(e,t){return this.offset<=e&&this.end>=t}overlaps(e,t){return this.offset<t&&this.end>e}get end(){return this.offset+this.sequence.length}}const D3=zn,L3=new Set(["fastaURL","indexURL","compressedIndexURL","cytobandURL","indexed"]);var gr;class z3{constructor(e){ct(this,gr);ke(this,"chromosomes",new Map);this.file=e.fastaURL,this.indexFile=e.indexURL,this.compressedIndexFile=e.compressedIndexURL,this.withCredentials=e.withCredentials;const t={};for(let n in e)e.hasOwnProperty(n)&&!L3.has(n)&&(t[n]=e[n]);this.config=t}getSequenceRecord(e){return this.chromosomes.get(e)}async init(){return this.getIndex()}get chromosomeNames(){return Ve(this,gr)||ci(this,gr,Array.from(this.chromosomes.keys())),Ve(this,gr)}getFirstChromosomeName(){return this.chromosomeNames[0]}async getIndex(){if(this.index)return this.index;{const e=await Se.load(this.indexFile,Le(this.config)),t=D3(e),n=t.length;let r=0,s=0;for(this.index={};r<n;){const a=t[r++].split("	");if(a.length===5){const l=a[0],c=parseInt(a[1]),h=parseInt(a[2]),f=parseInt(a[3]),d=parseInt(a[4]),u={size:c,position:h,basesPerLine:f,bytesPerLine:d};this.index[l]=u,this.chromosomes.set(l,new Nn(l,s++,c))}}return this.index}}async getCompressedIndex(){if(this.compressedIndex)return this.compressedIndex;if(!this.compressedIndexFile)return this.compressedIndex=[],this.compressedIndex;this.compressedIndex=[];const n=await Se.loadArrayBuffer(this.compressedIndexFile,Le(this.config)),r=n.byteLength;if(r<8)return console.log("Cannot parse GZI index file: length ("+r+" bytes) is insufficient to determine content of index."),this.compressedIndex;const s=n.slice(0,8),a=Number(new DataView(s).getBigUint64(0,!0)),o=8+a*2*8;if(r!=o)return console.log("Incorrect file size of reference genome index. Expected : "+o+". Received : "+r),this.compressedIndex;this.compressedIndex.push([0,0]);for(let l=0;l<a;l++){const c=8+l*2*8,h=8+l*2*8+2*8,f=n.slice(c,h),d=new DataView(f),u=Number(d.getBigUint64(0,!0)),p=Number(d.getBigUint64(8,!0));this.compressedIndex.push([u,p])}return this.compressedIndex}async getRelevantCompressedBlockNumbers(e,t){if(e<0||t<0||t<e)return console.log("Incompatible query positions for reference-genome. Start:"+e+" | End:"+t),[];await this.getCompressedIndex();let r=[];const s=0,a=this.compressedIndex.length-1;if(this.compressedIndex.length==0)return console.log("Compressed index does not contain any content"),[];if(e>this.compressedIndex[a][1])return[a];let o=s,l=a,c=Math.floor(this.compressedIndex.length/2),h=this.compressedIndex.length+1,f=!1;for(let p=0;p<h;p++){const m=this.compressedIndex[c][1],F=c<this.compressedIndex.length-1?this.compressedIndex[c+1][1]:1/0;if(m<=e&&F>e){f=!0;break}else m<e?o=c+1:l=c-1;c=Math.ceil((l-o)/2)+o}if(!f)return console.log("No blocks within compressed index found that correspond with query positions "+e+","+t),console.log(this.compressedIndex),[];r.push(c);for(let p=c+1;p<this.compressedIndex.length&&(r.push(p),!(this.compressedIndex[p][1]>=t));p++);const d=r[r.length-1],u=this.compressedIndex.length-1;return d===u&&this.compressedIndex[d][1]<t&&r.push(-1),r}async loadAndUncompressBlocks(e,t){if(await this.getCompressedIndex(),e.length==0)return"";let s=Array(e.length-1);for(let c=0;c<e.length-1;c++){const h=e[c],d=this.compressedIndex[h][0],u=e[c+1];let p=[];if(u!=-1){const w=this.compressedIndex[u][0]-d;p=await Se.loadArrayBuffer(this.file,Le(this.config,{range:{start:d,size:w}}))}else p=await Se.loadArrayBuffer(this.file,Le(this.config,{range:{start:d}}));const m=await ki(p);s[c]=m}let a="";for(let c=0;c<s.length;c++)for(let h=0;h<s[c].length;h++){const f=String.fromCharCode(s[c][h]);a=a+f}const o=this.compressedIndex[e[0]],l=t-o[1];return a=a.substring(l),a}async readSequence(e,t,n){await this.getIndex(),await this.getCompressedIndex();const r=this.index[e];if(!r)return console.log("No index entry for chr: "+e),this.index[e]=null,null;const s=Math.max(0,t),a=Math.min(r.size,n),o=r.bytesPerLine,l=r.basesPerLine,c=r.position,h=o-l,f=Math.floor(s/l),d=Math.floor(a/l),u=f*l,p=s-u,m=c+f*o+p,F=d*l,g=a-F,w=c+d*o+g-1,b=w-m+1;if(b<=0)return console.error("No sequence for "+e+":"+t+"-"+n),null;let y;if(!this.compressedIndexFile)y=await Se.load(this.file,Le(this.config,{range:{start:m,size:b}}));else{let k=await this.getRelevantCompressedBlockNumbers(m,w);if(k.length===0)return console.log("No blocks in the compressed index that correspond with the requested byte positions ("+m+","+w+")"),null;y=await this.loadAndUncompressBlocks(k,m)}if(!y)return null;let v,T="",A=0,C=y.length;for(p>0&&(v=Math.min(a-s,l-p),T+=y.substr(A,v),A+=v+h);A<C;)v=Math.min(l,C-A),T+=y.substr(A,v),A+=v+h;return T}}gr=new WeakMap;const Pg=zn;var Hs;class H3{constructor(e){ct(this,Hs);ke(this,"chromosomes",new Map);this.url=e}async init(){return this.loadAll()}getSequenceRecord(e){return this.chromosomes.get(e)}get chromosomeNames(){Ve(this,Hs)||ci(this,Hs,Array.from(this.chromosomes.keys()))}async getSequence(e,t,n){return null}async loadAll(){let e;if(qi(this.url)){let r=nn(this.fastaURL);e="";for(let s of r)e+=String.fromCharCode(s)}else e=await Se.load(this.url,{});const t=Pg(e);let n=0;for(let r of t){const s=r.split("	");if(s.length>1){const a=Number.parseInt(s[1]),o=new Nn(s[0],n++,a);this.chromosomes.set(s[0],o)}}}}Hs=new WeakMap;async function P3(i){const e=new Map;let t;if(qi(i)){let s=nn(i);t="";for(let a of s)t+=String.fromCharCode(a)}else t=await Se.load(i,{});const n=Pg(t);let r=0;for(let s of n){const a=s.split("	");if(a.length>1){const o=Number.parseInt(a[1]);e.set(a[0],new Nn(a[0],r++,o))}}return e}class bt{constructor(e,t=!0){this.littleEndian=t,this.position=0,this.view=e,this.length=e.byteLength}dumpBytes(e=100){const t=this.position,n=[];for(let r=0;r<=e;r++)n.push(this.getByte());console.log(n.join(" ")),this.setPosition(t)}setPosition(e){this.position=e}available(){return this.length-this.position}remLength(){return this.length-this.position}hasNext(){return this.position<this.length-1}getByte(){const e=this.view.getUint8(this.position,this.littleEndian);return this.position++,e}getShort(){const e=this.view.getInt16(this.position,this.littleEndian);return this.position+=2,e}getUShort(){const e=this.view.getUint16(this.position,this.littleEndian);return this.position+=2,e}getInt(){const e=this.view.getInt32(this.position,this.littleEndian);return this.position+=4,e}getUInt(){const e=this.view.getUint32(this.position,this.littleEndian);return this.position+=4,e}getLong(){var e=[];e[0]=this.view.getUint8(this.position),e[1]=this.view.getUint8(this.position+1),e[2]=this.view.getUint8(this.position+2),e[3]=this.view.getUint8(this.position+3),e[4]=this.view.getUint8(this.position+4),e[5]=this.view.getUint8(this.position+5),e[6]=this.view.getUint8(this.position+6),e[7]=this.view.getUint8(this.position+7);let t=0;if(this.littleEndian)for(let n=e.length-1;n>=0;n--)t=t*256+e[n];else for(let n=0;n<e.length;n++)t=t*256+e[n];return this.position+=8,t}getString(e){let t="",n;for(;(n=this.view.getUint8(this.position++))!==0&&(t+=String.fromCharCode(n),!(e&&t.length===e)););return t}getFixedLengthString(e){let t="";for(let n=0;n<e;n++){const r=this.view.getUint8(this.position++);r>0&&(t+=String.fromCharCode(r))}return t}getFloat(){var e=this.view.getFloat32(this.position,this.littleEndian);return this.position+=4,e}getDouble(){var e=this.view.getFloat64(this.position,this.littleEndian);return this.position+=8,e}skip(e){return this.position+=e,this.position}getVPointer(){var e=this.position,t=this.view.getUint8(e+1)<<8|this.view.getUint8(e),n=(this.view.getUint8(e+6)&255)*4294967296,r=(this.view.getUint8(e+5)&255)*16777216,s=(this.view.getUint8(e+4)&255)*65536,a=(this.view.getUint8(e+3)&255)*256,o=this.view.getUint8(e+2)&255,l=n+r+s+a+o;return this.position+=8,new O3(l,t)}}class O3{constructor(e,t){this.block=e,this.offset=t}isLessThan(e){return this.block<e.block||this.block===e.block&&this.offset<e.offset}isGreaterThan(e){return this.block>e.block||this.block===e.block&&this.offset>e.offset}isEqualTo(e){return this.block===e.block&&this.offset===e.offset}print(){return""+this.block+":"+this.offset}}var An,os;const rr=class rr{constructor(e,t,n){ct(this,An);ke(this,"littleEndian",!0);ke(this,"nodeCache",new Map);this.path=e,this.config=t,this.startOffset=n}static async loadBpTree(e,t,n){return new rr(e,t,n).init()}async init(){const e=await Ke(this,An,os).call(this,this.startOffset,32);let t=e.getInt();if(t!==rr.magic&&(e.setPosition(0),this.littleEndian=!this.littleEndian,e.littleEndian=this.littleEndian,t=e.getInt(),t!==rr.magic))throw Error(`Bad magic number ${t}`);const n=e.getInt(),r=e.getInt(),s=e.getInt(),a=e.getLong(),o=e.getLong(),l=this.startOffset+32;return this.header={magic:t,blockSize:n,keySize:r,valSize:s,itemCount:a,reserved:o,nodeOffset:l},this}async search(e){this.header||await this.init();const{keySize:t,valSize:n}=this.header;if(!(n===16||n===8))throw Error(`Unexpected valSize ${n}`);const r=async a=>{if(this.nodeCache.has(a))return this.nodeCache.get(a);{let o=await Ke(this,An,os).call(this,a,4);const l=o.getByte();o.getByte();const c=o.getUShort(),h=[];if(l===1){const d=c*(t+n);o=await Ke(this,An,os).call(this,a+4,d);for(let u=0;u<c;u++){const p=o.getFixedLengthString(t),m=o.getLong();let F;if(n===16){const g=o.getInt();o.getInt(),F={offset:m,length:g}}else F={offset:m};h.push({key:p,value:F})}}else{const d=c*(t+8);o=await Ke(this,An,os).call(this,a+4,d);for(let u=0;u<c;u++){const p=o.getFixedLengthString(t),m=o.getLong();h.push({key:p,offset:m})}}const f={type:l,count:c,items:h};return this.nodeCache.set(a,f),f}},s=async a=>{const o=await r(a);if(o.type===1){for(let l of o.items)if(e===l.key)return l.value}else{let l=o.items[0].offset;for(let c=1;c<o.items.length;c++){const h=o.items[c].key;if(e.localeCompare(h)<0)break;l=o.items[c].offset}return s(l)}};return s(this.header.nodeOffset)}};An=new WeakSet,os=async function(e,t){const n=await Se.loadArrayBuffer(this.path,Le(this.config,{range:{start:e,size:t}}));return new bt(new DataView(n),this.littleEndian)},ke(rr,"magic",2026540177);let so=rr;const ha=["T","C","A","G"],Ah=[];for(let i=0;i<256;i++)Ah.push(ha[i>>6&3]+ha[i>>4&3]+ha[i>>2&3]+ha[i&3]);const U3=Ah.map(i=>i.toLowerCase());class q3{constructor(e){ke(this,"littleEndian");ke(this,"metaIndex",new Map);this.url=e.twoBitURL||e.fastaURL,this.config=e,e.twoBitBptURL&&(this.bptURL=e.twoBitBptURL)}async init(){if(this.bptURL)this.index=await so.loadBpTree(this.bptURL,this.config,0);else{const e=await this._readIndex();this.index={search:async t=>e.has(t)?{offset:e.get(t)}:void 0}}}async readSequence(e,t,n){this.index||await this.init();const r=await this.getSequenceRecord(e);if(!r)return null;if(t<0)throw new TypeError("regionStart cannot be less than 0");(n===void 0||n>r.dnaSize)&&(n=r.dnaSize);const s=this._getOverlappingBlocks(t,n,r.nBlocks),a=this._getOverlappingBlocks(t,n,r.maskBlocks),o=Math.floor(t/4),l=r.packedPos+o,c=Math.floor(n/4)-o+1,h=await Se.loadArrayBuffer(this.url,{range:{start:l,size:c}}),f=new Uint8Array(h);let d="";for(let u=t;u<n;u+=1){for(;a.length&&a[0].end<=u;)a.shift();const p=a[0]&&a[0].start<=u&&a[0].end>u;if(s[0]&&u>=s[0].start&&u<s[0].end){const m=s.shift();for(;u<m.end&&u<n;)d+="N",u++;u--}else{const m=Math.floor(u/4)-o,F=u%4,g=f[m];d+=p?U3[g][F]:Ah[g][F]}}return d}async _readIndex(){const e=new Map,t={start:0,size:64};let n=await Se.loadArrayBuffer(this.url,{range:t}),r=new DataView(n),s=0;const a=r.getUint32(s,!0),o=r.getUint32(s,!1);s+=4;const l=440477507;if(a===l)this.littleEndian=!0;else if(o===l)this.littleEndian=!1;else throw Error(`Bad magic number ${l}`);this.version=r.getUint32(s,this.littleEndian),s+=4,this.sequenceCount=r.getUint32(s,this.littleEndian),s+=4,this.reserved=r.getUint32(s,this.littleEndian),s+=4;let c,h,f=20;for(let d=0;d<this.sequenceCount;d++){(!h||h.available()<1)&&(c=(this.sequenceCount-d)*f,h=await this._loadBinaryBuffer(s,c));const u=h.getByte();s+=1,h.available()<u+5&&(c=(this.sequenceCount-d)*f+100,h=await this._loadBinaryBuffer(s,c));const p=h.getString(u),m=h.getUInt();s+=u+4,e.set(p,m),f=Math.floor(f*(d/(d+1))+p.length/(d+1))}return e}async getSequenceRecord(e){if(!this.metaIndex.has(e)){if(!this.index)throw Error("TwobitSequence object must be initialized before accessing sequence");let t=await this.index.search(e);if(!t)return;let n=t.offset,r=8,s=await this._loadBinaryBuffer(n,r);const a=s.getUInt(),o=s.getUInt();n+=r,r=o*8+4,s=await this._loadBinaryBuffer(n,r);const l=[];for(let w=0;w<o;w++)l.push(s.getUInt());const c=[];for(let w=0;w<o;w++)c.push(s.getUInt());const h=s.getUInt();n+=r,r=h*8+4,s=await this._loadBinaryBuffer(n,r);const f=[];for(let w=0;w<h;w++)f.push(s.getUInt());const d=[];for(let w=0;w<h;w++)d.push(s.getUInt());const u=[];for(let w=0;w<o;w++)u.push(new Dd(l[w],c[w]));const p=[];for(let w=0;w<h;w++)p.push(new Dd(f[w],d[w]));if(s.getUInt()!=0)throw Error("Bad 2-bit file");n+=r;const g={dnaSize:a,nBlocks:u,maskBlocks:p,packedPos:n,bpLength:a};this.metaIndex.set(e,g)}return this.metaIndex.get(e)}_getOverlappingBlocks(e,t,n){const r=[];for(let s of n){if(s.start>t)break;if(s.end<e)continue;r.push(s)}return r}async _loadBinaryBuffer(e,t){const n=await Se.loadArrayBuffer(this.url,{range:{start:e,size:t}});return new bt(new DataView(n),this.littleEndian)}}class Dd{constructor(e,t){this.start=e,this.size=t}get end(){return this.start+this.size}}var mr,vn,ti,Fo,Mn,Og,Ug,V3;const sr=class sr{constructor(e,t){ct(this,Mn);ct(this,vn);ct(this,ti,[]);ct(this,Fo,10);this.sequenceReader=e,this.browser=t}get chromosomes(){return this.sequenceReader.chromosomes}async getSequenceRecord(e){return this.sequenceReader.getSequenceRecord(e)}async getSequence(e,t,n){let r=Ve(this,ti).find(s=>s.contains(e,t,n));if(r||(r=await Ke(this,Mn,Ug).call(this,e,t,n),Ke(this,Mn,Og).call(this,r),Ve(this,ti).push(r)),r){const s=t-r.start,a=n-t;return r.features?r.features.substring(s,s+a):null}else return}getSequenceInterval(e,t,n){return Ve(this,ti).find(r=>r.contains(e,t,n))}async init(){return this.sequenceReader.init()}get chromosomeNames(){return this.sequenceReader.chromosomeNames}getFirstChromosomeName(){return typeof this.sequenceReader.getFirstChromosomeName=="function"?this.sequenceReader.getFirstChromosomeName():void 0}};mr=new WeakMap,vn=new WeakMap,ti=new WeakMap,Fo=new WeakMap,Mn=new WeakSet,Og=function(e){ci(this,ti,Ve(this,ti).filter(t=>!e.contains(t))),Ve(this,ti).length===Ve(this,Fo)&&Ve(this,ti).shift(),this.browser&&this.browser.referenceFrameList.length<100&&ci(this,ti,Ve(this,ti).filter(t=>this.browser.referenceFrameList.find(r=>r.overlaps(t))!==void 0))},Ug=async function(e,t,n){let r=t,s=n;if(n-t<Ve(sr,mr)){const o=n-t,l=Math.round(t+o/2);r=Math.max(0,l-Ve(sr,mr)/2),s=r+Ve(sr,mr)}const a=new yh(e,r,s);if(Ve(this,vn)&&Ve(this,vn)[0].contains(e,t,n))return Ve(this,vn)[1];{const o=new Promise(async(l,c)=>{a.features=await this.sequenceReader.readSequence(e,r,s),l(a)});return ci(this,vn,[a,o]),o}},V3=function(e){this.browser.referenceFrameList},ct(sr,mr,1e5);let ao=sr;async function qg(i,e){let t;return i.format==="chromsizes"?t=new H3(i.fastaURL||i.url):i.format==="2bit"||i.twoBitURL?t=new ao(new q3(i),e):qi(i.fastaURL)||!i.indexURL?t=new M3(i):i.format==="gbk"||i.gbkURL||(t=new ao(new z3(i),e)),await t.init(),t}const Q3={A:"rgb(  0, 200,   0)",C:"rgb(  0,0,200)",T:"rgb(255,0,0)",G:"rgb(209,113,  5)",N:"rgb(80,80,80)"};function dl(i,e){if(i.length<6){console.log("Skipping line: "+i.join(" "));return}var t={chr1:i[0],start1:Number.parseInt(i[1]),end1:Number.parseInt(i[2]),chr2:i[3],start2:Number.parseInt(i[4]),end2:Number.parseInt(i[5])};if(isNaN(t.start1)||isNaN(t.end1)||isNaN(t.start2)||isNaN(t.end2))return;e&&e.hiccups===void 0&&(e.hiccups=e.columnNames?Vg(e.columnNames):!1);const n=e&&e.hiccups,r=n?6:10;if(n||(i.length>6&&i[6]!=="."&&(t.name=i[6]),i.length>7&&i[7]!=="."&&(t.score=Number(i[7])),i.length>8&&i[8]!=="."&&(t.strand1=i[8]),i.length>9&&i[9]!=="."&&(t.strand2=i[9])),e){const s=e.colorColumn;s&&s<i.length&&(t.color=qe.createColorString(i[s]));const a=e.thicknessColumn;a&&a<i.length&&(t.thickness=i[a]),i.length>r&&e.columnNames&&e.columnNames.length===i.length&&(t.extras=i.slice(r))}return t.chr1===t.chr2&&(t.chr=t.chr1,t.start=Math.min(t.start1,t.start2),t.end=Math.max(t.end1,t.end2)),t}function G3(i){if(i.length==0)return;const e=i[0];if(e.score===void 0&&e.name!==void 0){for(let n of i)if(!(mc(n.name)||n.name==="."))return;for(let n of i)n.score=Number(n.name),delete n.name}const t=i.filter(n=>n.chr1!==n.chr2);for(let n of t){const r=Object.assign({},n);r.dup=!0,i.push(r),n.chr=n.chr1,n.start=n.start1,n.end=n.end1,r.chr=r.chr2,r.start=r.start2,r.end=r.end2}}function $3(i,e){if(!(i.length<8))return{chr:i[0],start:Number.parseInt(i[1]),end:Number.parseInt(i[2]),color:qe.createColorString(i[6]),value:Number(i[7])}}function Vg(i){return i&&(i.includes("fdrDonut")||i.includes("fdr_donut"))}function j3(i,e){if(i.length<6){console.log("Skipping line: "+i.join(" "));return}var t={chr:i[0],start:Number.parseInt(i[1]),end:Number.parseInt(i[2]),chr1:i[8],start1:Number.parseInt(i[9]),end1:Number.parseInt(i[10]),chr2:i[13],start2:Number.parseInt(i[14]),end2:Number.parseInt(i[15]),name:i[3],score:Number(i[4]),value:Number(i[5]),color:i[7]==="."?void 0:i[7]==="0"?"rgb(0,0,0)":i[7]};return t}class Qg{constructor(e){this.message=e}}const Ld=new Map([["%09","	"],["%0A",`
`],["%0D","\r"],["%25","%"],["%3B",";"],["%3D","="],["%26","&"],["%2C",","]]);function yc(i){if(!i.includes("%"))return i;let e="";for(let t=0;t<i.length;t++)if(i.charCodeAt(t)===37&&t<i.length-2){const n=i.substring(t,t+3);Ld.has(n)?e+=Ld.get(n):e+=n,t+=2}else e+=i.charAt(t);return e}function Ms(i,e="="){const t=e==="=";var n=[];for(let r of i.split(";")){r=r.trim();const s=r.indexOf(e);if(s>0&&s<r.length-1){let a=yc(r.substring(0,s).trim()),o=yc(r.substring(s+1).trim());t||(a=zd(a),o=zd(o)),n.push([a,o])}}return n}function zd(i){return i.startsWith('"')&&i.endsWith('"')&&(i=i.substr(1,i.length-2)),i}function oo(i,e,t=Number.MAX_SAFE_INTEGER){if(i.length<3)return;e&&e.gffTags;const n=i[0],r=parseInt(i[1]),s=i.length>2?parseInt(i[2]):r+1;if(isNaN(r)||isNaN(s))return new Qg("Unparsable bed record.");const a=new i5({chr:n,start:r,end:s,score:1e3});let o=3;try{if(i.length>3&&o++<t){if(i[3].indexOf(";")>0&&i[3].indexOf("=")>0){const l=Ms(i[3],"=");a.attributes={};for(let c of l)a.attributes[c[0]]=c[1],e.nameField!=null&&c[0]===e.nameField&&(a.name=c[1])}a.name||(a.name=i[3]==="."?"":i[3])}if(i.length>4&&o++<t&&(a.score=i[4]==="."?0:Number(i[4]),isNaN(a.score))||i.length>5&&o++<t&&(a.strand=i[5],!(a.strand==="."||a.strand==="+"||a.strand==="-"))||i.length>6&&o++<t&&(a.cdStart=parseInt(i[6]),isNaN(a.cdStart))||i.length>7&&o++<t&&(a.cdEnd=parseInt(i[7]),isNaN(a.cdEnd)))return a;if(i.length>8&&o++<t&&i[8]!=="."&&i[8]!=="0"&&(a.color=qe.createColorString(i[8])),i.length>11&&o++<t){const l=parseInt(i[9]);if(l>1e3)return a;const c=i[10].replace(/,$/,"").split(","),h=i[11].replace(/,$/,"").split(",");if(!(c.length===h.length&&l===c.length))return a;const f=[];for(let d=0;d<l;d++){const u=r+parseInt(h[d]),p=u+parseInt(c[d]);f.push({start:u,end:p})}f.length>0&&(Mo(f,a.cdStart,a.cdEnd),a.exons=f)}if(e){let l=e.thicknessColumn,c=e.colorColumn;c&&c<i.length&&(a.color=qe.createColorString(i[c])),l&&l<i.length&&(a.thickness=i[l])}}catch{}return a}function W3(i,e){const t=oo(i,e);return t&&i.length>14&&(t.signal=Number(i[12]),t.pValue=Number(i[13]),t.qValue=Number(i[14])),t}function K3(i,e){const t=oo(i,e,9);if(t){const n=["Coverage","% Showing Methylation","N-mod","N-canonical","N-other mod","N-delete","N-fail","N-dff","N-nocall"];for(let r=9;r<i.length;r++){const s=n[r-9];t[s]=i[r]}}return t}function Y3(i,e){return i.length<=15?void 0:{swScore:Number.parseInt(i[1]),milliDiv:Number.parseInt(i[2]),milliDel:Number.parseInt(i[3]),milliIns:Number.parseInt(i[4]),chr:i[5],start:Number.parseInt(i[6]),end:Number.parseInt(i[7]),strand:i[9],repName:i[10],repClass:i[11],repFamily:i[12],repStart:Number.parseInt(i[13]),repEnd:Number.parseInt(i[14]),repLeft:Number.parseInt(i[15])}}function Hd(i,e){var t=e.shift===void 0?0:1;if(i.length<=9+t)return;const n=parseInt(i[5+t]),r=parseInt(i[6+t]);var s={name:i[0+t],chr:i[1+t],strand:i[2+t],start:parseInt(i[3+t]),end:parseInt(i[4+t]),cdStart:n,cdEnd:r,id:i[0+t]};const a=vh(parseInt(i[7+t]),i[8+t],i[9+t]);return Mo(a,n,r),s.exons=a,s}function Pd(i,e){var t=e.shift===void 0?0:1;if(i.length<=11+t)return;const n=parseInt(i[5+t]),r=parseInt(i[6+t]),s={name:i[11+t],chr:i[1+t],strand:i[2+t],start:parseInt(i[3+t]),end:parseInt(i[4+t]),cdStart:n,cdEnd:r,id:i[0+t]},a=vh(parseInt(i[7+t]),i[8+t],i[9+t],i[14+t]);return Mo(a,n,r),s.exons=a,s}function Z3(i,e){var t=e.shift===void 0?0:1;if(i.length<=10+t)return;const n=parseInt(i[6+t]),r=parseInt(i[7+t]);var s={name:i[0+t],id:i[1+t],chr:i[2+t],strand:i[3+t],start:parseInt(i[4+t]),end:parseInt(i[5+t]),cdStart:n,cdEnd:r};const a=vh(parseInt(i[8+t]),i[9+t],i[10+t]);return Mo(a,n,r),s.exons=a,s}function X3(i,e){if(i.length<21)return;const t=i[13],n=parseInt(i[15]),r=parseInt(i[16]),s=i[8].charAt(0),a=parseInt(i[17]),o=[],l=i[20].replace(/,$/,"").split(","),c=i[18].replace(/,$/,"").split(",");for(let h=0;h<a;h++){const f=parseInt(l[h]),d=f+parseInt(c[h]);o.push({start:f,end:d})}return new n5({chr:t,start:n,end:r,strand:s,exons:o,tokens:i})}function vh(i,e,t,n){const r=e.replace(/,$/,"").split(","),s=t.replace(/,$/,"").split(","),a=n?n.replace(/,$/,"").split(","):void 0,o=[];for(let l=0;l<i;l++){const c=parseInt(r[l]),h=parseInt(s[l]),f={start:c,end:h};if(a){const d=parseInt(a[l]);d!=-1&&(f.readingFrame=d)}o.push(f)}return o}function Mo(i,e,t){for(let n of i){const r=n.end,s=n.start;r<e||s>t?n.utr=!0:(e>=s&&e<=r&&(n.cdStart=e),t>=s&&t<=r&&(n.cdEnd=t))}}function Gg(i,e){var t,n,r,s,a,o,l,c,h,f;if(t=i.length,!(t<9))return n=i[0],r=parseInt(i[1]),s=parseInt(i[2]),o=i[3],l=Number(i[4]),a=i[5].trim(),h=Number(i[6]),f=Number(i[7]),c=Number(i[8]),l===0&&(l=h),{chr:n,start:r,end:s,name:o,score:l,strand:a,signal:h,pValue:f,qValue:c}}function J3(i,e){const t=Gg(i);return i.length>9&&(t.peak=Number(i[9])),t}function $g(i,e){var t,n,r,s;if(i.length<=3)return;t=i[0],n=parseInt(i[1]),r=parseInt(i[2]),s=Number(i[3]);const a={chr:t,start:n,end:r,value:s};if(e){let o=e.colorColumn;o&&o<i.length&&(a.color=qe.createColorString(i[o]))}return a}function e5(i,e){const t=e.wig;if(t&&t.format==="fixedStep"){const n=t.index*t.step+t.start,r=n+t.span,s=Number(i[0]);return++t.index,isNaN(s)?null:{chr:t.chrom,start:n,end:r,value:s}}else if(t&&t.format==="variableStep"){if(i.length<2)return null;const n=parseInt(i[0],10)-1,r=n+t.span,s=Number(i[1]);return isNaN(s)?null:{chr:t.chrom,start:n,end:r,value:s}}else return $g(i)}function t5(i,e){if(i.length<6)return;const t=["bin","chr","start","end","name","score","strand","refNCBI","refUCSC","observed","molType","class","valid","avHet","avHetSE","func","locType","weight","exceptions","submitterCount","submitters","alleleFreqCount","alleles","alleleNs","alleleFreqs","bitfields"],n={chr:i[1],start:Number.parseInt(i[2]),end:Number.parseInt(i[3]),name:i[4],score:Number.parseInt(i[5])},r=Math.min(i.length,t.length);for(let s=6;s<r;s++)n[t[s]]=i[s];return n}class i5{constructor(e){Object.assign(this,e)}getAttributeValue(e){if(this.hasOwnProperty(e))return this[e];if(this.attributes)return this.attributes[e]}}class n5{constructor(e){Object.assign(this,e)}get score(){const e=this.tokens,t=parseInt(e[0]),n=parseInt(e[2]),r=parseInt(e[1]),s=parseInt(e[4]),a=parseInt(e[6]),o=parseInt(e[10]);return Math.floor(1e3*(t+n-r-s-a)/o)}get matches(){return this.tokens[0]}get misMatches(){return this.tokens[1]}get repMatches(){return this.tokens[2]}get nCount(){return this.tokens[3]}get qNumInsert(){return this.tokens[4]}get qBaseInsert(){return this.tokens[5]}get tNumInsert(){return this.tokens[6]}get tBaseInsert(){return this.tokens[7]}popupData(){return[{name:"chr",value:this.chr},{name:"start",value:this.start+1},{name:"end",value:this.end},{name:"strand",value:this.strand},{name:"score",value:this.score},{name:"match",value:this.matches},{name:"mis-match",value:this.misMatches},{name:"rep. match",value:this.repMatches},{name:"N's",value:this.nCount},{name:"Q gap count",value:this.qNumInsert},{name:"Q gap bases",value:this.qBaseInsert},{name:"T gap count",value:this.tNumInsert},{name:"T gap bases",value:this.tBaseInsert}]}}const r5=new Set(["transcript","primary_transcript","processed_transcript","mRNA","mrna","lnc_RNA","miRNA","ncRNA","rRNA","scRNA","snRNA","snoRNA","tRNA"]),jg=new Set(["CDS","cds"]),Wg=new Set(["start_codon","stop_codon"]),Kg=new Set(["5UTR","3UTR","UTR","five_prime_UTR","three_prime_UTR","3'-UTR","5'-UTR"]),Yg=new Set(["exon","coding-exon"]),Zg=new Set;for(let i of[jg,Wg,Kg,Yg])for(let e of i)Zg.add(e);function s5(i){return Yg.has(i)}function Xg(i){return i.includes("intron")}function a5(i){return jg.has(i)||Wg.has(i)}function o5(i){return Kg.has(i)}function Od(i){return r5.has(i)||i.endsWith("RNA")||i.endsWith("transcript")}function Ud(i){return Zg.has(i)||i.endsWith("RNA")||Xg(i)}const l5=new Set(["id","parent","name"]);class _h{constructor(e){Object.assign(this,e),e.phase!==void 0&&e.phase!=="."&&(this.readingFrame=(3-parseInt(e.phase))%3)}popupData(e){const t=this.geneObject?this.geneObject.popupData():[];if(this.geneObject&&t.push("<hr/>"),this.name&&t.push({name:"Name",value:this.name}),t.push({name:"Type",value:this.type}),t.push({name:"Source",value:this.source}),this.score!==void 0&&t.push({name:"Score",value:this.score}),t.push({name:"Phase",value:this.phase}),this.attributeString){const n=Ms(this.attributeString,this.delim);for(let[r,s]of n)s!==void 0&&s.length>0&&!l5.has(r.toLowerCase())&&t.push({name:r+":",value:s})}return t.push({name:"Location",value:`${this.chr}:${He(this.start+1)}-${He(this.end)}`}),t}getAttributeValue(e){if(this.hasOwnProperty(e))return this[e];if(this._attributeCache||(this._attributeCache=new Map),this._attributeCache.has(e))return this._attributeCache.get(e);{const t=Ms(this.attributeString,this.delim);let n;for(let[r,s]of t)if(r===e){n=s;break}return this._attributeCache.set(e,n),n}}}class qd extends _h{constructor(e){super(e),this.exons=[],this.parts=[]}addExon(e){this.exons.push(e),this.start=Math.min(this.start,e.start),this.end=Math.max(this.end,e.end)}addPart(e){this.parts.push(e)}assembleParts(){if(this.parts.length===0)return;this.parts.sort(function(r,s){return r.start-s.start});let e=this.parts[0].start,t=this.parts[0].end;for(let r=1;r<this.parts.length;r++){const s=this.parts[r];Xg(s.type)||(s.start<=t?t=Math.max(t,s.end):(this.findExonContaining({start:e,end:t})||this.exons.push({start:e,end:t,psuedo:!0}),e=s.start,t=s.end))}this.findExonContaining({start:e,end:t})||(this.exons.push({start:e,end:t,psuedo:!0}),this.start=Math.min(this.start,e),this.end=Math.max(this.end,t));for(let r of this.parts){const s=r.type;a5(s)?this.addCDS(r):o5(s)&&this.addUTR(r)}}findExonContaining({start:e,end:t}){for(let n of this.exons)if(n.end>=t&&n.start<=e)return n}addCDS(e){let t;const n=this.exons;for(let r of n)if(r.start<=e.start&&r.end>=e.end){t=r;break}t?(t.cdStart=t.cdStart?Math.min(e.start,t.cdStart):e.start,t.cdEnd=t.cdEnd?Math.max(e.end,t.cdEnd):e.end,t.readingFrame=e.readingFrame):console.error("No exon found spanning "+e.start+"-"+e.end),this.cdStart=this.cdStart?Math.min(e.start,this.cdStart):e.start,this.cdEnd=this.cdEnd?Math.max(e.end,this.cdEnd):e.end}addUTR(e){let t;const n=this.exons;for(let r=0;r<n.length;r++)if(n[r].start<=e.start&&n[r].end>=e.end){t=n[r];break}t?e.start===t.start&&e.end===t.end?t.utr=!0:(e.end<t.end&&(t.cdStart=e.end),e.start>t.start&&(t.cdEnd=e.start)):console.error("No exon found spanning "+cds.start+"-"+cds.end)}finish(){this.assembleParts();var e=this.cdStart,t=this.cdEnd;this.exons.sort(function(n,r){return n.start-r.start}),e&&this.exons.forEach(function(n){(n.end<e||n.start>t)&&(n.utr=!0)})}popupData(e){const t=super.popupData(e);for(let n of this.exons)if(!n.pseudo&&e>=n.start&&e<n.end&&typeof n.popupData=="function"){t.push("<hr/>");const r=n.popupData(e);for(let s of r)t.push(s)}for(let n of this.parts)if(e>=n.start&&e<n.end&&typeof n.popupData=="function"){t.push("<hr/>");const r=n.popupData(e);for(let s of r)t.push(s)}return t}}function Jg(i,e){const t=e.format;if(i.length<9)return;const n=t==="gff3"?"=":" ";return new _h({source:yc(i[1]),type:i[2],chr:i[0],start:parseInt(i[3])-1,end:parseInt(i[4]),score:i[5]==="."?void 0:Number(i[5]),strand:i[6],phase:i[7]==="."?".":parseInt(i[7]),attributeString:i[8],delim:n})}function c5(i,e){const t=Jg(i,e);if(!t)return;const n=Ms(t.attributeString,t.delim);for(let[r,s]of n){const a=r.toLowerCase();a==="color"||a==="colour"?t.color=qe.createColorString(s):r==="ID"?t.id=s:r==="Parent"&&(t.parent=s)}return t}function h5(i,e){const t=Jg(i,e);if(!t)return;const n=Ms(t.attributeString,t.delim);let r,s;switch(t.type){case"gene":r="gene_id";break;case"transcript":r="transcript_id",s="gene_id";break;default:s="transcript_id"}for(let[a,o]of n){const l=a.toLowerCase();l==="color"||l==="colour"?t.color=qe.createColorString(o):a===r?t.id=o:a===s&&(t.parent=o)}return t}function f5(i,e){if(!(i.length<7)){var t=i[0],n=i[1],r=parseInt(i[2]),s=parseInt(i[3]),a=parseInt(i[4]),o=parseInt(i[5]),l=i[6],c={chr:t,name:n,junction_left:r,junction_right:s,num_junction_reads:a,num_spanning_frags:o,spanning_frag_coords:[],start:-1,end:-1},h=r,f=s;if(o>0)for(var d=l.split(","),u=0;u<d.length;u++){var p=d[u].split("-"),m=p[0],F=p[1];m<h&&(h=m),F>f&&(f=F),c.spanning_frag_coords.push({left:m,right:F})}return c.start=h,c.end=f,c}}function d5(i,e){if(i.length<7)return null;const n={chr:i[0],start:parseInt(i[1])-1,end:parseInt(i[2]),"Strongest SNP-risk allele":i[3],"Disease/Phenotype":i[4],"P-value":i[5],"Odds ratio or beta":i[6]};return i.length>6&&(n.PUBMEDID=`<a target = "blank" href = "https://www.ncbi.nlm.nih.gov/pubmed/${i[7]}">${i[7]}</a>`),n}function u5(i,e){const t=e.customFormat;if(i.length<t.fields.length)return;const n=t.coords||0,r=i[t.chr],s=parseInt(i[t.start])-n,a=t.end!==void 0?parseInt(i[t.end]):s+1,o={chr:r,start:s,end:a};return t.fields&&t.fields.forEach(function(l,c){c!==t.chr&&c!==t.start&&c!==t.end&&(o[l]=i[c])}),o}function p5(i,e){const t=e.columnNames;if(!t)throw Error("Sample names are not defined.   Missing column headers?");const n=t.length-3,r=i[0],s=parseInt(i[1]),a=parseInt(i[2]),o=i.slice(3).map(Number);if(o.length==n)return{chr:r,start:s,end:a,values:o};console.warn(`${r}:${s}-${a} row contains ${o.length} sample columns instead of the expected ${n} columns. Skipping...`)}const g5=["Name","transcript_id","gene_name","gene","gene_id","alias","locus","name"];class m5{constructor(e){this.format=e.format,this.nameField=e.nameField,this.filterTypes=e.filterTypes===void 0?new Set(["chromosome"]):new Set(e.filterTypes)}combineFeatures(e,t){let n;const r=this.filterTypes;if(e=e.filter(s=>r===void 0||!r.has(s.type)),this.format==="gff3"){const s=this.combineFeaturesById(e);n=this.combineFeaturesByType(s)}else n=this.combineFeaturesByType(e);return this.numberExons(n,t),this.nameFeatures(n),n}combineFeaturesById(e){const t=new Map,n=[];for(let r of e)if(Ud(r.type)||Od(r.type)||!r.id)n.push(r);else{let s=t.get(r.chr);s||(s=new Map,t.set(r.chr,s));let a=s.get(r.id);a?a.push(r):s.set(r.id,[r])}for(let r of t.values())for(let s of r.values())if(s.length>1){const a=s[0];a.exons=[];for(let o of s)a.start=Math.min(a.start,o.start),a.end=Math.max(a.end,o.end),a.exons.push({start:o.start,end:o.end});n.push(a)}else n.push(s[0]);return n}combineFeaturesByType(e){const t=e.filter(h=>h.type==="gene"||h.type.endsWith("_gene")),n=Object.create(null);for(let h of t)n[h.id]=h;const r=Object.create(null),s=[],a=new Set,o=this.filterTypes;e=e.filter(h=>o===void 0||!o.has(h.type));for(let h of e)if(Od(h.type)){const f=h.id;if(f!==void 0){const d=new qd(h);r[f]=d,s.push(d),a.add(h);const u=n[h.parent];u&&(d.geneObject=u,a.add(u))}}for(let h of e)if(Ud(h.type)){const f=c(h);if(f)for(let d of f){let u=r[d];if(!u&&this.format==="gtf"){const p=Object.assign({},h);p.type="transcript",u=new qd(p),r[d]=u,s.push(u)}if(u!==void 0){if(s5(h.type))if(f.length>1){const p=new _h(h);u.addExon(p)}else u.addExon(h);else u.addPart(h);a.add(h)}}}s.forEach(function(h){typeof h.finish=="function"&&h.finish()});const l=e.filter(h=>!a.has(h));for(let h of l)s.push(h);return s;function c(h){return h.parent&&h.parent.trim()!==""?h.parent.trim().split(","):null}}numberExons(e,t){for(let n of e)if(n.exons&&(!t||n.end<=t.end&&n.start>t.start))for(let r=0;r<n.exons.length;r++){const s=n.exons[r];s.number=n.strand==="-"?n.exons.length-r:r+1}}nameFeatures(e){for(let t of e)if(typeof t.getAttributeValue=="function")if(this.nameField)t.name=t.getAttributeValue(this.nameField);else for(let n of g5){const r=t.getAttributeValue(n);if(r){t.name=r;break}}}}function w5(i,e){Ac[i]={fields:e}}function b5(i){if(Ac[i])return e(Ac[i]);return;function e(t){const n=t.fields,r=["chr","start","end"];for(let s=0;s<n.length;s++)for(let a of r)a===n[s]&&(t[a]=s);return t}}const Ac={gwascatalog:{fields:["bin","chr","start","end","name","pubMedID","author","pubDate","journal","title","trait","initSample","replSample","region","genes","riskAllele","riskAlFreq","pValue","pValueDesc","orOrBeta","ci95","platform","cnv"]},wgrna:{fields:["bin","chr","start","end","name","score","strand","thickStart","thickEnd","type"]},cpgislandext:{fields:["bin","chr","start","end","name","length","cpgNum","gcNum","perCpg","perGc","obsExp"]},clinVarMain:{fields:["chr1","start","end","name","score","strand","thickStart","thickEnd","reserved","blockCount","blockSizes","chromStarts","origName","clinSign","reviewStatus","type","geneId","snpId","nsvId","rcvAcc","testedInGtr","phenotypeList","phenotype","origin","assembly","cytogenetic","hgvsCod","hgvsProt","numSubmit","lastEval","guidelines","otherIds"]}};class F5{constructor(e){this.config=e,this.header={},e.nameField&&(this.header.nameField=e.nameField),this.skipRows=0,e.decode?(this.decode=e.decode,this.delimiter=e.delimiter||"	"):e.format&&(this.header.format=e.format.toLowerCase(),this.setDecoder(this.header.format)),this.delimiter||(this.delimiter="	")}async parseHeader(e){let t=this.header,n,r;for(;(r=await e.nextLine())!==void 0;)if(r.startsWith("track")||r.startsWith("#track")){let s=y5(r);Object.assign(t,s)}else if(!r.startsWith("browser"))if(r.startsWith("#columns")){let s=A5(r);Object.assign(t,s)}else if(r.startsWith("##gff-version 3"))t.format="gff3";else if(r.startsWith("#gffTags"))t.gffTags=!0;else{if(r.startsWith("fixedStep")||r.startsWith("variableStep"))break;if(r.startsWith("#")){const s=r.split(this.delimiter||"	");s.length>1&&(n=s)}else{this.setDecoder(t.format);const s=r.split(this.delimiter||"	");try{const a=Object.assign({columnNames:n},t);if(this.decode(s,a))break;s.length>1&&(n=s)}catch{s.length>1&&(n=s)}}}if(n){t.columnNames=n;for(let s=0;s<n.length;s++)n[s]==="color"||n[s]==="colour"?t.colorColumn=s:n[s]==="thickness"&&(t.thicknessColumn=s)}return this.header=t,t}async parseFeatures(e){const t=[],n=this.decode,r=this.header.format,s=this.delimiter||"	";let a=0,o=0,l;for(;(l=await e.nextLine())!==void 0;){if(a++,a<=this.skipRows||!l||l.startsWith("track")||l.startsWith("#")||l.startsWith("browser"))continue;if(r==="wig"&&l.startsWith("fixedStep")){this.header.wig=v5(l);continue}else if(r==="wig"&&l.startsWith("variableStep")){this.header.wig=_5(l);continue}const c=l.split(s);if(c.length<1)continue;const h=n(c,this.header);if(h instanceof Qg){o++,o>0&&console.error(`Error parsing line '${l}': ${h.message}`);continue}h&&t.push(h)}return n===dl&&G3(t),(this.config.format==="gtf"||this.config.format==="gff3"||this.config.format==="gff")&&this.config.assembleGFF!==!1?new m5(this.config).combineFeatures(t):t}setDecoder(e){switch(e){case"broadpeak":case"regionpeak":case"peaks":this.decode=Gg,this.delimiter=this.config.delimiter||/\s+/;break;case"narrowpeak":this.decode=J3,this.delimiter=this.config.delimiter||/\s+/;break;case"bedgraph":this.decode=$g,this.delimiter=/\s+/;break;case"wig":this.decode=e5,this.delimiter=this.config.delimiter||/\s+/;break;case"gff3":case"gff":this.decode=c5,this.delimiter="	";break;case"gtf":this.decode=h5,this.delimiter="	";break;case"fusionjuncspan":this.decode=f5,this.delimiter=this.config.delimiter||/\s+/;break;case"gtexgwas":this.skipRows=1,this.decode=d5,this.delimiter="	";break;case"refflat":this.decode=Z3,this.delimiter=this.config.delimiter||/\s+/;break;case"genepred":this.decode=Hd,this.delimiter=this.config.delimiter||/\s+/;break;case"genepredext":this.decode=Pd,this.delimiter=this.config.delimiter||/\s+/;break;case"ensgene":this.decode=Hd,this.header.shift=1,this.delimiter=this.config.delimiter||/\s+/;break;case"refgene":this.decode=Pd,this.delimiter=this.config.delimiter||/\s+/,this.header.shift=1;break;case"bed":this.decode=oo,this.delimiter=this.config.delimiter||/\s+/;break;case"gappedpeak":this.decode=W3,this.delimiter=this.config.delimiter||/\s+/;break;case"bedmethyl":this.decode=K3,this.delimiter=this.config.delimiter||/\s+/;break;case"bedpe":case"hiccups":this.decode=dl,this.delimiter=this.config.delimiter||"	";break;case"bedpe-domain":this.decode=$3,this.headerLine=!0,this.delimiter=this.config.delimiter||"	";break;case"bedpe-loop":this.decode=dl,this.delimiter=this.config.delimiter||"	",this.header={colorColumn:7};break;case"interact":this.decode=j3,this.delimiter=this.config.delimiter||/\s+/;break;case"snp":this.decode=t5,this.delimiter="	";break;case"rmsk":this.decode=Y3,this.delimiter="	";break;case"gcnv":this.decode=p5,this.delimiter="	";break;default:const t=b5(e);t!==void 0?(this.decode=u5,this.header.customFormat=t,this.delimiter=t.delimiter||"	"):(this.decode=oo,this.delimiter=this.config.delimiter||/\s+/)}}}function y5(i){const e={},t=i.split(/(?:")([^"]+)(?:")|([^\s"]+)(?=\s+|$)/g);let n;const r=[];for(let a of t)!a||a.trim().length===0||(a.endsWith("=")?n=a:n?(r.push(n+a),n=void 0):r.push(a));for(let a of r){if(!a)return;var s=a.split("=",2);if(s.length===2){const o=s[0].trim(),l=s[1].trim();if(e.hasOwnProperty(o)){let c=e[o];Array.isArray(c)?c.push(l):e[o]=[c,l]}else e[o]=l}}return e.type=="interact"?e.format="interact":e.type==="gcnv"&&(e.format="gcnv"),e}function A5(i){let e={},t=i.split(/\s+/);return t.length===2&&t[1].split(";").forEach(function(r){let s=r.split("=");s[0]==="color"?e.colorColumn=Number.parseInt(s[1])-1:s[0]==="thickness"&&(e.thicknessColumn=Number.parseInt(s[1])-1)}),e}function v5(i){const e=i.split(/\s+/),t=e[1].split("=")[1],n=parseInt(e[2].split("=")[1],10)-1,r=parseInt(e[3].split("=")[1],10),s=e.length>4?parseInt(e[4].split("=")[1],10):1;return{format:"fixedStep",chrom:t,start:n,step:r,span:s,index:0}}function _5(i){const e=i.split(/\s+/),t=e[1].split("=")[1],n=e.length>2?parseInt(e[2].split("=")[1],10):1;return{format:"variableStep",chrom:t,span:n}}function ht(i,e){const t=Fe({class:"igv-menu-popup-check-container"}),n=Fe();t.appendChild(n);const r=Pi("check",e===!0?"#444":"transparent");n.appendChild(r);const s=Fe();return s.innerText=i,t.appendChild(s),t}function e0(i,e){e=e||Number.MAX_SAFE_INTEGER;const t=[];i.sort(function(n,r){return n.start-r.start}),t.push(-1e3);for(let n of i){let r=0;const s=Math.min(t.length,e);for(r=0;r<s;r++)if(n.start>=t[r]){n.row=r,t[r]=n.end;break}n.row=r,t[r]=n.end}}const C5=1e4;async function lo(i,e,t){const n=o=>{const l=Object.assign({},o);return l.chr="all",l.start=e.getGenomeCoordinate(o.chr,o.start),l.end=e.getGenomeCoordinate(o.chr,o.end),l._f=o,l.exons&&delete l.exons,l},r=new Set(e.wgChromosomeNames),s=[];let a=0;for(let o of e.wgChromosomeNames){if(Array.isArray(i)){const c={};for(let h of i){const f=e.getChromosomeName(h.chr);c.hasOwnProperty(f)||(c[f]=[]),c[f].push(h)}i=c}const l=i[o];if(l){const c=t||C5;for(let h of l){let f=e.getChromosomeName(h.chr);if(r.has(f))if(s.length<c)s.push(n(h));else{const d=c/(a+1);if(Math.random()<d){const u=Math.floor(Math.random()*(c-1));s[u]=n(h)}}a++}}}return s.sort(function(o,l){return o.start-l.start}),s}function t0(i,e){if(e=e||1e3,i==null||i.length===0)return;const t={},n=[];for(let r of i){const s=r.chr;let a=t[s];a||(a=[],t[s]=a,n.push(s)),a.push(r)}for(let r of n)e0(t[r],e)}function x5(i,e,t=!0){const n=l=>(l.start+l.end)/2,r=t?(l,c)=>l.start-c.start+l.end-c.end:(l,c)=>c.start-l.start+c.end-l.end,s=Array.from(i);s.sort(r);let a=0,o=s.length;for(;a<o;){let l=Math.floor((a+o)/2);t?n(s[l])<=e?a=l+1:o=l:n(s[l])>=e?a=l+1:o=l}return s[a]}const k5=i=>ut(i)&&i.indexOf(",")>0&&!(i.startsWith("rgb(")||i.startsWith("rgba("))?`rgb(${i})`:i,ar=class ar{constructor(e,t){this.browser=t,this.init(e)}init(e){this.config=e,e.displayMode&&(e.displayMode=e.displayMode.toUpperCase());const t=Object.assign({},ar.defaults);if(this.constructor.defaults)for(let n of Object.keys(this.constructor.defaults))t[n]=this.constructor.defaults[n];for(let n of Object.keys(t))this[n]=e.hasOwnProperty(n)?e[n]:t[n],(n==="color"||n==="altColor")&&this[n]&&(this[n]=k5(this[n]));e.name||e.label?this.name=e.name||e.label:tn(e.url)?this.name=e.url.name:ut(e.url)&&!e.url.startsWith("data:")&&(this.name=M2(e.url)),this.url=e.url,this.config.type&&(this.type=this.config.type),this.id=this.config.id===void 0?this.name:this.config.id,this.order=e.order,this.autoscaleGroup=e.autoscaleGroup,this.removable=e.removable===void 0?!0:e.removable,this.minHeight=e.minHeight||Math.min(25,this.height),this.maxHeight=e.maxHeight||Math.max(1e3,this.height),e.onclick&&(this.onclick=e.onclick,e.onclick=void 0),e.description&&(typeof e.description=="function"?this.description=e.description:this.description=()=>e.description),e.hoverTextFields?this.hoverText=I5.bind(this):typeof this.config.hoverText=="function"&&(this.hoverText=this.config.hoverText)}get name(){return this._name}set name(e){this._name=e,this.trackView&&this.trackView.setTrackLabelName(e)}clearCachedFeatures(){this.trackView&&this.trackView.clearCachedFeatures()}updateViews(){this.trackView&&this.trackView.updateViews()}repaintViews(){this.trackView&&this.trackView.repaintViews()}getState(){const e=s=>!(s===void 0||typeof s=="function"||s instanceof Promise),t={},n=Object.keys(this.config).filter(s=>e(this.config[s]));for(const s of n)s.startsWith("_")||(t[s]=this.config[s]);for(let s of Object.keys(t)){if(s.startsWith("_"))continue;const a=this[s];a!==void 0&&(La(a)||typeof a=="boolean"||s==="metadata")&&(t[s]=a)}const r=Object.assign({},ar.defaults);if(this.constructor.defaults)for(let s of Object.keys(this.constructor.defaults))r[s]=this.constructor.defaults[s];for(let s of Object.keys(r))this[s]!==void 0&&r[s]!==this[s]&&(t[s]=this[s]);return!this.autoscale&&this.dataRange&&(t.min=this.dataRange.min,t.max=this.dataRange.max),this.autoscaleGroup&&(t.autoscaleGroup=this.autoscaleGroup),t}get supportsWholeGenome(){return this.config.supportsWholeGenome===!0}hasSamples(){return!1}getGenomeId(){return this.browser.genome?this.browser.genome.id:void 0}setTrackProperties(e){if(this.disposed)return;const t={};let n;for(let r of Object.keys(e))switch(r.toLowerCase()){case"usescore":t.useScore=e[r]===1||e[r]==="1"||e[r]==="on"||e[r]===!0;break;case"visibility":switch(e[r]){case"2":case"3":case"pack":case"full":t.displayMode="EXPANDED";break;case"4":case"squish":t.displayMode="SQUISHED";break;case"1":case"dense":t.displayMode="COLLAPSED"}break;case"color":case"altcolor":t[r]=e[r].startsWith("rgb(")?e[r]:"rgb("+e[r]+")";break;case"featurevisiblitywindow":case"visibilitywindow":t.visibilityWindow=Number.parseInt(e[r]);break;case"maxheightpixels":n=e[r].split(":"),n.length===3&&(t.minHeight=Number.parseInt(n[2]),t.height=Number.parseInt(n[1]),t.maxHeight=Number.parseInt(n[0]));break;case"viewlimits":if(!this.config.autoscale){n=e[r].split(":");let a=0,o;n.length==1?o=Number(n[0]):n.length==2&&(a=Number(n[0]),o=Number(n[1])),Number.isNaN(o)||Number.isNaN(a)?console.warn(`Unexpected viewLimits value in track line: ${e.viewLimits}`):(t.autoscale=!1,t.dataRange={min:a,max:o},this.viewLimitMin=a,this.viewLimitMax=o)}case"name":t[r]=e[r];break;case"url":t.infoURL=e[r];break;case"type":const s=e[r];Vd.has(s)?t[r]=Vd.get(s):t[r]=s;break;case"graphtype":t.graphType=e[r];break;default:t[r]=e[r]}for(let r of Object.keys(t))if(!this.config.hasOwnProperty(r)||r==="name"&&this.config._derivedName){let s=t[r];if(s==="true"&&(s=!0),s==="false"&&(s=!1),this[r]=s,r==="height"&&this.trackView)try{const a=Number.parseInt(s);this.trackView.setTrackHeight(a)}catch(a){console.error(a)}}}clickedFeatures(e){const t=e.viewport.cachedFeatures;if(!t||!Array.isArray(t)||t.length===0)return[];const n=e.genomicLocation,r=e.referenceFrame.bpPerPixel>.2?3*e.referenceFrame.bpPerPixel:.2,s=n-r,a=n+r;return io.findOverlapping(t,s,a)}extractPopupData(e,t){const n=new Set(["row","color","chr","start","end","cdStart","cdEnd","strand","alpha"]),r=[];let s,a;for(let l in e)if(e.hasOwnProperty(l)&&!n.has(l)&&La(e[l])){let c=e[l];r.push({name:nc(l),value:c}),l==="alleles"?s=e[l]:l==="alleleFreqs"&&(a=e[l])}if(s&&a){s.endsWith(",")&&(s=s.substr(0,s.length-1)),a.endsWith(",")&&(a=a.substr(0,a.length-1));let l=s.split(","),c=a.split(",");if(c.length>1){let h=[];for(let d=0;d<c.length;d++)h.push({a:l[d],af:Number(c[d])});h.sort(function(d,u){return d.af-u.af});let f=h[h.length-1].a;if(f.length===1)for(let d=h.length-2;d>=0;d--){let u=h[d].a;if(u.length===1){t||(t=this.getGenomeId());const p=ar.getCravatLink(e.chr,e.start+1,f,u,t);console.log(p),p&&(r.push("<hr/>"),r.push({html:p}),r.push("<hr/>"))}}}}if(e.attributes)for(let l of Object.keys(e.attributes))r.push({name:l,value:e.attributes[l]});let o=`${e.chr}:${He(e.start+1)}-${He(e.end)}`;return e.strand&&(o+=` (${e.strand})`),r.push({name:"Location",value:o}),r}description(){const e=(n,r)=>`<div class="igv-track-label-popup-shim"><b>${n}: </b>${r}</div>`;let t='<div class="igv-track-label-popup">';if(this.url?tn(this.url)?t+=e("Filename",this.url.name):t+=e("URL",this.url):t=this.name,this.config){if(this.config.metadata)for(let n of Object.keys(this.config.metadata)){const r=this.config.metadata[n];t+=e(n,r)}for(let n of Object.keys(this.config)){if(n.startsWith("_"))continue;let r=n.substr(0,1);if(r!==r.toLowerCase()){const s=this.config[n];s&&La(s)&&(t+=e(n,s))}}}return t+="</div>",t}getColorForFeature(e){return typeof this.color=="function"?this.color(feature):this.color}numericDataMenuItems(){const e=[];e.push("<hr/>");let t=ve("<div>");t.text("Set data range");function n(){this.trackView.track.selected?this.browser.dataRangeDialog.configure(this.trackView.browser.getSelectedTrackViews()):this.browser.dataRangeDialog.configure(this.trackView),this.browser.dataRangeDialog.present(ve(this.browser.columnContainer))}if(e.push({object:t,dialog:n}),this.logScale!==void 0){let s=function(){this.logScale=!this.logScale,this.trackView.repaintViews()};t=ve(ht("Log scale",this.logScale)),e.push({object:t,click:s})}t=ve(ht("Autoscale",this.autoscale));function r(){this.autoscaleGroup=void 0,this.autoscale=!this.autoscale,this.browser.updateViews()}return e.push({object:t,click:r}),e}setDataRange({min:e,max:t}){this.dataRange={min:e,max:t},this.autoscale=!1,this.autoscaleGroup=void 0,this.trackView.repaintViews()}async nextFeatureAfter(e,t,n){let s=this.trackView.viewports[0].cachedFeatures;if(s&&Array.isArray(s)&&s.length>0&&this.browser.genome.getChromosomeName(s[0].chr)===e){const o=x5(s,t,n);if(o)return o}if(typeof this.featureSource.nextFeature=="function")return this.featureSource.nextFeature(e,t,n,this.visibilityWindow)}dispose(){this.disposed=!0;for(let e of Object.keys(this))this[e]=void 0}static getCravatLink(e,t,n,r,s){if(s==="hg38"||s==="GRCh38")return`<a target="_blank" href="https://run.opencravat.org/result/nocache/variant.html?chrom=${e.startsWith("chr")?e:"chr"+e}&pos=${t}&ref_base=${n}&alt_base=${r}"><b>Cravat ${n}->${r}</b></a>`}static localFileInspection(e){const t=Object.assign({},e),n={url:"file",indexURL:"indexFile"};for(const r of["url","indexURL"])t[r]&&t[r]instanceof File&&(t[n[r]]=t[r].name,delete t[r]);return t}};ke(ar,"defaults",{height:50,autoHeight:!1,visibilityWindow:void 0,color:void 0,altColor:void 0,supportHiDPI:!0,selected:!1});let mt=ar;function I5(i){if(!this.hoverTextFields)return;const e=this.clickedFeatures(i);if(e&&e.length>0){let t="";for(let n=0;n<e.length;n++){if(n===10){t+="; ...";break}if(!e[n])continue;const r=e[n]._f||e[n];t.length>0&&(t+=`
`),t="";for(let s of this.hoverTextFields)t.length>0&&(t+=`
`),r.hasOwnProperty(s)?t+=r[s]:typeof r.getAttribute=="function"&&(t+=r.getAttribute(s))}return t}}const Vd=new Map([["wiggle_0","wig"],["bed","bed"],["bigBed","bigBed"],["bigWig","bigWig"]]);class ul{constructor(e){switch(this.type=e||"seg",this.type){case"mut":this.sampleColumn=3,this.chrColumn=0,this.startColumn=1,this.endColumn=2,this.dataColumn=4;break;case"maf":this.sampleColumn=15,this.chrColumn=4,this.startColumn=5,this.endColumn=6,this.dataColumn=8;break;default:this.sampleColumn=0,this.chrColumn=1,this.startColumn=2,this.endColumn=3}}async parseHeader(e){let t;for(;(t=await e.nextLine())!==void 0;)if(!t.startsWith("#")){const n=t.split("	");this.header={headings:n};break}return this.header}async parseFeatures(e){const t=[];let n;this.header||(this.header=await this.parseHeader(e)),this.type==="seg"&&(this.dataColumn=this.header.headings.length-1),this.header.headings.length>5&&(n=this.extractExtraColumns(this.header.headings));const r=this.header.headings[this.dataColumn];let s;for(;(s=await e.nextLine())!==void 0;){const a=s.split("	"),o=this.type==="seg"?Number(a[this.dataColumn]):a[this.dataColumn];if(a.length>this.dataColumn){const l=new E5({sample:a[this.sampleColumn],chr:a[this.chrColumn],start:parseInt(a[this.startColumn])-1,end:parseInt(a[this.endColumn]),value:o,valueColumnName:r});if(n){const c=this.extractExtraColumns(a);l.setAttributes({names:n,values:c})}t.push(l)}}return t}extractExtraColumns(e){const t=[];for(let n=0;n<e.length;n++)n!==this.chrColumn&&n!==this.startColumn&&n!==this.endColumn&&n!==this.sampleColumn&&t.push(e[n]);return t}}class E5{constructor({sample:e,chr:t,start:n,end:r,value:s,valueColumnName:a}){this.sample=e,this.chr=t,this.start=n,this.end=r,this.value=s,this.valueColumnName=a}setAttributes({names:e,values:t}){this.attributeNames=e,this.attributeValues=t}getAttribute(e){if(this.attributeNames){const t=this.attributeNames.indexOf(e);if(t>=0)return this.attributeValues[t]}}popupData(e,t){const n=new Set(["chr","start","end","sample","value","row","color","sampleKey","uniqueSampleKey","sampleId","chromosome","uniquePatientKey"]),r=this.chr+":"+He(this.start+1)+"-"+He(this.end),s=[{name:"Sample",value:this.sample},{name:"Location",value:r},{name:this.valueColumnName?nc(this.valueColumnName):"Value",value:this.value}];if(e==="mut"&&t==="hg38"){const a=this.extractCravatLink(t);a&&(s.push("<hr/>"),s.push({html:a}),s.push("<hr/>"))}if(this.attributeNames&&this.attributeNames.length>0)for(let a=0;a<this.attributeNames.length;a++)!n.has(this.attributeNames[a])&this.valueColumnName!==this.attributeNames[a]&&s.push({name:nc(this.attributeNames[a]),value:this.attributeValues[a]});return s}extractCravatLink(e){let t,n;if(this.attributeNames&&this.attributeNames.length>0){for(let r=0;r<this.attributeNames.length;r++)if(!t&&this.attributeNames[r]==="Reference_Allele"&&(t=this.attributeValues[r]),!n&&this.attributeNames[r].startsWith("Tumor_Seq_Allele")&&this.attributeValues[r]!==t&&(n=this.attributeValues[r]),t&&n)return mt.getCravatLink(this.chr,this.start+1,t,n,e)}}}const Qd=new Map([["REF","referenceBases"],["ALT","alternateBases"],["QUAL","quality"],["FILTER","filter"]]);class S5{constructor(e){this.chr=e[0],this.pos=parseInt(e[1]),this.names=e[2],this.referenceBases=e[3],this.alternateBases=e[4],this.quality=e[5],this.filter=e[6],this.info={};const t=e[7];if(t&&t!==".")for(let r of t.split(";")){var n=r.split("=");this.info[n[0]]=n[1]}this.init()}getAttributeValue(e){return Qd.has(e)&&(e=Qd.get(e)),this.hasOwnProperty(e)?this[e]:this.info[e]}init(){const e=this.referenceBases,t=this.alternateBases;if(this.info&&(this.info.VT?this.type=this.info.VT:this.info.SVTYPE?this.type="SV":this.info.PERIOD&&(this.type="STR")),this.type===void 0&&(this.type=M5(e,t)),this.info.END)this.start=this.pos-1,this.info.CHR2&&this.info.CHR2!==this.chr?this.end=this.start+1:this.end=Number.parseInt(this.info.END);else if(this.type==="NONVARIANT")this.start=this.pos-1,this.end=this.start+e.length;else{const n=t.split(",").filter(r=>r.length>0);this.alleles=[],this.start=void 0,this.end=void 0;for(let r of n)if(this.alleles.push(r),this.type!=="SV"&&vc(r)){let s=r.length,a=e.length;const o=Math.min(s,a);let l=0;for(;l<o&&e.charCodeAt(l)===r.charCodeAt(l);)l++,s--,a--;for(;s>0&&a>0;){const f=l+s-1,d=l+a-1;if(r.charCodeAt(f)===e.charCodeAt(d))s--,a--;else break}for(;s>0&&a>0;){const f=l,d=l;if(r.charCodeAt(f)===e.charCodeAt(d))l++,s--,a--;else break}const c=this.pos+l-1,h=c+a;this.start=this.start===void 0?c:Math.min(this.start,c),this.end=this.end===void 0?h:Math.max(this.end,h)}this.start===void 0&&(this.start=this.pos-1,this.end=this.pos),this.start===this.end&&(this.start-=.5,this.end+=.5)}}popupData(e,t){const n=`${He(this.pos)}`,r=this.start===this.end?`${He(this.start)} | ${He(this.start+1)}`:`${He(this.start+1)}-${He(this.end)}`,s=[{name:"Chr",value:this.chr},{name:"Pos",value:n},{name:"Loc",value:r},{name:"ID",value:this.names?this.names:""},{name:"Ref",value:this.referenceBases},{name:"Alt",value:this.alternateBases.replace("<","&lt;")},{name:"Qual",value:this.quality},{name:"Filter",value:this.filter}];if(this.type&&s.push({name:"Type",value:this.type}),this.type==="SNP"){let o=this.referenceBases;if(o.length===1){let l=this.alternateBases.split(",");for(let c of l)if(c.length===1){let h=mt.getCravatLink(this.chr,this.pos,o,c,t);h&&(s.push("<hr/>"),s.push({html:h}))}}}const a=Object.keys(this.info);if(this.info&&a.length>0){s.push({html:'<hr style="border-top: dotted 1px;border-color: #c9c3ba" />'});for(let o of a)s.push({name:o,value:R5(decodeURIComponent(this.info[o]))})}return s}getInfo(e){return this.info?this.info[e]:void 0}isRefBlock(){return this.type==="NONVARIANT"}isFiltered(){return!(this.filter==="."||this.filter==="PASS")}alleleFreq(){return this.info?this.info.AF:void 0}}class N5{constructor(e){this.mate=e,this.chr=e.info.CHR2,this.pos=Number.parseInt(e.info.END),this.start=this.pos-1,this.end=this.pos}get info(){return this.mate.info}get names(){return this.mate.names}get referenceBases(){return this.mate.referenceBases}get alternateBases(){return this.mate.alternateBases}get quality(){return this.mate.quality}get filter(){return this.mate.filter}get calls(){return this.mate.calls}getAttributeValue(e){return this.mate.getAttributeValue(e)}getInfo(e){this.mate.getInfo(e)}isFiltered(){return this.mate.isFiltered()}alleleFreq(){return this.mate.alleleFreq()}popupData(e,t){const n=[];return n.push("SV Breakpoint"),n.push({name:"Chr",value:this.chr}),n.push({name:"Pos",value:`${He(this.pos)}`}),n.push({html:'<hr style="border-top: dotted 1px;border-color: #c9c3ba" />'}),n.push("SV"),n.push(...this.mate.popupData(e,t)),n}}var yo,i0;class B5{constructor({formatFields:e,sample:t,token:n}){ct(this,yo);this.info={},this.sample=t;const r=n.split(":");for(let s=0;s<r.length;s++){const a=r[s];if(s==e.genotypeIndex){this.genotype=[];for(let o of a.split(/[\|\/]/))this.genotype.push(o==="."?o:parseInt(o))}else this.info[e.fields[s]]=a}}get zygosity(){if(!this._zygosity)if(!this.genotype)this._zygosity="unknown";else{let e=!0,t=!0,n=!1;for(let r of this.genotype)if(r==="."){n=!0;break}else r!==0&&(t=!1),r===0&&(e=!1);n?this._zygosity="nocall":t?this._zygosity="homref":e?this._zygosity="homvar":this._zygosity="hetvar"}return this._zygosity}zygosityScore(){switch(this.zygosity){case"homvar":return 4;case"hetvar":return 3;case"homref":return 2;case"nocall":return 1;default:return 0}}popupData(e,t){const n=[];this.sample!==void 0&&n.push({name:"Sample",value:this.sample}),this.genotypeString&&n.push({name:"Genotype",value:this.genotypeString});const r=Ke(this,yo,i0).call(this);r&&n.push({name:"Zygosity",value:r});var s=Object.keys(this.info);s.length&&n.push("<hr/>");for(let a of s)n.push({name:a,value:decodeURIComponent(this.info[a])});return n}}yo=new WeakSet,i0=function(){switch(this.zygosity){case"homref":return"Homozygous reference";case"homvar":return"Homozygous variant";case"hetvar":return"Heterozygous";default:return""}};const T5=new Set(["A","C","T","G"].map(i=>i.charCodeAt(0)));function vc(i){for(let e=0;e<i.length;e++)if(!T5.has(i.charCodeAt(e)))return!1;return!0}function M5(i,e){const t=i.length;if(e===void 0)return"UNKNOWN";if(e.trim().length===0||e==="<NON_REF>"||e==="<*>"||e===".")return"NONVARIANT";{const r=e.split(",").map(function(a){return t===1&&a.length===1?"SNP":a==="<NON_REF>"?"NONVARIANT":a.length>t&&vc(a)?"INSERTION":a.length<t&&vc(a)?"DELETION":"OTHER"});let s=r[0];for(let a of r)if(a!==s)return"MIXED";return s}}function R5(i,e){return e===void 0&&(e=","),Array.isArray(i)?i.join(e):i}class n0{construtor(){}async parseHeader(e,t){const n={};n.chrAliasTable=new Map;let r=await e.nextLine();if(r.startsWith("##fileformat"))n.version=r.substr(13);else throw new Error("Invalid VCF file: missing fileformat line");for(;(r=await e.nextLine())!==void 0&&r.startsWith("#");){let a;const o={};if(r.startsWith("##")){if(r.startsWith("##INFO")||r.startsWith("##FILTER")||r.startsWith("##FORMAT")){const l=r.indexOf("<"),c=r.lastIndexOf(">");if(!(l>2&&c>0)){console.log("Malformed VCF header line: "+r);continue}const h=r.substring(2,l-1);n[h]||(n[h]={});const f=_w(r.substring(l+1,c-1),",");for(let d of f){var s=d.split("=");s.length>1&&(s[0]==="ID"?a=s[1]:o[s[0]]=s[1])}a&&(n[h][a]=o)}else if(r.startsWith("##contig")&&t){const l=r.indexOf("<ID=");let c=r.indexOf(",",l);c==-1&&(c=r.indexOf(">",l));const h=r.substring(l+4,c),f=t.getChromosomeName(h);n.chrAliasTable.set(f,h)}}else if(r.startsWith("#CHROM")){const l=r.split("	");if(l.length>8){n.sampleNameMap=new Map;for(let c=9;c<l.length;c++)n.sampleNameMap.set(l[c],c-9)}}}return this.header=n,n}async parseFeatures(e){const t=[],n=this.header.sampleNameMap?Array.from(this.header.sampleNameMap.keys()):void 0,r=8+(n?n.length+1:0);let s;for(;(s=await e.nextLine())!==void 0;)if(s&&!s.startsWith("#")){const a=s.split("	");if(a.length===r){const o=new S5(a);if(o.header=this.header,t.push(o),a.length>9){const l=D5(a[8].split(":"));o.calls=[];for(let c=9;c<a.length;c++){const h=n[c-9],f=a[c],d=new B5({formatFields:l,sample:h,token:f});o.calls.push(d)}o.info&&o.info.CHR2&&o.info.END&&t.push(L5(o))}}}return t}}function D5(i){const e={genotypeIndex:-1,fields:i};for(let t=0;t<i.length;t++)i[t]==="GT"&&(e.genotypeIndex=t);return e}function L5(i){return new N5(i)}const z5=Math.log10(Number.MIN_VALUE);class r0{constructor(e){if(this.config=e,e.columns){if(e.columns.chromosome===void 0||e.columns.position===void 0||e.columns.value===void 0)throw Error("columns property must define chrCol, posCol, and valueCol");this.posCol=e.columns.position-1,this.chrCol=e.columns.chromosome-1,this.valueCol=e.columns.value-1}else this.posCol=2,this.chrCol=1,this.valueCol=3}async parseHeader(e){const t=await e.nextLine();return this.parseHeaderLine(t)}parseHeaderLine(e){if(this.columns=e.split(/\t/),!this.config.columns)for(let t=0;t<this.columns.length;t++)switch(this.columns[t].toLowerCase()){case"chr":case"chromosome":case"chr_id":this.chrCol=t;break;case"bp":case"pos":case"position":case"chr_pos":this.posCol=t;break;case"p":case"pval":case"pvalue":case"p-value":case"p.value":this.valueCol=t;break}return this.columns}async parseFeatures(e){const t=[],n=e.nextLine();this.columns||this.parseHeaderLine(n);let r;const s=a=>{const o=a.indexOf("E");return o>0&&Number.parseInt(a.substring(o+1))<z5?Number.MIN_VALUE:Number(a)};for(;(r=e.nextLine())!==void 0;){const a=r.split(/\t/);if(a.length===this.columns.length){const o=a[this.posCol];if(o.indexOf(";")>0||o.length==0||o.indexOf("x")>0)continue;const l=a[this.chrCol],c=s(a[this.valueCol]),h=parseInt(o)-1,f=h+1;t.push(new H5({chr:l,start:h,end:f,value:c,line:r,columns:this.columns}))}}return t}static isGWAS(e){const t=e.split("	");if(t.length<5)return!1;const n=[["chr","chromosome","chr_id","chrom"],["bp","pos","position","chr_pos","chromEnd"],["p","pval","p-value","p.value"]];for(let r of n)if(!t.some(s=>r.includes(s.toLowerCase())))return!1;return!0}}class H5{constructor({chr:e,start:t,end:n,value:r,line:s,columns:a}){this.chr=e,this.start=t,this.end=n,this.value=r,this.line=s,this.columns=a}popupData(){const e=this.line.split(/\t/);return this.columns.map(function(t,n){return{name:t,value:e[n]}})}getAttribute(e){const t=this.line.split(/\t/);for(let n=0;n<this.columns.length;n++)if(this.columns[n]===e)return t[n]}}var P5=new RegExp("([^:]*)\\(([^)]*)\\)"),O5=new RegExp("([^:]*):([^(]*)\\(([^)]*)\\)");class U5{constructor(e){const t=e?e.decode:void 0;this.nameField=e?e.nameField:void 0,this.skipRows=0,t?this.decode=t:this.decode=G5,this.delimiter="	"}async parseHeader(e){let t,n;for(;(t=await e.nextLine())&&(t.startsWith("track")||t.startsWith("#")||t.startsWith("browser"));)if(t.startsWith("track")||t.startsWith("#track")){let r=V5(t);n?Object.assign(n,r):n=r}else if(t.startsWith("#columns")){let r=Q5(t);n?Object.assign(n,r):n=r}else t.startsWith("##gff-version 3")&&(this.format="gff3",n||(n={}),n.format="gff3");return this.header=n,n}async parseFeatures(e){const t=[],n=this.decode,r=this.delimiter||"	";let s=0,a,o;for(;(a=e.nextLine())!==void 0;){if(s++,s<=this.skipRows||a.startsWith("track")||a.startsWith("#")||a.startsWith("browser"))continue;let c=l();if(c.length<1)continue;if(!this.aed){this.aed=q5(c);continue}const h=n.call(this,c,o);h&&t.push(h)}return t;function l(){for(var c=[],h="",f=!1,d,u;a||a==="";){for(d=0;d<a.length;d++)u=a.charAt(d),u===r?f?h+=u:(c.push(h),h=""):u==='"'?d+1<a.length&&a.charAt(d+1)==='"'?(f&&(h+='"'),d++):f=!f:h+=u;if(f)h+=`
`,a=nextLine();else break}return c.push(h),c}}}function s0(i){var e=O5.exec(i);if(e)return{namespace:e[1],name:e[2],type:e[3]};if(e=P5.exec(i),e)return{namespace:"?",name:e[1],type:e[2]};throw new Error("Error parsing the header row of AED file - column not in ns:name(ns:type) format")}function q5(i){var e,t,n,r;for(e={columns:[],metadata:{}},t=0;t<i.length;t++)n=i[t],r=s0(n),e.columns.push(r);return e}function V5(i){const e={},t=i.split(/(?:")([^"]+)(?:")|([^\s"]+)(?=\s+|$)/g);let n;const r=[];for(let a of t)!a||a.trim().length===0||(a.endsWith("=")>0?n=a:n?(r.push(n+a),n=void 0):r.push(a));for(let a of r){if(!a)return;var s=a.split("=",2);if(s.length===2){const o=s[0].trim(),l=s[1].trim();e[o]=l}}return e}function Q5(i){let e={},t=i.split(/\s+/);return t.length===2&&t[1].split(";").forEach(function(r){let s=r.split("=");s[0]==="color"?e.colorColumn=Number.parseInt(s[1])-1:s[0]==="thickness"&&(e.thicknessColumn=Number.parseInt(s[1])-1)}),e}function a0(i,e){var t,n,r=i.columns;this.aed=i,this.allColumns=e,this.chr=null,this.start=null,this.end=null,this.score=1e3,this.strand=".",this.cdStart=null,this.cdEnd=null,this.name=null,this.color=null;for(let a=0;a<e.length;a++)if(t=e[a],!!t){n=r[a],n.type==="aed:Integer"&&(t=parseInt(t));var s=[];if(n.namespace.length>0)for(let o=0;o<n.namespace.length;o++)s.push(n.namespace.charCodeAt(o));n.namespace.trim()==="bio"?n.name==="sequence"?this.chr=t:n.name==="start"?this.start=t:n.name==="end"?this.end=t:n.name==="cdsMin"?this.cdStart=t:n.name==="cdsMax"?this.cdEnd=t:n.name==="strand"&&(this.strand=t):n.namespace==="aed"?n.name==="name"&&(this.name=t):n.namespace==="style"&&n.name==="color"&&(this.color=qe.createColorString(t))}}a0.prototype.popupData=function(){for(var i=[],e=this.aed,t=0;t<this.allColumns.length;t++){var n=this.allColumns[t],r=e.columns[t].name;r!=="sequence"&&r!=="color"&&n&&i.push({name:r,value:n})}return i};function G5(i,e){var t,n,r,s=0,a=this.aed.columns,o,l,c;if(i.length!==a.length){console.log("Corrupted AED file row: "+i.join(","));return}for(c=0;c<i.length;c++)o=a[c],r=i[c],r!==""&&s++,o.name==="name"&&o.namespace==="aed"?t=r:o.name==="value"&&o.namespace==="aed"&&(n=r);if(s===2&&t&&n){l=s0(t),this.aed.metadata[l.namespace]||(this.aed.metadata[l.namespace]={}),this.aed.metadata[l.namespace][l.name]||(this.aed.metadata[l.namespace][l.name]={type:l.type,value:n});return}var h=new a0(this.aed,i);if(!h.chr||!h.start&&h.start!==0||!h.end){console.log("Cannot parse feature: "+i.join(","));return}return h}function o0(i,e){if(i.length===0||(i.sort(function(r,s){const a=r.minv.block-s.minv.block;return a!==0?a:r.minv.offset-s.minv.offset}),i.length<=1))return i;e&&(i=i.filter(r=>r.maxv.isGreaterThan(e)));const t=[];let n;for(let r of i)n&&$5(n,r)?r.maxv.isGreaterThan(n.maxv)&&(n.maxv=r.maxv):(t.push(r),n=r);return t}function $5(i,e){const t=e.minv.block-i.maxv.block;return e.maxv.block-i.minv.block<5e6&&t<65e3}const j5=21582659,W5=38359875;async function K5(i){const e=new Y5;return e.parse(i),e}class Y5{constructor(){this.tabix=!0}parse(e){const t=new bt(new DataView(e)),n=t.getInt();if(n!==j5)throw Error(n===W5?"CSI version 2 is not supported.  Please enter an issue at https://github.com/igvteam/igv.js":"Not a CSI index");this.indices=[],this.blockMin=Number.MAX_SAFE_INTEGER,this.lastBlockPosition=[],this.sequenceIndexMap={},this.minShift=t.getInt(),this.depth=t.getInt();const r=t.getInt(),s=[];let a=0;if(r>=28){t.getInt(),t.getInt(),t.getInt(),t.getInt(),t.getInt(),t.getInt();const c=t.getInt(),h=t.position+c;let f=0;for(;t.position<h;){let d=t.getString();this.sequenceIndexMap[d]=f,s[f]=d,f++}}const o=this.bin_limit()+1,l=t.getInt();for(let c=0;c<l;c++){const h=[],f=[],d=t.getInt();for(let u=0;u<d;u++){const p=t.getInt();if(f[p]=t.getVPointer(),p>o)t.getInt(),t.getVPointer(),t.getVPointer(),t.getLong(),t.getLong();else{h[p]=[];const m=t.getInt();for(let F=0;F<m;F++){const g=t.getVPointer(),w=t.getVPointer();g&&w&&(g.block<this.blockMin&&(this.blockMin=g.block),w.block>a&&(a=w.block),h[p].push([g,w]))}}}d>0&&(this.indices[c]={binIndex:h,loffset:f})}this.lastBlockPosition=a}get sequenceNames(){return Object.keys(this.sequenceIndexMap)}chunksForRange(e,t,n){const r=this.indices[e];if(r){const s=this.reg2bins(t,n);if(s.length==0)return[];const a=[];for(let c of s)for(let h=c[0];h<=c[1];h++)if(r.binIndex[h]){const f=r.binIndex[h];for(let d of f){const u=d[0],p=d[1];a.push({minv:u,maxv:p,bin:h})}}let o=s[this.depth][0];do{if(r.binIndex[o])break;const h=(this.getParentBin(o)<<3)+1;o>h?o--:o=this.getParentBin(o)}while(o!=0);const l=r.loffset[o];return o0(a,l)}else return[]}getParentBin(e){return e==0?0:e-1>>3}reg2bins(e,t){e-=1,e<1&&(e=1),t>2**34&&(t=2**34),t-=1;let n=0,r=0,s=this.minShift+this.depth*3;const a=[];for(;n<=this.depth;s-=3,r+=1<<n*3,n+=1){const o=r+(e>>s),l=r+(t>>s);a.push([o,l])}return a}bin_limit(){return((1<<(this.depth+1)*3)-1)/7}}const Z5=21578050,X5=21578324;async function J5(i){const e=new l0;return await e.parse(i,!1),e}async function ey(i){const e=new l0;return await e.parse(i,!0),e}class l0{constructor(){}async parse(e,t){const n=[];let r=Number.MAX_SAFE_INTEGER,s=0;const a=new bt(new DataView(e)),o=a.getInt(),l={};if(o===Z5||t&&o===X5){const c=a.getInt();if(t){a.getInt(),a.getInt(),a.getInt(),a.getInt(),a.getInt(),a.getInt(),a.getInt();for(let h=0;h<c;h++){let f=a.getString();l[f]=h}}for(let h=0;h<c;h++){const f={},d=[],u=a.getInt();for(let m=0;m<u;m++){const F=a.getInt();if(F===37450)a.getInt(),a.getVPointer(),a.getVPointer(),a.getLong(),a.getLong();else{f[F]=[];const g=a.getInt();for(let w=0;w<g;w++){const b=a.getVPointer(),y=a.getVPointer();b&&y&&(b.block<r&&(r=b.block),y.block>s&&(s=y.block),f[F].push([b,y]))}}}const p=a.getInt();for(let m=0;m<p;m++){const F=a.getVPointer();d.push(F)}u>0&&(n[h]={binIndex:f,linearIndex:d})}this.firstBlockPosition=r,this.lastBlockPosition=s,this.indices=n,this.sequenceIndexMap=l,this.tabix=t}else throw new Error(indexURL+" is not a "+(t?"tabix":"bai")+" file")}get sequenceNames(){return Object.keys(this.sequenceIndexMap)}chunksForRange(e,t,n){const s=this.indices[e];if(s){const a=ty(t,n),o=[];for(let d of a)for(let u=d[0];u<=d[1];u++)if(s.binIndex[u]){const p=s.binIndex[u];for(let m of p){const F=m[0],g=m[1];o.push({minv:F,maxv:g})}}const l=s.linearIndex.length;let c;const h=Math.min(t>>14,l-1),f=Math.min(n>>14,l-1);for(let d=h;d<=f;d++){const u=s.linearIndex[d];if(u){c=u;break}}return o0(o,c)}else return[]}}function ty(i,e){const t=[];return e>=1<<29&&(e=1<<29),--e,t.push([0,0]),t.push([1+(i>>26),1+(e>>26)]),t.push([9+(i>>23),9+(e>>23)]),t.push([73+(i>>20),73+(e>>20)]),t.push([585+(i>>17),585+(e>>17)]),t.push([4681+(i>>14),4681+(e>>14)]),t}async function iy(i){const e=new ny;return e.parse(i),e}class ny{constructor(){this.tribble=!0}async parse(e){let t=0;this.chrIndex={},this.lastBlockPosition=[];const n=new bt(new DataView(e));s(n);let r=n.getInt();for(;r-- >0;){let a=n.getString();const o=n.getInt(),l=n.getInt(),c=n.getInt();n.getInt()>0,n.getInt();let h=n.getLong();const f=[];for(let d=0;d<l;d++){const u=n.getLong();f.push({min:h,max:u}),h=u,u>t&&(t=u)}this.chrIndex[a]={chr:a,blocks:f,longestFeature:c,binWidth:o}}this.lastBlockPosition=t;function s(a){a.getInt(),a.getInt();const o=a.getInt();if(a.getString(),a.getLong(),a.getLong(),a.getString(),a.getInt(),o>=3){let l=a.getInt();for(;l-- >0;)a.getString(),a.getString()}}}get sequenceNames(){return Object.keys(this.chrIndex)}chunksForRange(e,t,n){const r=this.chrIndex[e];if(r){const s=r.blocks,a=r.longestFeature,o=r.binWidth,l=Math.max(t-a,0),c=Math.floor(l/o);if(c>=s.length)return[];{const h=Math.min(Math.floor((n-1)/o),s.length-1),f=s[c].min,d=s[h].max;return d-f===0?[]:[{minv:{block:f,offset:0},maxv:{block:d,offset:0}}]}}else return}}const ry=21582659,sy=38359875,ay=21578050,oy=21578324,ly=1480870228;async function c0(i,e){let t=await Se.loadArrayBuffer(i,Le(e)),n=new DataView(t);switch(n.getUint8(0)===31&&n.getUint8(1)===139&&(t=ki(t).buffer,n=new DataView(t)),n.getInt32(0,!0)){case ay:return J5(t);case oy:return ey(t);case ry:return K5(t);case ly:return iy(t);case sy:throw Error("CSI version 2 is not supported.");default:throw Error(`Unrecognized index type: ${i}`)}}function Qt(i){return typeof i=="string"||i instanceof String?new cy(i):new hy(i)}class cy{constructor(e){this.data=e,this.ptr=0}nextLine(){var e=this.ptr,t=this.data.indexOf(`
`,e),n=this.data;if(t>0)return this.ptr=t+1,t>e&&n.charAt(t-1)==="\r"?n.substring(e,t-1):n.substring(e,t);var r=n.length;return this.ptr=r,e>=r?void 0:n.substring(e)}}class hy{constructor(e){this.data=e,this.length=this.data.length,this.ptr=0}nextLine(){if(this.ptr>=this.data.length)return;let e=this.ptr;const t=this.data;let n="",r=!1;for(;e<t.length;){var s=t[e],a=0,o=0;if(s<=127?(a=0,o=s&255):s<=223?(a=1,o=s&31):s<=239?(a=2,o=s&15):s<=244&&(a=3,o=s&7),t.length-e-a>0)for(var l=0;l<a;)s=t[e+l+1],o=o<<6|s&63,l+=1;else o=65533,a=t.length-e;e+=a+1;const c=String.fromCodePoint(o);if(c==="\r")r=!0;else{if(c===`
`)break;r&&(n+="\r",r=!1),n+=c}}return this.ptr=e,n}}class fy{constructor(e){this.config=e,this.filePtr=0,this.bufferPtr=0,this.buffer}async nextLine(){let e;try{for(;;){const t=this.buffer?this.buffer.length:0;for(;this.bufferPtr<t;){const n=String.fromCharCode(this.buffer[this.bufferPtr++]);if(n!=="\r"){if(n===`
`)return e;e=e?e+n:n}}if(this.eof)return e;await this.readNextBlock()}}catch(t){return console.warn(t),this.eof=!0,e}}async readNextBlock(){const e=Le(this.config,{range:{start:this.filePtr,size:26}}),t=await Se.loadArrayBuffer(this.config.url,e),n=gh(t);if(n===0)this.eof=!0,this.buffer=void 0;else{const r=Le(this.config,{range:{start:this.filePtr,size:n}}),s=await Se.loadArrayBuffer(this.config.url,r);s.byteLength<n&&(this.eof=!0),this.buffer=ki(s),this.buffer.byteLength==0&&(this.eof=!0),this.bufferPtr=0,this.filePtr+=s.byteLength}}}function dy(i){if(i.length===1)return i[0];let e=0;for(const r of i)e+=r.byteLength;const t=new Uint8Array(e);let n=0;for(const r of i)t.set(new Uint8Array(r),n),n+=r.byteLength;return t.buffer}const Gd=i=>{const e=ArrayBuffer.isView(i)?i:new Uint8Array(i);return(e[17]<<8|e[16])+1};class h0{constructor(e){this.config=e,this.cacheBlocks=e.cacheBlocks!=!1,this.cache=void 0}async getData(e,t){const n=e.block,r=t.block,s=t.offset===0,a=await this.getInflatedBlocks(n,r,s);if(a.length===1)return a[0];let o=0;for(const h of a)o+=h.byteLength;const l=new Uint8Array(o);let c=0;for(const h of a)l.set(h,c),c+=h.byteLength;return l}async getInflatedBlocks(e,t,n){if(this.cacheBlocks){const r=this.cache;if(r&&r.startBlock<=e&&(r.endBlock>=t||n&&r.nextEndBlock===t)){const s=e-r.startBlock,a=t-r.startBlock;return pl(r.buffer,s,a)}else{let s;if(!r||r.startBlock>t||r.endBlock<e)s=await this.loadBLockData(e,t,{skipEnd:n});else{const o=[];if(e<r.startBlock){const c=await this.loadBLockData(e,r.startBlock,{skipEnd:!0});o.push(c)}let l;if(e<=r.startBlock&&t>=r.endBlock)l=r.buffer;else{const c=Math.max(0,e-r.startBlock);let h;if(t>=r.endBlock)h=r.buffer.byteLength;else{const f=$d(r.buffer);for(let d=0;d<f.length-1;d++)if(r.startBlock+f[d]===t){h=f[d+1];break}}l=r.buffer.slice(c,h)}if(o.push(l),t>r.endBlock){const c=await this.loadBLockData(r.endBlock,t,{skipStart:!0,skipEnd:n});o.push(c)}s=dy(o)}let a=t;if(n){const o=$d(s);t=o[o.length-1]}return this.cache={startBlock:e,endBlock:t,nextEndBlock:a,buffer:s},pl(s)}}else{const r=await this.loadBLockData(e,t,{skipEnd:n});return pl(r)}}async loadBLockData(e,t,n){const r=this.config,s=n&&n.skipStart,a=n&&n.skipEnd;let o=0;if(!a){const c=Le(r,{range:{start:t,size:26}}),h=await Se.loadArrayBuffer(r.url,c);o=Gd(h)}if(s){const c=Le(r,{range:{start:e,size:26}}),h=await Se.loadArrayBuffer(r.url,c);e+=Gd(h)}const l=Le(r,{range:{start:e,size:t+o-e}});return Se.loadArrayBuffer(r.url,l)}}function $d(i){const e=i.byteLength;let t=0;const n=[0];for(;t<e;){const r=new Uint8Array(i,t),s=(r[17]<<8|r[16])+1;t+=s,t<e&&n.push(t)}return n}function pl(i,e,t){e=e||0;const n=[];let r=e;const s=i.byteLength-18;for(;r<s;)try{const a=new Uint8Array(i,r,18),o=a[11]<<8|a[10],l=a[17]<<8|a[16],c=12+o+r,h=i.byteLength-c,f=l-o-18;if(h<f||f<=0)break;const d=new Uint8Array(i,c,f),u=ph(d);if(n.push(u),t===r)break;r+=l+1}catch(a){console.error(a);break}return n}const uy=Math.log10(Number.MIN_VALUE);class f0{constructor(e){ke(this,"chrCol",-1);ke(this,"snpCol",-1);ke(this,"posCol",-1);ke(this,"pValueCol",-1);ke(this,"phenotypeColumn",-1);ke(this,"delimiter","	");this.config=e}async parseHeader(e){const t=this.config;t.delimiter&&(this.delimiter=t.delimiter);const n=await e.nextLine(),r=this.parseHeaderLine(n);return t.chrColumn&&(this.chrColumn=t.chrColumn-1),t.snpColumn&&(this.snpColumn=t.snpColumn-1),t.posColumn&&(this.posColumn=t.posColumn-1),t.pValueColumn&&(this.pValueColumn=t.pValueColumn-1),t.phenotypeColumn&&(this.phenotypeColumn=t.phenotypeColumn-1),r}parseHeaderLine(e){this.columns=e.split(this.delimiter);for(let t=0;t<this.columns.length;t++)switch(this.columns[t].toLowerCase()){case"chr":case"chromosome":case"chr_id":case"chrom":this.chrColumn=t;break;case"bp":case"pos":case"position":case"chr_pos":case"chromEnd":this.posColumn=t;break;case"p":case"pval":case"pvalue":case"p-value":case"p.value":this.pValueColumn=t;break;case"rsid":case"variant":case"snp":this.snpColumn=t;break;case"phenotype":case"gene":case"gene_id":case"molecular_trait_id":this.phenotypeColumn=t;break}return this.columns}async parseFeatures(e){const t=[],n=e.nextLine();this.columns||this.parseHeaderLine(n);let r;const s=a=>{const o=a.indexOf("E");return o>0&&Number.parseInt(a.substring(o+1))<uy?Number.MIN_VALUE:Number(a)};for(;(r=e.nextLine())!==void 0;){const a=r.split(this.delimiter);if(a.length===this.columns.length){const o=a[this.posColumn];if(o.indexOf(";")>0||o.length==0||o.indexOf("x")>0)continue;const l=a[this.chrColumn],c=s(a[this.pValueColumn]),h=parseInt(o)-1,f=h+1,d=a[this.snpColumn],u=a[this.phenotypeColumn],p=new py({chr:l,start:h,end:f,pValue:c,snp:d,phenotype:u},this.columns,a);t.push(p)}}return t}static isQTL(e){const t=e.split("	");if(t.length<5)return!1;const n=[["chr","chromosome","chr_id","chrom"],["bp","pos","position","chr_pos","chromEnd"],["p","pval","p-value","p.value"],["rsid","variant","snp"],["phenotype","gene","gene_id","molecular_trait_id"]];for(let r of n)if(!t.some(s=>r.includes(s.toLowerCase())))return!1;return!0}}class py{constructor({chr:e,start:t,end:n,pValue:r,snp:s,phenotype:a},o,l){this.chr=e,this.start=t,this.end=n,this.pValue=r,this.snp=s,this.phenotype=a,this.headers=o,this.tokens=l}popupData(){const e=[];for(let t=0;t<this.headers.length;t++)e.push({name:this.headers[t],value:this.tokens[t]});return e}}const gy=5e8;class jd{constructor(e,t){ke(this,"sequenceNames");if(this.config=e||{},this.genome=t,this.indexURL=e.indexURL,this.indexed=e.indexed||this.indexURL!==void 0,this.queryable=this.indexed,tn(this.config.url))this.filename=this.config.url.name;else if(qi(this.config.url))this.indexed=!1,this.dataURI=e.url;else{const n=R2(this.config.url);this.filename=e.filename||n.file}this.parser=this.getParser(this.config),this.config.format==="vcf"&&!this.config.indexURL&&console.warn("Warning: index file not specified.  The entire vcf file will be loaded.")}async defaultVisibilityWindow(){if(this.config.indexURL){const e=await this.getIndex();if(e&&e.lastBlockPosition){let t=0;const n=1e4;for(let r of e.sequenceNames){const s=this.genome.getChromosome(r);s&&(t+=s.bpLength)}return Math.round(t/e.lastBlockPosition*n)}}}async readFeatures(e,t,n){!this.dataURI&&!this.header&&await this.readHeader();let r;return await this.getIndex()?(this.indexed=!0,r=await this.loadFeaturesWithIndex(e,t,n)):this.dataURI?(this.indexed=!1,r=await this.loadFeaturesFromDataURI()):this.config.sourceType==="service"?r=await this.loadFeaturesFromService(e,t,n):(this.indexed=!1,r=await this.loadFeaturesNoIndex()),r.sort(function(a,o){return a.chr===o.chr?a.start-o.start:a.chr.localeCompare(o.chr)}),r}async readHeader(){if(this.dataURI)return await this.loadFeaturesFromDataURI(this.dataURI),this.header;if(this.config.indexURL){const e=await this.getIndex();if(!e)throw new Error("Unable to load index: "+this.config.indexURL);this.sequenceNames=new Set(e.sequenceNames);let t;if(e.tabix)this._blockLoader=new h0(this.config),t=new fy(this.config);else{const n=Object.values(e.chrIndex).flatMap(a=>a.blocks).map(a=>a.max).reduce((a,o)=>Math.min(a,o),Number.MAX_SAFE_INTEGER),r=Le(this.config,{bgz:e.tabix,range:{start:0,size:n}}),s=await Se.loadString(this.config.url,r);t=Qt(s)}return this.header=await this.parser.parseHeader(t),this.header}else if(this.config.sourceType==="service"){if(this.config.seqnamesURL){const e=Le(this.config,{}),t=await Se.loadString(this.config.seqnamesURL,e);t&&(this.sequenceNames=new Set(t.split(",").map(n=>n.trim()).filter(n=>n)))}if(this.config.headerURL){const e=Le(this.config,{}),t=await Se.loadString(this.config.headerURL,e),n=Qt(t);return this.header=await this.parser.parseHeader(n),this.header}}else{let e;if(this.config._filecontents)e=this.config._filecontents,delete this.config._filecontents;else{const n=Le(this.config);e=await Se.loadByteArray(this.config.url,n)}e.length<gy&&(e=new TextDecoder().decode(e));let t=Qt(e);this.header=await this.parser.parseHeader(t),t=Qt(e),this.features=await this.parser.parseFeatures(t),this.sequenceNames=new Set;for(let n of this.features)this.sequenceNames.add(n.chr);return this.header}}getParser(e){switch(e.format){case"vcf":return new n0(e);case"seg":return new ul("seg");case"mut":return new ul("mut");case"maf":return new ul("maf");case"gwas":return new r0(e);case"qtl":return new f0(e);case"aed":return new U5(e);default:return new F5(e)}}async loadFeaturesNoIndex(){if(this.features){const e=this.features;return delete this.features,e}else{const e=Le(this.config),t=await Se.loadByteArray(this.config.url,e);if(!this.header){const s=Qt(t);this.header=await this.parser.parseHeader(s)}const n=Qt(t),r=[];return await this._parse(r,n),r}}async loadFeaturesWithIndex(e,t,n){const r=this.config;this.parser;const s=this.index.tabix,a=s?this.index.sequenceIndexMap[e]:e;if(a===void 0)return[];const o=this.index.chunksForRange(a,t,n);if(!o||o.length===0)return[];{const l=[];for(let c of o){let h;if(s)h=await this._blockLoader.getData(c.minv,c.maxv);else{const u=Le(r,{range:{start:c.minv.block,size:c.maxv.block-c.minv.block+1}});h=await Se.loadString(r.url,u)}const f=c.minv.offset?h.slice(c.minv.offset):h,d=Qt(f);await this._parse(l,d,e,n,t)}return l}}async loadFeaturesFromService(e,t,n){let r;typeof this.config.url=="function"?r=this.config.url({chr:e,start:t,end:n}):r=this.config.url.replace("$CHR",e).replace("$START",t).replace("$END",n);const s=Le(this.config),a=await Se.loadString(r,s),o=Qt(a),l=[];return await this._parse(l,o),l}async _parse(e,t,n,r,s){let a=await this.parser.parseFeatures(t);if(a.sort(function(o,l){return o.chr===l.chr?o.start-l.start:o.chr.localeCompare(l.chr)}),n===void 0)for(let o of a)e.push(o);else{let o=!1;for(let l=0;l<a.length;l++){const c=a[l];if(c.chr===n){if(c.start>r){e.push(c);break}c.end>=s&&c.start<=r&&(o||(o=!0,l>0&&e.push(a[l-1])),e.push(c))}}}}async getIndex(){if(this.index)return this.index;if(this.config.indexURL)return this.index=await this.loadIndex(),this.index}async loadIndex(){const e=this.config.indexURL;return c0(e,this.config)}async loadFeaturesFromDataURI(){if(this.features){const e=this.features;return delete this.features,e}else{const e=nn(this.dataURI);let t=Qt(e);this.header=await this.parser.parseHeader(t),this.header instanceof String&&this.header.startsWith("##gff-version 3")&&(this.format="gff3"),t=Qt(e);const n=[];return await this._parse(n,t),n}}}const my=ut;class wy{constructor(e){this.config=e}async readFeatures(e,t,n){let r;typeof this.config.url=="function"?r=this.config.url({chr:e,start:t,end:n}):r=this.config.url.replace("$CHR",e).replace("$START",t).replace("$END",n);let s=Object.assign({},this.config);this.config.body!==void 0&&(typeof this.config.body=="function"?s.body=this.config.body({chr:e,start:t,end:n}):s.body=this.config.body.replace("$CHR",e).replace("$START",t).replace("$END",n));let a;const o=await Se.load(r,s);if(o&&(typeof this.config.parser=="function"?a=this.config.parser(o):my(o)?a=JSON.parse(o):a=o),this.config.mappings){let l=Object.keys(this.config.mappings);for(let c of a)for(let h of l)c[h]=c[this.config.mappings[h]]}return a}}const d0=function(i,e){this.config=i,this.genome=e,this.expandQueryInterval=!1};d0.prototype.readFeatures=function(i,e,t){const n=Math.max(0,Math.floor(e));let r=Math.ceil(t);if(this.genome){const a=this.genome.getChromosome(i);a&&r>a.bpLength&&(r=a.bpLength)}const s=this.config.url+"?db="+this.config.db+"&table="+this.config.tableName+"&chr="+i+"&start="+n+"&end="+r;return Se.loadJson(s,this.config).then(function(a){return a?(a.forEach(function(o){o.hasOwnProperty("exonStarts")&&o.hasOwnProperty("exonEnds")&&o.hasOwnProperty("exonCount")&&o.hasOwnProperty("cdsStart")&&o.hasOwnProperty("cdsEnd")&&by(o)}),a):null})};function by(i){var e,t,n,r,s,a;e=i.exonCount,t=i.exonStarts.split(","),n=i.exonEnds.split(","),r=[];for(var o=0;o<e;o++){s=parseInt(t[o]),a=parseInt(n[o]);var l={start:s,end:a};(i.cdsStart>a||i.cdsEnd<i.cdsStart)&&(l.utr=!0),i.cdsStart>=s&&i.cdsStart<=a&&(l.cdStart=i.cdsStart),i.cdsEnd>=s&&i.cdsEnd<=a&&(l.cdEnd=i.cdsEnd),r.push(l)}i.exons=r}class Fy{constructor(e){ke(this,"featureCaches",[]);ke(this,"gtexChrs",new Set(["chr1","chr10","chr11","chr12","chr13","chr14","chr15","chr16","chr17","chr18","chr19","chr2","chr20","chr21","chr22","chr3","chr4","chr5","chr6","chr7","chr8","chr9","chrM","chrX","chrY"]));this.config=e,this.url=e.url,this.tissueId=e.tissueSiteDetailId,this.datasetId=e.datasetId||"gtex_v8"}async readFeatures(e,t,n){const r=e.startsWith("chr")?e:e==="MT"?"chrM":"chr"+e;if(!this.gtexChrs.has(r))return[];const s=Math.floor(t),a=Math.ceil(n),o=this.datasetId,l=this.url+"?chromosome="+r+"&start="+s+"&end="+a+"&tissueSiteDetailId="+this.tissueId+"&datasetId="+o,c=await Se.loadJson(l,{withCredentials:this.config.withCredentials});return c&&c.singleTissueEqtl?c.singleTissueEqtl.map(h=>new yy(h)):[]}}class yy{constructor(e){this.chr=e.chromosome,this.start=e.pos-1,this.end=this.start+1,this.snp=e.snpId,this.phenotype=e.geneSymbol,this.pValue=e.pValue,this.json=e}popupData(){return Object.keys(this.json).map(e=>({name:e,value:this.json[e]}))}}class Ch{constructor(e,t){if(this.config=e,this.genome=t,e.format)this.format=e.format.toUpperCase();else throw Error('Format is required, and must be either "bam" or "cram"');if(!(this.format==="BAM"||this.format==="VCF"))throw Error(`htsget format ${e.format} is not supported`)}async readHeaderData(){const e=`${gl(this.config)}?class=header&format=${this.format}`,t=await Se.loadJson(e,Le(this.config));return await this.loadUrls(t.htsget.urls)}async readData(e,t,n){const r=`${gl(this.config)}?format=${this.format}&referenceName=${e}&start=${Math.floor(t)}&end=${Math.ceil(n)}`,s=await Se.loadJson(r,Le(this.config));return this.loadUrls(s.htsget.urls)}async loadUrls(e){const t=[];for(let r of e)if(r.url.startsWith("data:"))t.push(Promise.resolve(vy(r.url)));else{const s=Le(this.config||{});r.headers&&(s.headers=Object.assign(s.headers||{},r.headers)),t.push(Se.loadArrayBuffer(r.url,s))}const n=await Promise.all(t);return Ay(n)}static async inferFormat(e){try{const t=gl(e),n=`${t}${t.includes("?")?"&":"?"}class=header`,r=await Se.loadJson(n,Le(e));if(r.htsget){const s=r.htsget.format;if(!(s==="BAM"||s==="VCF"))throw Error(`htsget format ${s} is not supported`);e.format=s.toLowerCase(),e.sourceType="htsget",e.name||(e.name=await Bo(e.url))}}catch{}}}function gl(i){if(i.url&&i.endpoint&&i.id)return i.url+i.endpoint+i.id;if(i.endpoint&&i.id)return i.endpoint+i.id;if(i.url)return i.url.startsWith("htsget://")?i.url.replace("htsget://","https://"):i.url;throw Error("Must specify either 'url', or 'endpoint' and 'id")}function Ay(i){let e=0;for(let r of i)e+=r.byteLength;let t=0;const n=new Uint8Array(e);for(let r of i){const s=new Uint8Array(r);n.set(s,t),t+=s.length}return n}function vy(i){const e=i.split(","),t=e[0].split(":")[1];let n=e[1];t.indexOf("base64")>=0?n=atob(n):n=decodeURI(n);const r=new Uint8Array(n.length);for(var s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class _y extends Ch{constructor(e,t){super(e,t),this.parser=new n0}async readHeader(){if(!this.header){let e=await this.readHeaderData();eo(e)&&(e=Ss(e));const t=Qt(e);this.header=await this.parser.parseHeader(t,this.genome),this.chrAliasTable=this.header.chrAliasTable}return this.header}async readFeatures(e,t,n){if(this.config.format&&this.config.format.toUpperCase()!=="VCF")throw Error(`htsget format ${this.config.format} is not supported`);this.chrAliasTable||await this.readHeader();let r=this.chrAliasTable.has(e)?this.chrAliasTable.get(e):e,s=await this.readData(r,t,n);eo(s)&&(s=Ss(s));const a=Qt(s);return this.parser.parseFeatures(a)}}class Cy{constructor(e,t){ke(this,"chrAliasTable",new Map);this.sequenceNames=new Set(e),this.genome=t}async getAliasName(e){if(!this.genome)return e;if(!this.chrAliasTable.has(e)){const t=await this.genome.getAliasRecord(e);if(!t)this.chrAliasTable.set(e,void 0);else{let n;const r=Object.keys(t).filter(s=>s!=="start"&&s!=="end").map(s=>t[s]).filter(s=>this.sequenceNames.has(s));r.length>0&&(n=r[0]),this.chrAliasTable.set(e,n)}}return this.chrAliasTable.get(e)}}class Ks{constructor(e){this.genome=e}async nextFeature(e,t,n,r){let s=this.genome.chromosomeNames||[e],a=s.indexOf(e);if(a<0)return;const o=Math.min(1e4,r||1e4);let l=n?t:Math.max(t-o,0);for(;a<s.length&&a>=0;){e=s[a];const h=this.genome.getChromosome(e).bpLength;for(;l<h&&l>=0;){let f=n?l+o:Math.min(t,l+o);const d=await this.getFeatures({chr:e,start:l,end:f,visibilityWindow:r});if(d){const u=(F,g)=>F.start-g.start+F.end-g.end,p=Array.from(d);p.sort(u);let m=n?0:p.length-1;for(;m>=0&&m<p.length;){const F=p[m],g=(F.start+F.end)/2;if(n){if(g>t)return F;m++}else{if(g<t)return F;m--}}}l=n?f:l-o}if(n)a++,l=0,t=0;else{if(a--,a<0)break;t=this.genome.getChromosome(s[a]).bpLength,l=t-o}}}async previousFeature(e,t,n,r){let s=this.genome.chromosomeNames||[e],a=s.indexOf(e);if(a<0)return;const o=Math.min(1e4,r||1e4);let l=n?t:Math.max(t-o,0);for(;a<s.length&&a>=0;){e=s[a];const h=this.genome.getChromosome(e).bpLength;for(;l<h&&l>=0;){let f=Math.min(t,l+o);const d=await this.getFeatures({chr:e,start:l,end:f,visibilityWindow:r});if(d){const u=(F,g)=>F.start-g.start+F.end-g.end,p=Array.from(d);p.sort(u);let m=n?0:p.length-1;for(;m>=0&&m<p.length;){const F=p[m],g=(F.start+F.end)/2;if(n){if(g>t)return F;m++}else{if(g<t)return F;m--}}}l=n?f:l-o}if(n)a++,l=0,t=0;else{if(a--,a<0)break;t=this.genome.getChromosome(s[a]).bpLength,l=t-o}}}}const xy=1;class ky{constructor(e,t){this.config=e,this.genome=t,this.path=e.url,this.groupCache={},this.datasetCache={}}async readHeader(){if(this.magic!==void 0)return this;let e=await Se.loadArrayBuffer(this.path,Le(this.config,{range:{start:0,size:64e3}})),t=new bt(new DataView(e));if(this.magic=t.getInt(),this.version=t.getInt(),this.indexPos=t.getLong(),this.indexSize=t.getInt(),t.getInt(),this.version>=2){let s=t.getInt();for(this.windowFunctions=[];s-- >0;)this.windowFunctions.push(t.getString())}this.trackType=t.getString(),this.trackLine=t.getString();let n=t.getInt();for(this.trackNames=[];n-- >0;)this.trackNames.push(t.getString());this.genomeID=t.getString(),this.flags=t.getInt(),this.compressed=(this.flags&xy)!==0,e=await Se.loadArrayBuffer(this.path,Le(this.config,{range:{start:this.indexPos,size:this.indexSize}})),t=new bt(new DataView(e)),this.datasetIndex={};let r=t.getInt();for(;r-- >0;){const s=t.getString(),a=t.getLong(),o=t.getInt();this.datasetIndex[s]={position:a,size:o}}for(this.groupIndex={},r=t.getInt();r-- >0;){const s=t.getString(),a=t.getLong(),o=t.getInt();this.groupIndex[s]={position:a,size:o}}return this}async readDataset(e,t,n){const r=e+"_"+t+"_"+n;if(this.datasetCache[r])return this.datasetCache[r];{await this.readHeader();const s=this.version<2?"":"/"+t,a=e.toLowerCase()==="all"||n===void 0?"0":n.toString();let o;t==="raw"?o="/"+e+"/raw":o="/"+e+"/z"+a+s;const l=this.datasetIndex[o];if(l===void 0)return;const c=await Se.loadArrayBuffer(this.path,Le(this.config,{range:{start:l.position,size:l.size}}));if(!c)return;const h=new bt(new DataView(c));let f=h.getInt();const d={};for(;f-- >0;)d[h.getString()]=h.getString();const u=h.getString(),p=h.getFloat();let m=h.getInt();const F=[];for(;m-- >0;)F.push({position:h.getLong(),size:h.getInt()});const g={name:o,attributes:d,dataType:u,tileWidth:p,tiles:F};return this.datasetCache[r]=g,g}}async readRootGroup(){const e=this.genome,t=this.groupCache["/"];if(t)return t;{const n=await this.readGroup("/"),r=n.chromosomes,s=n.maxZoom;s&&(this.maxZoom=Number(s));const a=n.totalCount;a&&(n.totalCount=Number(a));const o={};return r&&r.split(",").forEach(function(l){const c=e.getChromosomeName(l);o[c]=l}),this.chrAliasTable=o,this.groupCache["/"]=n,n}}async readGroup(e){const t=this.groupCache[e];if(t)return t;{await this.readHeader();const n=this.groupIndex[e];if(n===void 0)return;const r=await Se.loadArrayBuffer(this.path,Le(this.config,{range:{start:n.position,size:n.size}}));if(!r)return;const s=new bt(new DataView(r)),a={name:e};let o=s.getInt();for(;o-- >0;){const l=s.getString(),c=s.getString();a[l]=c}return this.groupCache[e]=a,a}}async readTiles(e,t){if(e.sort(function(r,s){return r.position-s.position}),e=e.filter(function(r){return r.size>0}),e.length===0)return[];const n=[];for(let r of e){const s=await Se.loadArrayBuffer(this.path,Le(this.config,{range:{start:r.position,size:r.size}}));let a;try{a=this.compressed?Es(s).buffer:s}catch(h){console.error(h);continue}const o=new bt(new DataView(a)),l=o.getString();let c;switch(l){case"fixedStep":c=Wd(o,t);break;case"variableStep":c=Kd(o,t);break;case"bed":case"bedWithName":c=Yd(o,t,l);break;default:throw"Unknown tile type: "+l}n.push(c)}return n}async readTile(e,t){let n=await Se.loadArrayBuffer(this.path,Le(this.config,{range:{start:e.position,size:e.size}}));this.compressed&&(n=Es(n).buffer);const r=new bt(new DataView(n)),s=r.getString();switch(s){case"fixedStep":return Wd(r,t);case"variableStep":return Kd(r,t);case"bed":case"bedWithName":return Yd(r,t,s);default:throw"Unknown tile type: "+s}}}function Wd(i,e){const t=i.getInt(),n=i.getInt(),r=i.getFloat(),s=[];let a=e;for(;a-- >0;){let o=t;const l=[];for(;o-- >0;)l.push(i.getFloat());s.push(l)}return{type:"fixedStep",start:n,span:r,data:s,nTracks:e,nPositions:t}}function Kd(i,e){const t=i.getInt(),n=i.getFloat(),r=i.getInt(),s=[];let a=r;for(;a-- >0;)s.push(i.getInt());i.getInt();const o=[];let l=e;for(;l-- >0;){a=r;const c=[];for(;a-- >0;)c.push(i.getFloat());o.push(c)}return{type:"variableStep",tileStart:t,span:n,start:s,data:o,nTracks:e,nPositions:r}}function Yd(i,e,t){const n=i.getInt();let r=n;const s=[];for(;r-- >0;)s.push(i.getInt());r=n;const a=[];for(;r-- >0;)a.push(i.getInt());i.getInt();const o=[];let l=e;for(;l-- >0;){let c=n;const h=[];for(;c-- >0;)h.push(i.getFloat());o.push(h)}if(t==="bedWithName"){r=n;const c=[];for(;r-- >0;)c.push(i.getString())}return{type:t,start:s,end:a,data:o,nTracks:e,nPositions:n}}var Ps;class u0 extends Ks{constructor(t,n){super(n);ct(this,Ps,{});ke(this,"searchable",!1);this.genome=n,this.reader=new ky(t,n),this.queryable=!0}async getFeatures({chr:t,start:n,end:r,bpPerPixel:s,windowFunction:a="mean"}){return t.toLowerCase()==="all"?this.getWGValues(a,s):this._getFeatures(t,n,r,s,a)}async _getFeatures(t,n,r,s,a){const o=new ro(t,n,r),l=this.genome;if(!this.rootGroup&&(this.rootGroup=await this.reader.readRootGroup(),!this.normalizationFactor)){const y=this.rootGroup.totalCount;y&&(this.normalizationFactor=1e6/y)}o.bpPerPixel=s;const c=By(t,s,l);let h=this.reader.chrAliasTable[t],f=this.reader.maxZoom;h===void 0&&(h=t),f===void 0&&(f=-1);const d=c>f?"raw":a,u=await this.reader.readDataset(h,d,c);if(u==null)return[];const p=u.tileWidth,m=Math.floor(n/p),F=Math.floor(r/p),w=await this.reader.readTiles(u.tiles.slice(m,F+1),1),b=[];for(let y of w)switch(y.type){case"bed":Iy(y,t,n,r,s,b);break;case"variableStep":Ey(y,t,n,r,s,b);break;case"fixedStep":Sy(y,t,n,r,s,b);break;default:throw"Unknown tile type: "+y.type}return b.sort(function(y,v){return y.start-v.start}),b}get supportsWholeGenome(){return!0}get windowFunctions(){return this.reader.windowFunctions}async getWGValues(t,n){const r=Ve(this,Ps)[t];if(r&&r.bpPerPixel>.8*n&&r.bpPerPixel<1.2*n)return r.values;{const s=[],a=this.genome;if(this.genome.wgChromosomeNames)for(let l of a.wgChromosomeNames){const c=a.getChromosome(l).bpLength;n=c/1e3;const h=await this._getFeatures(l,0,c,n,t);if(h)for(let f of h){const d=Object.assign({},f);d.chr="all",d.start=a.getGenomeCoordinate(f.chr,f.start),d.end=a.getGenomeCoordinate(f.chr,f.end),d._f=f,s.push(d)}}return Ve(this,Ps)[t]={values:s,bpPerPixel:n},s}}}Ps=new WeakMap;function Iy(i,e,t,n,r,s){const a=i.nPositions,o=i.start,l=i.end,c=i.data[0];for(let h=0;h<a;h++){const f=o[h],d=l[h];if(!(d<t)){if(f>n)break;s.push({chr:e,start:f,end:d,value:c[h]})}}}function Ey(i,e,t,n,r,s){const a=i.nPositions,o=i.start,l=i.span,c=i.data[0];for(let h=0;h<a;h++){const f=o[h],d=f+l;if(!(d<t)){if(f>n)break;s.push({chr:e,start:f,end:d,value:c[h]})}}}function Sy(i,e,t,n,r,s){const a=i.nPositions;let o=i.start;const l=i.span,c=i.data[0];for(let h=0;h<a;h++){const f=o+l;if(o>n)break;f>=t&&(Number.isNaN(c[h])||s.push({chr:e,start:o,end:f,value:c[h]})),o=f}}var Ny=Math.log(2);function By(i,e,t){var n=t.getChromosome(i).bpLength;return Math.ceil(Math.log(Math.max(0,n/(e*700)))/Ny)}class xh{constructor(e,t,n,r){this.header=e,this.nameToId=t,this.idToName=n,this.sumLengths=r}static parseTree(e,t,n=!1){{const r=e.getInt(),s=e.getInt(),a=e.getInt(),o=e.getInt(),l=e.getLong(),c=e.getLong(),h={magic:r,blockSize:s,keySize:a,valSize:o,itemCount:l,reserved:c},f=new Map,d=[];let u=0;const p=m=>{m>=0&&(e.position=m);const F=e.getByte();e.getByte();const g=e.getUShort();if(F===1)for(let w=0;w<g;w++){let b=e.getFixedLengthString(a),y;if(o===8){y=e.getInt();const v=e.getInt();u+=v,n&&(b=n.getChromosomeName(b)),f.set(b,y),d[y]=b}else throw Error(`Unexpected "valSize" value in chromosome tree.  Expected 8, actual value is ${o}`)}else for(let w=0;w<g;w++){e.getFixedLengthString(a);const y=e.getLong()-t,v=e.position;p(y),e.position=v}};return p(-1),new xh(h,f,d,u)}}}const Zd=48,Ty=32,My=24;var wr,za;const ms=class ms{constructor(e,t,n){ct(this,wr);ke(this,"littleEndian",!0);ke(this,"nodeCache",new Map);this.path=e,this.config=t,this.startOffset=n}async init(){const e=await Ke(this,wr,za).call(this,this.startOffset,Zd);let t=e.getInt();if(t!==ms.magic&&(e.setPosition(0),this.littleEndian=!this.littleEndian,e.littleEndian=this.littleEndian,t=e.getInt(),t!==ms.magic))throw Error(`Bad magic number ${t}`);const n=e.getUInt(),r=e.getLong(),s=e.getUInt(),a=e.getUInt(),o=e.getUInt(),l=e.getUInt(),c=e.getLong(),h=e.getUInt(),f=e.getUInt(),d=this.startOffset+Zd;return this.header={magic:t,blockSize:n,itemCount:r,startChromIx:s,startBase:a,endChromIx:o,endBase:l,endFileOffset:c,itemsPerSlot:h,reserved:f,rootNodeOffset:d},this}async findLeafItemsOverlapping(e,t,n,r){const s=[],a=async o=>{const l=await this.readNode(o);for(let c of l.items)Ry(c,e,t,n,r)&&(l.type===1?s.push(c):await a(c.childOffset))};return await a(this.header.rootNodeOffset),s}async readNode(e){const t=e;if(this.nodeCache.has(t))return this.nodeCache.get(t);let n=await Ke(this,wr,za).call(this,e,4);const r=n.getByte(),s=r===1;n.getByte();const a=n.getUShort();let o=a*(s?Ty:My);n=await Ke(this,wr,za).call(this,e+4,o);const l=[];for(let h=0;h<a;h++){let f={isLeaf:s,startChrom:n.getInt(),startBase:n.getInt(),endChrom:n.getInt(),endBase:n.getInt(),childOffset:n.getLong()};s&&(f.dataSize=n.getLong(),f.dataOffset=f.childOffset),l.push(f)}const c={type:r,items:l};return this.nodeCache.set(t,c),c}};wr=new WeakSet,za=async function(e,t){const n=await Se.loadArrayBuffer(this.path,Le(this.config,{range:{start:e,size:t}}));return new bt(new DataView(n),this.littleEndian)},ke(ms,"magic",610839776);let _c=ms;function Ry(i,e,t,n,r){return i?(n>i.startChrom||n===i.startChrom&&r>=i.startBase)&&(e<i.endChrom||e===i.endChrom&&t<=i.endBase):(console.log("null item for "+e+" "+t+" "+r),!1)}function Dy(i,e,t,n){if(n==="biginteract"||t&&(t.table==="chromatinInteract"||t.table==="interact"))return r;{const s=i-3;return function(a,o){if(s>0&&(a.name=o[0]),s>1&&(a.score=Number(o[1])),s>2&&(a.strand=o[2]),s>3&&(a.cdStart=parseInt(o[3])),s>4&&(a.cdEnd=parseInt(o[4])),s>5&&o[5]!=="."&&o[5]!=="0"&&o[5]!=="-1"){const l=qe.createColorString(o[5]);a.color=l.startsWith("rgb")?l:void 0}if(s>8){const l=parseInt(o[6]),c=o[7].split(","),h=o[8].split(","),f=[];for(let d=0;d<l;d++){const u=a.start+parseInt(h[d]),p=u+parseInt(c[d]);f.push({start:u,end:p})}Ly(f,a.cdStart,a.cdEnd),a.exons=f}if(t){const l=i;for(let c=l;c<e;c++)if(c<t.fields.length){const h=t.fields[c].name,f=o[c-3];a[h]=f}}}}function r(s,a){return s.chr1=a[5],s.start1=Number.parseInt(a[6]),s.end1=Number.parseInt(a[7]),s.chr2=a[10],s.start2=Number.parseInt(a[11]),s.end2=Number.parseInt(a[12]),s.name=a[0],s.score=Number(a[1]),s.value=Number(a[2]),s.color=a[4]==="."?void 0:a[4]==="0"?"rgb(0,0,0)":a[4],s}}function Ly(i,e,t){for(let n of i){const r=n.end,s=n.start;r<e||s>t?n.utr=!0:(e>=s&&e<=r&&(n.cdStart=e),t>=s&&t<=r&&(n.cdEnd=t))}}function zy(i,e){return Math.min(1,.11+.89*(i/779)).toString()}function Hy(i){let e;const t=[];let n=!1;const r=i.trim().split(/\s*[\r\n]+\s*/g);for(let s of r)if(s=s.trim(),s.length>0){if(s.startsWith("#"))continue;if(s.startsWith("table"))e=s.split(/\s+/)[1].trim();else if(s.startsWith("("))n=!0;else if(!s.startsWith(")")){if(n){const a=s.indexOf(";");if(a>0){const o=s.substr(0,a).split(/\s+/),l=s.substr(a+1).replace(/"/g,"").trim();t.push({type:o[0],name:o[1],description:l})}}}}return{table:e,fields:t}}const Py=10;class Oy{constructor(e,t){ke(this,"ixFile");ke(this,"ixxFile");ke(this,"bufferCache",new Map);this.ixFile=t,this.ixxFile=e}async search(e,t){const r=e.split(" ")[0].toLowerCase(),s=await this._getBuffer(r,t);if(!s)return;const a=s.slice(0,s.lastIndexOf(`
`)).split(`
`).filter(l=>!!l),o=[];for(let l of a){const c=l.split(" ")[0];if(c.startsWith(r)&&o.push(l),c.slice(0,r.length)>r)break}if(o.length!==0){const l=new Map;for(let c of o){const[h,...f]=c.split(" ");l.set(h,f.map(d=>d.split(",")[0]))}return l}}async getIndex(e){return this.index||(this.index=await this._readIndex()),this.index}async _readIndex(e){return(await Se.loadString(this.ixxFile)).split(`
`).filter(n=>!!n).map(n=>{const r=n.length-Py,s=n.slice(0,r),a=n.slice(r),o=Number.parseInt(a,16);return[s,o]})}async _getBuffer(e,t){let n=0,r=65536;const s=await this.getIndex(t);for(let o=0;o<s.length;o++){const[l,c]=s[o],h=Math.min(l.length,e.length);l.slice(0,h)<e&&(n=c,r=c+65536)}const a=r-n;if(!(a<0)){if(this.bufferCache.has(n))return this.bufferCache.get(n);{const o=await Se.loadString(this.ixFile,{range:{start:n,size:a}});return this.bufferCache.set(n,o),o}}}}const Uy=2291137574,qy=654085990,Vy=2273964779,Qy=3958540679,Xd=64,Gy=64,$y=512e3;var fi,Cc,g0,m0,w0;class p0{constructor(e,t){ct(this,fi);ke(this,"chrAliasTable",new Map);ke(this,"rpTreeCache",new Map);this.path=e.url,this.format=e.format||"bigwig",this.genome=t,this.config=e,this.bufferSize=$y,this.loader=qi(this.path)?new Jy(this.path):Se,e.searchTrix&&(this._trix=new Oy(`${e.searchTrix}x`,e.searchTrix))}async readWGFeatures(e,t){await this.loadHeader();const n=0,r=this.chromTree.idToName.length-1,s=this.chromTree.idToName[n],a=this.chromTree.idToName[r];return this.readFeatures(s,0,a,Number.MAX_VALUE,e,t)}async readFeatures(e,t,n,r,s,a="mean"){t||(t=0),r||(r=Number.MAX_SAFE_INTEGER),await this.loadHeader();let o=await Ke(this,fi,Cc).call(this,e),l=await Ke(this,fi,Cc).call(this,n);if(o===void 0||l===void 0)return[];let c,h;if(this.type==="bigwig"){const u=await this.getZoomHeaders();let p=s?Yy(s,u):void 0;p&&a!="none"?(c=p.indexOffset,h=Xy):(c=this.header.fullIndexOffset,h=Zy)}else c=this.header.fullIndexOffset,h=Jd.call(this);const d=await(await this.loadRPTree(c)).findLeafItemsOverlapping(o,t,l,r);if(!d||d.length===0)return[];{let u=Number.MAX_VALUE,p=0;for(let w of d)u=Math.min(u,w.dataOffset),p=Math.max(p,w.dataOffset+w.dataSize);const m=p-u,F=await this.loader.loadArrayBuffer(this.config.url,Le(this.config,{range:{start:u,size:m}})),g=[];for(let w of d){const b=new Uint8Array(F,w.dataOffset-u,w.dataSize);let y;this.header.uncompressBuffSize>0?y=Es(b):y=b,h.call(this,new DataView(y.buffer),o,t,l,r,g,this.chromTree.idToName,a,this.littleEndian)}return g.sort(function(w,b){return w.start-b.start}),g}}get searchable(){return this.type==="bigbed"}async search(e){if(this.header||await this.loadHeader(),!(this.header&&this.header.extraIndexCount))return;const t=await this._searchForRegions(e);if(t){const n=await this._loadFeaturesForRange(t.offset,t.length);if(n){const r=n.filter(s=>{for(let a of Object.keys(s)){const o=s[a];if(ut(o)&&o.toLowerCase()===e.toLowerCase())return!0}return!1});return r.length>0?r.reduce((s,a)=>s.end-s.start>a.end-a.start?s:a,n[0]):void 0}}}async _searchForRegions(e){const t=await Ke(this,fi,g0).call(this);if(t){if(this._trix){const n=e.toLowerCase(),r=await this._trix.search(n);r&&r.has(n)&&(e=r.get(n)[0])}for(let n of t){const r=await n.search(e);if(r)return r}}}async getZoomHeaders(){return this.zoomLevelHeaders?this.zoomLevelHeaders:(await this.loadHeader(),this.zoomLevelHeaders)}async loadHeader(){if(this.header)return this.header;{let e=await this.loader.loadArrayBuffer(this.path,Le(this.config,{range:{start:0,size:Xd}})),t;this.littleEndian=!0;const n=new bt(new DataView(e),this.littleEndian);let r=n.getUInt();if(r===Uy)this.type="bigwig";else if(r===Vy)this.type="bigbed";else{this.littleEndian=!1,n.littleEndian=!1,n.position=0;let f=n.getUInt();f===qy?this.type="bigwig":f===Qy&&(this.type="bigbed")}t={bwVersion:n.getUShort(),nZoomLevels:n.getUShort(),chromTreeOffset:n.getLong(),fullDataOffset:n.getLong(),fullIndexOffset:n.getLong(),fieldCount:n.getUShort(),definedFieldCount:n.getUShort(),autoSqlOffset:n.getLong(),totalSummaryOffset:n.getLong(),uncompressBuffSize:n.getInt(),extensionOffset:n.getLong()};const s=Xd,a=t.totalSummaryOffset>0?t.totalSummaryOffset-s+40:Math.min(t.fullDataOffset,t.chromTreeOffset)-s;let o={start:s,size:a};e=await this.loader.loadArrayBuffer(this.path,Le(this.config,{range:o}));const l=new bt(new DataView(e),this.littleEndian),c=t.nZoomLevels;this.zoomLevelHeaders=[],this.firstZoomDataOffset=Number.MAX_SAFE_INTEGER;for(let f=1;f<=c;f++){const d=c-f,u=new jy(d,l);this.firstZoomDataOffset=Math.min(u.dataOffset,this.firstZoomDataOffset),this.zoomLevelHeaders[d]=u}if(t.autoSqlOffset>0){l.position=t.autoSqlOffset-s;const f=l.getString();f&&(this.autoSql=Hy(f))}t.totalSummaryOffset>0&&(l.position=t.totalSummaryOffset-s,this.totalSummary=new Wy(l));const h=Math.min(2e5,Math.max(1e4,t.fullDataOffset-t.chromTreeOffset));if(this.chromTree=await Ke(this,fi,w0).call(this,t.chromTreeOffset,h),this.chrNames=new Set(this.chromTree.idToName),this.type==="bigbed"){const f=await Ke(this,fi,m0).call(this,t.fullDataOffset);this.featureDensity=f/this.chromTree.sumLengths}return this.header=t,t.extensionOffset>0&&await this.loadExtendedHeader(t.extensionOffset),this.header}}async loadExtendedHeader(e){let t=await this.loader.loadArrayBuffer(this.path,Le(this.config,{range:{start:e,size:Gy}})),n=new bt(new DataView(t),this.littleEndian);n.getUShort();const r=n.getUShort(),s=n.getLong();if(r===0)return;let a=r*(16+10*4);t=await this.loader.loadArrayBuffer(this.path,Le(this.config,{range:{start:s,size:a}})),n=new bt(new DataView(t),this.littleEndian);const o=[],l=[],c=[];for(let h=0;h<r;h++){o.push(n.getUShort());const f=n.getUShort();c.push(n.getLong()),l.push(n.getInt());for(let d=0;d<f;d++)n.getUShort(),l.push(n.getUShort())}this.header.extraIndexCount=r,this.header.extraIndexOffsets=c}async loadRPTree(e){let t=this.rpTreeCache.get(e);return t||(t=new _c(this.path,this.config,e),await t.init(),this.rpTreeCache.set(e,t),t)}async getType(){return await this.loadHeader(),this.type}async getTrackType(){return await this.loadHeader(),this.type==="bigwig"?"wig":this.autoSql&&this.autoSql.table==="chromatinInteract"?"interact":"annotation"}async _loadFeaturesForRange(e,t){const n=await this.loader.loadArrayBuffer(this.config.url,Le(this.config,{range:{start:e,size:t}})),r=new Uint8Array(n),s=this.header.uncompressBuffSize>0?Es(r):r,a=Jd.call(this),o=[];return a.call(this,new DataView(s.buffer),0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,o,this.chromTree.idToName),o}}fi=new WeakSet,Cc=async function(e){if(this.chrAliasTable.has(e)&&(e=this.chrAliasTable.get(e),e===void 0))return;let t=this.chromTree.nameToId.get(e);if(t===void 0&&this.genome){const n=await this.genome.getAliasRecord(e);let r;if(n){const s=Object.keys(n).filter(a=>a!=="start"&&a!=="end").map(a=>n[a]).filter(a=>this.chromTree.nameToId.has(a));s.length>0&&(r=s[0],t=this.chromTree.nameToId.get(s[0]))}this.chrAliasTable.set(e,r)}return t},g0=async function(){if(this._searchTrees===void 0&&this.header.extraIndexOffsets&&this.header.extraIndexOffsets.length>0){this._searchTrees=[];for(let e of this.header.extraIndexOffsets){const t=await so.loadBpTree(this.path,this.config,e);this._searchTrees.push(t)}}return this._searchTrees},m0=async function(e){const t=await this.loader.loadArrayBuffer(this.path,Le(this.config,{range:{start:e,size:4}}));return new bt(new DataView(t),this.littleEndian).getInt()},w0=async function(e,t){let n=t;const r=async()=>{const a=await this.loader.loadArrayBuffer(this.path,Le(this.config,{range:{start:e,size:n}})),o=new bt(new DataView(a),this.littleEndian);return xh.parseTree(o,e,this.genome)};let s;for(;n<1e6;)try{return await r()}catch(a){s=a,n*=2}throw s};class jy{constructor(e,t){this.index=e,this.reductionLevel=t.getInt(),this.reserved=t.getInt(),this.dataOffset=t.getLong(),this.indexOffset=t.getLong()}}class Wy{constructor(e){e?(this.basesCovered=e.getLong(),this.minVal=e.getDouble(),this.maxVal=e.getDouble(),this.sumData=e.getDouble(),this.sumSquares=e.getDouble(),Ky.call(this)):(this.basesCovered=0,this.minVal=0,this.maxVal=0,this.sumData=0,this.sumSquares=0,this.mean=0,this.stddev=0)}}function Ky(){let i=this.basesCovered;if(i>0){this.mean=this.sumData/i,this.stddev=Math.sqrt(this.sumSquares/(i-1));let e=this.minVal<0?this.mean-2*this.stddev:0,t=this.maxVal>0?this.mean+2*this.stddev:0;this.defaultRange={min:e,max:t}}}function Yy(i,e){let t;for(let n=0;n<e.length;n++){const r=e[n];if(r.reductionLevel<i){t=r;break}}return t}function Zy(i,e,t,n,r,s,a,o,l){const c=new bt(i,l),h=c.getInt(),f=c.getInt();let d=f,u=c.getInt();const p=c.getInt(),m=c.getInt(),F=c.getByte();c.getByte();let g=c.getUShort();if(h>=e&&h<=n){let w=0;for(;g-- >0;){let b;switch(F){case 1:d=c.getInt(),u=c.getInt(),b=c.getFloat();break;case 2:d=c.getInt(),b=c.getFloat(),u=d+m;break;case 3:b=c.getFloat(),d=f+w*p,u=d+m,w++;break}if(!(h<e||h===e&&u<t)){if(h>n||h===n&&d>=r)break;if(Number.isFinite(b)){const y=a[h];s.push({chr:y,start:d,end:u,value:b})}}}}}function Jd(){const e=Dy(this.header.definedFieldCount,this.header.fieldCount,this.autoSql,this.format);return function(t,n,r,s,a,o,l,c,h){const f=new bt(t,h);for(;f.remLength()>=13;){const d=f.getInt(),u=l[d],p=f.getInt(),m=f.getInt(),F=f.getString();if(!(d<n||d===n&&m<r)){if(d>s||d===s&&p>=a)break;if(m>0){const g={chr:u,start:p,end:m};o.push(g);const w=F.split("	");e(g,w)}}}}}function Xy(i,e,t,n,r,s,a,o,l){const c=new bt(i,l),h=8*4;for(;c.remLength()>=h;){const f=c.getInt(),d=c.getInt(),u=c.getInt(),p=c.getInt(),m=c.getFloat(),F=c.getFloat(),g=c.getFloat();c.getFloat();let w;switch(o){case"min":w=m;break;case"max":w=F;break;default:w=p===0?0:g/p}if(!(f<e||f===e&&u<t)){if(f>n||f===n&&d>=r)break;if(Number.isFinite(w)){const b=a[f];s.push({chr:b,start:d,end:u,value:w})}}}}class Jy{constructor(e){this.data=nn(e).buffer}loadArrayBuffer(e,t){const n=t.range;return n?this.data.slice(n.start,n.start+n.size):this.data}async dataViewForRange(e,t){const n=Math.min(this.data.byteLength-e.start,e.size);return t?new Uint8Array(this.data,e.start,n):new DataView(this.data,e.start,n)}}var Os;class kh extends Ks{constructor(t,n){super(n);ke(this,"queryable",!0);ct(this,Os,{});ke(this,"windowFunctions",["mean","min","max","none"]);this.reader=new p0(t,n),this.genome=n,this.format=t.format||"bigwig"}async getFeatures({chr:t,start:n,end:r,bpPerPixel:s,windowFunction:a}){await this.reader.loadHeader();const o=this.reader.type==="bigwig";let l;return t.toLowerCase()==="all"?l=o?await this.getWGValues(a,s):[]:l=await this.reader.readFeatures(t,n,t,r,s,a),o||e0(l),l}async getHeader(){return this.reader.loadHeader()}async defaultVisibilityWindow(){return this.reader.type==="bigwig"?-1:this.reader.featureDensity?Math.floor(1e4/this.reader.featureDensity):-1}async getWGValues(t,n){const r=this.genome,s=Ve(this,Os)[t];if(s&&s.bpPerPixel>.8*n&&s.bpPerPixel<1.2*n)return s.values;{const a=await this.reader.readWGFeatures(n,t);let o=[];for(let l of a){const c=l.chr,h=r.getCumulativeOffset(c);if(h===void 0)continue;const f=Object.assign({},l);f.chr="all",f.start=h+l.start,f.end=h+l.end,f._f=l,o.push(f)}return o.sort((l,c)=>l.start-c.start),Ve(this,Os)[t]={values:o,bpPerPixel:n},o}}supportsWholeGenome(){return this.reader.type==="bigwig"}async trackType(){return this.reader.getTrackType()}get searchable(){return this.reader.searchable}async search(t){return this.reader.search(t)}}Os=new WeakMap;const Kr=.01,xc=4,eu=xc+1;function Ys(i,e,t,n){if(this.dataRange===void 0||this.dataRange.max===void 0||this.dataRange.min===void 0)return;de.fillRect(i,0,0,e,t,{fillStyle:"white"}),n&&de.fillRect(i,e-xc-2,0,xc,t,{fillStyle:n});const r=this.flipAxis===void 0?!1:this.flipAxis,s=.95*e-8-eu,a=.95*e-eu,o={font:"normal 10px Arial",textAlign:"right",fillStyle:"black",strokeStyle:"black"};de.strokeLine(i,s,Kr*t,a,Kr*t,o),de.fillText(i,c(r?this.dataRange.min:this.dataRange.max),s+4,Kr*t+12,o);const l=(1-Kr)*t;de.strokeLine(i,s,l,a,l,o),de.fillText(i,c(r?this.dataRange.max:this.dataRange.min),s+4,l-4,o),de.strokeLine(i,a,Kr*t,a,l,o);function c(h){return h===0?"0":Math.abs(h)>=10?h.toFixed():Math.abs(h)>=1?h.toFixed(1):Math.abs(h)>=.1?h.toFixed(2):h.toExponential(1)}}const eA="rgb(150, 150, 150)";class b0 extends mt{constructor(e,t){super(e,t)}init(e){super.init(e),this.type="wig",this.featureType="numeric",this.resolutionAware=!0,this.paintAxis=Ys;const t=e.format?e.format.toLowerCase():e.format;e.featureSource?(this.featureSource=e.featureSource,delete e.featureSource):t==="bigwig"?this.featureSource=new kh(e,this.browser.genome):t==="tdf"?this.featureSource=new u0(e,this.browser.genome):this.featureSource=Wt(e,this.browser.genome),e.max===void 0||e.autoscale===!0?this.autoscale=!0:this.dataRange={min:e.min||0,max:e.max}}async postInit(){const e=await this.getHeader();this.disposed||e&&this.setTrackProperties(e)}supportsWholeGenome(){return this.visibilityWindow===void 0||this.visibilityWindow<0}async getFeatures(e,t,n,r){const s=this.windowFunction,a=await this.featureSource.getFeatures({chr:e,start:t,end:n,bpPerPixel:r,visibilityWindow:this.visibilityWindow,windowFunction:s});if(this.normalize&&this.featureSource.normalizationFactor){const o=this.featureSource.normalizationFactor;for(let l of a)l.value*=o}if(this.scaleFactor){const o=this.scaleFactor;for(let l of a)l.value*=o}return this.summarize&&(s==="mean"||s==="min"||s==="max")?F0(a,t,r,s):a}menuItemList(){const e=[];if(this.flipAxis!==void 0){let t=function(){this.flipAxis=!this.flipAxis,this.trackView.repaintViews()};e.push("<hr>"),e.push({label:"Flip y-axis",click:t})}return this.featureSource.windowFunctions&&e.push(...this.wigSummarizationItems()),e.push(...this.numericDataMenuItems()),e}wigSummarizationItems(){const e=this.featureSource.windowFunctions,t=[];t.push("<hr/>"),t.push("<div>Windowing function</div>");for(const n of e){let s=function(){this.windowFunction=n,this.trackView.updateViews()};const r=ve(ht(n,this.windowFunction===n));t.push({object:r,click:s})}return t}async getHeader(){return typeof this.featureSource.getHeader=="function"&&(this.header=await this.featureSource.getHeader()),this.header}getScaleFactor(e,t,n,r){const s=r===!0?e<0?-Math.log10(Math.abs(e)+1):Math.log10(Math.abs(e)+1):e,a=r===!0?Math.log10(Math.abs(t)+1):t;return n/(a-s)}computeYPixelValue(e,t){return(this.flipAxis?e-this.dataRange.min:this.dataRange.max-e)*t}computeYPixelValueInLogScale(e,t){let n=this.dataRange.max,r=this.dataRange.min;return r=r<0?-Math.log10(Math.abs(r)+1):Math.log10(Math.abs(r)+1),n=n<0?-Math.log10(Math.abs(n)+1):Math.log10(Math.abs(n)+1),e=e<0?-Math.log10(Math.abs(e)+1):Math.log10(e+1),(this.flipAxis?e-r:n-e)*t}draw(e){const t=e.features,n=e.context,r=e.bpPerPixel,s=e.bpStart,a=e.pixelWidth,o=e.pixelHeight-1,l=s+a*r+1,c=this.getScaleFactor(this.dataRange.min,this.dataRange.max,o,this.logScale),h=f=>this.logScale?this.computeYPixelValueInLogScale(f,c):this.computeYPixelValue(f,c);if(t&&t.length>0&&(this.dataRange.min===void 0&&(this.dataRange.min=0),this.dataRange.max>this.dataRange.min)){let f=-1,d;const u=h(0);for(let p of t){if(p.end<s)continue;if(p.start>l)break;const m=(p.start-s)/r;if(isNaN(m))continue;let F=h(p.value);const w=(p.end-s)/r-m,b=e.alpha?qe.addAlpha(this.getColorForFeature(p),e.alpha):this.getColorForFeature(p);if(this.graphType==="line")d!==void 0&&de.strokeLine(n,f,d,m,F,{fillStyle:b,strokeStyle:b}),de.strokeLine(n,m,F,m+w,F,{fillStyle:b,strokeStyle:b});else if(this.graphType==="points"){const y=this.config.pointSize||3,v=m+w/2;de.fillCircle(n,v,F,y/2,{fillStyle:b,strokeStyle:b}),p.value>this.dataRange.max?de.fillCircle(n,v,y/2,y/2,3,{fillStyle:this.overflowColor}):p.value<this.dataRange.min&&de.fillCircle(n,v,o-y/2,y/2,3,{fillStyle:this.overflowColor})}else{const y=Math.min(o,F-u);de.fillRect(n,m,u,w,y,{fillStyle:b}),p.value>this.dataRange.max?de.fillRect(n,m,0,w,3,{fillStyle:this.overflowColor}):p.value<this.dataRange.min&&de.fillRect(n,m,o-2,w,3,{fillStyle:this.overflowColor})}f=m+w,d=F}if(this.dataRange.min<0){let p=this.dataRange.max,m=this.dataRange.min;m=this.logScale===!0?m<0?-Math.log10(Math.abs(m)+1):Math.log10(Math.abs(m)+1):m,p=this.logScale===!0?p<0?-Math.log10(Math.abs(p)+1):Math.log10(Math.abs(p)+1):p;const F=p/(p-m),g=this.flipAxis?(1-F)*o:F*o;de.strokeLine(n,0,g,e.pixelWidth,g,{strokeStyle:this.baselineColor})}}if(this.config.hasOwnProperty("guideLines")){for(let f of this.config.guideLines)if(f.hasOwnProperty("color")&&f.hasOwnProperty("y")&&f.hasOwnProperty("dotted")){let d=h(f.y),u={strokeStyle:f.color,strokeWidth:2};f.dotted?de.dashedLine(e.context,0,d,e.pixelWidth,d,5,u):de.strokeLine(e.context,0,d,e.pixelWidth,d,u)}}}popupData(e,t){if(t===void 0&&(t=this.clickedFeatures(e)),t&&t.length>0){const n=e.genomicLocation,r=[];t.sort(function(a,o){const l=Math.abs((a.start+a.end)/2-n),c=Math.abs((o.start+o.end)/2-n);return l-c});const s=t.length>10?t.slice(0,10):t;s.sort(function(a,o){return a.start-o.start});for(let a of s)if(a){r.length>0&&r.push("<hr/>");let o=a.end-a.start===1?He(Math.floor(a.start)+1):He(Math.floor(a.start)+1)+"-"+He(Math.floor(a.end));r.push({name:"Position:",value:o}),r.push({name:"Value:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",value:He(a.value.toFixed(4))})}return s.length<t.length&&r.push("<hr/>..."),r}else return[]}get supportsWholeGenome(){return!this.config.indexURL&&this.config.supportsWholeGenome!==!1}getColorForFeature(e){let t=e.value<0&&this.altColor?this.altColor:this.color||eA;return typeof t=="function"?t(e.value):t}dispose(){this.trackView=void 0}}ke(b0,"defaults",{height:50,flipAxis:!1,logScale:!1,windowFunction:"mean",graphType:"bar",normalize:void 0,scaleFactor:void 0,overflowColor:"rgb(255, 32, 255)",baselineColor:"lightGray",summarize:!0,visibilityWindow:void 0});function F0(i,e,t,n="mean"){if(t<=1||!i||i.length===0)return i;const r=i[0].chr,s=t,a=[],o=f=>{const d=e+f.bin*s,u=d+s;let p;switch(n){case"mean":p=f.sumData/f.count;break;case"max":p=f.max;break;case"min":p=f.min;break;default:throw Error(`Unknown window function: ${n}`)}const m=`${n} of ${f.count} values`;a.push({chr:r,start:d,end:u,value:p,description:m})};let l;for(let f of i){let d=Math.floor((f.start-e)/s);const u=Math.floor((f.end-e)/s);if(l&&d===l.bin&&(l.add(f),d++),!l||u>l.bin){if(l&&o(l),u>d){const p=e+u*s;a.push({chr:r,start:f.start,end:p,value:f.value})}l=new tA(u,f)}}l&&o(l);const c=[];let h=a[0];for(let f of a)h.value===f.value&&f.start<=h.end?h.end=f.end:(c.push(h),h=f);return c.push(h),c}class tA{constructor(e,t){this.bin=e,this.sumData=t.value,this.count=1,this.min=t.value,this.max=t.value}add(e){this.sumData+=e.value,this.max=Math.max(e.value,this.max),this.min=Math.min(e.value,this.min),this.count++}get mean(){return this.sumData/this.count}}const iA=1e4;class y0 extends Ks{constructor(e,t){super(t),this.config=e||{},this.genome=t,this.sourceType=e.sourceType===void 0?"file":e.sourceType,this.maxWGCount=e.maxWGCount||iA,this.windowFunctions=["mean","min","max","none"];const n=new Set(["bigwig","bw","bigbed","bb","biginteract","biggenepred","bignarrowpeak","tdf"]);if(this.queryable=e.indexURL||e.queryable===!0,e.reader)this.reader=e.reader,this.queryable=e.queryable!==!1;else{if(e.sourceType==="ga4gh")throw Error("Unsupported source type 'ga4gh'");(e.type==="eqtl"||e.type==="qtl")&&e.sourceType==="gtex-ws"?(this.reader=new Fy(e),this.queryable=!0):e.sourceType==="htsget"?(this.reader=new _y(e,t),this.queryable=!0):e.sourceType==="ucscservice"?(this.reader=new d0(e.source),this.queryable=!0):e.sourceType==="custom"?(this.reader=new wy(e.source),this.queryable=e.source.queryable!==!1):e.sourceType==="service"?(this.reader=new jd(e,t),this.queryable=!0):(this.reader=new jd(e,t),e.queryable!==void 0?this.queryable=e.queryable:(n.has(e.format)||this.reader.indexed)&&(this.queryable=!0))}this.searchable=e.searchable!==!1}async defaultVisibilityWindow(){if(this.reader&&typeof this.reader.defaultVisibilityWindow=="function")return this.reader.defaultVisibilityWindow()}async trackType(){const e=await this.getHeader();if(e)return e.type}async getHeader(){if(!this.header)if(this.reader&&typeof this.reader.readHeader=="function"){const e=await this.reader.readHeader();e?(this.header=e,e.format&&(this.config.format=e.format)):this.header={}}else this.header={};return this.header}async getFeatures({chr:e,start:t,end:n,bpPerPixel:r,visibilityWindow:s,windowFunction:a}){const o=e.toLowerCase()==="all";if(t=t||0,n=n||Number.MAX_SAFE_INTEGER,(o&&!this.wgFeatures&&this.supportsWholeGenome()||this.config.disableCache||!this.featureCache||!this.featureCache.containsRange(new ro(e,t,n)))&&await this.loadFeatures(e,t,n,s),o){if(!this.wgFeatures)if(this.supportsWholeGenome())if(this.config.type==="wig"){const l=await lo(this.featureCache.getAllFeatures(),this.genome,1e6);this.wgFeatures=F0(l,0,r,a)}else this.wgFeatures=await lo(this.featureCache.getAllFeatures(),this.genome,this.maxWGCount);else this.wgFeatures=[];return this.wgFeatures}else return this.featureCache.queryFeatures(e,t,n)}async findFeatures(e){return this.featureCache?this.featureCache.findFeatures(e):[]}supportsWholeGenome(){return!this.queryable}getAllFeatures(){return this.queryable||!this.featureCache?[]:this.featureCache.getAllFeatures()}async loadFeatures(e,t,n,r){await this.getHeader();const s=this.reader;let a=t,o=n,l=e;if(!this.chrAliasManager&&this.reader&&this.reader.sequenceNames&&(this.chrAliasManager=new Cy(this.reader.sequenceNames,this.genome)),this.chrAliasManager&&(l=await this.chrAliasManager.getAliasName(e)),(!r||r<=0)&&this.config.expandQuery!==!1){const f=this.genome?this.genome.getChromosome(l):void 0;a=0,o=Math.max(f?f.bpLength:Number.MAX_SAFE_INTEGER,n)}else if(r>n-t&&this.config.expandQuery!==!1){let f=Math.min(4.1*(n-t),r);this.config.minQuerySize&&f<this.config.minQuerySize&&(f=this.config.minQuerySize),a=Math.max(0,(t+n-f)/2),o=a+f}let c=await s.readFeatures(l,a,o);this.queryable===void 0&&(this.queryable=s.indexed);const h=this.queryable?new ro(e,a,o):void 0;if(c){if(this.config.format!=="wig"&&this.config.type!=="junctions"){const f=this.config.maxRows||Number.MAX_SAFE_INTEGER;t0(c,f)}this.featureCache=new Ns(c,this.genome,h),this.searchable&&this.addFeaturesToDB(c,this.config)}else this.featureCache=new Ns([],h)}addFeaturesToDB(e,t){this.featureMap||(this.featureMap=new Map);const n=t.searchableFields||["name","transcript_id","gene_id","gene_name","id"];for(let r of e)for(let s of n){let a;if(r.hasOwnProperty(s)?a=r[s]:typeof r.getAttributeValue=="function"&&(a=r.getAttributeValue(s)),a){if(a=a.replaceAll(" ","+").toUpperCase(),this.featureMap.has(a)){const o=this.featureMap.get(a);if(r.end-r.start<o.end-o.start)continue}this.featureMap.set(a,r)}}}search(e){if(this.featureMap)return this.featureMap.get(e.toUpperCase())}}class co extends Ks{constructor(e,t){super(t),this.config=e,this.genome=t,this.queryable=!1,this.searchable=e.searchable!==!1,this.updateFeatures(e.features)}updateFeatures(e){e=nA(e,this.genome),t0(e),this.config.mappings&&rA(e,this.config.mappings),this.featureCache=new Ns(e,this.genome),(this.searchable||this.config.searchableFields)&&this.addFeaturesToDB(e,this.config)}async getFeatures({chr:e,start:t,end:n,bpPerPixel:r,visibilityWindow:s}){const a=this.genome,o=a?a.getChromosomeName(e):e;return o.toLowerCase()==="all"?lo(this.featureCache.getAllFeatures(),this.genome,this.maxWGCount):this.featureCache.queryFeatures(o,t,n)}getAllFeatures(){return this.featureCache.getAllFeatures()}supportsWholeGenome(){return!0}addFeaturesToDB(e,t){this.featureMap||(this.featureMap=new Map);const n=t.searchableFields||["name"];for(let r of e)for(let s of n){let a;if(typeof r.getAttributeValue=="function"&&(a=r.getAttributeValue(s)),a||(a=r[s]),a){a=a.replaceAll(" ","+");const o=this.featureMap.get(a.toUpperCase());if(o&&o.end-o.start>r.end-r.start)continue;this.featureMap.set(a.toUpperCase(),r)}}}search(e){if(this.featureMap)return this.featureMap.get(e.toUpperCase())}}function nA(i,e){if(e)for(let t of i)t.chr=e.getChromosomeName(t.chr);return i}function rA(i,e){let t=Object.keys(e);i.forEach(function(n){t.forEach(function(r){n[r]=n[e[r]]})})}class sA{constructor({chr:e,locus:t,accession:n,aliases:r,features:s,sequence:a}){this.chr=e,this.locus=t,this.accession=n,this.aliases=r,this.features=s,this.sequence=a,this.bpLength=a.length}toJSON(){return{gbkURL:this.url}}getSequenceRecord(e){return{chr:this.chr,bpLength:this.bpLength}}get chromosomeNames(){return[this.chr]}getFirstChromosomeName(){return this.chr}get id(){return this.accession}get name(){return this.locus}get initialLocus(){return this.chr}get description(){return this.locus}get infoURL(){return this.url}showWholeGenomeView(){return!1}getHomeChromosomeName(){return this.chr}getChromosomeName(e){return e}getChromosomeDisplayName(e){return this.chr}getChromosome(e){if(e===this.chr)return{name:this.chr,bpLength:this.bpLength}}async loadChromosome(e){return this.getChromosome(e)}async getAliasRecord(e){}getCytobands(e){return[]}getChromosomes(){return[this.getChromosome(this.chr)]}get wgChromosomeNames(){}getGenomeCoordinate(e,t){if(e===this.chr)return t}getChromosomeCoordinate(e){return{chr:this.chr,position:e}}getCumulativeOffset(e){return 0}getGenomeLength(){return this.bpLength}async getSequence(e,t,n){if(e===this.chr)return this.sequence.substring(t,n)}getSequenceInterval(e,t,n){if(e===this.chr)return new yh(this.chr,0,this.sequence.length,this.sequence)}}const tu=/\s+/,iu=new Map;async function A0(i){let e=iu.get(i);if(!e){const t=await Se.loadString(i,{});e=aA(t),e.url=i,iu.set(i,e)}return e}function aA(i){if(!i)return null;const e=Qt(i);let t=e.nextLine();const n=t.split(/\s+/);if(n[0].toUpperCase()!=="LOCUS")throw Error("Expected `LOCUS` line.  Found: "+t);const r=n[1].trim();let s,a;do if(t=e.nextLine(),t.startsWith("ACCESSION")){const h=t.split(tu);if(h.length<2)throw Error("Genbank file missing ACCESSION number.");s=h[1].trim()}else if(t.startsWith("ALIASES")){const h=t.split(tu);h.length>1&&(a=h[1].split(","))}while(t&&!t.startsWith("FEATURES"));const o=s||r,l=lA(o,e),c=oA(e);return new sA({chr:o,locus:r,accession:s,aliases:a,features:l,sequence:c})}function oA(i){let e,t="";for(;(e=i.nextLine())&&!e.startsWith("//");){e=e.trim();const n=e.split(/\s+/);for(let r=1;r<n.length;r++)t+=n[r]}return t}function lA(i,e){const t=[];let n,r,s=0,a;do if(r=e.nextLine(),r!==""){if(!r||r.startsWith("ORIGIN"))break;if(r.length<6){s<10&&console("Unexpected line in genbank file (skipping): "+r),s++;continue}if(r.charAt(5)!==" "){let o=r.substring(5,21).trim();a={chr:i,type:o,attributes:{},getAttributeValue:function(l){return this.attributes[l]}},n=r.substring(21),o.toLowerCase()!=="source"&&t.push(a)}else{let o=r.substring(21).trim();if(o.length>0)if(o.charCodeAt(0)===47){if(n.charCodeAt(0)===47){let l=n.split("=",2);if(l.length>1){let c=l[0].length>1?l[0].substring(1):"",h=hA(l[1]);a.attributes[c]=h}}else{const l=n.includes("complement")?"-":"+";a.strand=l;let c=n.replace("join","").replace("order","").replace("complement","").replace("(","").replace(")","");if(c.includes("..")){c=c.replace("<","").replace(">","");const h=cA(c,i,l),f=h[0];a.start=f.start;const d=h[h.length-1];a.end=d.end,h.length>1&&(a.exons=h)}else a.start=parseInt(c)-1,a.end=a.start+1}n=o}else n=n+o}}while(!0);return t}function cA(i,e,t){const n=i.split(","),r=[];i.includes("complement");for(const s of n){const a=s.split("..");let o=0;try{o=parseInt(a[0])-1}catch(c){console.error(c)}let l=o+1;a.length>1&&(l=parseInt(a[1])),r.push({chr:e,start:o,end:l,strand:t})}return r.sort(function(s,a){return s.start-a.start}),r}function hA(i){return i.startsWith('"')&&i.endsWith('"')&&(i=i.substring(1,i.length-2)),i}class fA extends Ks{constructor(e,t){super(t),this.config=e,this.searchable=!0}async getFeatures({chr:e,start:t,end:n,bpPerPixel:r,visibilityWindow:s}){if(!this.featureSource){const a=await A0(this.config.url);this.featureSource=new co({genome:this.config.genome,features:a.features,searchableFields:["gene","db_xref","locus_tag","transcript_id"]})}return this.featureSource.getFeatures({chr:e,start:t,end:n})}supportsWholeGenome(){return!1}search(e){return this.featureSource.search(e)}}const dA=new Set(["bigwig","bw","bigbed","bb","biginteract","biggenepred","bignarrowpeak"]);function Wt(i,e){const t=i.format?i.format.toLowerCase():void 0;return i.features?new co(i,e):dA.has(t)?new kh(i,e):t==="tdf"?new u0(i,e):t==="gbk"?new fA(i,e):new y0(i,e)}function kc(i){return(3-i.readingFrame)%3}function Ha(i){return i.cdStart||i.start}function Pa(i){return i.cdEnd||i.end}const Ic=.25;function v0(i,e,t){let n=(i.start-e)/t,r=(i.end-e)/t,s=r-n;return s<3&&(s=3,n-=1.5),{px:n,px1:r,pw:s}}function uA(i,e,t,n,r,s){try{r.save(),r.fillStyle=this.color,r.strokeStyle=this.color;const a=this.getColorForFeature(i);r.fillStyle=a,r.strokeStyle=a;let o,l;this.displayMode==="SQUISHED"&&i.row!==void 0?(o=this.featureHeight/2,l=this.margin+this.squishedRowHeight*i.row):this.displayMode==="EXPANDED"&&i.row!==void 0?(o=this.featureHeight,l=this.margin+this.expandedRowHeight*i.row):(o=this.featureHeight,l=this.margin);const c=s.pixelWidth,h=l+o/2,f=o/2,d=h-f/2,u=i.exons?i.exons.length:0,p=v0(i,e,t),m=this.arrowSpacing,F=i.strand==="+"?1:i.strand==="-"?-1:0;if(u===0){const g=Math.max(0,p.px),w=Math.min(c,p.px1),b=w-g;if(r.fillRect(g,l,b,o),F!==0){r.fillStyle="white",r.strokeStyle="white";for(let y=g+m/2;y<w;y+=m)de.strokeLine(r,y-F*2,h-2,y,h),de.strokeLine(r,y-F*2,h+2,y,h);r.fillStyle=a,r.strokeStyle=a}}else{de.strokeLine(r,p.px+1,h,p.px1-1,h);const g=Math.max(0,p.px)+m/2,w=Math.min(c,p.px1);for(let b=g;b<w;b+=m)de.strokeLine(r,b-F*2,h-2,b,h),de.strokeLine(r,b-F*2,h+2,b,h);for(let b=0;b<i.exons.length;b++){const y=i.exons[b];let v=Math.round((y.start-e)/t),T=Math.round((y.end-e)/t),A=Math.max(1,T-v),C;if(!(v+A<0)){if(v>c)break;if(y.utr)r.fillRect(v,d,A,f);else{if(y.cdStart&&(C=Math.round((y.cdStart-e)/t),r.fillRect(v,d,C-v,f),A-=C-v,v=C),y.cdEnd&&(C=Math.round((y.cdEnd-e)/t),r.fillRect(C,d,T-C,f),A-=T-C,T=C),A=Math.max(A,1),r.fillRect(v,l,A,o),y.readingFrame!==void 0&&s.bpPerPixel<Ic&&s.sequenceInterval){const k=b>0&&i.exons[b-1].readingFrame!==void 0?i.exons[b-1]:void 0,I=b<i.exons.length-1&&i.exons[b+1].readingFrame!==void 0?i.exons[b+1]:void 0;pA.call(this,r,i.strand,k,y,I,e,s.bpPerPixel,l,o,s.sequenceInterval)}if(A>m+5&&F!==0&&s.bpPerPixel>Ic){r.fillStyle="white",r.strokeStyle="white";for(let k=v+m/2;k<T;k+=m)de.strokeLine(r,k-F*2,h-2,k,h),de.strokeLine(r,k-F*2,h+2,k,h);r.fillStyle=a,r.strokeStyle=a}}}}}s.drawLabel&&this.displayMode!=="SQUISHED"&&gA.call(this,r,i,p.px,p.px1,l,s.referenceFrame,s)}finally{r.restore()}}function pA(i,e,t,n,r,s,a,o,l,c){const h=["rgb(124,124,204)","rgb(12, 12, 120)"];i.save();const f=(T,A,C,k,I)=>{I==="STOP"&&(I="*");const B=i.measureText(I).width;de.fillText(i,I,C+(A-B)/2,k-4,{fillStyle:"#ffffff"})},d=(T,A,C,k,I,B)=>{const M=Math.round((A-s)/a),x=Math.round((C-s)/a)-M;let D;if(k===void 0){if(c.hasSequence(A,C)){const U=c.getSequence(A,C);if(U&&U.length===3){const O=T==="+"?U:Fc(U.split("").reverse().join(""));D=nr[O]}}}else D=k;k==="M"||D==="M"&&B===0?i.fillStyle="#83f902":D==="STOP"?i.fillStyle="#ff2101":i.fillStyle=h[I],i.fillRect(M,o,x,l),D&&(i.save(),f(T,x,M,o+l,D),i.restore());const S=C-A;return S>0&&S<3?{start:A,end:C}:void 0},u=kc(n);let p=Ha(n),m=Pa(n),F,g,w,b=1,y,v;if(e==="+"){for(u>0&&(p+=u),b=1,v=0,F=p;F<m;v++,F+=3)y=b%2,g=Math.min(m,F+3),w=d(e,F,g,void 0,b%2,v),++b;if(u>0||w){const T=u>0?fa.call(this,e,u,p-u,p,w,t,n,r,c):fa.call(this,e,void 0,void 0,void 0,w,t,n,r,c);if(T){const{left:A,rite:C}=T;A&&d(e,p-u,p,A.aminoAcidLetter,0,void 0),C&&d(e,w.start,w.end,C.aminoAcidLetter,y,void 0)}}}else{for(u>0&&(m-=u),b=1,v=0,v=0,g=m;g>p;v++,g-=3)y=b%2,F=Math.max(p,g-3),w=d(e,F,g,void 0,b%2,v),++b;if(u>0||w){const T=u>0?fa.call(this,e,u,m,m+u,w,t,n,r,c):fa.call(this,e,void 0,void 0,void 0,w,t,n,r,c);if(T){const{left:A,rite:C}=T;C&&d(e,m,m+u,C.aminoAcidLetter,0,void 0),A&&d(e,w.start,w.end,A.aminoAcidLetter,y,void 0)}}}i.restore()}function gA(i,e,t,n,r,s,a){try{i.save();let o=e.name;if(o===void 0&&e.gene&&(o=e.gene.name),o===void 0&&(o=e.id||e.ID),!o||o===".")return;let l=a.pixelXOffset||0;const c=Math.max(t,-l),h=Math.min(n,-l+a.viewportWidth);let f=(c+h)/2,d;this.displayMode==="COLLAPSED"&&this.labelDisplayMode==="SLANT"&&(d={rotate:{angle:45}});const u=mA(r,d);let p=this.getColorForFeature(e),m=this.browser.qtlSelections.hasPhenotype(e.name);const F={textAlign:this.labelDisplayMode==="SLANT"?void 0:"center",fillStyle:p,strokeStyle:p},g=i.measureText(o),w=f-g.width/2,b=f+g.width/2,y=a.rowLastLabelX[e.row]||-Number.MAX_SAFE_INTEGER;(a.labelAllFeatures||w>y||m)&&(a.rowLastLabelX[e.row]=b,a.axis==="y"?(i.save(),de.labelTransformWithContext(i,f),de.fillText(i,o,f,u,F,d),i.restore()):(i.clearRect(f-g.width/2-1,u-g.actualBoundingBoxAscent-1,g.width+2,g.actualBoundingBoxAscent+g.actualBoundingBoxDescent+2),de.fillText(i,o,f,u,F,d)))}finally{i.restore()}}function mA(i,e){return e?i+20:i+25}function fa(i,e,t,n,r,s,a,o,l){let c,h,f="",d="",u="";const p={left:void 0,rite:void 0};if(i==="+"){if(e){if(d=l.getSequence(t,n),!d||([c,h]=[Pa(s)-(3-e),Pa(s)],f=l.getSequence(c,h),!f))return;u=f+d,p.left={triplet:u,aminoAcidLetter:nr[u]}}if(r){if(f=l.getSequence(r.start,r.end),!f)return;const m=kc(o),F=Ha(o);if(d=l.getSequence(F,F+m),!d)return;u=f+d,p.rite={triplet:u,aminoAcidLetter:nr[u]}}}else{if(e){if(f=l.getSequence(t,n),f===void 0||([c,h]=[Ha(o),Ha(o)+(3-e)],d=l.getSequence(c,h),d===void 0))return;u=f+d,u=Fc(u.split("").reverse().join("")),p.rite={triplet:u,aminoAcidLetter:nr[u]}}if(r){if(d=l.getSequence(r.start,r.end),d===void 0)return;const m=kc(s),F=Pa(s);if(f=l.getSequence(F-m,F),f===void 0)return;u=f+d,u=Fc(u.split("").reverse().join("")),p.left={triplet:u,aminoAcidLetter:nr[u]}}}return p}const wA=new Set(["nonsense","missense","stop-loss","frameshift","cds-indel"]),bA=new Set(["coding-synon"]),FA=new Set(["splice-3","splice-5"]),yA=new Set(["untranslated-5","untranslated-3"]);function ml(i,e,t,n,r){var s=v0(i,e,t),a=this.margin,o,l=this.snpColors.length,c;switch(o=this.displayMode==="squished"?this.squishedRowHeight:this.expandedRowHeight,this.colorBy){case"function":c=h(i.func);break;case"class":c=f(i.class)}r.fillStyle=this.snpColors[c],r.fillRect(s.px,a,s.pw,o);function h(d){var u,p=d.split(",");return u=p.map(function(m){return wA.has(m)||FA.has(m)?l-1:bA.has(m)?l-2:yA.has(m)?l-3:0}),u.reduce(function(m,F){return Math.max(m,F)})}function f(d){return d==="deletion"?l-1:d==="mnp"?l-2:d==="microsatellite"||d==="named"?l-3:0}}function AA(i,e,t,n,r){const s=this.displayMode==="EXPANDED"?this.expandedRowHeight:this.squishedRowHeight;let a=this.margin;this.displayMode!=="COLLAPSED"&&i.row!==void 0&&(a+=i.row*s);const o=a+.5*s,l=o-.5*s,c=o+.5*s,h=Math.round((i.junction_left-e)/t),f=Math.round((i.junction_right-e)/t);r.beginPath(),r.moveTo(h,o),r.bezierCurveTo(h,l,f,l,f,o),r.lineWidth=1+Math.log(i.num_junction_reads)/Math.log(2),r.strokeStyle="blue",r.stroke();const d=i.spanning_frag_coords;for(let u=0;u<d.length;u++){const p=d[u],m=Math.round((p.left-e)/t),F=Math.round((p.right-e)/t);r.beginPath(),r.moveTo(m,o),r.bezierCurveTo(m,c,F,c,F,o),r.lineWidth=1,r.strokeStyle="purple",r.stroke()}}const vA="rgb(0, 0, 150)";class Ih extends mt{constructor(e,t){super(e,t)}init(e){super.init(e),this.labelDisplayMode=e.labelDisplayMode,e._featureSource?(this.featureSource=e._featureSource,delete e._featureSource):e.type!=="blat"&&(this.featureSource=e.featureSource?e.featureSource:Wt(e,this.browser.genome)),e.type==="FusionJuncSpan"?(this.render=e.render||AA,this.squishedRowHeight=e.squishedRowHeight||50,this.expandedRowHeight=e.expandedRowHeight||50,this.height=e.height||this.margin+2*this.expandedRowHeight):e.type==="snp"?(this.render=e.render||ml,this.snpColors=["rgb(0,0,0)","rgb(0,0,255)","rgb(0,255,0)","rgb(255,0,0)"],this.colorBy="function",this.expandedRowHeight=e.expandedRowHeight||10,this.squishedRowHeight=e.squishedRowHeight||5,this.height=e.height||30):(this.render=e.render||uA,this.arrowSpacing=30,_A(this),this.squishedRowHeight=e.squishedRowHeight||15,this.expandedRowHeight=e.expandedRowHeight||30,this.height=e.height||this.margin+2*this.expandedRowHeight,e.colorBy&&(e.colorBy.field&&(e.colorTable=e.colorBy.pallete||e.colorBy.palette,e.colorBy=e.colorBy.field),this.colorBy=e.colorBy,e.colorTable?this.colorTable=new Sn(e.colorTable):this.colorTable=new Bs("Set1")))}async postInit(){if(!(typeof this.featureSource.getHeader=="function"&&(this.header=await this.featureSource.getHeader(),this.disposed)))return this.header&&this.setTrackProperties(this.header),this.visibilityWindow===void 0&&typeof this.featureSource.defaultVisibilityWindow=="function"&&(this.visibilityWindow=await this.featureSource.defaultVisibilityWindow()),this}get searchable(){return this.featureSource.searchable}async search(e){if(this.featureSource&&this.featureSource.searchable)return this.featureSource.search(e)}get supportsWholeGenome(){if(this.config.supportsWholeGenome!==void 0)return this.config.supportsWholeGenome;if(this.featureSource&&typeof this.featureSource.supportsWholeGenome=="function")return this.featureSource.supportsWholeGenome();if(this.visibilityWindow===void 0&&(this.config.indexed===!1||!this.config.indexURL))return!0}async getFeatures(e,t,n,r){const s=this.visibilityWindow;return this.featureSource.getFeatures({chr:e,start:t,end:n,bpPerPixel:r,visibilityWindow:s})}computePixelHeight(e){if(this.displayMode==="COLLAPSED")return this.margin+this.expandedRowHeight;{let t=0;if(e&&typeof e.forEach=="function")for(let r of e)r.row&&r.row>t&&(t=r.row);return this.margin+(t+1)*(this.displayMode==="SQUISHED"?this.squishedRowHeight:this.expandedRowHeight)}}draw(e){const{features:t,context:n,bpPerPixel:r,bpStart:s,bpEnd:a,pixelWidth:o,pixelHeight:l,referenceFrame:c}=e;if(r<Ic&&(e.sequenceInterval=this.browser.genome.getSequenceInterval(c.chr,s,a)),this.isMergedTrack||de.fillRect(n,0,e.pixelTop,o,l,{fillStyle:"rgb(255, 255, 255)"}),t){const h=[];e.rowLastX=[],e.rowLastLabelX=[];for(let m of t)if(m.start>s&&m.end<a){const F=this.displayMode==="COLLAPSED"?0:m.row||0;h[F]?h[F]++:h[F]=1,e.rowLastX[F]=-Number.MAX_SAFE_INTEGER,e.rowLastLabelX[F]=-Number.MAX_SAFE_INTEGER}const f=Math.max(1,Math.max(...h.filter(m=>!isNaN(m)))),d=o/f;let u=[];const p=[];for(let m of t){if(m.end<s)continue;if(m.start>a)break;this.displayMode==="COLLAPSED"&&this.browser.qtlSelections.hasPhenotype(m.name)&&p.push(m);const F=this.displayMode==="COLLAPSED"?0:m.row;e.drawLabel=e.labelAllFeatures||d>10;const g=Math.ceil((m.end-s)/r),w=u[F];if(!w||g>w){this.render.call(this,m,s,r,l,n,e);const b=Math.floor((m.start-s)/r);w&&b-w<=0&&(n.globalAlpha=.5,de.strokeLine(n,b,0,b,l,{strokeStyle:"rgb(255, 255, 255)"}),n.globalAlpha=1),u[F]=g}}for(let m of p)e.drawLabel=!0,this.render.call(this,m,s,r,l,n,e)}else console.log("No feature list")}clickedFeatures(e){const t=e.y-this.margin,n=super.clickedFeatures(e);let r;switch(this.displayMode){case"SQUISHED":r=Math.floor(t/this.squishedRowHeight);break;case"EXPANDED":r=Math.floor(t/this.expandedRowHeight);break;default:r=void 0}return n.filter(function(s){return r===void 0||s.row===void 0||r===s.row})}popupData(e,t){t===void 0&&(t=this.clickedFeatures(e));const n=e.genomicLocation,r=[];for(let s of t){const a=s._f||s,o=typeof a.popupData=="function"?a.popupData(n):this.extractPopupData(a);if(o){r.length>0&&r.push("<hr/><hr/>");const l=this.infoURL||this.config.infoURL;for(let h of o)if(r.push(h),l&&h.name&&h.name.toLowerCase()==="name"&&h.value&&ut(h.value)&&!h.value.startsWith("<")){const f=l.replace("$$",s.name);h.value=`<a target=_blank href=${f}>${h.value}</a>`}const c=this.config.format==="gff"||this.config.format==="gff3"||this.config.format==="gtf";if(a.exons&&a.exons.length>1)for(let h=0;h<a.exons.length;h++){const f=a.exons[h];if(n>=f.start&&n<=f.end){const d=c?f.number:a.strand==="-"?a.exons.length-h:h+1;d&&(r.push("<hr/>"),r.push({name:"Exon Number",value:d}));break}}}}return r}menuItemList(){const e=[];if(this.render===ml){e.push("<hr/>");for(const n of["function","class"]){let s=function(){this.colorBy=n,this.trackView.repaintViews()};const r=ve(ht(`Color by ${n}`,n===this.colorBy));e.push({object:r,click:s})}}e.push("<hr/>");const t={COLLAPSED:"Collapse",SQUISHED:"Squish",EXPANDED:"Expand"};for(const n of["COLLAPSED","SQUISHED","EXPANDED"]){let s=function(){this.displayMode=n,this.config.displayMode=n,this.trackView.checkContentHeight(),this.trackView.repaintViews()};const r=ve(ht(t[n],n===this.displayMode));e.push({object:r,click:s})}return e}contextMenuItemList(e){const t=this.clickedFeatures(e);if(t===void 0||t.length===0)return;t.length>1&&t.sort((r,s)=>s.end-s.start-(r.end-r.start));const n=t[0];if(n.end-n.start<=1e6){const r=[{label:"View feature sequence",click:async()=>{let s=await this.browser.genome.getSequence(n.chr,n.start,n.end);s?n.strand==="-"&&(s=Hi(s)):s="Unknown sequence",this.browser.alert.present(s)}}];return To()&&navigator.clipboard!==void 0&&r.push({label:"Copy feature sequence",click:async()=>{let s=await this.browser.genome.getSequence(n.chr,n.start,n.end);s?n.strand==="-"&&(s=Hi(s)):s="Unknown sequence";try{await navigator.clipboard.writeText(s)}catch(a){console.error(a),this.browser.alert.present(`error copying sequence to clipboard ${a}`)}}}),r.push("<hr/>"),r}else return}description(){if(ml===this.render){let e="<html>"+this.name+"<hr/>";return e+="<em>Color By Function:</em><br>",e+='<span style="color:red">Red</span>: Coding-Non-Synonymous, Splice Site<br>',e+='<span style="color:green">Green</span>: Coding-Synonymous<br>',e+='<span style="color:blue">Blue</span>: Untranslated<br>',e+='<span style="color:black">Black</span>: Intron, Locus, Unknown<br><br>',e+="<em>Color By Class:</em><br>",e+='<span style="color:red">Red</span>: Deletion<br>',e+='<span style="color:green">Green</span>: MNP<br>',e+='<span style="color:blue">Blue</span>: Microsatellite, Named<br>',e+='<span style="color:black">Black</span>: Indel, Insertion, SNP',e+="</html>",e}else return super.description()}getColorForFeature(e){const t=e._f||e;let n;if(e.name&&this.browser.qtlSelections.hasPhenotype(e.name))n=this.browser.qtlSelections.colorForGene(e.name);else if(this.altColor&&t.strand==="-")n=typeof this.altColor=="function"?this.altColor(t):this.altColor;else if(this.color)n=typeof this.color=="function"?this.color(t):this.color;else if(this.colorBy){const s=t.getAttributeValue?t.getAttributeValue(this.colorBy):t[this.colorBy];n=this.colorTable.getColor(s)}else t.color&&(n=t.color);if(n||(n=vA),t.alpha&&t.alpha!==1)n=qe.addAlpha(n,t.alpha);else if(this.useScore&&t.score&&!Number.isNaN(t.score)){const s=this.config.min?this.config.min:this.viewLimitMin?this.viewLimitMin:0,a=this.config.max?this.config.max:this.viewLimitMax?this.viewLimitMax:1e3,o=r(s,a,t.score);t.alpha=o,n=qe.addAlpha(n,o)}function r(s,a,o){const l=(a-s)/9,c=Math.floor((o-s)/l);return Math.min(1,.2+c*.8/9)}return n}dispose(){this.trackView=void 0}}ke(Ih,"defaults",{type:"annotation",maxRows:1e3,displayMode:"EXPANDED",margin:10,featureHeight:14,useScore:!1});function _A(i){i.browser.on&&(i.browser.on("trackdragend",e),i.browser.on("trackremoved",t));function e(){i.trackView&&i.displayMode!=="SQUISHED"&&i.trackView.repaintViews()}function t(n){i.browser.un&&i===n&&(i.browser.un("trackdragend",e),i.browser.un("trackremoved",t))}}class _0{constructor(e){if(this.config=e,this.browser=e.browser,this.columnFormat=e.columnFormat,this.tableRowSelectionList=[],this.tableDOM=Fe({class:"igv-roi-table"}),e.width){let[t]=e.width.split("px");t=parseInt(t,10),this.tableDOM.style.width=`${Math.min(t,1600)}px`}e.parent.appendChild(this.tableDOM),this.headerDOM=e,this.tableColumnTitles=this.tableDOM,this.tableRowContainer=this.tableDOM,this.footerDOM=e.gotoButtonHandler}set headerDOM({browser:e,parent:t,headerTitle:n,dismissHandler:r}){const s=Fe();this.tableDOM.appendChild(s);const a=Fe();s.appendChild(a),a.innerHTML=n;const o=Fe();s.appendChild(o),o.appendChild(Pi("times")),this.boundDismissHandler=l.bind(this),o.addEventListener("click",this.boundDismissHandler);function l(d){d.stopPropagation(),r()}const{y:c}=e.root.getBoundingClientRect(),{y:h}=t.getBoundingClientRect(),f=-(h-c);Ui(this.tableDOM,s,{minX:0,minY:f}),this.tableDOM.style.display="none",this._headerDOM=s}set tableColumnTitles(e){const t=Fe({class:"igv-roi-table-column-titles"});e.appendChild(t);for(const{label:n,width:r}of this.columnFormat){const s=Fe();t.appendChild(s),s.style.width=r,s.innerText=n}this._tableColumnTitlesDOM=t}get tableColumnTitles(){return this._tableColumnTitlesDOM}set tableRowContainer(e){const t=Fe({class:"igv-roi-table-row-container"});e.appendChild(t),this._tableRowContainerDOM=t}get tableRowContainer(){return this._tableRowContainerDOM}set footerDOM(e){const t=Fe();this.tableDOM.appendChild(t);const n=Fe({class:"igv-roi-table-button"});t.appendChild(n),n.id="igv-roi-table-view-button",n.textContent="Go To",n.style.pointerEvents="none",this._footerDOM=t,this.gotoButton=n,this.boundGotoButtonHandler=e.bind(this),this.gotoButton.addEventListener("click",this.boundGotoButtonHandler)}tableRowDOMHelper(e){e.addEventListener("mousedown",t=>{t.stopPropagation(),e.classList.toggle("igv-roi-table-row-selected"),e.classList.contains("igv-roi-table-row-selected")?e.classList.remove("igv-roi-table-row-hover"):e.classList.add("igv-roi-table-row-hover"),this.setTableRowSelectionState(e.classList.contains("igv-roi-table-row-selected"))}),e.addEventListener("mouseover",t=>{e.classList.contains("igv-roi-table-row-selected")?e.classList.remove("igv-roi-table-row-hover"):e.classList.add("igv-roi-table-row-hover")}),e.addEventListener("mouseout",t=>{e.classList.remove("igv-roi-table-row-hover")})}clearTable(){const e=this.tableRowContainer.querySelectorAll(".igv-roi-table-row");for(let t of e)t.remove()}setTableRowSelectionState(e){e?this.tableRowSelectionList.push(1):this.tableRowSelectionList.pop(),this.gotoButton.style.pointerEvents=this.tableRowSelectionList.length>0?"auto":"none"}present(){this.tableDOM.style.left="0px";const{y:e}=this.browser.root.getBoundingClientRect(),{y:t}=this.config.parent.getBoundingClientRect();this.tableDOM.style.top=`${e-t}px`,this.tableDOM.style.display="flex"}dismiss(){this.tableDOM.style.display="none"}isVisible(){return this.tableDOM.style.display!=="none"}dispose(){this.tableDOM.innerHTML="",this.tableDOM.remove();for(const e of Object.keys(this))this[e]=void 0;document.removeEventListener("click",this.boundDismissHandler)}}class wl extends _0{constructor(e){const t=Object.assign({width:"1024px"},e);super(t),this.descriptionDOM=e}set descriptionDOM(e){if(e.description){let t;t=Fe({class:"igv-roi-table-description"}),this.tableDOM.insertBefore(t,this.tableColumnTitles),t.style.height="auto",t.innerHTML="BLAT result for query sequence:",t=Fe({class:"igv-roi-table-description"}),this.tableDOM.insertBefore(t,this.tableColumnTitles),t.style.height="auto",t.style.maxHeight="128px",t.innerHTML=e.description,t=Fe({class:"igv-roi-table-goto-explainer"}),this.tableDOM.insertBefore(t,this.tableColumnTitles),t.innerHTML="Select one or more rows and click Go To to view the regions"}}tableRowDOM(e){const t=Fe({class:"igv-roi-table-row"}),n=e.map(r=>isFinite(r)?He(r):r);for(let r=0;r<n.length;r++){const s=Fe();t.appendChild(s);const a=this.columnFormat[r];s.style.width=a.width||"fit-content",s.innerText=n[r]}return this.tableRowDOMHelper(t),t}renderTable(e){if(Array.from(this.tableRowContainer.querySelectorAll(".igv-roi-table-row")).forEach(t=>t.remove()),e.length>0)for(let t of e){const n=this.tableRowDOM(t);this.tableRowContainer.appendChild(n)}}static getColumnFormatConfiguration(){return[{label:"chr",width:"7%"},{label:"start",width:"12%"},{label:"end",width:"12%"},{label:"strand",width:"5%"},{label:"score",width:"5%"},{label:"match",width:"5%"},{label:"mis-match",width:"7%"},{label:"rep. match",width:"7%"},{label:"N's",width:"3%"},{label:"Q gap count",width:"9%"},{label:"Q gap bases",width:"9%"},{label:"T gap count",width:"9%"},{label:"T gap bases",width:"9%"}]}static gotoButtonHandler(e){e.stopPropagation();const t=this.tableDOM.querySelectorAll(".igv-roi-table-row-selected"),n=[];for(const r of t){const s=[];r.querySelectorAll("div").forEach(c=>s.push(c.innerText));const[a,o,l]=s;n.push(`${a}:${o}-${l}`)}for(const r of this.tableDOM.querySelectorAll(".igv-roi-table-row"))r.classList.remove("igv-roi-table-row-selected");this.setTableRowSelectionState(!1),this.browser.search(n.join(" "))}}const CA="https://igv.org/services/blatUCSC.php";async function C0({url:i,userSeq:e,db:t}){if(i=i||CA,!t)throw Error("Blat database is not defined");const n=await xA(i,e,t);return n.fields,n.blat.map(X3)}async function xA(i="",e,t){const n=new URLSearchParams;return n.append("userSeq",e),n.append("db",t),(await fetch(i,{method:"post",body:n})).json()}const ds=25e3,kA="https://igv.org/services/blatUCSC.php";class IA extends Ih{constructor(e,t){super(e,t),this.name||(this.name="Blat Results"),this.sequence=e.sequence,this.table=void 0,e.features&&(this._features=e.features,this.featureSource=new co({features:e.features},this.browser.genome),delete e.features)}async postInit(){if(!this.featureSource){const e=this.browser.genome.id,t=this.browser.config.blatServerURL,n=await C0({url:t,userSeq:this.sequence,db:e});this._features=n,this.featureSource=new co({features:n},this.browser.genome)}}openTableView(){if(this.table===void 0){const e=this._features.map(n=>[n.chr,n.start+1,n.end,n.strand,n.score,n.matches,n.misMatches,n.repMatches,n.nCount,n.qNumInsert,n.qBaseInsert,n.tNumInsert,n.tBaseInsert]),t={browser:this.browser,parent:this.browser.columnContainer,headerTitle:this.config.title,description:this.sequence,dismissHandler:()=>{this.table.dismiss(),this.table.dispose(),this.table=void 0},columnFormat:wl.getColumnFormatConfiguration(),gotoButtonHandler:wl.gotoButtonHandler};this.table=new wl(t),this.table.renderTable(e)}this.table.present()}menuItemList(){const e=super.menuItemList();e.push("<hr/>");function t(){this.openTableView()}return e.push({label:"Open table view",click:t}),e}dispose(){super.dispose(),this.table&&this.table.popover.parentElement.removeChild(this.table.popover)}}async function us({sequence:i,browser:e,name:t,title:n}){if(i.length>ds){e.alert.present(`Sequence size exceeds maximum allowed length (${i.length} > ${ds})`);return}try{const r=e.genome.id,s=e.config.blatServerURL||kA,a=await C0({url:s,userSeq:i,db:r}),o={type:"blat",name:t||"blat results",title:n||"blat results",sequence:i,altColor:"rgb(176, 176, 236)",color:"rgb(236, 176, 176)",searchable:!1,features:a};(await e.loadTrack(o)).openTableView()}catch(r){e.alert.present(`Error performing blat search:  ${r}`)}}const ho=Number.MIN_SAFE_INTEGER,nr={TTT:"F",TTC:"F",TTA:"L",TTG:"L",CTT:"L",CTC:"L",CTA:"L",CTG:"L",ATT:"I",ATC:"I",ATA:"I",ATG:"M",GTT:"V",GTC:"V",GTA:"V",GTG:"V",TCT:"S",TCC:"S",TCA:"S",TCG:"S",CCT:"P",CCC:"P",CCA:"P",CCG:"P",ACT:"T",ACC:"T",ACA:"T",ACG:"T",GCT:"A",GCC:"A",GCA:"A",GCG:"A",TAT:"Y",TAC:"Y",TAA:"STOP",TAG:"STOP",CAT:"H",CAC:"H",CAA:"Q",CAG:"Q",AAT:"N",AAC:"N",AAA:"K",AAG:"K",GAT:"D",GAC:"D",GAA:"E",GAG:"E",TGT:"C",TGC:"C",TGA:"STOP",TGG:"W",CGT:"R",CGC:"R",CGA:"R",CGG:"R",AGT:"S",AGC:"S",AGA:"R",AGG:"R",GGT:"G",GGC:"G",GGA:"G",GGG:"G"},Ec={},bl=["A","G","C","T","Y","R","W","S","K","M","D","V","H","B","N","X"],nu=["T","C","G","A","R","Y","W","S","M","K","H","B","D","V","N","X"];for(let i=0;i<bl.length;i++)Ec[bl[i]]=nu[i],Ec[bl[i].toLowerCase()]=nu[i].toLowerCase();const da=25,ua=115,pa=15,ru=25,ga=5,EA=1/10,Eh=10;class x0{constructor(e,t){this.config=e,this.browser=t,this.type="sequence",this.removable=e.removable===!0,this.name=e.name,this.id=e.id,this.sequenceType=e.sequenceType||"dna",this.disableButtons=!1,this.order=e.order||ho,this.ignoreTrackMenu=!1,this.reversed=e.reversed===!0,this.frameTranslate=e.frameTranslate===!0,this.height=this.frameTranslate?ua:da,e.url&&(e.fastaURL=e.url),e.fastaURL||(this.id=e.id||"sequence")}menuItemList(){return[{name:this.reversed?"Forward":"Reverse",click:()=>{this.reversed=!this.reversed,this.trackView.repaintViews()}},{name:this.frameTranslate?"Close Translation":"Three-frame Translate",click:()=>{if(this.frameTranslate=!this.frameTranslate,this.frameTranslate){for(let e of this.trackView.viewports)e.setContentHeight(ua);this.trackView.setTrackHeight(ua)}else{for(let e of this.trackView.viewports)e.setContentHeight(da);this.trackView.setTrackHeight(da)}this.trackView.repaintViews()}}]}contextMenuItemList(e){const t=e.viewport;if(t.referenceFrame.bpPerPixel<=1){const r=t.getWidth()*t.referenceFrame.bpPerPixel,s=t.referenceFrame.chr,a=Math.floor(t.referenceFrame.start),o=Math.ceil(a+r),l=[{label:this.reversed?"View visible sequence (reversed)...":"View visible sequence...",click:async()=>{let c=await this.browser.genome.getSequence(s,a,o);c?this.reversed&&(c=Hi(c)):c="Unknown sequence",this.browser.alert.present(c)}}];return To()&&l.push({label:"Copy visible sequence",click:async()=>{let c=await this.browser.genome.getSequence(s,a,o);c?this.reversed&&(c=Hi(c)):c="Unknown sequence";try{await navigator.clipboard.writeText(c)}catch(h){console.error(h),this.browser.alert.present(`error copying sequence to clipboard ${h}`)}}}),l.push({label:"BLAT read sequence",click:async()=>{let c=await this.browser.genome.getSequence(s,a,o);if(c){this.reversed&&(c=Hi(c));const h=`blat: ${s}:${a+1}-${o}`,f=`blat: ${s}:${a+1}-${o}`;us({sequence:c,browser:this.browser,name:h,title:f})}}}),l.push("<hr/>"),l}else return}translateSequence(e){const t=[[],[],[]];for(let n of[0,1,2]){let r=n;for(;e.length-r>=3;){let s=e.slice(r,r+3);this.reversed&&(s=s.split("").reverse().join(""));const a=nr[s.toUpperCase()]||"";t[n].push({codons:s,aminoA:a}),r+=3}}return t}async getSequenceSource(){return this.config.fastaURL?(this.fasta||(this.fasta=new SA(this.config,this.browser.genome),await this.fasta.init()),this.fasta):this.browser.genome}async getFeatures(e,t,n,r){if(t=Math.floor(t),n=Math.floor(n),r&&r>Eh)return null;{const a=await(await this.getSequenceSource()).getSequence(e,t,n);return{bpStart:t,sequence:a}}}draw(e){const t=e.context;if(e.features){let n=e.features.sequence;if(!n)return;this.reversed&&(n=n.split("").map(function(a){return Ec[a]}).join(""));const r=e.features.bpStart,s=1+e.bpStart+e.pixelWidth*e.bpPerPixel;for(let a=Math.floor(e.bpStart);a<=s;a++){const o=Math.floor(a-r);if(o>=0&&o<n.length){const c=(a-e.bpStart)/e.bpPerPixel,h=1/e.bpPerPixel,f=n[o],d=this.fillColor(f.toUpperCase());if(e.bpPerPixel>EA)de.fillRect(t,c,ga,h,pa-ga,{fillStyle:d});else{const u=c+.5*(h-t.measureText(f).width);e.axis==="y"?(t.save(),de.labelTransformWithContext(t,u),de.strokeText(t,f,u,pa,{strokeStyle:d}),t.restore()):de.strokeText(t,f,u,pa,{strokeStyle:d})}}}if(this.frameTranslate){let a=pa+2*ga;const o=this.translateSequence(n);for(let l=0;l<o.length;l++){const c=o[l];for(let h=0;h<c.length;h++){let f=h%2===0?"rgb(160,160,160)":"rgb(224,224,224)";const d=c[h],p=r+l+h*3-e.bpStart,m=Math.floor(p/e.bpPerPixel),F=Math.floor((p+3)/e.bpPerPixel),g=Math.round((m+F)/2);if(F<0)continue;if(m>e.pixelWidth)break;let w=d.aminoA;d.aminoA.indexOf("STOP")>-1?(f="rgb(255, 0, 0)",w="STOP"):d.aminoA==="M"&&(f="rgb(0, 153, 0)",w="START"),de.fillRect(t,m,a,F-m,ru,{fillStyle:f}),e.bpPerPixel<=1/10&&de.strokeText(t,w,g-t.measureText(w).width/2,a+15)}a+=ru+ga}}}}get supportsWholeGenome(){return!1}computePixelHeight(e){return this.height=this.frameTranslate?ua:da,this.height}fillColor(e){return this.color?this.color:this.sequenceType==="dna"?this.browser.nucleotideColors[e]||"gray":"rgb(0, 0, 150)"}getState(){const e={type:"sequence"};return this.order!==ho&&(e.order=this.order),this.reversed&&(e.revealed=!0),e}}class SA{constructor(e,t){this.config=e,this.genome=t}async init(){this.fasta=await qg(this.config),this.chrNameMap=new Map;for(let e of this.fasta.chromosomeNames)this.chrNameMap.set(this.genome.getChromosomeName(e),e)}async getSequence(e,t,n){const r=this.chrNameMap.has(e)?this.chrNameMap.get(e):e;return this.fasta.getSequence(r,t,n)}}class NA{constructor(e,t,n,r){this.guid=Et(),this.trackView=e,this.referenceFrame=n,this.browser=e.browser,this.$viewport=ve('<div class="igv-viewport">'),t.appendChild(this.$viewport.get(0)),e.track.height&&(this.$viewport.get(0).style.height=`${e.track.height}px`),e.track instanceof x0&&(this.alert=new Dg(this.$viewport.get(0))),this.contentTop=0,this.contentHeight=this.$viewport.height(),this.$viewport.width(r),this.initializationHelper()}initializationHelper(){}showMessage(e){this.messageDiv||(this.messageDiv=document.createElement("div"),this.messageDiv.className="igv-viewport-message",this.$viewport.append(ve(this.messageDiv))),this.messageDiv.textContent=e,this.messageDiv.style.display="inline-block"}hideMessage(e){this.messageDiv&&(this.messageDiv.style.display="none")}setTrackLabel(e){}startSpinner(){}stopSpinner(){}checkZoomIn(){return!0}shift(){}setTop(e){this.contentTop=e,this.$viewport.height()}async loadFeatures(){}clearCache(){}repaint(){}draw(e,t,n){console.log("Viewport - draw(drawConfiguration, features, roiFeatures)")}checkContentHeight(e){let t=this.trackView.track;if(e=e||this.cachedFeatures,t.displayMode==="FILL")this.setContentHeight(this.$viewport.height());else if(typeof t.computePixelHeight=="function"&&e&&e.length>0){let n=t.computePixelHeight(e),r=this.contentHeight;n!==r&&this.setContentHeight(n)}}getContentHeight(){return this.contentHeight}setContentHeight(e){this.contentHeight=e}isLoading(){return!1}saveSVG(){}isVisible(){return this.$viewport.width()}setWidth(e){this.$viewport.width(e)}getWidth(){return this.$viewport.width()}getContentTop(){return this.contentTop}containsPosition(e,t){console.log("Viewport - containsPosition(chr, position)")}addMouseHandlers(){}removeMouseHandlers(){}dispose(){this.$viewport.get(0).remove();for(let e of Object.keys(this))this[e]=void 0}}/*!!
 *  Canvas 2 Svg v1.0.19
 *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
 *
 *  Licensed under the MIT license:
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  Author:
 *  Kerry Liu
 *
 *  Copyright (c) 2014 Gliffy Inc.
 */function _t(i,e){var t=Object.keys(e),n;for(n=0;n<t.length;n++)i=i.replace(new RegExp("\\{"+t[n]+"\\}","gi"),e[t[n]]);return i}function ma(i){var e,t,n;if(!i)throw new Error("cannot create a random attribute name for an undefined object");e="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",t="";do for(t="",n=0;n<12;n++)t+=e[Math.floor(Math.random()*e.length)];while(i[t]);return t}function BA(i,e){var t,n,r={},s;for(i=i.split(","),e=e||10,t=0;t<i.length;t+=2)n="&"+i[t+1]+";",s=parseInt(i[t],e),r[n]="&#"+s+";";return r["\\xa0"]="&#160;",r}function TA(i){var e={left:"start",right:"end",center:"middle",start:"start",end:"end"};return e[i]||e.start}function MA(i){var e={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return e[i]||e.alphabetic}function Fl(i){var e=Math.sqrt(i[0]*i[0]+i[1]*i[1]);return[i[0]/e,i[1]/e]}function RA(i,e){return i.x<e.x+e.width&&i.x+i.width>e.x&&i.y<e.y+e.height&&i.y+i.height>e.y}const su=BA("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Yr={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}};class yl{constructor(e,t){this.__root=e,this.__ctx=t}addColorStop(e,t){var n=this.__ctx.__createElement("stop"),r,s;n.setAttribute("offset",e),t&&t.indexOf("rgba")!==-1?(r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,s=r.exec(t),n.setAttribute("stop-color",_t("rgb({r},{g},{b})",{r:s[1],g:s[2],b:s[3]})),n.setAttribute("stop-opacity",s[4])):n.setAttribute("stop-color",t),this.__root.appendChild(n)}}class au{constructor(e,t){this.__root=e,this.__ctx=t}}class mn{constructor(e){if(!(this instanceof mn))return new mn(e);if(this.config=e,this.width=e.width,this.height=e.height,this.enableMirroring=e.enableMirroring||!1,this.canvas=this,this.__document=document,e.ctx?this.__ctx=e.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.isSVG=!0,this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__createElement("svg"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__root.setAttribute("overflow","visible"),e.viewbox){const r=e.viewbox.x+" "+e.viewbox.y+" "+e.viewbox.width+" "+e.viewbox.height;this.__root.setAttribute("viewBox",r),this.viewbox=e.viewbox}this.__ids={},this.__defs=this.__createElement("defs"),this.__root.appendChild(this.__defs),this.multiLocusGap=e.multiLocusGap;let t={id:"svg_output_backdrop",width:"100%",height:"100%",fill:e.backdropColor||"white"},n=this.__createElement("rect",t);this.__root.appendChild(n),this.__rootGroup=this.__createElement("g",{id:"root-group"}),this.__root.appendChild(this.__rootGroup),this.__currentElement=this.__rootGroup}setWidth(e){this.width=e,this.__root.setAttribute("width",this.width);const t=this.config.viewbox.x+" "+this.config.viewbox.y+" "+e+" "+this.config.viewbox.height;this.__root.setAttribute("viewBox",t)}setHeight(e){this.height=e,this.__root.setAttribute("height",this.height);const t=this.config.viewbox.x+" "+this.config.viewbox.y+" "+this.config.viewbox.width+" "+e;this.__root.setAttribute("viewBox",t)}__createElement(e,t,n){typeof t>"u"&&(t={});let r=this.__document.createElementNS("http://www.w3.org/2000/svg",e);n&&(r.setAttribute("fill","none"),r.setAttribute("stroke","none"));for(let s of Object.keys(t))r.setAttribute(s,t[s]);return r}__setDefaultStyles(){var e=Object.keys(Yr),t,n;for(t=0;t<e.length;t++)n=e[t],this[n]=Yr[n].canvas}__applyStyleState(e){var t=Object.keys(e),n,r;for(n=0;n<t.length;n++)r=t[n],this[r]=e[r]}__getStyleState(){var e,t={},n=Object.keys(Yr),r;for(e=0;e<n.length;e++)r=n[e],t[r]=this[r];return t}__applyStyleToCurrentElement(e){var t=this.__currentElement,n=this.__currentElementsToStyle;n&&(t.setAttribute(e,""),t=n.element,n.children.forEach(function(p){p.setAttribute(e,"")}));var r=Object.keys(Yr),s,a,o,l,c,h;for(s=0;s<r.length;s++)if(a=Yr[r[s]],o=this[r[s]],a.apply){if(o instanceof au){if(o.__ctx)for(;o.__ctx.__defs.childNodes.length;)l=o.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[l]=l,this.__defs.appendChild(o.__ctx.__defs.childNodes[0]);t.setAttribute(a.apply,_t("url(#{id})",{id:o.__root.getAttribute("id")}))}else if(o instanceof yl)t.setAttribute(a.apply,_t("url(#{id})",{id:o.__root.getAttribute("id")}));else if(a&&a.apply.indexOf(e)!==-1&&a.svg!==o)if((a.svgAttr==="stroke"||a.svgAttr==="fill")&&o&&o.indexOf("rgba")!==-1){c=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,h=c.exec(o),t.setAttribute(a.svgAttr,_t("rgb({r},{g},{b})",{r:h[1],g:h[2],b:h[3]}));var f=h[4],d=this.globalAlpha;d!=null&&(f*=d),t.setAttribute(a.svgAttr+"-opacity",f)}else{var u=a.svgAttr;if(r[s]==="globalAlpha"&&(u=e+"-"+a.svgAttr,t.getAttribute(u)))continue;t.setAttribute(u,o)}}}__closestGroupOrSvg(e){return e=e||this.__currentElement,e.nodeName==="g"||e.nodeName==="svg"?e:this.__closestGroupOrSvg(e.parentNode)}getSerializedSvg(e){var t=new XMLSerializer().serializeToString(this.__root),n,r,s,a,o;if(e)for(n=Object.keys(su),r=0;r<n.length;r++)s=n[r],a=su[s],o=new RegExp(s,"gi"),o.test(t)&&(t=t.replace(o,a));return t}getSvg(){return this.__root}saveWithTranslationAndClipRect(e,t,n,r,s,a){const o=`${e}_clip_rect`;let l=this.__createElement("clipPath",{id:o});this.__defs.appendChild(l);const c={x:"0",y:a.toString(),width:r.toString(),height:s.toString()};l.appendChild(this.__createElement("rect",c));const h=this.__createElement("g");h.setAttribute("transform",_t("translate({x},{y})",{x:t,y:n})),h.setAttribute("clip-path",_t("url(#{id})",{id:o}));const f=this.__closestGroupOrSvg();f.appendChild(h),this.__groupStack.push(f),this.__currentElement=h,this.__stack.push(this.__getStyleState())}save(){var e=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e,this.__stack.push(this.__getStyleState())}restore(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var e=this.__stack.pop();this.__applyStyleState(e)}__addTransform(e){var t=this.__closestGroupOrSvg();if(t.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:t,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var n=this.__createElement("g");t.appendChild(n),this.__currentElement=n}var r=this.__currentElement.getAttribute("transform");r?r+=" ":r="",r+=e,this.__currentElement.setAttribute("transform",r)}addTrackGroupWithTranslationAndClipRect(e,t,n,r,s,a){const o=e+"_clip_rect";let l=this.__createElement("clipPath",{id:o});this.__defs.appendChild(l),l.appendChild(this.__createElement("rect",{x:"0",y:a.toString(),width:r.toString(),height:s.toString()}));let c=this.__createElement("g");this.__rootGroup.appendChild(c),c.setAttribute("transform",_t("translate({x},{y})",{x:t,y:n})),c.setAttribute("id",e+"_group"),c.setAttribute("clip-path",_t("url(#{id})",{id:o})),this.__currentElement=c}scale(e,t){t===void 0&&(t=e),this.__addTransform(_t("scale({x},{y})",{x:e,y:t}))}rotate(e){var t=e*180/Math.PI;this.__addTransform(_t("rotate({angle},{cx},{cy})",{angle:t,cx:0,cy:0}))}translate(e,t){this.__addTransform(_t("translate({x},{y})",{x:e,y:t}))}transform(e,t,n,r,s,a){this.__addTransform(_t("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:t,c:n,d:r,e:s,f:a}))}beginPath(){var e,t;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),t=this.__closestGroupOrSvg(),t.appendChild(e),this.__currentElement=e}__applyCurrentDefaultPath(){var e=this.__currentElement;e.nodeName==="path"?e.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",e.nodeName)}__addPathCommand(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e}moveTo(e,t){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:e,y:t},this.__addPathCommand(_t("M {x} {y}",{x:e,y:t}))}closePath(){this.__currentDefaultPath&&this.__addPathCommand("Z")}lineTo(e,t){this.__currentPosition={x:e,y:t},this.__currentDefaultPath&&this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(_t("L {x} {y}",{x:e,y:t})):this.__addPathCommand(_t("M {x} {y}",{x:e,y:t}))}bezierCurveTo(e,t,n,r,s,a){this.__currentPosition={x:s,y:a},this.__addPathCommand(_t("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:t,cp2x:n,cp2y:r,x:s,y:a}))}quadraticCurveTo(e,t,n,r){this.__currentPosition={x:n,y:r},this.__addPathCommand(_t("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:t,x:n,y:r}))}arcTo(e,t,n,r,s){var a=this.__currentPosition&&this.__currentPosition.x,o=this.__currentPosition&&this.__currentPosition.y;if(!(typeof a>"u"||typeof o>"u")){if(s<0)throw new Error("IndexSizeError: The radius provided ("+s+") is negative.");if(a===e&&o===t||e===n&&t===r||s===0){this.lineTo(e,t);return}var l=Fl([a-e,o-t]),c=Fl([n-e,r-t]);if(l[0]*c[1]===l[1]*c[0]){this.lineTo(e,t);return}var h=l[0]*c[0]+l[1]*c[1],f=Math.acos(Math.abs(h)),d=Fl([l[0]+c[0],l[1]+c[1]]),u=s/Math.sin(f/2),p=e+u*d[0],m=t+u*d[1],F=[-l[1],l[0]],g=[c[1],-c[0]],w=function(v){var T=v[0],A=v[1];return A>=0?Math.acos(T):-Math.acos(T)},b=w(F),y=w(g);this.lineTo(p+F[0]*s,m+F[1]*s),this.arc(p,m,s,b,y)}}stroke(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")}fill(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")}rect(e,t,n,r){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.closePath()}fillRect(e,t,n,r){r<0&&(t+=r,r=-r),n<0&&(e+=n,n=-n);var s={x:e,y:t,width:n,height:r};if(!(this.viewbox&&!RA(this.viewbox,s))){var a,o;a=this.__createElement("rect",s,!0),o=this.__closestGroupOrSvg(),o.appendChild(a),this.__currentElement=a,this.__applyStyleToCurrentElement("fill")}}strokeRect(e,t,n,r){var s,a;s=this.__createElement("rect",{x:e,y:t,width:n,height:r},!0),a=this.__closestGroupOrSvg(),a.appendChild(s),this.__currentElement=s,this.__applyStyleToCurrentElement("stroke")}strokeEllipse(e,t,n,r,s,a,o,l){this.__ellipse(e,t,n,r,s,a,o,l,"stroke")}fillEllipse(e,t,n,r,s,a,o,l){this.__ellipse(e,t,n,r,s,a,o,l,"fill")}__ellipse(e,t,n,r,s,a,o,l,c){const h={cx:e,cy:t,rx:n,ry:r},f=this.__createElement("ellipse",h,!0);this.__closestGroupOrSvg().appendChild(f),this.__currentElement=f,this.__applyStyleToCurrentElement(c)}__clearCanvas(){for(var e=this.__closestGroupOrSvg(),t=e.getAttribute("transform"),n=this.__root.childNodes[1],r=n.childNodes,s=r.length-1;s>=0;s--)r[s]&&n.removeChild(r[s]);this.__currentElement=n,this.__groupStack=[],t&&this.__addTransform(t)}clearRect(e,t,n,r){if(e===0&&t===0&&n===this.width&&r===this.height){this.__clearCanvas();return}var s,a=this.__closestGroupOrSvg();s=this.__createElement("rect",{x:e,y:t,width:n,height:r,fill:"#FFFFFF"},!0),a.appendChild(s)}createLinearGradient(e,t,n,r){var s=this.__createElement("linearGradient",{id:ma(this.__ids),x1:e+"px",x2:n+"px",y1:t+"px",y2:r+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(s),new yl(s,this)}createRadialGradient(e,t,n,r,s,a){var o=this.__createElement("radialGradient",{id:ma(this.__ids),cx:r+"px",cy:s+"px",r:a+"px",fx:e+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(o),new yl(o,this)}__parseFont(){var e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i,t=e.exec(this.font),n={style:t[1]||"normal",size:t[4]||"10px",family:t[6]||"sans-serif",weight:t[3]||"normal",decoration:t[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(n.decoration="underline"),this.__fontHref&&(n.href=this.__fontHref),n}__wrapTextLink(e,t){if(e.href){var n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),n.appendChild(t),n}return t}__applyText(e,t,n,r){var s=this.__parseFont(),a=this.__closestGroupOrSvg(),o=this.__createElement("text",{"font-family":s.family,"font-size":s.size,"font-style":s.style,"font-weight":s.weight,"text-decoration":s.decoration,x:t,y:n,"text-anchor":TA(this.textAlign),"dominant-baseline":MA(this.textBaseline)},!0);o.appendChild(this.__document.createTextNode(e)),this.__currentElement=o,this.__applyStyleToCurrentElement(r),a.appendChild(this.__wrapTextLink(s,o))}fillText(e,t,n){this.__applyText(e,t,n,"fill")}strokeText(e,t,n){this.__applyText(e,t,n,"stroke")}measureText(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)}arc(e,t,n,r,s,a){if(r!==s){r=r%(2*Math.PI),s=s%(2*Math.PI),r===s&&(s=(s+2*Math.PI-.001*(a?-1:1))%(2*Math.PI));var o=e+n*Math.cos(s),l=t+n*Math.sin(s),c=e+n*Math.cos(r),h=t+n*Math.sin(r),f=a?0:1,d=0,u=s-r;u<0&&(u+=2*Math.PI),a?d=u>Math.PI?0:1:d=u>Math.PI?1:0,this.lineTo(c,h),this.__addPathCommand(_t("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:n,ry:n,xAxisRotation:0,largeArcFlag:d,sweepFlag:f,endX:o,endY:l})),this.__currentPosition={x:o,y:l}}}clip(){var e=this.__closestGroupOrSvg(),t=this.__createElement("clipPath"),n=ma(this.__ids),r=this.__createElement("g");this.__applyCurrentDefaultPath(),e.removeChild(this.__currentElement),t.setAttribute("id",n),t.appendChild(this.__currentElement),this.__defs.appendChild(t),e.setAttribute("clip-path",_t("url(#{id})",{id:n})),e.appendChild(r),this.__currentElement=r}drawImage(){var e=Array.prototype.slice.call(arguments),t=e[0],n,r,s,a,o=0,l=0,c,h,f,d,u,p,m,F,g,w;if(e.length===3)n=e[1],r=e[2],c=t.width,h=t.height,s=c,a=h;else if(e.length===5)n=e[1],r=e[2],s=e[3],a=e[4],c=t.width,h=t.height;else if(e.length===9)o=e[1],l=e[2],c=e[3],h=e[4],n=e[5],r=e[6],s=e[7],a=e[8];else throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);f=this.__closestGroupOrSvg(),this.__currentElement;var b="translate("+n+", "+r+")";if(t instanceof mn){if(d=t.getSvg().cloneNode(!0),d.childNodes&&d.childNodes.length>1){for(u=d.childNodes[0];u.childNodes.length;)w=u.childNodes[0].getAttribute("id"),this.__ids[w]=w,this.__defs.appendChild(u.childNodes[0]);if(p=d.childNodes[1],p){var y=p.getAttribute("transform"),v;y?v=y+" "+b:v=b,p.setAttribute("transform",v),f.appendChild(p)}}}else(t.nodeName==="CANVAS"||t.nodeName==="IMG")&&(m=this.__createElement("image"),m.setAttribute("width",s),m.setAttribute("height",a),m.setAttribute("preserveAspectRatio","none"),(o||l||c!==t.width||h!==t.height)&&(F=this.__document.createElement("canvas"),F.width=s,F.height=a,g=F.getContext("2d"),g.drawImage(t,o,l,c,h,0,0,s,a),t=F),m.setAttribute("transform",b),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.nodeName==="CANVAS"?t.toDataURL():t.getAttribute("src")),f.appendChild(m))}createPattern(e,t){let n=this.__document.__createElement("pattern"),r=ma(this.__ids),s;return n.setAttribute("id",r),n.setAttribute("width",e.width),n.setAttribute("height",e.height),e.nodeName==="CANVAS"||e.nodeName==="IMG"?(s=this.__createElement("image"),s.setAttribute("width",e.width),s.setAttribute("height",e.height),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.nodeName==="CANVAS"?e.toDataURL():e.getAttribute("src")),n.appendChild(s),this.__defs.appendChild(n)):e instanceof mn&&(n.appendChild(e.__root.childNodes[1]),this.__defs.appendChild(n)),new au(n,this)}setLineDash(e){e&&e.length>0?this.lineDash=e.join(","):this.lineDash=null}drawFocusRing(){}createImageData(){}getImageData(){}putImageData(){}globalCompositeOperation(){}setTransform(){}}function k0(i){if(i.startsWith("GCF")||i.startsWith("GCA")&&i.length>=13){const e=i.substring(0,3),t=i.substring(4,7),n=i.substring(7,10),r=i.substring(10,13);return"https://hgdownload.soe.ucsc.edu/hubs/"+e+"/"+t+"/"+n+"/"+r+"/"+i+"/hub.txt"}else return}var Rn,Sc,I0;const fn=class fn{constructor(e,t,n){ct(this,Rn);this.url=e;const r=e.lastIndexOf("/");if(this.baseURL=e.substring(0,r+1),t[0].type==="hub")this.hubStanza=t[0];else throw Error("Unexpected hub.txt file -- does the first line start with 'hub'?");if(this.hubStanza.getProperty("useOneFile")!=="on")throw Error("Only 'useOneFile' hubs are currently supported");if(t.length<2)throw Error("Expected at least 2 stanzas, hub and genome");if(t[1].type==="genome")this.genomeStanza=t[1];else throw Error(`Unexpected hub file -- expected "genome" stanza but found "${t[1].type}"`);this.trackStanzas=[];for(let s=2;s<t.length;s++)t[s].type==="track"&&this.trackStanzas.push(t[s]);if(n){this.groupStanzas=n,this.groupPriorityMap=new Map;for(let s of n)s.hasProperty("priority")&&this.groupPriorityMap.set(s.getProperty("name"),Number.parseInt(s.getProperty("priority"))*10)}}static async loadHub(e){const t=e.lastIndexOf("/"),n=e.substring(0,t+1),r=await ou(e);let s;if(r[1].type==="genome"){const a=r[1];if(a.hasProperty("groups")){const o=n+a.getProperty("groups");s=await ou(o)}}return new fn(e,r,s)}getDefaultPosition(){return this.genomeStanza.getProperty("defaultPos")}getGenomeConfig(e={}){const t=this.genomeStanza.getProperty("genome"),n=this.hubStanza.getProperty("shortLabel")||this.genomeStanza.getProperty("scientificName")||this.genomeStanza.getProperty("organism")||this.genomeStanza.getProperty("description"),r=n+(n?` (${t})`:` ${t}`),s={hubURL:this.url,id:t,name:r,twoBitURL:this.baseURL+this.genomeStanza.getProperty("twoBitPath"),nameSet:"ucsc",wholeGenomeView:!1,showChromosomeWidget:!1};if(this.genomeStanza.hasProperty("defaultPos")){const l=this.genomeStanza.getProperty("defaultPos");if(l){const c=l.lastIndexOf(":");s.locus=c>0?l.substring(0,c):l}}this.genomeStanza.hasProperty("blat")&&(s.blat=this.baseURL+this.genomeStanza.getProperty("blat")),this.genomeStanza.hasProperty("chromAliasBb")&&(s.chromAliasBbURL=this.baseURL+this.genomeStanza.getProperty("chromAliasBb")),this.genomeStanza.hasProperty("chromAlias")&&(s.aliasURL=this.baseURL+this.genomeStanza.getProperty("chromAlias")),this.genomeStanza.hasProperty("twoBitBptURL")&&(s.twoBitBptURL=this.baseURL+this.genomeStanza.getProperty("twoBitBptURL")),this.genomeStanza.hasProperty("twoBitBptUrl")&&(s.twoBitBptURL=this.baseURL+this.genomeStanza.getProperty("twoBitBptUrl")),e.includeChromSizes&&this.genomeStanza.hasProperty("chromSizes")&&(s.chromSizesURL=this.baseURL+this.genomeStanza.getProperty("chromSizes")),this.hubStanza.hasProperty("longLabel")?s.description=this.hubStanza.getProperty("longLabel").replace("/",`
`):(s.description=s.id,this.genomeStanza.hasProperty("description")&&(s.description+=`
${this.genomeStanza.getProperty("description")}`),this.genomeStanza.hasProperty("organism")&&(s.description+=`
${this.genomeStanza.getProperty("organism")}`),this.genomeStanza.hasProperty("scientificName")&&(s.description+=`
${this.genomeStanza.getProperty("scientificName")}`),this.genomeStanza.hasProperty("htmlPath")&&(s.infoURL=this.baseURL+this.genomeStanza.getProperty("htmlPath")));const a=this.trackStanzas.filter(l=>l.name==="cytoBandIdeo"&&l.hasProperty("bigDataUrl"));a.length>0&&(s.cytobandBbURL=this.baseURL+a[0].getProperty("bigDataUrl"));const o=l=>!fn.filterTracks.has(l.name)&&l.getProperty("visibility")!=="hide";return s.tracks=Ke(this,Rn,Sc).call(this,o),s}getGroupedTrackConfigurations(){const e=new Map;for(let n of Ke(this,Rn,Sc).call(this)){if(n.name==="cytoBandIdeo")continue;const r=n.group||"other";e.has(r)?e.get(r).push(n):e.set(r,[n])}const t=this.groupStanzas?new Map(this.groupStanzas.map(n=>[n.getProperty("name"),n])):new Map;return Array.from(e.keys()).map(n=>({label:t.has(n)?t.get(n).getProperty("label"):n,tracks:e.get(n)}))}};Rn=new WeakSet,Sc=function(e){return this.trackStanzas.filter(t=>fn.supportedTypes.has(t.format)&&t.hasProperty("bigDataUrl")&&(!e||e(t))).map(t=>Ke(this,Rn,I0).call(this,t))},I0=function(e){const t=e.format,n={id:e.getProperty("track"),name:e.getProperty("shortLabel"),format:t,url:this.baseURL+e.getProperty("bigDataUrl"),displayMode:e.displayMode};if(t==="vcfTabix"&&(n.indexURL=n.url+".tbi"),e.hasProperty("longLabel")&&e.hasProperty("html")?(n.description&&(n.description+="<br/>"),n.description=`<a target="_blank" href="${this.baseURL+e.getProperty("html")}">${e.getProperty("longLabel")}</a>`):e.hasProperty("longLabel")&&(n.description=e.getProperty("longLabel")),e.hasProperty("autoScale")&&(n.autoscale=e.getProperty("autoScale").toLowerCase()==="on"),e.hasProperty("maxHeightPixels")){const r=e.getProperty("maxHeightPixels").split(":");n.maxHeight=Number.parseInt(r[0]),n.height=Number.parseInt(r[1]),n.minHeight=Number.parseInt(r[2])}if(e.hasProperty("color")){const r=e.getProperty("color");n.color=r.indexOf(",")>0?`rgb(${r})`:r}if(e.hasProperty("altColor")){const r=e.getProperty("altColor");n.altColor=r.indexOf(",")>0?`rgb(${r})`:r}if(e.hasProperty("viewLimits")){const r=e.getProperty("viewLimits").split(":");let s,a;r.length>1&&(s=Number.parseInt(r[0]),a=Number.parseInt(r[1])),Number.isNaN(a)||Number.isNaN(s)?console.warn(`Unexpected viewLimits value in track line: ${properties.viewLimits}`):(n.min=s,n.max=a)}if(e.hasProperty("itemRgb"),e.getProperty("visibility")==="hide"&&(n.visible=!1),e.hasProperty("url")&&(n.infoURL=e.getProperty("url")),e.hasProperty("searchIndex")&&(n.searchIndex=e.getProperty("searchIndex")),e.hasProperty("searchTrix")&&(n.searchTrix=this.baseURL+e.getProperty("searchTrix")),e.hasProperty("group")&&(n.group=e.getProperty("group"),this.groupPriorityMap&&this.groupPriorityMap.has(n.group))){const r=this.groupPriorityMap.get(n.group)+1;n.order=r,this.groupPriorityMap.set(n.group,r)}return n},ke(fn,"supportedTypes",new Set(["bigBed","bigWig","bigGenePred","vcfTabix"])),ke(fn,"filterTracks",new Set(["cytoBandIdeo","assembly","gap","gapOverlap","allGaps","cpgIslandExtUnmasked","windowMasker"]));let wn=fn;function E0(i){const e=i.indexOf(" ");return e>0?i.substring(0,e):i}class DA{constructor(e,t){ke(this,"properties",new Map);this.type=e,this.name=t}setProperty(e,t){this.properties.set(e,t)}getProperty(e){return this.properties.has(e)?this.properties.get(e):this.parent?this.parent.getProperty(e):void 0}hasProperty(e){return this.properties.has(e)?!0:this.parent?this.parent.hasProperty(e):!1}get format(){const e=this.getProperty("type");if(e)return E0(e)}get displayMode(){let e=this.getProperty("visibility");if(e)switch(e=e.toLowerCase(),e){case"dense":return"COLLAPSED";case"pack":return"EXPANDED";case"squish":return"SQUISHED";default:return"COLLAPSED"}else return"COLLAPSED"}}async function ou(i){const n=(await(await fetch(i)).text()).split(/\n|\r\n|\r/g),r=[];let s,a=!0;for(let o of n){const l=zA(o),c=o.indexOf(" ",l);if(c<0)a=!0;else{const h=o.substring(l,c).trim();if(h.startsWith("#"))continue;const f=o.substring(c+1).trim();if(a){const d=new DA(h,f);r.push(d),s=d,a=!1}s.setProperty(h,f)}}return LA(r)}function LA(i){const e=new Map;for(let t of i)e.set(t.name,t);for(let t of i)if(t.properties.has("parent")){const n=E0(t.properties.get("parent"));t.parent=e.get(n)}return i}function zA(i){let e=0;for(e=0;e<i.length;e++){const t=i.charAt(e);if(t!==" "&&t!=="	")break}return e}const HA="https://igv.org/genomes/genomes.json",yt={initializeGenomes:async function(i){if(!yt.KNOWN_GENOMES){let n=function(r){return r.forEach(function(s){e[s.id]=s}),e};const e={};if(i.loadDefaultGenomes!==!1){const r=HA,s=await Se.loadJson(r,{timeout:5e3});n(s)}const t=i.genomeList||i.genomes;if(t)if(typeof t=="string"){const r=await Se.loadJson(t,{});n(r)}else n(t);yt.KNOWN_GENOMES=e}},isWholeGenomeView:function(i){return i.toLowerCase()==="all"},expandReference:async function(i,e){if(ut(e)&&e.startsWith("{"))try{e=JSON.parse(e)}catch{}let t;if(ut(e)?t=e:e.genome?t=e.genome:e.id!==void 0&&!(e.fastaURL||e.twobitURL)&&(t=e.id),t){let r=yt.KNOWN_GENOMES[t];if(!r){if((t.startsWith("GCA_")||t.startsWith("GCF_"))&&t.length>=13)try{const s=k0(t);r=(await wn.loadHub(s)).getGenomeConfig()}catch(s){console.error(s)}r||i.present(new Error(`Unknown genome id: ${t}`),void 0)}return r}else return e}},PA="Error loading track data";let lu=0,cu=0,Gn,wi=[],Zr;class Sh extends NA{constructor(e,t,n,r){super(e,t,n,r)}initializationHelper(){this.$spinner=ve("<div>",{class:"igv-loading-spinner-container"}),this.$viewport.append(this.$spinner),this.$spinner.append(ve("<div>"));const e=this.trackView.track;e.type!=="sequence"&&(this.$zoomInNotice=this.createZoomInNotice(this.$viewport)),e.id!=="sequence"&&(this.$trackLabel=ve('<div class="igv-track-label">'),this.$viewport.append(this.$trackLabel),this.setTrackLabel(e.name||""),this.browser.doShowTrackLabels===!1&&this.$trackLabel.hide()),this.stopSpinner(),this.addMouseHandlers()}setContentHeight(e){super.setContentHeight(e),this.featureCache&&(this.featureCache.redraw=!0)}setTrackLabel(e){this.$trackLabel.empty(),this.$trackLabel.html(e);const t=this.$trackLabel.text();this.$trackLabel.attr("title",t)}startSpinner(){this.$spinner.show()}stopSpinner(){this.$spinner&&this.$spinner.hide()}checkZoomIn(){const e=()=>{if(this.referenceFrame.chr.toLowerCase()==="all"&&!this.trackView.track.supportsWholeGenome)return!0;{const t=this.trackView.track.visibilityWindow;return t!==void 0&&t>0&&this.referenceFrame.bpPerPixel*this.$viewport.width()>t}};if(this.trackView.track&&this.trackView.track.type==="sequence"&&this.referenceFrame.bpPerPixel>Eh)return ve(this.canvas).remove(),this.canvas=void 0,!1;if(!this.viewIsReady())return!1;if(e()){if(this.canvas&&(ve(this.canvas).remove(),this.canvas=void 0),this.trackView.track.autoHeight){const t=this.trackView.minHeight||0;this.setContentHeight(t)}return this.$zoomInNotice&&this.$zoomInNotice.show(),!1}else return this.$zoomInNotice&&this.$zoomInNotice.hide(),!0}shift(){const e=this.referenceFrame;this.canvas&&this.canvas._data&&this.canvas._data.referenceFrame.chr===this.referenceFrame.chr&&this.canvas._data.bpPerPixel===e.bpPerPixel&&(this.canvas._data.pixelShift=Math.round((this.canvas._data.bpStart-e.start)/e.bpPerPixel),this.canvas.style.left=this.canvas._data.pixelShift+"px")}genomicRange(){return{start:this.referenceFrame.start,end:this.referenceFrame.start+this.referenceFrame.bpPerPixel*this.$viewport.width()}}setTop(e){if(super.setTop(e),!this.canvas)this.repaint();else{const t=this.$viewport.height(),n=e+this.canvas._data.pixelTop,r=n+this.canvas._data.pixelHeight;(n>0||r<t)&&this.repaint()}if(this.canvas&&this.canvas._data){let t=e+this.canvas._data.pixelTop;this.canvas.style.top=`${t}px`}}async loadFeatures(){const e=this.referenceFrame,t=e.chr,n=await this.browser.genome.loadChromosome(t),r=n?n.bpLength:Number.MAX_SAFE_INTEGER,a=this.$viewport.width()*e.bpPerPixel,o=Math.floor(Math.max(0,e.start-a)),l=Math.ceil(Math.min(r,e.start+a+a));if(!(this.loading&&this.loading.start===o&&this.loading.end===l)){this.loading={start:o,end:l},this.startSpinner();try{const c=this.trackView.track,h=await this.getFeatures(c,t,o,l,e.bpPerPixel);if(h){let f=[];if(c.roiSets&&c.roiSets.length>0)for(let p of c.roiSets){const m=await p.getFeatures(t,o,l,e.bpPerPixel);f.push({track:p,features:m})}const d=c&&c.resolutionAware,u=this.windowFunction;return this.featureCache=new UA(t,o,l,e.bpPerPixel,h,f,d,u),this.loading=!1,this.hideMessage(),this.stopSpinner(),this.featureCache}}catch(c){this.trackView&&this.trackView.disposed!==!0&&(this.showMessage(PA),this.browser.alert.present(c),console.error(c))}finally{this.loading=!1,this.stopSpinner()}}}get track(){return this.trackView.track}get windowFunction(){return this.track?this.track.windowFunction:void 0}repaintDimensions(){const e=yt.isWholeGenomeView(this.referenceFrame.chr),t=e?this.$viewport.width():3*this.$viewport.width(),n=this.referenceFrame.bpPerPixel,r=this.referenceFrame.start-(e?0:this.$viewport.width()*n),s=e?Number.MAX_SAFE_INTEGER:this.referenceFrame.start+2*this.$viewport.width()*n+1;return{bpStart:r,bpEnd:s,pixelWidth:t}}repaint(){if(this.featureCache===void 0)return;const{features:e,roiFeatures:t}=this.featureCache,{bpStart:n,bpEnd:r,pixelWidth:s}=this.repaintDimensions(),a=this.$viewport.height(),o=this.getContentHeight(),l=t?Math.max(o,a):o,c=Math.min(l,3*a);if(s===0||c===0){this.canvas&&ve(this.canvas).remove();return}const h=Math.max(0,-this.contentTop-Math.floor(c/3)),f=this.referenceFrame.bpPerPixel,d=Math.round((n-this.referenceFrame.start)/f),u=(this.contentTop||0)+h,p=document.createElement("canvas");p.style.position="relative",p.style.display="block",p.style.width=s+"px",p.style.height=c+"px",p.style.left=d+"px",p.style.top=u+"px";const m=this.trackView.track.displayMode==="FILL"||this.trackView.track.supportHiDPI!==!1?window.devicePixelRatio:1;p.width=m*s,p.height=m*c;const F=p.getContext("2d");F.scale(m,m),F.translate(0,-h);const g={context:F,pixelXOffset:d,pixelWidth:s,pixelHeight:c,pixelTop:h,bpStart:n,bpEnd:r,bpPerPixel:f,pixelShift:d,windowFunction:this.windowFunction,referenceFrame:this.referenceFrame,selection:this.selection,viewport:this,viewportWidth:this.$viewport.width()};this.draw(g,e,t),this.canvas&&ve(this.canvas).remove(),p._data=g,this.canvas=p,this.$viewport.append(ve(p))}refresh(){if(!(this.canvas&&this.featureCache))return;const e=this.canvas._data;e.context.clearRect(0,0,this.canvas.width,this.canvas.height);const{features:t,roiFeatures:n}=this.featureCache;this.draw(e,t,n)}draw(e,t,n){if(t&&(e.features=t,this.trackView.track.draw(e)),n&&n.length>0)for(let r of n)e.features=r.features,r.track.draw(e)}containsPosition(e,t){return this.referenceFrame.chr===e&&t>=this.referenceFrame.start?t<=this.referenceFrame.calculateEnd(this.getWidth()):!1}isLoading(){return this.loading}savePNG(){if(!this.canvas)return;const e=this.canvas._data,t=e?e.pixelTop:0,n=window.devicePixelRatio,r=this.$viewport.width()*n,s=this.$viewport.height()*n,a=-ve(this.canvas).position().left*n,o=(-this.contentTop-t)*n,c=this.canvas.getContext("2d").getImageData(a,o,r,s),h=document.createElement("canvas"),f=h.getContext("2d");h.width=c.width,h.height=c.height,f.putImageData(c,0,0);const d=(this.$trackLabel.text()?this.$trackLabel.text():"image")+".png",u=h.toDataURL("image/png");Ya(d,u)}saveSVG(){let{width:n,height:r}=this.browser.columnContainer.getBoundingClientRect();const s=8e3,a={width:n,height:s,backdropColor:"white",multiLocusGap:0,viewbox:{x:0,y:0,width:n,height:s}},o=new mn(a),l={deltaX:32,deltaY:32};this.renderSVGContext(o,l,!1),o.setHeight(r);const c=(this.trackView.track.name||this.trackView.track.id).replace(/\W/g,""),h=this.browser.referenceFrameList.indexOf(this.referenceFrame),f=o.getSerializedSvg(!0),d=URL.createObjectURL(new Blob([f],{type:"application/octet-stream"})),u=`${c}_referenceFrame_${h}_guid_${Et()}`;Ya(`${u}.svg`,d)}renderSVGContext(e,{deltaX:t,deltaY:n},r=!0){if(!(this.$zoomInNotice&&this.$zoomInNotice.is(":visible"))){const{width:a,height:o}=this.$viewport.get(0).getBoundingClientRect(),l=(this.trackView.track.name||this.trackView.track.id).replace(/\W/g,""),c=this.browser.referenceFrameList.indexOf(this.referenceFrame),h=`${l}_referenceFrame_${c}_guid_${Et()}`,f=t,d=n+this.contentTop,u=-this.contentTop;e.saveWithTranslationAndClipRect(h,f,d,a,o,u);const{start:p,bpPerPixel:m}=this.referenceFrame,F=Math.round((p-this.referenceFrame.start)/m),g={context:e,viewport:this,referenceFrame:this.referenceFrame,top:u,pixelTop:u,pixelWidth:a,pixelHeight:o,pixelXOffset:F,pixelShift:F,bpStart:p,bpEnd:p+a*m,bpPerPixel:m,viewportWidth:a,selection:this.selection},w=this.featureCache?this.featureCache.features:void 0,b=this.featureCache?this.featureCache.roiFeatures:void 0;this.draw(g,w,b),e.restore()}if(r&&this.$trackLabel&&this.browser.doShowTrackLabels){const{x:a,y:o,width:l,height:c}=B1(this.$viewport.get(0),this.$trackLabel.get(0));this.renderTrackLabelSVG(e,t+a,n+o,l,c)}}renderTrackLabelSVG(e,t,n,r,s){const o=`${(this.trackView.track.name||this.trackView.track.id).replace(/\W/g,"")}_track_label_guid_${Et()}`;e.saveWithTranslationAndClipRect(o,t,n,r,s,0),e.fillStyle="white",e.fillRect(0,0,r,s),e.font="12px Arial",e.fillStyle="rgb(68, 68, 68)";const{width:l}=e.measureText(this.$trackLabel.text()),c=.25*(r-l),h=.7*(s-12);e.fillText(this.$trackLabel.text(),c,s-h),e.strokeStyle="rgb(68, 68, 68)",e.strokeRect(0,0,r,s),e.restore()}get cachedFeatures(){return this.featureCache?this.featureCache.features:[]}clearCache(){this.featureCache=void 0,this.canvas&&(this.canvas._data=void 0)}async getFeatures(e,t,n,r,s){if(this.featureCache&&this.featureCache.containsRange(t,n,r,s,this.windowFunction))return this.featureCache.features;if(typeof e.getFeatures=="function"){const a=await e.getFeatures(t,n,r,s,this);return this.checkContentHeight(a),a}else return}needsRepaint(){if(!this.canvas)return!0;const e=this.canvas._data;return!e||this.referenceFrame.start<e.bpStart||this.referenceFrame.end>e.bpEnd||this.referenceFrame.chr!==e.referenceFrame.chr||this.referenceFrame.bpPerPixel!=e.bpPerPixel||this.windowFunction!=e.windowFunction}needsReload(){if(!this.featureCache)return!0;const{chr:e,bpPerPixel:t}=this.referenceFrame,{bpStart:n,bpEnd:r}=this.repaintDimensions();return!this.featureCache.containsRange(e,n,r,t,this.windowFunction)}createZoomInNotice(e){const t=ve("<div>",{class:"igv-zoom-in-notice-container"});e.append(t);const n=ve("<div>");return t.append(n),n.text("Zoom in to see features"),t.hide(),t}viewIsReady(){return this.browser&&this.browser.referenceFrameList&&this.referenceFrame}addMouseHandlers(){const e=this.$viewport.get(0);this.addViewportContextMenuHandler(e);const t=r=>{this.enableClick=!0,this.browser.mouseDownOnViewport(r,this),bs(r)};e.addEventListener("mousedown",t),e.addEventListener("touchstart",t);const n=r=>{this.browser.dragObject||this.browser.isScrolling?(this.browser.cancelTrackPan(),this.enableClick=!1):(this.browser.cancelTrackPan(),this.browser.endTrackDrag())};e.addEventListener("mouseup",n),e.addEventListener("touchend",n),typeof this.trackView.track.hoverText=="function"&&e.addEventListener("mousemove",r=>{if(r.buttons===0&&Date.now()-cu>100){cu=Date.now();const s=this.createClickState(r);if(s){const a=this.trackView.track.hoverText(s);a?this.$viewport[0].setAttribute("title",a):this.$viewport[0].removeAttribute("title")}}}),this.addViewportClickHandler(this.$viewport.get(0)),this.trackView.track.name&&this.trackView.track.config.type!=="sequence"&&this.addTrackLabelClickHandler(this.$trackLabel.get(0))}addViewportContextMenuHandler(e){e.addEventListener("contextmenu",t=>{if(this.browser.dragObject)return!1;const n=this.createClickState(t);if(n===void 0)return!1;t.preventDefault();let r=[];if(typeof this.trackView.track.contextMenuItemList=="function"){const s=this.trackView.track.contextMenuItemList(n);s&&(r=s)}r.length>0&&r.push({label:ve("<HR>")}),r.push({label:"Save Image (PNG)",click:()=>this.savePNG()}),r.push({label:"Save Image (SVG)",click:()=>this.saveSVG()}),this.browser.menuPopup.presentTrackContextMenu(t,r)})}addViewportClickHandler(e){e.addEventListener("click",t=>{if(this.enableClick&&this.canvas){if(t.which===3||t.ctrlKey||this.browser.dragObject||this.browser.isScrolling)return;t.preventDefault();const n=xt(t,this.$viewport.get(0)).x,r=xt(t,this.canvas).x,s=this.referenceFrame;Math.floor(s.start+s.toBP(r));const a=Date.now();if(a-lu<this.browser.constants.doubleClickDelay){Gn&&(window.clearTimeout(Gn),Gn=void 0);const o=Math.round(s.start+s.toBP(n));let l;if(this.referenceFrame.chr.toLowerCase()==="all"){const c=this.browser.genome.getChromosomeCoordinate(o).chr;if(this.browser.referenceFrameList.length===1)l=c;else{const h=this.browser.referenceFrameList.map(({locusSearchString:d})=>d),f=this.browser.referenceFrameList.indexOf(this.referenceFrame);h[f]=c,l=h.join(" ")}this.browser.search(l)}else this.browser.zoomWithScaleFactor(.5,o,this.referenceFrame)}else typeof this.trackView.track.popupData=="function"&&(Gn=setTimeout(()=>{const o=this.getPopupContent(t);if(o)if(t.shiftKey===!1){if(Zr&&Zr.dispose(),wi.length>0){for(const l of wi)l.dispose();wi.length=0}Zr=new fl(this.$viewport.get(0).parentElement,!0,void 0,()=>{Zr.dispose()}),Zr.presentContentWithEvent(t,o)}else{let l=new fl(this.$viewport.get(0).parentElement,!0,void 0,()=>{const c=wi.indexOf(l);wi.splice(c,1),l.dispose()});wi.push(l),l.presentContentWithEvent(t,o)}window.clearTimeout(Gn),Gn=void 0},this.browser.constants.doubleClickDelay));lu=a}})}addTrackLabelClickHandler(e){e.addEventListener("click",t=>{t.stopPropagation();const{track:n}=this.trackView;let r;typeof n.description=="function"?r=n.description():n.description&&(r=`<div>${n.description}</div>`),r&&(this.popover===void 0&&(this.popover=new fl(this.browser.columnContainer,!0,n.name||"",void 0)),this.popover.presentContentWithEvent(t,r))})}createClickState(e){if(!this.canvas)return;const t=this.referenceFrame,n=xt(e,this.$viewport.get(0)),r=xt(e,this.canvas),s=t.start+t.toBP(n.x);return{event:e,viewport:this,referenceFrame:t,genomicLocation:s,y:n.y-this.contentTop,canvasX:r.x,canvasY:r.y}}getPopupContent(e){const t=this.createClickState(e);if(t===void 0)return;let n=this.trackView.track;const r=n.popupData(t),s=this.browser.fireEvent("trackclick",[n,r]);let a;return s===void 0||s===!0?r&&r.length>0&&(a=OA(r)):typeof s=="string"&&(a=s),a}dispose(){this.popover&&this.popover.dispose(),super.dispose()}}function OA(i){return i.map(t=>{if(t.name){const n=`<span>${t.name}</span>&nbsp&nbsp&nbsp${t.value}`;return`<div title="${t.value}">${n}</div>`}else return t==="<hr>"?t:t.html?t.html:`<div title="${t}">${t}</div>`}).join("")}class UA{constructor(e,t,n,r,s,a,o,l){this.chr=e,this.bpStart=t,this.bpEnd=n,this.bpPerPixel=r,this.features=s,this.roiFeatures=a,this.multiresolution=o,this.windowFunction=l}containsRange(e,t,n,r,s){if(s&&s!==this.windowFunction)return!1;const a=this.multiresolution?this.bpPerPixel/r:1;return t>=this.bpStart&&n<=this.bpEnd&&e===this.chr&&a>.5&&a<2}overlapsRange(e,t,n){return this.chr===e&&n>=this.bpStart&&t<=this.bpEnd}}const qA="nickel",VA=2/16,Nh=V4(qA,VA),QA="rgb(190,190,190)",GA="rgba(155,185,129)",S0=Nh;class hu{constructor(e,t){if(this.url=e.url,e.name&&(this.name=e.name),this.isUserDefined=e.isUserDefined,e.featureSource)this.featureSource=e.featureSource;else if(e.features)this.featureSource=new $A(e.features,t);else if(e.format)this.featureSource=Wt(e,t);else throw Error("ROI configuration must define either features or file format");this.isUserDefined===!0?(this.color=e.color||S0,this.headerColor=GA):(this.color=e.color||Nh,this.headerColor=QA),this.isVisible=e.isVisible===void 0?!0:e.isVisible}async getFeatures(e,t,n){return this.featureSource.getFeatures({chr:e,start:t,end:n})}async getAllFeatures(){return typeof this.featureSource.getAllFeatures=="function"?await this.featureSource.getAllFeatures():{}}addFeature(e){this.featureSource.addFeature(e)}removeFeature(e){this.featureSource.removeFeature(e)}toJSON(){if(this.url)return{name:this.name,color:this.color,url:this.url,isUserDefined:this.isUserDefined,isVisible:this.isVisible};{const e=this.featureSource.getAllFeatures(),t=[];for(let n of Object.keys(e))for(let r of e[n])t.push(r);return{name:this.name,color:this.color,features:t,isUserDefined:this.isUserDefined,isVisible:this.isVisible}}}dispose(){for(let e of Object.keys(this))this[e]=void 0}}const fu=3;function N0(i,e,t,n){let r=Math.round((i-t)/n),a=Math.round((e-t)/n)-r;return a<fu&&(a=fu,r-=1),{x:r,width:a}}class $A{constructor(e,t){this.featureMap={},this.genome=t;for(let n of e){const r=t?t.getChromosomeName(n.chr):n.chr;let s=this.featureMap[r];s||(s=[],this.featureMap[r]=s),s.push(n)}for(let n of Object.keys(this.featureMap))this.featureMap[n].sort((r,s)=>r.start-s.start)}async getFeatures({chr:e,start:t,end:n}){if(e.toLowerCase()==="all")return lo(this.featureMap,this.genome);{const r=this.featureMap[e];return r?r.filter(s=>s.end>t&&s.start<n):[]}}getAllFeatures(){return this.featureMap}supportsWholeGenome(){return!0}addFeature(e){let t=this.featureMap[e.chr];t||(t=[],this.featureMap[e.chr]=t),t.push(e),t.sort((n,r)=>n.start-r.start)}removeFeature({chr:e,start:t,end:n}){if(this.featureMap[e]){const r=`${e}-${t}-${n}`;this.featureMap[e]=this.featureMap[e].filter(s=>r!==`${s.chr}-${s.start}-${s.end}`),this.featureMap[e].length===0&&delete this.featureMap[e]}}}const jA="rgba(68, 134, 247, 0.25)";class WA{constructor(e,t,n,r){this.rulerViewport=e,this.rulerSweeper=Fe({class:"igv-ruler-sweeper"}),t.appendChild(this.rulerSweeper),this.browser=n,this.referenceFrame=r,this.isMouseHandlers=void 0,this.addBrowserObserver()}addBrowserObserver(){const e=()=>{this.referenceFrame&&(yt.isWholeGenomeView(this.referenceFrame.chr)?this.removeMouseHandlers():this.addMouseHandlers())};this.boundObserverHandler=e.bind(this),this.browser.on("locuschange",this.boundObserverHandler)}removeBrowserObserver(){this.browser.off("locuschange",this.boundObserverHandler)}addMouseHandlers(){if(this.isMouseHandlers===!0)return;const e=1;let t,n,r,s,a,o;this.boundContentMouseDownHandler=l.bind(this),this.rulerViewport.contentDiv.addEventListener("mousedown",this.boundContentMouseDownHandler);function l(f){t=!0,n=!0;const{x:d}=xt(f,this.rulerViewport.contentDiv);s=r=d,a=e,this.rulerSweeper.style.display="block",this.rulerSweeper.style.backgroundColor=f.shiftKey===!0?S0:jA,this.rulerSweeper.style.left=`${s}px`,this.rulerSweeper.style.width=`${a}px`}this.boundDocumentMouseMoveHandler=c.bind(this),document.addEventListener("mousemove",this.boundDocumentMouseMoveHandler);function c(f){let d;if(t&&n){const{x:u}=xt(f,this.rulerViewport.contentDiv);d=Math.max(Math.min(u,this.rulerViewport.contentDiv.clientWidth),0),o=d-r,a=Math.abs(o),this.rulerSweeper.style.width=`${a}px`,o<0&&(s=r+o,this.rulerSweeper.style.left=`${s}px`)}}this.boundDocumentMouseUpHandler=h.bind(this),document.addEventListener("mouseup",this.boundDocumentMouseUpHandler);function h(f){let d;t===!0&&n===!0&&(t=n=void 0,this.rulerSweeper.style.display="none",a>e&&(d={start:Math.floor(this.referenceFrame.calculateEnd(s)),end:Math.floor(this.referenceFrame.calculateEnd(s+a))},f.shiftKey===!0?this.browser.roiManager.updateUserDefinedROISet(Object.assign({chr:this.referenceFrame.chr},d)):(Hg(this.browser.genome.getChromosome(this.referenceFrame.chr).bpLength,d,this.browser.minimumBases()),KA(this.referenceFrame,d,this.rulerViewport.contentDiv.clientWidth),this.browser.updateViews(this.referenceFrame))))}this.isMouseHandlers=!0}removeMouseHandlers(){this.rulerViewport.contentDiv.removeEventListener("mousedown",this.boundContentMouseDownHandler),document.removeEventListener("mousemove",this.boundDocumentMouseMoveHandler),document.removeEventListener("mouseup",this.boundDocumentMouseUpHandler),this.isMouseHandlers=!1}dispose(){this.removeBrowserObserver(),this.removeMouseHandlers(),this.rulerSweeper.remove()}}function KA(i,e,t){i.start=Math.round(e.start),i.end=Math.round(e.end),i.bpPerPixel=(i.end-i.start)/t}function vr(i){if($n[i])return $n[i];if($n["chr"+i]){const e=$n["chr"+i];return $n[i]=e,e}else{const e=qe.randomRGB(0,255);return $n[i]=e,e}}const $n={chrX:"rgb(204, 153, 0)",chrY:"rgb(153, 204, 0)",chrUn:"rgb(50, 50, 50)",chr1:"rgb(80, 80, 255)",chrI:"rgb(139, 155, 187)",chr2:"rgb(206, 61, 50)",chrII:"rgb(206, 61, 50)",chr2a:"rgb(216, 71, 60)",chr2b:"rgb(226, 81, 70)",chr3:"rgb(116, 155, 88)",chrIII:"rgb(116, 155, 88)",chr4:"rgb(240, 230, 133)",chrIV:"rgb(240, 230, 133)",chr5:"rgb(70, 105, 131)",chr6:"rgb(186, 99, 56)",chr7:"rgb(93, 177, 221)",chr8:"rgb(128, 34, 104)",chr9:"rgb(107, 215, 107)",chr10:"rgb(213, 149, 167)",chr11:"rgb(146, 72, 34)",chr12:"rgb(131, 123, 141)",chr13:"rgb(199, 81, 39)",chr14:"rgb(213, 143, 92)",chr15:"rgb(122, 101, 165)",chr16:"rgb(228, 175, 105)",chr17:"rgb(59, 27, 83)",chr18:"rgb(205, 222, 183)",chr19:"rgb(97, 42, 121)",chr20:"rgb(174, 31, 99)",chr21:"rgb(231, 199, 111)",chr22:"rgb(90, 101, 94)",chr23:"rgb(204, 153, 0)",chr24:"rgb(153, 204, 0)",chr25:"rgb(51, 204, 0)",chr26:"rgb(0, 204, 51)",chr27:"rgb(0, 204, 153)",chr28:"rgb(0, 153, 204)",chr29:"rgb(10, 71, 255)",chr30:"rgb(71, 117, 255)",chr31:"rgb(255, 194, 10)",chr32:"rgb(255, 209, 71)",chr33:"rgb(153, 0, 51)",chr34:"rgb(153, 26, 0)",chr35:"rgb(153, 102, 0)",chr36:"rgb(128, 153, 0)",chr37:"rgb(51, 153, 0)",chr38:"rgb(0, 153, 26)",chr39:"rgb(0, 153, 102)",chr40:"rgb(0, 128, 153)",chr41:"rgb(0, 51, 153)",chr42:"rgb(26, 0, 153)",chr43:"rgb(102, 0, 153)",chr44:"rgb(153, 0, 128)",chr45:"rgb(214, 0, 71)",chr46:"rgb(255, 20, 99)",chr47:"rgb(0, 214, 143)",chr48:"rgb(20, 255, 177)"};let du,jn;const YA=1e4;class ZA extends Sh{constructor(e,t,n,r){super(e,t,n,r)}get contentDiv(){return this.$viewport.get(0)}initializationHelper(){this.$multiLocusCloseButton=ve("<div>",{class:"igv-multi-locus-close-button"}),this.$viewport.append(this.$multiLocusCloseButton),this.$multiLocusCloseButton.get(0).appendChild(Pi("times-circle")),this.$multiLocusCloseButton.click(()=>{this.browser.removeMultiLocusPanel(this.referenceFrame)}),this.$rulerLabel=ve("<div>",{class:"igv-multi-locus-ruler-label"}),this.$viewport.append(this.$rulerLabel);let e;e=document.createElement("div"),this.$rulerLabel.append(ve(e)),this.$rulerLabel.get(0).addEventListener("click",async t=>{t.stopPropagation(),await this.browser.gotoMultilocusPanel(this.referenceFrame)}),this.$tooltip=ve("<div>",{class:"igv-ruler-tooltip"}),this.$tooltip.height(this.$viewport.height()),this.$viewport.append(this.$tooltip),this.$tooltipContent=ve("<div>"),this.$tooltip.append(this.$tooltipContent),this.rulerSweeper=new WA(this,this.$viewport.get(0).parentElement,this.browser,this.referenceFrame),this.attachMouseHandlers(yt.isWholeGenomeView(this.referenceFrame.chr)),this.$tooltip.hide(),this.dismissLocusLabel()}presentLocusLabel(e){this.$multiLocusCloseButton.show(),this.$rulerLabel.show(),this.$rulerLabel.get(0).style.backgroundColor=vr(this.referenceFrame.chr);const t=this.$rulerLabel.get(0).querySelector("div"),{width:n}=this.$rulerLabel.get(0).getBoundingClientRect();t.innerHTML=`${this.referenceFrame.getMultiLocusLabel(e)}`;const{width:r}=t.getBoundingClientRect();r/n>.5&&(t.innerHTML=`${this.referenceFrame.getMultiLocusLabelBPLengthOnly(e)}`)}dismissLocusLabel(){this.$rulerLabel.hide(),this.$multiLocusCloseButton.hide()}attachMouseHandlers(e){if(this.namespace=`.ruler_track_viewport_${this.browser.referenceFrameList.indexOf(this.referenceFrame)}`,this.$viewport.off(this.namespace),e===!0){const t=this.browser.referenceFrameList.indexOf(this.referenceFrame),n=`click${this.namespace}`;this.$viewport.on(n,r=>{const{x:s}=xt(r,this.$viewport.get(0)),a=Math.round(this.referenceFrame.start+this.referenceFrame.toBP(s));let o;const{chr:l}=this.browser.genome.getChromosomeCoordinate(a);if(this.browser.referenceFrameList.length===1)o=l;else{let c=this.browser.referenceFrameList.map(({locusSearchString:h})=>h);c[t]=l,o=c.join(" ")}this.browser.search(o)}),this.$viewport.get(0).style.cursor="pointer"}else this.$viewport.get(0).style.cursor="default"}mouseMove(e){if(this.browser.doShowCursorGuide===!0){if(jn===void 0?(jn=this,this.$tooltip.show()):jn.guid!==this.guid?(jn.$tooltip&&jn.$tooltip.hide(),this.$tooltip.show(),jn=this):this.$tooltip.show(),this.browser.isMultiLocusWholeGenomeView()||yt.isWholeGenomeView(this.referenceFrame.chr)){this.$tooltip.hide();return}const{x:n}=xt(e,this.$viewport.get(0)),{start:r,end:s,bpPerPixel:a}=this.referenceFrame,o=Math.round(.5+r+Math.max(0,n)*a);this.$tooltipContent.text(He(o));const{width:l}=this.$tooltipContent.get(0).getBoundingClientRect(),{width:c}=this.$viewport.get(0).getBoundingClientRect();return this.$tooltip.css({left:`${Ze.clamp(n,0,c-l)}px`}),clearTimeout(du),du=setTimeout(()=>{this.$tooltip&&this.$tooltip.hide()},YA),{start:r,bp:o,end:s}}}startSpinner(){}stopSpinner(){}dispose(){this.rulerSweeper.dispose(),super.dispose()}}class XA extends Sh{constructor(t,n,r,s){super(t,n,r,s);ke(this,"featureCache",new JA)}initializationHelper(){this.canvas=document.createElement("canvas"),this.canvas.className="igv-ideogram-canvas",this.$viewport.append(ve(this.canvas)),this.ideogram_ctx=this.canvas.getContext("2d"),this.addMouseHandlers()}async getFeatures(t,n,r,s){return this.featureCache.containsRange(t)?this.featureCache.get(t):this.loadFeatures()}async loadFeatures(){const t=this.referenceFrame.chr,n=await this.referenceFrame.genome.getCytobands(t);return this.featureCache.set(t,n),n}repaint(){if(this.featureCache===void 0)return;const{width:t,height:n}=this.$viewport[0].getBoundingClientRect();de.configureHighDPICanvas(this.ideogram_ctx,t,n);const r=this.referenceFrame.chr,s=this.featureCache.get(r),a={context:this.ideogram_ctx,pixelWidth:t,pixelHeight:n,referenceFrame:this.referenceFrame,features:s};this.trackView.track.draw(a)}addMouseHandlers(){this.addViewportClickHandler(this.$viewport.get(0))}addViewportClickHandler(t){this.boundClickHandler=n.bind(this),t.addEventListener("click",this.boundClickHandler);function n(r){const{xNormalized:s,width:a}=xt(r,this.ideogram_ctx.canvas),{bpLength:o}=this.browser.genome.getChromosome(this.referenceFrame.chr),c=this.referenceFrame.bpPerPixel*a/o;let h=s;h-c/2<0&&(h=c/2),h+c/2>1&&(h=1-c/2);const f=Math.round((h-c/2)*o),d=Math.round((h+c/2)*o);this.referenceFrame.start=f,this.referenceFrame.end=d,this.referenceFrame.bpPerPixel=(d-f)/a,this.browser.updateViews(this.referenceFrame,this.browser.trackViews,!0)}}setWidth(t){this.$viewport.width(t)}renderSVGContext(t,{deltaX:n,deltaY:r},s=!0){const{width:a,height:o}=this.$viewport.get(0).getBoundingClientRect(),l="ideogram",c=this.browser.referenceFrameList.indexOf(this.referenceFrame),h=`${l}_referenceFrame_${c}_guid_${Et()}`,f=n,d=r+this.contentTop,u=-this.contentTop;t.saveWithTranslationAndClipRect(h,f,d,a,o,u),this.trackView.track.draw({context:t,pixelWidth:a,pixelHeight:o,referenceFrame:this.referenceFrame,features:this.featureCache.get(this.referenceFrame.chr)}),t.restore()}startSpinner(){}stopSpinner(){}}class JA{constructor(){ke(this,"features",new Map)}containsRange(e){return this.features.has(e)}set(e,t){this.features.set(e,t)}get(e){return this.features.get(e)}}function Nc(i,e,t,n){if(i.track.type==="ruler")return new ZA(i,e,t,n);if(i.track.id==="ideogram")return new XA(i,e,t,n);{const r=new Sh(i,e,t,n);return t.viewport=r,r}}const ev=["rgb(255, 0, 0)","rgb(0, 255, 0)","rgb(0, 0, 255)","rgb(255, 0, 255)","rgb(0, 255, 255)","rgb(128, 0, 128)","rgb(255, 165, 0)","rgb(255, 105, 180)","rgb(255, 127, 80)","rgb(220, 20, 60)","rgb(255, 99, 71)","rgb(173, 216, 230)","rgb(144, 238, 144)","rgb(224, 255, 255)","rgb(250, 250, 210)","rgb(152, 251, 152)","rgb(70, 130, 180)","rgb(102, 205, 170)"],tv=ev.map(i=>{const[e,t,n]=i.split(","),[r,s]=e.split("("),[a,o]=n.split(")");return[s,t,a]}),uu=Lt("magnesium"),pu=["#sampleTable","#sampleMapping","#colors"];var Ii,B0,T0,M0,R0;const ws=class ws{constructor(e){ct(this,Ii);ke(this,"sampleDictionary",{});ke(this,"attributeNames",[]);ke(this,"sampleMappingDictionary",{});ke(this,"colorDictionary",{});ke(this,"attributeRangeLUT",{});e.tracks.some(n=>typeof n.getSamples=="function").length>0&&e.sampleInfoControl.setButtonVisibility(!0),this.initialize()}initialize(){this.sampleInfoFiles=[],this.attributeNames=[],this.sampleDictionary={},this.sampleMappingDictionary={},this.colorDictionary={},this.attributeRangeLUT={},this.initialized=!1}get attributeCount(){return this.attributeNames?this.attributeNames.length:0}isInitialized(){return this.initialized}hasAttributes(){return this.attributeCount>0}getAttributes(e){const t=Object.keys(this.sampleMappingDictionary)===0?e:this.sampleMappingDictionary[e]||e;return this.sampleDictionary[t]}async loadSampleInfoFile(e){try{const t=await Se.loadString(e);Ke(this,Ii,B0).call(this,t),this.sampleInfoFiles.push(e)}catch(t){console.error(t.message)}}getAttributeColor(e,t){let n;if(t==="-")n=Lt("snow");else if(typeof t=="string"&&this.colorDictionary[t])n=this.colorDictionary[t]();else if(this.colorDictionary[e])n=this.colorDictionary[e](t);else if(typeof t=="string")n=t==="NA"?uu:sv(t);else{const[r,s]=this.attributeRangeLUT[e],o=Math.max((t-r)/(s-r),.2),[l,c,h]=tv[Object.keys(this.attributeRangeLUT).indexOf(e)];n=`rgba(${l},${c},${h},${o})`}return n}getSortedSampleKeysByAttribute(e,t,n){n=n||1;const r=e.filter(o=>typeof this.getAttributes(o)[t]=="number"),s=e.filter(o=>typeof this.getAttributes(o)[t]=="string"),a=(o,l)=>{const c=this.getAttributes(o)[t],h=this.getAttributes(l)[t];if(typeof c=="string"&&typeof h=="string")return n*c.localeCompare(h);if(typeof c=="number"&&typeof h=="number")return n*(c-h)};return r.sort(a),s.sort(a),n===-1?[...r,...s]:[...s,...r]}toJSON(){const e=[];for(const t of this.sampleInfoFiles){const n={url:t},r=mt.localFileInspection(n);e.push(r)}return e}};Ii=new WeakSet,B0=function(e){const t=iv(e);for(const[n,r]of Object.entries(t))switch(n){case"#sampleTable":Ke(this,Ii,T0).call(this,r);break;case"#sampleMapping":Ke(this,Ii,M0).call(this,r);break;case"#colors":Ke(this,Ii,R0).call(this,r);break}this.initialized=!0},T0=function(e){const t=e.shift().split("	").filter(l=>l.length>0);t.shift();const n=t.map(l=>l.split(" ").join(ws.emptySpaceReplacement)),r=e.filter(l=>l.length>0);let s;for(const l of r){const c=l.split("	"),h=c.shift();s===void 0&&(s={}),s[h]={};for(let f=0;f<c.length;f++){const d={};c[f]===""?d[n[f]]="-":d[n[f]]=c[f],Object.assign(s[h],d)}}for(const[l,c]of Object.entries(s))s[l]=rv(c);const a=nv(n,s);gu(this.attributeRangeLUT,a);const o=new Set(this.attributeNames);for(const l of n)o.has(l)||this.attributeNames.push(l);gu(this.sampleDictionary,s)},M0=function(e){for(const t of e){const[n,r]=t.split("	");this.sampleMappingDictionary[n]=r}},R0=function(e){const t=(l,c,h)=>{let f;switch(c){case 0:f=l.split(" ").join(ws.emptySpaceReplacement);break;case 1:f=l.includes(":")?l.split(":").map(d=>parseFloat(d)):l;break;case 2:f=`rgb(${l})`;break;case 3:f=`rgb(${l})`}return f},n=e.map(l=>l.split("	").map(t)),r=n.filter(l=>l.length===3&&!l.includes("*")).filter(([l,c,h])=>!Array.isArray(c)),s={};for(const l of r){const[c,h,f]=l;s[c]===void 0&&(s[c]={}),s[c][h.toUpperCase()]=f}for(const[l,c]of Object.entries(s)){const h=Object.assign({},c);this.colorDictionary[l]=f=>{const d=f.toUpperCase();return h[d]||Lt("snow")}}const a=n.filter(l=>Array.isArray(l[1]));for(const l of a){const[c,h]=l[1],f=l[0];if(l.length===3){const[d,u,p]=ir(l[2]);this.colorDictionary[f]=m=>{m=Ze.clamp(m,c,h);const F=(m-c)/(h-c);return md(d,u,p,F)}}else if(l.length===4){const[d,u]=l[1],[p,m,F,g]=l;this.colorDictionary[p]=w=>{w=Ze.clamp(w,d,u);const b=(w-d)/(u-d);return $4(F,g,b)}}}const o=n.filter(l=>l.length===3&&l.includes("*"));for(const l of o)if(l[1]==="*"){const[c,h,f]=l;this.colorDictionary[c]=d=>{if(d==="NA")return uu;{const[u,p]=this.attributeRangeLUT[c],m=(d-u)/(p-u),[F,g,w]=ir(f);return md(F,g,w,m)}}}else if(l[0]==="*"){const[c,h,f]=l;this.colorDictionary[h]=()=>f}},ke(ws,"emptySpaceReplacement","|");let _r=ws;function iv(i){const e={},t=i.split(/\r?\n|\r/).map(r=>r.trim()).filter(r=>r!=="");let n;pu.includes(t[0])||(n="#sampleTable",e[n]=[]);for(const r of t)pu.includes(r)?(n=r,e[n]=[]):n&&r.startsWith("#")===!1&&e[n].push(r);return e}function gu(i,e){for(const[t,n]of Object.entries(e))(!(t in i)||i[t]!==n)&&(i[t]=n)}function nv(i,e){const t={};for(const s of Object.values(e))for(const a of i){let o=s[a];t[a]===void 0&&(t[a]=[]),t[a].push(o)}const n=s=>typeof s=="number",r=s=>typeof s=="string";for(const s of Object.keys(t)){const a=t[s],o=new Set(a),l=Array.from(o);if(l.some(r)===!0&&l.some(n)===!0?t[s]=l.filter(c=>!r(c)):t[s]=l,!t[s].some(r)){const c=t[s].slice();t[s]=[Math.min(...c),Math.max(...c)]}}return t}function rv(i){const e=Object.assign({},i);for(const[t,n]of Object.entries(e))typeof n=="string"&&!isNaN(n)&&(e[t]=Number(n));return e}function sv(i){let e=0;for(let n=0;n<i.length;n++)e=i.charCodeAt(n)+((e<<5)-e);let t=[];for(let n=0;n<3;n++){const r=e>>n*8&255;t.push(r)}return`rgb(${t.join(", ")})`}const Bc=8,tr=16,mu=He,D0=40;class av{constructor(e){this.browser=e,this.height=D0,this.name="",this.id="ruler",this.disableButtons=!0,this.ignoreTrackMenu=!0,this.order=Number.MIN_SAFE_INTEGER*.01,this.removable=!1,this.type="ruler"}async getFeatures(e,t,n){return[]}computePixelHeight(e){return this.height}draw({context:e,referenceFrame:t,pixelWidth:n,pixelHeight:r,bpPerPixel:s,bpStart:a}){yt.isWholeGenomeView(t.chr)?this.drawWholeGenome({context:e,pixelWidth:n,pixelHeight:r,bpPerPixel:s}):this.doDraw({context:e,referenceFrame:t,pixelWidth:n,pixelHeight:r,bpStart:a})}drawWholeGenome({context:e,pixelWidth:t,pixelHeight:n,bpPerPixel:r}){e.save(),de.fillRect(e,0,0,t,n,{fillStyle:"white"});for(let s of this.browser.genome.wgChromosomeNames){let a=this.browser.genome.getCumulativeOffset(s),o=this.browser.genome.getChromosome(s).bpLength,l=Math.round(a/r),c=Math.round(o/r);this.renderChromosomeRect(e,l,0,c,n,s)}e.restore()}doDraw({context:e,referenceFrame:t,pixelWidth:n,pixelHeight:r,bpStart:s}){e.clearRect(0,0,n,r);const a=6,o=2,l=Math.floor(t.toBP(n)),c=ov(l,e.isSVG);let h=Math.floor(s/c.majorTick)-1;const{tickDelta:f,labelLength:d}=lv(e,t,s,h,c);this.browser.referenceFrameList.indexOf(t);let u,p,m=f;const F=.25*d;do{p=Math.floor(h*c.majorTick);const g=`${He(Math.floor(p/c.unitMultiplier))} ${c.majorUnit}`;u=Math.round(t.toPixels(p-1-s+.5));const w=Math.round(u-e.measureText(g).width/2);w>0&&F+d<=m&&(de.fillText(e,g,w,this.height-a/.75),m=0),u>0&&de.strokeLine(e,u,this.height-a,u,this.height-o),p=Math.floor((1+h)*c.majorTick);let y=(Math.round(t.toPixels(p-1-s+.5))-u)/2,v=u+y;v>0&&de.strokeLine(e,v,this.height-a,v,this.height-o),++h,m+=f}while(u<n);de.strokeLine(e,0,this.height-o,n,this.height-o)}renderChromosomeRect(e,t,n,r,s,a){e.textAlign="center",e.textBaseline="middle",e.font="12px sans-serif",de.strokeLine(e,t+r,n,t+r,n+s,{strokeStyle:qe.greyScale(191)}),a=this.browser.genome.getChromosomeDisplayName(a);const o=a.startsWith("chr")?a.substring(3):a;r>e.measureText(o).width&&de.fillText(e,o,t+r/2,n+s/2,{fillStyle:qe.greyScale(68)})}get supportsWholeGenome(){return!0}dispose(){}}function ov(i,e){if(i<10)return new wu(1,"bp",1);const t=Math.floor(Math.log10(i));let n="bp",r=1;t>9?(n="gb",r=1e9):t>6?(n="mb",r=1e6):t>3&&(n="kb",r=1e3);const s=Math.pow(10,t-1),a=i/s,o=3*25,l=Math.pow(10,t-1),c=Math.pow(10,t)/2,h=a<o&&e!==!0?l:c;return new wu(h,n,r)}function lv(i,e,t,n,r){const s=c(e,l(1+n,r),t)-c(e,l(n,r),t),a=`${He(Math.floor(l(n,r)/r.unitMultiplier))} ${r.majorUnit}`,o=Math.floor(i.measureText(a).width);return{tickDelta:s,labelLength:o};function l(h,f){return Math.floor(h*f.majorTick)}function c(h,f,d){return Math.round(h.toPixels(f-1-d+.5))}}class wu{constructor(e,t,n){this.majorTick=e,this.minorTick=e/10,this.majorUnit=t,this.unitMultiplier=n}description(e){console.log((e||"")+" tick "+mu(this.majorTick)+" label width "+mu(this.labelWidthBP)+" multiplier "+this.unitMultiplier)}}const cv=128;class hv{constructor(e,t,n){this.guid=Et(),this.trackView=e,this.browser=e.browser,this.viewport=Fe({class:"igv-viewport"}),t.appendChild(this.viewport),this.viewport.style.height=`${e.track.height}px`,this.viewport.previousElementSibling===null&&(this.viewport.style.zIndex=16,this.viewport.style.overflow="visible"),this.canvas=document.createElement("canvas"),this.viewport.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.font="10px verdana",this.contentTop=0,this.hitList=void 0,this.sortDirection=1,this.setWidth(n),this.addMouseHandlers()}resizeCanvas(){const e=window.devicePixelRatio,t=this.browser.getSampleInfoViewportWidth();let n;if(this.browser.trackViews.length>1&&this.viewport.previousElementSibling===null){const[r,s]=[this.browser.ideogramTrackView.track,this.browser.rulerTrackView.track];n=r.height+s.height}else n=this.viewport.clientHeight;if(this.canvas.width!==t*e||this.canvas.height!==n*e){const r=this.canvas;r.width=t*e,r.height=n*e,r.style.width=`${t}px`,r.style.height=`${n}px`,this.ctx=this.canvas.getContext("2d"),this.ctx.scale(e,e),this.viewport.previousElementSibling===null&&de.fillRect(this.ctx,0,0,this.ctx.canvas.width,this.ctx.canvas.height,{fillStyle:Lt("snow")})}}setTop(e){typeof this.trackView.track.getSamples=="function"&&(this.contentTop=e,this.repaint())}setWidth(e){this.viewport.innerWidth=e,this.resizeCanvas()}setHeight(e){const t=this.browser.getSampleInfoViewportWidth();this.viewport.style.width=`${t}px`,this.viewport.style.height=`${e}px`;const n=window.devicePixelRatio;this.canvas.width=t*n,this.canvas.height=e*n,this.canvas.style.width=`${t}px`,this.canvas.style.height=`${e}px`,this.ctx=this.canvas.getContext("2d"),this.ctx.scale(n,n),this.viewport.previousElementSibling===null&&de.fillRect(this.ctx,0,0,this.ctx.canvas.width,this.ctx.canvas.height,{fillStyle:Lt("snow")})}async repaint(){if(this.resizeCanvas(),typeof this.trackView.track.getSamples=="function"){const e=this.trackView.track.getSamples();e.names&&e.names.length>0&&this.draw({context:this.ctx,samples:e})}else this.viewport.previousElementSibling===null&&(this.browser.rulerTrackView&&this.browser.rulerTrackView.setTrackHeight(this.browser.sampleInfoControl.showSampleInfo===!0?this.calculateSampleInfoColumnHeight():D0,!0),this.renderSampleInfoColumns(this.ctx))}calculateSampleInfoColumnHeight(){const e=this.browser.sampleInfo.attributeNames.map(n=>this.ctx.measureText(n).width);return 4+Math.min(Math.max(...e),cv)}draw({context:e,samples:t}){if(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillStyle=Lt("snow"),e.fillRect(0,0,e.canvas.width,e.canvas.height),t&&t.names.length>0){const n=this.browser.sampleInfo.attributeNames,r=this.viewport.getBoundingClientRect().height;let s=1;const a=t.height;s=a-2*s<=1?0:1;let o=this.contentTop+t.yOffset;this.hitList={};for(const l of t.names){if(o>r)break;if(o+a>0){const c=this.browser.sampleInfo.getAttributes(l);if(c){const h=Object.entries(c);for(const f of h){const[d,u]=f;e.fillStyle=this.browser.sampleInfo.getAttributeColor(d,u);const p=n.indexOf(d),m=Bc+p*tr,F=o+s,g=a-2*s;e.fillRect(m,F,tr-1,g);const w=`${Math.floor(m)}#${Math.floor(F)}#${tr}#${Math.ceil(g)}`;this.hitList[w]=`${d}#${u}`}}}o+=a}}}renderSampleInfoColumns(e){const t=(r,s,a,o,l,c)=>{r.save(),r.font="10px verdana",r.translate(a+l/2,o+c),r.rotate(-Math.PI/2),r.textAlign="left",r.fillStyle=Lt("lead"),r.fillText(s,2,2),r.restore()},n=this.browser.sampleInfo.attributeNames;this.hitList={};for(let r=0;r<n.length;r++){const s=Bc+r*tr,a=tr-1,o=Math.round(e.canvas.height/window.devicePixelRatio);de.fillRect(e,s,0,a,o,{fillStyle:Lt("snow")}),t(e,n[r],s,0,a,o);const l=`${Math.floor(s)}#0#${a}#${Math.ceil(o)}`;this.hitList[l]=`${n[r]}`}}renderSVGContext(e,{deltaX:t,deltaY:n}){if(typeof this.trackView.track.getSamples=="function"){const r=this.trackView.track.getSamples(),s=0,{width:a,height:o}=this.viewport.getBoundingClientRect(),c=`${(this.trackView.track.name||this.trackView.track.id).replace(/\W/g,"")}_sample_names_guid_${Et()}`;e.saveWithTranslationAndClipRect(c,t,n+s,a,o,-0),this.draw({context:e,samples:r}),e.restore()}}addMouseHandlers(){this.addMouseMoveHandler()}addMouseMoveHandler(){this.boundMouseMoveHandler=e.bind(this),this.viewport.addEventListener("mousemove",this.boundMouseMoveHandler);function e(t){if(this.hitList){const n=Object.entries(this.hitList);if(this.viewport.previousElementSibling===null){const r=(l,c)=>{const{marginTop:h}=window.getComputedStyle(c),{x:f,y:d}=xt(t,this.browser.columnContainer.querySelector(".igv-sample-info-column"));return{x:Math.floor(f),y:Math.floor(d-parseInt(h,10))}},s=this.browser.columnContainer.querySelector(".igv-sample-info-column"),{x:a,y:o}=r(s,this.viewport);s.setAttribute("title","");for(const[l,c]of n){const[h,f,d,u]=l.split("#").map(p=>parseInt(p,10));if(!(a<h||a>h+d||o<f||o>f+u)){s.setAttribute("title",`${c}`);break}}}else{const{x:r,y:s}=xt(t,this.viewport);this.viewport.setAttribute("title","");for(const[a,o]of n){const[l,c,h,f]=a.split("#").map(d=>parseInt(d,10));if(!(r<l||r>l+h||s<c||s>c+f)){const[d,u]=o.split("#");this.viewport.setAttribute("title",`${d.split(_r.emptySpaceReplacement).join(" ")}: ${u==="-"?"":u}`);break}}}}}}removeMouseHandlers(){this.viewport.removeEventListener("mousemove",this.boundMouseMoveHandler)}dispose(){this.removeMouseHandlers(),this.viewport.remove()}show(){this.viewport.style.display="block"}hide(){this.viewport.style.display="none"}}const fv=200,dv=4,uv=10;class pv{constructor(e,t,n,r){this.guid=Et(),this.trackView=e,this.browser=e.browser,this.viewport=Fe({class:"igv-viewport"}),t.appendChild(this.viewport),e.track.height&&(this.viewport.style.height=`${e.track.height}px`),this.canvas=document.createElement("canvas"),this.viewport.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.trackScrollDelta=0,this.contentTop=0,this.hitList=void 0,this.sortDirection=1,this.setWidth(r),this.addMouseHandlers()}checkCanvas(){const e=this.browser.sampleNameViewportWidth||0;this.ctx.canvas.width=e*window.devicePixelRatio,this.ctx.canvas.style.width=`${e}px`,this.ctx.canvas.height=this.viewport.clientHeight*window.devicePixelRatio,this.ctx.canvas.style.height=`${this.viewport.clientHeight}px`,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}setTop(e){if(typeof this.trackView.track.getSamples=="function"){this.contentTop=e;const t=this.trackView.track.getSamples();this.repaint(t)}}setWidth(e){this.viewport.innerWidth=e,this.checkCanvas()}async repaint(e){if(e.names.length>0&&this.browser.showSampleNames===!0&&(this.checkCanvas(),this.draw({context:this.ctx,samples:e}),this.browser.sampleNameViewportWidth===void 0)){const t=e.names.map(n=>this.ctx.measureText(n).width);this.browser.sampleNameViewportWidth=Math.min(fv,dv+Math.ceil(Math.max(...t))),this.browser.layoutChange()}}draw({context:e,samples:t}){if(de.fillRect(e,0,0,e.canvas.width,t.height,{fillStyle:Lt("snow")}),t&&t.names.length>0){const n=this.viewport.getBoundingClientRect().height,r=t.height,s=r-2<=1?0:1;let a=this.contentTop+t.yOffset;this.hitList={};for(const o of t.names){if(a>n)break;if(a+r>0){const c=a+s,h=r-2*s;gv(e,o,2,c,e.canvas.width,h)}a+=r}}}renderSVGContext(e,{deltaX:t,deltaY:n}){if(typeof this.trackView.track.getSamples=="function"){const r=this.trackView.track.getSamples(),s=0,{width:a,height:o}=this.viewport.getBoundingClientRect(),c=`${(this.trackView.track.name||this.trackView.track.id).replace(/\W/g,"")}_sample_names_guid_${Et()}`;e.saveWithTranslationAndClipRect(c,t,n+s,a,o,-0),this.draw({context:e,samples:r}),e.restore()}}addMouseHandlers(){this.boundClickHandler=e.bind(this),this.viewport.addEventListener("contextmenu",this.boundClickHandler);function e(n){n.preventDefault();const r={label:"Name Panel Width",value:this.browser.sampleNameViewportWidth,callback:s=>{this.browser.sampleNameViewportWidth=parseInt(s),this.browser.layoutChange()}};this.browser.inputDialog.present(r,n)}this.boundMouseMoveHandler=t.bind(this),this.viewport.addEventListener("mousemove",this.boundMouseMoveHandler);function t(n){if(this.hitList){const r=Object.entries(this.hitList),{x:s,y:a}=xt(n,this.viewport);this.viewport.setAttribute("title","");for(const[o,l]of r){const[c,h,f,d]=o.split("#").map(u=>parseInt(u,10));if(!(s<c||s>c+f||a<h||a>h+d)){this.viewport.setAttribute("title",`${l}`);break}}}}}removeMouseHandlers(){this.viewport.removeEventListener("contextmenu",this.boundClickHandler),this.viewport.removeEventListener("mousemove",this.boundMouseMoveHandler)}dispose(){this.removeMouseHandlers(),this.viewport.remove()}}function gv(i,e,t,n,r,s){const a=Math.min(s,uv);i.font=`${a}px sans-serif`,i.textAlign="start",i.fillStyle=Lt("lead");const o=t,l=i.measureText(e),c=l.actualBoundingBoxAscent+l.actualBoundingBoxDescent,h=n+s/2+c/2;i.fillText(e,o,h)}class L0{constructor(e){this.popover=Fe({class:"igv-menu-popup"}),e.appendChild(this.popover),this.parent=e;const t=Fe({class:"igv-menu-popup-header"});this.popover.appendChild(t),Dn(t,()=>this.popover.style.display="none"),this.popoverContent=Fe(),this.popover.appendChild(this.popoverContent),Ui(this.popover,t),t.addEventListener("click",n=>{n.stopPropagation(),n.preventDefault()}),this.popover.style.display="none"}presentMenuList(e,t){if(bv(this.parent),t.length>0){this.popoverContent.innerHTML="";const n=this.parseMenuList(e,t);for(let s of n){s.init&&s.init();let a=s.object;n.indexOf(s)===0&&a.removeClass("igv-track-menu-border-top"),a.hasClass("igv-track-menu-border-top")||a.hasClass("igv-menu-popup-check-container")||a.is("div")&&a.addClass("igv-menu-popup-shim"),this.popoverContent.appendChild(a.get(0))}this.popover.style.display="flex";const{width:r}=this.popover.getBoundingClientRect();this.popover.style.left=`${-r}px`,this.popover.style.top="0px"}}parseMenuList(e,t){return t.map((n,r)=>{let s;if(n.name?(s=ve("<div>"),s.text(n.name)):n.object?s=n.object:typeof n.label=="string"?(s=ve("<div>"),s.html(n.label)):typeof n=="string"&&(n.startsWith("<")?s=ve(n):s=ve("<div>"+n+"</div>")),r===0&&s.addClass("igv-track-menu-border-top"),n.click||n.dialog){const a=o=>{if(o.preventDefault(),o.stopPropagation(),n.click)if(e.track.selected){const l=e.browser.getSelectedTrackViews();if(n.doAllMultiSelectedTracks===!0)n.click.call(e.track,o);else if(n.menuItemType==="removeTrack"){const c=()=>{e.browser.overlayTrackButton.setVisibility(!1);for(const{track:d}of l)n.click.call(d,o)},f={html:`Are you sure you want to delete ${l.length} tracks?`,callback:c};e.browser.menuUtils.dialog.present(f,o)}else for(const{track:c}of l)n.click.call(c,o)}else n.click.call(e.track,o);else n.dialog&&n.dialog.call(e.track,o);this.popover.style.display="none"};s.on("click",a),s.on("touchend",o=>a(o)),s.on("mouseup",function(o){o.preventDefault(),o.stopPropagation()})}return{object:s,init:n.init||void 0}})}presentTrackContextMenu(e,t){this.popoverContent.innerHTML="";const n=mv(t,this.popover);for(let{el:r}of n)this.popoverContent.appendChild(r);wv(e,this.popover)}hide(){this.popover.style.display="none"}dispose(){this.popoverContent.innerHTML="",this.popover.innerHTML="",Object.keys(this).forEach(function(e){this[e]=void 0})}}function mv(i,e){return i.map(t=>{let n;if(typeof t=="string"&&t==="<hr/>")n=document.createElement("hr");else if(typeof t=="string")n=Fe({class:"context-menu"}),n.innerHTML=t;else if(typeof t=="Node")n=t;else{if(typeof t.init=="function"&&t.init(),t.type==="checkbox")n=ht("Show all bases",t.value);else if(t.type==="color"){const r=new Rg(e.parentElement);r.configure({color:"grey"}),n=Fe({class:"context-menu"}),typeof t.label=="string"&&(n.innerHTML=t.label);const s=a=>{r.show(),Ct(e),a.preventDefault(),a.stopPropagation()};n.addEventListener("click",s),n.addEventListener("touchend",s),n.addEventListener("mouseup",function(a){a.preventDefault(),a.stopPropagation()})}else n=Fe({class:"context-menu"}),typeof t.label=="string"&&(n.innerHTML=t.label);if(t.click&&t.type!=="color"){let r=function(s){t.click(),Ct(e),s.preventDefault(),s.stopPropagation()};n.addEventListener("click",r),n.addEventListener("touchend",r),n.addEventListener("mouseup",function(s){s.preventDefault(),s.stopPropagation()})}}return{el:n,init:t.init}})}function wv(i,e){e.style.display="flex";const{x:t,y:n}=xt(i,e.parentNode),{width:r}=e.getBoundingClientRect(),s=t+r,{width:a}=e.parentNode.getBoundingClientRect();e.style.left=`${s>a?t-(s-a):t}px`,e.style.top=`${n}px`}const bv=i=>{const e=i.querySelectorAll(".igv-menu-popup");for(const t of e)t.style.display="none"};class di{constructor(e,t,n,r,s,a,o){this.browser=e,this.button=Fe({class:"igv-navbar-text-button"}),t.appendChild(this.button),Array.isArray(n)?(this.textContent=n[0],this.title=n[1]):this.textContent=this.title=n,this.buttonLabel=r,this.imageDictionary={image:`url("data:image/svg+xml,${encodeURIComponent(s)}")`,imageHover:`url("data:image/svg+xml,${encodeURIComponent(a)}")`},this.responsiveKey="text",this.configureButton(this.textContent,this.title),this.setState(o),e.on("navbar-resize",l=>{this.navbarResizeHandler(l)})}navbarResizeHandler(e){const t=e==="igv-navbar-icon-button"?"image":"text";t!==this.responsiveKey&&(this.responsiveKey=t,this.configureButton(this.textContent,this.title),this.setState(void 0))}configureButton(e,t){this.groupElement=void 0,this.button.title=t,this.button.innerHTML="",this.button.style.backgroundImage="none",this.button.classList.remove("igv-navbar-icon-button"),this.button.classList.remove("igv-navbar-text-button"),this.responsiveKey==="text"?this.configureTextButton(e):this.configureIconButton()}configureTextButton(e){this.button.classList.add("igv-navbar-text-button");const t=document.createElement("div");t.innerHTML=this.buttonLabel;const n=t.firstChild;this.button.appendChild(n),this.groupElement=n.querySelector("#igv-navbar-button-group");const r=n.querySelector("#igv-navbar-button-label");r.textContent=e}configureIconButton(){this.button.classList.add("igv-navbar-icon-button")}setState(e){e!==void 0&&(this.doHover=e),this.responsiveKey==="text"?this.setTextButtonState(this.doHover):this.setIconButtonState(this.doHover)}setTextButtonState(e){this.groupElement.classList.remove(...this.groupElement.classList);const t=e===!0?"igv-navbar-text-button-svg-hover":"igv-navbar-text-button-svg-inactive";this.groupElement.classList.add(t)}setIconButtonState(e){this.button.style.backgroundImage=e===!0?this.imageDictionary.imageHover:this.imageDictionary.image}show(){this.button.style.display="flex"}hide(){this.button.style.display="none"}setVisibility(e){e===!0?this.show():this.hide()}static currentNavbarButtonClass(e){return e.$navigation.get(0).querySelector(".igv-navbar-text-button")?"igv-navbar-text-button":"igv-navbar-icon-button"}}const Fv=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>Overlay Tracks</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Overlay-Tracks">
            <rect id="backdrop" stroke="#737373" stroke-width="12" fill="#FFFFFF" x="6" y="6" width="613" height="613" rx="135"></rect>
            <g id="layer-group" transform="translate(3, 127)">
                <rect id="a" stroke="#737373" stroke-width="24" fill="#A1A1A1" x="12" y="12" width="332" height="139"></rect>
                <rect id="a---hold-out" fill="#A1A1A1" x="9" y="25" width="324" height="115"></rect>
                <rect id="b" stroke="#737373" stroke-width="24" fill="#C9C9C9" x="81" y="103" width="474" height="139"></rect>
                <rect id="c" stroke="#737373" stroke-width="24" fill="#ECECEC" x="238" y="214" width="372" height="139"></rect>
                <rect id="c---hold-out" fill="#ECECEC" x="250" y="226" width="372" height="115"></rect>
            </g>
            <rect id="over-border" stroke="#737373" stroke-width="12" x="6" y="6" width="613" height="613" rx="135"></rect>
        </g>
    </g>
</svg>`,yv=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>Overlay Tracks Hover</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Overlay-Tracks-Hover">
            <rect id="backdrop-copy" stroke="#737373" stroke-width="12" fill="#737373" x="6" y="6" width="613" height="613" rx="135"></rect>
            <g id="layer-group" transform="translate(3, 127)">
                <rect id="a" stroke="#FFFFFF" stroke-width="24" fill="#A1A1A1" x="12" y="12" width="332" height="139"></rect>
                <rect id="a---hold-out" fill="#A1A1A1" x="9" y="25" width="324" height="115"></rect>
                <rect id="b" stroke="#FFFFFF" stroke-width="24" fill="#C9C9C9" x="81" y="103" width="474" height="139"></rect>
                <rect id="c" stroke="#FFFFFF" stroke-width="24" fill="#ECECEC" x="238" y="214" width="372" height="139"></rect>
                <rect id="c---hold-out" fill="#ECECEC" x="250" y="226" width="372" height="115"></rect>
            </g>
            <rect id="over-border-copy" stroke="#737373" stroke-width="12" x="6" y="6" width="613" height="613" rx="135"></rect>
        </g>
    </g>
</svg>`,rn=`<svg width="80px" height="18px" viewBox="0 0 80 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="igv-navbar-button-group">
            <rect id="Rectangle" x="0.5" y="0.5" width="79" height="17" rx="6"></rect>
            <text id="igv-text-button-label" x="50%" y="50%" dy=".1em" font-family="Helvetica" font-size="12" font-weight="normal" letter-spacing="-0.372">
                <tspan id="igv-navbar-button-label"></tspan>
            </text>
        </g>
    </g>
</svg>`,Av=`<svg width="90px" height="20px" viewBox="0 0 90 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="igv-navbar-button-group">
            <rect id="Rectangle" x="0.5" y="0.5" width="89" height="18" rx="6"></rect>
            <text id="igv-text-button-label" x="50%" y="50%" dy=".1em" font-family="Helvetica" font-size="12" font-weight="normal" letter-spacing="-0.372">
                <tspan id="igv-navbar-button-label"></tspan>
            </text>
        </g>
    </g>
</svg>`;class Bh extends mt{constructor(e,t,n){super(e,t),this.type="merged",this.paintAxis=Ys,this.graphType=e.graphType,n?this.tracks=n:this.tracks=[]}async postInit(){if(this.config.tracks){for(let t of this.config.tracks){const n=await this.browser.createTrack(t);n?this.tracks.push(n):console.warn("Could not create track "+t),typeof n.postInit=="function"&&await n.postInit()}this.config.tracks.every(t=>t.autoscale!==void 0||t.max!==void 0)||(this.config.autoscale=this.config.max===void 0)}for(let e of this.tracks)e.isMergedTrack=!0;if(this.config.autoscale?this.autoscale=this.config.autoscale:this.config.max!==void 0&&this.setDataRange({min:this.config.min||0,max:this.config.max}),this.config.flipAxis!==void 0)for(let e of this.tracks)e.flipAxis=this.config.flipAxis;if(this.config.logScale!==void 0)for(let e of this.tracks)e.logScale=this.config.logScale;this.resolutionAware=this.tracks.some(e=>e.resolutionAware)}set flipAxis(e){this.config.flipAxis=e;for(let t of Ni(this.tracks))t.flipAxis=e}get flipAxis(){return Ni(this.tracks).every(e=>e.flipAxis)}set logScale(e){this.config.logScale=e;for(let t of Ni(this.tracks))t.logScale=e}get logScale(){return Ni(this.tracks).every(e=>e.logScale)}get height(){return this._height}set height(e){if(this.config.height=e,this._height=e,this.tracks)for(let t of this.tracks)t.height=e,t.config.height=e}set autoscale(e){if(this._autoscale=e,e===!1&&this.tracks)for(let t of this.tracks)t.autoscale=!1}get autoscale(){return this._autoscale}setDataRange({min:e,max:t}){this.autoscale=!1;for(const n of Ni(this.tracks))n.dataRange={min:e,max:t},n.autoscale=!1,n.autoscaleGroup=!1}set dataRange({min:e,max:t}){for(const n of Ni(this.tracks))n.dataRange={min:e,max:t}}get dataRange(){if(this.tracks){const e=Ni(this.tracks);if(e.length>0){const t=e[0].dataRange;if(e.every(n=>n.dataRange&&n.dataRange.min===t.min&&n.dataRange.max===t.max))return t}}}menuItemList(){const e=[];return Ni(this.tracks).length>0&&(this.flipAxis!==void 0&&e.push({label:"Flip y-axis",click:function(){this.flipAxis=!this.flipAxis,this.trackView.repaintViews()}}),e.push(...this.numericDataMenuItems())),e.push("<hr/>"),e.push(this.overlayTrackAlphaAdjustmentMenuItem()),e.push(this.trackSeparationMenuItem()),e}async getFeatures(e,t,n,r){const s=this.tracks.map(o=>o.getFeatures(e,t,n,r)),a=await Promise.all(s);if(a.every(o=>o.length===0))return new bu([],[]);{const o=this.tracks.map(l=>l.name);return new bu(a,o)}}draw(e){const t=e.features;for(let n=0,r=this.tracks.length;n<r;n++){const s=Object.assign({},e);s.features=t.featureArrays[n],s.alpha=this.alpha,this.graphType&&(this.tracks[n].graphType=this.graphType),this.tracks[n].draw(s)}}popupData(e){const t=this.clickedFeatures(e);if(t&&t.length===this.tracks.length){const n=[];let r=!0;for(let s=0;s<t.length;s++)if(s>0&&n.push("<hr/>"),n.push(`<div style=background-color:rgb(245,245,245);border-bottom-style:dashed;border-bottom-width:1px;padding-bottom:5px;padding-top:10px;font-weight:bold;font-size:larger >${t[s].trackName}</div>`),t[s].features.length>0){r=!1;const a=this.tracks[s].popupData(e,t[s].features);n.push(...a)}else n.push("Missing or 0 value(s)");return r===!0?[]:n}}clickedFeatures(e){const t=e.viewport.cachedFeatures;if(!t||!t.featureArrays||!Array.isArray(t.featureArrays)||t.featureArrays.length===0)return[];const n=e.genomicLocation,r=[],s=e.referenceFrame.bpPerPixel>.2?3*e.referenceFrame.bpPerPixel:.2,a=n-s,o=n+s;for(let l=0;l<t.featureArrays.length;l++){const c=io.findOverlapping(t.featureArrays[l],a,o);r.push({trackName:t.trackNames[l],features:c})}return r}get supportsWholeGenome(){return this.tracks.every(e=>e.supportsWholeGenome)}getState(){const e=super.getState(),t=[];for(let n of this.tracks)t.push(n.getState());return e.tracks=t,e}updateScales(e){let t;if(this.autoscale){t=!0;let n=[];for(let r of e){if(r.featureCache&&r.featureCache.features){const a=r.referenceFrame,o=a.start,l=o+a.toBP(r.getWidth()),c=r.featureCache.features;this.autoscale&&(n.push({value:c.getMax(o,l)}),n.push({value:c.getMin(o,l)}))}const s=Ts(n);for(const a of Ni(this.tracks))a.dataRange=s}}else{let n=-1;for(let r of this.tracks)if(++n,r.autoscale){t=!0;let s=[];for(let a of e)if(a.featureCache&&a.featureCache.features){const o=a.referenceFrame,l=o.start,c=l+o.toBP(a.getWidth()),f=a.featureCache.features.featureArrays[n];if(f){for(let d of f)if(!(d.end<l)){if(d.start>c)break;s.push(d)}}}r.dataRange=Ts(s)}}return t}overlayTrackAlphaAdjustmentMenuItem(){const e=Fe();e.innerText="Set transparency";function t(n){const r=a=>{this.alpha=Math.max(.001,a),this.repaintViews()},s={label:"Transparency",value:this.alpha,min:0,max:1,scaleFactor:1e3,callback:r};this.browser.sliderDialog.present(s,n)}return{object:ve(e),dialog:t}}trackSeparationMenuItem(){const e=ve("<div>");e.text("Separate tracks");function t(n){const r=this.autoscale,s=this.name,a=this.tracks,o=this.browser,l=this.order;o.removeTrack(this);for(let c of a)c.order=l,r&&(c.autoscaleGroup=s),c.isMergedTrack=!1,o.addTrack(c.config,c);o.updateViews()}return{object:e,click:t}}}ke(Bh,"defaults",{autoscale:void 0,alpha:.5,height:50});class bu{constructor(e,t){this.featureArrays=e,this.trackNames=t}getMax(e,t){let n=-Number.MAX_VALUE;for(let r of this.featureArrays)if(Array.isArray(r)){for(let s of r)if(!(typeof s.value>"u"||Number.isNaN(s.value))&&!(s.end<e)){if(s.start>t)break;n=Math.max(n,s.value)}}return n!==-Number.MAX_VALUE?n:100}getMin(e,t){let n=0;for(let r of this.featureArrays)if(Array.isArray(r)){for(let s of r)if(typeof s.value<"u"&&!Number.isNaN(s.value)){if(s.end<e)continue;if(s.start>t)break;n=Math.min(n,s.value)}}return n}}const Ni=i=>i?i.filter(e=>e.dataRange!==void 0||e.autoscale!==void 0||e.autoscaleGroup!==void 0):[];class vv extends di{constructor(e,t){super(e,t,"Overlay Tracks",rn,Fv,yv,!1),this.button.addEventListener("mouseenter",()=>this.setState(!0)),this.button.addEventListener("mouseleave",()=>this.setState(!1));const n=()=>{this.setVisibility(!1),_v.call(this)};this.boundMouseClickHandler=n.bind(this),this.button.addEventListener("click",this.boundMouseClickHandler),this.setVisibility(!0)}}function _v(i){if(z0(this.browser)===!0){const e=this.browser.getSelectedTrackViews().map(({track:s})=>s);for(const s of e)s.selected=!1;const t=[];for(let s of e)s.type==="merged"?t.push(...s.tracks):t.push(s);const n={name:"Overlay",type:"merged",autoscale:!1,alpha:.5,height:Math.max(...e.map(({height:s})=>s)),order:Math.min(...e.map(({order:s})=>s))},r=new Bh(n,this.browser,t);for(const s of e)this.browser.removeTrack(s);this.browser.addTrack(n,r)}}function z0(i){const e=i.getSelectedTrackViews();if(e&&e.length>1){const t=new Set(["wig","merged"]);return e.filter(({track:r})=>t.has(r.type)).length>1}else return!1}const Cv=50,wa=new Set(["sequence","ruler","ideogram"]),xv=new Set(["ruler","sequence","ideogram"]);class Al{constructor(e,t,n){this.namespace=`trackview-${Et()}`,this.browser=e,this.track=n,n.trackView=this,this.addDOMToColumnContainer(e,t,e.referenceFrameList)}startSpinner(){this.viewports&&this.viewports.length>0&&this.viewports[0].startSpinner()}stopSpinner(){this.viewports&&this.viewports.length>0&&this.viewports[0].stopSpinner()}addDOMToColumnContainer(e,t,n){this.axis=this.createAxis(e,this.track),this.createViewports(e,t,n),this.sampleInfoViewport=new hv(this,e.columnContainer.querySelector(".igv-sample-info-column"),e.getSampleInfoViewportWidth()),this.sampleNameViewport=new pv(this,e.columnContainer.querySelector(".igv-sample-name-column"),void 0,e.getSampleNameViewportWidth()),this.createTrackScrollbar(e),this.createTrackDragHandle(e),this.createTrackGearPopup(e)}createViewports(e,t,n){this.viewports=[];const r=e.calculateViewportWidth(n.length),s=t.querySelectorAll(".igv-column");for(let a=0;a<s.length;a++){const o=Nc(this,s[a],n[a],r);this.viewports.push(o)}}createAxis(e,t){const n=Fe();if(e.columnContainer.querySelector(".igv-axis-column").appendChild(n),n.dataset.tracktype=t.type,n.style.height=`${t.height}px`,typeof t.paintAxis=="function"){const{width:r,height:s}=n.getBoundingClientRect();this.axisCanvas=document.createElement("canvas"),this.axisCanvas.style.width=`${r}px`,this.axisCanvas.style.height=`${s}px`,n.appendChild(this.axisCanvas)}if(Ma.has(this.track.type)===!1){const r=Fe();n.appendChild(r);const a=document.createRange().createContextualFragment('<input type="checkbox" name="track-select">').firstChild;r.appendChild(a),a.checked=this.track.selected||!1,a.addEventListener("change",o=>{o.preventDefault(),o.stopPropagation(),this.track.selected=o.target.checked,this.setDragHandleSelectionState(o.target.checked),this.browser.overlayTrackButton.setVisibility(z0(this.browser))}),this.setTrackSelectionState(n,!1)}return n}resizeAxisCanvas(e,t){this.axis.style.width=`${e}px`,this.axis.style.height=`${t}px`,typeof this.track.paintAxis=="function"&&(this.axisCanvas.style.width=`${e}px`,this.axisCanvas.style.height=`${t}px`)}renderSVGContext(e,{deltaX:t,deltaY:n}){kv(e,this.track,this.axisCanvas,t,n);const{width:r}=this.axis.getBoundingClientRect(),{y:s}=this.viewports[0].$viewport.get(0).getBoundingClientRect();let a={deltaX:r+t,deltaY:s+n};for(let o of this.viewports){o.renderSVGContext(e,a);const{width:l}=o.$viewport.get(0).getBoundingClientRect();a.deltaX+=l}if(this.browser.sampleInfo.isInitialized()===!0&&this.browser.sampleInfoControl.showSampleInfo===!0){this.sampleInfoViewport.renderSVGContext(e,a);const{width:o}=this.sampleInfoViewport.viewport.getBoundingClientRect();a.deltaX+=o}this.browser.showSampleNames===!0&&this.sampleNameViewport.renderSVGContext(e,a)}presentColorPicker(e){if(xv.has(this.track.type)===!1){const t=[],n=this.track.color||this.track.defaultColor;ut(n)&&t.push(n),this.track.altColor&&ut(this.track.altColor)&&t.push(this.track.altColor);let r=t.map(o=>o.startsWith("#")?o:o.startsWith("rgb(")?qe.rgbToHex(o):qe.colorNameToHex(o)),s={color:o=>{this.track.color=gd(o),this.repaintViews()},altColor:o=>{this.track.altColor=gd(o),this.repaintViews()}};const a=this.browser.getSelectedTrackViews();a.length>0&&new Set(a).has(this)?(s={color:o=>{for(let l of a)l.track.color=o,l.repaintViews()}},this.browser.genericColorPicker.configure(r,s)):this.browser.genericColorPicker.configure(r,s),this.browser.genericColorPicker.setActiveColorHandler(e),this.browser.genericColorPicker.show()}}setTrackHeight(e,t){t||(this.track.minHeight&&(e=Math.max(this.track.minHeight,e)),this.track.maxHeight&&(e=Math.min(this.track.maxHeight,e))),this.track.height=e,this.resizeAxisCanvas(this.axis.clientWidth,this.track.height),typeof this.track.paintAxis=="function"&&this.paintAxis();for(let{$viewport:n}of this.viewports)n.height(e);if(this.sampleInfoViewport.setHeight(e),this.sampleNameViewport.viewport.style.height=`${e}px`,typeof this.track.computePixelHeight!="function")for(let n of this.viewports)n.setContentHeight(e);this.repaintViews(),this.updateScrollbar(),this.dragHandle.style.height=`${e}px`,this.gearContainer.style.height=`${e}px`}updateScrollbar(){const e=this.viewports[0].$viewport.height();if(this.outerScroll.style.height=`${e}px`,wa.has(this.track.type)===!1){const t=this.maxViewportContentHeight(),n=Math.round(e/t*e);t>e?(this.innerScroll.style.display="block",this.innerScroll.style.height=`${n}px`):this.innerScroll.style.display="none"}}moveScroller(e){const t=ve(this.innerScroll).position().top+e,n=Math.min(Math.max(0,t),this.outerScroll.clientHeight-this.innerScroll.clientHeight);ve(this.innerScroll).css("top",`${n}px`);const r=this.maxViewportContentHeight(),s=-Math.round(n*(r/this.viewports[0].$viewport.height()));for(let a of this.viewports)a.setTop(s);this.sampleInfoViewport.setTop(s),this.sampleNameViewport.trackScrollDelta=e,this.sampleNameViewport.setTop(s)}isLoading(){for(let e of this.viewports)if(e.isLoading())return!0}repaintViews(){for(let e of this.viewports)e.isVisible()&&e.repaint();typeof this.track.paintAxis=="function"&&this.paintAxis(),this.repaintSampleInfo(),this.repaintSamples()}repaintSampleInfo(){this.sampleInfoViewport.repaint()}repaintSamples(){if(typeof this.track.getSamples=="function"){const e=this.track.getSamples();e.names&&e.names.length>0&&this.sampleNameViewport.repaint(e)}}setTrackLabelName(e){this.viewports.forEach(t=>t.setTrackLabel(e))}resize(e){for(let t of this.viewports)t.setWidth(e)}async updateViews(){if(!(this.browser&&this.browser.referenceFrameList))return;const e=this.viewports.filter(a=>a.isVisible());if(e.forEach(a=>a.shift()),this.browser.dragObject)return;const t=e.filter(a=>a.needsRepaint()).filter(a=>a.checkZoomIn()),n=e.filter(a=>a.checkZoomIn()).filter(a=>a.needsReload());for(let a of n)await a.loadFeatures();if(this.disposed)return;if(this.track&&typeof this.track.variantRowCount=="function"&&n.length>0){let a=0;for(let l of this.viewports)l.featureCache&&l.featureCache.features&&(a=Math.max(a,l.featureCache.features.reduce((c,h)=>Math.max(c,h.row||0),0)));if(this.track.nVariantRows!==a+1){this.track.variantRowCount(a+1);for(let l of this.viewports)l.checkContentHeight()}}let r;if(this.track.type==="merged")r=this.track.updateScales(e);else if(this.track.autoscale){let a=[];for(let o of e){const l=o.referenceFrame,c=l.start,h=c+l.toBP(o.getWidth());if(o.featureCache&&o.featureCache.features)if(typeof o.featureCache.features.getMax=="function"){const f=o.featureCache.features.getMax(c,h);if(a.push({value:f}),typeof o.featureCache.features.getMin=="function"){const d=o.featureCache.features.getMin(c,h);a.push({value:d})}}else{const f=io.findOverlapping(o.featureCache.features,c,h);for(let d of f)a.push(d)}}typeof this.track.doAutoscale=="function"?this.track.dataRange=this.track.doAutoscale(a):this.track.dataRange=Ts(a)}const s=this.track.autoscale||this.track.autoscaleGroup||this.track.type==="ruler"||r||this.track.groupBy;for(let a of e)t.includes(a)?a.repaint():s&&a.refresh();this.adjustTrackHeight(),this.repaintSampleInfo(),this.repaintSamples(),this.updateRulerViewportLabels()}clearCachedFeatures(){for(let e of this.viewports)e.clearCache()}updateRulerViewportLabels(){const e=this.browser.calculateViewportWidth(this.viewports.length);for(let t of this.viewports)this.track.type==="ruler"&&(this.viewports.length>1?t.presentLocusLabel(e):t.dismissLocusLabel())}async getInViewFeatures(){if(!(this.browser&&this.browser.referenceFrameList))return[];let e=[];const t=this.viewports.filter(n=>n.isVisible());for(let n of t){const r=n.referenceFrame,{chr:s,start:a,bpPerPixel:o}=n.referenceFrame,l=a+r.toBP(n.getWidth());if((!n.featureCache||!n.featureCache.containsRange(s,a,l,o))&&await n.loadFeatures(),n.featureCache&&n.featureCache.features)if(typeof n.featureCache.features.getMax=="function"){const h=n.featureCache.features.getMax(a,l);e.push({value:h})}else{const h=typeof n.featureCache.queryFeatures=="function"?n.featureCache.queryFeatures(s,a,l):io.findOverlapping(n.featureCache.features,a,l);e=e.concat(h)}}return e}checkContentHeight(){for(let e of this.viewports)e.checkContentHeight();this.adjustTrackHeight()}adjustTrackHeight(){var e=this.maxViewportContentHeight();if(this.track.autoHeight?this.setTrackHeight(e,!1):this.track.paintAxis&&this.paintAxis(),wa.has(this.track.type)===!1){const t=this.viewports[0].getContentTop(),n=this.viewports[0].$viewport.height(),r=Math.min(0,n-e);if(t<r)for(let s of this.viewports)s.setTop(r);this.updateScrollbar()}}viewportsToReload(e){return this.viewports.filter(n=>{if(!n.isVisible())return!1;if(n.checkZoomIn()){const r=n.referenceFrame,s=n.referenceFrame.chr,a=r.start,o=a+r.toBP(ve(n.contentDiv).width()),l=r.bpPerPixel;return e||!n.tile||n.tile.invalidate||!n.tile.containsRange(s,a,o,l)}else return!1})}createTrackScrollbar(e){const t=Fe();if(e.columnContainer.querySelector(".igv-scrollbar-column").appendChild(t),t.style.height=`${this.track.height}px`,this.outerScroll=t,wa.has(this.track.type)===!1){const n=Fe();t.appendChild(n),this.innerScroll=n,this.addTrackScrollMouseHandlers(e)}}createTrackDragHandle(e){this.track.type!=="sequence"&&Ma.has(this.track.type)===!0?this.dragHandle=Fe({class:"igv-track-drag-shim"}):(this.dragHandle=Fe({class:"igv-track-drag-handle"}),this.dragHandle.classList.add("igv-track-drag-handle-color")),e.columnContainer.querySelector(".igv-track-drag-column").appendChild(this.dragHandle),this.dragHandle.style.height=`${this.track.height}px`,this.addTrackDragMouseHandlers(e)}createTrackGearPopup(e){if(this.gearContainer=Fe(),e.columnContainer.querySelector(".igv-gear-menu-column").appendChild(this.gearContainer),this.gearContainer.style.height=`${this.track.height}px`,this.track.ignoreTrackMenu!==!0){let t=function(n){if(n.preventDefault(),n.stopPropagation(),this.trackGearPopup.popover.style.display==="none"){for(const r of e.trackViews.filter(s=>s!==this&&s.trackGearPopup!==void 0))r.trackGearPopup.popover.style.display="none";this.trackGearPopup.presentMenuList(this,e.menuUtils.trackMenuItemList(this))}else this.trackGearPopup.popover.style.display="none"};this.gear=Fe(),this.gearContainer.appendChild(this.gear),this.gear.appendChild(Pi("cog")),this.trackGearPopup=new L0(this.gear),this.boundTrackGearClickHandler=t.bind(this),this.gear.addEventListener("click",this.boundTrackGearClickHandler)}}addTrackScrollMouseHandlers(e){this.boundTrackScrollMouseDownHandler=t.bind(this),this.innerScroll.addEventListener("mousedown",this.boundTrackScrollMouseDownHandler);function t(r){r.stopPropagation();const{y:s}=bs(r);ve(this.innerScroll).data("yDown",s.toString()),this.boundColumnContainerMouseMoveHandler=a.bind(this),e.columnContainer.addEventListener("mousemove",this.boundColumnContainerMouseMoveHandler);function a(o){o.stopPropagation();const{y:l}=bs(o);this.moveScroller(l-parseInt(ve(this.innerScroll).data("yDown"))),ve(this.innerScroll).data("yDown",l.toString())}}this.boundColumnContainerMouseUpHandler=n.bind(this),e.columnContainer.addEventListener("mouseup",this.boundColumnContainerMouseUpHandler),e.columnContainer.addEventListener("mouseleave",this.boundColumnContainerMouseUpHandler);function n(r){e.columnContainer.removeEventListener("mousemove",this.boundColumnContainerMouseMoveHandler)}}removeTrackScrollMouseHandlers(){wa.has(this.track.type)===!1&&(this.innerScroll.removeEventListener("mousedown",this.boundTrackScrollMouseDownHandler),this.browser.columnContainer.removeEventListener("mouseup",this.boundColumnContainerMouseUpHandler),this.browser.columnContainer.removeEventListener("mousemove",this.boundColumnContainerMouseMoveHandler),this.browser.columnContainer.removeEventListener("mouseleave",this.boundColumnContainerMouseMoveHandler))}addTrackDragMouseHandlers(e){if(this.track.type==="sequence"||Ma.has(this.track.type)===!1){let n=function(o){o.preventDefault(),t=o.target,this.track.selected===!1&&(t.classList.remove("igv-track-drag-handle-color"),t.classList.add("igv-track-drag-handle-hover-color")),e.startTrackDrag(this)},r=function(o){e.endTrackDrag(),t&&o.target!==t&&this.track.selected===!1&&(t.classList.remove("igv-track-drag-handle-hover-color"),t.classList.add("igv-track-drag-handle-color")),t=void 0},s=function(o){o.preventDefault(),t===void 0&&this.track.selected===!1&&(o.target.classList.remove("igv-track-drag-handle-color"),o.target.classList.add("igv-track-drag-handle-hover-color")),e.updateTrackDrag(this)},a=function(o){o.preventDefault(),t===void 0&&this.track.selected===!1&&(o.target.classList.remove("igv-track-drag-handle-hover-color"),o.target.classList.add("igv-track-drag-handle-color"))},t;this.boundTrackDragMouseDownHandler=n.bind(this),this.dragHandle.addEventListener("mousedown",this.boundTrackDragMouseDownHandler),this.boundDocumentTrackDragMouseUpHandler=r.bind(this),document.addEventListener("mouseup",this.boundDocumentTrackDragMouseUpHandler),this.boundTrackDragMouseEnterHandler=s.bind(this),this.dragHandle.addEventListener("mouseenter",this.boundTrackDragMouseEnterHandler),this.dragHandle.addEventListener("mouseout",o=>{o.preventDefault(),t===void 0&&this.track.selected===!1&&(o.target.classList.remove("igv-track-drag-handle-hover-color"),o.target.classList.add("igv-track-drag-handle-color"))}),this.boundTrackDragMouseOutHandler=a.bind(this),this.dragHandle.addEventListener("mouseout",this.boundTrackDragMouseOutHandler)}}removeTrackDragMouseHandlers(){this.track.type==="ideogram"||this.track.type==="ruler"||(this.dragHandle.removeEventListener("mousedown",this.boundTrackDragMouseDownHandler),document.removeEventListener("mouseup",this.boundDocumentTrackDragMouseUpHandler),this.dragHandle.removeEventListener("mouseup",this.boundTrackDragMouseEnterHandler),this.dragHandle.removeEventListener("mouseout",this.boundTrackDragMouseOutHandler))}removeTrackGearMouseHandlers(){this.track.ignoreTrackMenu===!0||this.gear.removeEventListener("click",this.boundTrackGearClickHandler)}removeDOMFromColumnContainer(){this.axis.remove(),this.removeViewportsFromColumnContainer(),this.sampleInfoViewport.dispose(),this.sampleNameViewport.dispose(),this.removeTrackScrollMouseHandlers(),this.outerScroll.remove(),this.removeTrackDragMouseHandlers(),this.dragHandle.remove(),this.removeTrackGearMouseHandlers(),this.gearContainer.remove()}removeViewportsFromColumnContainer(){for(let e of this.viewports)e.$viewport.remove()}dispose(){this.axis.remove();for(let e of this.viewports)e.dispose();this.sampleInfoViewport.dispose(),this.sampleNameViewport.dispose(),this.removeTrackScrollMouseHandlers(),this.outerScroll.remove(),this.removeTrackDragMouseHandlers(),this.dragHandle.remove(),this.removeTrackGearMouseHandlers(),this.gearContainer.remove(),typeof this.track.dispose=="function"&&this.track.dispose();for(let e of Object.keys(this))this[e]=void 0;this.alert&&this.alert.container.remove(),this.disposed=!0}paintAxis(){if(typeof this.track.paintAxis=="function"){const{width:e,height:t}=this.axisCanvas.getBoundingClientRect(),n=window.devicePixelRatio||1;this.axisCanvas.height=n*t,this.axisCanvas.width=n*e;const r=this.axisCanvas.getContext("2d");if(r.scale(n,n),this.track.autoscaleGroup){if(Ra[this.track.autoscaleGroup]===void 0){const a=no.Dark2,o=Math.floor(Math.random()*no.Dark2.length);Ra[this.track.autoscaleGroup]=a[o]}const s=qe.addAlpha(Ra[this.track.autoscaleGroup],.75);this.track.paintAxis(r,e,t,s)}else this.track.paintAxis(r,e,t,void 0)}}maxViewportContentHeight(){return Math.max(...this.viewports.map(e=>e.getContentHeight()))}setTrackSelectionState(e,t){const n=e.querySelector("div");if(t!==!1)n.style.display="grid";else{const r=n.querySelector("[name=track-select]");r.checked=this.track.selected,this.dragHandle&&this.setDragHandleSelectionState(!1),n.style.display="none"}}setDragHandleSelectionState(e){const t=this.dragHandle;e?(t.classList.remove("igv-track-drag-handle-color"),t.classList.remove("igv-track-drag-handle-hover-color"),t.classList.add("igv-track-drag-handle-selected-color")):(t.classList.remove("igv-track-drag-handle-hover-color"),t.classList.remove("igv-track-drag-handle-selected-color"),t.classList.add("igv-track-drag-handle-color"))}}function kv(i,e,t,n,r){if(typeof e.paintAxis=="function"){const{y:s,width:a,height:o}=t.getBoundingClientRect(),c=`${(e.name||e.id).replace(/\W/g,"")}_axis_guid_${Et()}`;i.saveWithTranslationAndClipRect(c,n,s+r,a,o,0),e.paintAxis(i,a,o),i.restore()}}function H0(i){this.thresholds=i.thresholds,this.colors=i.colors}H0.prototype.getColor=function(i){for(let e of this.thresholds)if(i<e)return this.colors[this.thresholds.indexOf(e)];return this.colors[this.colors.length-1]};function Tc(i){this.scale=i,this.lowColor="rgb("+i.lowR+","+i.lowG+","+i.lowB+")",this.highColor="rgb("+i.highR+","+i.highG+","+i.highB+")",this.diff=i.high-i.low}Tc.prototype.getColor=function(i){var e=this.scale,t,n,r,s;return i<=e.low?this.lowColor:i>=e.high?this.highColor:(s=(i-e.low)/this.diff,t=Math.floor(e.lowR+s*(e.highR-e.lowR)),n=Math.floor(e.lowG+s*(e.highG-e.lowG)),r=Math.floor(e.lowB+s*(e.highB-e.lowB)),"rgb("+t+","+n+","+r+")")};class Iv{constructor(e){this.color=e}getColor(){return this.color}}const Ev={threshold:2e3,r:0,g:0,b:255};class fo{constructor(e){e=e||Ev,this.threshold=e.threshold,this.r=e.r,this.g=e.g,this.b=e.b,this.cache=[],this.nbins=2e3,this.binsize=this.threshold/this.nbins}setThreshold(e){this.threshold=e,this.cache=[],this.binsize=this.threshold/this.nbins}getThreshold(){return this.threshold}setColorComponents(e){this.r=e.r,this.g=e.g,this.b=e.b,this.cache=[]}getColorComponents(){return{r:this.r,g:this.g,b:this.b}}equals(e){return JSON.stringify(this)===JSON.stringify(e)}getColor(e){const n=Math.floor(Math.min(this.threshold,e)/this.binsize);if(this.cache[n]===void 0){const r=(Ze.clamp(e,0,this.threshold)-0)/(this.threshold-0);this.cache[n]=`rgba(${this.r},${this.g},${this.b}, ${r})`}return this.cache[n]}stringify(){return""+this.threshold+","+this.r+","+this.g+","+this.b}static parse(e){var t,n;if(e.startsWith("R:"))return t=e.substring(2).split(":"),n=new RatioColorScale(Number.parseFloat(t[0])),n.positiveScale=r(t[1]),n.negativeScale=r(t[2]),n;return r(e);function r(s){var a,o;return o=s.split(","),a={threshold:o[0],r:o[1],g:o[2],b:o[3]},new fo(a)}}}class Sv{constructor(e){this.config=e,this.url=e.path||e.url}async read(e,t){const n={start:e,size:t};return Se.loadArrayBuffer(this.url,{range:n})}}class Nv{constructor(e){this.file=e}async read(e,t){const n=this.file;return e!==void 0?n.slice(e,e+t).arrayBuffer():n.arrayBuffer()}}class Bv{constructor(e,t){this.file=e,this.rateLimiter=t}async read(e,t){const n=this.file,r=this.rateLimiter;return new Promise(function(s,a){r.limiter(async function(o){try{const l=await o.read(e,t);s(l)}catch(l){a(l)}})(n)})}}class Tv{constructor(e){this.wait=e===void 0?100:e,this.isCalled=!1,this.calls=[]}limiter(e){const t=this;let n=function(){t.calls.length&&!t.isCalled&&(t.isCalled=!0,t.calls.shift().call(),setTimeout(function(){t.isCalled=!1,n()},t.wait))};return function(){t.calls.push(e.bind(this,...arguments)),n()}}}class Mv{constructor(e){this.file=e.file,this.size=e.size||64e3,this.position=0,this.bufferStart=0,this.bufferLength=0,this.buffer=void 0}async read(e,t){const n=e,r=e+t,s=this.bufferStart,a=this.bufferStart+this.bufferLength;if(t>this.size)return this.buffer=void 0,this.bufferStart=0,this.bufferLength=0,this.file.read(e,t);if(n>=s&&r<=a){const o=n-s,l=o+t;return this.buffer.slice(o,l)}else if(n<s&&r>s){const o=s-n,l=await this.file.read(e,o),c=t-o;if(c>0){const h=this.buffer.slice(0,c);return Fu(l,h)}else return l}else if(n<a&&r>a){const o=a-n,l=this.bufferLength-o,c=this.buffer.slice(l,this.bufferLength),h=t-o;if(h>0)try{this.buffer=await this.file.read(a,this.size),this.bufferStart=a,this.bufferLength=this.buffer.byteLength;const f=this.buffer.slice(0,h);return Fu(c,f)}catch(f){if(f.code&&f.code===416)return c;throw f}else return c}else return this.buffer=await this.file.read(e,this.size),this.bufferStart=e,this.bufferLength=this.buffer.byteLength,this.buffer.slice(0,t)}}var Fu=function(i,e){var t=new Uint8Array(i.byteLength+e.byteLength);return t.set(new Uint8Array(i),0),t.set(new Uint8Array(e),i.byteLength),t.buffer};const Xe=function(i,e){this.littleEndian=e!==void 0?e:!0,this.position=0,this.view=i,this.length=i.byteLength};Xe.prototype.available=function(){return this.length-this.position};Xe.prototype.remLength=function(){return this.length-this.position};Xe.prototype.hasNext=function(){return this.position<this.length-1};Xe.prototype.getByte=function(){var i=this.view.getUint8(this.position,this.littleEndian);return this.position++,i};Xe.prototype.getShort=function(){var i=this.view.getInt16(this.position,this.littleEndian);return this.position+=2,i};Xe.prototype.getUShort=function(){var i=this.view.getUint16(this.position,this.littleEndian);return this.position+=2,i};Xe.prototype.getInt=function(){var i=this.view.getInt32(this.position,this.littleEndian);return this.position+=4,i};Xe.prototype.getUInt=function(){var i=this.view.getUint32(this.position,this.littleEndian);return this.position+=4,i};Xe.prototype.getLong=function(){var i=[];i[0]=this.view.getUint8(this.position),i[1]=this.view.getUint8(this.position+1),i[2]=this.view.getUint8(this.position+2),i[3]=this.view.getUint8(this.position+3),i[4]=this.view.getUint8(this.position+4),i[5]=this.view.getUint8(this.position+5),i[6]=this.view.getUint8(this.position+6),i[7]=this.view.getUint8(this.position+7);var e=0;if(this.littleEndian)for(var t=i.length-1;t>=0;t--)e=e*256+i[t];else for(var t=0;t<i.length;t++)e=e*256+i[t];return this.position+=8,e};Xe.prototype.getString=function(i){for(var e="",t;(t=this.view.getUint8(this.position++))!=0&&(e+=String.fromCharCode(t),!(i&&e.length==i)););return e};Xe.prototype.getFixedLengthString=function(i){var e="",t,n;for(t=0;t<i;t++)n=this.view.getUint8(this.position++),n>0&&(e+=String.fromCharCode(n));return e};Xe.prototype.getFixedLengthTrimmedString=function(i){var e="",t,n;for(t=0;t<i;t++)n=this.view.getUint8(this.position++),n>32&&(e+=String.fromCharCode(n));return e};Xe.prototype.getFloat=function(){var i=this.view.getFloat32(this.position,this.littleEndian);return this.position+=4,i};Xe.prototype.getDouble=function(){var i=this.view.getFloat64(this.position,this.littleEndian);return this.position+=8,i};Xe.prototype.skip=function(i){return this.position+=i,this.position};Xe.prototype.getVPointer=function(){var i=this.position,e=this.view.getUint8(i+1)<<8|this.view.getUint8(i),t=(this.view.getUint8(i+6)&255)*4294967296,n=(this.view.getUint8(i+5)&255)*16777216,r=(this.view.getUint8(i+4)&255)*65536,s=(this.view.getUint8(i+3)&255)*256,a=this.view.getUint8(i+2)&255,o=t+n+r+s+a;return this.position+=8,new Ro(o,e)};function Ro(i,e){this.block=i,this.offset=e}Ro.prototype.isLessThan=function(i){return this.block<i.block||this.block===i.block&&this.offset<i.offset};Ro.prototype.isGreaterThan=function(i){return this.block>i.block||this.block===i.block&&this.offset>i.offset};Ro.prototype.print=function(){return""+this.block+":"+this.offset};class Th{constructor(e,t){this.chr1=e,this.chr2=t}getKey(){return this.chr1.name+"_"+this.chr2.name+"_"+this.zoom.unit+"_"+this.zoom.binSize}getBlockNumbers(e,t,n){if(e.chr==this.chr2&&t.chr===this.chr1){const h=e;e=t,t=h}const r=this.chr1===this.chr2,s=this.zoom.binSize,a=this.blockBinCount,o=this.blockColumnCount;return n<9||!r?l():c();function l(){const h=e.start/s,f=e.end/s,d=t.start/s,u=t.end/s,p=Math.floor(h/a),m=Math.floor((f-1)/a),F=Math.floor(d/a),g=Math.floor((u-1)/a),w=[];for(let b=F;b<=g;b++)for(let y=p;y<=m;y++){let v;r&&b<y?v=y*o+b:v=b*o+y,w.includes(v)||w.push(v)}return w}function c(){const h=e.start/s,f=e.end/s,d=t.start/s,u=t.end/s,p=Math.floor((h+d)/2/a),m=Math.floor((f+u)/2/a),F=Math.floor(Math.log2(1+Math.abs(h-u)/Math.sqrt(2)/a)),g=Math.floor(Math.log2(1+Math.abs(f-d)/Math.sqrt(2)/a)),b=(f-d)*(h-u)<0?0:Math.min(F,g),y=Math.max(F,g),v=[];for(let T=b;T<=y;T++)for(let A=p;A<=m;A++){const C=T*o+A;v.push(C)}return v}}static parseMatrixZoomData(e,t,n){const r=new Th(e,t),s=n.getString(),a=n.getInt(),o=n.getFloat(),l=n.getFloat(),c=n.getFloat(),h=n.getFloat(),f=n.getInt();r.blockBinCount=n.getInt(),r.blockColumnCount=n.getInt();const d=n.getInt();r.zoom={index:a,unit:s,binSize:f},r.blockIndex=new Rv(d,n);const u=e.size/f,p=t.size/f,m=o/u/p;return r.averageCount=m,r.sumCounts=o,r.stdDev=c,r.occupiedCellCount=l,r.percent95=h,r}}class Rv{constructor(e,t){for(this.blockIndex={};e-- >0;){const n=t.getInt(),r=t.getLong(),s=t.getInt();this.blockIndex[n]={filePosition:r,size:s}}}getBlockIndexEntry(e){return this.blockIndex[e]}}class ps{constructor(e,t,n){this.chr1=e,this.chr2=t,this.bpZoomData=[],this.fragZoomData=[];for(let r of n)r.zoom.unit==="BP"?this.bpZoomData.push(r):this.fragZoomData.push(r)}findZoomForResolution(e,t){const n=t==="FRAG"?this.fragZoomData:this.bpZoomData;for(let s=1;s<n.length;s++){var r=n[s];if(r.zoom.binSize<e)return s-1}return n.length-1}getZoomData(e,t){t=t||"BP";const n=t==="BP"?this.bpZoomData:this.fragZoomData;for(let s=0;s<n.length;s++){var r=n[s];if(e===r.zoom.binSize)return r}}getZoomDataByIndex(e,t){return(t==="FRAG"?this.fragZoomData:this.bpZoomData)[e]}static getKey(e,t){if(e>t){const n=e;e=t,t=n}return`${e}_${t}`}static parseMatrix(e,t){const n=new Xe(new DataView(e)),r=n.getInt(),s=n.getInt(),a=t[r],o=t[s];let l=n.getInt();const c=[];for(;l-- >0;){const h=Th.parseMatrixZoomData(a,o,n);c.push(h)}return new ps(r,s,c)}}class Xr{constructor(e,t,n){this.bin1=e,this.bin2=t,this.counts=n}getKey(){return""+this.bin1+"_"+this.bin2}}class Mc{constructor(e=10){this.max=e,this.map=new Map}get(e){let t=this.map.get(e);return t&&(this.map.delete(e),this.map.set(e,t)),t}set(e,t){this.map.has(e)?this.map.delete(e):this.map.size===this.max&&this.map.delete(this.first()),this.map.set(e,t)}has(e){return this.map.has(e)}clear(){this.map.clear()}first(){return this.map.keys().next().value}}const Dv=8;class Mh{constructor(e,t,n,r){this.file=e,this.filePosition=t,this.nValues=n,this.dataType=r,this.cache=void 0}async getValues(e,t){if(!this.cache||e<this.cache.start||t>this.cache.end){const s=Math.max(0,e-1e3),a=Math.min(this.nValues,t+1e3),o=this.filePosition+s*this.dataType,l=a-s,c=l*this.dataType,h=await this.file.read(o,c);if(!h)return;const f=new Xe(new DataView(h)),d=[];for(let u=0;u<l;u++)d[u]=this.dataType===Dv?f.getDouble():f.getFloat();this.cache={start:s,end:a,values:d}}const n=e-this.cache.start,r=n+(t-e);return this.cache.values.slice(n,r)}getKey(){return Mh.getKey(this.type,this.chrIdx,this.unit,this.resolution)}static getNormalizationVectorKey(e,t,n,r){return e+"_"+t+"_"+n+"_"+r}}var yu={"hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2Fcombined.hic":"54386046426,55860","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2Fprimary.hic":"33860030033,37504","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2Freplicate.hic":"30849652794,55832","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2Fmaternal.hic":"1380542661,17185","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2Fpaternal.hic":"1389001777,17185","hicfiles.s3.amazonaws.com%2Fhiseq%2Fimr90%2Fin-situ%2Fcombined.hic":"13433880319,35723","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC001.hic":"3409347253,35975","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC002.hic":"4529947083,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC003.hic":"6894962500,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC004.hic":"3395593338,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC005.hic":"5204128636,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC006.hic":"3278363811,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC007.hic":"3585547340,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC008.hic":"4134197273,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC009.hic":"2851728310,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC010.hic":"1754216102,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC011.hic":"1716829574,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC012.hic":"4367980375,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC013.hic":"2309654671,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC014.hic":"5324950266,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC015.hic":"3132333594,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC016.hic":"3159154704,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC017.hic":"3262554627,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC018.hic":"3014216364,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC019.hic":"5025753246,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC020.hic":"5861584507,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC021.hic":"3542263275,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC022.hic":"5061949378,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC023.hic":"4816423919,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC024.hic":"2683781104,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC025.hic":"6522701781,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC026.hic":"6748846520,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC027.hic":"5642693007,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC028.hic":"2098921691,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC029.hic":"3886454027,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fagar%2FHIC030.hic":"2288984204,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fagar%2FHIC031.hic":"2115342419,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fpellet%2FHIC032.hic":"2063314324,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fsupernatant%2FHIC033.hic":"1933908457,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fdilution%2FHIC034.hic":"13555514595,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fdilution%2FHIC035.hic":"6129650900,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fdilution%2FHIC036.hic":"4307445019,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fdilution%2FHIC037.hic":"9375139867,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fdilution%2Fcombined.hic":"11664249584,33929","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2Fcombined_DpnII.hic":"7003537290,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC038.hic":"2099825544,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC039.hic":"2096900138,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC040.hic":"2593642141,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC041.hic":"2263919098,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC042.hic":"2684774693,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2Fcombined_noXlink.hic":"5574807456,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC043.hic":"2986114347,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC044.hic":"1916378621,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC045.hic":"746463126,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC046.hic":"2338476164,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC047.hic":"1167496250,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC048.hic":"2231690794,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fin-situ%2FHIC049.hic":"2782308678,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fimr90%2Fin-situ%2FHIC050.hic":"3633531346,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fimr90%2Fin-situ%2FHIC051.hic":"4063486444,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fimr90%2Fin-situ%2FHIC052.hic":"929756278,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fimr90%2Fin-situ%2FHIC053.hic":"2489657204,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fimr90%2Fin-situ%2FHIC054.hic":"4036419444,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fimr90%2Fin-situ%2FHIC055.hic":"4284185549,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fimr90%2Fin-situ%2FHIC056.hic":"4410546240,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fimr90%2Fdilution%2FHIC057.hic":"1491998259,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhmec%2Fin-situ%2Fcombined.hic":"7266425111,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhmec%2Fin-situ%2FHIC058.hic":"6532635593,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhmec%2Fin-situ%2FHIC059.hic":"400684530,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhmec%2Fin-situ%2FHIC060.hic":"645352187,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhmec%2Fin-situ%2FHIC061.hic":"736291871,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhmec%2Fin-situ%2FHIC062.hic":"762731037,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhmec%2Fin-situ%2FHIC063.hic":"682917431,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhmec%2Fdilution%2FHIC064.hic":"4550171307,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fnhek%2Fin-situ%2Fcombined.hic":"11897184911,35789","hicfiles.s3.amazonaws.com%2Fhiseq%2Fnhek%2Fin-situ%2FHIC065.hic":"5425943567,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fnhek%2Fin-situ%2FHIC066.hic":"5942869818,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fnhek%2Fin-situ%2FHIC067.hic":"5191049261,35647","hicfiles.s3.amazonaws.com%2Fhiseq%2Fnhek%2Fdilution%2FHIC068.hic":"2713318801,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fk562%2Fin-situ%2Fcombined.hic":"12641555389,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fk562%2Fin-situ%2FHIC069.hic":"5630177461,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fk562%2Fin-situ%2FHIC070.hic":"5926611269,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fk562%2Fin-situ%2FHIC071.hic":"2486191351,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fk562%2Fin-situ%2FHIC072.hic":"2281343366,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fk562%2Fin-situ%2FHIC073.hic":"2173074239,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fk562%2Fin-situ%2FHIC074.hic":"2463700999,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fkbm7%2Fin-situ%2Fcombined.hic":"14661922519,35639","hicfiles.s3.amazonaws.com%2Fhiseq%2Fkbm7%2Fin-situ%2FHIC075.hic":"3685310515,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fkbm7%2Fin-situ%2FHIC076.hic":"5833658487,35891","hicfiles.s3.amazonaws.com%2Fhiseq%2Fkbm7%2Fin-situ%2FHIC077.hic":"2406346486,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fkbm7%2Fin-situ%2FHIC078.hic":"5241454987,35919","hicfiles.s3.amazonaws.com%2Fhiseq%2Fkbm7%2Fin-situ%2FHIC079.hic":"6297234263,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhuvec%2Fin-situ%2Fcombined.hic":"9193858096,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhuvec%2Fin-situ%2FHIC080.hic":"5171405536,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhuvec%2Fin-situ%2FHIC081.hic":"3489767688,35891","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhuvec%2Fin-situ%2FHIC082.hic":"4243339375,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhuvec%2Fdilution%2FHIC083.hic":"1497495406,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhela%2Fin-situ%2Fcombined.hic":"7923332224,35593","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhela%2Fin-situ%2FHIC084.hic":"867699123,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhela%2Fin-situ%2FHIC085.hic":"3669518514,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhela%2Fin-situ%2FHIC086.hic":"5306474712,35595","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhela%2Fin-situ%2FHIC087.hic":"1490963755,36397","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2Fcombined.hic":"8956382853,50248","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC088.hic":"1874185366,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC089.hic":"1301165236,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC090.hic":"1105246282,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC091.hic":"1338325770,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC092.hic":"1307918730,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC093.hic":"755136918,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC094.hic":"1606583694,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC095.hic":"2039711245,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC096.hic":"1909573053,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC097.hic":"1826710712,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC098.hic":"1998793575,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC099.hic":"1007740962,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC100.hic":"736464120,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC101.hic":"980505082,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fin-situ%2FHIC102.hic":"1116083646,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fdilution%2FHIC103.hic":"1096994310,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fch12-lx-b-lymphoblasts%2Fdilution%2FHIC104.hic":"841063882,32102","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC105.hic":"107742864,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC106.hic":"134295912,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC107.hic":"110228014,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC108.hic":"102761401,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC109.hic":"100461491,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC110.hic":"88828472,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC111.hic":"81471064,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC112.hic":"92297035,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC113.hic":"65503916,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC114.hic":"49181188,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC115.hic":"46471102,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC116.hic":"64284432,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC117.hic":"60434076,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC118.hic":"45248563,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC119.hic":"60288782,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC120.hic":"136888414,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC121.hic":"125009003,33681","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC122.hic":"154011688,34127","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC123.hic":"177663372,35293","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC124.hic":"382186226,35245","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC125.hic":"158160717,35271","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC127.hic":"110261177,34659","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC128.hic":"246131875,35509","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC129.hic":"260160119,35667","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC130.hic":"117479562,34681","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC131.hic":"81508929,34673","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC132.hic":"105959102,34895","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC133.hic":"91504812,33451","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC134.hic":"52222546,33737","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC135.hic":"57763085,34159","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC136.hic":"50618489,33731","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC137.hic":"193163606,33363","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC138.hic":"229876152,33777","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC139.hic":"201783666,33571","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC140.hic":"281163862,34125","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC141.hic":"275969727,33935","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC142.hic":"275020431,34125","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC144.hic":"223834810,34177","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC145.hic":"296632653,33937","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC146.hic":"290945216,33961","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC147.hic":"234459964,34231","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC148.hic":"295457850,34039","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC149.hic":"113569632,35695","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC150.hic":"304381897,33963","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC151.hic":"289314545,33805","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC152.hic":"284320182,33803","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC153.hic":"401393947,34659","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC154.hic":"188065488,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC155.hic":"299157119,33967","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC156.hic":"279289244,33787","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC157.hic":"254852119,33917","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC158.hic":"195969660,33477","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC159.hic":"185720388,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC160.hic":"227709279,33599","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC161.hic":"157225076,33209","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC162.hic":"105703444,32033","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC163.hic":"122665658,32121","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC164.hic":"228048231,33761","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC165.hic":"114440819,32011","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC166.hic":"285147558,33891","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC167.hic":"363116754,33943","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC168.hic":"119592158,31937","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC169.hic":"236853872,33785","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC170.hic":"195187639,33395","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC171.hic":"208044058,33309","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC172.hic":"144645916,32877","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC173.hic":"119115941,32203","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC175.hic":"178030481,33525","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC176.hic":"117220136,32169","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC177.hic":"128586196,32659","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC178.hic":"191419141,33629","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC179.hic":"141556748,32959","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC180.hic":"199825102,33185","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC181.hic":"301022688,33783","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC182.hic":"185384453,33205","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC183.hic":"202189264,36367","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC184.hic":"37464475,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC185.hic":"161938278,36099","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC186.hic":"133853166,36179","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC188.hic":"128068030,36237","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC189.hic":"148053886,36177","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC190.hic":"198946958,35803","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC191.hic":"226584564,36063","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC192.hic":"194412797,36341","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC193.hic":"176408194,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC194.hic":"207215649,36055","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC195.hic":"175185530,36315","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC196.hic":"168969337,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC197.hic":"121231252,36339","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC198.hic":"92713752,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC199.hic":"105130500,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC200.hic":"114526350,36479","hicfiles.s3.amazonaws.com%2Fmiseq%2Frh2014%2FHIC201.hic":"122689717,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fhap1%2Fin-situ%2Fcombined.hic":"9614983328,36479","s3.amazonaws.com%2Fhicfiles%2Fexternal%2Fctbp_8_4_17%2Fall_intra_megabase_michrom.hic":"154205644,10960","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2Fdel-Xa-combined.hic":"8843305329,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FdelXa-chrX-diploid.hic":"11173520,1498","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FWT-combined.hic":"13365182403,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FWT-chrX-diploid.hic":"17343459,1498","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FHIC002.hic":"4279298739,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FHIC003.hic":"3027365532,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FHIC004.hic":"2896130835,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FHIC005.hic":"4717830071,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FHIC006.hic":"5066210154,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FHIC007.hic":"3069516128,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2Fdel-Xi-combined.hic":"14551096423,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FdelXi-chrX-diploid.hic":"17362477,1498","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FHIC008.hic":"2572386655,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FHIC009.hic":"2935931663,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FHIC010.hic":"2019085070,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FHIC011.hic":"6087610814,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FHIC012.hic":"2809618194,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Frpe1%2FDarrowHuntley-2015%2FHIC013.hic":"2572386655,36479","hicfiles.s3.amazonaws.com%2Fhiseq%2Fpatski%2FDarrowHuntley-2015%2Fcombined.hic":"6950423609,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fpatski%2FDarrowHuntley-2015%2Fpaternal.hic":"220592749,15691","hicfiles.s3.amazonaws.com%2Fhiseq%2Fpatski%2FDarrowHuntley-2015%2Fmaternal.hic":"323233095,15691","hicfiles.s3.amazonaws.com%2Fhiseq%2Fpatski%2FDarrowHuntley-2015%2FHIC014.hic":"3183235800,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fpatski%2FDarrowHuntley-2015%2FHIC015.hic":"1739539801,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fpatski%2FDarrowHuntley-2015%2FHIC016.hic":"1105912758,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fpatski%2FDarrowHuntley-2015%2FHIC017.hic":"1060773319,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fpatski%2FDarrowHuntley-2015%2FHIC018.hic":"1203679874,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fpatski%2FDarrowHuntley-2015%2FHIC019.hic":"3321955269,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Frhesus%2FDarrowHuntley-2015%2FHIC020.hic":"7108980626,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2Fgm12878%2Fcola%2FDarrowHuntley-2015%2FHIC021.hic":"3906448676,34955","hicfiles.s3.amazonaws.com%2Fhiseq%2Fassembly%2Faedes%2Fcombined.hic":"390780490,2245","hicfiles.s3.amazonaws.com%2Fhiseq%2Fassembly%2Fhs2-hic.hic":"1960284186,33561","hicfiles.s3.amazonaws.com%2Fhiseq%2Fassembly%2FCpipJ3.hic":"766279097,4381","s3.amazonaws.com%2Fhicfiles%2Fexternal%2Fphanstiel%2Fupdated_O%2FSnyder_O.hic":"8046980555,18679","s3.amazonaws.com%2Fhicfiles%2Fexternal%2Fphanstiel%2FA_inter.hic":"10986005145,18679","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Funsynchronized%2Fcombined.hic":"30439217680,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Funsynchronized%2Fcombined.hic":"33255540403,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2Fdeep%2F20min_withdraw_combined.hic":"11078436933,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2Fdeep%2F40min_withdraw_combined.hic":"11031830038,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2Fdeep%2F60min_withdraw_combined.hic":"10312725340,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2Fdeep%2F180min_withdraw_combined.hic":"10038610214,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Funsynchronized%2FHIC001.hic":"8004335785,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Funsynchronized%2FHIC002.hic":"8453215933,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Funsynchronized%2FHIC003.hic":"9118406189,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Funsynchronized%2FHIC004.hic":"5973342894,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Funsynchronized%2FHIC005.hic":"6846576837,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Funsynchronized%2FHIC006.hic":"6075148017,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Funsynchronized%2FHIC007.hic":"8192366992,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Funsynchronized%2FHIC008.hic":"6844159653,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Funsynchronized%2FHIC009.hic":"7282063059,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Funsynchronized%2FHIC010.hic":"10410578833,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Funsynchronized%2FHIC011.hic":"8192366992,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Funsynchronized%2FHIC012.hic":"7223422850,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Funsynchronized%2FHIC013.hic":"7435986997,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Funsynchronized%2FHIC014.hic":"9120113605,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Fsynchronized%2Fcombined.hic":"4170577904,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Fsynchronized%2FHIC015.hic":"1504084990,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Fsynchronized%2FHIC016.hic":"1686244500,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Fsynchronized%2FHIC017.hic":"1804802410,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Funtreated%2Fsynchronized%2FHIC018.hic":"1533942067,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Fsynchronized%2Fcombined.hic":"4572390198,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Fsynchronized%2FHIC019.hic":"1543609666,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Fsynchronized%2FHIC020.hic":"1814133288,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Fsynchronized%2FHIC021.hic":"1942698243,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftreated_6hr%2Fsynchronized%2FHIC022.hic":"1873587413,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2Funtreated%2FRao-2017-HIC049.hic":"405127557,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2Funtreated%2FRao-2017-HIC060.hic":"326681741,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2Funtreated%2FRao-2017-HIC061.hic":"300908673,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_20min%2FRao-2017-HIC050.hic":"481758242,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_20min%2FRao-2017-HIC051.hic":"417577401,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_40min%2FRao-2017-HIC052.hic":"419353227,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_40min%2FRao-2017-HIC053.hic":"411554953,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_60min%2FRao-2017-HIC054.hic":"386655891,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_60min%2FRao-2017-HIC055.hic":"402170701,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_240min%2FRao-2017-HIC057.hic":"735906308,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min%2FRao-2017-HIC058.hic":"443789827,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min%2FRao-2017-HIC059.hic":"491422615,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min%2FRao-2017-HIC062.hic":"320261375,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min%2FRao-2017-HIC063.hic":"306590499,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_20min%2FRao-2017-HIC032S.hic":"367051742,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_20min%2FRao-2017-HIC033S.hic":"344555339,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_40min%2FRao-2017-HIC036S.hic":"349392947,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_40min%2FRao-2017-HIC037S.hic":"317714554,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_60min%2FRao-2017-HIC040S.hic":"266786397,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_60min%2FRao-2017-HIC041S.hic":"279445530,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_180min%2FRao-2017-HIC044S.hic":"898418269,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_180min%2FRao-2017-HIC045S.hic":"961006347,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_360min%2FRao-2017-HIC064.hic":"833576408,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_360min%2FRao-2017-HIC065.hic":"840881418,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_1080min%2FRao-2017-HIC066.hic":"980958864,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_1080min%2FRao-2017-HIC067.hic":"882023129,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_1440min%2FRao-2017-HIC068.hic":"1110292630,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fdegron%2Ftime_course%2FAuxin_treated_360min_withdraw_1440min%2FRao-2017-HIC069.hic":"1001747023,36479","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fexternal%2Frowley_nichols_mol_cell_2017%2FCP190_HiChIP.hic":"144107588,6976","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fexternal%2Frowley_nichols_mol_cell_2017%2FH3K27ac_HiChIP_combined.hic":"43171370,5233","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fexternal%2Frowley_nichols_mol_cell_2017%2FH3K27me3_HiChIP_combined.hic":"42906472,5233","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fexternal%2Frowley_nichols_mol_cell_2017%2FPol2_ChIAPET.hic":"41992430,6976","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fexternal%2Frowley_nichols_mol_cell_2017%2FPol2S2_HiChIP.hic":"145842743,6976","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fexternal%2Frowley_nichols_mol_cell_2017%2FArabidopsis_Wang2015_Liu2016.hic":"1134391078,4984","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fexternal%2Frowley_nichols_mol_cell_2017%2FElegans_Crane2015.hic":"387127568,8758","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fexternal%2Frowley_nichols_mol_cell_2017%2FNcrassa_Galazka2016.hic":"26555511,27725","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fexternal%2Frowley_nichols_mol_cell_2017%2FPfalciparum_trophozoite_Ay2014.hic":"15640893,13948","hicfiles.s3.amazonaws.com%2Fexternal%2Fduan%2FE-Me-A.hic":"6897251,23348","hicfiles.s3.amazonaws.com%2Fexternal%2Fduan%2FE-Me-B.hic":"4959088,23348","hicfiles.s3.amazonaws.com%2Fexternal%2Fduan%2FE-Mp-A.hic":"5232286,23348","hicfiles.s3.amazonaws.com%2Fexternal%2Fduan%2FE-Mp-B.hic":"5105292,23348","hicfiles.s3.amazonaws.com%2Fexternal%2Fduan%2FH-Me-A.hic":"6900072,23348","hicfiles.s3.amazonaws.com%2Fexternal%2Fduan%2FH-Me-B.hic":"8653258,23348","hicfiles.s3.amazonaws.com%2Fexternal%2Fduan%2FH-Mp-A.hic":"7999058,23348","hicfiles.s3.amazonaws.com%2Fexternal%2Fduan%2FH-Mp-B.hic":"8774657,23348","hicfiles.s3.amazonaws.com%2Fexternal%2Fdekker%2F4dn%2Fh1hesc.hic":"23671753603,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fdekker%2F4dn%2Fh1hesc_rep1.hic":"23671754721,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fdekker%2F4dn%2Fh1hesc_rep2.hic":"22269909910,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fdekker%2F4dn%2Fhffc6_rep1.hic":"19016661622,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Flieberman_aiden_van_berkum%2FGM06990_NcoI.hic":"480725203,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Flieberman_aiden_van_berkum%2F302NH.hic":"99948617,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Flieberman_aiden_van_berkum%2FK562.hic":"470263605,36151","hicfiles.s3.amazonaws.com%2Fexternal%2Flieberman_aiden_van_berkum%2FGM06990_HindIII.hic":"293706559,36289","hicfiles.s3.amazonaws.com%2Fexternal%2Flieberman_aiden_van_berkum%2FGM06990_rep_HindIII.hic":"309673862,36087","hicfiles.s3.amazonaws.com%2Fexternal%2Frudan%2Fcanis-lupus-rep1.hic":"1531151371,56905","hicfiles.s3.amazonaws.com%2Fexternal%2Frudan%2Fcanis-lupus-rep2.hic":"2851437676,56905","hicfiles.s3.amazonaws.com%2Fexternal%2Frudan%2Fmouse-rep1.hic":"582052544,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Frudan%2Fmacaque-rep1.hic":"698509182,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Frudan%2Fmacaque-rep2.hic":"461410393,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Frudan%2Frabbit-rep1.hic":"691045338,33561","hicfiles.s3.amazonaws.com%2Fexternal%2Frudan%2Frabbit-rep2.hic":"668888336,33561","hicfiles.s3.amazonaws.com%2Fexternal%2Fsexton%2Fcombined.hic":"50650087,4486","hicfiles.s3.amazonaws.com%2Fexternal%2Fkalhor%2Ftcc-hindiii.hic":"1071142023,16500","hicfiles.s3.amazonaws.com%2Fexternal%2Fkalhor%2Ftcc-mboi.hic":"1508851093,16448","hicfiles.s3.amazonaws.com%2Fexternal%2Fkalhor%2Fnon-tcc-hindiii.hic":"395179229,36093","hicfiles.s3.amazonaws.com%2Fexternal%2Fkalhor%2Ftcc-combined.hic":"1050423847,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fdixon%2Fmm9-hindiii%2Fsplit-read-run.hic":"9599984876,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fdixon%2Fhesc-hindiii.hic":"1952555632,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fdixon%2Fimr90-hindiii.hic":"9691260435,18679","hicfiles.s3.amazonaws.com%2Fexternal%2Fdixon%2Fmm9-cortex.hic":"3712072953,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fzhang%2Fatm-i-scei-chr18.hic":"2083350075,16438","hicfiles.s3.amazonaws.com%2Fexternal%2Fzhang%2Fatm-i-scei-chr2.hic":"3362049644,16360","hicfiles.s3.amazonaws.com%2Fexternal%2Fzhang%2Fatm-i-scei-chr7.hic":"1658399854,16438","hicfiles.s3.amazonaws.com%2Fexternal%2Fzhang%2Fwt-i-scei-chr15.hic":"866691249,16438","hicfiles.s3.amazonaws.com%2Fexternal%2Fzhang%2Fwt-i-scei-chr2.hic":"3304782795,16386","hicfiles.s3.amazonaws.com%2Fexternal%2Fnagano%2Fcell-1.hic":"23673506,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fnagano%2Fcell-2.hic":"26873280,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fnagano%2Fcell-3.hic":"31066362,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fnagano%2Fcell-4.hic":"16807724,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fnagano%2Fcell-5.hic":"28665065,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fnagano%2Fcell-6.hic":"13124158,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fnagano%2Fcell-7.hic":"15118945,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fnagano%2Fcell-8.hic":"68316814,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fnagano%2Fcell-9.hic":"18965101,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fnagano%2Fcell-10.hic":"17020666,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90%2Fcombined.hic":"6526601242,36427","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90%2Frep1.hic":"1861562891,36401","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90%2Frep2.hic":"3061013635,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90%2Frep3.hic":"1564588211,35969","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90%2Frep4.hic":"1255543175,36153","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90%2Frep5.hic":"974683253,36179","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90%2Frep6.hic":"1040805629,36053","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90-tnf-alpha%2Fcombined.hic":"8424080116,36401","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90-tnf-alpha%2Frep1.hic":"2697976702,36295","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90-tnf-alpha%2Frep3.hic":"1718610467,36159","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90-tnf-alpha%2Frep4.hic":"2029519405,36101","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90-tnf-alpha%2Frep5.hic":"985310855,36069","hicfiles.s3.amazonaws.com%2Fexternal%2Fjin%2Fimr90-tnf-alpha%2Frep6.hic":"1418750480,35967","hicfiles.s3.amazonaws.com%2Fexternal%2Fcheng%2Fmhh-call-4-cell-line.hic":"538380253,35351","hicfiles.s3.amazonaws.com%2Fexternal%2Fcheng%2Fprimary-b-all.hic":"773764191,35793","hicfiles.s3.amazonaws.com%2Fexternal%2Fcheng%2Fnormal-b-cell-line.hic":"336271459,35005","hicfiles.s3.amazonaws.com%2Fexternal%2Fcheng%2Frl-cell-line.hic":"484807998,35351","hicfiles.s3.amazonaws.com%2Fexternal%2Fhou%2Fkc167-biorep.hic":"135932435,8758","hicfiles.s3.amazonaws.com%2Fexternal%2Fhou%2Fkc167-techrep1.hic":"160355961,8758","hicfiles.s3.amazonaws.com%2Fexternal%2Fhou%2Fkc167-techrep2.hic":"188809887,8758","hicfiles.s3.amazonaws.com%2Fexternal%2Flin%2Fpre-prob-egs.hic":"2237792858,15483","hicfiles.s3.amazonaws.com%2Fexternal%2Flin%2Fprob-egs.hic":"5744720377,16438","hicfiles.s3.amazonaws.com%2Fexternal%2Flin%2Fprob-fa.hic":"2174866215,16438","hicfiles.s3.amazonaws.com%2Fexternal%2Fli%2Fhct116-rnapii-pilot.hic":"396366166,35999","hicfiles.s3.amazonaws.com%2Fexternal%2Fli%2Fhela-rnapii-pilot.hic":"882516759,35107","hicfiles.s3.amazonaws.com%2Fexternal%2Fli%2Fk562-rnapii-pilot.hic":"1131576189,35969","hicfiles.s3.amazonaws.com%2Fexternal%2Fli%2Fk562-rnapii-saturated.hic":"571583828,36291","hicfiles.s3.amazonaws.com%2Fexternal%2Fli%2Fmcf7-rnapii-saturated.hic":"1282547841,36035","hicfiles.s3.amazonaws.com%2Fexternal%2Fli%2Fnb4-rnapii-pilot.hic":"761614686,34861","hicfiles.s3.amazonaws.com%2Fexternal%2Fjung%2Fmouse_sperm.hic":"1730231642,29184","hicfiles.s3.amazonaws.com%2Fexternal%2Ftang%2Fgm12878.hic":"1953518212,20505","hicfiles.s3.amazonaws.com%2Fexternal%2Frutledge%2FSRR1791299.hic":"5723484,11956","hicfiles.s3.amazonaws.com%2Fexternal%2Frutledge%2FSRR1791297.hic":"16534743,23348","hicfiles.s3.amazonaws.com%2Fexternal%2Fzuin%2Fhek293t-rad21cv-hrv.hic":"5094525579,36289","hicfiles.s3.amazonaws.com%2Fexternal%2Fzuin%2Fhek293t-rad21cv-hrv-rep1.hic":"2574358912,36373","hicfiles.s3.amazonaws.com%2Fexternal%2Fzuin%2Fhek293t-rad21cv-hrv-rep2.hic":"3417099433,36243","hicfiles.s3.amazonaws.com%2Fexternal%2Fzuin%2Fhek293t-rad21cv-tev.hic":"4785157552,36323","hicfiles.s3.amazonaws.com%2Fexternal%2Fzuin%2Fhek293t-rad21cv-tev-rep1.hic":"2648268465,36321","hicfiles.s3.amazonaws.com%2Fexternal%2Fzuin%2Fhek293t-rad21cv-tev-rep2.hic":"2994727980,36107","hicfiles.s3.amazonaws.com%2Fexternal%2Fzuin%2Fhek293t-sirna-ctcf.hic":"5391791815,36063","hicfiles.s3.amazonaws.com%2Fexternal%2Fzuin%2Fhek293t-sirna-ctcf-rep1.hic":"3325842095,36269","hicfiles.s3.amazonaws.com%2Fexternal%2Fzuin%2Fhek293t-sirna-ctcf-rep2.hic":"3096215920,36167","hicfiles.s3.amazonaws.com%2Fexternal%2Fzuin%2Fhek293t-sirna-ctrl.hic":"3830902383,36167","hicfiles.s3.amazonaws.com%2Fexternal%2Fzuin%2Fhek293t-sirna-ctrl-rep1.hic":"1346712252,36079","hicfiles.s3.amazonaws.com%2Fexternal%2Fzuin%2Fhek293t-sirna-ctrl_rep2.hic":"3098067367,36271","hicfiles.s3.amazonaws.com%2Fexternal%2Fay%2Fp-falciparum-3d7-0h-hiseq.hic":"38174042,21889","hicfiles.s3.amazonaws.com%2Fexternal%2Fay%2Fp-falciparum-3d7-18h-hiseq.hic":"26506099,21889","hicfiles.s3.amazonaws.com%2Fexternal%2Fay%2Fp-falciparum-3d7-18h-hiseq-non-crosslinked_control.hic":"3545496,21889","hicfiles.s3.amazonaws.com%2Fexternal%2Fay%2Fp-falciparum-3d7-36h-hiseq.hic":"70754194,21889","hicfiles.s3.amazonaws.com%2Fexternal%2Fnaumova%2Fhelas3%2Fg1mid-r1.hic":"200863476,17185","hicfiles.s3.amazonaws.com%2Fexternal%2Fnaumova%2Fhelas3%2Fm-r1.hic":"249021190,17185","hicfiles.s3.amazonaws.com%2Fexternal%2Fnaumova%2Fhelas3%2Fm-r2.hic":"212341157,17185","hicfiles.s3.amazonaws.com%2Fexternal%2Fnaumova%2Fhelas3ccl2p2%2Fg1-0-25fa.hic":"583572265,17185","hicfiles.s3.amazonaws.com%2Fexternal%2Fnaumova%2Fhelas3ccl2p2%2Fg1-1fa.hic":"354502306,17185","hicfiles.s3.amazonaws.com%2Fexternal%2Fnaumova%2Fhelas3ccl2p2%2Fm-0-25fa.hic":"149308791,17185","hicfiles.s3.amazonaws.com%2Fexternal%2Fnaumova%2Fhelas3ccl2p2%2Fm-98percent.hic":"778175225,17185","hicfiles.s3.amazonaws.com%2Fexternal%2Fnaumova%2Fhelas3ccl2p2%2Fm-1fa.hic":"158091047,17185","hicfiles.s3.amazonaws.com%2Fexternal%2Fnaumova%2Fhff1%2Fcchic-hff1-ns-r1.hic":"801670039,17185","hicfiles.s3.amazonaws.com%2Fexternal%2Fnaumova%2Fhff1%2Fcchic-hff1-m-r1.hic":"875922086,17185","hicfiles.s3.amazonaws.com%2Fexternal%2Fnaumova%2Fk562%2Fm-r1.hic":"130959943,17185","hicfiles.s3.amazonaws.com%2Fexternal%2Fnaumova%2Fk562%2Fm-r2.hic":"237861106,17185","hicfiles.s3.amazonaws.com%2Fexternal%2Fsofueva%2FmAST-WT.hic":"496104039,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fsofueva%2FmAST-WT-adv-cre.hic":"438608517,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fsofueva%2FmAST-floxed-rep1.hic":"446205712,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fsofueva%2FmAST-floxed-rep2.hic":"386354767,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fsofueva%2FmAST-deleted-rep1.hic":"621998722,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fsofueva%2FmAST-deleted-rep2.hic":"583840829,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fsofueva%2FmNSC-floxed-rep1.hic":"801290988,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fsofueva%2FmNSC-floxed-rep2.hic":"819406658,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fsofueva%2FmNSC-deleted-rep1.hic":"792825269,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fsofueva%2FmNSC-deleted-rep2.hic":"746189884,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fsofueva%2FmNSC-WT.hic":"309353372,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fsofueva%2FmNSC-WT-OHT.hic":"274229679,30643","hicfiles.s3.amazonaws.com%2Fexternal%2Fseitan%2FTcell-Rad21KO-R1.hic":"1490362251,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fseitan%2FTcell-Rad21KO-R3.hic":"2403664421,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fseitan%2FTcell-Rad21WT-R1.hic":"1377124538,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fseitan%2FTcell-Rad21WT-R3.hic":"2646201369,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fmoissiard%2Fcrh6-mutant.hic":"105261071,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Fmoissiard%2FWT.hic":"127506388,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Fgrob%2FCol.hic":"153638500,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Fgrob%2Fcrwn1.hic":"211213220,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Fgrob%2Fcrwn4.hic":"134236837,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Fxie%2Fprimary.hic":"92936173,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Ffeng%2F6wt-control6wt337.hic":"318737891,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Ffeng%2F6wt-control6wt67.hic":"348123956,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Ffeng%2F6wt337.hic":"251107279,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Ffeng%2F6wt67.hic":"351840994,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Ffeng%2FCol0.hic":"345969497,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Ffeng%2Fclf28-swn7.hic":"299585025,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Ffeng%2Fcmt3-11.hic":"253427706,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Ffeng%2Fddm1-2.hic":"303626924,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Ffeng%2Fmet1-3.hic":"347697973,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Ffeng%2Fsuvh4-suvh5-suvh6.hic":"263122019,10217","hicfiles.s3.amazonaws.com%2Fexternal%2Fma%2FDNase-HiC-WG-K562.hic":"892955840,18679","hicfiles.s3.amazonaws.com%2Fexternal%2Fma%2FDNaseHiC-WG-H1.hic":"696922695,18679","hicfiles.s3.amazonaws.com%2Fexternal%2Fma%2FtargetedDNaseHiC-lincRNA-K562-rep1.hic":"341917716,18679","hicfiles.s3.amazonaws.com%2Fexternal%2Fma%2FtargeredDNaseHiC-lincRNA-K562-rep2.hic":"214841185,18679","hicfiles.s3.amazonaws.com%2Fexternal%2Fma%2FtargetedDNaseHiC-lincRNA-H1-rep1.hic":"616326137,18679","hicfiles.s3.amazonaws.com%2Fexternal%2Fma%2FtargetedDNaseHiC-lincRNA-H1-rep2.hic":"579654013,18679","hicfiles.s3.amazonaws.com%2Fexternal%2Fma%2FtargetedDNaseHiC-pe-H1-rep1.hic":"519810544,18679","hicfiles.s3.amazonaws.com%2Fexternal%2Fma%2FtargetedDNaseHiC-pe-K562-rep1.hic":"199553123,18679","hicfiles.s3.amazonaws.com%2Fexternal%2Frowley%2FKc167_DpnII.hic":"1319373594,6976","hicfiles.s3.amazonaws.com%2Fexternal%2Frowley%2FKc167_HinfI.hic":"1465493873,6976","hicfiles.s3.amazonaws.com%2Fexternal%2Frowley%2FKc167_DpnII_HinfI_combo.hic":"753062558,5814","hicfiles.s3.amazonaws.com%2Fexternal%2Fbarutcu%2FMCF-10A.hic":"2784956115,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fbarutcu%2FMCF-7.hic":"2700457411,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fbatullin%2Fsperm.hic":"501052169,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fminajigi%2FWT_hiC_rep1.hic":"1450697530,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fminajigi%2FWT_hiC_rep2.hic":"1189371558,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fminajigi%2Fcombined.hic":"2262007875,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fminajigi%2Finactive.hic":"4444564,751","hicfiles.s3.amazonaws.com%2Fexternal%2Fminajigi%2Factive.hic":"3993495,751","hicfiles.s3.amazonaws.com%2Fexternal%2Fdeng%2Fpatski_rep1.hic":"1650838357,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fdeng%2Fpatski_rep2.hic":"1258038606,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fdeng%2Fpatski.hic":"499827296,16438","hicfiles.s3.amazonaws.com%2Fexternal%2Fdeng%2Fpatski_active.hic":"79175714,15691","hicfiles.s3.amazonaws.com%2Fexternal%2Fdeng%2Fpatski_inactive.hic":"98947881,15691","hicfiles.s3.amazonaws.com%2Fexternal%2Fdeng%2Fbrain_dnase.hic":"4298088401,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fdeng%2Fbrain_in_situ_dnase.hic":"609321852,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fdeng%2Fbrain.hic":"1028196506,16438","hicfiles.s3.amazonaws.com%2Fexternal%2Fdeng%2Fbrain_active.hic":"79175714,15691","hicfiles.s3.amazonaws.com%2Fexternal%2Fdeng%2Fbrain_inactive.hic":"98947881,15691","hicfiles.s3.amazonaws.com%2Fexternal%2Fle%2FBglII_rep1.hic":"1283306,1463","hicfiles.s3.amazonaws.com%2Fexternal%2Fle%2FBglII_rep2.hic":"1263227,1463","hicfiles.s3.amazonaws.com%2Fexternal%2Fle%2FNcoI_rep1.hic":"4380906,1463","hicfiles.s3.amazonaws.com%2Fexternal%2Feagen%2FGSE89112_Kc167combined.hic":"1829549643,25624","hicfiles.s3.amazonaws.com%2Fexternal%2Feagen%2FGSE89112_Kc167combined_randomized.hic":"1859742654,25624","hicfiles.s3.amazonaws.com%2Fexternal%2Fmumbach%2FGSE80820_HiChIP_GM_cohesin.hic":"1231264781,17932","hicfiles.s3.amazonaws.com%2Fexternal%2Fmumbach%2FGSE80820_HiChIP_mES_cohesin_all.hic":"1152008628,16438","hicfiles.s3.amazonaws.com%2Fexternal%2Fmumbach%2FGSE80820_HiChIP_mES_Oct4.hic":"912828146,16438","s3.amazonaws.com%2Fhicfiles%2Fexternal%2Fwapl_hic%2FSCC4KO.hic":"1767906138,18679","s3.amazonaws.com%2Fhicfiles%2Fexternal%2Fwapl_hic%2FDKO.hic":"1487228787,18679","s3.amazonaws.com%2Fhicfiles%2Fexternal%2Fwapl_hic%2FWaplKO_1.14.hic":"1189751862,18679","s3.amazonaws.com%2Fhicfiles%2Fexternal%2Fwapl_hic%2FWaplKO_3.3.hic":"1155057696,18679","s3.amazonaws.com%2Fhicfiles%2Fexternal%2Fwapl_hic%2FWT.hic":"1522401568,18679","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fskfuwi4fnsjkdf9jekrw2%2Fmega_Liverpool%2Fmega.hic":"2612171975,4381","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fskfuwi4fnsjkdf9jekrw2%2FHIC2836_Liverpool1%2FLiverpool1.hic":"191729195,2245","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fskfuwi4fnsjkdf9jekrw2%2FHIC2861_Liverpool2%2FLiverpool2.hic":"1637096030,4381","s3.amazonaws.com%2Fhicfiles%2Fhiseq%2Fskfuwi4fnsjkdf9jekrw2%2FHIC2862_Liverpool3%2FLiverpool3.hic":"1160045602,4381","s3.amazonaws.com%2Fhicfiles%2Fexternal%2Fgoodell%2FHSPC.hic":"11857786247,36479","s3.amazonaws.com%2Fhicfiles%2Fexternal%2Fgoodell%2FHSPC_CanyonDel.hic":"8139168836,36479","s3.amazonaws.com%2Fhicfiles%2Fexternal%2Fgoodell%2Ftcell.hic":"9871547081,36479","s3.amazonaws.com%2Fhicfiles%2Fexternal%2Fgoodell%2Fep.hic":"17479335373,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fnagano%2FTh1_ensemble.hic":"1690592868,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fbonev%2FES_mapq30.hic":"32930498831,32386","hicfiles.s3.amazonaws.com%2Fexternal%2Fbonev%2FNPC_mapq30.hic":"55053730986,32386","hicfiles.s3.amazonaws.com%2Fexternal%2Fbonev%2FCN_mapq30.hic":"53138031154,32386","hicfiles.s3.amazonaws.com%2Fhiseq%2FKieffer-Kwon_et_al_2017%2FMain_maps%2FKieffer-Kwon-2017-activated_B_cells_72_hours_WT.hic":"16492991184,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2FKieffer-Kwon_et_al_2017%2FMain_maps%2FKieffer-Kwon-2017-resting_B_cells_WT.hic":"23057795398,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2FKieffer-Kwon_et_al_2017%2FMain_maps%2FKieffer-Kwon-2017-activated_B_cells_24_hours_MYC_KO.hic":"21245554876,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2FKieffer-Kwon_et_al_2017%2FMain_maps%2FKieffer-Kwon-2017-resting_B_cells_TSA.hic":"13933346059,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2FKieffer-Kwon_et_al_2017%2FMain_maps%2FKieffer-Kwon-2017-activated_B_cells_24_hours_oligomycin.hic":"21902506832,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2FKieffer-Kwon_et_al_2017%2FMain_maps%2FKieffer-Kwon-2017-mES_WT.hic":"9451969795,32102","hicfiles.s3.amazonaws.com%2Fhiseq%2FVian_et_al_2018%2FMain_maps%2FVian-2018-activated_B_cells_24_hours_WT.hic":"3600188564,16438","hicfiles.s3.amazonaws.com%2Fhiseq%2FVian_et_al_2018%2FMain_maps%2FVian-2018-activated_B_cells_30_hours_WT.hic":"1309503359,16438","hicfiles.s3.amazonaws.com%2Fhiseq%2FVian_et_al_2018%2FMain_maps%2FVian-2018-activated_B_cells_30_hours_HU_treated.hic":"1477252396,16438","hicfiles.s3.amazonaws.com%2Fhiseq%2FVian_et_al_2018%2FMain_maps%2FVian-2018-activated_B_cells_24_hours_flavopiridol.hic":"15711773490,32102","hicfiles.s3.amazonaws.com%2Fexternal%2Fpgp%2FPGP1F_mega_090118%2FPGP1F_mega_090118_30.hic":"24786676166,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fpgp%2FHIC7145%2FHIC7145_30.hic":"4554644616,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fpgp%2FHIC7146%2FHIC7146_30.hic":"4174848944,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fpgp%2FHIC7147%2FHIC7147_30.hic":"5062229182,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fpgp%2FHIC7862%2FHIC7862_30.hic":"4520990620,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fpgp%2FHIC7863%2FHIC7863_30.hic":"4330354773,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fpgp%2FHIC7864%2FHIC7864_30.hic":"5880640268,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fpgp%2FHIC7865%2FHIC7865_30.hic":"4431632469,36479","hicfiles.s3.amazonaws.com%2Fexternal%2Fpgp%2FHIC7866%2FHIC7866_30.hic":"4686000222,36479","encode-public.s3.amazonaws.com%2F2018%2F10%2F19%2Fb122542b-306c-4631-bdc3-2e155e89af55%2FENCFF718AWL.hic":"39544267907,58932","encode-public.s3.amazonaws.com%2F2019%2F02%2F15%2F8e787cd8-e388-4bc2-a236-7a5e6f39e0c0%2FENCFF999YXX.hic":"9255069996,56883","encode-public.s3.amazonaws.com%2F2019%2F02%2F08%2Ffc1d9d5d-8fa0-4e29-9080-3da674d9490d%2FENCFF543USQ.hic":"5005263062,36479","s3.us-east-1.wasabisys.com%2Fhicfiles%2Finternal%2FLCL_mega_42B_500bp_30.hic":"106482584851,22829","www.encodeproject.org%2Ffiles%2FENCFF925QIF%2F%40%40download%2FENCFF925QIF.hic":"51712684396,54779","www.encodeproject.org%2Ffiles%2FENCFF259YUS%2F%40%40download%2FENCFF259YUS.hic":"24640030444,54779","www.encodeproject.org%2Ffiles%2FENCFF783KQI%2F%40%40download%2FENCFF783KQI.hic":"27209249856,54779","www.encodeproject.org%2Ffiles%2FENCFF318JAP%2F%40%40download%2FENCFF318JAP.hic":"28636979242,54779","www.encodeproject.org%2Ffiles%2FENCFF512PQA%2F%40%40download%2FENCFF512PQA.hic":"28124104361,54779","www.encodeproject.org%2Ffiles%2FENCFF591MHA%2F%40%40download%2FENCFF591MHA.hic":"37373387202,54779","www.encodeproject.org%2Ffiles%2FENCFF197OWW%2F%40%40download%2FENCFF197OWW.hic":"41826180893,54779","www.encodeproject.org%2Ffiles%2FENCFF317OIA%2F%40%40download%2FENCFF317OIA.hic":"34741636038,54779","www.encodeproject.org%2Ffiles%2FENCFF522YLZ%2F%40%40download%2FENCFF522YLZ.hic":"24064692329,54779","www.encodeproject.org%2Ffiles%2FENCFF420JTA%2F%40%40download%2FENCFF420JTA.hic":"21202405177,54779","www.encodeproject.org%2Ffiles%2FENCFF871ZDJ%2F%40%40download%2FENCFF871ZDJ.hic":"10124815680,18679","www.encodeproject.org%2Ffiles%2FENCFF349RZY%2F%40%40download%2FENCFF349RZY.hic":"4446702705,36479","www.encodeproject.org%2Ffiles%2FENCFF738YON%2F%40%40download%2FENCFF738YON.hic":"3338049584,35947","www.encodeproject.org%2Ffiles%2FENCFF406KJN%2F%40%40download%2FENCFF406KJN.hic":"4132875306,36479","www.encodeproject.org%2Ffiles%2FENCFF081NPN%2F%40%40download%2FENCFF081NPN.hic":"34495587443,54779","www.encodeproject.org%2Ffiles%2FENCFF946RZW%2F%40%40download%2FENCFF946RZW.hic":"34571955193,54779","www.encodeproject.org%2Ffiles%2FENCFF602CHT%2F%40%40download%2FENCFF602CHT.hic":"30674798032,54779","www.encodeproject.org%2Ffiles%2FENCFF150DKS%2F%40%40download%2FENCFF150DKS.hic":"12618769864,36479","www.encodeproject.org%2Ffiles%2FENCFF614IPZ%2F%40%40download%2FENCFF614IPZ.hic":"42450060331,54779","www.encodeproject.org%2Ffiles%2FENCFF571ZQR%2F%40%40download%2FENCFF571ZQR.hic":"15230068871,47429","www.encodeproject.org%2Ffiles%2FENCFF705MKK%2F%40%40download%2FENCFF705MKK.hic":"38686554702,54779","www.encodeproject.org%2Ffiles%2FENCFF658KTB%2F%40%40download%2FENCFF658KTB.hic":"13195884405,47429","www.encodeproject.org%2Ffiles%2FENCFF435JYN%2F%40%40download%2FENCFF435JYN.hic":"17192139674,54779","www.encodeproject.org%2Ffiles%2FENCFF016JKX%2F%40%40download%2FENCFF016JKX.hic":"37266736642,54779","www.encodeproject.org%2Ffiles%2FENCFF294GFP%2F%40%40download%2FENCFF294GFP.hic":"36389843399,54779","www.encodeproject.org%2Ffiles%2FENCFF700CYI%2F%40%40download%2FENCFF700CYI.hic":"60482012152,54779","www.encodeproject.org%2Ffiles%2FENCFF962EDB%2F%40%40download%2FENCFF962EDB.hic":"39394328182,54779","www.encodeproject.org%2Ffiles%2FENCFF467OGP%2F%40%40download%2FENCFF467OGP.hic":"35572788855,54779","www.encodeproject.org%2Ffiles%2FENCFF556RLR%2F%40%40download%2FENCFF556RLR.hic":"34826921187,54779","www.encodeproject.org%2Ffiles%2FENCFF309UNV%2F%40%40download%2FENCFF309UNV.hic":"48510618174,54779","www.encodeproject.org%2Ffiles%2FENCFF653HCO%2F%40%40download%2FENCFF653HCO.hic":"41079007620,54779","www.encodeproject.org%2Ffiles%2FENCFF120DSV%2F%40%40download%2FENCFF120DSV.hic":"12790195576,47429","www.encodeproject.org%2Ffiles%2FENCFF284OEA%2F%40%40download%2FENCFF284OEA.hic":"46007570339,54779","www.encodeproject.org%2Ffiles%2FENCFF035BLF%2F%40%40download%2FENCFF035BLF.hic":"63868871985,54779","www.encodeproject.org%2Ffiles%2FENCFF094KKX%2F%40%40download%2FENCFF094KKX.hic":"42151419971,54779","www.encodeproject.org%2Ffiles%2FENCFF965BPU%2F%40%40download%2FENCFF965BPU.hic":"42717376107,54779","www.encodeproject.org%2Ffiles%2FENCFF842DUO%2F%40%40download%2FENCFF842DUO.hic":"39553892515,54779","www.encodeproject.org%2Ffiles%2FENCFF417GBZ%2F%40%40download%2FENCFF417GBZ.hic":"45544785452,54779","www.encodeproject.org%2Ffiles%2FENCFF499BVX%2F%40%40download%2FENCFF499BVX.hic":"40900674170,54779","www.encodeproject.org%2Ffiles%2FENCFF136XCV%2F%40%40download%2FENCFF136XCV.hic":"47700392974,54779","www.encodeproject.org%2Ffiles%2FENCFF224HKR%2F%40%40download%2FENCFF224HKR.hic":"40426005932,54779","www.encodeproject.org%2Ffiles%2FENCFF711XSR%2F%40%40download%2FENCFF711XSR.hic":"41434581949,54779","www.encodeproject.org%2Ffiles%2FENCFF660JWA%2F%40%40download%2FENCFF660JWA.hic":"54201632697,54779","www.encodeproject.org%2Ffiles%2FENCFF081PMO%2F%40%40download%2FENCFF081PMO.hic":"53428285130,54779","www.encodeproject.org%2Ffiles%2FENCFF799QGA%2F%40%40download%2FENCFF799QGA.hic":"1228682189,36479","www.encodeproject.org%2Ffiles%2FENCFF473CAA%2F%40%40download%2FENCFF473CAA.hic":"1077514950,36479","www.encodeproject.org%2Ffiles%2FENCFF663FRL%2F%40%40download%2FENCFF663FRL.hic":"39843938245,54779","www.encodeproject.org%2Ffiles%2FENCFF341WOY%2F%40%40download%2FENCFF341WOY.hic":"34792598619,54779","www.encodeproject.org%2Ffiles%2FENCFF515ZBF%2F%40%40download%2FENCFF515ZBF.hic":"41779230923,54779","www.encodeproject.org%2Ffiles%2FENCFF545GBW%2F%40%40download%2FENCFF545GBW.hic":"38351980358,54779","www.encodeproject.org%2Ffiles%2FENCFF252ANV%2F%40%40download%2FENCFF252ANV.hic":"37668839771,54779","www.encodeproject.org%2Ffiles%2FENCFF912NDK%2F%40%40download%2FENCFF912NDK.hic":"21196851956,54779","www.encodeproject.org%2Ffiles%2FENCFF683PLM%2F%40%40download%2FENCFF683PLM.hic":"21849338763,54779","www.encodeproject.org%2Ffiles%2FENCFF355NFJ%2F%40%40download%2FENCFF355NFJ.hic":"47880627268,54779","www.encodeproject.org%2Ffiles%2FENCFF507WEW%2F%40%40download%2FENCFF507WEW.hic":"35777782924,54779","www.encodeproject.org%2Ffiles%2FENCFF241MSL%2F%40%40download%2FENCFF241MSL.hic":"22507408288,54779","www.encodeproject.org%2Ffiles%2FENCFF135MUT%2F%40%40download%2FENCFF135MUT.hic":"24168734040,54779","www.encodeproject.org%2Ffiles%2FENCFF459FRB%2F%40%40download%2FENCFF459FRB.hic":"37166770103,54779","www.encodeproject.org%2Ffiles%2FENCFF705YZH%2F%40%40download%2FENCFF705YZH.hic":"44679182442,54779","www.encodeproject.org%2Ffiles%2FENCFF395INO%2F%40%40download%2FENCFF395INO.hic":"56727346538,54779","www.encodeproject.org%2Ffiles%2FENCFF736ITL%2F%40%40download%2FENCFF736ITL.hic":"49036286185,54779","www.encodeproject.org%2Ffiles%2FENCFF546TZN%2F%40%40download%2FENCFF546TZN.hic":"33195126348,54779","www.encodeproject.org%2Ffiles%2FENCFF706SFK%2F%40%40download%2FENCFF706SFK.hic":"3271831702,36479","www.encodeproject.org%2Ffiles%2FENCFF922ERE%2F%40%40download%2FENCFF922ERE.hic":"12476647122,36479","www.encodeproject.org%2Ffiles%2FENCFF876OWE%2F%40%40download%2FENCFF876OWE.hic":"1538692704,47429","www.encodeproject.org%2Ffiles%2FENCFF227XJZ%2F%40%40download%2FENCFF227XJZ.hic":"1925617685,36479","www.encodeproject.org%2Ffiles%2FENCFF053BXY%2F%40%40download%2FENCFF053BXY.hic":"1032237652,36479","www.encodeproject.org%2Ffiles%2FENCFF014VMM%2F%40%40download%2FENCFF014VMM.hic":"1564021703,36479","www.encodeproject.org%2Ffiles%2FENCFF563XES%2F%40%40download%2FENCFF563XES.hic":"1489180508,36479","www.encodeproject.org%2Ffiles%2FENCFF482LGO%2F%40%40download%2FENCFF482LGO.hic":"1208778887,36479","www.encodeproject.org%2Ffiles%2FENCFF216QQM%2F%40%40download%2FENCFF216QQM.hic":"6293163571,47429","www.encodeproject.org%2Ffiles%2FENCFF256UOW%2F%40%40download%2FENCFF256UOW.hic":"6293163571,47429","www.encodeproject.org%2Ffiles%2FENCFF791UZC%2F%40%40download%2FENCFF791UZC.hic":"37029615181,54779","www.encodeproject.org%2Ffiles%2FENCFF911AHQ%2F%40%40download%2FENCFF911AHQ.hic":"34246649165,54779","www.encodeproject.org%2Ffiles%2FENCFF491AOR%2F%40%40download%2FENCFF491AOR.hic":"558663570,36479","www.encodeproject.org%2Ffiles%2FENCFF307PDL%2F%40%40download%2FENCFF307PDL.hic":"525321519,36479","www.encodeproject.org%2Ffiles%2FENCFF773ITV%2F%40%40download%2FENCFF773ITV.hic":"295464771,36479","www.encodeproject.org%2Ffiles%2FENCFF198SSL%2F%40%40download%2FENCFF198SSL.hic":"500142476,36479","www.encodeproject.org%2Ffiles%2FENCFF251UEF%2F%40%40download%2FENCFF251UEF.hic":"567443575,36479","www.encodeproject.org%2Ffiles%2FENCFF942LTN%2F%40%40download%2FENCFF942LTN.hic":"4430960222,36479","www.encodeproject.org%2Ffiles%2FENCFF543USQ%2F%40%40download%2FENCFF543USQ.hic":"5005263062,36479","www.encodeproject.org%2Ffiles%2FENCFF434XQU%2F%40%40download%2FENCFF434XQU.hic":"25506511674,54779","www.encodeproject.org%2Ffiles%2FENCFF318GOM%2F%40%40download%2FENCFF318GOM.hic":"44750824314,54779","www.encodeproject.org%2Ffiles%2FENCFF004TKY%2F%40%40download%2FENCFF004TKY.hic":"20705661833,54779","www.encodeproject.org%2Ffiles%2FENCFF493YNC%2F%40%40download%2FENCFF493YNC.hic":"53407154984,54779","www.encodeproject.org%2Ffiles%2FENCFF334XXU%2F%40%40download%2FENCFF334XXU.hic":"14341194962,47429","www.encodeproject.org%2Ffiles%2FENCFF569RJM%2F%40%40download%2FENCFF569RJM.hic":"1922066634,36479","www.encodeproject.org%2Ffiles%2FENCFF076LWH%2F%40%40download%2FENCFF076LWH.hic":"39406255845,54779","www.encodeproject.org%2Ffiles%2FENCFF977XWK%2F%40%40download%2FENCFF977XWK.hic":"20563512962,54779","www.encodeproject.org%2Ffiles%2FENCFF127TPS%2F%40%40download%2FENCFF127TPS.hic":"21032070512,54779","www.encodeproject.org%2Ffiles%2FENCFF480KLP%2F%40%40download%2FENCFF480KLP.hic":"33115569647,54779","www.encodeproject.org%2Ffiles%2FENCFF281ILS%2F%40%40download%2FENCFF281ILS.hic":"28236353584,54779","www.encodeproject.org%2Ffiles%2FENCFF129LMU%2F%40%40download%2FENCFF129LMU.hic":"35247096013,54779","www.encodeproject.org%2Ffiles%2FENCFF759YCW%2F%40%40download%2FENCFF759YCW.hic":"16058537743,32102","www.encodeproject.org%2Ffiles%2FENCFF045YOM%2F%40%40download%2FENCFF045YOM.hic":"19775445828,32102","www.encodeproject.org%2Ffiles%2FENCFF013TGD%2F%40%40download%2FENCFF013TGD.hic":"4208420532,36479","www.encodeproject.org%2Ffiles%2FENCFF929RPW%2F%40%40download%2FENCFF929RPW.hic":"1974260276,36479","www.encodeproject.org%2Ffiles%2FENCFF996XEO%2F%40%40download%2FENCFF996XEO.hic":"2072918865,36479","www.encodeproject.org%2Ffiles%2FENCFF097SKJ%2F%40%40download%2FENCFF097SKJ.hic":"1983524001,36479","www.encodeproject.org%2Ffiles%2FENCFF464KRA%2F%40%40download%2FENCFF464KRA.hic":"1957300131,36479","www.encodeproject.org%2Ffiles%2FENCFF406HHC%2F%40%40download%2FENCFF406HHC.hic":"3854527235,36479","www.encodeproject.org%2Ffiles%2FENCFF080DPJ%2F%40%40download%2FENCFF080DPJ.hic":"19953768024,47429","www.encodeproject.org%2Ffiles%2FENCFF621AIY%2F%40%40download%2FENCFF621AIY.hic":"26781700010,54779","www.encodeproject.org%2Ffiles%2FENCFF366ERB%2F%40%40download%2FENCFF366ERB.hic":"1049184239,36479","www.encodeproject.org%2Ffiles%2FENCFF997RGL%2F%40%40download%2FENCFF997RGL.hic":"2521167549,36479","www.encodeproject.org%2Ffiles%2FENCFF029MPB%2F%40%40download%2FENCFF029MPB.hic":"1854711185,36479","www.encodeproject.org%2Ffiles%2FENCFF043EEE%2F%40%40download%2FENCFF043EEE.hic":"2924133032,36479","www.encodeproject.org%2Ffiles%2FENCFF920CJR%2F%40%40download%2FENCFF920CJR.hic":"3011577886,36479","www.encodeproject.org%2Ffiles%2FENCFF928NJV%2F%40%40download%2FENCFF928NJV.hic":"2778936244,36479","www.encodeproject.org%2Ffiles%2FENCFF894GLR%2F%40%40download%2FENCFF894GLR.hic":"2831733099,36479","www.encodeproject.org%2Ffiles%2FENCFF303PCK%2F%40%40download%2FENCFF303PCK.hic":"688704435,36479","www.encodeproject.org%2Ffiles%2FENCFF999YXX%2F%40%40download%2FENCFF999YXX.hic":"9255069996,56883","www.encodeproject.org%2Ffiles%2FENCFF685BLG%2F%40%40download%2FENCFF685BLG.hic":"16797022992,47429","www.encodeproject.org%2Ffiles%2FENCFF188SSH%2F%40%40download%2FENCFF188SSH.hic":"16797023050,47429","www.encodeproject.org%2Ffiles%2FENCFF465ESX%2F%40%40download%2FENCFF465ESX.hic":"13489465953,32102","www.encodeproject.org%2Ffiles%2FENCFF493SFI%2F%40%40download%2FENCFF493SFI.hic":"30033046818,54779","www.encodeproject.org%2Ffiles%2FENCFF235LCO%2F%40%40download%2FENCFF235LCO.hic":"38572174589,54779","www.encodeproject.org%2Ffiles%2FENCFF625VNK%2F%40%40download%2FENCFF625VNK.hic":"45202258438,54779","www.encodeproject.org%2Ffiles%2FENCFF304HMS%2F%40%40download%2FENCFF304HMS.hic":"36994445315,54779","www.encodeproject.org%2Ffiles%2FENCFF605CEN%2F%40%40download%2FENCFF605CEN.hic":"40358346301,54779","www.encodeproject.org%2Ffiles%2FENCFF086ORS%2F%40%40download%2FENCFF086ORS.hic":"22650781304,54779","www.encodeproject.org%2Ffiles%2FENCFF237UKR%2F%40%40download%2FENCFF237UKR.hic":"41516707246,54779","www.encodeproject.org%2Ffiles%2FENCFF004YZQ%2F%40%40download%2FENCFF004YZQ.hic":"71900665326,54779","www.encodeproject.org%2Ffiles%2FENCFF104THR%2F%40%40download%2FENCFF104THR.hic":"15172410632,54779","www.encodeproject.org%2Ffiles%2FENCFF807IRK%2F%40%40download%2FENCFF807IRK.hic":"17346637451,54779","www.encodeproject.org%2Ffiles%2FENCFF193CQL%2F%40%40download%2FENCFF193CQL.hic":"55726903245,54779","www.encodeproject.org%2Ffiles%2FENCFF700DEX%2F%40%40download%2FENCFF700DEX.hic":"20231399798,54779","www.encodeproject.org%2Ffiles%2FENCFF234MDO%2F%40%40download%2FENCFF234MDO.hic":"24635312640,54779","www.encodeproject.org%2Ffiles%2FENCFF181ROW%2F%40%40download%2FENCFF181ROW.hic":"26883606497,54779","www.encodeproject.org%2Ffiles%2FENCFF896OFN%2F%40%40download%2FENCFF896OFN.hic":"36952196833,54779","www.encodeproject.org%2Ffiles%2FENCFF573OPJ%2F%40%40download%2FENCFF573OPJ.hic":"36685546919,54779","www.encodeproject.org%2Ffiles%2FENCFF028RXH%2F%40%40download%2FENCFF028RXH.hic":"31053919206,54779","www.encodeproject.org%2Ffiles%2FENCFF156GGD%2F%40%40download%2FENCFF156GGD.hic":"35284134289,54779","www.encodeproject.org%2Ffiles%2FENCFF496GEU%2F%40%40download%2FENCFF496GEU.hic":"44659660933,54779","www.encodeproject.org%2Ffiles%2FENCFF945TUH%2F%40%40download%2FENCFF945TUH.hic":"3898570191,35639","www.encodeproject.org%2Ffiles%2FENCFF698KFV%2F%40%40download%2FENCFF698KFV.hic":"4427896684,35751","www.encodeproject.org%2Ffiles%2FENCFF239BHZ%2F%40%40download%2FENCFF239BHZ.hic":"1718552021,36479","www.encodeproject.org%2Ffiles%2FENCFF277LAN%2F%40%40download%2FENCFF277LAN.hic":"4542391336,36479","www.encodeproject.org%2Ffiles%2FENCFF397CMD%2F%40%40download%2FENCFF397CMD.hic":"2832016430,36479","www.encodeproject.org%2Ffiles%2FENCFF778OYA%2F%40%40download%2FENCFF778OYA.hic":"14067187484,47429","www.encodeproject.org%2Ffiles%2FENCFF775VSU%2F%40%40download%2FENCFF775VSU.hic":"14067187484,47429","www.encodeproject.org%2Ffiles%2FENCFF812THZ%2F%40%40download%2FENCFF812THZ.hic":"9667720429,36479","www.encodeproject.org%2Ffiles%2FENCFF777KBU%2F%40%40download%2FENCFF777KBU.hic":"5058284320,36479","www.encodeproject.org%2Ffiles%2FENCFF688KOY%2F%40%40download%2FENCFF688KOY.hic":"4198695833,36479","www.encodeproject.org%2Ffiles%2FENCFF223UBX%2F%40%40download%2FENCFF223UBX.hic":"1206064037,36479","www.encodeproject.org%2Ffiles%2FENCFF273XBU%2F%40%40download%2FENCFF273XBU.hic":"44085607579,54779","www.encodeproject.org%2Ffiles%2FENCFF952JZV%2F%40%40download%2FENCFF952JZV.hic":"44728845246,54779","www.encodeproject.org%2Ffiles%2FENCFF643NDM%2F%40%40download%2FENCFF643NDM.hic":"35877886780,54779","www.encodeproject.org%2Ffiles%2FENCFF586MQY%2F%40%40download%2FENCFF586MQY.hic":"71158037547,54779","www.encodeproject.org%2Ffiles%2FENCFF251VFA%2F%40%40download%2FENCFF251VFA.hic":"40089479399,54779","www.encodeproject.org%2Ffiles%2FENCFF033WGK%2F%40%40download%2FENCFF033WGK.hic":"30802023728,54779","www.encodeproject.org%2Ffiles%2FENCFF649OHR%2F%40%40download%2FENCFF649OHR.hic":"28203184265,54779","www.encodeproject.org%2Ffiles%2FENCFF782WVZ%2F%40%40download%2FENCFF782WVZ.hic":"37248221674,54779","www.encodeproject.org%2Ffiles%2FENCFF579CAR%2F%40%40download%2FENCFF579CAR.hic":"39662025395,54779","www.encodeproject.org%2Ffiles%2FENCFF514XWQ%2F%40%40download%2FENCFF514XWQ.hic":"1319613701,36479","www.encodeproject.org%2Ffiles%2FENCFF666USK%2F%40%40download%2FENCFF666USK.hic":"15051670107,32102","www.encodeproject.org%2Ffiles%2FENCFF047SDP%2F%40%40download%2FENCFF047SDP.hic":"1357076705,16438","www.encodeproject.org%2Ffiles%2FENCFF584LEP%2F%40%40download%2FENCFF584LEP.hic":"9314176858,36479","www.encodeproject.org%2Ffiles%2FENCFF671SOE%2F%40%40download%2FENCFF671SOE.hic":"3273732256,16438","www.encodeproject.org%2Ffiles%2FENCFF702LAP%2F%40%40download%2FENCFF702LAP.hic":"1800427500,31682","www.encodeproject.org%2Ffiles%2FENCFF339PON%2F%40%40download%2FENCFF339PON.hic":"5394351199,31514","www.encodeproject.org%2Ffiles%2FENCFF741QPR%2F%40%40download%2FENCFF741QPR.hic":"4271510019,30139","www.encodeproject.org%2Ffiles%2FENCFF103ANX%2F%40%40download%2FENCFF103ANX.hic":"4439745804,30083","www.encodeproject.org%2Ffiles%2FENCFF395SBC%2F%40%40download%2FENCFF395SBC.hic":"1596732351,31850","www.encodeproject.org%2Ffiles%2FENCFF289WNN%2F%40%40download%2FENCFF289WNN.hic":"8632980535,32102","www.encodeproject.org%2Ffiles%2FENCFF381EAU%2F%40%40download%2FENCFF381EAU.hic":"1702476311,36479","www.encodeproject.org%2Ffiles%2FENCFF976FEY%2F%40%40download%2FENCFF976FEY.hic":"1448279040,36479","www.encodeproject.org%2Ffiles%2FENCFF485LVS%2F%40%40download%2FENCFF485LVS.hic":"1593610856,36479","www.encodeproject.org%2Ffiles%2FENCFF143VJV%2F%40%40download%2FENCFF143VJV.hic":"1422312076,36479","www.encodeproject.org%2Ffiles%2FENCFF588NHX%2F%40%40download%2FENCFF588NHX.hic":"3943637009,36479","www.encodeproject.org%2Ffiles%2FENCFF768UBD%2F%40%40download%2FENCFF768UBD.hic":"24786676166,36479","www.encodeproject.org%2Ffiles%2FENCFF965PEE%2F%40%40download%2FENCFF965PEE.hic":"29387092778,47429","www.encodeproject.org%2Ffiles%2FENCFF702IFC%2F%40%40download%2FENCFF702IFC.hic":"29387092778,47429","www.encodeproject.org%2Ffiles%2FENCFF288DNV%2F%40%40download%2FENCFF288DNV.hic":"10313429504,36479","www.encodeproject.org%2Ffiles%2FENCFF698HWZ%2F%40%40download%2FENCFF698HWZ.hic":"10962849269,47429","www.encodeproject.org%2Ffiles%2FENCFF355OWW%2F%40%40download%2FENCFF355OWW.hic":"3219571601,36479","www.encodeproject.org%2Ffiles%2FENCFF177TYX%2F%40%40download%2FENCFF177TYX.hic":"10325679706,36479","www.encodeproject.org%2Ffiles%2FENCFF542BHD%2F%40%40download%2FENCFF542BHD.hic":"11085397879,47429","www.encodeproject.org%2Ffiles%2FENCFF684IFW%2F%40%40download%2FENCFF684IFW.hic":"11085397879,47429","www.encodeproject.org%2Ffiles%2FENCFF592UHE%2F%40%40download%2FENCFF592UHE.hic":"21363948089,32102","www.encodeproject.org%2Ffiles%2FENCFF779XIS%2F%40%40download%2FENCFF779XIS.hic":"9517383271,36479","www.encodeproject.org%2Ffiles%2FENCFF518PSL%2F%40%40download%2FENCFF518PSL.hic":"7500581463,36479","www.encodeproject.org%2Ffiles%2FENCFF275GBB%2F%40%40download%2FENCFF275GBB.hic":"7889407162,36479","www.encodeproject.org%2Ffiles%2FENCFF634KXI%2F%40%40download%2FENCFF634KXI.hic":"6430702966,36479","www.encodeproject.org%2Ffiles%2FENCFF337QPM%2F%40%40download%2FENCFF337QPM.hic":"8529733887,36479","www.encodeproject.org%2Ffiles%2FENCFF162KMP%2F%40%40download%2FENCFF162KMP.hic":"5615896908,36479","www.encodeproject.org%2Ffiles%2FENCFF992VTE%2F%40%40download%2FENCFF992VTE.hic":"7328975027,36479","www.encodeproject.org%2Ffiles%2FENCFF464WXY%2F%40%40download%2FENCFF464WXY.hic":"5715339664,36479","www.encodeproject.org%2Ffiles%2FENCFF752EGH%2F%40%40download%2FENCFF752EGH.hic":"1733758743,36479","www.encodeproject.org%2Ffiles%2FENCFF474UJM%2F%40%40download%2FENCFF474UJM.hic":"222309548,18679","www.encodeproject.org%2Ffiles%2FENCFF531UPZ%2F%40%40download%2FENCFF531UPZ.hic":"1827756846,36479","www.encodeproject.org%2Ffiles%2FENCFF022VHA%2F%40%40download%2FENCFF022VHA.hic":"244983451,18679","www.encodeproject.org%2Ffiles%2FENCFF732NGR%2F%40%40download%2FENCFF732NGR.hic":"1679484567,36479","www.encodeproject.org%2Ffiles%2FENCFF513VSF%2F%40%40download%2FENCFF513VSF.hic":"28397932940,36479","www.encodeproject.org%2Ffiles%2FENCFF750AOC%2F%40%40download%2FENCFF750AOC.hic":"36471430712,47429","www.encodeproject.org%2Ffiles%2FENCFF219YOB%2F%40%40download%2FENCFF219YOB.hic":"2859767211,26979","www.encodeproject.org%2Ffiles%2FENCFF604YDD%2F%40%40download%2FENCFF604YDD.hic":"3549694085,26979","www.encodeproject.org%2Ffiles%2FENCFF746AMV%2F%40%40download%2FENCFF746AMV.hic":"2954867135,26979","www.encodeproject.org%2Ffiles%2FENCFF845ZEB%2F%40%40download%2FENCFF845ZEB.hic":"2763039282,26979","www.encodeproject.org%2Ffiles%2FENCFF570LWS%2F%40%40download%2FENCFF570LWS.hic":"2861588289,26979","www.encodeproject.org%2Ffiles%2FENCFF883YVR%2F%40%40download%2FENCFF883YVR.hic":"2433679887,26979","www.encodeproject.org%2Ffiles%2FENCFF056VLK%2F%40%40download%2FENCFF056VLK.hic":"2502986910,26979","www.encodeproject.org%2Ffiles%2FENCFF532DUQ%2F%40%40download%2FENCFF532DUQ.hic":"3172615899,26979","www.encodeproject.org%2Ffiles%2FENCFF723PYJ%2F%40%40download%2FENCFF723PYJ.hic":"10292839095,36479","www.encodeproject.org%2Ffiles%2FENCFF991SGJ%2F%40%40download%2FENCFF991SGJ.hic":"13072407683,32102","www.encodeproject.org%2Ffiles%2FENCFF885UZI%2F%40%40download%2FENCFF885UZI.hic":"1201881201,16438","www.encodeproject.org%2Ffiles%2FENCFF287KXA%2F%40%40download%2FENCFF287KXA.hic":"14705801988,32102","www.encodeproject.org%2Ffiles%2FENCFF335HYI%2F%40%40download%2FENCFF335HYI.hic":"20366756545,32102","www.encodeproject.org%2Ffiles%2FENCFF121YPY%2F%40%40download%2FENCFF121YPY.hic":"2760104016,26979","www.encodeproject.org%2Ffiles%2FENCFF675SJE%2F%40%40download%2FENCFF675SJE.hic":"3751779995,26979","www.encodeproject.org%2Ffiles%2FENCFF876LAW%2F%40%40download%2FENCFF876LAW.hic":"4032376256,26979","www.encodeproject.org%2Ffiles%2FENCFF740KVX%2F%40%40download%2FENCFF740KVX.hic":"3202490322,26979","www.encodeproject.org%2Ffiles%2FENCFF977OQV%2F%40%40download%2FENCFF977OQV.hic":"2919735477,26979","www.encodeproject.org%2Ffiles%2FENCFF525EFN%2F%40%40download%2FENCFF525EFN.hic":"2394748073,26979","www.encodeproject.org%2Ffiles%2FENCFF690QRC%2F%40%40download%2FENCFF690QRC.hic":"3183023394,26979","www.encodeproject.org%2Ffiles%2FENCFF452FWS%2F%40%40download%2FENCFF452FWS.hic":"2951805127,26979","www.encodeproject.org%2Ffiles%2FENCFF089KBG%2F%40%40download%2FENCFF089KBG.hic":"2531936700,26979","www.encodeproject.org%2Ffiles%2FENCFF939ARM%2F%40%40download%2FENCFF939ARM.hic":"3066385212,26979","www.encodeproject.org%2Ffiles%2FENCFF401ZAN%2F%40%40download%2FENCFF401ZAN.hic":"3008677144,26979","www.encodeproject.org%2Ffiles%2FENCFF378RZT%2F%40%40download%2FENCFF378RZT.hic":"2830232168,26979","www.encodeproject.org%2Ffiles%2FENCFF304AVD%2F%40%40download%2FENCFF304AVD.hic":"6164439305,50358","www.encodeproject.org%2Ffiles%2FENCFF453DBX%2F%40%40download%2FENCFF453DBX.hic":"6775246670,36479","www.encodeproject.org%2Ffiles%2FENCFF590VOM%2F%40%40download%2FENCFF590VOM.hic":"6443478922,36479","www.encodeproject.org%2Ffiles%2FENCFF246DOF%2F%40%40download%2FENCFF246DOF.hic":"6837914659,36479","www.encodeproject.org%2Ffiles%2FENCFF125FXX%2F%40%40download%2FENCFF125FXX.hic":"9736232550,36479","www.encodeproject.org%2Ffiles%2FENCFF241RAY%2F%40%40download%2FENCFF241RAY.hic":"7686758397,36479","www.encodeproject.org%2Ffiles%2FENCFF415XWQ%2F%40%40download%2FENCFF415XWQ.hic":"6973092068,36479","www.encodeproject.org%2Ffiles%2FENCFF374EBH%2F%40%40download%2FENCFF374EBH.hic":"8557459058,36479","www.encodeproject.org%2Ffiles%2FENCFF263YWR%2F%40%40download%2FENCFF263YWR.hic":"331586820,18679","www.encodeproject.org%2Ffiles%2FENCFF280CGS%2F%40%40download%2FENCFF280CGS.hic":"1743569614,36479","www.encodeproject.org%2Ffiles%2FENCFF553ZNS%2F%40%40download%2FENCFF553ZNS.hic":"1717253636,36479","www.encodeproject.org%2Ffiles%2FENCFF451VOI%2F%40%40download%2FENCFF451VOI.hic":"1626927468,36479","www.encodeproject.org%2Ffiles%2FENCFF420MQO%2F%40%40download%2FENCFF420MQO.hic":"31055961677,36479","www.encodeproject.org%2Ffiles%2FENCFF301BWY%2F%40%40download%2FENCFF301BWY.hic":"38902429246,47429","www.encodeproject.org%2Ffiles%2FENCFF606XNW%2F%40%40download%2FENCFF606XNW.hic":"1009699327,36479","www.encodeproject.org%2Ffiles%2FENCFF439ZOU%2F%40%40download%2FENCFF439ZOU.hic":"12381714313,36479","www.encodeproject.org%2Ffiles%2FENCFF499SYK%2F%40%40download%2FENCFF499SYK.hic":"13182654663,47429","www.encodeproject.org%2Ffiles%2FENCFF532LFI%2F%40%40download%2FENCFF532LFI.hic":"8286030286,36479","www.encodeproject.org%2Ffiles%2FENCFF020DPP%2F%40%40download%2FENCFF020DPP.hic":"23521952420,47429","www.encodeproject.org%2Ffiles%2FENCFF306VTV%2F%40%40download%2FENCFF306VTV.hic":"23521952480,47429","www.encodeproject.org%2Ffiles%2FENCFF399IHE%2F%40%40download%2FENCFF399IHE.hic":"10216571232,36479","www.encodeproject.org%2Ffiles%2FENCFF944AII%2F%40%40download%2FENCFF944AII.hic":"12567308552,47429","www.encodeproject.org%2Ffiles%2FENCFF230HVV%2F%40%40download%2FENCFF230HVV.hic":"8629849711,36479","www.encodeproject.org%2Ffiles%2FENCFF174LAF%2F%40%40download%2FENCFF174LAF.hic":"9446506633,47429","www.encodeproject.org%2Ffiles%2FENCFF898HRO%2F%40%40download%2FENCFF898HRO.hic":"9446506633,47429","www.encodeproject.org%2Ffiles%2FENCFF429MOR%2F%40%40download%2FENCFF429MOR.hic":"1455757398,36479","www.encodeproject.org%2Ffiles%2FENCFF061NXV%2F%40%40download%2FENCFF061NXV.hic":"1710915891,36479","www.encodeproject.org%2Ffiles%2FENCFF434PYS%2F%40%40download%2FENCFF434PYS.hic":"1832274903,36479","www.encodeproject.org%2Ffiles%2FENCFF704HHX%2F%40%40download%2FENCFF704HHX.hic":"1768142834,36479","www.encodeproject.org%2Ffiles%2FENCFF349DPM%2F%40%40download%2FENCFF349DPM.hic":"4316041260,36479","www.encodeproject.org%2Ffiles%2FENCFF718AWL%2F%40%40download%2FENCFF718AWL.hic":"39544267907,58932","www.encodeproject.org%2Ffiles%2FENCFF065LSP%2F%40%40download%2FENCFF065LSP.hic":"24929805283,55874","www.encodeproject.org%2Ffiles%2FENCFF632MFV%2F%40%40download%2FENCFF632MFV.hic":"22333105467,55798","www.encodeproject.org%2Ffiles%2FENCFF179HVU%2F%40%40download%2FENCFF179HVU.hic":"2659219603,36479","www.encodeproject.org%2Ffiles%2FENCFF791SPZ%2F%40%40download%2FENCFF791SPZ.hic":"2537491657,36479","www.encodeproject.org%2Ffiles%2FENCFF211ZWF%2F%40%40download%2FENCFF211ZWF.hic":"3512141227,36479","www.encodeproject.org%2Ffiles%2FENCFF614BNU%2F%40%40download%2FENCFF614BNU.hic":"5252155462,36479","www.encodeproject.org%2Ffiles%2FENCFF891DLM%2F%40%40download%2FENCFF891DLM.hic":"2549095612,36479","www.encodeproject.org%2Ffiles%2FENCFF056EXT%2F%40%40download%2FENCFF056EXT.hic":"2219014704,36479","www.encodeproject.org%2Ffiles%2FENCFF776DSS%2F%40%40download%2FENCFF776DSS.hic":"3920308353,36479","www.encodeproject.org%2Ffiles%2FENCFF814LQF%2F%40%40download%2FENCFF814LQF.hic":"1349480197,36479","www.encodeproject.org%2Ffiles%2FENCFF513ZNA%2F%40%40download%2FENCFF513ZNA.hic":"2638868195,36479","www.encodeproject.org%2Ffiles%2FENCFF692IOL%2F%40%40download%2FENCFF692IOL.hic":"3106768498,36479","www.encodeproject.org%2Ffiles%2FENCFF294WZY%2F%40%40download%2FENCFF294WZY.hic":"2211089761,36479","www.encodeproject.org%2Ffiles%2FENCFF339UWS%2F%40%40download%2FENCFF339UWS.hic":"2142759055,36479","www.encodeproject.org%2Ffiles%2FENCFF835FSK%2F%40%40download%2FENCFF835FSK.hic":"3919821739,36479","www.encodeproject.org%2Ffiles%2FENCFF328BMB%2F%40%40download%2FENCFF328BMB.hic":"2550686152,36479","www.encodeproject.org%2Ffiles%2FENCFF897RTY%2F%40%40download%2FENCFF897RTY.hic":"1323294397,36479","www.encodeproject.org%2Ffiles%2FENCFF306MWH%2F%40%40download%2FENCFF306MWH.hic":"1665386199,36479","www.encodeproject.org%2Ffiles%2FENCFF039YUJ%2F%40%40download%2FENCFF039YUJ.hic":"2335679939,36479","www.encodeproject.org%2Ffiles%2FENCFF468QIN%2F%40%40download%2FENCFF468QIN.hic":"3352516594,36479","www.encodeproject.org%2Ffiles%2FENCFF364WXU%2F%40%40download%2FENCFF364WXU.hic":"3959043175,36479","www.encodeproject.org%2Ffiles%2FENCFF373MSH%2F%40%40download%2FENCFF373MSH.hic":"4429550624,36479","www.encodeproject.org%2Ffiles%2FENCFF959EGQ%2F%40%40download%2FENCFF959EGQ.hic":"2475218228,36479","www.encodeproject.org%2Ffiles%2FENCFF624XMK%2F%40%40download%2FENCFF624XMK.hic":"3527855681,36479","www.encodeproject.org%2Ffiles%2FENCFF445OKS%2F%40%40download%2FENCFF445OKS.hic":"3369125589,36479","www.encodeproject.org%2Ffiles%2FENCFF239QDV%2F%40%40download%2FENCFF239QDV.hic":"1960069888,36479","www.encodeproject.org%2Ffiles%2FENCFF645AVM%2F%40%40download%2FENCFF645AVM.hic":"4969006589,36479","www.encodeproject.org%2Ffiles%2FENCFF494IPI%2F%40%40download%2FENCFF494IPI.hic":"1565483792,36479","www.encodeproject.org%2Ffiles%2FENCFF753IXE%2F%40%40download%2FENCFF753IXE.hic":"2892400648,36479","www.encodeproject.org%2Ffiles%2FENCFF731GXX%2F%40%40download%2FENCFF731GXX.hic":"5131381303,36479","www.encodeproject.org%2Ffiles%2FENCFF369CAQ%2F%40%40download%2FENCFF369CAQ.hic":"4236629448,36479","www.encodeproject.org%2Ffiles%2FENCFF053VBX%2F%40%40download%2FENCFF053VBX.hic":"54305946375,47429","www.encodeproject.org%2Ffiles%2FENCFF555ISR%2F%40%40download%2FENCFF555ISR.hic":"54305946434,47429","www.encodeproject.org%2Ffiles%2FENCFF964RSP%2F%40%40download%2FENCFF964RSP.hic":"12065485229,36479","www.encodeproject.org%2Ffiles%2FENCFF234MZQ%2F%40%40download%2FENCFF234MZQ.hic":"17507142760,47429","www.encodeproject.org%2Ffiles%2FENCFF994CEG%2F%40%40download%2FENCFF994CEG.hic":"17507142760,47429","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb068e787-bbdd-49e2-9f6d-7a0e9f065d6e%2F4DNFIHSUIRFY.hic":"2701182442,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3768b89a-e124-40eb-8acd-94a4fdd35807%2F4DNFIXTAS6EE.hic":"3283740601,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F9c513602-5abb-4088-8415-c827c381ab0d%2F4DNFIC3JD6O2.hic":"4896075767,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fde954dad-1849-4c23-beb4-bf893b7d76c9%2F4DNFIGY85S4W.hic":"3364151996,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe1befa6e-8067-4296-8db2-67d2a2458985%2F4DNFI2LTNXME.hic":"3699291418,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fbb3307fd-7162-477a-87c5-52f12d03befc%2F4DNFID162B9J.hic":"3576428773,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8597cdae-8319-42d9-9175-3f77aaee34e1%2F4DNFIQWS3632.hic":"4022561190,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F327f091d-6a63-47c4-9752-2dff303a13d9%2F4DNFI6GFHB6G.hic":"4239331168,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd70dc3b8-48a7-42c2-bd23-80bc44fc2266%2F4DNFIS5F6EBL.hic":"4404671861,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F77df7bf8-6a3d-407a-8968-4ca1e78d2269%2F4DNFIF2D3TL9.hic":"4793989394,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc8f7cc35-d2ef-4717-9009-c02154050fbf%2F4DNFI6EIFUZI.hic":"3370273763,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F98449d79-30d1-4e32-801d-07435819a42f%2F4DNFIRKGMZRQ.hic":"4669813207,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd4fe1844-2493-4722-8b98-34a93a4bb7d8%2F4DNFIQWD8ZYD.hic":"5379889057,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F1ee40499-1de4-47ff-b540-d9a65943c6b8%2F4DNFIX7H3CE2.hic":"4857679239,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fac016170-23a7-4111-8773-353d6c150f34%2F4DNFIO21YDCV.hic":"4695989644,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F1faea4e7-9a32-466e-a826-0bfdab6cd915%2F4DNFIUE5RAS6.hic":"4788044799,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fcbd396ed-11bb-404f-aed9-ef10abc258e6%2F4DNFIFI6NIKJ.hic":"2069414927,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Faf3f78db-ae92-4215-bcae-76d30c617e5d%2F4DNFIL5K3MA1.hic":"2585598247,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F66fc2893-224e-48b4-bdb0-25e022dedd03%2F4DNFIPV5KFMK.hic":"2060965679,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F2b39781d-aadc-434f-abe3-562d61308fdd%2F4DNFIW8TIFI5.hic":"1694424195,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb6d28f7b-27d3-486f-b5ac-32567416560d%2F4DNFIA6NSSBJ.hic":"2219532611,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F08785616-722e-46bb-ade2-2fdd21324e11%2F4DNFIBKZK63V.hic":"2429136232,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F904b13d3-1203-42a4-812c-963e80c159b1%2F4DNFI3CFMRID.hic":"1233390166,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb0ed4afe-5ecf-451d-bb1f-444697e3f558%2F4DNFIYIAUEPW.hic":"1753567534,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F4bb9a9b3-12a8-4d2f-8071-4722294c88ea%2F4DNFIC3HAU11.hic":"2271375254,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F5abf9c36-c1d1-44dc-8197-74d860d896c0%2F4DNFIM2BMJ33.hic":"1770471113,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa68475db-7816-4cec-b2da-d4ce4a0c7a0e%2F4DNFIBY3UHJB.hic":"2095528423,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F07c40943-0d0b-4b3e-94a0-8583b0e00b47%2F4DNFIWZEN3FF.hic":"1558559508,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd8a39553-2718-4866-9b2a-45d8e9c5ac6f%2F4DNFIE5TEYK7.hic":"1323063102,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F294b61ef-5565-4f04-ade9-f921a6686cce%2F4DNFI7H4II2V.hic":"1436947982,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F87a70ad7-7d34-4302-9c03-eb824bd4e633%2F4DNFIAS8LV1C.hic":"1263105698,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F9db804c6-5a91-4cf5-8ae9-e054223afb77%2F4DNFIBXWIH8J.hic":"1587059951,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd1e55906-ec8f-444b-8ce1-2de22a431a76%2F4DNFIO2HBDAI.hic":"1666436393,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7a4b9b37-8e38-470c-8190-fd4d513c0bbb%2F4DNFIXWCLD4M.hic":"1513511880,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F6c7615b2-5310-4bbf-a605-98761d3a3079%2F4DNFINASC4NQ.hic":"1420358914,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F20454014-49cd-4e2d-93da-f40ad52776d5%2F4DNFIZF1KI43.hic":"1377041630,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F5df04e86-ee2a-45f2-b878-bf1648e2cca5%2F4DNFIQBHR9XC.hic":"1179502734,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F9d1cc910-bb3f-4106-802a-73184c58d5ba%2F4DNFIQVMVRP6.hic":"1811976991,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe431986b-0732-460f-92ff-0abd1694d2d0%2F4DNFIJ7OAIFQ.hic":"1685503856,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F56d0c575-4962-4ea3-92c3-55bd0e17c096%2F4DNFIE8E4ANZ.hic":"1598369564,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fdb1502fb-a989-4ef9-b800-7eaa7be172ae%2F4DNFIOUSETUP.hic":"1493294709,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Facc2f1c3-8c96-4d21-814a-3a8ba81e7741%2F4DNFIVJ3IIQL.hic":"1472376655,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F037fb4c3-8641-4953-a977-cc71f2137582%2F4DNFIHN2QSMX.hic":"1179632606,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F16d2c3c0-6d29-4815-b074-b142af90b615%2F4DNFIILDWK8M.hic":"2280059989,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F31789849-e4db-45d8-9730-66a048c02d8a%2F4DNFI6XD6JAQ.hic":"2253961696,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fff04947e-e6e8-4d62-8374-ef2ee4104809%2F4DNFIALNLR78.hic":"1914687914,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F53e6c1e7-9410-4158-84e6-57c2e683b095%2F4DNFIBT4EAKN.hic":"2296378356,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0127900a-258f-4815-97d2-6fd2b043d853%2F4DNFIDJ2JZ7Q.hic":"2558945393,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F89f95693-3d28-44eb-9d45-14932f8e258c%2F4DNFI8JFOAJT.hic":"1726440253,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd803d818-b0d4-4796-8d61-a9f3943f3b10%2F4DNFIRZA6EV6.hic":"1805017504,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff9165fb1-0782-4757-a740-5b929e0252bb%2F4DNFIB7QTIMH.hic":"2541020707,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff8d916b2-b58e-4cdf-894c-ffcb3bf6ebd9%2F4DNFIJ5DQZVK.hic":"2445734043,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F14066a5b-e01a-43c2-a468-b18826174df3%2F4DNFISTWNV9C.hic":"2499319890,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd0692151-7f9a-4475-b059-f8802616dded%2F4DNFIBN9K4V9.hic":"1591570769,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F70a7ef36-a514-4e45-918f-47c4e9e30ef4%2F4DNFIR8OU6QJ.hic":"1689882108,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F180306cd-8593-413a-ae83-24f19209c5d2%2F4DNFIDSWKFF5.hic":"1596696630,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F6e7b9be7-f465-4434-8e9c-68d1e44a76af%2F4DNFIV239W4L.hic":"2345867406,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F55df948c-941d-4930-854c-6a07557a0c1d%2F4DNFIREVU1Z5.hic":"2254683002,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3f590cb7-df3a-498f-81c3-d5ed4179b8ad%2F4DNFIFHU75I5.hic":"2497670883,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8f064770-6008-4f74-bfca-268d4a22d745%2F4DNFIMROE6N4.hic":"9850583704,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa93d0588-76b7-4ccf-933c-4325876b0a53%2F4DNFI5SUHCGZ.hic":"10364705187,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F2f5f0d6b-0b22-4936-93c9-0944d49c037b%2F4DNFII84FBKM.hic":"8836986129,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F12e90fc5-0b76-4e42-b346-58d267f9ad6e%2F4DNFI2J1ODWB.hic":"13410858286,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff2702a45-3e8b-4980-bcd5-6bb0e291614f%2F4DNFIJWBWE41.hic":"20515676755,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa0859349-5f06-4ad3-b56f-b1166b34a9eb%2F4DNFIIMZB6Y9.hic":"15350325963,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F12685c57-d54a-46fa-9efb-acf34ed77574%2F4DNFICJECID5.hic":"1525002266,26979","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd101a58e-89aa-44fd-96c5-6bf1e2476272%2F4DNFIR6UW2QA.hic":"1264999913,26979","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3d8c73bf-1335-4af4-b124-e3622d48c5f6%2F4DNFIGOEKBUZ.hic":"1905947578,26979","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fcd2477cf-6ed0-4d7b-b4e9-88fb38b0df48%2F4DNFIMDNAEW4.hic":"996444147,26979","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0f03953e-29da-4f2e-8c05-572d0edf4525%2F4DNFI5OSZ3JC.hic":"369361754,22829","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F29d95dbb-005a-4ae1-8b9c-0fec9ec0bbd0%2F4DNFI7KOUGFM.hic":"1227434049,26979","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa441ab7b-afbe-437d-bf98-b6b916558642%2F4DNFIGKX4A32.hic":"883933242,26979","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F941b2f94-2fff-4d3c-aceb-fee4a5ae41a9%2F4DNFI1ORHOTA.hic":"1140970677,26979","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8720ede9-093f-4c00-912f-373283260a16%2F4DNFIWSVLZED.hic":"458091151,26979","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe9e17155-2b62-4a68-afb2-31dfa674e169%2F4DNFI6H926RO.hic":"3552863515,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F22f22778-987a-4dc0-97bc-f26eae0156d9%2F4DNFIKTYSPOF.hic":"2939475400,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F40f40192-0acb-44cb-8778-8d21afe593fb%2F4DNFIZ4S52BV.hic":"3067438113,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd8767374-7018-4e11-9226-bf5612d39ebb%2F4DNFI3APMXHF.hic":"3258874744,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8c5140ec-a65a-4186-8c59-2927233eecaa%2F4DNFIQLIKDSD.hic":"2746398416,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8cdedda6-d7d8-4231-a85b-d56fcd962366%2F4DNFIKYXMF1E.hic":"14442148774,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Faa4d4497-7c6c-4dad-8040-be13ba07ea32%2F4DNFI9815EEJ.hic":"17960817603,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe9b7b95f-190b-49fe-8047-ef4a8fc59746%2F4DNFIQ2687RT.hic":"15954277087,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F59863d3a-8d7c-49c7-9a41-7f2a58ad24d1%2F4DNFIYDBBSE3.hic":"16499534862,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3e80ca41-b3e0-4f4f-a05e-8f95fe96d938%2F4DNFIMOCN1YS.hic":"863725312,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F96f97a01-0020-4f09-93e8-fc8a9fd07218%2F4DNFI6558CM8.hic":"1597967345,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fce9e9334-ee0b-4549-a845-110470ba5986%2F4DNFIQZRKS7Y.hic":"907626411,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fdaac8209-1015-48da-9e31-2e252dfd8fe0%2F4DNFIX4DLXSE.hic":"1369766288,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F268b7d52-9655-474c-9467-8ba31bb2195c%2F4DNFII3JV8I1.hic":"856656441,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F9681f9b5-335a-4f56-afa1-15b58bbb41e8%2F4DNFI5IAH9H1.hic":"1495185175,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3e082eab-95aa-4677-88ed-9d7adcc1effb%2F4DNFIK5HY1GP.hic":"2135337789,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F31af1ead-4520-4669-957e-424b4b197c33%2F4DNFIFA89L5B.hic":"1975593640,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fcc2b78fd-52d4-4e0c-ac93-b84ee82daf7e%2F4DNFICXCFGEI.hic":"2628202920,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff54efece-280f-46ca-95e3-1f8a3cd18820%2F4DNFIK4CECUH.hic":"1901129375,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F1181c0c4-afb7-4b6a-9fdc-d868fb2253fc%2F4DNFI1EYIGOC.hic":"1947135384,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F1d3e2905-b9b9-4b91-bcb4-8d34746e78f6%2F4DNFI7TLEWUI.hic":"1185758726,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Faba3d42f-39cd-4a85-9d3f-835aefb5c803%2F4DNFIVCJKHMN.hic":"687240974,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F27f54fcb-54fe-41a4-b25a-2f8944c89044%2F4DNFIN8F14CS.hic":"1304082029,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb75fedb5-88f4-4bc0-8e38-298df7847a7f%2F4DNFI5LCW273.hic":"12497258313,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F2f22b2a0-3712-496e-92d2-63775ec0e421%2F4DNFIVSCH2CH.hic":"12594733778,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F07e47261-5863-44f5-9198-76e263081bea%2F4DNFIZ268JGC.hic":"1499059135,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F682b1ae1-3ac3-40e4-a330-c49f63946952%2F4DNFIJ1P4HBI.hic":"1190211725,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F197e7c89-ea73-41de-8cb2-8c0b1e3bb945%2F4DNFITEGKBIW.hic":"2061501971,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F191f6928-c9a8-44b2-8516-ee4d6005f24b%2F4DNFIE1P6RVH.hic":"1711447310,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F94435086-3701-4b28-a6d0-4a59b24d7615%2F4DNFICJ6I4DO.hic":"1557899940,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Faa9ac173-d233-41c7-8985-ca91949664e4%2F4DNFIKUG8MEW.hic":"1339072088,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fba6d8ab6-ee18-4ba2-8da9-d631888dd50a%2F4DNFICFZGFAV.hic":"1261083478,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F87a3ab04-7094-4673-81e4-ac8c9add8eb5%2F4DNFIQXCZVVA.hic":"1084913802,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fbc1ff488-82af-4579-9424-959184edb139%2F4DNFIB6PJFJ3.hic":"1114571343,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F1f7026ee-987a-41e7-8a61-45510ee3f86b%2F4DNFIX97731O.hic":"1246860402,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F6186787c-2e72-4925-9729-02121e2e4597%2F4DNFIYQYZOTO.hic":"1212210849,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3b98a946-0109-4efa-a13e-cc7a36772125%2F4DNFIPXU7V25.hic":"1696288217,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fea17d041-c6ed-43a1-8047-535f3d19ad44%2F4DNFIL39PR76.hic":"1719284710,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F72774afe-f166-42ac-9849-4070b0dadf6d%2F4DNFIYLJ3R3B.hic":"1106419640,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F4a45e733-55f8-4a8e-be24-2ef34c976e25%2F4DNFIL51WBN6.hic":"1327651164,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F086c62b0-a26f-41ae-a5ff-88b8be2bd2aa%2F4DNFI6SFPUDA.hic":"1336964405,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F4d9b79c7-af62-4070-84a9-b953903f2732%2F4DNFI2KM22QR.hic":"953067310,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3c9889d1-f49e-4639-8e15-2d99d6cd22e7%2F4DNFIVF8Q45U.hic":"984193565,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa080dd7b-b7bb-4eae-a275-572a8b45b2d0%2F4DNFI2RN3WFP.hic":"1046525527,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb81860ca-c227-4b68-a298-1907fd32300a%2F4DNFI4TJTL7A.hic":"1160373401,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F74ab47dc-7b52-421c-845e-6feb33457adf%2F4DNFIYJ4TWB8.hic":"1268416204,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc6582128-a930-4bcc-941e-5c0733bdd4d5%2F4DNFIM6RGKPV.hic":"863347067,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F11a75514-4450-4295-9eda-18e3678a575a%2F4DNFIL2VWWL5.hic":"860731581,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F5eb52a8c-bf14-4225-bf34-14a0aa47c369%2F4DNFIX6ZXCA8.hic":"893462267,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F66aaa4c0-1f62-4040-8ecc-4e95da23cd18%2F4DNFIEVR81FS.hic":"879736207,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F821c6e7f-96f7-47de-b7d9-4970562b3c8e%2F4DNFIAUI6BBI.hic":"996313881,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F9252c362-31ab-413d-a47a-cc97bdbf243a%2F4DNFIAFEE9G2.hic":"1103265750,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc1a0bf52-2e65-4deb-871f-ede736babd41%2F4DNFIPZBEXCP.hic":"1081257762,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F729f5ce3-d7e0-466d-b781-d18049e63bfa%2F4DNFIWPKRZGU.hic":"973779283,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F80b769ee-a717-4825-9db0-dca86f913173%2F4DNFIMD9QNDX.hic":"1158688208,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F266290c0-2767-4158-85ab-7274368905b9%2F4DNFIATA1HD5.hic":"1073361089,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc46f18a8-eb24-4d35-b112-36db72bde2f5%2F4DNFIH9U4I7I.hic":"1111124316,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fec91a79e-7de7-49f7-9b3d-d28313aeddc8%2F4DNFIZ95S6TR.hic":"1242494051,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F9e9390b9-da20-43bb-a8f4-9830f354ddf9%2F4DNFI5ERM9J7.hic":"1271051397,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fee8ea82e-b9e4-41ad-bced-5f4fbdaa4fec%2F4DNFI15FPSQL.hic":"1216714120,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fbed7eb86-8990-42f2-b3ee-5992d6361f7c%2F4DNFIJ3DZPGM.hic":"1035089437,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fdaa8a324-3bf8-424c-8a86-b8ad325cc20d%2F4DNFINW9P6XF.hic":"1215712740,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F70631758-6bf8-47a0-92b6-132574886faa%2F4DNFITS16HW8.hic":"1105283847,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe473304b-7bc8-49b8-bba1-ecb9f06914ee%2F4DNFIS3DIH4V.hic":"1036056660,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F10f9224a-111c-402a-ac25-e221ad0af9ef%2F4DNFIY3KDHP6.hic":"1071761024,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F17519b96-2bdd-4294-98f0-1535f1aef28e%2F4DNFIO8HVKOL.hic":"953793750,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ffb18f896-4730-4909-86a3-867fc8e76cd6%2F4DNFIMF6CFOM.hic":"708717889,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fcfee4d87-0873-40b0-b79f-35dcc8669c1c%2F4DNFIZZ77KD2.hic":"732668723,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb8b5d909-8a1b-41bb-bcdd-d108a0bde762%2F4DNFIOLO226X.hic":"951271932,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F9ce81f6e-b9cf-4ec9-8bd3-517539e4b662%2F4DNFIJMS2ODT.hic":"932509067,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F506aa952-5d41-49ff-b658-916bcf88a395%2F4DNFI49F3LJ4.hic":"1208494817,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe4dc392d-ca36-4bdf-a27d-173cae34f520%2F4DNFI65MQOIJ.hic":"854630155,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F149ef8d7-e0b4-4e4f-b7e5-7226e2603746%2F4DNFIM4KEPRD.hic":"882790622,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa436f0a8-4f9a-4524-90ac-795c5b8491cf%2F4DNFIIXBIZFC.hic":"848244425,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fbc8a05dc-7449-4b01-8330-a55db37ca8e6%2F4DNFIWDOOBVE.hic":"1116239020,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Faef8b881-28fe-4694-9a95-1d31940e6726%2F4DNFIDT9EB5M.hic":"888289053,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff66f3162-a53d-46f2-8800-3752935d5400%2F4DNFIX2VUNV8.hic":"1226661451,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F36c782e6-2c48-4298-aa43-bd6624da003d%2F4DNFIEQHTV1R.hic":"804665819,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff15d571e-605d-4bcc-a359-0350b57a6815%2F4DNFIFW7GA64.hic":"901568712,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc2aa2e8b-ac7f-4acb-b4b5-ac5f845840fe%2F4DNFIXGXD67I.hic":"970995551,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F71b6fd7d-b249-4d65-a597-b80b95845399%2F4DNFIA7GB1NB.hic":"956785837,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F6cbb1418-34db-427f-9273-5174eac81529%2F4DNFIVOJGWNP.hic":"890415052,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc69c2ee7-b6c3-4a62-8d4f-913491c9dab8%2F4DNFIW22BNB5.hic":"1075499540,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa268f28f-c6d9-4324-8989-75d2d317af1b%2F4DNFIIFBC8WN.hic":"1045459440,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F6c7361d4-60a6-440b-b5be-072cada98663%2F4DNFI9ZBEBJH.hic":"759395398,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fcceaad1a-e01e-4430-8bd6-24ffa6891802%2F4DNFID4SLU53.hic":"921288444,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F9eee5854-b33e-4d5a-9ba8-ceffd47e7488%2F4DNFIODI1NUJ.hic":"733159777,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F5e1089b0-42e8-441c-99bb-4be99bcec28b%2F4DNFIJL26LFN.hic":"723567970,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F298a429e-ea29-49d3-bfed-fa851e1e7c4c%2F4DNFI5KTF553.hic":"2213661745,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F965d29f0-e4a3-477c-8ae4-faf4a654e69a%2F4DNFIYSPGFGV.hic":"2274989349,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd88acbc1-37b9-4266-9f97-d8fed576d0f3%2F4DNFILOR6D2D.hic":"2595459358,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7b6ddbce-0ed1-4272-b8ae-32793e4ea4e4%2F4DNFI1WMMPJQ.hic":"2262433890,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fedc0c8c4-97d8-4372-9a4f-5e0cdf09d7d0%2F4DNFI47P5978.hic":"2146314403,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0edcc389-43a4-44d7-b946-fe3496f93d56%2F4DNFI7XGW6IH.hic":"2302805723,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0a802926-e235-4c80-b521-83a1774dfb46%2F4DNFIK1EJG8I.hic":"2374943035,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3c36aedb-6a58-4aa2-9b11-bb440ec174f1%2F4DNFIDQ3THN9.hic":"2341188249,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F846123cd-8828-4e51-8b8a-27deaf293858%2F4DNFI3WPNFWT.hic":"775145629,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fbd06e3ad-0e37-48a3-8367-c7d5912cab03%2F4DNFI9DCUOQ1.hic":"870487824,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc2eaf9bf-9584-4cec-8685-bd74038a6c01%2F4DNFIU8AF5ZY.hic":"1276224366,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F219497b5-3f35-473b-9d4e-e1cf21c69561%2F4DNFIHW8NTQX.hic":"28864787856,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F4be13558-114a-4f2d-abca-7598e2ff4757%2F4DNFI4OUMWZ8.hic":"17061013588,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F49aed637-87a1-4d4d-ae68-e5da82aec05b%2F4DNFIEYQ5ZIR.hic":"13555272651,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa2f48779-4eff-44a6-8a9d-96435aca1ddc%2F4DNFIDZT7PR8.hic":"13425047093,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb6ec6b71-27b8-4891-b10a-ab06a5270468%2F4DNFIEJEFCAM.hic":"15394960208,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F68b9a7b5-8413-44fc-8c2d-59a67b1c4166%2F4DNFIJ8JKKWJ.hic":"17012681779,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F294d45a4-8b5e-456f-a9cb-1cbbbad3a7d2%2F4DNFINEQY95T.hic":"13966775978,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fbd7f3a48-b822-41e2-bd9c-f52b3aff7b6a%2F4DNFII6AN691.hic":"12367300362,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7da44594-0dc8-4e74-8e10-a957aeaea51a%2F4DNFIDBIEXI7.hic":"2015474981,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F085a0453-3784-4eba-80b2-3556e53e2f52%2F4DNFIDKJFK2S.hic":"1983111659,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc370c78c-0a99-4c3f-a29b-2dfafc6a3e86%2F4DNFIPAF4PYT.hic":"3041434294,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F907ce45f-baa5-416d-92de-e86db4bacff1%2F4DNFIWIYYNQ5.hic":"7082321112,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff13afc6b-cf69-4c9d-881f-eed4dd3c28ee%2F4DNFIHMCILEN.hic":"1739157603,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7575d891-0e3d-4a77-896a-3e1b3a8d330b%2F4DNFIJBJ6QVH.hic":"5213499748,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff0daa830-60d5-4c7c-a2e1-a4ee70b3fee7%2F4DNFIH2A7IKF.hic":"4099503507,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff4970a25-91d8-49a7-9a4a-fe0f12cb2b0f%2F4DNFIOL8KGQ2.hic":"2256042055,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F879f1850-d175-4a86-8a97-12658482e3d1%2F4DNFIWILLD6C.hic":"5476286356,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F787f538e-d619-4c8f-985b-78753fb7e57c%2F4DNFIZBXXJAF.hic":"5946467856,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb8ee785f-1016-4989-9e64-78352621d32f%2F4DNFI8PZOJHN.hic":"8307204961,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3d8997fa-528c-4531-b25b-a412de6bd472%2F4DNFIGXAMSJY.hic":"6577588285,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F87aede55-7610-4283-af0e-c6840429a31e%2F4DNFIWNNO89O.hic":"2871061417,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F93b8e020-b337-4685-81dc-40cc8a12b5e9%2F4DNFIXU2KPNQ.hic":"3401717686,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ffb5cf1bd-59d6-46fe-857d-b86d9756029d%2F4DNFIHBGD6N6.hic":"840028421,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F2d1bc088-d838-49b8-85fc-fea78a7353c4%2F4DNFI7J8NI4A.hic":"675705256,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F21a27b63-fd67-401b-9aa2-2798e6588d21%2F4DNFISFM9VFK.hic":"800145922,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F656c0a9d-7058-4c4b-a3ce-701d929561c1%2F4DNFIJU5XBK7.hic":"966593603,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F2efacfbd-9c81-4e62-8df7-847d1ab774d5%2F4DNFIPKY8ED1.hic":"3401629450,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa50b6a26-56b5-43f2-b525-fa219fd716f1%2F4DNFIQRTP7NM.hic":"5358852759,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff5dc7a59-b998-4490-8a76-afbf3b258a49%2F4DNFIBCIA62Q.hic":"5779049277,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F62b2b237-cb02-45f7-89d9-616cf9ffb678%2F4DNFIV56OFE3.hic":"5818844506,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8ac79b4f-cfbf-4b2a-9fc2-898ed6c3e5e1%2F4DNFILIM6FDL.hic":"19637469163,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F1cff8afa-5a13-4ad4-bcad-91fc3ced759c%2F4DNFIP71EWXC.hic":"17934647326,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F000789fe-9a22-4280-a71c-7ad228fd4cac%2F4DNFIM7ZVQOQ.hic":"700134697,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8d78457f-0c2b-4358-b08c-4d4ef4d9f59d%2F4DNFIS6EYHCX.hic":"628314484,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8ca3b4a0-2478-49c9-b4a2-a28430417a32%2F4DNFIKKCMS1Q.hic":"584050634,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff5041473-18ec-439d-92b1-8ad98c9b25c0%2F4DNFIBIV8OUN.hic":"522632731,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fcf474ec6-abd4-431e-a21c-252fcf5ee6b3%2F4DNFIAUMRM2S.hic":"313395531,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F2bb1c73e-fb0f-41c4-8620-a938cc8d24a0%2F4DNFI9ZUXG61.hic":"332217525,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F26dfa41e-7e4f-457a-a3ac-72daf8059f3c%2F4DNFIDBFENL7.hic":"359604894,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8ed2e68b-189e-4988-bb6d-94e63240a231%2F4DNFI7XAZNNQ.hic":"5312422266,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F6f2b1ce0-5205-4680-981e-d91b694dc3e4%2F4DNFISNGDB53.hic":"2008546759,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F73c8147f-bc7d-4d33-8a10-a9e7b413ecc6%2F4DNFI1CIGHYC.hic":"2221847625,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F526ae3e3-32cc-4670-970f-1faa9cfafd4d%2F4DNFIQD2DP2F.hic":"5295591503,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F6e803530-47f8-4c56-bb19-fbdcd578d2f0%2F4DNFINHT8P7C.hic":"3159499486,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ffe705f38-903f-47b7-9b38-f80ebd18a479%2F4DNFIGF8EM7M.hic":"3490552542,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Faa197328-d6da-4299-a0fd-409ac9892668%2F4DNFIUPG2ZBJ.hic":"5382003751,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ffe5d52c4-2be7-4812-bca0-cd4bb3025e6b%2F4DNFIH3OTR14.hic":"3224693110,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F21935f61-daa8-4df2-aa69-fcd27953b405%2F4DNFIUATRW3Z.hic":"3835865655,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F72147527-e3e8-4967-bc45-8251249d76c9%2F4DNFI6V7ZQAE.hic":"4382708138,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F589f0919-f54d-49ff-a482-e2f453ef7f34%2F4DNFICKMT1CY.hic":"4479068191,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F861946ca-bad8-4a87-96e1-b2eb20b9ef10%2F4DNFIF9BDCNI.hic":"3698151402,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff76346ac-97ec-4893-8984-2b75ce1cdc51%2F4DNFIG5O1OQS.hic":"5704288175,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe8b43826-f049-4c3f-b83a-e75fa7aacc85%2F4DNFIHS2SVBQ.hic":"990025510,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F46316260-f555-4dd4-9e40-8ae06ca52822%2F4DNFIU95B69H.hic":"1275878544,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff62ef491-a3ae-4f66-ab33-c5673c9e0b65%2F4DNFIYRROFCR.hic":"1522530503,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F1cd617e1-fad4-4fdc-8b4e-cb277650123c%2F4DNFIF7JN3IU.hic":"1463443128,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fdb20fe2a-0078-4d4a-8a52-d76043d06f40%2F4DNFIB2RYULQ.hic":"1269529700,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3d386fcf-1d22-47de-a0d6-0c3a641ca174%2F4DNFIMVDK3SI.hic":"1185489599,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F00e470bd-c533-41b1-923a-4b471824da12%2F4DNFIRLOTXSC.hic":"978217499,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb8774fb3-d0c5-43cc-a6c9-eb0ca39841fb%2F4DNFIZAPX6J8.hic":"1100356082,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fab3b826e-614c-448b-860f-a3ebef68a82f%2F4DNFIQD5VCSD.hic":"1322319877,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F66c78d2b-993a-4937-95ed-9e2d302ceb3e%2F4DNFIIF6VAGN.hic":"868885799,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F5d106fe1-2d80-466e-87aa-46b38ba142c5%2F4DNFI86IEZXH.hic":"751443267,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc99490b6-faf9-413f-9c38-3f53018089d6%2F4DNFIP881SR2.hic":"754427927,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F39c7e387-e710-4b1d-b757-357dec03f6ad%2F4DNFI42NNCW8.hic":"1166392978,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F4742a211-43b1-4325-af6f-82490aeb766b%2F4DNFIEV4PKP6.hic":"1102227476,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Feaa73842-1c86-4ad9-8a9e-c189c0b4c01d%2F4DNFIF1DUQHE.hic":"1206699207,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd25f24df-0298-4079-bb6f-1c8e1e32392b%2F4DNFIGW55EAY.hic":"1033358104,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc57a7ab5-2778-4fe2-9d64-9a4e95135f12%2F4DNFISZRU6I4.hic":"1539570262,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd89f494a-27ca-46b6-89be-7583f3f6d18c%2F4DNFIBKKDTAP.hic":"350372180,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F06725280-cb24-4f22-a267-18b434bfa79e%2F4DNFIJSRQW24.hic":"314361467,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8fe5c3c5-006f-425b-ac6d-ea475e29be78%2F4DNFI3REN89E.hic":"299665258,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc8b6ac5c-13b4-427e-9158-cec0b890b6d8%2F4DNFIF5XLHKM.hic":"235668364,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F01ff33fc-fc23-48aa-a6c6-b720d6fe0768%2F4DNFIB6Q538N.hic":"316494853,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F552978c8-abbc-424a-9187-3e34cf802a97%2F4DNFI3ST3F7Y.hic":"296298411,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F72e66520-5170-4f2e-844a-fbfd0e23b480%2F4DNFIQT4M6UI.hic":"307691265,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb3eb3953-ffe8-4d5a-970c-a16f3b7b9ec3%2F4DNFIFNCC7M2.hic":"364160436,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F37d413fb-afab-41ff-99aa-1678830f7dde%2F4DNFITM9MDJL.hic":"252412426,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Faf5db92c-aaf1-4086-a0d2-79b28648f172%2F4DNFI3NTD7B3.hic":"227586640,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff6892f7b-1f8a-4d7d-9605-c67932cd5654%2F4DNFIBED48O1.hic":"328344868,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd64afb07-5ab1-4c4f-8438-2fee37afa86a%2F4DNFISATK9PF.hic":"379669025,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fad11bb63-8692-461c-b698-89c601451321%2F4DNFISRP84FE.hic":"298491537,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F63710ec5-35d2-47dd-bf9a-08d3daa83d67%2F4DNFI2LY7B73.hic":"303150299,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F76077d9e-ca75-4301-ab79-88aa49bda495%2F4DNFIXEB4UZO.hic":"711757090,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F34dd4c0e-3487-4fb4-b95f-c4bb66e0fa31%2F4DNFIQWWATGK.hic":"221304476,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F48a8cf86-3248-4a8e-8e85-472ec219d49c%2F4DNFI44JLUSL.hic":"284772724,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fee399fbf-2a9e-46e2-8364-457713bff508%2F4DNFIM7Q2FQQ.hic":"330729464,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F124d191a-c5c7-49b6-b84b-0d1bad8bef2b%2F4DNFIZK7W8GZ.hic":"293166018,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe351f7cc-7a2c-4515-ae0b-3bb2f91c986a%2F4DNFIMIMLMD3.hic":"240094740,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ffd1ae249-57b1-41d6-81a6-16b21dcd8f12%2F4DNFI7QUSU5J.hic":"681762505,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F46c92c5c-9ad8-4d49-beba-f35c5cd99208%2F4DNFINXUOI5H.hic":"375594313,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd7350d40-4e9e-4131-9151-bb539d39b431%2F4DNFIIJR2296.hic":"331322302,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fbfacf37b-1665-45f3-a046-e29e1544e9b0%2F4DNFIJMZUTXR.hic":"361313244,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F234e18fb-9990-43bf-9a48-f72722cfa232%2F4DNFIZQPT9EL.hic":"540421873,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F4b35ab09-2e79-4876-b2bc-d3a8faa26257%2F4DNFIZIXSZ9J.hic":"545066813,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F2ae5118e-807a-46e0-8e92-143d4b282b3d%2F4DNFIDD9IF9T.hic":"237409149,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb34d7f6f-73f7-4b6b-80c7-c8af0f991549%2F4DNFIVC8OQPG.hic":"355121712,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F9ab169fd-cbdd-4f60-8553-a4c6912ad89e%2F4DNFITUPI4HA.hic":"313085022,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F4e53712b-d0d9-40c5-afe1-ffa0fad71e59%2F4DNFI5IZNXIO.hic":"341863906,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7a91477f-45eb-4a16-affb-fc131f9326b8%2F4DNFII16KXA7.hic":"248904495,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F153729de-0eca-43cc-9b61-61aa8d775b38%2F4DNFIAAH19VM.hic":"668047244,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F879fd78a-7165-43d9-a0de-ca158b53df30%2F4DNFIVKIY3KV.hic":"247571318,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F67f901a4-040b-4b04-9fff-94a1780423cd%2F4DNFIVVCWL6C.hic":"198355985,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd5b30c5a-654a-463c-9474-39bdc3ce4500%2F4DNFIJRF2273.hic":"343971277,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7070280a-8f03-40d0-9fef-e9d9f4d3dae7%2F4DNFI6FCC9ZA.hic":"312013061,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F47049719-9407-4d76-9048-26231045f642%2F4DNFI1CPQ4O3.hic":"352923267,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F862c2b5f-44c2-4bd7-9264-b3ca032d3d8d%2F4DNFISXFEDE9.hic":"271745977,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Feffbe052-39ff-4217-9871-44199ed90818%2F4DNFIF9L6QEQ.hic":"668409334,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa7791854-1b35-4258-90fb-603c55f24642%2F4DNFIPKASX1Q.hic":"312727920,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F79cccad6-a78e-4de9-9fe7-08f7e8df663d%2F4DNFIWXZ4JQZ.hic":"151808553,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7e86e0cc-d6f1-4ce0-aba4-c36c6ebb3c4c%2F4DNFIEMQ1O8V.hic":"700533280,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F4a1b58d3-9ae6-43e4-91cf-49f1fcbbab33%2F4DNFIYWONU7A.hic":"729050356,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F67bff264-0b0c-4c5c-9d4d-ff5abef2bbe4%2F4DNFISNIE5FH.hic":"7987657997,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3a6a943f-2cc0-4433-a27d-c89f3fdd3309%2F4DNFIV8MLWJB.hic":"6646216171,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F9e235711-ba90-404d-b4ac-b15990ea8e33%2F4DNFIXSTDPHL.hic":"3146468238,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0c89f4bc-e9fc-4ecf-b868-26108dbb7bb2%2F4DNFIQJNOH8U.hic":"2919703928,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F1856ff9e-de7a-4fa1-ae0b-3e04b837b5e1%2F4DNFI57XB4A8.hic":"13417594377,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F099bb5b9-6315-4650-8f78-d603f5a046b3%2F4DNFIQ7UKVZV.hic":"9016468637,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Faf3c7a30-0fc4-410d-8d41-247da3eb105d%2F4DNFIWJY8GHD.hic":"7921314766,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fda99f429-20ab-4d91-bbfe-f8bdea8ed7b1%2F4DNFIN8NKRNF.hic":"4247121358,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0ca0f4e3-30ca-4332-b735-e32dce08e1a4%2F4DNFIZYGEHNZ.hic":"4910404663,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F243f48b0-6b59-4f37-ad39-a12e0986f530%2F4DNFIRPYGAV8.hic":"4220073636,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F49f1a890-d458-42a6-9c78-99c38b6c7a8f%2F4DNFI6MZTDM1.hic":"375035361,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F76bd4768-9343-44ba-a99d-5500e184e39d%2F4DNFIG3BCGPL.hic":"2422923206,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F9d1ed866-eaf6-4906-aa8c-9e39616dde38%2F4DNFIS9YPJ3L.hic":"1593271574,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F1e7a5636-bdb6-45fb-85d8-87a7e908de43%2F4DNFIOWGA9AX.hic":"1632314387,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F5ecc552a-0a6b-49a9-9aa5-9f3fd9b535fd%2F4DNFINKEDSBF.hic":"1458761024,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F6c03f1d2-bb25-4c94-b5f5-d5cdd01c14b6%2F4DNFIVIXVUK7.hic":"1504818271,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F1a4616ff-6d04-4a6a-9773-b80e81da2471%2F4DNFIANHFY16.hic":"1850724180,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd2231870-a78d-4c8b-9cfd-084f2468acb1%2F4DNFIJ67ZFBI.hic":"1473864703,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F859c2dd3-df8a-42b7-86ea-bf6524f75e80%2F4DNFIG3YQQ4V.hic":"1539822829,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8bad667e-6003-4828-9a20-07585fa9c811%2F4DNFIOLKEOME.hic":"3036353747,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F92ea551b-5779-4d31-a0f5-621e4bd0eb21%2F4DNFIVLN8WJE.hic":"2710426318,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F61ee79fa-0617-4083-b121-f92ef3a8905c%2F4DNFI2111XQA.hic":"2589549183,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F83ebb98d-e5db-403d-aa23-875293156c0e%2F4DNFI88HXX7D.hic":"2462367030,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F6d63671a-8f1d-4159-82c0-931b43464772%2F4DNFIUBM6QK8.hic":"2486020469,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fcccb9014-ce15-4032-81ac-222b3d621cb4%2F4DNFIVILEERC.hic":"2052537210,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F21a07867-4007-4ca5-b066-25d3168208dc%2F4DNFIF7Q43N4.hic":"2091773428,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff738de0f-358b-44bf-97dd-644c8d9b1b1c%2F4DNFID56VJGW.hic":"878913568,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fda97c1d4-bb92-4a77-92a7-f7960f88b9dc%2F4DNFIYUR29KO.hic":"983915575,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F54ea363a-99e7-4f55-861e-1644acab7939%2F4DNFIUDPGHO8.hic":"905253594,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fdcd66a07-55ee-48d9-a157-419cf4ee3eef%2F4DNFISWC2N8T.hic":"1233576358,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F40363837-7466-4a1d-b20d-a66d1670b700%2F4DNFICMPHDMI.hic":"516590777,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0b3fa4e6-caeb-40b4-8942-e9c0b03dfe4f%2F4DNFIKMKN736.hic":"634310295,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb6a34050-d52b-4880-91cf-d3fe4b0ce982%2F4DNFIN5NLS49.hic":"650451131,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8e63a47b-9fd4-4772-8b0c-10ee589ffb16%2F4DNFI4P8UBRL.hic":"705655033,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7d92b666-30cc-4838-9d46-c1f11cee3d3c%2F4DNFISNC3LAI.hic":"176146197,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F17f7dc63-a1bc-4970-b389-87d9ee93b753%2F4DNFIVBWPFD7.hic":"749678512,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff8897333-4791-4a83-9444-a653e24aee13%2F4DNFITMQRXB7.hic":"254477361,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8712bf31-33d0-4562-ab0b-a1e9cf4fd30c%2F4DNFIUYD3HBY.hic":"995625724,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fbfaf6383-9cc6-4b5c-9b20-d3bf2e8c3495%2F4DNFIRRSC7P9.hic":"1149985362,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb0b70598-5d17-4e0a-8831-6cbe697e69e2%2F4DNFIWKR8FP6.hic":"1151628407,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fccc094a8-23ce-4fd8-9c4a-41f07c045c8f%2F4DNFIQ74RSUY.hic":"931695969,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8eda16f3-af5e-4f1f-b46d-c74df44b76aa%2F4DNFI9IIO5PW.hic":"1077740364,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff283637b-cf2c-4412-ba00-0e3d7e279fad%2F4DNFI8WGJG19.hic":"812086456,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7ad8438f-d3d9-42d8-88bf-42845a0dc2d0%2F4DNFIQ5CCESJ.hic":"652559720,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F70e3bdcc-caf4-4822-b9c5-85234873db7a%2F4DNFIWTZHB4H.hic":"760694196,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F56ed767d-cd8a-4d38-8047-ed1e8bc8cd19%2F4DNFIENYQCDP.hic":"1159428005,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa912fff9-5f90-42b1-a3a6-cbb9eb2cf861%2F4DNFIFATZWPD.hic":"1033325746,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F21338ea5-fdee-4ad8-b61c-608fc6cec4bc%2F4DNFI7YRXKEO.hic":"388142539,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff0f88647-5631-437b-b48a-4603915e3714%2F4DNFIUY3J7EW.hic":"407344788,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F16926af8-ac3b-4f32-97d5-6c0dc6f1596a%2F4DNFIRKUYKP4.hic":"893352368,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F93e39aec-6cde-4c5b-bcdf-283faa3163a2%2F4DNFIAQDBJZP.hic":"489922022,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0dc0b1ba-5509-4464-9814-dfe103ff09a0%2F4DNFIC1CLPK7.hic":"565748333,37769","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fb50964c7-b025-49d9-b1ed-289bedb59678%2F4DNFI3A3VYWU.hic":"4597459343,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff4390cea-b330-4022-88c1-9ff8c0a786f7%2F4DNFI6JJQKFJ.hic":"3678393678,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F70c0f730-5da1-4863-9b7a-6cdd31066cff%2F4DNFIK61ILGM.hic":"3324300994,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F14b14ac4-ab59-4754-9c43-eacd9d0638e2%2F4DNFIYD8LO9Z.hic":"3227227120,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7386f953-8da9-47b0-acb2-931cba810544%2F4DNFIOTPSS3L.hic":"253942497,7557","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff6b5d8bd-27dc-4415-a320-53405a16db85%2F4DNFI525PKU5.hic":"305089653,7557","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F1f922dbc-637b-4c43-b816-f604f0e79ad1%2F4DNFI8Y9SRP2.hic":"1438589609,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F6a36d686-716c-4ba8-a9c3-fa8311791d3c%2F4DNFIP25GZGA.hic":"1419100109,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0e535542-2cf2-46e4-ba10-7a0b946a7fb2%2F4DNFITPO1WTY.hic":"3885296184,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0c17d228-5052-4c83-880e-af05118e6929%2F4DNFIG4X5Z5F.hic":"2159245890,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc3977c00-525b-4556-9a27-061707f8cb76%2F4DNFIXLYR32S.hic":"587852728,21916","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3f856506-cbc5-4211-a29d-48a7530c622e%2F4DNFIWI3V5LI.hic":"2318237793,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F38f77979-5eb7-4b6f-9a60-c2451185db98%2F4DNFI2DGL7LH.hic":"2068150664,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe0992a75-7727-405e-95ac-aa97141b51c1%2F4DNFI1VSO8JP.hic":"1807949651,21916","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe925f1aa-2e7b-44e7-bfa8-2084a613ab13%2F4DNFIV5O2ZYO.hic":"2242134377,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F803a6d3c-3972-4939-8ff2-d195c5192090%2F4DNFIEWEWQ8D.hic":"2981341325,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F25104375-a588-46e6-a382-663cee6c332f%2F4DNFICSTCJQZ.hic":"14592996888,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F927aa8a5-24a5-43b7-807a-1e99ac321459%2F4DNFICEGAHRC.hic":"15431307603,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8c380474-12cd-41f4-b86f-2a29faf12eec%2F4DNFIY3XPKPO.hic":"2550999291,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F77da562e-d0ec-45a8-8764-14fa16d995a1%2F4DNFIK9PS9GM.hic":"3401011629,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F11b26222-d480-40a7-8d53-3ad8500396cb%2F4DNFIF4Y74JR.hic":"2127593378,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F93df02c6-1047-43f6-afae-d3598b61eeea%2F4DNFIBBKG9KD.hic":"5724446278,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F6cd4378a-8f51-4e65-99eb-15f5c80abf8d%2F4DNFIT4I5C6Z.hic":"5419655766,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F067881e5-563d-40de-a9e3-caccad887fbc%2F4DNFI2U38HCE.hic":"14749043471,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fcb3da9ad-7afe-4d0c-9c2d-261181e7a95c%2F4DNFIETP228R.hic":"9401474797,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F185b7bcc-7bb7-41b7-9ebe-92d4fe159431%2F4DNFIXKC48TK.hic":"11624295594,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F18459b84-dd43-4af6-a05f-bcb773096322%2F4DNFIFPGOWJ6.hic":"2843730862,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ffde1e48c-4a0d-4bb1-b84a-e0e45f9a0aa3%2F4DNFIIRMBE8Y.hic":"5820677927,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fbabed539-1f0f-4e87-8815-fde596e6024c%2F4DNFIVUGNDD7.hic":"5170782436,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7d00531a-e616-469b-af52-5b028270e2ce%2F4DNFIFLJLIS5.hic":"18917549985,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7a9dad53-b8af-4cb6-9ce3-5c38e4a855c7%2F4DNFIOX3BGNE.hic":"5482775936,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F82fd7b7e-5f47-48d5-bf0d-daaa48a4674d%2F4DNFISPUVQHA.hic":"2177864938,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F4c6680f3-9cf6-452f-9dc5-ecebf376775d%2F4DNFI8649RQJ.hic":"3288850368,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F2395f001-19d9-4000-9f00-dae3dea708d6%2F4DNFIE8T8JZ8.hic":"1383191843,21916","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F24464fa8-bf96-483c-8e9a-c2f626ad6e19%2F4DNFIBM714BP.hic":"1765204569,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F918fc048-fa27-41d2-a63a-d50c511fbb9a%2F4DNFI6CWNUFL.hic":"2431120602,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7ff5a0d1-8e54-4cf0-9fe7-339f147c78da%2F4DNFIZ4F74QR.hic":"3211825957,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F355f0412-cb17-452a-b15c-aba16c5a742c%2F4DNFIOUVOX3R.hic":"5547401083,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3cac91c5-160a-4b91-a91e-edc309318dd5%2F4DNFIVTDXW6X.hic":"4797344498,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe9ac9ec5-6221-4f39-951a-1c5054fc9f1c%2F4DNFICA8Y9TN.hic":"4277557869,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F46f62222-b50a-428b-938b-5444951600eb%2F4DNFIDWM3HN5.hic":"4374808431,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F50e4f2a1-9cb6-4192-8199-64d354bfdf96%2F4DNFIBK5TB3N.hic":"3757387253,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe4cdd5a8-1a45-4c6a-906b-a9603260d4c8%2F4DNFI3JYF9VS.hic":"5260534916,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc8164e99-5778-427d-be26-f0e1b62400f0%2F4DNFIP1GNKUO.hic":"7589365689,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0d72e78a-fc87-4716-8b8e-6dc5650ff2ef%2F4DNFIQYQWPF5.hic":"22022259901,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fac58fc15-48c2-4eec-a689-23b677b4b6e7%2F4DNFIW6H9U3S.hic":"6810897169,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F31811e40-e3ca-4456-8ba6-2ee66d6c7104%2F4DNFI7J8BQ4P.hic":"7188744676,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F62d81a52-d2cb-4bbd-8510-0fe120e786e0%2F4DNFIA3AKFSU.hic":"1763730692,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fae0b7513-d1a0-4f27-a9d3-348837f42cb6%2F4DNFID68JQY9.hic":"2422880133,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fae6a1a7e-1d2d-4fd2-a89f-1799abac8a9c%2F4DNFIL1FQDXE.hic":"1543814834,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F80d343c9-bd60-468a-803d-c3e351a958bc%2F4DNFITSIPCSK.hic":"2344682115,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff2d61195-a3a6-4d50-b928-546ca67546cb%2F4DNFIJ88LYHR.hic":"3362742962,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F31052aba-773a-4500-961b-e0a518245b0c%2F4DNFIJIPWD63.hic":"2529548812,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc93d0710-3fbf-40cc-b0eb-878e2aa659e4%2F4DNFIZUP2BBI.hic":"491996147,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F8660baeb-5be1-4ba5-93e4-66499e9a4587%2F4DNFIEBC4AF3.hic":"2993048734,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff6d08fbc-b836-4776-82ad-8b1b277ae837%2F4DNFI5VO3E1W.hic":"1949322679,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3af004a2-a6fa-46dc-8be8-898b847a77be%2F4DNFIFDGVWLU.hic":"2456400803,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fbd613b4b-2422-492c-8d8f-8afba9c8a182%2F4DNFITVGFNYZ.hic":"1411204423,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc340694f-14f3-4638-b09b-98220c20039a%2F4DNFIOW9TTC1.hic":"2611370588,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3effa71b-6aa3-4265-87ba-f8d709d778d7%2F4DNFIOAA3ZEQ.hic":"3123195980,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fde75cf8b-9ce1-44fc-8b7b-ca0adea6bae9%2F4DNFIA5ID1S6.hic":"3496246968,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F714f775d-a5a4-4314-83f8-016b9d73200b%2F4DNFIZYU7V81.hic":"4245592042,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F5ca518af-6e1e-4777-b67b-0fe7f039ce58%2F4DNFIRV6PVUX.hic":"3981520466,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc29b57d5-c263-4372-b396-ab4f55682f5d%2F4DNFIMEANFBY.hic":"3999623376,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F4196d3ef-161a-4c18-a57e-005165c6b32a%2F4DNFIGLGQXLC.hic":"4105683321,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe10828b5-9519-4ceb-81e7-7228bfd890de%2F4DNFILS2HLXC.hic":"3804942111,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Feaac88c7-9bdc-4b1e-aa9f-e675520dfffa%2F4DNFIQS8853L.hic":"5287726781,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Faab371b1-bc8d-4e83-998e-5bb977c443ca%2F4DNFIVBYCYGS.hic":"4657988157,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fdb116add-af8c-4a3b-b106-9f704ba0a175%2F4DNFIE4WWHMF.hic":"5116727268,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F033366e2-05a2-4381-9d48-90122892a9e0%2F4DNFIKDUUC3C.hic":"45638237,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F7284a446-442d-4a46-aae5-84987e75a7af%2F4DNFIJ5HIRA2.hic":"62201052,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F876649a3-6dd3-463a-8b17-5752a98a89c5%2F4DNFIXDFC7EM.hic":"69878143,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3cb4ce4d-d474-459f-8b8a-2159d8df8068%2F4DNFIO35EOVR.hic":"70153114,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F5c5612fa-18c2-47fb-8074-693b1054e254%2F4DNFI57QGL6U.hic":"54605055,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F70c1472d-cf3a-41d7-8682-cd03b7cc978d%2F4DNFI2AGEBE5.hic":"67930121,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F2bf4cce8-6e03-422b-a190-e51d4a07d501%2F4DNFI1E6NJQJ.hic":"4893181511,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0eb3aa56-8a23-435d-a07b-8bb545e8d708%2F4DNFI2DNFM1A.hic":"60466977,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F1201682a-a223-482d-913d-3c3972b8eb65%2F4DNFIIRIHBR2.hic":"48961678,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F6aee7913-6356-43cf-affa-f2b60dd478f6%2F4DNFIKXNMT46.hic":"39095246,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F357139a3-c9a5-4343-b0a4-b41c45fd03fd%2F4DNFIRV7IRJP.hic":"70916718,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F76be3061-6259-42be-a917-19dcba41517b%2F4DNFIFX1XYKZ.hic":"229197441,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ff60c348a-a62c-43c3-ac85-f6c28b5f823f%2F4DNFI64CJUZ5.hic":"112428610,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fbd0b0a14-9703-49af-bb36-2359f96d4d0e%2F4DNFIBPL2HL1.hic":"73972428,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F79ac278d-83f7-4c1f-91b2-05c8018c1426%2F4DNFIBRSIPE4.hic":"415430378,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F0c3b8141-8e67-4211-80dd-3bae88f9e537%2F4DNFIDLDVY14.hic":"112747303,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F2ae703d2-d85c-4ac4-9ce1-14d653927675%2F4DNFI4R1II4P.hic":"210565448,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F76e641af-90be-49f8-b126-12c20f856159%2F4DNFINMLRY95.hic":"1590865292,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3b416382-ae5d-469f-9e9a-85a3e2ce9793%2F4DNFI8KBXYNL.hic":"4626496956,22663","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa27589a6-86b2-43a2-8218-1f2232d551e6%2F4DNFI53R5IKA.hic":"1536016455,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fdd3999f5-b36e-4154-a6b9-446656959a3a%2F4DNFIAWVDQ8C.hic":"2210273411,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fc377953b-0e61-426b-a905-abab2d5a3002%2F4DNFI9VXTBE2.hic":"3384365692,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F2dbe0377-1db2-4aae-af2b-d87dff728035%2F4DNFIT96Z365.hic":"7692311974,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fdcfcb009-f006-4ab8-a4c7-af72be58c12c%2F4DNFITUOMFUQ.hic":"6592120312,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F67f9073d-b2c5-474e-b3d5-7d72cde555cd%2F4DNFIHLQKDN8.hic":"2647703964,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F76968cc8-fb9f-485b-85b2-c9289067194b%2F4DNFIL9M97T2.hic":"6186798917,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F87d9330b-8d2c-4e9d-85bb-02e572de7a68%2F4DNFIDWGZLHX.hic":"4379708168,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Ffc01b381-3665-4225-88ee-2e5e9ecb7324%2F4DNFIMEG1QIC.hic":"3587146533,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3144a03c-15c3-4bf9-95f8-ffad2640a1bf%2F4DNFIWSB66VX.hic":"1529739069,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fd7d3aac0-ba66-494b-ba0c-147631084b98%2F4DNFIH7TH4MF.hic":"6896300679,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F4b13bd19-fbd1-4c68-8855-4f0158d1ce47%2F4DNFIHKWIZ9T.hic":"1954878455,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F3d04e286-30d4-4add-a806-7a929d36419e%2F4DNFIZBBX795.hic":"1350142414,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Faa26f261-a88a-4cac-9118-ff8e90ab6f61%2F4DNFI9ZWZ5BS.hic":"3410552807,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F24e516ce-0b49-4476-b818-cc96471d8765%2F4DNFIPAI8XB5.hic":"4168518737,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fac3b06b5-46d4-4c1e-97e9-9a4f353473a7%2F4DNFI1OUWFSC.hic":"10766406904,21916","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F76c6aa27-895f-4e82-8ed8-7a85aca84490%2F4DNFIX4PJKXZ.hic":"1463157350,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fe6fbe03a-997b-4d72-a3cc-f1ed7bd88a92%2F4DNFIZGCA8AH.hic":"1597664180,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F61d99a87-4ec6-4116-be99-b483999641c4%2F4DNFI5CGQ46V.hic":"2870576870,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F271ea8cd-53b9-44c9-9fff-1bb5c444b54c%2F4DNFIOCW5AEM.hic":"2463600138,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2Fa98ca64a-861a-4a8c-92e9-586af457b1fb%2F4DNFI1UEG1HD.hic":"22480709268,25900","4dn-open-data-public.s3.amazonaws.com%2Ffourfront-webprod%2Fwfoutput%2F5809b32e-0aea-4cf5-a174-cf162d591a35%2F4DNFI9YAVTI1.hic":"3141182061,25900"};const Lv=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,zv=-32768,vl=8,_l=4,Gi=4,Hv=new Tv(100);class Rh{constructor(e){if(e.alert&&(this.alert=e.alert),this.config=e,this.loadFragData=e.loadFragData,this.fragmentSitesCache={},this.normVectorCache=new Mc(10),this.normalizationTypes=["NONE"],this.matrixCache=new Mc(10),this.blockCache=new Uv,e.file)this.file=e.file;else if(e.blob)this.file=new Nv(e.blob);else if(e.url||e.path&&!Lv){this.url=e.url||this.path,this.remote=!0;const t=new Sv(e);Pv(this.url)?this.file=new Bv(t,Hv):this.file=t}else throw e.path?Error("path property is deprecated, use NodeLocalFile"):Error("Arguments must include file, blob, url, or path")}async init(){this.initialized||(await this.readHeaderAndFooter(),this.initialized=!0)}async getVersion(){if(this.version===void 0){const e=await this.file.read(0,128);if(!e)return;const t=new Xe(new DataView(e));return this.magic=t.getString(),this.version=t.getInt(),this.version}else return this.version}async getMetaData(){return await this.init(),this.meta}async readHeaderAndFooter(){let e=await this.file.read(0,16);if(!e||e.byteLength===0)throw Error("File content is empty");let t=new Xe(new DataView(e));if(this.magic=t.getString(),this.version=t.getInt(),this.version<5)throw Error("Unsupported hic version: "+this.version);this.footerPosition=t.getLong(),await this.readFooter();const r=Object.values(this.masterIndex).reduce((c,h)=>Math.min(c,h.start),Number.MAX_VALUE)-16;e=await this.file.read(16,r),t=new Xe(new DataView(e)),this.genomeId=t.getString(),this.version>=9&&(this.normVectorIndexPosition=t.getLong(),this.normVectorIndexSize=t.getLong()),this.attributes={};let s=t.getInt();for(;s-- >0;)this.attributes[t.getString()]=t.getString();this.chromosomes=[],this.chromosomeIndexMap={};let a=t.getInt(),o=0;for(;a-- >0;){const c={index:o,name:t.getString(),size:this.version<9?t.getInt():t.getLong()};c.name.toLowerCase()==="all"&&(this.wholeGenomeChromosome=c,this.wholeGenomeResolution=Math.round(c.size*(1e3/500))),this.chromosomes.push(c),this.chromosomeIndexMap[c.name]=c.index,o++}this.bpResolutions=[];let l=t.getInt();for(;l-- >0;)this.bpResolutions.push(t.getInt());if(this.loadFragData){this.fragResolutions=[];let c=t.getInt();if(c>0)for(;c-- >0;)this.fragResolutions.push(t.getInt())}this.chrAliasTable={};for(let c of Object.keys(this.chromosomeIndexMap))c.startsWith("chr")?this.chrAliasTable[c.substr(3)]=c:c==="MT"?this.chrAliasTable.chrM=c:this.chrAliasTable["chr"+c]=c;this.meta={version:this.version,genome:this.genomeId,chromosomes:this.chromosomes,resolutions:this.bpResolutions}}async readFooter(){const e=this.version<9?8:12;let t=await this.file.read(this.footerPosition,e);if(!t)return null;let n=new Xe(new DataView(t));const r=this.version<9?n.getInt():n.getLong();let s=n.getInt();const a=s*196;for(t=await this.file.read(this.footerPosition+e,Math.min(a,r)),n=new Xe(new DataView(t)),this.masterIndex={};s-- >0;){const o=n.getString(),l=n.getLong(),c=n.getInt();this.masterIndex[o]={start:l,size:c}}if(this.expectedValueVectors={},this.version>5){const o=this.version<9?4:8;this.normExpectedValueVectorsPosition=this.footerPosition+o+r}return this}async printIndexStats(){let e=0,t=0,n;await await this.init();for(let r of Object.keys(this.masterIndex)){const s=this.masterIndex[r];e+=s.size,s.size>t&&(t=s.size,n=r)}console.log(`${t}  ${n}  ${this.config.url}`)}async getMatrix(e,t){const n=ps.getKey(e,t);if(this.matrixCache.has(n))return this.matrixCache.get(n);{const r=await this.readMatrix(e,t);return this.matrixCache.set(n,r),r}}async readMatrix(e,t){if(await this.init(),e>t){const a=e;e=t,t=a}const n=ps.getKey(e,t),r=this.masterIndex[n];if(!r)return;const s=await this.file.read(r.start,r.size);if(s)return ps.parseMatrix(s,this.chromosomes)}async getContactRecords(e,t,n,r,s,a=!1){await this.init();const o=this.chromosomeIndexMap[this.getFileChrName(t.chr)],l=this.chromosomeIndexMap[this.getFileChrName(n.chr)];if(o>l||o===l&&t.start>=n.end){const y=t;t=n,n=y}const h=await this.getBlocks(t,n,r,s);if(!h||h.length===0)return[];const f=[],d=t.start/s,u=t.end/s,p=n.start/s,m=n.end/s,F=Math.floor(d),g=Math.ceil(u),w=Math.floor(p),b=Math.ceil(m);for(let y of h)if(y){let v,T,A=e&&e!=="NONE";const C=this.getFileChrName(t.chr),k=this.getFileChrName(n.chr);if(A){const I=await this.getNormalizationVector(e,C,r,s),B=C===k?I:await this.getNormalizationVector(e,k,r,s);I&&B?(v=await I.getValues(F,g),T=await B.getValues(w,b)):A=!1}for(let I of y.records)if(a||I.bin1>=d&&I.bin1<u&&I.bin2>=p&&I.bin2<m)if(A){const B=I.bin1,M=I.bin2,N=v[B-F]*T[M-w];if(N!==0&&!isNaN(N)){const x=I.counts/N;f.push(new Xr(B,M,x))}}else f.push(I);this.percentile95===void 0&&y.records.length>10&&(this.percentile95=qv(y.records,95))}return f}async getBlocks(e,t,n,r){const s=(g,w)=>`${w.getKey()}_${g}`;await this.init();const a=this.getFileChrName(e.chr),o=this.getFileChrName(t.chr),l=this.chromosomeIndexMap[a],c=this.chromosomeIndexMap[o];if(l===void 0)return console.log("No chromosome named: "+e.chr),[];if(c===void 0)return console.log("No chromosome named: "+t.chr),[];const h=await this.getMatrix(l,c);if(!h)return console.log("No matrix for "+e.chr+"-"+t.chr),[];const f=h.getZoomData(r,n);if(!f){let g=`No data avalailble for resolution: ${r}  for map ${e.chr}-${t.chr}`;throw new Error(g)}const d=f.getBlockNumbers(e,t,this.version),u=[],p=[];for(let g of d){const w=s(g,f);this.blockCache.has(r,w)?u.push(this.blockCache.get(r,w)):p.push(g)}const m=p.map(g=>this.readBlock(g,f)),F=await Promise.all(m);for(let g of F)g&&this.blockCache.set(r,s(g.blockNumber,f),g);return u.concat(F)}async readBlock(e,t){const n=await t.blockIndex.getBlockIndexEntry(e);if(n){let r=await this.file.read(n.filePosition,n.size);if(!r)return;r=new Es(new Uint8Array(r)).buffer;const a=new Xe(new DataView(r)),o=a.getInt(),l=[];if(this.version<7)for(let c=0;c<o;c++){const h=a.getInt(),f=a.getInt(),d=a.getFloat();l.push(new Xr(h,f,d))}else{const c=a.getInt(),h=a.getInt(),f=a.getByte()===1,d=this.version<9?!1:a.getByte()==1,u=this.version<9?!1:a.getByte()==1,p=a.getByte();if(p===1){const m=u?a.getInt():a.getShort();for(let F=0;F<m;F++){const g=u?a.getInt():a.getShort(),w=h+g,b=d?a.getInt():a.getShort();for(let y=0;y<b;y++){const v=d?a.getInt():a.getShort(),T=c+v,A=f?a.getFloat():a.getShort();l.push(new Xr(T,w,A))}}}else if(p==2){const m=a.getInt(),F=a.getShort();for(let g=0;g<m;g++){const w=Math.floor(g/F),b=g-w*F,y=c+b,v=h+w;if(f){const T=a.getFloat();isNaN(T)||l.push(new Xr(y,v,T))}else{const T=a.getShort();T!=zv&&l.push(new Xr(y,v,T))}}}else throw new Error("Unknown block type: "+p)}return new Ov(e,t,l,n)}else return}async hasNormalizationVector(e,t,n,r){await this.init();let s;if(Number.isInteger(t))s=t;else{const l=this.getFileChrName(t);s=this.chromosomeIndexMap[l]}const a=Cl(e,s,n.toString(),r),o=await this.getNormVectorIndex();return o&&o[a]}async isNormalizationValueAvailableAtResolution(e,t,n,r){let s;if(Number.isInteger(t))s=t;else{const c=this.getFileChrName(t);s=this.chromosomeIndexMap[c]}const a=await this.getNormVectorIndex(),o=Cl(e,s,n.toString(),r);return a[o]!==void 0}async getNormalizationVector(e,t,n,r){await this.init();let s;if(Number.isInteger(t))s=t;else{const F=this.getFileChrName(t);s=this.chromosomeIndexMap[F]}const a=Cl(e,s,n.toString(),r);if(this.normVectorCache.has(a))return this.normVectorCache.get(a);const o=await this.getNormVectorIndex();if(!o){console.log("Normalization vectors not present in this file");return}if(await this.isNormalizationValueAvailableAtResolution(e,t,n,r)===!1){const F=`Normalization option ${e} not available at resolution ${r}. Will use NONE.`;console.log(F),this.alert&&this.alert(F);return}const c=o[a],h=await this.file.read(c.filePosition,8);if(!h)return;const f=new Xe(new DataView(h)),d=this.version<9?f.getInt():f.getLong(),u=this.version<9?vl:_l,p=this.version<9?c.filePosition+4:c.filePosition+8,m=new Mh(this.file,p,d,u);return this.normVectorCache.set(a,m),m}async getNormVectorIndex(){if(!(this.version<6)){if(!this.normVectorIndex){if(!this.config.nvi&&this.remote&&this.url){const e=new URL(this.url),t=encodeURIComponent(e.hostname+e.pathname);yu.hasOwnProperty(t)&&(this.config.nvi=yu[t])}if(this.config.nvi){const e=decodeURIComponent(this.config.nvi).split(","),t={start:parseInt(e[0]),size:parseInt(e[1])};return this.readNormVectorIndex(t)}else try{return await this.readNormExpectedValuesAndNormVectorIndex(),this.normVectorIndex}catch(e){e.code==="416"||e.code===416?this.normExpectedValueVectorsPosition=void 0:console.error(e)}}return this.normVectorIndex}}async getNormalizationOptions(){return await this.getNormVectorIndex(),this.normalizationTypes}async readNormVectorIndex(e){await this.init(),this.normalizationVectorIndexRange=e;const t=await this.file.read(e.start,e.size),n=new Xe(new DataView(t));this.normVectorIndex={};let r=n.getInt();for(;r-- >0;)this.parseNormVectorEntry(n);return this.normVectorIndex}async readNormExpectedValuesAndNormVectorIndex(){if(await this.init(),this.normExpectedValueVectorsPosition===void 0)return;const e=await this.skipExpectedValues(this.normExpectedValueVectorsPosition);let t=Gi,n=await this.file.read(e,Gi);if(n.byteLength===0)return;const s=new Xe(new DataView(n)).getInt(),a=s*30,o={start:e+t,size:a};n=await this.file.read(o.start,o.size),this.normalizedExpectedValueVectors={},this.normVectorIndex={},await l.call(this,s,n),this.config.nvi=e.toString()+","+t;async function l(c,h){const f=new Xe(new DataView(h));for(;c-- >0;){if(f.available()<100){c++,t+=f.position;const d=Math.max(1e3,c*30),u={start:e+t,size:d},p=await this.file.read(u.start,u.size);return l.call(this,c,p)}this.parseNormVectorEntry(f)}t+=f.position}}async skipExpectedValues(e){const t=this.version,n=new Mv({file:this.file,size:256e3}),r={start:e,size:Gi},s=await n.read(r.start,r.size),o=new Xe(new DataView(s)).getInt();if(o===0)return e+Gi;return l(e+Gi,o);async function l(c,h){let f={start:c,size:500},d=0,u=c,p=await n.read(f.start,f.size),m=new Xe(new DataView(p));m.getString(),m.getString(),m.getInt();const F=t<9?m.getInt():m.getLong();d+=m.position+F*(t<9?vl:_l),f={start:c+d,size:Gi},p=await n.read(f.start,f.size),m=new Xe(new DataView(p));const g=m.getInt();return d+=Gi+g*(Gi+(t<9?vl:_l)),h--,h===0?u+d:l(u+d,h)}}getZoomIndexForBinSize(e,t){t=t||"BP";let n;if(t==="BP")n=this.bpResolutions;else if(t==="FRAG")n=this.fragResolutions;else throw new Error("Invalid unit: "+t);for(let r=0;r<n.length;r++)if(n[r]===e)return r;return-1}parseNormVectorEntry(e){const t=e.getString(),n=e.getInt(),r=e.getString(),s=e.getInt(),a=e.getLong(),o=this.version<9?e.getInt():e.getLong(),l=t+"_"+n+"_"+r+"_"+s;this.normalizationTypes.includes(t)||this.normalizationTypes.push(t),this.normVectorIndex[l]={filePosition:a,size:o}}getFileChrName(e){return this.chrAliasTable.hasOwnProperty(e)?this.chrAliasTable[e]:e}}function Cl(i,e,t,n){return i+"_"+e+"_"+t+"_"+n}function Pv(i){return i.indexOf("drive.google.com")>=0||i.indexOf("www.googleapis.com/drive")>0}class Ov{constructor(e,t,n,r){this.blockNumber=e,this.zoomData=t,this.records=n,this.idx=r}}class Uv{constructor(){this.resolution=void 0,this.map=new Mc(6)}set(e,t,n){this.resolution!==e&&this.map.clear(),this.resolution=e,this.map.set(t,n)}get(e,t){return this.resolution===e?this.map.get(t):void 0}has(e,t){return this.resolution===e&&this.map.has(t)}}function qv(i,e){const t=i.map(r=>r.counts);t.sort(function(r,s){return r-s});const n=Math.floor(e/100*i.length);return t[n]}class Vv{constructor(e,t){this.config=e,this.genome=t,this.hicFile=e._hicFile?e._hicFile:new Rh(e),e._hicFile=void 0}async getHeader(){return await this.hicFile.init(),this.hicFile}async getFeatures({chr:e,start:t,end:n,bpPerPixel:r,visibilityWindow:s}){this.hicFile.initialized||await this.hicFile.init();const a=this.hicFile.bpResolutions,o=a[a.length-1];return(await this.hicFile.getContactRecords(void 0,{chr:e,start:t,end:n},{chr:"celltype",start:0,end:1e8},"BP",o)).map(h=>{const f=h.bin1*o,d=f+o;return{chr:e,start:f,end:d,value:h.counts,sample:h.bin2.toString()}})}supportsWholeGenome(){return!1}}function P0(i,e){const t=new Set(i.attributeNames),n=e[0];if(i.getAttributes(n)===void 0)return!1;{const s=Object.keys(i.getAttributes(n));for(const a of s)if(t.has(a)===!1)return!1}return!0}var Us;class ba extends mt{constructor(t,n){super(t,n);ct(this,Us,new Map)}init(t){if(super.init(t),this.type=t.type||"seg",this.type==="maf"&&(this.type="mut"),this.isLog=t.isLog,this.displayMode=t.displayMode||"EXPANDED",this.height=t.height||300,this.maxHeight=t.maxHeight||500,this.squishedRowHeight=t.sampleSquishHeight||t.squishedRowHeight||2,this.expandedRowHeight=t.sampleExpandHeight||t.expandedRowHeight||13,this.sampleHeight=this.squishedRowHeight,this.sampleKeys=[],t.samples){for(let r of t.samples)this.sampleKeys.push(r);this.explicitSamples=!0}if(t.color)this.color=t.color;else if(t.colorTable)this.colorTable=new Sn(t.colorTable);else switch(this.type){case"mut":this.colorTable=new Sn($v);break;case"shoebox":t.colorScale&&(this.sbColorScale=fo.parse(t.colorScale));break;default:this.posColorScale=new Tc(t.posColorScale||Qv),this.negColorScale=new Tc(t.negColorScale||Gv)}const n=Object.assign({},this.config);n.maxWGCount=n.maxWGCount||Number.MAX_SAFE_INTEGER,this.type==="shoebox"?(this.featureSource=new Vv(n,this.browser.genome),this.height=t.height||500,this.maxHeight=t.maxHeight||800,this.isLog=!1,this.squishedRowHeight=t.squishedRowHeight||1,this.displayMode=t.displayMode||"SQUISHED",this.visibilityWindow=t.visibilityWindow===void 0?1e6:t.visibilityWindow):this.featureSource=Wt(n,this.browser.genome),this.initialSort=t.sort}async postInit(){typeof this.featureSource.getHeader=="function"&&(this.header=await this.featureSource.getHeader(),this.disposed)||this.header&&this.setTrackProperties(this.header)}menuItemList(){const t=[];if(P0(this.browser.sampleInfo,this.sampleKeys)===!0){t.push("<hr/>"),t.push("Sort by attribute:");for(const s of this.browser.sampleInfo.attributeNames)if(this.sampleKeys.some(o=>{const l=this.browser.sampleInfo.getAttributes(o);return l&&l[s]})){let l=function(){const c=Ve(this,Us).get(s)||1;this.sortByAttribute(s,c),Ve(this,Us).set(s,c*-1),this.config.sort={option:"ATTRIBUTE",attribute:s,direction:c===1?"ASC":"DESC"}};const o=ve("<div>");o.html(`&nbsp;&nbsp;${s.split(_r.emptySpaceReplacement).join(" ")}`),t.push({object:o,click:l})}}const n={SQUISHED:"Squish",EXPANDED:"Expand",FILL:"Fill"};if(this.type==="shoebox"&&this.sbColorScale){let s=function(a){this.browser.inputDialog.present({label:"Color Scale Threshold",value:this.sbColorScale.threshold,callback:()=>{const o=Number(this.browser.inputDialog.value,10);o&&(this.sbColorScale.setThreshold(o),this.trackView.repaintViews())}},a)};t.push("<hr/>"),t.push({object:ve("<div>Set color scale threshold</div>"),dialog:s})}t.push("<hr/>"),t.push("DisplayMode:");const r=this.type==="seg"||this.type==="shoebox"?["SQUISHED","EXPANDED","FILL"]:["SQUISHED","EXPANDED"];for(let s of r){const a=ht(n[s],s===this.displayMode);t.push({object:ve(a),click:function(){this.displayMode=s,this.config.displayMode=s,this.trackView.checkContentHeight(),this.trackView.repaintViews(),this.trackView.moveScroller(this.trackView.sampleNameViewport.trackScrollDelta)}})}return t}hasSamples(){return!0}getSamples(){return{names:this.sampleKeys,height:this.sampleHeight,yOffset:0}}async getFeatures(t,n,r){const s=await this.featureSource.getFeatures({chr:t,start:n,end:r});if(this.updateSampleKeys(s),this.initialSort){const a=this.initialSort;if(a.option===void 0||a.option.toUpperCase()==="VALUE")this.sortByValue(a,s);else if(a.option.toUpperCase()==="ATTRIBUTE"&&a.attribute){const o=a.direction==="DESC"?1:-1;this.sortByAttribute(a.attribute,o)}this.initialSort=void 0}return s}draw({context:t,pixelTop:n,pixelWidth:r,pixelHeight:s,features:a,bpPerPixel:o,bpStart:l}){if(de.fillRect(t,0,n,r,s,{fillStyle:"rgb(255, 255, 255)"}),a&&a.length>0){if(this.checkForLog(a),this.type==="shoebox"&&!this.sbColorScale){const m=this.featureSource.hicFile.percentile95||2e3;this.sbColorScale=new fo({threshold:m,r:0,g:0,b:255})}const c={};this.sampleKeys.forEach(function(m,F){c[m]=F});let h;switch(this.displayMode){case"FILL":this.sampleHeight=s/this.sampleKeys.length,h=0;break;case"SQUISHED":this.sampleHeight=this.squishedRowHeight,h=0;break;default:this.sampleHeight=this.expandedRowHeight,h=1}const f=this.sampleHeight;for(let m of a)m.pixelRect=void 0;const d=n+s,u=l+r*o+1,p=o;this.sampleYStart=void 0;for(let m of a){if(m.end<l||m.start>u)continue;const F=m.sampleKey||m.sample;m.row=c[F];const g=m.row*f+h;if(this.sampleYStart===void 0&&(this.sampleYStart=g),g+f<n||g>d)continue;const b=Math.max(m.start,l);let y=Math.round((b-l)/p);const v=Math.min(m.end,u),T=Math.round((v-l)/p);let A=Math.max(1,T-y),C;this.color?typeof this.color=="function"?C=this.color(m):C=this.color:this.colorTable&&(C=this.colorTable.getColor(m.value.toLowerCase()));let k;if(this.type==="mut")k=f-2*h,A<3&&(A=3,y-=1);else if(this.type==="shoebox"){C=this.sbColorScale.getColor(m.value);let I=f;if(f<.25){const B=.1+2*Math.abs(B.value);I=Math.min(1,B*f)}k=I-2*h}else{let I=m.value;this.isLog||(I=Ze.log2(I/2)),I<-.1?C=this.negColorScale.getColor(I):I>.1?C=this.posColorScale.getColor(I):C="white";let B=f;if(f<.25){const M=.1+2*Math.abs(I);B=Math.min(1,M*f)}k=B-2*h}m.pixelRect={x:y,y:g,w:A,h:k},t.fillStyle=C,t.fillRect(y,g,A,k)}}}checkForLog(t){if(this.isLog===void 0){this.isLog=!1;for(let n of t)if(n.value<0){this.isLog=!0;return}}}computePixelHeight(t){if(!t)return 0;const n=this.displayMode==="SQUISHED"?this.squishedRowHeight:this.expandedRowHeight;return this.updateSampleKeys(t),this.sampleKeys.length*n}async sortByValue(t,n){const r=t.chr;let s,a;if(t.position?(s=t.position-1,a=s+1):(s=t.start,a=t.end),n||(n=await this.featureSource.getFeatures({chr:r,start:s,end:a})),!n)return;this.updateSampleKeys(n);const o={},l=t.direction==="ASC"?1:-1,c=()=>{const f=a-s+1;for(let d of n){if(d.end<s)continue;if(d.start>a)break;const u=Math.max(s,d.start),m=(Math.min(a,d.end)-u)/f,F=d.sampleKey||d.sample,g=o[F]||0;o[F]=g+m*d.value}this.sampleKeys.sort(function(d,u){let p=o[d],m=o[u];return p||(p=l*Number.MAX_VALUE),m||(m=l*Number.MAX_VALUE),p===m?0:p>m?l:l*-1})},h=()=>{for(let f of n){if(f.end<s)continue;if(f.start>a)break;const d=f.sampleKey||f.sample;(!o.hasOwnProperty(d)||f.value.localeCompare(o[d])>0)&&(o[d]=f.value)}this.sampleKeys.sort(function(f,d){let u=o[f]||"",p=o[d]||"";return l*u.localeCompare(p)})};this.type==="mut"?h():c(),this.trackView.repaintViews()}sortByAttribute(t,n){this.sampleKeys=this.browser.sampleInfo.getSortedSampleKeysByAttribute(this.sampleKeys,t,n),this.trackView.repaintViews()}clickedFeatures(t){const n=super.clickedFeatures(t),r=t.y;return n.filter(function(s){const a=s.pixelRect;return a&&r>=a.y&&r<=a.y+a.h})}hoverText(t){const n=this.clickedFeatures(t);if(n&&n.length>0)return`${n[0].sample}: ${n[0].value}`}popupData(t,n){n===void 0&&(n=this.clickedFeatures(t));const r=[];for(let s of n){r.length>0&&(r.push("<hr/>"),r.push("<hr/>"));const a=s._f||s,o=typeof a.popupData=="function"?a.popupData(this.type,this.browser.genome.id):this.extractPopupData(a);Array.prototype.push.apply(r,o)}return r}contextMenuItemList(t){const n=t.genomicLocation,r=a=>{const l=t.viewport.cachedFeatures;this.sortByValue(a,l)},s=t.referenceFrame.toBP(2.5);return["DESC","ASC"].map(a=>{const o=a==="DESC"?"descending":"ascending";return{label:this.type==="seg"||this.type==="shoebox"?`Sort by value (${o})`:`Sort by type (${o})`,click:()=>{const c={option:"VALUE",direction:a,chr:t.referenceFrame.chr,start:Math.floor(n-s),end:Math.floor(n+s)};r(c),this.config.sort=c}}})}get supportsWholeGenome(){return(this.config.indexed===!1||!this.config.indexURL)&&this.config.supportsWholeGenome!==!1}updateSampleKeys(t){if(this.explicitSamples)return;const n=new Set(this.sampleKeys);for(let r of t){const s=r.sampleKey||r.sample;n.has(s)||(this.sampleKeys.push(s),n.add(s))}}}Us=new WeakMap;const Qv={low:.1,lowR:255,lowG:255,lowB:255,high:1.5,highR:255,highG:0,highB:0},Gv={low:-1.5,lowR:0,lowG:0,lowB:255,high:-.1,highR:255,highG:255,highB:255},$v={indel:"rgb(0,200,0)","targeted region":"rgb(236,155,43)",truncating:"rgb(	150,0,0)","non-coding transcript":"rgb(0,0,150)",synonymous:"rgb(109,165,95)",silent:"rgb(109,135,80)",missense_mutation:"rgb(72,130,187)",missense:"rgb(72,130,187)","splice site":"rgb(143,83,155)",splice_region:"rgb(143,83,155)",nonsense:"rgb(216, 57,81)",nonsense_mutation:"rgb(216, 57,81)",frame_shift_del:"rgb(226,135,65)",frame_shift_ins:"rgb(226,135,65)",in_frame_del:"rgb(247,235,94)",in_frame_ins:"rgb(247,235,94)","*other*":"rgb(159,91,50)"};class Rs{constructor(e){this.paired=!0,this.firstAlignment=e,this.chr=e.chr,this.readName=e.readName,e.start<e.mate.position?(this.start=e.start,this.scStart=e.scStart,this.connectingStart=e.start+e.lengthOnRef,this.connectingEnd=e.mate.position):(this.start=e.mate.position,this.scStart=this.start,this.connectingStart=e.mate.position,this.connectingEnd=e.start),this.end=Math.max(e.mate.position,e.start+e.lengthOnRef),this.lengthOnRef=this.end-this.start;let t=Math.max(this.end,e.scStart+e.scLengthOnRef);this.scLengthOnRef=t-this.scStart}setSecondAlignment(e){this.secondAlignment=e;const t=this.firstAlignment;e.start>t.start?this.connectingEnd=e.start:this.connectingStart=e.start+e.lengthOnRef,this.start=Math.min(t.start,e.start),this.end=Math.max(t.start+t.lengthOnRef,e.start+e.lengthOnRef),this.lengthOnRef=this.end-this.start,this.scStart=Math.min(t.scStart,e.scStart);const n=Math.max(t.scStart+t.scLengthOnRef,e.scStart+e.scLengthOnRef);this.scLengthOnRef=n-this.scStart}containsLocation(e,t){const n=t?this.scStart:this.start,r=t?this.scLengthOnRef:this.lengthOnRef;return e>=n&&e<=n+r}alignmentContaining(e,t){return this.firstAlignment.containsLocation(e,t)?this.firstAlignment:this.secondAlignment&&this.secondAlignment.containsLocation(e,t)?this.secondAlignment:void 0}popupData(e){let t=this.firstAlignment.popupData(e);return this.secondAlignment&&(t.push("-------------------------------"),t=t.concat(this.secondAlignment.popupData(e))),t}isPaired(){return!0}isMateMapped(){return!0}isProperPair(){return this.firstAlignment.isProperPair()}get fragmentLength(){return Math.abs(this.firstAlignment.fragmentLength)}get firstOfPairStrand(){return this.firstAlignment.firstOfPairStrand}get pairOrientation(){return this.firstAlignment.pairOrientation}hasTag(e){return this.firstAlignment.hasTag(e)||this.secondAlignment&&this.secondAlignment.hasTag(e)}getGroupValue({option:e,tag:t}){switch(e){case"strand":return this.isNegativeStrand()?"-":"+";case"FIRST_IN_PAIR_STRAND":return this.isPaired()?this.isFirstOfPair()?this.isNegativeStrand()?"-":"+":this.isSecondOfPair()?this.isNegativeStrand()?"+":"-":void 0:void 0;case"START":return this.start;case"INSERT_SIZE":return this.fragmentLength;case"MATE_CHR":return this.mate?this.mate.chr:void 0;case"MQ":return this.mq;case"ALIGNED_READ_LENGTH":return this.lengthOnRef;case"TAG":return this.tags()[t];case"PHASE":return this.tags().HP;case"READ_ORDER":return this.isPaired()&&this.isFirstOfPair()?"FIRST":this.isPaired()&&this.isSecondOfPair()?"SECOND":"";default:return}}}const dn=class dn{static getKey(e,t,n){const r=""+e+t+n;return dn.instances.has(r)||dn.instances.set(r,new dn(e,t,n)),dn.instances.get(r)}constructor(e,t,n){this.base=e,this.strand=t,this.modification=n,this.canonicalBase=this.strand==="+"?this.base:Fh(this.base)}getCanonicalBase(){}toString(){return""+this.base+this.strand+this.modification}static compare(e,t){const n=e.modification,r=t.modification;return n===r?e.strand.charAt(0)-t.strand.charAt(0):Wn.has(n)&Wn.has(r)?Wn.get(n)-Wn.get(r):Wn.has(n)?1:Wn.has(r)?-1:n>r?1:-1}};ke(dn,"instances",new Map);let Cr=dn;const Wn=new Map(["NONE_C","NONE_T","NONE_G","NONE_A","m","h","f","c","C","g","e","b","T","U","a","A","o","G","n","N"].map((i,e)=>[i,e]));class jv{constructor(e,t,n,r){this.base=e,this.modification=n,this.strand=t,this.likelihoods=r,this.canonicalBase=this.strand=="+"?this.base:Fh(this.base),this.key=Cr.getKey(e,t,n)}containsPosition(e){return this.likelihoods.has(e)}is5mC(){return this.modification.equals("m")&&(this.base==="C"&&this.strand==="+"||this.base==="G"&&this.strand==="-")}fullName(){return zt.get(this.modification)||this.modification}}const zt=new Map;zt.set("m","5mC");zt.set("h","5hmC");zt.set("f","5fC");zt.set("c","5caC");zt.set("g","5hmU");zt.set("e","5fU");zt.set("b","5caU");zt.set("a","6mA");zt.set("o","8xoG");zt.set("n","Xao");zt.set("C","Unknown C");zt.set("T","Unknown T");zt.set("A","Unknown A");zt.set("G","Unknown G");zt.set("N","Unknown");const Au=new Map([["m","5mC"],["h","5hmC"],["f","5fC"],["c","5caC"],["g","5hmU"],["e","5fU"],["b","5caU"],["a","6mA"],["o","8xoG"],["n","Xao"],["C","Unknown C"],["T","Unknown T"],["A","Unknown A"],["G","Unknown G"],["N","Unknown"]]);function Rc(i){return Au.has(i)?Au.get(i):"Uknown"}function Wv(i,e,t,n){n&&(t=Hi(t));const r=[],s=i.split(";");let a=0;for(let o of s){const l=o.split(","),c=l[0].charAt(0),h=l[0].charAt(1),f=l[0].endsWith(".");if(l.length!=1){const d=l[0].endsWith(".")||l[0].endsWith("?")?l[0].substring(2,l[0].length-1):l[0].substring(2);let u=[];if(d.length>1)if(Kv(d))u.push(d);else for(let b=0;b<d.length;b++)u.push(d.substring(b,b+1));else u.push(d);const p=new Map;for(let b of u)p.set(b,new Map);let m=1,F=Number.parseInt(l[m++]),g=0,w=0;for(;g<t.length;){if(c==="N"||t[g]===c){const b=n?t.length-1-g:g;if(w===F){for(let y of u){const v=e?e[a++]:255;p.get(y).set(b,v)}if(m<l.length)F=Number.parseInt(l[m++]),w=0;else if(f)F=-1;else break}else{if(f)for(let y of u)p.get(y).set(b,0);w++}}g++}for(let b of u)r.push(new jv(c,h,b,p.get(b)))}}return r}function Kv(i){if(!i)return!1;const e=i.length;if(e==0)return!1;for(let t=0;t<e;t++){const n=i.charAt(t);if(n<"0"||n>"9")return!1}return!0}function hr(i){return i<0?i+256:i}class Yv{constructor(){ke(this,"allModifications",new Set);ke(this,"simplexModifications",new Set);ke(this,"maxLikelihoods",new Map);ke(this,"nomodLikelihoods",new Map);ke(this,"lastThreshold")}incrementCounts(e){if(!e.blocks)return;const t=e.getBaseModificationSets();if(t){for(let n of e.blocks)if(n.type!=="S")for(let r=0;r<n.len;r++){let s=r+n.seqOffset,a=0,o=-1,l,c=255;for(let h of t){const f=Cr.getKey(h.base,h.strand,h.modification);this.allModifications.add(f);const d=h.likelihoods;if(h.containsPosition(s)){const u=hr(d.get(s));c-=u,u>o&&(a=h.canonicalBase,o=u,l=f)}}if(a!=0){const h=n.start+r,f=Cr.getKey(a,"+","NONE_"+a);this.allModifications.add(f);const d=(u,p,m,F)=>{let g=F.get(m);g||(g=new Map,F.set(m,g));let w=g.get(u);w||(w=[],g.set(u,w)),w.push(p)};d(h,o,l,this.maxLikelihoods),c>o?d(h,c,f,this.nomodLikelihoods):d(h,o,l,this.nomodLikelihoods)}}}}getCount(e,t,n,r){this.lastThreshold=n;const s=n*255,a=r?this.nomodLikelihoods.get(t):this.maxLikelihoods.get(t);if(!a)return 0;const o=a.get(e);if(o){let l=0;for(let c of o)hr(c)>=s&&l++;return l}else return 0}getLikelihoodSum(e,t,n,r){this.lastThreshold=n;const s=n*255,o=(r?this.nomodLikelihoods.get(t):this.maxLikelihoods.get(t)).get(e);if(o){let l=0;for(let c of o){const h=hr(c);h>=s&&(l+=h)}return l}else return 0}popupData(e,t){const n=[];n.push("<b>Modifications with likelihood > "+this.lastThreshold*100+"%</b>");for(let r of this.maxLikelihoods.keys())if(this.maxLikelihoods.get(r).has(e)){let a=t==="basemod2";const o=this.getCount(e,r,this.lastThreshold,a);if(o>0){const c=this.getLikelihoodSum(e,r,this.lastThreshold,a)/o*.3921568,h=Rc(r.modification);n.push(h+" ("+r.base+r.strand+"): "+o+"  @ average likelihood "+Math.round(c)+"%")}}return n}computeSimplex(){const e=new Set(Array.from(this.allModifications).filter(t=>t.strand==="-").map(t=>t.modification));for(let t of this.allModifications)t.strand==="+"&&!e.has(t.modification)&&(this.simplexModifications.add(t.modification),this.simplexModifications.add("NONE_"+t.getCanonicalBase()))}}class vu{constructor(){this.alignments=[],this.score=void 0}findAlignment(e,t=!1){const n=(s,a)=>a>=s.start&&a<s.start+(t?s.fragmentLength:s.lengthOnRef);let r;for(let s=0;s<this.alignments.length;s++){const a=this.alignments[s];if(e>=a.start&&e<a.start+(t?a.fragmentLength:a.lengthOnRef)){a.paired?a.firstAlignment&&n(a.firstAlignment,e)?r=a.firstAlignment:a.secondAlignment&&n(a.secondAlignment,e)&&(r=a.secondAlignment):r=a;break}}return r}getSortValue({position:e,option:t,tag:n,sortAsPairs:r},s){t||(t="BASE");const a=this.findAlignment(e,r);if(a===void 0)return Number.MAX_VALUE;switch(t){case"NUCLEOTIDE":case"BASE":return o(a,s,e);case"strand":return a.strand?1:-1;case"START":return a.start;case"TAG":return a.tags()[n];case"READ_NAME":return a.readName;case"INSERT_SIZE":return-Math.abs(a.fragmentLength);case"GAP_SIZE":return-a.gapSizeAt(e);case"MATE_CHR":return a.mate?a.mate.chr:Number.MAX_VALUE;case"MQ":return a.mq===void 0?Number.MAX_VALUE:-a.mq;case"ALIGNED_READ_LENGTH":return-a.lengthOnRef;default:return Number.MAX_VALUE}function o(l,c,h){let f;const d=Math.floor(h)-c.start;if(d<c.sequence.length&&(f=c.sequence.charAt(d)),!f)return 0;const u=l.readBaseAt(h),p=l.readBaseQualityAt(h),m=c.coverageMap,F=Math.floor(h-m.bpStart),g=m.coverage[F];let w=0;if(l.insertions)for(let b of l.insertions)b.start===h&&(w=-g.ins);if(u){if(f=f.toUpperCase(),u==="N"&&w===0)w=2;else if((f===u||u==="=")&&w===0)w=4-p/1e3;else if(u==="X"||f!==u){const b=g["pos"+u]+g["neg"+u];w-=b+p/1e3}}else{const b=g.del;b>0?w-=b:w===0&&(w=1)}return w}}}var Dh={fr:{F1R2:"LR",F2R1:"LR",F1F2:"LL",F2F1:"LL",R1R2:"RR",R2R1:"RR",R1F2:"RL",R2F1:"RL"},rf:{R1F2:"LR",R2F1:"LR",R1R2:"LL",R2R1:"LL",F1F2:"RR",F2F1:"RR",F1R2:"RL",F2R1:"RL"},ff:{F2F1:"LR",R1R2:"LR",F2R1:"LL",R1F2:"LL",R2F1:"RR",F1R2:"RR",R2R1:"RL",F1F2:"RL"}};const _u=2;var Yi;class Mr{constructor(e,t,n,{samplingWindowSize:r,samplingDepth:s,alleleFreqThreshold:a,colorBy:o}){ct(this,Yi,[]);ke(this,"baseModificationKeys",new Set);this.alleleFreqThreshold=a===void 0?.2:a,this.samplingWindowSize=r||100,this.samplingDepth=s||1e3,this.chr=e,this.start=Math.floor(t),this.end=Math.ceil(n),this.length=n-t,this.coverageMap=new Zv(e,t,n,this.alleleFreqThreshold),this.downsampledIntervals=[],o&&o.startsWith("basemod")&&(this.baseModCounts=new Yv),this.alignments=[],this.pairsCache=new Map,this.downsampledReads=new Set,this.currentBucket=new Cu(this.start,this.start+this.samplingWindowSize,this),this.hasPairs=!1}pack({viewAsPairs:e,showSoftClips:t,expectedPairOrientation:n,groupBy:r,displayMode:s}){let a=this.allAlignments();e?a=Jv(a):a=e_(a),this.packAlignmentRows(a,t,n,r,s),this.alignments&&delete this.alignments}packAlignmentRows(e,t,n,r,s){ci(this,Yi,[]);const a=(l,c)=>{l.sort(function(F,g){return t?F.scStart-g.scStart:F.start-g.start});const h=new xu(c);let f,d=0,u=0;const p=new Set,m=()=>{f=new vu,h.push(f),d=0,u=0,p.clear()};for(m();l.length>0;)if(u>=0&&u<l.length){const F=l[u];p.add(F),f.alignments.push(F),d=t?F.scStart+F.scLengthOnRef+_u:F.start+F.lengthOnRef+_u,u=t_(l,g=>(t?g.scStart:g.start)>d,u)}else l=l.filter(F=>!p.has(F)),m();return h},o=(l,c)=>{l.sort(function(u,p){return u.start-p.start});const h=new xu(c),{start:f,end:d}=this.viewport.genomicRange();for(let u of l)if(u.end<f||u.start>d)Ve(this,Yi).push(u);else{const p=new vu;p.alignments.push(u),h.push(p)}return h};if(!e||e.length===0)return new Map;{const l=new Map;if(r)for(let f of e){const d=i_(f,r,n)||"";l.has(d)||l.set(d,[]),l.get(d).push(f)}else l.set("",e);const c=new Map,h=Array.from(l.keys()).sort(n_(r));for(let f of h){const d=l.get(f),u=s==="FULL"?o(d,f):a(d,f);c.set(f,u)}this.packedGroups=c}}push(e){this.hasPairs=this.hasPairs||e.isPaired(),this.coverageMap.incCounts(e);const t=e.getBaseModificationSets();if(t)for(let n of t)this.baseModificationKeys.add(n.key);if(this.baseModCounts&&this.baseModCounts.incrementCounts(e),this.downsampledReads.has(e.readName)){this.currentBucket.downsampledCount++;return}e.start>=this.currentBucket.end&&(this.finishBucket(),this.currentBucket=new Cu(e.start,e.start+this.samplingWindowSize,this)),this.currentBucket.addAlignment(e)}finish(){this.currentBucket!==void 0&&this.finishBucket(),this.hasAlignments=this.alignments.length>0,this.alignments.sort(function(e,t){return e.start-t.start}),this.baseModCounts&&this.baseModCounts.computeSimplex(),delete this.currentBucket,delete this.pairsCache,delete this.downsampledReads}contains(e,t,n){return this.chr===e&&this.start<=t&&this.end>=n}hasDownsampledIntervals(){return this.downsampledIntervals&&this.downsampledIntervals.length>0}finishBucket(){this.alignments=this.alignments.concat(this.currentBucket.alignments),this.currentBucket.downsampledCount>0&&this.downsampledIntervals.push(new Xv(this.currentBucket.start,this.currentBucket.end,this.currentBucket.downsampledCount))}allAlignments(){if(this.alignments)return this.alignments;if(this.packedGroups){const e=Array.from(this.packedGroups.values()).flatMap(t=>t.rows.flatMap(n=>n.alignments));if(Ve(this,Yi)&&Ve(this,Yi).length>0)for(let t of Ve(this,Yi))e.push(t);return e}else return[]}getMax(e,t){return this.coverageMap.getMax(e,t)}sortRows(e){if(this.packedGroups)for(let t of this.packedGroups.values())t.sortRows(e,this)}}Yi=new WeakMap;class Cu{constructor(e,t,{samplingDepth:n,downsampledReads:r,pairsCache:s}){this.start=e,this.end=t,this.alignments=[],this.downsampledCount=0,this.samplingDepth=n,this.downsampledReads=r,this.pairsCache=s,this.hasPairs=!1}addAlignment(e){this.hasPairs=this.hasPairs||e.isPaired();const t=this.hasPairs?Math.ceil(this.samplingDepth/2):this.samplingDepth;if(Oa(e)){const n=this.pairsCache.get(e.readName);if(n){n.setSecondAlignment(e),this.pairsCache.delete(e.readName);return}}if(this.alignments.length<t)if(Oa(e)){const n=new Rs(e);this.pairsCache.set(e.readName,n),this.alignments.push(n)}else this.alignments.push(e);else{const n=Math.floor(Math.random()*(t+this.downsampledCount-1));if(n<t){const r=this.alignments[n];if(this.pairsCache.has(r.readName)&&this.pairsCache.delete(r.readName),Oa(e)){const s=new Rs(e);this.pairsCache.set(e.readName,s),this.alignments[n]=s}else this.alignments[n]=e;this.downsampledReads.add(r.readName)}else this.downsampledReads.add(e.readName);this.downsampledCount++}}}class Zv{constructor(e,t,n,r){this.chr=e,this.bpStart=t,this.length=n-t,this.coverage=new Array(this.length),this.maximum=0,this.threshold=r,this.qualityWeight=!0}getMax(e,t){let n=0;const r=this.coverage.length;for(let s=0;s<r;s++){const a=this.bpStart+s;if(a>t)break;const o=this.coverage[s];a>=e&&o&&(n=Math.max(n,o.total))}return n}incCounts(e){var t=this;if(e.blocks===void 0?n(e):e.blocks.forEach(function(r){n(r)}),e.gaps){for(let r of e.gaps)if(r.type==="D"){const s=r.start-t.bpStart;for(let a=s;a<s+r.len;a++)a<0||(this.coverage[a]||(this.coverage[a]=new xl(t.threshold)),this.coverage[a].del++)}}if(e.insertions)for(let r of e.insertions){const s=r.start-this.bpStart;s<0||(this.coverage[s]||(this.coverage[s]=new xl(t.threshold)),this.coverage[s].ins++)}function n(r){if(r.type==="S")return;const s=e.seq,a=e.qual,o=r.seqOffset;for(let l=r.start-t.bpStart,c=0;c<r.len;l++,c++){t.coverage[l]||(t.coverage[l]=new xl(t.threshold));const h=s==null?"N":s.charAt(o+c),f=e.strand?"pos"+h:"neg"+h,d=a&&o+c<a.length?a[o+c]:30;t.coverage[l][f]+=1,t.coverage[l]["qual"+h]+=d,t.coverage[l].total+=1,t.coverage[l].qual+=d,t.maximum=Math.max(t.coverage[l].total,t.maximum)}}}getPosCount(e,t){const n=e-this.bpStart;if(n<0||n>=this.coverage.length)return 0;const r=this.coverage[n];switch(t){case"A":case"a":return r.posA;case"C":case"c":return r.posC;case"T":case"t":return r.posT;case"G":case"g":return r.posG;case"N":case"n":return r.posN;default:return 0}}getNegCount(e,t){const n=e-this.bpStart;if(n<0||n>=this.coverage.length)return 0;const r=this.coverage[n];switch(t){case"A":case"a":return r.negA;case"C":case"c":return r.negC;case"T":case"t":return r.negT;case"G":case"g":return r.negG;case"N":case"n":return r.negN;default:return 0}}getCount(e,t){return this.getPosCount(e,t)+this.getNegCount(e,t)}getTotalCount(e){const t=e-this.bpStart;return t>=0&&t<this.coverage.length?this.coverage[t].total:0}}class xl{constructor(e){this.qualityWeight=!0,this.posA=0,this.negA=0,this.posT=0,this.negT=0,this.posC=0,this.negC=0,this.posG=0,this.negG=0,this.posN=0,this.negN=0,this.pos=0,this.neg=0,this.qualA=0,this.qualT=0,this.qualC=0,this.qualG=0,this.qualN=0,this.qual=0,this.total=0,this.del=0,this.ins=0,this.threshold=e}hoverText(){const e=this.posA+this.posT+this.posC+this.posG+this.posN,t=this.negA+this.negT+this.negC+this.negG+this.negN;return`${this.total} (${e}+, ${t}-)`}isMismatch(e){const t=this.threshold*(this.qualityWeight&&this.qual?this.qual:this.total);let n=0;for(let r of["A","T","C","G"])r!==e&&(n+=this.qualityWeight&&this.qual?this["qual"+r]:this["pos"+r]+this["neg"+r]);return n>=t}}class Xv{constructor(e,t,n){this.start=e,this.end=t,this.counts=n}popupData(e){return[{name:"start",value:Math.floor(this.start+1)},{name:"end",value:this.end},{name:"# downsampled:",value:this.counts}]}}class xu{constructor(e){ke(this,"pixelTop",0);ke(this,"pixelBottom",0);ke(this,"rows",[]);this.name=this.name}push(e){this.rows.push(e)}get length(){return this.rows.length}sortRows(e,t){const n=[],r=[];for(let s of this.rows)s.findAlignment(e.position,e.sortAsPairs)!==void 0?n.push(s):r.push(s);n.sort((s,a)=>{const o=e.direction,l=s.getSortValue(e,t),c=a.getSortValue(e,t);if(c===void 0&&c!==void 0)return 1;if(l!==void 0&&c===void 0)return-1;const h=l>c?1:l<c?-1:0;return o===!0?h:-h});for(let s of r)n.push(s);this.rows=n}}function Oa(i){return i.isPaired()&&i.mate&&i.isMateMapped()&&i.chr===i.mate.chr&&(i.isFirstOfPair()||i.isSecondOfPair())&&!(i.isSecondary()||i.isSupplementary())}function Jv(i){const e=new Map;return i.map(n=>{if(Oa(n)){let r=e.get(n.readName);return r?(r.setSecondAlignment(n),e.delete(n.readName),r):(r=new Rs(n),e.set(n.readName,r),r)}else return n})}function e_(i){return i.flatMap(e=>e instanceof Rs?[e.firstAlignment,e.secondAlignment].filter(Boolean):[e])}function t_(i,e,t){let n=t-1,r=i.length;for(;1+n<r;){const s=n+(r-n>>1);e(i[s])?r=s:n=s}return r}function i_(i,e,t){let n,r,s;if(e.startsWith("tag:"))n=e.substring(4),e="tag";else if(e.startsWith("base:")){const a=e.split(":");a.length===3&&(e="base",r=a[1],s=Number.parseInt(a[2].replaceAll(",",""))-1)}switch(e){case"strand":return i.strand?"+":"-";case"firstOfPairStrand":const a=i.firstOfPairStrand;return a===void 0?"":a?"+":"-";case"mateChr":return i.mate&&i.isMateMapped()?i.mate.chr:"";case"pairOrientation":return Dh[t][i.pairOrientation]||"";case"chimeric":return i.tags().SA?"chimeric":"";case"supplementary":return i.isSupplementary?"supplementary":"";case"readOrder":return i.isPaired()&&i.isFirstOfPair()?"first":i.isPaired()&&i.isSecondOfPair()?"second":"";case"phase":return i.tags().HP||"";case"tag":return i.tags()[n]||"";case"base":if(i.chr===r&&i.start<=s&&i.end>s){const o=i.readBaseAt(s);return o||"GAP"}else return"";default:return}}function n_(i,e){switch(i){case"pairOrientation":return o_();case"strand":case"firstOfPairStrand":return s_;default:return i&&i.startsWith("base:")?r_:a_}}const Fa=new Map([["A",1],["T",2],["C",3],["G",4],["N",5],["GAP",5],["",7]]);function r_(i,e){return Fa.has(i)&&Fa.has(e)?Fa.get(i)-Fa.get(e):i.localeCompare(e,void 0,{sensitivity:"base"})}function s_(i,e){return i===e?0:i&&e?-i.localeCompare(e):i?1:-1}function a_(i,e){if(!i&&!e)return 0;if(i)if(e){if(i===e)return 0;if(mc(i)&&typeof mc(e))return Number.parseFloat(i)-Number.parseFloat(e);{let t=i.toString(),n=e.toString();return t.localeCompare(n,void 0,{sensitivity:"base"})}}else return-1;else return 1}function o_(i){const e=["LL","RR","RL","LR",""];return(t,n)=>e.indexOf(t)-e.indexOf(n)}class l_{constructor(e){const t=e.split(",");this.chr=t[0],this.start=parseInt(t[1]),this.strand=t[2].charAt(0),this.mapQ=parseInt(t[4]),this.numMismatches=parseInt(t[5]),this.lenOnRef=c_(t[3])}printString(){return this.chr+":"+He(this.start)+"-"+He(this.start+this.lenOnRef)+" ("+this.strand+") = "+He(this.lenOnRef)+"bp @MAPQ: "+this.mapQ+" NM: "+this.numMismatches}}function O0(i){return i.split(";").filter(t=>t.length>0).map(t=>new l_(t))}function c_(i){let e=0,t="";for(let n=0;n<i.length;n++){const r=i.charCodeAt(n);if(r>47&&r<58)t+=i.charAt(n);else{switch(r){case 78:case 68:case 77:case 61:case 88:e+=parseInt(t.toString())}t=""}}return e}const h_=1,f_=2,d_=4,u_=8,p_=16,g_=32,m_=64,w_=128,b_=256,F_=512,y_=1024,A_=2048,v_={c:1,C:1,s:2,S:2,i:4,I:4,f:4},ku=50;class Dc{constructor(){this.hidden=!1}isMapped(){return(this.flags&d_)===0}isPaired(){return(this.flags&h_)!==0}isProperPair(){return(this.flags&f_)!==0}isFirstOfPair(){return(this.flags&m_)!==0}isSecondOfPair(){return(this.flags&w_)!==0}isSecondary(){return(this.flags&b_)!==0}isSupplementary(){return(this.flags&A_)!==0}isFailsVendorQualityCheck(){return(this.flags&F_)!==0}isDuplicate(){return(this.flags&y_)!==0}isMateMapped(){return(this.flags&u_)===0}isNegativeStrand(){return(this.flags&p_)!==0}isMateNegativeStrand(){return(this.flags&g_)!==0}hasTag(e){return(this.tagDict||C_(this.tagBA)).hasOwnProperty(e)}tags(){return this.tagDict}getTag(e){return this.tags()[e]}get firstOfPairStrand(){if(this.isPaired()){if(this.isFirstOfPair())return this.strand;if(this.isMateMapped())return this.mate.strand}}containsLocation(e,t){const n=t?this.scStart:this.start,r=t?this.scLengthOnRef:this.lengthOnRef;return e>=n&&e<=n+r}popupData(e){const t=[];if(e=Math.floor(e),this.insertions){const c=this.seq;for(let h of this.insertions){var n=h.start;if(e===n||e===n-1)return t.push({name:"Insertion",value:c.substr(h.seqOffset,h.len)}),t.push({name:"Location",value:n}),t}}t.push({name:"Read Name",value:this.readName}),t.push("<hr/>"),t.push({name:"Alignment Start",value:He(1+this.start),borderTop:!0}),t.push({name:"Read Strand",value:this.strand===!0?"(+)":"(-)",borderTop:!0});let r=this.cigar;if(r&&r.length>ku){const c=ku/2;r=`${r.substring(0,c-2)} ... ${r.substring(r.length-c+2)}`}t.push({name:"Cigar",value:r}),t.push({name:"Mapping Quality",value:this.mq}),t.push({name:"Secondary",value:l(this.isSecondary())}),t.push({name:"Supplementary",value:l(this.isSupplementary())}),t.push({name:"Duplicate",value:l(this.isDuplicate())}),t.push({name:"Failed QC",value:l(this.isFailsVendorQualityCheck())}),this.isPaired()&&(t.push("<hr/>"),t.push({name:"First in Pair",value:!this.isSecondOfPair(),borderTop:!0}),t.push({name:"Mate is Mapped",value:l(this.isMateMapped())}),this.pairOrientation&&t.push({name:"Pair Orientation",value:this.pairOrientation}),this.isMateMapped()&&(t.push({name:"Mate Chromosome",value:this.mate.chr}),t.push({name:"Mate Start",value:this.mate.position+1}),t.push({name:"Mate Strand",value:this.mate.strand===!0?"(+)":"(-)"}),t.push({name:"Insert Size",value:this.fragmentLength})));const s=this.tags();if(s.hasOwnProperty("SA")){t.push("<hr/>"),t.push({name:"Supplementary Alignments",value:""});const c=O0(s.SA);if(c){t.push("<ul>");for(let h of c)t.push(`<li>${h.printString()}</li>`);t.push("</ul>")}}const a=new Set(["SA","MD"]);t.push("<hr/>");for(let c in s)a.has(c)||t.push({name:c,value:s[c]});t.push({name:"Hidden Tags",value:"SA, MD"}),t.push("<hr/>"),t.push({name:"Genomic Location: ",value:He(1+e)}),t.push({name:"Read Base:",value:this.readBaseAt(e)}),t.push({name:"Base Quality:",value:this.readBaseQualityAt(e)});const o=this.getBaseModificationSets();if(o){const c=this.positionToReadIndex(e);if(c!==void 0){let h=!1;for(let f of o)if(f.containsPosition(c)){h||(t.push("<hr/>"),t.push("<b>Base modifications:</b>"),h=!0);const d=Math.round(100/255*hr(f.likelihoods.get(c)));t.push(`${f.fullName()} @ likelihood =  ${d}%`)}}}return t;function l(c){return c?"Yes":"No"}}readBaseAt(e){const t=kl(this.blocks,e);if(t){if(this.seq==="*")return"*";{const n=t.seqIndexAt(e);return this.seq[n]}}else return}readBaseQualityAt(e){const t=kl(this.blocks,e);if(t){if(this.qual==="*")return 30;{const n=t.seqIndexAt(e);return n>=0&&this.qual&&n<this.qual.length?this.qual[n]:30}}else return}gapSizeAt(e){if(this.gaps){for(let t of this.gaps)if(e>=t.start&&e<t.start+t.len)return t.len}return 0}softClippedBlocks(){let e,t,n;for(let r of this.blocks)r.type==="S"?n?t=r:e=r:r.type!=="H"&&(n=!0);return{left:e,right:t}}getBaseModificationSets(){if(!this.baseModificationSets&&(this.tagDict.MM||this.tagDict.Mm)){const e=this.tagDict.MM||this.tagDict.Mm,t=this.tagDict.ML||this.tagDict.Ml;ut(e)&&(!t||Array.isArray(t))&&(e.length===0?this.baseModificationSets=__:this.baseModificationSets=Wv(e,t,this.seq,this.isNegativeStrand()))}return this.baseModificationSets}getGroupValue(e,t,n){const r=this;switch(e){case"strand":return r.strand?"+":"-";case"firstOfPairStrand":const s=r.firstOfPairStrand;return s===void 0?"":s?"+":"-";case"mateChr":return r.mate&&r.isMateMapped()?r.mate.chr:"";case"pairOrientation":return Dh[n][r.pairOrientation]||"";case"chimeric":return r.tags().SA?"chimeric":"";case"supplementary":return r.isSupplementary?"supplementary":"";case"readOrder":return r.isPaired()&&r.isFirstOfPair()?"first":r.isPaired()&&r.isSecondOfPair()?"second":"";case"phase":return r.tags().HP||"";case"tag":return r.tags()[t]||"";default:return}}positionToReadIndex(e){const t=kl(this.blocks,e);if(t)return e-t.start+t.seqOffset}}const __=new Set;function kl(i,e){for(let t=0;t<i.length;t++){const n=i[t];if(e>=n.start&&e<n.start+n.len)return n}}function C_(i){let e=0;const t=i.length,n={};for(;e<t;){const s=String.fromCharCode(i[e])+String.fromCharCode(i[e+1]);e+=2;const a=String.fromCharCode(i[e++]);let o;if(a==="A")o=String.fromCharCode(i[e]),e++;else if(a==="i"||a==="I")o=Iu(i,e),e+=4;else if(a==="c")o=I_(i,e),e++;else if(a==="C")o=E_(i,e),e++;else if(a==="s"||a==="S")o=x_(i,e),e+=2;else if(a==="f")o=k_(i,e),e+=4;else if(a==="Z")for(o="";;){var r=i[e++];if(r===0)break;o+=String.fromCharCode(r)}else if(a==="B"){const l=String.fromCharCode(i[e++]);let c=v_[l];if(c===void 0){n[s]=`Error: unknown element type '${l}'`;break}const h=Iu(i,e);e+=4;const f=e+h*c;o=[];const d=new DataView(i.buffer);for(;e<f;){switch(l){case"c":o.push(d.getInt8(e));break;case"C":o.push(d.getUint8(e));break;case"s":o.push(d.getInt16(e));break;case"S":o.push(d.getUint16(e));break;case"i":o.push(d.getInt32(e));break;case"I":o.push(d.getUint32(e));break;case"f":o.push(d.getFloat32(e))}e+=c}}else{o="Error unknown type: "+a,n[s]=o;break}n[s]=o}return n}function Iu(i,e){return i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]}function x_(i,e){return i[e+1]<<8|i[e]}function k_(i,e){return new DataView(i.buffer).getFloat32(e)}function I_(i,e){return new DataView(i.buffer).getInt8(e)}function E_(i,e){return new DataView(i.buffer).getUint8(e)}class bn{constructor(e){e&&Object.assign(this,e)}seqIndexAt(e){return Math.floor(e)-this.start+this.seqOffset}}class S_{constructor(e){e||(e={}),this.vendorFailed=e.vendorFailed=e.vendorFailed!==!1,this.duplicate=e.duplicate=e.duplicate!==!1,this.secondary=e.secondary||!1,this.supplementary=e.supplementary||!1,this.mq=e.mq||0,e.readgroups&&(this.readgroups=new Set(e.readgroups))}pass(e){if(!e.isMapped()||this.vendorFailed&&e.isFailsVendorQualityCheck()||this.duplicate&&e.isDuplicate()||this.secondary&&e.isSecondary()||this.supplementary&&e.isSupplementary()||e.mq<this.mq)return!1;if(this.readgroups){const t=e.tags().RG;return this.readgroups.has(t)}return!0}}const N_=new Uint8Array([66,65,77,1]),B_=kt(N_,0),Eu=["=","A","C","M","G","R","S","V","T","W","Y","H","K","D","B","N"],Su=["M","I","D","N","S","H","P","=","X","?","?","?","?","?","?","?"],Nu=16,Bu=32,T_={c:1,C:1,s:2,S:2,i:4,I:4,f:4},M_=.2,R_=100,D_=500,Il=1e4,St={readHeader:async function(i,e,t){const n=await Se.loadArrayBuffer(i,e),r=ki(n);return St.decodeBamHeader(r,t)},decodeBamHeader:function(i){const e=kt(i,0);if(e!==B_)throw new Error("BAM header errror: bad magic number.  This could be caused by either a corrupt or missing file.");const t=kt(i,4);let n="";for(var r=0;r<t;++r)n+=String.fromCharCode(i[r+8]);const s=kt(i,t+8);let a=t+12;const o={},l=[];for(r=0;r<s;++r){const h=kt(i,a);let f="";for(var c=0;c<h-1;++c)f+=String.fromCharCode(i[a+4+c]);o[f]=r,l[r]=f,a=a+8+h}return{magicNumber:e,size:a,chrNames:l,chrToIndex:o}},bam_tag2cigar:function(i,e,t,n,r,s){function a(y){return y==="C"||y==="c"||y==="A"?1:y==="S"||y==="s"?2:y==="I"||y==="i"||y==="f"?4:0}if(s.length!==1||r.start<0)return!1;for(var o=t+(n+1>>1)+n;o+4<e;){var l=String.fromCharCode(i[o])+String.fromCharCode(i[o+1]);if(l==="CG")break;var c=String.fromCharCode(i[o+2]);if(c==="B"){c=String.fromCharCode(i[o+3]);var h=a(c),f=kt(i,o+4);o+=8+h*f}else if(c==="Z"||c==="H")for(o+=3;i[o++]!==0;);else o+=3+a(c)}if(o>=e||String.fromCharCode(i[o+2])!=="B"||String.fromCharCode(i[o+3])!=="I")return!1;var d=kt(i,o+4),u=o+8;if(u+d*4>e)return!1;var p="",m=0;s.length=0,o=u;for(var F=0;F<d;++F,o+=4){var g=kt(i,o),w=g>>4,b=Su[g&15];(b==="M"||b==="EQ"||b==="X"||b==="D"||b==="N"||b==="=")&&(m+=w),p=p+w+b,s.push({len:w,ltr:b})}return r.cigar=p,r.lengthOnRef=m,!0},decodeBamRecords:function(i,e,t,n,r,s,a,o){for(;e<i.length;){const d=kt(i,e),u=e+d+4,p=new Dc,m=kt(i,e+4),F=kt(i,e+8);if(u>i.length)return;if(m<0){e=u;continue}else{if(r!==void 0&&(m>r||F>a))return!0;if(r!==void 0&&m<r){e=u;continue}}const g=kt(i,e+12),w=(g&65280)>>8,b=g&255,y=kt(i,e+16),v=(y&4294901760)>>16,T=y&65535,A=kt(i,e+20),C=kt(i,e+24),k=kt(i,e+28),I=kt(i,e+32);let B=[];for(let G=0;G<b-1;++G)B.push(String.fromCharCode(i[e+36+G]));B=B.join("");let M=0,N="",x=e+36+b;const D=[];let S;for(let G=0;G<T;++G){var l=kt(i,x),c=l>>4,h=Su[l&15];(h==="M"||h==="EQ"||h==="X"||h==="D"||h==="N"||h==="=")&&(M+=c),N=N+c+h,x+=4,S={len:c,ltr:h},D.push(S)}if(p.chr=n[m],p.start=F,p.flags=v,p.strand=!(v&Nu),p.readName=B,p.cigar=N,p.lengthOnRef=M,p.fragmentLength=I,p.mq=w,St.bam_tag2cigar(i,u,x,A,p,D),p.end=p.start+p.lengthOnRef,p.end<s){e=u;continue}let U=[];const O=A+1>>1;for(let G=0;G<O;++G){var f=i[x+G];U.push(Eu[(f&240)>>4]),U.push(Eu[f&15])}U=U.slice(0,A).join(""),x+=O;const Q=[];for(let G=0;G<A;++G)Q.push(i[x+G]);x+=A,C>=0&&(p.mate={chr:n[C],position:k,strand:!(v&Bu)}),p.seq=U,p.qual=Q;const K=new Uint8Array(i.buffer.slice(x,u));p.tagDict=P_(K),this.setPairOrientation(p),(o===void 0||o.pass(p))&&(Tu(p,D),t.push(p)),e=u}},decodeSamRecords:function(i,e,t,n,r,s){var a,o,l,c,h,f,d,u,p,m,F;for(a=zn(i),c=a.length,F=!1,o=0;o<c;o++)if(h=a[o].split("	"),p=new Dc,p.chr=h[2],p.start=Number.parseInt(h[3])-1,p.flags=Number.parseInt(h[1]),p.readName=h[0],p.strand=!(p.flags&Nu),p.mq=Number.parseInt(h[4]),p.cigar=h[5],p.fragmentLength=Number.parseInt(h[8]),p.seq=h[9],!(p.chr==="*"||!p.isMapped())){if(p.chr!==t){if(F)break;continue}else if(p.start>r)break;if(u=0,m=L_(p.cigar),m.forEach(function(g){var w=g.len,b=g.ltr;(b==="M"||b==="EQ"||b==="X"||b==="D"||b==="N"||b==="=")&&(u+=w)}),p.lengthOnRef=u,!(p.start+u<n)){for(f=h[10],p.qual=[],l=0;l<f.length;l++)p.qual[l]=f.charCodeAt(l)-33;p.tagDict=h.length<11?{}:H_(h.slice(11)),p.isMateMapped()&&(d=h[6],p.mate={chr:d==="="?p.chr:d,position:Number.parseInt(h[7]),strand:!(p.flags&Bu)}),this.setPairOrientation(p),(s===void 0||s.pass(p))&&(Tu(p,m),e.push(p))}}},setReaderDefaults:function(i,e){i.filter=typeof e.filter=="function"?{pass:e.filter}:new S_(e.filter),e.readgroup&&(i.filter.readgroups=new Set([e.readgroup])),i.alleleFreqThreshold=e.alleleFreqThreshold===void 0?M_:e.alleleFreqThreshold,i.samplingWindowSize=e.samplingWindowSize===void 0?R_:e.samplingWindowSize,i.samplingDepth=e.samplingDepth===void 0?D_:e.samplingDepth,i.samplingDepth>Il&&(console.log("Warning: attempt to set sampling depth > maximum value of "+Il),i.samplingDepth=Il)},setPairOrientation:function(i){if(i.isMapped()&&i.mate&&i.isMateMapped()&&i.mate.chr===i.chr){var e=i.strand?"F":"R",t=i.mate,n=t.strand?"F":"R",r=" ",s=" ";i.isFirstOfPair()?(r="1",s="2"):i.isSecondOfPair()&&(r="2",s="1");var a=[],o=i.fragmentLength,l=i.end-i.start;if(o===0){var c=i.start<t.position?t.position+l:t.position-l;o=c-i.start}o>0?(a[0]=e,a[1]=r,a[2]=n,a[3]=s):(a[2]=e,a[3]=r,a[0]=n,a[1]=s),i.pairOrientation=a.join("")}}};function Tu(i,e){const t=[];let n,r,s=0,a=i.start;i.scStart=i.start,i.scLengthOnRef=i.lengthOnRef;for(let o of e){let l;switch(o.ltr){case"H":break;case"P":break;case"S":l=a,i.scLengthOnRef+=o.len,t.length===0&&(i.scStart-=o.len,l-=o.len),t.push(new bn({start:l,seqOffset:s,len:o.len,type:"S"})),s+=o.len;break;case"N":case"D":r===void 0&&(r=[]),r.push({start:a,len:o.len,type:o.ltr}),a+=o.len;break;case"I":n===void 0&&(n=[]),n.push(new bn({start:a,len:o.len,seqOffset:s,type:"I"})),s+=o.len;break;case"M":case"EQ":case"=":case"X":t.push(new bn({start:a,seqOffset:s,len:o.len,type:"M"})),s+=o.len,a+=o.len;break;default:console.log("Error processing cigar element: "+o.len+o.ltr)}}i.blocks=t,i.insertions=n,i.gaps=r}function kt(i,e){return i[e+3]<<24|i[e+2]<<16|i[e+1]<<8|i[e]}function L_(i){var e,t,n,r,s,a,o,l;for(e=[],t=[],s=null,r=i.length,n=0;n<r;n++)a=i.charAt(n),z_(a)?t.push(a):(o=a,l=Number.parseInt(t.join("")),t=[],s!==null&&s.ltr===o?s.len+=l:(s={len:l,ltr:o},e.push(s)));return e}function z_(i){var e=i.charCodeAt(0);return e>=48&&e<=57}function H_(i){var e={};return i.forEach(function(t){var n=t.split(":");e[n[0]]=n[2]}),e}function P_(i){let e=0;const t=i.length,n={},r=new DataView(i.buffer);for(;e<t;){const a=String.fromCharCode(i[e])+String.fromCharCode(i[e+1]);e+=2;const o=String.fromCharCode(i[e++]);let l;if(o==="A")l=String.fromCharCode(i[e]),e++;else if(o==="i"||o==="I")l=r.getInt32(e,!0),e+=4;else if(o==="c")l=r.getInt8(e,!0),e++;else if(o==="C")l=r.getUint8(e,!0),e++;else if(o==="s"||o==="S")l=r.getInt16(e,!0),e+=2;else if(o==="f")l=r.getFloat32(e,!0),e+=4;else if(o==="Z")for(l="";;){var s=i[e++];if(s===0)break;l+=String.fromCharCode(s)}else if(o==="B"){const c=String.fromCharCode(i[e++]);let h=T_[c];if(h===void 0){n[a]=`Error: unknown element type '${c}'`;break}const f=r.getInt32(e,!0);e+=4;const d=e+f*h;for(l=[];e<d;){switch(c){case"c":l.push(r.getInt8(e,!0));break;case"C":l.push(r.getUint8(e,!0));break;case"s":l.push(r.getInt16(e,!0));break;case"S":l.push(r.getUint16(e,!0));break;case"i":l.push(r.getInt32(e,!0));break;case"I":l.push(r.getUint32(e,!0));break;case"f":l.push(r.getFloat32(e,!0))}e+=h}}else{l="Error unknown type: "+o,n[a]=l;break}n[a]=l}return n}var Ir,U0,q0;class O_{constructor(e,t){ct(this,Ir);ke(this,"chrAliasTable",new Map);this.config=e,this.genome=t,this.bamPath=e.url,this.isDataUri=qi(e.url),St.setReaderDefaults(this,e)}async readAlignments(e,t,n){if(!this.alignmentCache){let o;if(this.isDataUri){const l=U_(this.bamPath);o=ki(l.buffer)}else{const l=await Se.loadArrayBuffer(this.bamPath,Le(this.config));o=ki(l)}this.alignmentCache=Ke(this,Ir,U0).call(this,o)}const r=await Ke(this,Ir,q0).call(this,e),s=this.alignmentCache.queryFeatures(r,t,n),a=new Mr(e,t,n,this.config);for(let o of s)a.push(o);return a.finish(),a}}Ir=new WeakSet,U0=function(e){const t=[];return this.header=St.decodeBamHeader(e),St.decodeBamRecords(e,this.header.size,t,this.header.chrNames,void 0,0,Number.MAX_SAFE_INTEGER,this.filter),new Ns(t,this.genome)},q0=async function(e){const t=new Set(this.header.chrNames);if(t.has(e))return e;if(this.chrAliasTable.has(e))return this.chrAliasTable.get(e);if(this.genome){const n=await this.genome.getAliasRecord(e);let r;if(n){const s=Object.keys(n).filter(a=>a!=="start"&&a!=="end").map(a=>n[a]).filter(a=>t.has(a));s.length>0&&(r=s[0])}return this.chrAliasTable.set(e,r),r}return e};function U_(i){const e=i.split(","),t=e[0].split(":")[1];let n=e[1];t.indexOf("base64")>=0?n=atob(n):n=decodeURI(n);const r=new Uint8Array(n.length);for(var s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}var Ao,Q0;class V0{constructor(e,t){ct(this,Ao);ke(this,"chrAliasTable",new Map);this.config=e,this.genome=t,this.bamPath=e.url,this.baiPath=e.indexURL,St.setReaderDefaults(this,e),this._blockLoader=new h0(e)}async readAlignments(e,t,n){const r=await Ke(this,Ao,Q0).call(this,e),s=new Mr(e,t,n,this.config);if(r===void 0)return s;{const o=(await this.getIndex()).chunksForRange(r,t,n);if(!o||o.length===0)return s;for(let l of o){const c=await this._blockLoader.getData(l.minv,l.maxv);if(St.decodeBamRecords(c,l.minv.offset,s,this.header.chrNames,r,t,n,this.filter))break}return s.finish(),s}}async getHeader(){if(!this.header){const e=this.genome,t=await this.getIndex();let n;if(t.firstBlockPosition){const s=Le(this.config,{range:{start:t.firstBlockPosition,size:26}}),a=await Se.loadArrayBuffer(this.bamPath,s),o=gh(a);n=t.firstBlockPosition+o}else n=64e3;const r=Le(this.config,{range:{start:0,size:n}});this.header=await St.readHeader(this.bamPath,r,e)}return this.header}async getIndex(){return this.index||(this.index=await c0(this.baiPath,this.config)),this.index}async getChrIndex(){if(this.chrToIndex)return this.chrToIndex;{const e=await this.getHeader();return this.chrToIndex=e.chrToIndex,this.indexToChr=e.chrNames,this.chrNames=new Set(e.chrNames),this.chrToIndex}}}Ao=new WeakSet,Q0=async function(e){if(await this.getHeader(),this.chrAliasTable.has(e)&&(e=this.chrAliasTable.get(e),e===void 0))return;let t=this.header.chrToIndex[e];if(t===void 0){const n=await this.genome.getAliasRecord(e);let r;if(n){const s=Object.keys(n).filter(a=>a!=="start"&&a!=="end").map(a=>n[a]).filter(a=>this.header.chrToIndex[a]!==void 0);s.length>0&&(r=s[0],t=this.header.chrToIndex[s[0]])}this.chrAliasTable.set(e,r)}return t};class q_{constructor(e,t){this.config=e,this.genome=t;const n={};e.sources.sequences.forEach(function(r){const s=t?t.getChromosomeName(r):r;n[s]=V_(e,t,r)}),this.bamReaders=n,St.setReaderDefaults(this,e)}async readAlignments(e,t,n){return this.bamReaders.hasOwnProperty(e)?await this.bamReaders[e].readAlignments(e,t,n):new Mr(e,t,n,this.config)}}function V_(i,e,t){const n={url:i.sources.url.replace("$CHR",t)};i.sources.indexURL&&(n.indexURL=i.sources.indexURL.replace("$CHR",t));const r=Object.assign(i,n);return new V0(r,e)}const G0=function(i,e){this.config=i,this.genome=e,St.setReaderDefaults(this,i)};G0.prototype.readAlignments=function(i,e,t){var n=this;return Q_.call(n).then(function(r){var s,a;return s=r.chrAliasTable.hasOwnProperty(i)?r.chrAliasTable[i]:i,a=n.config.url+"?reference="+n.config.referenceFile+"&file="+n.config.alignmentFile+"&region="+s+":"+e+"-"+t,Se.loadString(a,Le(n.config)).then(function(o){var l;return r.chrToIndex[s],l=new Mr(i,e,t,n.config),St.decodeSamRecords(o,l,s,e,t,n.filter),l})})};function Q_(){const i=this,e=this.genome;if(this.header)return Promise.resolve(this.header);{const t=this.config.url+"?file="+this.config.alignmentFile+"&options=-b,-H",n=Le(this.config);return St.readHeader(t,n,e).then(function(r){return i.header=r,r})}}class G_ extends Ch{constructor(e,t){super(e,t),St.setReaderDefaults(this,e)}async readAlignments(e,t,n){if(!this.header){const c=await this.readHeaderData(),h=ki(c.buffer);this.header=St.decodeBamHeader(h,this.genome),this.chrAliasTable=new Map;for(let f of this.header.chrNames)this.chrAliasTable.set(f,this.genome.getChromosomeName(f))}let r=this.chrAliasTable.has(e)?this.chrAliasTable.get(e):e;const s=await this.readData(r,t,n),a=ki(s.buffer);this.header=St.decodeBamHeader(a,this.genome);const o=this.header.chrToIndex[e],l=new Mr(e,t,n,this.config);return St.decodeBamRecords(a,this.header.size,l,this.header.chrNames,o,t,n,this.filter),l.finish(),l}}/*! For license information please see cram-bundle.js.LICENSE.txt */var El=(()=>{var i={4923:function(r,s,a){var o=this&&this.__awaiter||function(d,u,p,m){return new(p||(p=Promise))(function(F,g){function w(v){try{y(m.next(v))}catch(T){g(T)}}function b(v){try{y(m.throw(v))}catch(T){g(T)}}function y(v){var T;v.done?F(v.value):(T=v.value,T instanceof p?T:new p(function(A){A(T)})).then(w,b)}y((m=m.apply(d,u||[])).next())})};Object.defineProperty(s,"__esModule",{value:!0});const l=a(8712),c=a(5931),h=a(9747);function f(d,u){const[p,m,F,g,w,b]=u,y=p;d[y]||(d[y]=[]),d[y].push({start:m,span:F,containerStart:g,sliceStart:w,sliceBytes:b})}s.default=class{constructor(d){this.filehandle=(0,c.open)(d.url,d.path,d.filehandle)}parseIndex(){return o(this,void 0,void 0,function*(){const d={},u=(p=yield this.filehandle.readFile())[0]===31&&p[1]===139?(0,l.unzip)(p):p;var p;if(u.length>4&&u.readUInt32LE(0)===21578050)throw new h.CramMalformedError("invalid .crai index file. note: file appears to be a .bai index. this is technically legal but please open a github issue if you need support");let m=[],F="";for(const g of u)if(g>=48&&g<=57||!F&&g===45)F+=String.fromCharCode(g);else if(g===9)m.push(Number.parseInt(F,10)),F="";else if(g===10)m.push(Number.parseInt(F,10)),F="",f(d,m),m=[];else if(g!==13&&g!==32)throw new h.CramMalformedError("invalid .crai index file");return F&&m.push(Number.parseInt(F,10)),m.length===6&&f(d,m),Object.entries(d).forEach(([g,w])=>{const b=w;d[g]=b.sort((y,v)=>y.start-v.start||y.span-v.span)}),d})}getIndex(){return this.parseIndexP||(this.parseIndexP=this.parseIndex().catch(d=>{throw this.parseIndexP=void 0,d})),this.parseIndexP}hasDataForReferenceSequence(d){return o(this,void 0,void 0,function*(){return!!(yield this.getIndex())[d]})}getEntriesForRange(d,u,p){return o(this,void 0,void 0,function*(){const m=(yield this.getIndex())[d];if(!m)return[];const F=w=>{const b=w.start,y=w.start+w.span;return b>p?-1:y<=u?1:0},g=[];for(const w of m)F(w)===0&&g.push(w);return g})}}},9508:(r,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=class{constructor(a,o){this.parameters=a,this.dataType=o}}},368:function(r,s,a){var o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(s,"__esModule",{value:!0});const l=a(9747),c=o(a(9508)),h=a(612);class f extends c.default{constructor(u,p){if(super(u,p),this.dataType!=="int")throw new l.CramUnimplementedError(`${this.dataType} decoding not yet implemented by BETA codec`)}decode(u,p,m,F){return(0,h.getBits)(p.content,F.coreBlock,this.parameters.length)-this.parameters.offset}}s.default=f},8635:function(r,s,a){var o=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(s,"__esModule",{value:!0});const l=o(a(9508)),c=a(400);class h extends l.default{constructor(d,u,p){super(d,u),this.instantiateCodec=p}decode(d,u,p,m){const F=this._getLengthCodec().decode(d,u,p,m),g=this._getDataCodec(),w=new Uint8Array(F);for(let b=0;b<F;b+=1)w[b]=g.decode(d,u,p,m);return w}_getLengthCodec(){const d=this.parameters.lengthsEncoding;return this.instantiateCodec(d,"int")}_getDataCodec(){const d=this.parameters.valuesEncoding;return this.instantiateCodec(d,"byte")}}s.default=h,"_getLengthCodec _getDataCodec".split(" ").forEach(f=>{(0,c.tinyMemoize)(h,f)})},4839:function(r,s,a){var o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(s,"__esModule",{value:!0});const l=a(9747),c=o(a(9508)),h=a(612);class f extends c.default{decode(u,p,m,F){const{blockContentId:g}=this.parameters,w=m[g];if(!w)throw new l.CramMalformedError(`no block found with content ID ${g}`);const b=F.externalBlocks.getCursor(g);return this._decodeByteArray(w,b)}_decodeByteArray(u,p){const m=u.content,{stopByte:F}=this.parameters,g=p.bytePosition;let w=p.bytePosition;for(;m[w]!==F&&w<m.length;){if(w===m.length)throw new h.CramBufferOverrunError("byteArrayStop reading beyond length of data buffer?");w+=1}return p.bytePosition=w+1,m.subarray(g,w)}}s.default=f},8153:function(r,s,a){var o=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(s,"__esModule",{value:!0});const l=a(9747),c=o(a(9508)),h=a(400),f=a(612);class d extends c.default{constructor(p,m){if(super(p,m),this.dataType==="int")this._decodeData=this._decodeInt;else{if(this.dataType!=="byte")throw new l.CramUnimplementedError(`${this.dataType} decoding not yet implemented by EXTERNAL codec`);this._decodeData=this._decodeByte}}decode(p,m,F,g){const{blockContentId:w}=this.parameters,b=F[w];if(!b)throw new l.CramMalformedError(`no block found with content ID ${w}}`);const y=g.externalBlocks.getCursor(w);return this._decodeData(b,y)}_decodeInt(p,m){const[F,g]=(0,h.parseItf8)(p.content,m.bytePosition);return m.bytePosition=m.bytePosition+g,F}_decodeByte(p,m){if(m.bytePosition>=p.content.length)throw new f.CramBufferOverrunError("attempted to read beyond end of block. this file seems truncated.");return p.content[m.bytePosition++]}}s.default=d},8185:function(r,s,a){var o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(s,"__esModule",{value:!0});const l=a(9747),c=o(a(9508)),h=a(612);class f extends c.default{constructor(u,p){if(super(u,p),this.dataType!=="int")throw new l.CramUnimplementedError(`${this.dataType} decoding not yet implemented by GAMMA codec`)}decode(u,p,m,F){let g=1;for(;(0,h.getBits)(p.content,F.coreBlock,1)===0;)g+=1;return((0,h.getBits)(p.content,F.coreBlock,g-1)|1<<g-1)-this.parameters.offset}}s.default=f},612:(r,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CramBufferOverrunError=void 0,s.getBits=function(o,l,c){let h=0;if(l.bytePosition+(7-l.bitPosition+c)/8>o.length)throw new a("read error during decoding. the file seems to be truncated.");for(let f=c;f;f--)h<<=1,h|=o[l.bytePosition]>>l.bitPosition&1,l.bitPosition-=1,l.bitPosition<0&&(l.bytePosition+=1),l.bitPosition&=7;return h};class a extends Error{}s.CramBufferOverrunError=a},4341:function(r,s,a){var o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(s,"__esModule",{value:!0});const l=a(9747),c=o(a(9508)),h=a(612);class f extends c.default{constructor(u,p){if(super(u,p),this.codes={},this.codeBook={},this.sortedCodes=[],this.sortedValuesByBitCode=[],this.sortedBitCodes=[],this.sortedBitLengthsByBitCode=[],this.bitCodeToValue=[],!["byte","int"].includes(this.dataType))throw new TypeError(`${this.dataType} decoding not yet implemented by HUFFMAN_INT codec`);this.buildCodeBook(),this.buildCodes(),this.buildCaches(),this.sortedCodes[0].bitLength===0&&(this._decode=this._decodeZeroLengthCode)}buildCodeBook(){let u=new Array(this.parameters.numCodes);for(let p=0;p<this.parameters.numCodes;p++)u[p]={symbol:this.parameters.symbols[p],bitLength:this.parameters.bitLengths[p]};u=u.sort((p,m)=>p.bitLength-m.bitLength||p.symbol-m.symbol),this.codeBook={},u.forEach(p=>{this.codeBook[p.bitLength]||(this.codeBook[p.bitLength]=[]),this.codeBook[p.bitLength].push(p.symbol)})}buildCodes(){this.codes={};let u=0,p=-1;Object.entries(this.codeBook).forEach(([m,F])=>{const g=Number.parseInt(m,10);F.forEach(w=>{const b={bitLength:g,value:w,bitCode:0};p+=1;const y=g-u;if(p<<=y,b.bitCode=p,u+=y,function(v){let T=v-(v>>1)&1431655765;return T=(858993459&T)+(T>>2&858993459),16843009*(T+(T>>4)&252645135)>>24}(p)>g)throw new l.CramMalformedError("Symbol out of range");this.codes[w]=b})})}buildCaches(){this.sortedCodes=Object.values(this.codes).sort((p,m)=>p.bitLength-m.bitLength||p.bitCode-m.bitCode),this.sortedValuesByBitCode=this.sortedCodes.map(p=>p.value),this.sortedBitCodes=this.sortedCodes.map(p=>p.bitCode),this.sortedBitLengthsByBitCode=this.sortedCodes.map(p=>p.bitLength);const u=Math.max(...this.sortedBitCodes);this.bitCodeToValue=new Array(u+1).fill(-1);for(let p=0;p<this.sortedBitCodes.length;p+=1)this.bitCodeToValue[this.sortedCodes[p].bitCode]=p}decode(u,p,m,F){return this._decode(u,p,F.coreBlock)}_decodeZeroLengthCode(){return this.sortedCodes[0].value}_decode(u,p,m){const F=p.content;let g=0,w=0;for(let b=0;b<this.sortedCodes.length;b+=1){const y=this.sortedCodes[b].bitLength;w<<=y-g,w|=(0,h.getBits)(F,m,y-g),g=y;{const v=this.bitCodeToValue[w];if(v>-1&&this.sortedBitLengthsByBitCode[v]===y)return this.sortedValuesByBitCode[v];for(let T=b;this.sortedCodes[T+1].bitLength===y&&T<this.sortedCodes.length;T+=1)b+=1}}throw new l.CramMalformedError("Huffman symbol not found.")}}s.default=f},6524:function(r,s,a){var o=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(s,"__esModule",{value:!0}),s.instantiateCodec=function g(w,b){const y=(v=b==="ignore"?0:w.codecId,F[v]);var v;if(!y)throw new l.CramUnimplementedError(`no codec implemented for codec ID ${w.codecId}`);return new y(w.parameters,b,g)};const l=a(9747),c=o(a(4341)),h=o(a(8153)),f=o(a(4839)),d=o(a(8635)),u=o(a(368)),p=o(a(8185)),m=o(a(99)),F={1:h.default,3:c.default,4:d.default,5:f.default,6:u.default,7:m.default,9:p.default}},99:function(r,s,a){var o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(s,"__esModule",{value:!0});const l=a(9747),c=o(a(9508)),h=a(612);class f extends c.default{constructor(u,p){if(super(u,p),this.dataType!=="int")throw new l.CramUnimplementedError(`${this.dataType} decoding not yet implemented by SUBEXP codec`)}decode(u,p,m,F){let g,w,b=0;for(;(0,h.getBits)(p.content,F.coreBlock,1);)b+=1;return b===0?(g=this.parameters.K,w=(0,h.getBits)(p.content,F.coreBlock,g)):(g=b+this.parameters.K-1,w=1<<g|(0,h.getBits)(p.content,F.coreBlock,g)),w-this.parameters.offset}}s.default=f},7295:(r,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default={CRAM_FLAG_PRESERVE_QUAL_SCORES:1,CRAM_FLAG_DETACHED:2,CRAM_FLAG_MATE_DOWNSTREAM:4,CRAM_FLAG_NO_SEQ:8,CRAM_FLAG_MASK:15,CRAM_M_REVERSE:1,CRAM_M_UNMAP:2,BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048,BAM_CMATCH:0,BAM_CINS:1,BAM_CDEL:2,BAM_CREF_SKIP:3,BAM_CSOFT_CLIP:4,BAM_CHARD_CLIP:5,BAM_CPAD:6,BAM_CEQUAL:7,BAM_CDIFF:8,BAM_CBACK:9,BAM_CIGAR_STR:"MIDNSHP:XB",BAM_CIGAR_SHIFT:4,BAM_CIGAR_MASK:15,BAM_CIGAR_TYPE:246183}},7219:(r,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0});const o=a(6524),l=a(9747),c={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int"};s.default=class{constructor(h){this.dataSeriesCodecCache={},this.tagCodecCache={},this.tagEncoding={},this.readNamesIncluded=h.preservation.RN,this.APdelta=h.preservation.AP,this.referenceRequired=!!h.preservation.RR,this.tagIdsDictionary=h.preservation.TD,this.substitutionMatrix=function(f){const d=new Array(5);for(let u=0;u<5;u+=1)d[u]=new Array(4);return d[0][f[0]>>6&3]="C",d[0][f[0]>>4&3]="G",d[0][f[0]>>2&3]="T",d[0][3&f[0]]="N",d[1][f[1]>>6&3]="A",d[1][f[1]>>4&3]="G",d[1][f[1]>>2&3]="T",d[1][3&f[1]]="N",d[2][f[2]>>6&3]="A",d[2][f[2]>>4&3]="C",d[2][f[2]>>2&3]="T",d[2][3&f[2]]="N",d[3][f[3]>>6&3]="A",d[3][f[3]>>4&3]="C",d[3][f[3]>>2&3]="G",d[3][3&f[3]]="N",d[4][f[4]>>6&3]="A",d[4][f[4]>>4&3]="C",d[4][f[4]>>2&3]="G",d[4][3&f[4]]="T",d}(h.preservation.SM),this.dataSeriesEncoding=h.dataSeriesEncoding,this.tagEncoding=h.tagEncoding}getCodecForTag(h){const f=this.tagCodecCache[h];if(f)return f;{const d=this.tagEncoding[h];if(!d)throw new Error("Error, no tag encoding");const u=(0,o.instantiateCodec)(d,"byteArray");return this.tagCodecCache[h]=u,u}}getTagNames(h){return this.tagIdsDictionary[h]}getCodecForDataSeries(h){let f=this.dataSeriesCodecCache[h];if(f===void 0){const d=this.dataSeriesEncoding[h];if(d){const u=c[h];if(!u)throw new l.CramMalformedError(`data series name ${h} not defined in file compression header`);f=(0,o.instantiateCodec)(d,u),this.dataSeriesCodecCache[h]=f}}return f}toJSON(){const h={};return Object.keys(this).forEach(f=>{f.endsWith("Cache")||(h[f]=this[f])}),h}}},78:function(r,s,a){var o=this&&this.__awaiter||function(F,g,w,b){return new(w||(w=Promise))(function(y,v){function T(k){try{C(b.next(k))}catch(I){v(I)}}function A(k){try{C(b.throw(k))}catch(I){v(I)}}function C(k){var I;k.done?y(k.value):(I=k.value,I instanceof w?I:new w(function(B){B(I)})).then(T,A)}C((b=b.apply(F,g||[])).next())})},l=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(s,"__esModule",{value:!0});const c=a(8287),h=a(9747),f=a(400),d=l(a(6771)),u=l(a(7219)),p=a(3165);class m{constructor(g,w){this.file=g,this.filePosition=w}getHeader(){return this._readContainerHeader(this.filePosition)}getCompressionHeaderBlock(){return o(this,void 0,void 0,function*(){const g=yield this.getHeader();if(!(g!=null&&g.numRecords))return null;const{majorVersion:w}=yield this.file.getDefinition(),b=(0,p.getSectionParsers)(w),y=yield this.getFirstBlock();if(y===void 0)return;if(y.contentType!=="COMPRESSION_HEADER")throw new h.CramMalformedError(`invalid content type ${y.contentType} in compression header block`);const v=(0,f.parseItem)(y.content,b.cramCompressionHeader.parser,0,y.contentPosition);return Object.assign(Object.assign({},y),{parsedContent:v})})}getFirstBlock(){return o(this,void 0,void 0,function*(){const g=yield this.getHeader();if(g)return this.file.readBlock(g._endPosition)})}getCompressionScheme(){return o(this,void 0,void 0,function*(){const g=yield this.getCompressionHeaderBlock();if(g)return new u.default(g.parsedContent)})}getSlice(g,w){return new d.default(this,g,w)}_readContainerHeader(g){return o(this,void 0,void 0,function*(){const{majorVersion:w}=yield this.file.getDefinition(),b=(0,p.getSectionParsers)(w),{cramContainerHeader1:y,cramContainerHeader2:v}=b,{size:T}=yield this.file.stat();if(g>=T)return void console.warn(`pos:${g}>=fileSize:${T} in cram container`);const A=c.Buffer.allocUnsafe(y.maxLength);yield this.file.read(A,0,y.maxLength,g);const C=(0,f.parseItem)(A,y.parser),k=(0,f.itf8Size)(C.numLandmarks);if(g+C.length>=T)return void console.warn(`container at ${g} is beyond fileSize:${T}, skipping`);const I=c.Buffer.allocUnsafe(v.maxLength(C.numLandmarks));yield this.file.read(I,0,v.maxLength(C.numLandmarks),g+C._size-k);const B=(0,f.parseItem)(I,v.parser);return this.file.validateChecksums&&B.crc32!==void 0&&(yield this.file.checkCrc32(g,C._size+B._size-k-4,B.crc32,`container header beginning at position ${g}`)),Object.assign(C,B,{_size:C._size+B._size-k,_endPosition:C._size+B._size-k+g})})}}s.default=m,"getHeader getCompressionHeaderBlock getCompressionScheme".split(" ").forEach(F=>{(0,f.tinyMemoize)(m,F)})},6794:function(r,s,a){var o=this&&this.__awaiter||function(C,k,I,B){return new(I||(I=Promise))(function(M,N){function x(U){try{S(B.next(U))}catch(O){N(O)}}function D(U){try{S(B.throw(U))}catch(O){N(O)}}function S(U){var O;U.done?M(U.value):(O=U.value,O instanceof I?O:new I(function(Q){Q(O)})).then(x,D)}S((B=B.apply(C,k||[])).next())})},l=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(s,"__esModule",{value:!0});const c=a(8287),h=l(a(928)),f=l(a(7392)),d=l(a(6960)),u=l(a(235)),p=a(1307),m=a(9747),F=a(8712),g=l(a(9989)),w=a(3165),b=l(a(78)),y=a(5931),v=a(400),T=a(5417);class A{constructor(k){var I;if(this.file=(0,y.open)(k.url,k.path,k.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=k.seqFetch,this.options={checkSequenceMD5:k.checkSequenceMD5,cacheSize:(I=k.cacheSize)!==null&&I!==void 0?I:2e4},this.featureCache=new f.default({maxSize:this.options.cacheSize}),function(){const B=new Uint32Array([287454020]),M=new Uint8Array(B.buffer);return M[0]===68?0:M[0]===17?1:2}()>0)throw new Error("Detected big-endian machine, may be unable to run")}read(k,I,B,M){return this.file.read(k,I,B,M)}stat(){return this.file.stat()}getDefinition(){return o(this,void 0,void 0,function*(){const{maxLength:k,parser:I}=(0,w.cramFileDefinition)(),B=c.Buffer.allocUnsafe(k);yield this.file.read(B,0,k,0);const M=I(B).value;if(M.majorVersion!==2&&M.majorVersion!==3)throw new m.CramUnimplementedError(`CRAM version ${M.majorVersion} not supported`);return M})}getSamHeader(){return o(this,void 0,void 0,function*(){const k=yield this.getContainerById(0);if(!k)throw new m.CramMalformedError("file contains no containers");const I=yield k.getFirstBlock();if(I===void 0)return(0,T.parseHeaderText)("");const B=I.content,M=B.readInt32LE(0),N=B.toString("utf8",4,4+M);return this.header=N,(0,T.parseHeaderText)(N)})}getHeaderText(){return o(this,void 0,void 0,function*(){return yield this.getSamHeader(),this.header})}getContainerById(k){return o(this,void 0,void 0,function*(){const{majorVersion:I}=yield this.getDefinition(),B=(0,w.getSectionParsers)(I);let M=B.cramFileDefinition.maxLength;const{size:N}=yield this.file.stat(),{cramContainerHeader1:x}=B;let D;for(let S=0;S<=k;S++){if(M+x.maxLength+8>=N)return;D=this.getContainerAtPosition(M);const U=yield D.getHeader();if(!U)throw new m.CramMalformedError(`container ${k} not found in file`);if(S===0){M=U._endPosition;for(let O=0;O<U.numBlocks;O++){const Q=yield this.readBlock(M);if(Q===void 0)return;M=Q._endPosition}}else M+=U._size+U.length}return D})}checkCrc32(k,I,B,M){return o(this,void 0,void 0,function*(){const N=c.Buffer.allocUnsafe(I);yield this.file.read(N,0,I,k);const x=h.default.unsigned(N);if(x!==B)throw new m.CramMalformedError(`crc mismatch in ${M}: recorded CRC32 = ${B}, but calculated CRC32 = ${x}`)})}containerCount(){return o(this,void 0,void 0,function*(){const{majorVersion:k}=yield this.getDefinition(),I=(0,w.getSectionParsers)(k),{size:B}=yield this.file.stat(),{cramContainerHeader1:M}=I;let N=0,x=I.cramFileDefinition.maxLength;for(;x+M.maxLength+8<B;){const D=yield this.getContainerAtPosition(x).getHeader();if(!D)break;if(N===0){x=D._endPosition;for(let S=0;S<D.numBlocks;S++){const U=yield this.readBlock(x);if(U===void 0)return;x=U._endPosition}}else x+=D._size+D.length;N+=1}return N})}getContainerAtPosition(k){return new b.default(this,k)}readBlockHeader(k){return o(this,void 0,void 0,function*(){const{majorVersion:I}=yield this.getDefinition(),B=(0,w.getSectionParsers)(I),{cramBlockHeader:M}=B,{size:N}=yield this.file.stat();if(k+M.maxLength>=N)return;const x=c.Buffer.allocUnsafe(M.maxLength);return yield this.file.read(x,0,M.maxLength,k),(0,v.parseItem)(x,M.parser,0,k)})}_parseSection(k,I){return o(this,arguments,void 0,function*(B,M,N=B.maxLength,x){let D;if(x)D=x;else{const{size:U}=yield this.file.stat();if(M+N>=U)return;D=c.Buffer.allocUnsafe(N),yield this.file.read(D,0,N,M)}const S=(0,v.parseItem)(D,B.parser,0,M);if(S._size!==N)throw new m.CramMalformedError(`section read error: requested size ${N} does not equal parsed size ${S._size}`);return S})}_uncompress(k,I,B){return o(this,void 0,void 0,function*(){if(k==="gzip")(0,F.unzip)(I).copy(B);else if(k==="bzip2"){const N=u.default.array(I);let x,D=u.default.header(N),S=0;do x=u.default.decompress(N,D),x!==-1&&(c.Buffer.from(x).copy(B,S),S+=x.length,D-=x.length);while(x!==-1)}else if(k==="lzma"){const N=new Response(new p.XzReadableStream((M=I,new ReadableStream({start(x){x.enqueue(M),x.close()}}))));c.Buffer.from(yield N.arrayBuffer()).copy(B)}else if(k==="rans")(0,g.default)(I,B);else if(k==="rans4x16")d.default.r4x16_uncompress(I,B);else if(k==="arith")d.default.arith_uncompress(I,B);else if(k==="fqzcomp")d.default.fqzcomp_uncompress(I,B);else{if(k!=="tok3")throw new m.CramUnimplementedError(`${k} decompression not yet implemented`);d.default.tok3_uncompress(I,B)}var M})}readBlock(k){return o(this,void 0,void 0,function*(){const{majorVersion:I}=yield this.getDefinition(),B=(0,w.getSectionParsers)(I),M=yield this.readBlockHeader(k);if(M===void 0)return;const N=M._endPosition,x=c.Buffer.allocUnsafe(M.uncompressedSize),D=Object.assign(Object.assign({},M),{_endPosition:N,contentPosition:N,content:x});if(M.compressionMethod!=="raw"){const S=c.Buffer.allocUnsafe(M.compressedSize);yield this.read(S,0,M.compressedSize,N),yield this._uncompress(M.compressionMethod,S,x)}else yield this.read(x,0,M.uncompressedSize,N);if(I>=3){const S=yield this._parseSection(B.cramBlockCrc32,N+M.compressedSize);if(S===void 0)return;D.crc32=S.crc32,this.validateChecksums&&(yield this.checkCrc32(k,M._size+M.compressedSize,S.crc32,"block data")),D._endPosition=S._endPosition,D._size=D.compressedSize+B.cramBlockCrc32.maxLength}else D._endPosition=N+D.compressedSize,D._size=D.compressedSize;return D})}}s.default=A,"getDefinition getSectionParsers getSamHeader".split(" ").forEach(C=>{(0,v.tinyMemoize)(A,C)})},7390:function(r,s,a){var o=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.CramRecord=void 0;var l=a(8401);Object.defineProperty(s,"CramRecord",{enumerable:!0,get:function(){return o(l).default}});var c=a(6794);Object.defineProperty(s,"default",{enumerable:!0,get:function(){return o(c).default}})},8401:function(r,s,a){var o=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(s,"__esModule",{value:!0}),s.MateFlagsDecoder=s.CramFlagsDecoder=s.BamFlagsDecoder=s.MateFlags=s.CramFlags=s.BamFlags=void 0;const l=o(a(7295)),c={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4};function h(f){const d={};for(const[u,p]of f)d[`is${p}`]=m=>!!(m&u),d[`set${p}`]=m=>m|u;return d}s.BamFlags=[[1,"Paired"],[2,"ProperlyPaired"],[4,"SegmentUnmapped"],[8,"MateUnmapped"],[16,"ReverseComplemented"],[32,"MateReverseComplemented"],[64,"Read1"],[128,"Read2"],[256,"Secondary"],[512,"FailedQc"],[1024,"Duplicate"],[2048,"Supplementary"]],s.CramFlags=[[1,"PreservingQualityScores"],[2,"Detached"],[4,"WithMateDownstream"],[8,"DecodeSequenceAsStar"]],s.MateFlags=[[1,"OnNegativeStrand"],[2,"Unmapped"]],s.BamFlagsDecoder=h(s.BamFlags),s.CramFlagsDecoder=h(s.CramFlags),s.MateFlagsDecoder=h(s.MateFlags),s.default=class{constructor({flags:f,cramFlags:d,readLength:u,mappingQuality:p,lengthOnRef:m,qualityScores:F,mateRecordNumber:g,readBases:w,readFeatures:b,mateToUse:y,readGroupId:v,readName:T,sequenceId:A,uniqueId:C,templateSize:k,alignmentStart:I,tags:B}){this.flags=f,this.cramFlags=d,this.readLength=u,this.mappingQuality=p,this.lengthOnRef=m,this.qualityScores=F,w&&(this.readBases=w),this.readGroupId=v,this.readName=T,this.sequenceId=A,this.uniqueId=C,this.templateSize=k,this.alignmentStart=I,this.tags=B,b&&(this.readFeatures=b),y&&(this.mate={flags:y.mateFlags,readName:y.mateReadName,sequenceId:y.mateSequenceId,alignmentStart:y.mateAlignmentStart}),g&&(this.mateRecordNumber=g)}isPaired(){return!!(this.flags&l.default.BAM_FPAIRED)}isProperlyPaired(){return!!(this.flags&l.default.BAM_FPROPER_PAIR)}isSegmentUnmapped(){return!!(this.flags&l.default.BAM_FUNMAP)}isMateUnmapped(){return!!(this.flags&l.default.BAM_FMUNMAP)}isReverseComplemented(){return!!(this.flags&l.default.BAM_FREVERSE)}isMateReverseComplemented(){return!!(this.flags&l.default.BAM_FMREVERSE)}isRead1(){return!!(this.flags&l.default.BAM_FREAD1)}isRead2(){return!!(this.flags&l.default.BAM_FREAD2)}isSecondary(){return!!(this.flags&l.default.BAM_FSECONDARY)}isFailedQc(){return!!(this.flags&l.default.BAM_FQCFAIL)}isDuplicate(){return!!(this.flags&l.default.BAM_FDUP)}isSupplementary(){return!!(this.flags&l.default.BAM_FSUPPLEMENTARY)}isDetached(){return!!(this.cramFlags&l.default.CRAM_FLAG_DETACHED)}hasMateDownStream(){return!!(this.cramFlags&l.default.CRAM_FLAG_MATE_DOWNSTREAM)}isPreservingQualityScores(){return!!(this.cramFlags&l.default.CRAM_FLAG_PRESERVE_QUAL_SCORES)}isUnknownBases(){return!!(this.cramFlags&l.default.CRAM_FLAG_NO_SEQ)}getReadBases(){if(!this.readBases&&this._refRegion){const f=function(d,u){if(!d.lengthOnRef&&!d.readLength||d.isUnknownBases())return null;const p=d.alignmentStart-u.start;if(!d.readFeatures)return u.seq.slice(p,p+(d.lengthOnRef||0)).toUpperCase();let m="",F=p,g=0;for(;m.length<d.readLength;)if(g<d.readFeatures.length){const w=d.readFeatures[g];if(w.code==="Q"||w.code==="q")g+=1;else if(w.pos===m.length+1)if(g+=1,w.code==="b"){const b=w.data;m+=b,F+=b.length}else w.code==="B"?(m+=w.data[0],F+=1):w.code==="X"?(m+=w.sub,F+=1):w.code==="I"?m+=w.data:w.code==="D"?F+=w.data:w.code==="i"?m+=w.data:w.code==="N"?F+=w.data:w.code==="S"?m+=w.data:w.code==="P"||w.code;else if(g<d.readFeatures.length){const b=u.seq.slice(F,F+w.pos-m.length-1);m+=b,F+=b.length}}else{const w=u.seq.slice(F,F+d.readLength-m.length);m+=w,F+=w.length}return m.toUpperCase()}(this,this._refRegion);f&&(this.readBases=f)}return this.readBases}getPairOrientation(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.mate&&this.sequenceId===this.mate.sequenceId){const f=this.isReverseComplemented()?"R":"F",d=this.isMateReverseComplemented()?"R":"F";let u=" ",p=" ";this.isRead1()?(u="1",p="2"):this.isRead2()&&(u="2",p="1");const m=[];let F=this.templateLength||this.templateSize;if(F===void 0)throw new Error("One of templateSize and templateLength must be set");return this.alignmentStart>this.mate.alignmentStart&&F>0&&(F=-F),F>0?(m[0]=f,m[1]=u,m[2]=d,m[3]=p):(m[2]=f,m[3]=u,m[0]=d,m[1]=p),m.join("")}return null}addReferenceSequence(f,d){this.readFeatures&&this.readFeatures.forEach(u=>{u.code==="X"&&function(p,m,F,g){const w=g.refPos-m.start,b=m.seq.charAt(w);b&&(g.ref=b);let y=c[b];y===void 0&&(y=4);const v=F.substitutionMatrix[y][g.data];v&&(g.sub=v)}(0,f,d,u)}),!this.readBases&&f.start<=this.alignmentStart&&f.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=f)}toJSON(){const f={};return Object.keys(this).forEach(d=>{d.startsWith("_")||(f[d]=this[d])}),f.readBases=this.getReadBases(),f}}},3165:(r,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.cramFileDefinition=l,s.cramBlockHeader=c,s.cramBlockCrc32=h,s.cramTagDictionary=d,s.cramPreservationMap=u,s.isMappedSliceHeader=function(T){return typeof T.refSeqId=="number"},s.getSectionParsers=function(T){return{cramFileDefinition:l(),cramBlockHeader:c(),cramBlockCrc32:h(),cramDataSeriesEncodingMap:w(),cramTagEncodingMap:b(),cramCompressionHeader:{parser:(A,C)=>{const{value:k,offset:I}=u().parser(A,C);C=I;const{value:B,offset:M}=w().parser(A,C);C=M;const{value:N,offset:x}=b().parser(A,C);return C=x,{value:{dataSeriesEncoding:p(B),preservation:p(k),tagEncoding:p(N)},offset:C}}},cramEncoding:{parser:(A,C)=>g(A,C)},cramUnmappedSliceHeader:m(T),cramMappedSliceHeader:F(T),cramContainerHeader1:y(T),cramContainerHeader2:v(T)}};const o=a(400);function l(){return{parser:(T,A=0)=>{const C=T,k=new DataView(C.buffer,C.byteOffset,C.length);let I=0;const B=T.subarray(I,I+4).toString();I+=4;const M=k.getUint8(I);I+=1;const N=k.getUint8(I);I+=1;const x=C.subarray(I,I+20).toString().replaceAll("\0","");return I+=20,{value:{magic:B,majorVersion:M,minorVersion:N,fileId:x},offset:I}},maxLength:26}}function c(){return{parser:(T,A=0)=>{const C=T,k=new DataView(C.buffer,C.byteOffset,C.length);let I=0;const B=k.getUint8(I),M=["raw","gzip","bzip2","lzma","rans","rans4x16","arith","fqzcomp","tok3"][B];if(!M)throw new Error(`compression method number ${B} not implemented`);I+=1;const N=k.getUint8(I),x=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][N];if(!x)throw new Error(`invalid block content type id ${N}`);I+=1;const[D,S]=(0,o.parseItf8)(T,I);I+=S;const[U,O]=(0,o.parseItf8)(T,I);I+=O;const[Q,K]=(0,o.parseItf8)(T,I);return I+=K,{offset:I,value:{uncompressedSize:Q,compressedSize:U,contentId:D,contentType:x,compressionMethod:M}}},maxLength:17}}function h(){return{parser:(T,A)=>{const C=T,k=new DataView(C.buffer,C.byteOffset,C.length).getUint32(A,!0);return{offset:A+=4,value:{crc32:k}}},maxLength:4}}function f(T,A,C){const k=T.toString("utf8",A,C),I=[];for(let B=0;B<k.length;B+=3)I.push(k.slice(B,B+3));return I}function d(){return{parser:(T,A)=>{const[C,k]=(0,o.parseItf8)(T,A);A+=k;const I=T.subarray(A,A+C);A+=C;const B=[];let M=0,N=0;for(;N<I.length;N++)I[N]||(B.push(f(I,M,N)),M=N+1);return N>M&&B.push(f(I,M,N)),{value:{size:C,ents:B},offset:A}}}}function u(){return{parser:(T,A)=>{const C=T,k=new DataView(C.buffer,C.byteOffset,C.length),[I,B]=(0,o.parseItf8)(T,A);A+=B;const[M,N]=(0,o.parseItf8)(T,A);A+=N;const x=[];for(let D=0;D<M;D++){const S=String.fromCharCode(T[A])+String.fromCharCode(T[A+1]);if(A+=2,S==="MI"||S==="UI"||S==="PI"||S==="RN"||S==="AP"||S==="RR")x.push({key:S,value:!!k.getUint8(A)}),A+=1;else if(S==="SM")x.push({key:S,value:[k.getUint8(A),k.getUint8(A+1),k.getUint8(A+2),k.getUint8(A+3),k.getUint8(A+4)]}),A+=5;else{if(S!=="TD")throw new Error(`unknown key ${S}`);{const{offset:U,value:O}=d().parser(T,A);x.push({key:S,value:O.ents}),A=U}}}return{value:{mapSize:I,mapCount:M,ents:x},offset:A}}}}function p(T){const A={};for(const{key:C,value:k}of T.ents)A[C]&&console.warn(`duplicate key ${C} in map`),A[C]=k;return A}function m(T){return{parser:(A,C)=>{const[k,I]=(0,o.parseItf8)(A,C);C+=I;let B=0;if(T>=3){const[O,Q]=(0,o.parseLtf8)(A,C);C+=Q,B=O}else if(T===2){const[O,Q]=(0,o.parseItf8)(A,C);C+=Q,B=O}else console.warn("recordCounter=0");const[M,N]=(0,o.parseItf8)(A,C);C+=N;const[x,D]=(0,o.parseItf8)(A,C);C+=D;const S=[];for(let O=0;O<x;O++){const[Q,K]=(0,o.parseItf8)(A,C);C+=K,S.push(Q)}let U;return T>=2&&(U=[...A.subarray(C,C+16)],C+=16),{value:{recordCounter:B,md5:U,contentIds:S,numContentIds:x,numBlocks:M,numRecords:k},offset:C}},maxLength:A=>40+5*A}}function F(T){return{parser:(A,C)=>{const[k,I]=(0,o.parseItf8)(A,C);C+=I;const[B,M]=(0,o.parseItf8)(A,C);C+=M;const[N,x]=(0,o.parseItf8)(A,C);C+=x;const[D,S]=(0,o.parseItf8)(A,C);C+=S;let U=0;if(T>=3){const[ee,te]=(0,o.parseLtf8)(A,C);C+=te,U=ee}else if(T===2){const[ee,te]=(0,o.parseItf8)(A,C);C+=te,U=ee}else console.warn("majorVersion is <2, recordCounter set to 0");const[O,Q]=(0,o.parseItf8)(A,C);C+=Q;const[K,G]=(0,o.parseItf8)(A,C);C+=G;const ne=[];for(let ee=0;ee<K;ee++){const[te,be]=(0,o.parseItf8)(A,C);C+=be,ne.push(te)}const[H,$]=(0,o.parseItf8)(A,C);let X;return C+=$,T>=2&&(X=[...A.subarray(C,C+16)],C+=16),{value:{md5:X,numBlocks:O,numRecords:D,numContentIds:K,refSeqSpan:N,refSeqId:k,refSeqStart:B,recordCounter:U,refBaseBlockId:H,contentIds:ne},offset:C}},maxLength:A=>60+5*A}}function g(T,A){const C=T,k=new DataView(C.buffer,C.byteOffset,C.length),[I,B]=(0,o.parseItf8)(T,A);A+=B;const[M,N]=(0,o.parseItf8)(T,A);A+=N;const x={};if(I!==0)if(I===1){const[D,S]=(0,o.parseItf8)(T,A);x.blockContentId=D,A+=S}else if(I===2){const[D,S]=(0,o.parseItf8)(T,A);x.offset=D,A+=S;const[U,O]=(0,o.parseItf8)(T,A);x.M=U,A+=O}else if(I===3){const D=(0,o.parseItf8)(T,A),S=D[0];A+=D[1];const U=[];for(let G=0;G<S;G++){const ne=(0,o.parseItf8)(T,A);U.push(ne[0]),A+=ne[1]}x.symbols=U;const O=(0,o.parseItf8)(T,A),Q=D[0];x.numLengths=Q,x.numCodes=S,x.numLengths=Q,A+=O[1];const K=[];for(let G=0;G<Q;G++){const ne=(0,o.parseItf8)(T,A);A+=ne[1],K.push(ne[0])}x.bitLengths=K}else if(I===4){const{value:D,offset:S}=g(T,A);x.lengthsEncoding=D,A=S;const{value:U,offset:O}=g(T,A);x.valuesEncoding=U,A=O}else if(I===5){x.stopByte=k.getUint8(A),A+=1;const[D,S]=(0,o.parseItf8)(T,A);x.blockContentId=D,A+=S}else if(I===6){const[D,S]=(0,o.parseItf8)(T,A);x.offset=D,A+=S;const[U,O]=(0,o.parseItf8)(T,A);x.length=U,A+=O}else if(I===7){const[D,S]=(0,o.parseItf8)(T,A);x.offset=D,A+=S;const[U,O]=(0,o.parseItf8)(T,A);x.K=U,A+=O}else if(I===8){const[D,S]=(0,o.parseItf8)(T,A);x.offset=D,A+=S;const[U,O]=(0,o.parseItf8)(T,A);x.log2m=U,A+=O}else{if(I!==9)throw new Error(`unknown codecId ${I}`);{const[D,S]=(0,o.parseItf8)(T,A);x.offset=D,A+=S}}return{value:{codecId:I,parametersBytes:M,parameters:x},offset:A}}function w(){return{parser:(T,A)=>{const[C,k]=(0,o.parseItf8)(T,A);A+=k;const[I,B]=(0,o.parseItf8)(T,A);A+=B;const M=[];for(let N=0;N<I;N++){const x=String.fromCharCode(T[A])+String.fromCharCode(T[A+1]);A+=2;const{value:D,offset:S}=g(T,A);A=S,M.push({key:x,value:D})}return{value:{mapSize:C,ents:M,mapCount:I},offset:A}}}}function b(){return{parser:(T,A)=>{const[C,k]=(0,o.parseItf8)(T,A);A+=k;const[I,B]=(0,o.parseItf8)(T,A);A+=B;const M=[];for(let N=0;N<I;N++){const[x,D]=(0,o.parseItf8)(T,A);A+=D;const S=String.fromCharCode(x>>16&255)+String.fromCharCode(x>>8&255)+String.fromCharCode(255&x),{value:U,offset:O}=g(T,A);A=O,M.push({key:S,value:U})}return{value:{mapSize:C,ents:M,mapCount:I},offset:A}}}}function y(T){return{maxLength:52,parser:(A,C)=>{const k=A,I=new DataView(k.buffer,k.byteOffset,k.length).getInt32(C,!0);C+=4;const[B,M]=(0,o.parseItf8)(A,C);C+=M;const[N,x]=(0,o.parseItf8)(A,C);C+=x;const[D,S]=(0,o.parseItf8)(A,C);C+=S;const[U,O]=(0,o.parseItf8)(A,C);C+=O;let Q,K=0;if(T>=3){const[X,ee]=(0,o.parseLtf8)(A,C);K=X,C+=ee}else if(T===2){const[X,ee]=(0,o.parseItf8)(A,C);K=X,C+=ee}else console.warn("setting recordCounter=0");if(T>1){const[X,ee]=(0,o.parseLtf8)(A,C);Q=X,C+=ee}const[G,ne]=(0,o.parseItf8)(A,C);C+=ne;const[H,$]=(0,o.parseItf8)(A,C);return{value:{length:I,refSeqId:B,refSeqStart:N,alignmentSpan:D,numBlocks:G,numLandmarks:H,numBases:Q,recordCounter:K,numRecords:U},offset:C+=$}}}}function v(T){return{parser:(A,C)=>{const k=A,I=new DataView(k.buffer,k.byteOffset,k.length),[B,M]=(0,o.parseItf8)(A,C);C+=M;const N=[];for(let D=0;D<B;D++){const[S,U]=(0,o.parseItf8)(A,C);C+=U,N.push(S)}let x;return T>=3&&(x=I.getUint32(C,!0),C+=4),{value:Object.assign(Object.assign({},x===void 0?{}:{crc32:x}),{numLandmarks:B,landmarks:N}),offset:C}},maxLength:A=>5+5*A+4}}},6484:(r,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(d,u,p,m,F,g,w,b,y){let v=u("BF");const T=u("CF");if(!(0,c.isMappedSliceHeader)(m.parsedContent))throw new Error("slice header not mapped");const A=b>1&&m.parsedContent.refSeqId===-2?u("RI"):m.parsedContent.refSeqId,C=u("RL");let k=u("AP");p.APdelta&&(k+=w.lastAlignmentStart),w.lastAlignmentStart=k;const I=u("RG");let B,M,N,x;if(p.readNamesIncluded&&(B=h(u("RN"))),l.CramFlagsDecoder.isDetached(T)){const $=u("MF");let X;p.readNamesIncluded||(X=h(u("RN")),B=X);const ee=u("NS"),te=u("NP");($||ee>-1)&&(M={mateFlags:$,mateSequenceId:ee,mateAlignmentStart:te,mateReadName:X}),N=u("TS"),l.MateFlagsDecoder.isUnmapped($)&&(v=l.BamFlagsDecoder.setMateUnmapped(v)),l.MateFlagsDecoder.isOnNegativeStrand($)&&(v=l.BamFlagsDecoder.setMateReverseComplemented(v))}else l.CramFlagsDecoder.isWithMateDownstream(T)&&(x=u("NF")+y+1);const D=u("TL");if(D<0)throw new o.CramMalformedError("invalid TL index");const S={},U=p.getTagNames(D),O=U.length;for(let $=0;$<O;$+=1){const X=U[$],ee=X.slice(0,2),te=X.slice(2,3),be=p.getCodecForTag(X).decode(d,F,g,w);S[ee]=typeof be=="number"?be:f(te,be)}let Q,K,G,ne,H;if(l.BamFlagsDecoder.isSegmentUnmapped(v))if(l.CramFlagsDecoder.isDecodeSequenceAsStar(T))H=null,ne=null;else{const $=new Array(C);for(let X=0;X<$.length;X+=1)$[X]=u("BA");if(H=String.fromCharCode(...$),l.CramFlagsDecoder.isPreservingQualityScores(T)){ne=new Array(C);for(let X=0;X<$.length;X+=1)ne[X]=u("QS")}}else{const $=u("FN");if($&&(Q=function(X,ee,te,be,q){let J=0,E=X-1;const Y=new Array(ee);function j([P,fe]){const oe=te(fe);if(P==="character")return String.fromCharCode(oe);if(P==="string"){let ce="";for(let ue=0;ue<oe.byteLength;ue++)ce+=String.fromCharCode(oe[ue]);return ce}return P==="numArray"?oe.toArray():oe}for(let P=0;P<ee;P+=1){const fe=String.fromCharCode(te("FC")),oe=te("FP"),ce={B:["character","BA"],S:["string",q>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[fe];if(!ce)throw new o.CramMalformedError(`invalid read feature code "${fe}"`);let ue=j(ce);const he={B:["number","QS"]}[fe];he&&(ue=[ue,j(he)]),J+=oe;const ye=J;E+=oe;const Ie=E;fe==="D"||fe==="N"?E+=ue:fe==="I"||fe==="S"?E-=ue.length:fe==="i"&&(E-=1),Y[P]={code:fe,pos:ye,refPos:Ie,data:ue}}return Y}(k,$,u,0,b)),K=C,Q)for(const{code:X,data:ee}of Q)X==="D"||X==="N"?K+=ee:X==="I"||X==="S"?K-=ee.length:X==="i"&&(K-=1);if(Number.isNaN(K)&&(console.warn(`${B||`${A}:${k}`} record has invalid read features`),K=C),G=u("MQ"),l.CramFlagsDecoder.isPreservingQualityScores(T)){ne=new Array(C);for(let X=0;X<ne.length;X++)ne[X]=u("QS")}}return{readLength:C,sequenceId:A,cramFlags:T,flags:v,alignmentStart:k,readGroupId:I,readName:B,mateToUse:M,templateSize:N,mateRecordNumber:x,readFeatures:Q,lengthOnRef:K,mappingQuality:G,qualityScores:ne,readBases:H,tags:S}};const o=a(9747),l=a(8401),c=a(3165);function h(d){let u="";for(let p=0;p<d.length&&d[p]!==0;p++)u+=String.fromCharCode(d[p]);return u}function f(d,u){if(d==="Z")return h(u);if(d==="A")return String.fromCharCode(u[0]);if(d==="I")return new Uint32Array(u.buffer)[0];if(d==="i")return new Int32Array(u.buffer)[0];if(d==="s")return new Int16Array(u.buffer)[0];if(d==="S")return new Uint16Array(u.buffer)[0];if(d==="c")return new Int8Array(u.buffer)[0];if(d==="C")return u[0];if(d==="f")return new Float32Array(u.buffer)[0];if(d==="H")return Number.parseInt(h(u).replace(/^0x/,""),16);if(d==="B")return function(p){const m=String.fromCharCode(p[0]),F=new DataView(p.buffer).getUint32(1,!0),g=new Array(F);if(p=p.slice(5),m==="c"){const w=new Int8Array(p.buffer);for(let b=0;b<F;b+=1)g[b]=w[b]}else if(m==="C"){const w=new Uint8Array(p.buffer);for(let b=0;b<F;b+=1)g[b]=w[b]}else if(m==="s"){const w=new Int16Array(p.buffer);for(let b=0;b<F;b+=1)g[b]=w[b]}else if(m==="S"){const w=new Uint16Array(p.buffer);for(let b=0;b<F;b+=1)g[b]=w[b]}else if(m==="i"){const w=new Int32Array(p.buffer);for(let b=0;b<F;b+=1)g[b]=w[b]}else if(m==="I"){const w=new Uint32Array(p.buffer);for(let b=0;b<F;b+=1)g[b]=w[b]}else{if(m!=="f")throw new Error(`unknown type: ${m}`);{const w=new Float32Array(p.buffer);for(let b=0;b<F;b+=1)g[b]=w[b]}}return g}(u);throw new o.CramMalformedError(`Unrecognized tag type ${d}`)}},6771:function(r,s,a){var o=this&&this.__awaiter||function(w,b,y,v){return new(y||(y=Promise))(function(T,A){function C(B){try{I(v.next(B))}catch(M){A(M)}}function k(B){try{I(v.throw(B))}catch(M){A(M)}}function I(B){var M;B.done?T(B.value):(M=B.value,M instanceof y?M:new y(function(N){N(M)})).then(C,k)}I((v=v.apply(w,b||[])).next())})},l=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(s,"__esModule",{value:!0});const c=a(9747),h=a(400),f=l(a(7295)),d=l(a(6484)),u=l(a(8401)),p=a(3165),m=a(612);function F(w,b,y,v){const T=!!(v.mate||v.mateRecordNumber!==void 0&&v.mateRecordNumber!==b);y.readName||(y.readName=String(y.uniqueId),v.readName=y.readName),y.mate={sequenceId:v.sequenceId,alignmentStart:v.alignmentStart,uniqueId:v.uniqueId},v.readName&&(y.mate.readName=v.readName),v.mate||v.mateRecordNumber!==void 0||(v.mate={sequenceId:y.sequenceId,alignmentStart:y.alignmentStart,uniqueId:y.uniqueId},y.readName&&(v.mate.readName=y.readName)),y.flags|=f.default.BAM_FPAIRED,v.flags&f.default.BAM_FUNMAP&&(y.flags|=f.default.BAM_FMUNMAP),y.flags&f.default.BAM_FUNMAP&&(v.flags|=f.default.BAM_FMUNMAP),v.flags&f.default.BAM_FREVERSE&&(y.flags|=f.default.BAM_FMREVERSE),y.flags&f.default.BAM_FREVERSE&&(v.flags|=f.default.BAM_FMREVERSE),y.templateLength===void 0&&(T?function(A,C,k){const I=function x(D){const S=[D];if(D.mateRecordNumber!==void 0&&D.mateRecordNumber>=0){const U=A[D.mateRecordNumber];if(!U)throw new c.CramMalformedError("intra-slice mate record not found, this file seems malformed");S.push(...x(U))}return S}(k),B=I.map(x=>x.alignmentStart),M=I.map(x=>x.alignmentStart+x.readLength-1),N=Math.max(...M)-Math.min(...B)+1;N>=0&&I.forEach(x=>{if(x.templateLength!==void 0)throw new c.CramMalformedError("mate pair group has some members that have template lengths already, this file seems malformed");x.templateLength=N})}(w,0,y):function(A,C){const k=Math.min(A.alignmentStart,C.alignmentStart),I=Math.max(A.alignmentStart+A.readLength-1,C.alignmentStart+C.readLength-1)-k+1;A.templateLength=I,C.templateLength=I}(y,v)),y.mateRecordNumber=void 0}class g{constructor(b,y,v){this.container=b,this.containerPosition=y,this.sliceSize=v,this.file=b.file}getHeader(){return o(this,void 0,void 0,function*(){const{majorVersion:b}=yield this.file.getDefinition(),y=(0,p.getSectionParsers)(b),v=yield this.container.getHeader();if(!v)throw new Error("no container header detected");const T=yield this.file.readBlock(v._endPosition+this.containerPosition);if(T===void 0)throw new Error("block header undefined");if(T.contentType==="MAPPED_SLICE_HEADER"){const A=(0,h.parseItem)(T.content,y.cramMappedSliceHeader.parser,0,v._endPosition);return Object.assign(Object.assign({},T),{parsedContent:A})}if(T.contentType==="UNMAPPED_SLICE_HEADER"){const A=(0,h.parseItem)(T.content,y.cramUnmappedSliceHeader.parser,0,v._endPosition);return Object.assign(Object.assign({},T),{parsedContent:A})}throw new c.CramMalformedError(`error reading slice header block, invalid content type ${T.contentType}`)})}getBlocks(){return o(this,void 0,void 0,function*(){const b=yield this.getHeader();let y=b._endPosition;const v=new Array(b.parsedContent.numBlocks);for(let T=0;T<v.length;T++){const A=yield this.file.readBlock(y);if(A===void 0)throw new Error("block undefined");v[T]=A,y=v[T]._endPosition}return v})}getCoreDataBlock(){return o(this,void 0,void 0,function*(){return(yield this.getBlocks())[0]})}_getBlocksContentIdIndex(){return o(this,void 0,void 0,function*(){const b=yield this.getBlocks(),y={};return b.forEach(v=>{v.contentType==="EXTERNAL_DATA"&&(y[v.contentId]=v)}),y})}getBlockByContentId(b){return o(this,void 0,void 0,function*(){return(yield this._getBlocksContentIdIndex())[b]})}getReferenceRegion(){return o(this,void 0,void 0,function*(){const b=(yield this.getHeader()).parsedContent;if(!(0,p.isMappedSliceHeader)(b))throw new Error("slice header not mapped");if(b.refSeqId<0)return;const y=yield this.container.getCompressionScheme();if(y===void 0)throw new Error("compression scheme undefined");if(b.refBaseBlockId>=0){const v=yield this.getBlockByContentId(b.refBaseBlockId);if(!v)throw new c.CramMalformedError("embedded reference specified, but reference block does not exist");return{seq:v.data.toString("utf8"),start:b.refSeqStart,end:b.refSeqStart+b.refSeqSpan-1,span:b.refSeqSpan}}if(y.referenceRequired||this.file.fetchReferenceSequenceCallback){if(!this.file.fetchReferenceSequenceCallback)throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");const v=yield this.file.fetchReferenceSequenceCallback(b.refSeqId,b.refSeqStart,b.refSeqStart+b.refSeqSpan-1);if(v.length!==b.refSeqSpan)throw new c.CramArgumentError("seqFetch callback returned a reference sequence of the wrong length");return{seq:v,start:b.refSeqStart,end:b.refSeqStart+b.refSeqSpan-1,span:b.refSeqSpan}}})}getAllRecords(){return this.getRecords(()=>!0)}_fetchRecords(){return o(this,void 0,void 0,function*(){var b,y;const{majorVersion:v}=yield this.file.getDefinition(),T=yield this.container.getCompressionScheme();if(T===void 0)throw new Error("compression scheme undefined");const A=yield this.getHeader(),C=yield this._getBlocksContentIdIndex();if(v>1&&this.file.options.checkSequenceMD5&&(0,p.isMappedSliceHeader)(A.parsedContent)&&A.parsedContent.refSeqId>=0&&((b=A.parsedContent.md5)===null||b===void 0?void 0:b.join(""))!=="0000000000000000"){const N=yield this.getReferenceRegion();if(N){const{seq:x,start:D,end:S}=N,U=(0,h.sequenceMD5)(x),O=(y=A.parsedContent.md5)===null||y===void 0?void 0:y.map(Q=>(Q<16?"0":"")+Q.toString(16)).join("");if(U!==O)throw new c.CramMalformedError(`MD5 checksum reference mismatch for ref ${A.parsedContent.refSeqId} pos ${D}..${S}. recorded MD5: ${O}, calculated MD5: ${U}`)}}const k=yield this.getCoreDataBlock(),I={lastAlignmentStart:(0,p.isMappedSliceHeader)(A.parsedContent)?A.parsedContent.refSeqStart:0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{map:new Map,getCursor(N){let x=this.map.get(N);return x===void 0&&(x={bitPosition:7,bytePosition:0},this.map.set(N,x)),x}}},B=N=>{const x=T.getCodecForDataSeries(N);if(!x)throw new c.CramMalformedError(`no codec defined for ${N} data series`);return x.decode(this,k,C,I)},M=new Array(A.parsedContent.numRecords);for(let N=0;N<M.length;N+=1)try{const x=(0,d.default)(this,B,T,A,k,C,I,v,N);M[N]=new u.default(Object.assign(Object.assign({},x),{uniqueId:A.contentPosition+A.parsedContent.recordCounter+N+1}))}catch(x){if(x instanceof m.CramBufferOverrunError){console.warn("read attempted beyond end of buffer, file seems truncated.");break}throw x}for(let N=0;N<M.length;N+=1){const{mateRecordNumber:x}=M[N];x!==void 0&&x>=0&&F(M,N,M[N],M[x])}return M})}getRecords(b){return o(this,void 0,void 0,function*(){const y=this.container.filePosition+this.containerPosition;let v=this.file.featureCache.get(y.toString());v||(v=this._fetchRecords(),this.file.featureCache.set(y.toString(),v));const T=(yield v).filter(b);if(T.length&&this.file.fetchReferenceSequenceCallback){const A=yield this.getHeader();if((0,p.isMappedSliceHeader)(A.parsedContent)&&(A.parsedContent.refSeqId>=0||A.parsedContent.refSeqId===-2)){const C=A.parsedContent.refSeqId>=0?A.parsedContent.refSeqId:void 0,k=yield this.container.getCompressionScheme();if(k===void 0)throw new Error("compression scheme undefined");const I={};for(const B of T){const M=C!==void 0?C:B.sequenceId;let N=I[M];N||(N={id:M,start:B.alignmentStart,end:Number.NEGATIVE_INFINITY,seq:null},I[M]=N);const x=B.alignmentStart+(B.lengthOnRef||B.readLength)-1;x>N.end&&(N.end=x),B.alignmentStart<N.start&&(N.start=B.alignmentStart)}yield Promise.all(Object.values(I).map(B=>o(this,void 0,void 0,function*(){B.id!==-1&&B.start<=B.end&&this.file.fetchReferenceSequenceCallback&&(B.seq=yield this.file.fetchReferenceSequenceCallback(B.id,B.start,B.end))})));for(const B of T){const M=I[C!==void 0?C:B.sequenceId];if(M!=null&&M.seq){const N=M.seq;B.addReferenceSequence(Object.assign(Object.assign({},M),{seq:N}),k)}}}}return T})}}s.default=g,"getHeader getBlocks _getBlocksContentIdIndex".split(" ").forEach(w=>{(0,h.tinyMemoize)(g,w)})},400:function(r,s,a){var o=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(s,"__esModule",{value:!0}),s.itf8Size=function(f){return-128&f?-16384&f?-2097152&f?-268435456&f?5:4:3:2:1},s.parseItf8=function(f,d){let u=d;const p=f[u];let m;if(p<128?(m=p,u+=1):p<192?(m=16383&(p<<8|f[u+1]),u+=2):p<224?(m=2097151&(p<<16|f[u+1]<<8|f[u+2]),u+=3):p<240?(m=268435455&(p<<24|f[u+1]<<16|f[u+2]<<8|f[u+3]),u+=4):(m=(15&p)<<28|f[u+1]<<20|f[u+2]<<12|f[u+3]<<4|15&f[u+4],u+=5),u>f.length)throw new h.CramBufferOverrunError("Attempted to read beyond end of buffer; this file seems truncated.");return[m,u-d]},s.parseLtf8=function(f,d){let u=d;const p=f[u];let m;if(p<128)m=p,u+=1;else if(p<192)m=16383&(f[u]<<8|f[u+1]),u+=2;else if(p<224)m=2097151&(f[u]<<16|f[u+1]<<8|f[u+2]),m=(63&p)<<16|f.readUInt16LE(u+1),u+=3;else if(p<240)m=268435455&(f[u]<<24|f[u+1]<<16|f[u+2]<<8|f[u+3]),u+=4;else if(p<248)m=(15&f[u])*Math.pow(2,32)+(f[u+1]<<24)|f[u+2]<<16|f[u+3]<<8|f[u+4],u+=5;else if(p<252)m=((7&f[u])<<8|f[u+1])*Math.pow(2,32)+(f[u+2]<<24)|f[u+3]<<16|f[u+4]<<8|f[u+5],u+=6;else if(p<254)m=((3&f[u])<<16|f[u+1]<<8|f[u+2])*Math.pow(2,32)+(f[u+3]<<24)|f[u+4]<<16|f[u+5]<<8|f[u+6],u+=7;else if(p<255){if(m=c.default.fromBytesBE(f.slice(u+1,u+8)),m.greaterThan(Number.MAX_SAFE_INTEGER)||m.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");m=m.toNumber(),u+=8}else{if(m=c.default.fromBytesBE(f.slice(u+1,u+9)),m.greaterThan(Number.MAX_SAFE_INTEGER)||m.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");m=m.toNumber(),u+=9}return[m,u-d]},s.parseItem=function(f,d,u=0,p=0){const{offset:m,value:F}=d(f,u);return Object.assign(Object.assign({},F),{_endPosition:m+p,_size:m-u})},s.tinyMemoize=function(f,d){const u=f.prototype[d],p=`_memo_${d}`;f.prototype[d]=function(){if(!(p in this)){const m=u.call(this);this[p]=m,Promise.resolve(m).catch(()=>{delete this[p]})}return this[p]}},s.sequenceMD5=function(f){return(0,l.default)(f.toUpperCase().replaceAll(/[^\u0021-\u007e]/g,""))};const l=o(a(3503)),c=o(a(8570)),h=a(612)},9747:(r,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CramArgumentError=s.CramSizeLimitError=s.CramMalformedError=s.CramUnimplementedError=s.CramError=void 0;class a extends Error{}s.CramError=a;class o extends Error{}s.CramUnimplementedError=o,s.CramMalformedError=class extends a{},s.CramSizeLimitError=class extends a{},s.CramArgumentError=class extends a{}},7806:function(r,s,a){var o=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(s,"__esModule",{value:!0}),s.IndexedCramFile=s.CraiIndex=s.CramRecord=s.CramFile=void 0;var l=a(7390);Object.defineProperty(s,"CramFile",{enumerable:!0,get:function(){return o(l).default}}),Object.defineProperty(s,"CramRecord",{enumerable:!0,get:function(){return l.CramRecord}});var c=a(4923);Object.defineProperty(s,"CraiIndex",{enumerable:!0,get:function(){return o(c).default}});var h=a(6014);Object.defineProperty(s,"IndexedCramFile",{enumerable:!0,get:function(){return o(h).default}})},6014:function(r,s,a){var o=this&&this.__awaiter||function(f,d,u,p){return new(u||(u=Promise))(function(m,F){function g(y){try{b(p.next(y))}catch(v){F(v)}}function w(y){try{b(p.throw(y))}catch(v){F(v)}}function b(y){var v;y.done?m(y.value):(v=y.value,v instanceof u?v:new u(function(T){T(v)})).then(g,w)}b((p=p.apply(f,d||[])).next())})},l=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(s,"__esModule",{value:!0});const c=a(9747),h=l(a(7390));s.default=class{constructor(f){var d;if(this.cram=(d=f.cram)!==null&&d!==void 0?d:new h.default({url:f.cramUrl,path:f.cramPath,filehandle:f.cramFilehandle,seqFetch:f.seqFetch,checkSequenceMD5:f.checkSequenceMD5,cacheSize:f.cacheSize}),!(this.cram instanceof h.default))throw new Error("invalid arguments: no cramfile");this.index=f.index}getRecordsForRange(f,d,u){return o(this,arguments,void 0,function*(p,m,F,g={}){if(g.viewAsPairs=g.viewAsPairs||!1,g.pairAcrossChr=g.pairAcrossChr||!1,g.maxInsertSize=g.maxInsertSize||2e5,typeof p=="string")throw new c.CramUnimplementedError("string sequence names not yet supported");const w=p,b=yield this.index.getEntriesForRange(w,m,F),y=A=>A.sequenceId===p&&A.alignmentStart<=F&&A.lengthOnRef!==void 0&&A.alignmentStart+A.lengthOnRef-1>=m,v=yield Promise.all(b.map(A=>this.getRecordsInSlice(A,y)));let T=Array.prototype.concat(...v);if(g.viewAsPairs){const A={},C={};for(const D of T){const S=D.readName;if(S===void 0)throw new Error("readName undefined");const U=D.uniqueId;A[S]||(A[S]=0),A[S]+=1,C[U]=1}const k={};Object.entries(A).forEach(([D,S])=>{S===1&&(k[D]=!0)});const I=[];for(const D of T){const S=D.readName;if(S===void 0)throw new Error("readName undefined");if(k[S]&&D.mate&&(D.mate.sequenceId===w||g.pairAcrossChr)&&Math.abs(D.alignmentStart-D.mate.alignmentStart)<g.maxInsertSize){const U=this.index.getEntriesForRange(D.mate.sequenceId,D.mate.alignmentStart,D.mate.alignmentStart+1);I.push(U)}}const B=yield Promise.all(I);let M=[];for(const D of B)M.push(...D);M=M.sort((D,S)=>D.toString().localeCompare(S.toString())).filter((D,S,U)=>!S||D.toString()!==U[S-1].toString());const N=[];for(const D of M){let S=this.cram.featureCache.get(D.toString());S||(S=this.getRecordsInSlice(D,()=>!0),this.cram.featureCache.set(D.toString(),S));const U=S.then(O=>{const Q=[];for(const K of O){if(K.readName===void 0)throw new Error("readName undefined");k[K.readName]&&!C[K.uniqueId]&&Q.push(K)}return Q});N.push(U)}const x=yield Promise.all(N);if(x.length){const D=x.reduce((S,U)=>S.concat(U));T=T.concat(D)}}return T})}getRecordsInSlice({containerStart:f,sliceStart:d,sliceBytes:u},p){return this.cram.getContainerAtPosition(f).getSlice(d,u).getRecords(p)}hasDataForReferenceSequence(f){return this.index.hasDataForReferenceSequence(f)}}},5931:(r,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RemoteFile=s.LocalFile=void 0,s.open=function(c,h,f){if(f)return f;if(c)return new o.RemoteFile(c);if(h)return new o.LocalFile(h);throw new Error("no url, path, or filehandle provided, cannot open")};const o=a(1113);var l=a(1113);Object.defineProperty(s,"LocalFile",{enumerable:!0,get:function(){return l.LocalFile}}),Object.defineProperty(s,"RemoteFile",{enumerable:!0,get:function(){return l.RemoteFile}})},6476:(r,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RANS_BYTE_L=s.TOTFREQ=s.TF_SHIFT=void 0,s.TF_SHIFT=12,s.TOTFREQ=4096,s.RANS_BYTE_L=8388608},997:function(r,s,a){var o=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(f,d,u,p){let m=f.getInt(),F=f.getInt(),g=f.getInt(),w=f.getInt();const b=p.remaining(),y=-4&b;for(let T=0;T<y;T+=4){const A=d.R[h.default.get(m,c.TF_SHIFT)],C=d.R[h.default.get(F,c.TF_SHIFT)],k=d.R[h.default.get(g,c.TF_SHIFT)],I=d.R[h.default.get(w,c.TF_SHIFT)];p.putAt(T,A),p.putAt(T+1,C),p.putAt(T+2,k),p.putAt(T+3,I),m=h.default.advanceSymbolStep(m,u[255&A],c.TF_SHIFT),F=h.default.advanceSymbolStep(F,u[255&C],c.TF_SHIFT),g=h.default.advanceSymbolStep(g,u[255&k],c.TF_SHIFT),w=h.default.advanceSymbolStep(w,u[255&I],c.TF_SHIFT),m=h.default.renormalize(m,f),F=h.default.renormalize(F,f),g=h.default.renormalize(g,f),w=h.default.renormalize(w,f)}let v;switch(p.setPosition(y),3&b){case 0:break;case 1:v=d.R[h.default.get(m,c.TF_SHIFT)],h.default.advanceSymbol(m,f,u[255&v],c.TF_SHIFT),p.put(v);break;case 2:v=d.R[h.default.get(m,c.TF_SHIFT)],h.default.advanceSymbol(m,f,u[255&v],c.TF_SHIFT),p.put(v),v=d.R[h.default.get(F,c.TF_SHIFT)],h.default.advanceSymbol(F,f,u[255&v],c.TF_SHIFT),p.put(v);break;case 3:v=d.R[h.default.get(m,c.TF_SHIFT)],h.default.advanceSymbol(m,f,u[255&v],c.TF_SHIFT),p.put(v),v=d.R[h.default.get(F,c.TF_SHIFT)],h.default.advanceSymbol(F,f,u[255&v],c.TF_SHIFT),p.put(v),v=d.R[h.default.get(g,c.TF_SHIFT)],h.default.advanceSymbol(g,f,u[255&v],c.TF_SHIFT),p.put(v);break;default:throw new l.CramMalformedError("invalid output size encountered during rANS decoding")}p.setPosition(0)};const l=a(9747),c=a(6476),h=o(a(488))},7960:function(r,s,a){var o=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(h,f,d,u){const p=f.remaining();let m=h.getInt(),F=h.getInt(),g=h.getInt(),w=h.getInt();const b=p>>2;let y=0,v=b,T=2*b,A=3*b,C=0,k=0,I=0,B=0;for(;y<b;y+=1,v+=1,T+=1,A+=1){const M=255&d[C].R[c.default.get(m,l.TF_SHIFT)],N=255&d[k].R[c.default.get(F,l.TF_SHIFT)],x=255&d[I].R[c.default.get(g,l.TF_SHIFT)],D=255&d[B].R[c.default.get(w,l.TF_SHIFT)];f.putAt(y,M),f.putAt(v,N),f.putAt(T,x),f.putAt(A,D),m=c.default.advanceSymbolStep(m,u[C][M],l.TF_SHIFT),F=c.default.advanceSymbolStep(F,u[k][N],l.TF_SHIFT),g=c.default.advanceSymbolStep(g,u[I][x],l.TF_SHIFT),w=c.default.advanceSymbolStep(w,u[B][D],l.TF_SHIFT),m=c.default.renormalize(m,h),F=c.default.renormalize(F,h),g=c.default.renormalize(g,h),w=c.default.renormalize(w,h),C=M,k=N,I=x,B=D}for(;A<p;A+=1){const M=255&d[B].R[c.default.get(w,l.TF_SHIFT)];f.putAt(A,M),w=c.default.advanceSymbol(w,h,u[B][M],l.TF_SHIFT),B=M}};const l=a(6476),c=o(a(488))},488:(r,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0});const o=a(9747),l=a(6476);class c{constructor(){this.F=void 0,this.C=void 0}}function h(f,d,u,p){return u*(f>>p)+(f&(1<<p)-1)-d}s.default={FC:c,AriDecoder:class{constructor(){this.fc=new Array(256);for(let f=0;f<this.fc.length;f+=1)this.fc[f]=new c;this.R=null}},DecodingSymbol:class{constructor(){this.start=void 0,this.freq=void 0}},symbolInit:function(f,d,u){if(!(d<=65536))throw new o.CramMalformedError("assertion failed: start <= 1<<16");if(!(u<=65536-d))throw new o.CramMalformedError("assertion failed: freq <= 1<<16");f.start=d,f.freq=u},advanceStep:h,advanceSymbolStep:function(f,d,u){return h(f,d.start,d.freq,u)},get:function(f,d){return f&(1<<d)-1},advanceSymbol:function(f,d,u,p){return function(m,F,g,w,b){if((m=w*(m>>b)+(m&(1<<b)-1)-g)<l.RANS_BYTE_L)do m=m<<8|255&F.get();while(m<l.RANS_BYTE_L);return m}(f,d,u.start,u.freq,p)},renormalize:function(f,d){if(f<l.RANS_BYTE_L)do f=f<<8|255&d.get();while(f<l.RANS_BYTE_L);return f}}},1971:function(r,s,a){var o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(s,"__esModule",{value:!0}),s.readStatsO0=function(d,u,p){let m=0,F=0,g=255&d.get();do u.fc[g]==null&&(u.fc[g]=new h.default.FC),u.fc[g].F=255&d.get(),u.fc[g].F>=128&&(u.fc[g].F&=-129,u.fc[g].F=(127&u.fc[g].F)<<8|255&d.get()),u.fc[g].C=F,h.default.symbolInit(p[g],u.fc[g].C,u.fc[g].F),u.R||(u.R=new Array(c.TOTFREQ)),u.R.fill(g,F,F+u.fc[g].F),F+=u.fc[g].F,m===0&&g+1===(255&d.getByteAt(d.position()))?(g=255&d.get(),m=255&d.get()):m!==0?(m-=1,g+=1):g=255&d.get();while(g!==0);f(F<c.TOTFREQ)},s.readStatsO1=function(d,u,p){let m=0,F=255&d.get();do{let g=0,w=0,b=255&d.get();u[F]==null&&(u[F]=new h.default.AriDecoder);do u[F].fc[b]==null&&(u[F].fc[b]=new h.default.FC),u[F].fc[b].F=255&d.get(),u[F].fc[b].F>=128&&(u[F].fc[b].F&=-129,u[F].fc[b].F=(127&u[F].fc[b].F)<<8|255&d.get()),u[F].fc[b].C=w,u[F].fc[b].F===0&&(u[F].fc[b].F=c.TOTFREQ),p[F][b]==null&&(p[F][b]=new h.default.RansDecSymbol),h.default.symbolInit(p[F][b],u[F].fc[b].C,u[F].fc[b].F),u[F].R==null&&(u[F].R=new Array(c.TOTFREQ)),u[F].R.fill(b,w,w+u[F].fc[b].F),w+=u[F].fc[b].F,f(w<=c.TOTFREQ),g===0&&b+1===(255&d.getByteAt(d.position()))?(b=255&d.get(),g=255&d.get()):g!==0?(g-=1,b+=1):b=255&d.get();while(b!==0);m===0&&F+1===(255&d.getByteAt(d.position()))?(F=255&d.get(),m=255&d.get()):m!==0?(m-=1,F+=1):F=255&d.get()}while(F!==0)};const l=a(9747),c=a(6476),h=o(a(488));function f(d){if(!d)throw new l.CramMalformedError("assertion failed")}},9989:function(r,s,a){var o=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(F,g,w=0){if(F.length===0)return g.fill(0),g;const b=new m(F,w),y=b.get();if(y!==0&&y!==1)throw new c.CramMalformedError(`Invalid rANS order ${y}`);if(b.getInt()!==b.remaining()-p)throw new c.CramMalformedError("Incorrect input length.");const v=b.getInt(),T=new m(g||l.Buffer.allocUnsafe(v));if(T.length<v)throw new c.CramMalformedError(`Output buffer too small to fit ${v} bytes.`);switch(y){case 0:return function(A,C){const k=new h.default.AriDecoder,I=new Array(256);for(let B=0;B<I.length;B+=1)I[B]=new h.default.DecodingSymbol;return(0,f.readStatsO0)(A,k,I),(0,d.default)(A,k,I,C),C}(b,T);case 1:return function(A,C){const k=new Array(256);for(let B=0;B<k.length;B+=1)k[B]=new h.default.AriDecoder;const I=new Array(256);for(let B=0;B<I.length;B+=1){I[B]=new Array(256);for(let M=0;M<I[B].length;M+=1)I[B][M]=new h.default.DecodingSymbol}return(0,f.readStatsO1)(A,k,I),(0,u.default)(A,C,k,I),C}(b,T);default:throw new c.CramMalformedError(`Invalid rANS order: ${y}`)}};const l=a(8287),c=a(9747),h=o(a(488)),f=a(1971),d=o(a(997)),u=o(a(7960)),p=4;class m{constructor(g,w=0){this._buffer=g,this._position=w,this.length=g.length}get(){const g=this._buffer[this._position];return this._position+=1,g}getByte(){return this.get()}getByteAt(g){return this._buffer[g]}position(){return this._position}put(g){return this._buffer[this._position]=g,this._position+=1,g}putAt(g,w){return this._buffer[g]=w,w}setPosition(g){return this._position=g,g}getInt(){const g=this._buffer.readInt32LE(this._position);return this._position+=4,g}remaining(){return this._buffer.length-this._position}}},5417:(r,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.parseHeaderText=function(a){const o=a.split(/\r?\n/),l=[];for(const c of o){const[h,...f]=c.split(/\t/);h&&l.push({tag:h.slice(1),data:f.map(d=>{const u=d.indexOf(":");return u!==-1?{tag:d.slice(0,u),value:d.slice(u+1)}:{tag:d,value:""}})})}return l}},8712:(r,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.unzip=function(c){return l.Buffer.from((0,o.inflate)(c))};const o=a(1668),l=a(8287)},635:(r,s,a)=>{var o=a(8287).Buffer;const l=a(4646),c=a(8706),h=a(9614),f=a(235),d=128;r.exports=class{decode(u){return this.stream=new c(u),this.decodeStream(this.stream)}decodeStream(u,p=0){var m=this.stream.ReadByte();16&m||(p=this.stream.ReadUint7());var F,g=p,w=1&m;if(8&m)return this.decodeStripe(this.stream,p);if(m&d&&([F,g]=this.decodePackMeta(this.stream)),32&m)var b=this.decodeCat(this.stream,g);else b=4&m?this.decodeExt(this.stream,g):64&m?w?this.decodeRLE1(this.stream,g):this.decodeRLE0(this.stream,g):w?this.decode1(this.stream,g):this.decode0(this.stream,g);return m&d&&(b=this.decodePack(b,F,p)),b}encode(u,p){if(this.stream=new c("",0,1.1*u.length+100),this.stream.WriteByte(p),16&p||this.stream.WriteUint7(u.length),8&p)return o.concat([this.stream.buf.slice(0,this.stream.pos),this.encodeStripe(this.stream,u,p>>8)]);var m,F=1&p,g=u.length;return p&d&&([m,u,g]=this.encodePack(u)),p&d&&this.stream.WriteStream(m),64&p?F?this.encodeRLE1(u,g,this.stream):this.encodeRLE0(u,g,this.stream):F?this.encode1(u,g,this.stream):this.encode0(u,g,this.stream)}decode0(u,p){var m=new o.allocUnsafe(p),F=u.ReadByte();F==0&&(F=256);var g=new h(F),w=new l(u);w.RangeStartDecode(u);for(var b=0;b<p;b++)m[b]=g.ModelDecode(u,w);return m}encode0(u,p,m){for(var F=0,g=0;g<p;g++)F<u[g]&&(F=u[g]);F++;var w=new h(F);m.WriteByte(F);var b=new l(m);for(g=0;g<p;g++)w.ModelEncode(m,b,u[g]);return b.RangeFinishEncode(m),m.buf.slice(0,m.pos)}decode1(u,p){var m=new o.allocUnsafe(p),F=u.ReadByte();F==0&&(F=256);for(var g=new Array(F),w=0;w<F;w++)g[w]=new h(F);var b=new l(u);b.RangeStartDecode(u);var y=0;for(w=0;w<p;w++)m[w]=g[y].ModelDecode(u,b),y=m[w];return m}encode1(u,p,m){for(var F=0,g=0;g<p;g++)F<u[g]&&(F=u[g]);F++;var w=new Array(F);for(g=0;g<F;g++)w[g]=new h(F);m.WriteByte(F);var b=new l(m),y=0;for(g=0;g<p;g++)w[y].ModelEncode(m,b,u[g]),y=u[g];return b.RangeFinishEncode(m),m.buf.slice(0,m.pos)}decodeExt(u,p){var m=new o.allocUnsafe(p),F=f.array(u.buf.slice(u.pos)),g=f.header(F),w=0;do{var b=f.decompress(F,g);b!=-1&&(o.from(b).copy(m,w),w+=b.length,g-=b.length)}while(b!=-1);return m}encodeExt(u,p){}decodeRLE0(u,p){var m=new o.allocUnsafe(p),F=u.ReadByte();F==0&&(F=256);for(var g=new h(F),w=new Array(258),b=0;b<=257;b++)w[b]=new h(4);var y=new l(u);for(y.RangeStartDecode(u),b=0;b<p;){m[b]=g.ModelDecode(u,y);for(var v=w[m[b]].ModelDecode(u,y),T=v,A=256;v==3;)v=w[A].ModelDecode(u,y),A=257,T+=v;for(var C=1;C<=T;C++)m[b+C]=m[b];b+=T+1}return m}encodeRLE0(u,p,m){for(var F=0,g=0;g<p;g++)F<u[g]&&(F=u[g]);F++;var w=new h(F),b=new Array(258);for(g=0;g<=257;g++)b[g]=new h(4);m.WriteByte(F);var y=new l(m);for(g=0;g<p;){w.ModelEncode(m,y,u[g]);for(var v=1;g+v<p&&u[g+v]==u[g];)v++;v--;var T=u[g];u[g],g+=v+1;var A=v>=3?3:v;for(b[T].ModelEncode(m,y,A),v-=A,T=256;A==3;)A=v>=3?3:v,b[T].ModelEncode(m,y,A),T=257,v-=A}return y.RangeFinishEncode(m),m.buf.slice(0,m.pos)}decodeRLE1(u,p){var m=new o.allocUnsafe(p),F=u.ReadByte();F==0&&(F=256);for(var g=new Array(F),w=0;w<F;w++)g[w]=new h(F);var b=new Array(258);for(w=0;w<=257;w++)b[w]=new h(4);var y=new l(u);y.RangeStartDecode(u);var v=0;for(w=0;w<p;){m[w]=g[v].ModelDecode(u,y),v=m[w];for(var T=b[m[w]].ModelDecode(u,y),A=T,C=256;T==3;)T=b[C].ModelDecode(u,y),C=257,A+=T;for(var k=1;k<=A;k++)m[w+k]=m[w];w+=A+1}return m}encodeRLE1(u,p,m){for(var F=0,g=0;g<p;g++)F<u[g]&&(F=u[g]);F++;var w=new Array(F);for(g=0;g<F;g++)w[g]=new h(F);var b=new Array(258);for(g=0;g<=257;g++)b[g]=new h(4);m.WriteByte(F);for(var y=new l(m),v=(g=0,0);g<p;){w[v].ModelEncode(m,y,u[g]);for(var T=1;g+T<p&&u[g+T]==u[g];)T++;T--;var A=u[g];v=u[g],g+=T+1;var C=T>=3?3:T;for(b[A].ModelEncode(m,y,C),T-=C,A=256;C==3;)C=T>=3?3:T,b[A].ModelEncode(m,y,C),A=257,T-=C}return y.RangeFinishEncode(m),m.buf.slice(0,m.pos)}decodePackMeta(u){this.nsym=u.ReadByte();for(var p=new Array(this.nsym),m=0;m<this.nsym;m++)p[m]=u.ReadByte();return[p,u.ReadUint7()]}decodePack(u,p,m){var F=new o.allocUnsafe(m);if(this.nsym<=1)for(var g=0;g<m;g++)F[g]=p[0];else if(this.nsym<=2){g=0;for(var w=0;g<m;g++){if(g%8==0)var b=u[w++];F[g]=p[1&b],b>>=1}}else if(this.nsym<=4)for(g=0,w=0;g<m;g++)g%4==0&&(b=u[w++]),F[g]=p[3&b],b>>=2;else{if(!(this.nsym<=16))return u;for(g=0,w=0;g<m;g++)g%2==0&&(b=u[w++]),F[g]=p[15&b],b>>=4}return F}packMeta(u){for(var p=new c("",0,1024),m=new Array(256),F=0;F<u.length;F++)m[u[F]]=1;var g=0;for(F=0;F<256;F++)m[F]&&(m[F]=++g);for(p.WriteByte(g),F=0;F<256;F++)m[F]&&(p.WriteByte(F),m[F]--);return[p,m,g]}encodePack(u){var p,m,F;[p,m,F]=this.packMeta(u);var g=u.length,w=0;if(F<=1)return p.WriteUint7(0),[p,new o.allocUnsafe(0),0];if(F<=2){for(var b=new o.allocUnsafe(Math.floor((g+7)/8)),y=(w=0,0);w<(-8&g);w+=8,y++)b[y]=(0|m[u[w+0]])+(m[u[w+1]]<<1)+(m[u[w+2]]<<2)+(m[u[w+3]]<<3)+(m[u[w+4]]<<4)+(m[u[w+5]]<<5)+(m[u[w+6]]<<6)+(m[u[w+7]]<<7);if(w<g){b[y]=0;for(var v=0;w<g;)b[y]|=m[u[w++]]<<v,v++;y++}return p.WriteUint7(y),[p,b,b.length]}if(F<=4){for(b=new o.allocUnsafe(Math.floor((g+3)/4)),w=0,y=0;w<(-4&g);w+=4,y++)b[y]=(0|m[u[w+0]])+(m[u[w+1]]<<2)+(m[u[w+2]]<<4)+(m[u[w+3]]<<6);if(w<g){for(b[y]=0,v=0;w<g;)b[y]|=m[u[w++]]<<v,v+=2;y++}return p.WriteUint7(y),[p,b,b.length]}if(F<=16){for(b=new o.allocUnsafe(Math.floor((g+1)/2)),w=0,y=0;w<(-2&g);w+=2,y++)b[y]=(0|m[u[w+0]])+(m[u[w+1]]<<4);return w<g&&(b[y++]=m[u[w++]]),p.WriteUint7(y),[p,b,b.length]}return p.WriteUint7(u.length),[p,u,u.length]}encodeStripe(u,p,m){m==0&&(m=4);for(var F=new Array(m),g=new Array(m),w=0;w<m;w++)g[w]=Math.floor(p.length/m)+(p.length%m>w),F[w]=new Array(g[w]);for(var b=0,y=0;y<p.length;y+=m,b++)for(var v=0;v<m;v++)b<F[v].length&&(F[v][b]=p[y+v]);var T=new Array(m),A=0;for(w=0;w<m;w++){var C=this.encode(F[w],0),k=this.encode(F[w],1);T[w]=k.length<C.length?k:C,A+=T[w].length}var I=new c("",0,A+5*m+1);for(I.WriteByte(m),w=0;w<m;w++)I.WriteUint7(T[w].length);for(w=0;w<m;w++)I.WriteData(T[w],T[w].length);return I.buf.slice(0,I.buf.pos)}decodeStripe(u,p){for(var m=u.ReadByte(),F=new Array(m),g=new Array(m),w=0;w<m;w++)F[w]=u.ReadUint7();var b=new Array(m);for(w=0;w<m;w++)g[w]=Math.floor(p/m)+(p%m>w),b[w]=this.decodeStream(u,g[w]);var y=new o.allocUnsafe(p);for(w=0;w<m;w++)for(var v=0;v<g[w];v++)y[v*m+w]=b[w][v];return y}decodeCat(u,p){for(var m=new o.allocUnsafe(p),F=0;F<p;F++)m[F]=u.ReadByte();return m}}},4646:r=>{r.exports=class{constructor(s){this.low=0,this.range=4294967295,this.code=0,this.FFnum=0,this.carry=0,this.cache=0}RangeStartDecode(s){for(var a=0;a<5;a++)this.code=(this.code<<8)+s.ReadByte();this.code&=4294967295,this.code>>>=0}RangeGetFrequency(s){return this.range=Math.floor(this.range/s),Math.floor(this.code/this.range)}RangeDecode(s,a,o,l){for(this.code-=a*this.range,this.range*=o;this.range<16777216;)this.range*=256,this.code=256*this.code+s.ReadByte()}RangeShiftLow(s){if(this.low<4278190080|this.carry){for(s.WriteByte(this.cache+this.carry);this.FFnum;)s.WriteByte(this.carry-1),this.FFnum--;this.cache=this.low>>>24,this.carry=0}else this.FFnum++;this.low<<=8,this.low>>>=0}RangeEncode(s,a,o,l){var c=this.low;for(this.range=Math.floor(this.range/l),this.low+=a*this.range,this.low>>>=0,this.range*=o,this.low<c&&(this.carry!=0&&console.log("ERROR: Multiple carry"),this.carry=1);this.range<16777216;)this.range*=256,this.RangeShiftLow(s)}RangeFinishEncode(s){for(var a=0;a<5;a++)this.RangeShiftLow(s)}}},9614:r=>{r.exports=class{constructor(s=256){this.total_freq=s,this.max_sym=s-1,this.S=new Array,this.F=new Array;for(var a=0;a<=this.max_sym;a++)this.S[a]=a,this.F[a]=1}ModelDecode(s,a){for(var o=a.RangeGetFrequency(this.total_freq),l=0,c=0;l+this.F[c]<=o;)l+=this.F[c++];a.RangeDecode(s,l,this.F[c],this.total_freq),this.F[c]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise();var h=this.S[c];if(c>0&&this.F[c]>this.F[c-1]){var f=this.F[c];this.F[c]=this.F[c-1],this.F[c-1]=f,f=this.S[c],this.S[c]=this.S[c-1],this.S[c-1]=f}return h}ModelRenormalise(){this.total_freq=0;for(var s=0;s<=this.max_sym;s++)this.F[s]-=Math.floor(this.F[s]/2),this.total_freq+=this.F[s]}ModelEncode(s,a,o){for(var l=0,c=0;this.S[c]!=o;c++)l+=this.F[c];if(a.RangeEncode(s,l,this.F[c],this.total_freq),this.F[c]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise(),o=this.S[c],c>0&&this.F[c]>this.F[c-1]){var h=this.F[c];this.F[c]=this.F[c-1],this.F[c-1]=h,h=this.S[c],this.S[c]=this.S[c-1],this.S[c-1]=h}}}},6038:(r,s,a)=>{var o=a(8287).Buffer;const l=a(8706),c=a(9614),h=a(4646);function f(A,C,k){for(var I=0,B=0,M=-1,N=new Array(1024);B<k;){var x=A.ReadByte();if(N[I++]=x,B+=x,x==M){var D=A.ReadByte();for(B+=x*D;D--;)N[I++]=x}M=x}var S=0;for(I=0,B=0;B<k;){var U=0;do{var O=N[I++];U+=O}while(O==255);for(;U--;)C[B++]=S;S++}}const d=2,u=4,p=8,m=16,F=32,g=64,w=128;function b(A,C,k){var I=A.context;return C.qctx=(C.qctx<<A.qshift)+A.qtab[k],I+=(C.qctx&(1<<A.qbits)-1)<<A.qloc,A.do_pos&&(I+=A.ptab[Math.min(C.p,1023)]<<A.ploc),A.do_delta&&(I+=A.dtab[Math.min(C.delta,255)]<<A.dloc,C.delta+=C.prevq!=k?1:0,C.prevq=k),A.do_sel&&(I+=C.s<<A.sloc),C.p--,65535&I}function y(A){var C={};C.context=A.ReadUint16(),C.pflags=A.ReadByte(),C.do_dedup=C.pflags&d,C.fixed_len=C.pflags&u,C.do_sel=C.pflags&p,C.do_qmap=C.pflags&m,C.do_pos=C.pflags&F,C.do_delta=C.pflags&g,C.do_qtab=C.pflags&w,C.max_sym=A.ReadByte();var k=A.ReadByte();if(C.qbits=k>>4,C.qshift=15&k,k=A.ReadByte(),C.qloc=k>>4,C.sloc=15&k,k=A.ReadByte(),C.ploc=k>>4,C.dloc=15&k,C.qmap=new Array(256),C.pflags&m)for(var I=0;I<C.max_sym;I++)C.qmap[I]=A.ReadByte();else for(I=0;I<256;I++)C.qmap[I]=I;if(C.qtab=new Array(1024),C.qbits>0&&C.pflags&w)f(A,C.qtab,256);else for(I=0;I<256;I++)C.qtab[I]=I;return C.ptab=new Array(1024),C.pflags&F&&f(A,C.ptab,1024),C.dtab=new Array(256),C.pflags&g&&f(A,C.dtab,256),C}function v(A,C,k,I,B,M){k.max_sel>0?B.s=I.sel.ModelDecode(A,C):B.s=0,B.x=k.stab[B.s];var N=k.params[B.x];if(N.fixed_len>=0){var x=I.len[0].ModelDecode(A,C);x|=I.len[1].ModelDecode(A,C)<<8,x|=I.len[2].ModelDecode(A,C)<<16,x|=I.len[3].ModelDecode(A,C)<<24,N.fixed_len>0&&(N.fixed_len=-x)}else x=-N.fixed_len;B.len=x,k.do_rev&&(M[B.rec]=I.rev.ModelDecode(A,C)),B.is_dup=0,N.pflags&d&&I.dup.ModelDecode(A,C)&&(B.is_dup=1),B.p=x,B.delta=0,B.qctx=0,B.prevq=0,B.rec++}function T(A,C,k){for(var I=0,B=0,M=new Array(2*k),N=0;I<k;){for(var x=I;I<k&&C[I]==B;)I++;var D=I-x;do{var S=Math.min(255,D);M[N++]=S,D-=S}while(S==255);B++}var U=-1,O=new Array(2*k),Q=0;for(I=0;I<N;){var K=M[I++];if(O[Q++]=K,K==U){for(x=I;I<N&&M[I]==U&&I-x<255;)I++;O[Q++]=I-x}else U=K}A.WriteData(O,Q)}r.exports={decode:function(A,C){return function(k,I){var B=k.ReadUint7(),M=function(H){var $={max_sym:0};if(H.ReadByte()==5){var X=H.ReadByte(),ee=1&X?H.ReadByte():1,te=X.nparam>1?X.nparam-1:0,be=new Array(256);if(2&X)te=H.ReadByte(),f(H,be,256);else{for(var q=0;q<ee;q++)be[q]=q;for(;q<256;q++)be[q]=ee-1}$.do_rev=4&X,$.stab=be,$.max_sel=te,$.params=new Array($.nparam);for(var J=0;J<ee;J++)$.params[J]=y(H),$.max_sym<$.params[J].max_sym&&($.max_sym=$.params[J].max_sym);return $}console.error("Invalid FQZComp version number")}(k);if(M){var N=M.params,x=new Array(I.length),D=function(H){var $={};$.qual=new Array(65536);for(var X=0;X<65536;X++)$.qual[X]=new c(H.max_sym+1);for($.len=new Array(4),X=0;X<4;X++)$.len[X]=new c(256);return $.rev=new c(2),$.dup=new c(2),H.max_sel>0&&($.sel=new c(H.max_sel+1)),$}(M),S=new h(k);S.RangeStartDecode(k);for(var U=new o.allocUnsafe(B),O={qctx:0,prevq:0,delta:0,p:0,s:0,x:0,len:0,is_dup:0,rec:0},Q=0;Q<B;){if(O.p==0){if(v(k,S,M,D,O,x),O.is_dup>0&&D.dup.ModelDecode(k,S)){for(var K=0;K<len;K++)U[Q+K]=U[Q+K-O.len];Q+=O.len,O.p=0;continue}I.push(O.len);var G=(N=M.params[O.x]).context}var ne=D.qual[G].ModelDecode(k,S);U[Q++]=N.qmap[ne],G=b(N,O,ne)}return M.do_rev&&function(H,$,X,ee){for(var te=0,be=0;be<$;){if(X[te])for(var q=0,J=ee[te]-1;q<J;){var E=H[be+q];H[be+q]=H[be+J],H[be+J]=E,q++,J--}be+=ee[te++]}}(U,B,x,I),U}}(new l(A),C)},encode:function(A,C,k){for(var I=new Array(2),B=new Array(2),M=new Array(2),N=new Array(2),x=new Array(256),D=0;D<2;D++)I[D]=new Array(256),B[D]=new Array(256),M[D]=new Array(1024),N[D]=new Array(256);(U=new l("",0,1.1*A.length+100)).WriteUint7(A.length);var S=function(O,Q,K,G){for(var ne=K[0],H=0;H<K.length&&K[H]==ne;H++);var $=H==K.length?1:0,X=0,ee=0;for(H=0;H<256;H++)G[0][H]=0;var te=0,be=0;for(H=0;H<O.length;H++)be==0&&(be=Q[te<Q.length-1?te++:te]),G[0][O[H]]++,be--;for(H=0;H<256;H++)G[0][H]&&(ee<H&&(ee=H),X++);var q=5,J=0;return X<=16&&(J=1,q=X<=2?1:X<=4?2:X<=8?3:4),[{qbits:8+(q>4),qshift:q,qloc:7,pbits:7,pshift:Q[0]>128?1:0,ploc:0,dbits:q>4?0:1,dshift:3,dloc:15,sbits:0,sloc:15,do_stab:0,context:0,max_sym:ee,nsym:X,do_qmap:J,do_dedup:0,fixed_len:Q.length==1?1:0,do_sel:0,do_rev:0,do_pos:1,do_delta:q<=4?1:0,do_qtab:0,qbits:8+(q>4)-($==0),sbits:1,sloc:15-(q<=4),do_stab:1,do_sel:1}]}(A,C,k,I),U=function(O,Q,K,G,ne,H,$){for(var X=[0,1,1,1,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],ee=0;ee<Q.length;ee++)$[ee]=ee;for(;ee<256;ee++)$[ee]=Q.length-1;O.WriteByte(5);var te=(Q.length>1?1:0)|(Q[0].do_stab?2:0);if(O.WriteByte(te),1&te&&O.WriteByte(Q.length),2&te){var be=1<<Q[0].sbits;be>0&&be--,O.WriteByte(be),T(O,$,256)}for(var q=0;q<Q.length;q++){if(O.WriteUint16(Q[q].context),O.WriteByte((Q[q].do_qtab?w:0)|(Q[q].do_delta?g:0)|(Q[q].do_pos?F:0)|(Q[q].do_qmap?m:0)|(Q[q].do_sel?p:0)|(Q[q].fixed_len?u:0)|(Q[q].do_dedup?d:0)),Q[q].do_qmap?O.WriteByte(Q[q].nsym):O.WriteByte(Q[q].max_sym),O.WriteByte(Q[q].qbits<<4|Q[q].qshift),O.WriteByte(Q[q].qloc<<4|Q[q].sloc),O.WriteByte(Q[q].ploc<<4|Q[q].dloc),Q[q].do_qmap){Q[q].max_sym=Q[q].nsym;var J=0;for(ee=0;ee<256;ee++)K[q][ee]&&(O.WriteByte(ee),K[q][ee]=J++);for(;J<Q[q].nsym;J++)O.WriteByte(0)}else for(ee=0;ee<256;ee++)K[q][ee]=ee;if(Q[q].qbits>0){for(ee=0;ee<256;ee++)G[q][ee]=ee;Q[q].do_qtab&&T(O,G[q],256)}if(Q[q].pbits>0){for(ee=0;ee<1024;ee++)ne[q][ee]=Math.min((1<<Q[q].pbits)-1,ee>>Q[q].pshift);T(O,ne[q],1024)}if(Q[q].dbits>0){for(ee=0;ee<256;ee++)X[ee]>(1<<Q[q].dbits)-1&&(X[ee]=(1<<Q[q].dbits)-1);for(ee=0;ee<256;ee++)H[q][ee]=X[Math.min(X.length-1,ee>>Q[q].dshift)];T(O,H[q],256)}}return O}(U,S,I,B,M,N,x);return function(O,Q,K,G,ne,H,$,X,ee,te){var be=1<<ne[0].sbits;be>0&&be--;for(var q=Q.length,J=0,E=0;E<ne.length;E++)J<ne[E].max_sym&&(J=ne[E].max_sym);for(var Y=new Array(65536),j=0;j<65536;j++)Y[j]=new c(J+1);var P=new Array(4);for(j=0;j<4;j++)P[j]=new c(256);new c(2),new c(2);for(var fe=new c(be+1),oe=new h(Q),ce=(E=0,j=0,0);j<q;){if(E==0){var ue=G[ce];ne[0].sbits>0&&fe.ModelEncode(O,oe,ue);var he=te[ue],ye=K[Math.min(K.length-1,ce++)];ne[he].fixed_len?ne[he].fixed_len>0&&(P[0].ModelEncode(O,oe,255&ye),P[1].ModelEncode(O,oe,ye>>8&255),P[2].ModelEncode(O,oe,ye>>16&255),P[3].ModelEncode(O,oe,ye>>24&255),ne[he].fixed_len=-1):(P[0].ModelEncode(O,oe,255&ye),P[1].ModelEncode(O,oe,ye>>8&255),P[2].ModelEncode(O,oe,ye>>16&255),P[3].ModelEncode(O,oe,ye>>24&255)),ne[he].do_dedup&&process.exit(1),E=ye;var Ie=0,_=ne[he].context,R=0,L=0}var W=Q[j++],ie=H[he][W];Y[_].ModelEncode(O,oe,ie),R=(R<<ne[he].qshift)+$[he][ie],_=ne[he].context,_+=(R&(1<<ne[he].qbits)-1)<<ne[he].qloc,ne[he].pbits>0&&(_+=X[he][Math.min(E,1023)]<<ne[he].ploc),ne[he].dbits>0&&(_+=ee[he][Math.min(Ie,255)]<<ne[he].dloc,Ie+=L!=ie?1:0,L=ie),ne[he].do_sel&&(_+=ue<<ne[he].sloc),_&=65535,E--}return oe.RangeFinishEncode(O),O.buf.slice(0,O.pos)}(U,A,C,k,S,I,B,M,N,x)}}},6960:(r,s,a)=>{var o=a(8287).Buffer,l=a(5460),c=a(8223),h=a(635),f=a(6038),d=a(5997);r.exports={r4x8_uncompress:function(u,p){l.decode(u).copy(p,0,0)},r4x16_uncompress:function(u,p){c.decode(u).copy(p,0,0)},arith_uncompress:function(u,p){h.decode(u).copy(p,0,0)},fqzcomp_uncompress:function(u,p){var m=new Array;f.decode(u,m).copy(p,0,0)},tok3_uncompress:function(u,p){var m=d.decode(u,0,"\0");o.from(m,"binary").copy(p,0,0)}}},8706:(r,s,a)=>{var o=a(8287).Buffer;r.exports=class{constructor(l,c=0,h=0){h!=0?(this.buf=o.allocUnsafe(h),this.length=h):(this.buf=l,this.length=l.length),this.pos=c}EOF(){return this.pos>=this.length}ReadData(l){var c=this.buf.slice(this.pos,this.pos+l);return this.pos+=l,c}ReadByte(){const l=this.buf[this.pos];return this.pos++,l}ReadChar(){const l=this.buf[this.pos];return this.pos++,String.fromCharCode(l)}ReadUint16(){return this.ReadByte()|this.ReadByte()<<8}ReadUint32(){const l=this.buf.readInt32LE(this.pos);return this.pos+=4,l}ReadString(){var l="";do{var c=this.buf[this.pos++];c&&(l+=String.fromCharCode(c))}while(c);return l}ReadUint7(){var l=0;do{var c=this.ReadByte();l=l<<7|127&c}while(128&c);return l}ReadITF8(){var l=this.buf[this.pos];return this.pos++,l>=240?(l=(15&l)<<28,l+=(this.buf[this.pos+0]<<20)+(this.buf[this.pos+1]<<12)+(this.buf[this.pos+2]<<4)+(this.buf[this.pos+3]>>4),this.pos+=4):l>=224?(l=(15&l)<<24,l+=(this.buf[this.pos+0]<<16)+(this.buf[this.pos+1]<<8)+(0|this.buf[this.pos+2]),this.pos+=3):l>=192?(l=(31&l)<<16,l+=(this.buf[this.pos+0]<<8)+(0|this.buf[this.pos+1]),this.pos+=2):l>=128&&(l=(63&l)<<8,l+=this.buf[this.pos],this.pos++),l}WriteByte(l){this.buf[this.pos++]=l}WriteChar(l){this.buf[this.pos++]=l.charCodeAt(0)}WriteString(l){for(var c=0;c<l.length;c++)this.buf[this.pos++]=l.charCodeAt(c);this.buf[this.pos++]=0}WriteData(l,c){for(var h=0;h<c;h++)this.buf[this.pos++]=l[h]}WriteStream(l){this.WriteData(l.buf,l.pos)}WriteUint16(l){this.WriteByte(255&l),this.WriteByte(l>>8&255)}WriteUint32(l){this.buf.writeInt32LE(l,this.pos),this.pos+=4}WriteUint7(l){var c=0,h=l;do c+=7,h>>=7;while(h>0);do c-=7,this.WriteByte((l>>c&127)+((c>0)<<7));while(c>0)}WriteITF8(l){l<0&&(l=1+l),l<=127?this.buf[this.pos++]=l:l<=16383?(this.buf[this.pos++]=128|Math.floor(l/256),this.buf[this.pos++]=255&l):l<131071?(this.buf[this.pos++]=192|Math.floor(l/65536),this.buf[this.pos++]=255&Math.floor(l/256),this.buf[this.pos++]=255&l):l<268435455?(this.buf[this.pos++]=224|Math.floor(l/16777216),this.buf[this.pos++]=255&Math.floor(l/65536),this.buf[this.pos++]=255&Math.floor(l/256),this.buf[this.pos++]=255&l):(this.buf[this.pos++]=240|Math.floor(l/268435456),this.buf[this.pos++]=255&Math.floor(l/1048576),this.buf[this.pos++]=255&Math.floor(l/4096),this.buf[this.pos++]=255&Math.floor(l/4),this.buf[this.pos++]=15&l)}WriteByteNeg(l){this.buf[--this.pos]=l}}},5460:(r,s,a)=>{var o=a(8287).Buffer;const l=a(8706);function c(b){return 4095&b}function h(b,y){for(var v=0;y>=b[v+1];)v++;return v}function f(b){for(var y=new Array(4096),v=0,T=0;T<4096;T++){for(;T>=b[v+1];)v++;y[T]=v}return y}function d(b,y,v){return v*(b>>12)+(4095&b)-y}function u(b,y){for(;y<8388608;)y=(y<<8)+b.ReadByte();return y}function p(b,y){y.WriteByteNeg(b>>24&255),y.WriteByteNeg(b>>16&255),y.WriteByteNeg(b>>8&255),y.WriteByteNeg(255&b)}function m(b,y,v,T,A){return b=function(C,k,I,B){for(var M=(8388608>>B<<8)*I;C>=M;)k.WriteByteNeg(255&C),C>>=8;return C}(b,y,T,A),(Math.floor(b/T)<<A)+b%T+v}function F(b,y,v){for(var T=0;T<256;T++)y[T]=0;var A=b.ReadByte(),C=A,k=0;do{var I=b.ReadITF8();y[A]=I,k>0?(k--,A++):(A=b.ReadByte())==C+1&&(k=b.ReadByte()),C=A}while(A!=0);for(v[0]=0,T=0;T<=255;T++)v[T+1]=v[T]+y[T]}function g(b){for(var y=0,v=0;v<256;v++)y+=b[v];const T=4096;var A=T/y;do{var C=0,k=0,I=0;for(y=0,v=0;v<256;v++)b[v]!=0&&(C<b[v]&&(C=b[v],k=v),b[v]=Math.floor(b[v]*A),b[v]==0&&(b[v]=1),y+=b[v]);y<T?b[k]+=T-y:y-T<b[k]/2&&b[k]>2?b[k]-=y-T:y!=T&&(A*=.99,I=1)}while(I)}function w(b,y){for(var v=0,T=0;T<256;T++)if(y[T]){if(v>0)v--;else if(b.WriteByte(T),T>0&&y[T-1]>0){for(v=T+1;v<256&&y[v];v++);v-=T+1,b.WriteByte(v)}b.WriteITF8(y[T])}b.WriteByte(0)}r.exports={decode:function(b){var y=new l(b),v=y.ReadByte(),T=(y.ReadUint32(),y.ReadUint32());return v==0?function(A,C){var k=new Array(256),I=new Array(256);F(A,k,I);for(var B=f(I),M=new Array(4),N=0;N<4;N++)M[N]=A.ReadUint32();var x=new o.allocUnsafe(C);for(N=0;N<C;N++){var D=N%4,S=B[c(M[D])];x[N]=S,M[D]=d(M[D],I[S],k[S]),M[D]=u(A,M[D])}return x}(y,T):function(A,C){var k=new Array(256),I=new Array(256);(function(K,G,ne){for(var H=0;H<256;H++){G[H]=new Array(256),ne[H]=new Array(256);for(var $=0;$<256;$++)G[H][$]=0}var X=K.ReadByte(),ee=X,te=0;do F(K,G[X],ne[X]),te>0?(te--,X++):(X=K.ReadByte())==ee+1&&(te=K.ReadByte()),ee=X;while(X!=0)})(A,k,I);for(var B=new Array(256),M=0;M<256;M++)B[M]=f(I[M]);for(var N=new Array(4),x=new Array(4),D=0;D<4;D++)N[D]=A.ReadUint32(),x[D]=0;var S=new o.allocUnsafe(C),U=Math.floor(C/4);for(M=0;M<U;M++)for(D=0;D<4;D++){var O=c(N[D]),Q=B[x[D]][O];S[M+D*U]=Q,N[D]=d(N[D],I[x[D]][Q],k[x[D]][Q]),N[D]=u(A,N[D]),x[D]=Q}for(M*=4;M<C;)O=c(N[3]),Q=h(I[x[3]],O),S[M++]=Q,N[3]=d(N[3],I[x[3]][Q],k[x[3]][Q]),N[3]=u(A,N[3]),x[3]=Q;return S}(y,T)},encode:function(b,y){return y==0?function(v){const T=v.length;var A=new l("",0,780);A.WriteByte(0),A.WriteUint32(0),A.WriteUint32(0);var C=new Array(256);(function(D,S){for(var U=0;U<256;U++)S[U]=0;for(U=0;U<D.length;U++)S[D[U]]++})(v,C),g(C),w(A,C);var k=new Array(256);k[0]=0;for(var I=1;I<256;I++)k[I]=k[I-1]+C[I-1];var B=new Array(4);for(I=0;I<4;I++)B[I]=8388608;var M=Math.floor(1.05*T+100),N=new l("",M,M);for(I=T-1;I>=0;I--)B[I%4]=m(B[I%4],N,k[v[I]],C[v[I]],12);for(I=3;I>=0;I--)p(B[I],N);var x=A.pos;return A.buf.writeInt32LE(x-9+(N.length-N.pos),1),A.buf.writeInt32LE(T,5),o.concat([A.buf.slice(0,A.pos),N.buf.slice(N.pos,N.length)],A.pos+N.length-N.pos)}(b):function(v){const T=v.length;var A=new l("",0,198156);A.WriteByte(1),A.WriteUint32(0),A.WriteUint32(0);for(var C=new Array(256),k=new Array(256),I=new Array(256),B=0;B<256;B++)k[B]=new Array(256),I[B]=new Array(256);for(function(G,ne,H){for(var $=0;$<256;$++){H[$]=0;for(var X=0;X<256;X++)ne[$][X]=0}var ee=0;for($=0;$<G.length;$++)H[G[$]]++,ne[ee][G[$]]++,ee=G[$];ne[0][G[1*(G.length>>2)]]++,ne[0][G[2*(G.length>>2)]]++,ne[0][G[3*(G.length>>2)]]++,H[0]+=3}(v,k,C),function(G,ne){for(var H=0;H<256;H++)ne[H]&&g(G[H])}(k,C),function(G,ne,H){for(var $=0,X=0;X<256;X++)if(H[X]){if($>0)$--;else if(G.WriteByte(X),X>0&&H[X-1]>0){for($=X+1;$<256&&H[$];$++);$-=X+1,G.WriteByte($)}w(G,ne[X])}G.WriteByte(0)}(A,k,C),B=0;B<256;B++)if(C[B]){I[B][0]=0;for(var M=1;M<256;M++)I[B][M]=I[B][M-1]+k[B][M-1]}var N=new Array(4),x=new Array(4);for(M=0;M<4;M++)N[M]=8388608,x[M]=0;var D=new l("",T,T),S=Math.floor(T/4),U=new Array(4),O=new Array(4);for(M=0;M<4;M++)U[M]=(M+1)*S-2,O[M]=v[U[M]+1];for(O[3]=v[T-1],B=T-2;B>4*S-2;B--)N[3]=m(N[3],D,I[v[B]][O[3]],k[v[B]][O[3]],12),O[3]=v[B];for(;U[0]>=0;)for(M=3;M>=0;M--){var Q=v[U[M]];N[M]=m(N[M],D,I[Q][O[M]],k[Q][O[M]],12),O[M]=Q,U[M]--}for(M=3;M>=0;M--)N[M]=m(N[M],D,I[0][O[M]],k[0][O[M]],12);for(B=3;B>=0;B--)p(N[B],D);var K=A.pos;return A.buf.writeInt32LE(K-9+(D.length-D.pos),1),A.buf.writeInt32LE(T,5),o.concat([A.buf.slice(0,A.pos),D.buf.slice(D.pos,D.length)],A.pos+D.length-D.pos)}(b)}}},8223:(r,s,a)=>{var o=a(8287).Buffer;const l=a(8706);function c(k,I){return k&(1<<I)-1}function h(k,I){for(var B=0;I>=k[B+1];)B++;return B}function f(k,I){for(var B=1<<I,M=new Array(B),N=0,x=0;x<B;x++){for(;x>=k[N+1];)N++;M[x]=N}return M}function d(k,I,B,M){return B*(k>>M)+(k&(1<<M)-1)-I}function u(k,I){return I<32768&&(I=(I<<16)+k.ReadUint16()),I}function p(k,I){I.WriteByteNeg(k>>24&255),I.WriteByteNeg(k>>16&255),I.WriteByteNeg(k>>8&255),I.WriteByteNeg(255&k)}function m(k,I,B,M,N){return k=function(x,D,S,U){for(var O=(1<<31-U)*S;x>=O;)D.WriteByteNeg(x>>8&255),D.WriteByteNeg(255&x),x>>=16;return x}(k,I,M,N),(Math.floor(k/M)<<N)+k%M+B}function F(k,I,B){B==0&&(B=4);for(var M=new Array(B),N=new Array(B),x=0;x<B;x++)N[x]=Math.floor(I.length/B)+(I.length%B>x),M[x]=new Array(N[x]);for(var D=0,S=0;S<I.length;S+=B,D++)for(var U=0;U<B;U++)D<M[U].length&&(M[U][D]=I[S+U]);var O=new Array(B),Q=0;for(x=0;x<B;x++){var K=w(M[x],0),G=w(M[x],1);O[x]=G.length<K.length?G:K,Q+=O[x].length}var ne=new l("",0,Q+5*B+1);for(ne.WriteByte(B),x=0;x<B;x++)ne.WriteUint7(O[x].length);for(x=0;x<B;x++)ne.WriteData(O[x],O[x].length);return ne.buf.slice(0,ne.buf.pos)}function g(k,H){var B=k.ReadByte(),M=1&B,N=8&B,x=32&B,D=64&B,S=128&B;if(16&B||(H=k.ReadUint7()),N)return function(X,ee){for(var te=X.ReadByte(),be=new Array(te),q=new Array(te),J=0;J<te;J++)be[J]=X.ReadUint7();var E=new Array(te);for(J=0;J<te;J++)q[J]=Math.floor(ee/te)+(ee%te>J),E[J]=g(X,q[J]);var Y=new o.allocUnsafe(ee);for(J=0;J<te;J++)for(var j=0;j<q[J];j++)Y[j*te+J]=E[J][j];return Y}(k,H);if(S)var U=H,[O,Q,H]=function(X){for(var ee=X.ReadByte(),te=new Array(ee),be=0;be<ee;be++)te[be]=X.ReadByte();return[te,ee,X.ReadUint7()]}(k);if(D)var K=H,[G,ne,H]=function(X){var ee=X.ReadUint7(),te=X.ReadUint7();if(1&ee)var be=X.ReadData((ee-1)/2);else{var q=X.ReadUint7();be=X.ReadData(q),be=y(new l(be),ee/2)}be=new l(be);var J=new Array(256),E=be.ReadByte();E==0&&(E=256);for(var Y=0;Y<E;Y++)J[be.ReadByte()]=1;return[J,be,te]}(k);if(x)var $=k.ReadData(H);else $=M==0?y(k,H):function(X,ee){var te=(E=X.ReadByte())>>4,be=X;if(1&E){var q=X.ReadUint7(),J=X.ReadUint7(),E=new l(X.ReadData(J));be=new l(y(E,q))}var Y=new Array(256),j=new Array(256);(function(R,L,W,ie){for(var se=0;se<256;se++){L[se]=new Array(256),W[se]=new Array(256);for(var me=0;me<256;me++)L[se][me]=0}var ze=b(R);for(se=0;se<256;se++)if(ze[se]){var Pe=0;for(me=0;me<256;me++)ze[me]&&(Pe>0?Pe--:(L[se][me]=R.ReadUint7(),L[se][me]==0&&(Pe=R.ReadByte())));for(T(L[se],ie),W[se][0]=0,me=0;me<256;me++)W[se][me+1]=W[se][me]+L[se][me]}})(be,Y,j,te);for(var P=new Array(256),fe=0;fe<256;fe++)P[fe]=f(j[fe],te);for(var oe=new Array(4),ce=new Array(4),ue=0;ue<4;ue++)oe[ue]=X.ReadUint32(),ce[ue]=0;var he=new o.allocUnsafe(ee),ye=Math.floor(ee/4);for(fe=0;fe<ye;fe++)for(ue=0;ue<4;ue++){var Ie=c(oe[ue],te),_=P[ce[ue]][Ie];he[fe+ue*ye]=_,oe[ue]=d(oe[ue],j[ce[ue]][_],Y[ce[ue]][_],te),oe[ue]=u(X,oe[ue]),ce[ue]=_}for(fe*=4;fe<ee;)Ie=c(oe[3],te),_=h(j[ce[3]],Ie),he[fe++]=_,oe[3]=d(oe[3],j[ce[3]][_],Y[ce[3]][_],te),oe[3]=u(X,oe[3]),ce[3]=_;return he}(k,H);return D&&($=function(X,ee,te,be){new l(X);for(var q=new o.allocUnsafe(be),J=0,E=0;J<be;E++){var Y=X[E];if(ee[Y])for(var j=te.ReadUint7(),P=0;P<=j;P++)q[J++]=Y;else q[J++]=Y}return q}($,G,ne,K)),S&&($=function(X,ee,te,be){var q=new o.allocUnsafe(be),J=0;if(te<=1)for(var E=0;E<be;E++)q[E]=ee[0];else if(te<=2)for(E=0;E<be;E++){if(E%8==0)var Y=X[J++];q[E]=ee[1&Y],Y>>=1}else if(te<=4)for(E=0;E<be;E++)E%4==0&&(Y=X[J++]),q[E]=ee[3&Y],Y>>=2;else if(te<=16)for(E=0;E<be;E++)E%2==0&&(Y=X[J++]),q[E]=ee[15&Y],Y>>=4;return q}($,O,Q,U)),$}function w(k,I){var B=new l("",0,10);B.WriteByte(I);var M=1&I,N=8&I,x=32&I,D=64&I,S=128&I,U=I>>8;if(16&I||B.WriteUint7(k.length),N)return o.concat([B.buf.slice(0,B.pos),F(0,k,U)]);var O=new o.alloc(0);S&&([O,k]=function(G){for(var ne=new Array(256),H=0;H<256;H++)ne[H]=0;for(H=0;H<G.length;H++)ne[G[H]]++;var $=new Array(256),X=0;for(H=0;H<256;H++)ne[H]>0&&($[H]=X++);if(!(X>16)){if(X<=1)var ee=new o.allocUnsafe(0);else if(X<=2){ee=new o.allocUnsafe(Math.ceil(G.length/8));var te=-1;for(H=0;H<G.length;H++)H%8==0&&(ee[++te]=0),ee[te]+=$[G[H]]<<H%8}else if(X<=4)for(ee=new o.allocUnsafe(Math.ceil(G.length/4)),te=-1,H=0;H<G.length;H++)H%4==0&&(ee[++te]=0),ee[te]+=$[G[H]]<<H%4*2;else for(ee=new o.allocUnsafe(Math.ceil(G.length/2)),te=-1,H=0;H<G.length;H++)H%2==0&&(ee[++te]=0),ee[te]+=$[G[H]]<<H%2*4;var be=new l("",0,X+5);for(be.WriteByte(X),te=0,H=0;H<256;H++)ne[H]>0&&(ne[H]=te++,be.WriteByte(H));return be.WriteUint7(ee.length),[be.buf.slice(0,be.pos),ee]}}(k));var Q=new o.alloc(0);if(D&&([Q,k]=function(G){for(var ne=new Array(256),H=0;H<256;H++)ne[H]=0;var $=-1;for(H=0;H<G.length;H++)ne[G[H]]+=G[H]==$?1:-1,$=G[H];var X=0;for(H=0;H<256;H++)ne[H]>0&&X++;for(X||(X=1,ne[0]=1),(q=new l("",0,X+1+G.length)).WriteByte(X),H=0;H<256;H++)ne[H]>0&&q.WriteByte(H);var ee=new o.allocUnsafe(G.length),te=0;for(H=0;H<G.length;H++)if(ee[te++]=G[H],ne[G[H]]>0){$=G[H];for(var be=0;H+be+1<G.length&&G[H+be+1]==$;)be++;q.WriteUint7(be),H+=be}var q,J=C(q.buf.slice(0,q.pos)),E=new l("",0,16);return E.WriteUint7(2*q.pos),E.WriteUint7(te),E.WriteUint7(J.length),[q=o.concat([E.buf.slice(0,E.pos),J]),ee.slice(0,te)]}(k)),k.length<4&&M==1&&(M=0,B.buf[0]&=-2),x)var K=k;else K=M==0?C(k):function(G){const ne=G.length;for(var H=new l("",0,198156),$=new Array(256),X=new Array(256),ee=new Array(256),te=0;te<256;te++)X[te]=new Array(256),ee[te]=new Array(256);var be=12;(function(he,ye,Ie){for(var _=0;_<256;_++){Ie[_]=0;for(var R=0;R<256;R++)ye[_][R]=0}var L=0;for(_=0;_<he.length;_++)Ie[L]++,ye[L][he[_]]++,L=he[_];Ie[L]++,ye[0][he[1*(he.length>>2)]]++,ye[0][he[2*(he.length>>2)]]++,ye[0][he[3*(he.length>>2)]]++,Ie[0]+=3})(G,X,$),function(he,ye){for(var Ie=0;Ie<256;Ie++)if(ye[Ie]){var _=Math.ceil(Math.log2(ye[Ie]));_>12&&(_=12),v(he[Ie],_)}}(X,$);var q=new l("",0,198156);(function(he,ye,Ie){A(he,Ie);for(var _=0;_<256;_++)if(Ie[_]){for(var R=0,L=0;L<256;L++)if(Ie[L]){if(R)R--;else if(he.WriteUint7(ye[_][L]),!ye[_][L]){for(var W=L+1;W<256;W++)if(Ie[W]){if(ye[_][W]!=0)break;R++}he.WriteByte(R)}}}})(q,X,$);var J=C(q.buf.slice(0,q.pos));for(J.length<q.pos?(H.WriteByte(193),H.WriteUint7(q.pos),H.WriteUint7(J.length),H.WriteData(J,J.length)):(H.WriteByte(192),H.WriteData(q.buf,q.pos)),function(he,ye){for(var Ie=0;Ie<256;Ie++)ye[Ie]&&T(he[Ie],12)}(X,$),te=0;te<256;te++)if($[te]){ee[te][0]=0;for(var E=1;E<256;E++)ee[te][E]=ee[te][E-1]+X[te][E-1]}var Y=new Array(4),j=new Array(4);for(E=0;E<4;E++)Y[E]=32768,j[E]=0;var P=new l("",1.05*ne+100|0,1.05*ne+100|0),fe=Math.floor(ne/4),oe=new Array(4),ce=new Array(4);for(E=0;E<4;E++)oe[E]=(E+1)*fe-2,ce[E]=G[oe[E]+1];for(ce[3]=G[ne-1],te=ne-2;te>4*fe-2;te--)Y[3]=m(Y[3],P,ee[G[te]][ce[3]],X[G[te]][ce[3]],be),ce[3]=G[te];for(;oe[0]>=0;)for(E=3;E>=0;E--){var ue=G[oe[E]];Y[E]=m(Y[E],P,ee[ue][ce[E]],X[ue][ce[E]],be),ce[E]=ue,oe[E]--}for(E=3;E>=0;E--)Y[E]=m(Y[E],P,ee[0][ce[E]],X[0][ce[E]],be);for(te=3;te>=0;te--)p(Y[te],P);return o.concat([H.buf.slice(0,H.pos),P.buf.slice(P.pos,P.length)],H.pos+P.length-P.pos)}(k);return o.concat([B.buf.slice(0,B.pos),O,Q,K])}function b(k){for(var I=new Array(256),B=0;B<256;B++)I[B]=0;var M=0,N=k.ReadByte(),x=N;do I[N]=1,M>0?(M--,N++):(N=k.ReadByte())==x+1&&(M=k.ReadByte()),x=N;while(N!=0);return I}function y(k,I){var B=new Array(256),M=new Array(256);(function(Q,K,G){for(var ne=0;ne<256;ne++)K[ne]=0;var H=b(Q);for(ne=0;ne<256;ne++)H[ne]>0&&(K[ne]=Q.ReadUint7());for(T(K,12),G[0]=0,ne=0;ne<=255;ne++)G[ne+1]=G[ne]+K[ne]})(k,B,M);for(var N=f(M,12),x=new Array(4),D=0;D<4;D++)x[D]=k.ReadUint32();var S=new o.allocUnsafe(I);for(D=0;D<I;D++){var U=D%4,O=N[c(x[U],12)];S[D]=O,x[U]=d(x[U],M[O],B[O],12),x[U]=u(k,x[U])}return S}function v(k,I){for(var B=0,M=0;M<256;M++)B+=k[M];const N=1<<I;var x=N/B;do{var D=0,S=0,U=0;for(B=0,M=0;M<256;M++)k[M]!=0&&(D<k[M]&&(D=k[M],S=M),k[M]=Math.floor(k[M]*x),k[M]==0&&(k[M]=1),B+=k[M]);B<N?k[S]+=N-B:B-N<k[S]/2&&k[S]>2?k[S]-=B-N:B!=N&&(x=N/B,U=1)}while(U)}function T(k,I){for(var B=0,M=0;M<256;M++)B+=k[M];if(B!=0&&B!=1<<I){for(var N=0;B<1<<I;)B*=2,N++;for(M=0;M<256;M++)k[M]<<=N}}function A(k,I){for(var B=0,M=0;M<256;M++)if(I[M]){if(B>0)B--;else if(k.WriteByte(M),M>0&&I[M-1]>0){for(B=M+1;B<256&&I[B];B++);B-=M+1,k.WriteByte(B)}}k.WriteByte(0)}function C(k){const I=k.length;var B=new l("",0,780),M=new Array(256);(function(O,Q){for(var K=0;K<256;K++)Q[K]=0;for(K=0;K<O.length;K++)Q[O[K]]++})(k,M);var N=Math.ceil(Math.log2(I));N>12&&(N=12),v(M,N),function(O,Q){A(O,Q);for(var K=0;K<256;K++)Q[K]&&O.WriteUint7(Q[K])}(B,M),v(M,12);var x=new Array(256);x[0]=0;for(var D=1;D<256;D++)x[D]=x[D-1]+M[D-1];var S=new Array(4);for(D=0;D<4;D++)S[D]=32768;var U=new l("",1.05*I+100|0,1.05*I+100|0);for(D=I-1;D>=0;D--)S[D%4]=m(S[D%4],U,x[k[D]],M[k[D]],12);for(D=3;D>=0;D--)p(S[D],U);return o.concat([B.buf.slice(0,B.pos),U.buf.slice(U.pos,U.length)],B.pos+U.length-U.pos)}r.exports={decode:function(k){return g(new l(k),0)},encode:w}},5997:(r,s,a)=>{var o=a(8287).Buffer;const l=a(8706),c=a(8223);var h=new(a(635));function f(g,w){for(var b=g+"";b.length<w;)b="0"+b;return b}function d(g,w,b,y){var v=g[0][0].ReadByte(),T=y-g[0][v].ReadUint32();if(v==5)return w[y]=w[T],b[y]=b[T],w[y];var A=1;w[y]="",b[y]=new Array(256);do{switch(v=g[A][0].ReadByte()){case 2:b[y][A]=g[A][2].ReadChar();break;case 1:b[y][A]=g[A][1].ReadString();break;case 7:b[y][A]=g[A][7].ReadUint32();break;case 3:var C=g[A][3].ReadUint32(),k=g[A][4].ReadByte();b[y][A]=f(C,k);break;case 8:b[y][A]=(0|b[T][A])+g[A][8].ReadByte();break;case 9:C=(0|b[T][A])+g[A][9].ReadByte(),k=b[T][A].length,b[y][A]=f(C,k);break;case 10:b[y][A]=b[T][A];break;default:b[y][A]=""}w[y]+=b[y][A++]}while(v!=12);return w[y]}function u(g,w,b,y,v,T){for(var A=0;A<y.length;A++)if(!(b>0&&w[A][0].type==5)&&w[A][b])switch(g[0].WriteByte(w[A][b].type),w[A][b].type){case 6:g[6].WriteUint32(w[A][b].val);break;case 5:g[5].WriteUint32(w[A][b].val);break;case 1:g[1].WriteString(w[A][b].val);break;case 2:g[2].WriteChar(w[A][b].val);break;case 7:g[7].WriteUint32(w[A][b].val);break;case 3:g[3].WriteUint32(w[A][b].val),g[4].WriteByte(w[A][b].val.length);break;case 8:case 9:g[w[A][b].type].WriteByte(w[A][b].val)}}function p(g,w,b,y){for(var v=0;v<=12;v++)if(!(g[v].pos<=0)){y.WriteByte(v+(v==0?128:0)),g[v]=g[v].buf.slice(0,g[v].pos);var T=m(g[v],b);y.WriteUint7(T.length),y.WriteData(T,T.length)}}function m(g,w){var b,y=1073741824,v=[0,1,64,65,128,129,201];for(var T in v){var A=v[T];if(!(1&A&&g.length<100||8&A&&g.length%4!=0)){try{var C=w?h.encode(g,A):c.encode(g,A)}catch{C=0}C&&y>C.length&&(y=C.length,b=C)}}return b}function F(g,w,b,y,v){var T=0,A=v-1;g[v]=new Array(256),w[y]?g[v][0]={type:5,val:v-w[y]}:g[v][0]={type:6,val:v==0?0:1},w[y]=v;for(var C=y.match(/([a-zA-Z0-9]{1,9})|([^a-zA-Z0-9]+)/g),k=0;k<C.length;k++){var I=k+1,B=1,M=C[k];if(C[k].match(/^0+[0-9]*$/g)?B=3:C[k].match(/^[0-9]+$/g)?B=7:C[k].length==1&&(B=2),A>=0&&g[A][I])if(g[A][I].str==C[k])B=10,M="";else if(g[A][I].type==7||g[A][I].type==8){var N=M-g[A][I].str;b[I]++,N>=0&&N<256&&b[I]>v/2&&(B=8,M=N)}else g[A][I].type!=3&&g[A][I].type!=9||g[A][I].str.length!=M.length||(N=M-g[A][I].str,b[I]++,N>=0&&N<256&&b[I]>v/2&&(B=9,M=N));g[v][I]={str:C[k],val:M,type:B},T<g[v][I].val.length+3&&(T=g[v][I].val.length+3)}return g[v][++I]={type:12},[I+1,T]}r.exports={encode:function(g,w){var b=g.toString();b[b.length-1]==`
`&&(b=b.substring(0,b.length-1));var y=b.split(`
`),v=new l("",0,2*b.length+1e4);v.WriteUint32(b.length),v.WriteUint32(y.length),v.WriteByte(w);for(var T=new Array(y.length),A={},C=new Array(256).fill(0),k=0,I=0,B=0;B<y.length;B++){var[M,N]=F(T,A,C,y[B],B);k<M&&(k=M),I<N&&(I=N)}for(var x=0;x<k;x++){for(var D=new Array(13),S=0;S<=12;S++)D[S]=new l("",0,y.length*I);u(D,T,x,y),p(D,0,w,v)}return v.buf.slice(0,v.pos)},decode:function(g,w,b){(g=new l(g)).ReadUint32();var y=g.ReadUint32(),v=g.ReadByte(),T=function(B,M,N,x){for(var D=-1,S=new Array(256);!B.EOF();){var U=B.ReadByte(),O=128&U,Q=64&U,K=63&U;if(O&&(S[++D]=new Array(13)),K!=0&&O){var G=new Array(x-1).fill(10);S[D][0]=new l(o.from([K].concat(G)))}if(Q){var ne=B.ReadByte(),H=B.ReadByte();S[D][K]=new l(S[ne][H].buf)}else{var $=B.ReadUint7(),X=B.ReadData($);S[D][K]=N?h.decode(X):c.decode(X),S[D][K]=new l(S[D][K])}}return S}(g,0,v,y),A=new Array(y),C=new Array(y),k="";b===void 0&&(b=`
`);for(var I=0;I<y;I++)k+=d(T,A,C,I)+b;return k}}},7526:(r,s)=>{s.byteLength=function(u){var p=f(u),m=p[0],F=p[1];return 3*(m+F)/4-F},s.toByteArray=function(u){var p,m,F=f(u),g=F[0],w=F[1],b=new l(function(T,A,C){return 3*(A+C)/4-C}(0,g,w)),y=0,v=w>0?g-4:g;for(m=0;m<v;m+=4)p=o[u.charCodeAt(m)]<<18|o[u.charCodeAt(m+1)]<<12|o[u.charCodeAt(m+2)]<<6|o[u.charCodeAt(m+3)],b[y++]=p>>16&255,b[y++]=p>>8&255,b[y++]=255&p;return w===2&&(p=o[u.charCodeAt(m)]<<2|o[u.charCodeAt(m+1)]>>4,b[y++]=255&p),w===1&&(p=o[u.charCodeAt(m)]<<10|o[u.charCodeAt(m+1)]<<4|o[u.charCodeAt(m+2)]>>2,b[y++]=p>>8&255,b[y++]=255&p),b},s.fromByteArray=function(u){for(var p,m=u.length,F=m%3,g=[],w=16383,b=0,y=m-F;b<y;b+=w)g.push(d(u,b,b+w>y?y:b+w));return F===1?(p=u[m-1],g.push(a[p>>2]+a[p<<4&63]+"==")):F===2&&(p=(u[m-2]<<8)+u[m-1],g.push(a[p>>10]+a[p>>4&63]+a[p<<2&63]+"=")),g.join("")};for(var a=[],o=[],l=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0;h<64;++h)a[h]=c[h],o[c.charCodeAt(h)]=h;function f(u){var p=u.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=u.indexOf("=");return m===-1&&(m=p),[m,m===p?0:4-m%4]}function d(u,p,m){for(var F,g,w=[],b=p;b<m;b+=3)F=(u[b]<<16&16711680)+(u[b+1]<<8&65280)+(255&u[b+2]),w.push(a[(g=F)>>18&63]+a[g>>12&63]+a[g>>6&63]+a[63&g]);return w.join("")}o[45]=62,o[95]=63},8287:(r,s,a)=>{const o=a(7526),l=a(251),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=d,s.SlowBuffer=function(_){return+_!=_&&(_=0),d.alloc(+_)},s.INSPECT_MAX_BYTES=50;const h=2147483647;function f(_){if(_>h)throw new RangeError('The value "'+_+'" is invalid for option "size"');const R=new Uint8Array(_);return Object.setPrototypeOf(R,d.prototype),R}function d(_,R,L){if(typeof _=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(_)}return u(_,R,L)}function u(_,R,L){if(typeof _=="string")return function(se,me){if(typeof me=="string"&&me!==""||(me="utf8"),!d.isEncoding(me))throw new TypeError("Unknown encoding: "+me);const ze=0|b(se,me);let Pe=f(ze);const je=Pe.write(se,me);return je!==ze&&(Pe=Pe.slice(0,je)),Pe}(_,R);if(ArrayBuffer.isView(_))return function(se){if(ce(se,Uint8Array)){const me=new Uint8Array(se);return g(me.buffer,me.byteOffset,me.byteLength)}return F(se)}(_);if(_==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _);if(ce(_,ArrayBuffer)||_&&ce(_.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ce(_,SharedArrayBuffer)||_&&ce(_.buffer,SharedArrayBuffer)))return g(_,R,L);if(typeof _=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=_.valueOf&&_.valueOf();if(W!=null&&W!==_)return d.from(W,R,L);const ie=function(se){if(d.isBuffer(se)){const me=0|w(se.length),ze=f(me);return ze.length===0||se.copy(ze,0,0,me),ze}return se.length!==void 0?typeof se.length!="number"||ue(se.length)?f(0):F(se):se.type==="Buffer"&&Array.isArray(se.data)?F(se.data):void 0}(_);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof _[Symbol.toPrimitive]=="function")return d.from(_[Symbol.toPrimitive]("string"),R,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _)}function p(_){if(typeof _!="number")throw new TypeError('"size" argument must be of type number');if(_<0)throw new RangeError('The value "'+_+'" is invalid for option "size"')}function m(_){return p(_),f(_<0?0:0|w(_))}function F(_){const R=_.length<0?0:0|w(_.length),L=f(R);for(let W=0;W<R;W+=1)L[W]=255&_[W];return L}function g(_,R,L){if(R<0||_.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(_.byteLength<R+(L||0))throw new RangeError('"length" is outside of buffer bounds');let W;return W=R===void 0&&L===void 0?new Uint8Array(_):L===void 0?new Uint8Array(_,R):new Uint8Array(_,R,L),Object.setPrototypeOf(W,d.prototype),W}function w(_){if(_>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return 0|_}function b(_,R){if(d.isBuffer(_))return _.length;if(ArrayBuffer.isView(_)||ce(_,ArrayBuffer))return _.byteLength;if(typeof _!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _);const L=_.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&L===0)return 0;let ie=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return L;case"utf8":case"utf-8":return P(_).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*L;case"hex":return L>>>1;case"base64":return fe(_).length;default:if(ie)return W?-1:P(_).length;R=(""+R).toLowerCase(),ie=!0}}function y(_,R,L){let W=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((L===void 0||L>this.length)&&(L=this.length),L<=0)||(L>>>=0)<=(R>>>=0))return"";for(_||(_="utf8");;)switch(_){case"hex":return O(this,R,L);case"utf8":case"utf-8":return x(this,R,L);case"ascii":return S(this,R,L);case"latin1":case"binary":return U(this,R,L);case"base64":return N(this,R,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,R,L);default:if(W)throw new TypeError("Unknown encoding: "+_);_=(_+"").toLowerCase(),W=!0}}function v(_,R,L){const W=_[R];_[R]=_[L],_[L]=W}function T(_,R,L,W,ie){if(_.length===0)return-1;if(typeof L=="string"?(W=L,L=0):L>2147483647?L=2147483647:L<-2147483648&&(L=-2147483648),ue(L=+L)&&(L=ie?0:_.length-1),L<0&&(L=_.length+L),L>=_.length){if(ie)return-1;L=_.length-1}else if(L<0){if(!ie)return-1;L=0}if(typeof R=="string"&&(R=d.from(R,W)),d.isBuffer(R))return R.length===0?-1:A(_,R,L,W,ie);if(typeof R=="number")return R&=255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(_,R,L):Uint8Array.prototype.lastIndexOf.call(_,R,L):A(_,[R],L,W,ie);throw new TypeError("val must be string, number or Buffer")}function A(_,R,L,W,ie){let se,me=1,ze=_.length,Pe=R.length;if(W!==void 0&&((W=String(W).toLowerCase())==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(_.length<2||R.length<2)return-1;me=2,ze/=2,Pe/=2,L/=2}function je(Oe,We){return me===1?Oe[We]:Oe.readUInt16BE(We*me)}if(ie){let Oe=-1;for(se=L;se<ze;se++)if(je(_,se)===je(R,Oe===-1?0:se-Oe)){if(Oe===-1&&(Oe=se),se-Oe+1===Pe)return Oe*me}else Oe!==-1&&(se-=se-Oe),Oe=-1}else for(L+Pe>ze&&(L=ze-Pe),se=L;se>=0;se--){let Oe=!0;for(let We=0;We<Pe;We++)if(je(_,se+We)!==je(R,We)){Oe=!1;break}if(Oe)return se}return-1}function C(_,R,L,W){L=Number(L)||0;const ie=_.length-L;W?(W=Number(W))>ie&&(W=ie):W=ie;const se=R.length;let me;for(W>se/2&&(W=se/2),me=0;me<W;++me){const ze=parseInt(R.substr(2*me,2),16);if(ue(ze))return me;_[L+me]=ze}return me}function k(_,R,L,W){return oe(P(R,_.length-L),_,L,W)}function I(_,R,L,W){return oe(function(ie){const se=[];for(let me=0;me<ie.length;++me)se.push(255&ie.charCodeAt(me));return se}(R),_,L,W)}function B(_,R,L,W){return oe(fe(R),_,L,W)}function M(_,R,L,W){return oe(function(ie,se){let me,ze,Pe;const je=[];for(let Oe=0;Oe<ie.length&&!((se-=2)<0);++Oe)me=ie.charCodeAt(Oe),ze=me>>8,Pe=me%256,je.push(Pe),je.push(ze);return je}(R,_.length-L),_,L,W)}function N(_,R,L){return R===0&&L===_.length?o.fromByteArray(_):o.fromByteArray(_.slice(R,L))}function x(_,R,L){L=Math.min(_.length,L);const W=[];let ie=R;for(;ie<L;){const se=_[ie];let me=null,ze=se>239?4:se>223?3:se>191?2:1;if(ie+ze<=L){let Pe,je,Oe,We;switch(ze){case 1:se<128&&(me=se);break;case 2:Pe=_[ie+1],(192&Pe)==128&&(We=(31&se)<<6|63&Pe,We>127&&(me=We));break;case 3:Pe=_[ie+1],je=_[ie+2],(192&Pe)==128&&(192&je)==128&&(We=(15&se)<<12|(63&Pe)<<6|63&je,We>2047&&(We<55296||We>57343)&&(me=We));break;case 4:Pe=_[ie+1],je=_[ie+2],Oe=_[ie+3],(192&Pe)==128&&(192&je)==128&&(192&Oe)==128&&(We=(15&se)<<18|(63&Pe)<<12|(63&je)<<6|63&Oe,We>65535&&We<1114112&&(me=We))}}me===null?(me=65533,ze=1):me>65535&&(me-=65536,W.push(me>>>10&1023|55296),me=56320|1023&me),W.push(me),ie+=ze}return function(se){const me=se.length;if(me<=D)return String.fromCharCode.apply(String,se);let ze="",Pe=0;for(;Pe<me;)ze+=String.fromCharCode.apply(String,se.slice(Pe,Pe+=D));return ze}(W)}s.kMaxLength=h,d.TYPED_ARRAY_SUPPORT=function(){try{const _=new Uint8Array(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,Uint8Array.prototype),Object.setPrototypeOf(_,R),_.foo()===42}catch{return!1}}(),d.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(_,R,L){return u(_,R,L)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(_,R,L){return function(W,ie,se){return p(W),W<=0?f(W):ie!==void 0?typeof se=="string"?f(W).fill(ie,se):f(W).fill(ie):f(W)}(_,R,L)},d.allocUnsafe=function(_){return m(_)},d.allocUnsafeSlow=function(_){return m(_)},d.isBuffer=function(_){return _!=null&&_._isBuffer===!0&&_!==d.prototype},d.compare=function(_,R){if(ce(_,Uint8Array)&&(_=d.from(_,_.offset,_.byteLength)),ce(R,Uint8Array)&&(R=d.from(R,R.offset,R.byteLength)),!d.isBuffer(_)||!d.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(_===R)return 0;let L=_.length,W=R.length;for(let ie=0,se=Math.min(L,W);ie<se;++ie)if(_[ie]!==R[ie]){L=_[ie],W=R[ie];break}return L<W?-1:W<L?1:0},d.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(_,R){if(!Array.isArray(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return d.alloc(0);let L;if(R===void 0)for(R=0,L=0;L<_.length;++L)R+=_[L].length;const W=d.allocUnsafe(R);let ie=0;for(L=0;L<_.length;++L){let se=_[L];if(ce(se,Uint8Array))ie+se.length>W.length?(d.isBuffer(se)||(se=d.from(se)),se.copy(W,ie)):Uint8Array.prototype.set.call(W,se,ie);else{if(!d.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(W,ie)}ie+=se.length}return W},d.byteLength=b,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const _=this.length;if(_%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<_;R+=2)v(this,R,R+1);return this},d.prototype.swap32=function(){const _=this.length;if(_%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<_;R+=4)v(this,R,R+3),v(this,R+1,R+2);return this},d.prototype.swap64=function(){const _=this.length;if(_%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<_;R+=8)v(this,R,R+7),v(this,R+1,R+6),v(this,R+2,R+5),v(this,R+3,R+4);return this},d.prototype.toString=function(){const _=this.length;return _===0?"":arguments.length===0?x(this,0,_):y.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(_){if(!d.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_||d.compare(this,_)===0},d.prototype.inspect=function(){let _="";const R=s.INSPECT_MAX_BYTES;return _=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(_+=" ... "),"<Buffer "+_+">"},c&&(d.prototype[c]=d.prototype.inspect),d.prototype.compare=function(_,R,L,W,ie){if(ce(_,Uint8Array)&&(_=d.from(_,_.offset,_.byteLength)),!d.isBuffer(_))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof _);if(R===void 0&&(R=0),L===void 0&&(L=_?_.length:0),W===void 0&&(W=0),ie===void 0&&(ie=this.length),R<0||L>_.length||W<0||ie>this.length)throw new RangeError("out of range index");if(W>=ie&&R>=L)return 0;if(W>=ie)return-1;if(R>=L)return 1;if(this===_)return 0;let se=(ie>>>=0)-(W>>>=0),me=(L>>>=0)-(R>>>=0);const ze=Math.min(se,me),Pe=this.slice(W,ie),je=_.slice(R,L);for(let Oe=0;Oe<ze;++Oe)if(Pe[Oe]!==je[Oe]){se=Pe[Oe],me=je[Oe];break}return se<me?-1:me<se?1:0},d.prototype.includes=function(_,R,L){return this.indexOf(_,R,L)!==-1},d.prototype.indexOf=function(_,R,L){return T(this,_,R,L,!0)},d.prototype.lastIndexOf=function(_,R,L){return T(this,_,R,L,!1)},d.prototype.write=function(_,R,L,W){if(R===void 0)W="utf8",L=this.length,R=0;else if(L===void 0&&typeof R=="string")W=R,L=this.length,R=0;else{if(!isFinite(R))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");R>>>=0,isFinite(L)?(L>>>=0,W===void 0&&(W="utf8")):(W=L,L=void 0)}const ie=this.length-R;if((L===void 0||L>ie)&&(L=ie),_.length>0&&(L<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");let se=!1;for(;;)switch(W){case"hex":return C(this,_,R,L);case"utf8":case"utf-8":return k(this,_,R,L);case"ascii":case"latin1":case"binary":return I(this,_,R,L);case"base64":return B(this,_,R,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,_,R,L);default:if(se)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),se=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const D=4096;function S(_,R,L){let W="";L=Math.min(_.length,L);for(let ie=R;ie<L;++ie)W+=String.fromCharCode(127&_[ie]);return W}function U(_,R,L){let W="";L=Math.min(_.length,L);for(let ie=R;ie<L;++ie)W+=String.fromCharCode(_[ie]);return W}function O(_,R,L){const W=_.length;(!R||R<0)&&(R=0),(!L||L<0||L>W)&&(L=W);let ie="";for(let se=R;se<L;++se)ie+=he[_[se]];return ie}function Q(_,R,L){const W=_.slice(R,L);let ie="";for(let se=0;se<W.length-1;se+=2)ie+=String.fromCharCode(W[se]+256*W[se+1]);return ie}function K(_,R,L){if(_%1!=0||_<0)throw new RangeError("offset is not uint");if(_+R>L)throw new RangeError("Trying to access beyond buffer length")}function G(_,R,L,W,ie,se){if(!d.isBuffer(_))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>ie||R<se)throw new RangeError('"value" argument is out of bounds');if(L+W>_.length)throw new RangeError("Index out of range")}function ne(_,R,L,W,ie){J(R,W,ie,_,L,7);let se=Number(R&BigInt(4294967295));_[L++]=se,se>>=8,_[L++]=se,se>>=8,_[L++]=se,se>>=8,_[L++]=se;let me=Number(R>>BigInt(32)&BigInt(4294967295));return _[L++]=me,me>>=8,_[L++]=me,me>>=8,_[L++]=me,me>>=8,_[L++]=me,L}function H(_,R,L,W,ie){J(R,W,ie,_,L,7);let se=Number(R&BigInt(4294967295));_[L+7]=se,se>>=8,_[L+6]=se,se>>=8,_[L+5]=se,se>>=8,_[L+4]=se;let me=Number(R>>BigInt(32)&BigInt(4294967295));return _[L+3]=me,me>>=8,_[L+2]=me,me>>=8,_[L+1]=me,me>>=8,_[L]=me,L+8}function $(_,R,L,W,ie,se){if(L+W>_.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("Index out of range")}function X(_,R,L,W,ie){return R=+R,L>>>=0,ie||$(_,0,L,4),l.write(_,R,L,W,23,4),L+4}function ee(_,R,L,W,ie){return R=+R,L>>>=0,ie||$(_,0,L,8),l.write(_,R,L,W,52,8),L+8}d.prototype.slice=function(_,R){const L=this.length;(_=~~_)<0?(_+=L)<0&&(_=0):_>L&&(_=L),(R=R===void 0?L:~~R)<0?(R+=L)<0&&(R=0):R>L&&(R=L),R<_&&(R=_);const W=this.subarray(_,R);return Object.setPrototypeOf(W,d.prototype),W},d.prototype.readUintLE=d.prototype.readUIntLE=function(_,R,L){_>>>=0,R>>>=0,L||K(_,R,this.length);let W=this[_],ie=1,se=0;for(;++se<R&&(ie*=256);)W+=this[_+se]*ie;return W},d.prototype.readUintBE=d.prototype.readUIntBE=function(_,R,L){_>>>=0,R>>>=0,L||K(_,R,this.length);let W=this[_+--R],ie=1;for(;R>0&&(ie*=256);)W+=this[_+--R]*ie;return W},d.prototype.readUint8=d.prototype.readUInt8=function(_,R){return _>>>=0,R||K(_,1,this.length),this[_]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(_,R){return _>>>=0,R||K(_,2,this.length),this[_]|this[_+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(_,R){return _>>>=0,R||K(_,2,this.length),this[_]<<8|this[_+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(_,R){return _>>>=0,R||K(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+16777216*this[_+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(_,R){return _>>>=0,R||K(_,4,this.length),16777216*this[_]+(this[_+1]<<16|this[_+2]<<8|this[_+3])},d.prototype.readBigUInt64LE=ye(function(_){E(_>>>=0,"offset");const R=this[_],L=this[_+7];R!==void 0&&L!==void 0||Y(_,this.length-8);const W=R+256*this[++_]+65536*this[++_]+this[++_]*2**24,ie=this[++_]+256*this[++_]+65536*this[++_]+L*2**24;return BigInt(W)+(BigInt(ie)<<BigInt(32))}),d.prototype.readBigUInt64BE=ye(function(_){E(_>>>=0,"offset");const R=this[_],L=this[_+7];R!==void 0&&L!==void 0||Y(_,this.length-8);const W=R*2**24+65536*this[++_]+256*this[++_]+this[++_],ie=this[++_]*2**24+65536*this[++_]+256*this[++_]+L;return(BigInt(W)<<BigInt(32))+BigInt(ie)}),d.prototype.readIntLE=function(_,R,L){_>>>=0,R>>>=0,L||K(_,R,this.length);let W=this[_],ie=1,se=0;for(;++se<R&&(ie*=256);)W+=this[_+se]*ie;return ie*=128,W>=ie&&(W-=Math.pow(2,8*R)),W},d.prototype.readIntBE=function(_,R,L){_>>>=0,R>>>=0,L||K(_,R,this.length);let W=R,ie=1,se=this[_+--W];for(;W>0&&(ie*=256);)se+=this[_+--W]*ie;return ie*=128,se>=ie&&(se-=Math.pow(2,8*R)),se},d.prototype.readInt8=function(_,R){return _>>>=0,R||K(_,1,this.length),128&this[_]?-1*(255-this[_]+1):this[_]},d.prototype.readInt16LE=function(_,R){_>>>=0,R||K(_,2,this.length);const L=this[_]|this[_+1]<<8;return 32768&L?4294901760|L:L},d.prototype.readInt16BE=function(_,R){_>>>=0,R||K(_,2,this.length);const L=this[_+1]|this[_]<<8;return 32768&L?4294901760|L:L},d.prototype.readInt32LE=function(_,R){return _>>>=0,R||K(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},d.prototype.readInt32BE=function(_,R){return _>>>=0,R||K(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},d.prototype.readBigInt64LE=ye(function(_){E(_>>>=0,"offset");const R=this[_],L=this[_+7];R!==void 0&&L!==void 0||Y(_,this.length-8);const W=this[_+4]+256*this[_+5]+65536*this[_+6]+(L<<24);return(BigInt(W)<<BigInt(32))+BigInt(R+256*this[++_]+65536*this[++_]+this[++_]*16777216)}),d.prototype.readBigInt64BE=ye(function(_){E(_>>>=0,"offset");const R=this[_],L=this[_+7];R!==void 0&&L!==void 0||Y(_,this.length-8);const W=(R<<24)+65536*this[++_]+256*this[++_]+this[++_];return(BigInt(W)<<BigInt(32))+BigInt(this[++_]*16777216+65536*this[++_]+256*this[++_]+L)}),d.prototype.readFloatLE=function(_,R){return _>>>=0,R||K(_,4,this.length),l.read(this,_,!0,23,4)},d.prototype.readFloatBE=function(_,R){return _>>>=0,R||K(_,4,this.length),l.read(this,_,!1,23,4)},d.prototype.readDoubleLE=function(_,R){return _>>>=0,R||K(_,8,this.length),l.read(this,_,!0,52,8)},d.prototype.readDoubleBE=function(_,R){return _>>>=0,R||K(_,8,this.length),l.read(this,_,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(_,R,L,W){_=+_,R>>>=0,L>>>=0,W||G(this,_,R,L,Math.pow(2,8*L)-1,0);let ie=1,se=0;for(this[R]=255&_;++se<L&&(ie*=256);)this[R+se]=_/ie&255;return R+L},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(_,R,L,W){_=+_,R>>>=0,L>>>=0,W||G(this,_,R,L,Math.pow(2,8*L)-1,0);let ie=L-1,se=1;for(this[R+ie]=255&_;--ie>=0&&(se*=256);)this[R+ie]=_/se&255;return R+L},d.prototype.writeUint8=d.prototype.writeUInt8=function(_,R,L){return _=+_,R>>>=0,L||G(this,_,R,1,255,0),this[R]=255&_,R+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(_,R,L){return _=+_,R>>>=0,L||G(this,_,R,2,65535,0),this[R]=255&_,this[R+1]=_>>>8,R+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(_,R,L){return _=+_,R>>>=0,L||G(this,_,R,2,65535,0),this[R]=_>>>8,this[R+1]=255&_,R+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(_,R,L){return _=+_,R>>>=0,L||G(this,_,R,4,4294967295,0),this[R+3]=_>>>24,this[R+2]=_>>>16,this[R+1]=_>>>8,this[R]=255&_,R+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(_,R,L){return _=+_,R>>>=0,L||G(this,_,R,4,4294967295,0),this[R]=_>>>24,this[R+1]=_>>>16,this[R+2]=_>>>8,this[R+3]=255&_,R+4},d.prototype.writeBigUInt64LE=ye(function(_,R=0){return ne(this,_,R,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=ye(function(_,R=0){return H(this,_,R,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(_,R,L,W){if(_=+_,R>>>=0,!W){const ze=Math.pow(2,8*L-1);G(this,_,R,L,ze-1,-ze)}let ie=0,se=1,me=0;for(this[R]=255&_;++ie<L&&(se*=256);)_<0&&me===0&&this[R+ie-1]!==0&&(me=1),this[R+ie]=(_/se|0)-me&255;return R+L},d.prototype.writeIntBE=function(_,R,L,W){if(_=+_,R>>>=0,!W){const ze=Math.pow(2,8*L-1);G(this,_,R,L,ze-1,-ze)}let ie=L-1,se=1,me=0;for(this[R+ie]=255&_;--ie>=0&&(se*=256);)_<0&&me===0&&this[R+ie+1]!==0&&(me=1),this[R+ie]=(_/se|0)-me&255;return R+L},d.prototype.writeInt8=function(_,R,L){return _=+_,R>>>=0,L||G(this,_,R,1,127,-128),_<0&&(_=255+_+1),this[R]=255&_,R+1},d.prototype.writeInt16LE=function(_,R,L){return _=+_,R>>>=0,L||G(this,_,R,2,32767,-32768),this[R]=255&_,this[R+1]=_>>>8,R+2},d.prototype.writeInt16BE=function(_,R,L){return _=+_,R>>>=0,L||G(this,_,R,2,32767,-32768),this[R]=_>>>8,this[R+1]=255&_,R+2},d.prototype.writeInt32LE=function(_,R,L){return _=+_,R>>>=0,L||G(this,_,R,4,2147483647,-2147483648),this[R]=255&_,this[R+1]=_>>>8,this[R+2]=_>>>16,this[R+3]=_>>>24,R+4},d.prototype.writeInt32BE=function(_,R,L){return _=+_,R>>>=0,L||G(this,_,R,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),this[R]=_>>>24,this[R+1]=_>>>16,this[R+2]=_>>>8,this[R+3]=255&_,R+4},d.prototype.writeBigInt64LE=ye(function(_,R=0){return ne(this,_,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=ye(function(_,R=0){return H(this,_,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeFloatLE=function(_,R,L){return X(this,_,R,!0,L)},d.prototype.writeFloatBE=function(_,R,L){return X(this,_,R,!1,L)},d.prototype.writeDoubleLE=function(_,R,L){return ee(this,_,R,!0,L)},d.prototype.writeDoubleBE=function(_,R,L){return ee(this,_,R,!1,L)},d.prototype.copy=function(_,R,L,W){if(!d.isBuffer(_))throw new TypeError("argument should be a Buffer");if(L||(L=0),W||W===0||(W=this.length),R>=_.length&&(R=_.length),R||(R=0),W>0&&W<L&&(W=L),W===L||_.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),_.length-R<W-L&&(W=_.length-R+L);const ie=W-L;return this===_&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,L,W):Uint8Array.prototype.set.call(_,this.subarray(L,W),R),ie},d.prototype.fill=function(_,R,L,W){if(typeof _=="string"){if(typeof R=="string"?(W=R,R=0,L=this.length):typeof L=="string"&&(W=L,L=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!d.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(_.length===1){const se=_.charCodeAt(0);(W==="utf8"&&se<128||W==="latin1")&&(_=se)}}else typeof _=="number"?_&=255:typeof _=="boolean"&&(_=Number(_));if(R<0||this.length<R||this.length<L)throw new RangeError("Out of range index");if(L<=R)return this;let ie;if(R>>>=0,L=L===void 0?this.length:L>>>0,_||(_=0),typeof _=="number")for(ie=R;ie<L;++ie)this[ie]=_;else{const se=d.isBuffer(_)?_:d.from(_,W),me=se.length;if(me===0)throw new TypeError('The value "'+_+'" is invalid for argument "value"');for(ie=0;ie<L-R;++ie)this[ie+R]=se[ie%me]}return this};const te={};function be(_,R,L){te[_]=class extends L{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${_}]`,this.stack,delete this.name}get code(){return _}set code(W){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:W,writable:!0})}toString(){return`${this.name} [${_}]: ${this.message}`}}}function q(_){let R="",L=_.length;const W=_[0]==="-"?1:0;for(;L>=W+4;L-=3)R=`_${_.slice(L-3,L)}${R}`;return`${_.slice(0,L)}${R}`}function J(_,R,L,W,ie,se){if(_>L||_<R){const me=typeof R=="bigint"?"n":"";let ze;throw ze=R===0||R===BigInt(0)?`>= 0${me} and < 2${me} ** ${8*(se+1)}${me}`:`>= -(2${me} ** ${8*(se+1)-1}${me}) and < 2 ** ${8*(se+1)-1}${me}`,new te.ERR_OUT_OF_RANGE("value",ze,_)}(function(me,ze,Pe){E(ze,"offset"),me[ze]!==void 0&&me[ze+Pe]!==void 0||Y(ze,me.length-(Pe+1))})(W,ie,se)}function E(_,R){if(typeof _!="number")throw new te.ERR_INVALID_ARG_TYPE(R,"number",_)}function Y(_,R,L){throw Math.floor(_)!==_?(E(_,L),new te.ERR_OUT_OF_RANGE("offset","an integer",_)):R<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${R}`,_)}be("ERR_BUFFER_OUT_OF_BOUNDS",function(_){return _?`${_} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),be("ERR_INVALID_ARG_TYPE",function(_,R){return`The "${_}" argument must be of type number. Received type ${typeof R}`},TypeError),be("ERR_OUT_OF_RANGE",function(_,R,L){let W=`The value of "${_}" is out of range.`,ie=L;return Number.isInteger(L)&&Math.abs(L)>4294967296?ie=q(String(L)):typeof L=="bigint"&&(ie=String(L),(L>BigInt(2)**BigInt(32)||L<-(BigInt(2)**BigInt(32)))&&(ie=q(ie)),ie+="n"),W+=` It must be ${R}. Received ${ie}`,W},RangeError);const j=/[^+/0-9A-Za-z-_]/g;function P(_,R){let L;R=R||1/0;const W=_.length;let ie=null;const se=[];for(let me=0;me<W;++me){if(L=_.charCodeAt(me),L>55295&&L<57344){if(!ie){if(L>56319){(R-=3)>-1&&se.push(239,191,189);continue}if(me+1===W){(R-=3)>-1&&se.push(239,191,189);continue}ie=L;continue}if(L<56320){(R-=3)>-1&&se.push(239,191,189),ie=L;continue}L=65536+(ie-55296<<10|L-56320)}else ie&&(R-=3)>-1&&se.push(239,191,189);if(ie=null,L<128){if((R-=1)<0)break;se.push(L)}else if(L<2048){if((R-=2)<0)break;se.push(L>>6|192,63&L|128)}else if(L<65536){if((R-=3)<0)break;se.push(L>>12|224,L>>6&63|128,63&L|128)}else{if(!(L<1114112))throw new Error("Invalid code point");if((R-=4)<0)break;se.push(L>>18|240,L>>12&63|128,L>>6&63|128,63&L|128)}}return se}function fe(_){return o.toByteArray(function(R){if((R=(R=R.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;R.length%4!=0;)R+="=";return R}(_))}function oe(_,R,L,W){let ie;for(ie=0;ie<W&&!(ie+L>=R.length||ie>=_.length);++ie)R[ie+L]=_[ie];return ie}function ce(_,R){return _ instanceof R||_!=null&&_.constructor!=null&&_.constructor.name!=null&&_.constructor.name===R.name}function ue(_){return _!=_}const he=function(){const _="0123456789abcdef",R=new Array(256);for(let L=0;L<16;++L){const W=16*L;for(let ie=0;ie<16;++ie)R[W+ie]=_[L]+_[ie]}return R}();function ye(_){return typeof BigInt>"u"?Ie:_}function Ie(){throw new Error("BigInt not supported")}},235:r=>{var s={array:function(a){var o=0,l=0,c=[0,1,3,7,15,31,63,127,255];return function(h){for(var f=0;h>0;){var d=8-o;h>=d?(f<<=d,f|=c[d]&a[l++],o=0,h-=d):(f<<=h,f|=(a[l]&c[h]<<8-h-o)>>8-h-o,o+=h,h=0)}return f}},simple:function(a){var o,l,c=s.header(a),h=[],f=0;do(l=s.decompress(a,c))!=-1&&(h.push(l),f+=l.byteLength);while(l!=-1);o=new Uint8Array(f),f=0;for(var d=0;d<h.length;++d)l=h[d],o.set(l,f),f+=l.byteLength;return o},header:function(a){if(a(24)!=4348520)throw"No magic number found";var o=a(8)-48;if(o<1||o>9)throw"Not a BZIP archive";return o},decompress:function(a,o,l){for(var c=9e5,h="",f=0;f<6;f++)h+=a(8).toString(16);if(h=="177245385090")return-1;if(h!="314159265359")throw"eek not valid bzip data";if(a(32),a(1))throw"unsupported obsolete version";var d=a(24);if(d>c)throw"Initial position larger than buffer size";var u=a(16),p=new Uint8Array(256),m=0;for(f=0;f<16;f++)if(u&1<<15-f){var F=a(16);for(v=0;v<16;v++)F&1<<15-v&&(p[m++]=16*f+v)}var g=a(3);if(g<2||g>6)throw"another error";var w=a(15);if(w==0)throw"meh";var b=[];for(f=0;f<g;f++)b[f]=f;var y=new Uint8Array(32768);for(f=0;f<w;f++){for(var v=0;a(1);v++)if(v>=g)throw"whoops another error";var T=b[v];b.splice(v,1),b.splice(0,0,T),y[f]=T}var A=m+2,C=[];for(v=0;v<g;v++){var k,I,B,M=new Uint8Array(258),N=new Uint8Array(21);for(u=a(5),f=0;f<A;f++){for(;;){if(u<1||u>20)throw"I gave up a while ago on writing error messages";if(!a(1))break;a(1)?u--:u++}M[f]=u}for(k=I=M[0],f=1;f<A;f++)M[f]>I?I=M[f]:M[f]<k&&(k=M[f]);(B=C[v]={}).permute=new Uint32Array(258),B.limit=new Uint32Array(21),B.base=new Uint32Array(21),B.minLen=k,B.maxLen=I;var x=B.base.subarray(1),D=B.limit.subarray(1),S=0;for(f=k;f<=I;f++)for(u=0;u<A;u++)M[u]==f&&(B.permute[S++]=u);for(f=k;f<=I;f++)N[f]=D[f]=0;for(f=0;f<A;f++)N[M[f]]++;for(S=u=0,f=k;f<I;f++)S+=N[f],D[f]=S-1,S<<=1,x[f+1]=S-(u+=N[f]);D[I]=S+N[I]-1,x[k]=0}var U,O,Q,K=new Uint32Array(256);for(f=0;f<256;f++)b[f]=f;U=O=A=Q=0;for(var G=new Uint32Array(c);;){if(!A--){if(A=49,Q>=w)throw"meow i'm a kitty, that's an error";x=(B=C[y[Q++]]).base.subarray(1),D=B.limit.subarray(1)}for(v=a(f=B.minLen);;){if(f>B.maxLen)throw"rawr i'm a dinosaur";if(v<=D[f])break;f++,v=v<<1|a(1)}if((v-=x[f])<0||v>=258)throw"moo i'm a cow";var ne=B.permute[v];if(ne!=0&&ne!=1){if(U){if(U=0,O+u>=c)throw"Boom.";for(K[T=p[b[0]]]+=u;u--;)G[O++]=T}if(ne>m)break;if(O>=c)throw"I can't think of anything. Error";T=b[f=ne-1],b.splice(f,1),b.splice(0,0,T),K[T=p[T]]++,G[O++]=T}else U||(U=1,u=0),u+=ne==0?U:2*U,U<<=1}if(d<0||d>=O)throw"I'm a monkey and I'm throwing something at someone, namely you";for(v=0,f=0;f<256;f++)F=v+K[f],K[f]=v,v=F;for(f=0;f<O;f++)G[K[T=255&G[f]]]|=f<<8,K[T]++;var H=0,$=0,X=0;O&&($=255&(H=G[d]),H>>=8,X=-1);var ee,te,be,q=new Uint8Array(c),J=0;for(l||(l=1/0);O;){for(O--,te=$,$=255&(H=G[H]),H>>=8,X++==3?(ee=$,be=te,$=-1):(ee=1,be=$);ee--;)if(q[J++]=be,!--l)return q;$!=te&&(X=0)}return q.subarray(0,J)}};r.exports=s},2151:r=>{var s={utf8:{stringToBytes:function(a){return s.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(s.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var o=[],l=0;l<a.length;l++)o.push(255&a.charCodeAt(l));return o},bytesToString:function(a){for(var o=[],l=0;l<a.length;l++)o.push(String.fromCharCode(a[l]));return o.join("")}}};r.exports=s},3939:r=>{var s,a;s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:function(o,l){return o<<l|o>>>32-l},rotr:function(o,l){return o<<32-l|o>>>l},endian:function(o){if(o.constructor==Number)return 16711935&a.rotl(o,8)|4278255360&a.rotl(o,24);for(var l=0;l<o.length;l++)o[l]=a.endian(o[l]);return o},randomBytes:function(o){for(var l=[];o>0;o--)l.push(Math.floor(256*Math.random()));return l},bytesToWords:function(o){for(var l=[],c=0,h=0;c<o.length;c++,h+=8)l[h>>>5]|=o[c]<<24-h%32;return l},wordsToBytes:function(o){for(var l=[],c=0;c<32*o.length;c+=8)l.push(o[c>>>5]>>>24-c%32&255);return l},bytesToHex:function(o){for(var l=[],c=0;c<o.length;c++)l.push((o[c]>>>4).toString(16)),l.push((15&o[c]).toString(16));return l.join("")},hexToBytes:function(o){for(var l=[],c=0;c<o.length;c+=2)l.push(parseInt(o.substr(c,2),16));return l},bytesToBase64:function(o){for(var l=[],c=0;c<o.length;c+=3)for(var h=o[c]<<16|o[c+1]<<8|o[c+2],f=0;f<4;f++)8*c+6*f<=8*o.length?l.push(s.charAt(h>>>6*(3-f)&63)):l.push("=");return l.join("")},base64ToBytes:function(o){o=o.replace(/[^A-Z0-9+\/]/gi,"");for(var l=[],c=0,h=0;c<o.length;h=++c%4)h!=0&&l.push((s.indexOf(o.charAt(c-1))&Math.pow(2,-2*h+8)-1)<<2*h|s.indexOf(o.charAt(c))>>>6-2*h);return l}},r.exports=a},1113:(r,s,a)=>{a.r(s),a.d(s,{BlobFile:()=>u,LocalFile:()=>l(),RemoteFile:()=>f,fromUrl:()=>p,open:()=>m});var o=a(3617),l=a.n(o),c=a(8287);function h(F){return(typeof F=="object"&&F!==null&&"message"in F?F.message:`${F}`).replace(/\.$/,"")}class f{async getBufferFromResponse(g){const w=await g.arrayBuffer();return c.Buffer.from(w)}constructor(g,w={}){this.baseOverrides={},this.url=g;const b=w.fetch||globalThis.fetch.bind(globalThis);if(!b)throw new TypeError("no fetch function supplied, and none found in global environment");w.overrides&&(this.baseOverrides=w.overrides),this.fetchImplementation=b}async fetch(g,w){let b;try{b=await this.fetchImplementation(g,w)}catch(y){if(!`${y}`.includes("Failed to fetch"))throw new Error(`${h(y)} fetching ${g}`,{cause:y});console.warn(`generic-filehandle: refetching ${g} to attempt to work around chrome CORS header caching bug`);try{b=await this.fetchImplementation(g,{...w,cache:"reload"})}catch(v){throw new Error(`${h(v)} fetching ${g}`,{cause:v})}}return b}async read(g,w=0,b,y=0,v={}){const{headers:T={},signal:A,overrides:C={}}=v;b<1/0?T.range=`bytes=${y}-${y+b}`:b===1/0&&y!==0&&(T.range=`bytes=${y}-`);const k=await this.fetch(this.url,{...this.baseOverrides,...C,headers:{...T,...C.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:A});if(!k.ok)throw new Error(`HTTP ${k.status} fetching ${this.url}`);if(k.status===200&&y===0||k.status===206){const I=await this.getBufferFromResponse(k),B=I.copy(g,w,0,Math.min(b,I.length)),M=k.headers.get("content-range"),N=/\/(\d+)$/.exec(M||"");return N!=null&&N[1]&&(this._stat={size:parseInt(N[1],10)}),{bytesRead:B,buffer:g}}throw k.status===200?new Error(`${this.url} fetch returned status 200, expected 206`):new Error(`HTTP ${k.status} fetching ${this.url}`)}async readFile(g={}){let w,b;typeof g=="string"?(w=g,b={}):(w=g.encoding,b=g,delete b.encoding);const{headers:y={},signal:v,overrides:T={}}=b,A=await this.fetch(this.url,{headers:y,method:"GET",redirect:"follow",mode:"cors",signal:v,...this.baseOverrides,...T});if(A.status!==200)throw new Error(`HTTP ${A.status} fetching ${this.url}`);if(w==="utf8")return A.text();if(w)throw new Error(`unsupported encoding: ${w}`);return this.getBufferFromResponse(A)}async stat(){if(!this._stat){const g=c.Buffer.allocUnsafe(10);if(await this.read(g,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}}function d(F){const g=new FileReader;return new Promise((w,b)=>{g.onerror=()=>{g.abort(),b(new Error("problem reading blob"))},g.onabort=()=>{b(new Error("blob reading was aborted"))},g.onload=()=>{g.result&&typeof g.result!="string"?w(g.result):b(new Error("unknown error reading blob"))},g.readAsArrayBuffer(F)})}class u{constructor(g){this.blob=g,this.size=g.size}async read(g,w=0,b,y=0){if(!b)return{bytesRead:0,buffer:g};const v=y,T=v+b,A=await d(this.blob.slice(v,T)),C=c.Buffer.from(A);return{bytesRead:C.copy(g,w),buffer:C}}async readFile(g){const w=typeof g=="string"?g:g==null?void 0:g.encoding;if(w==="utf8")return function(y){const v=new FileReader;return new Promise((T,A)=>{v.onerror=()=>{v.abort(),A(new Error("problem reading blob"))},v.onabort=()=>{A(new Error("blob reading was aborted"))},v.onload=()=>{v.result&&typeof v.result=="string"?T(v.result):A(new Error("unknown error reading blob"))},v.readAsText(y)})}(this.blob);if(w)throw new Error(`unsupported encoding: ${w}`);const b=await d(this.blob);return c.Buffer.from(b)}async stat(){return{size:this.size}}async close(){}}function p(F,g={}){return new f(F,g)}function m(F,g,w,b={}){if(w!==void 0)return w;if(F!==void 0)return p(F,b);if(g!==void 0)return new(l())(g,b);throw new Error("no url, path, or filehandle provided, cannot open")}},251:(r,s)=>{s.read=function(a,o,l,c,h){var f,d,u=8*h-c-1,p=(1<<u)-1,m=p>>1,F=-7,g=l?h-1:0,w=l?-1:1,b=a[o+g];for(g+=w,f=b&(1<<-F)-1,b>>=-F,F+=u;F>0;f=256*f+a[o+g],g+=w,F-=8);for(d=f&(1<<-F)-1,f>>=-F,F+=c;F>0;d=256*d+a[o+g],g+=w,F-=8);if(f===0)f=1-m;else{if(f===p)return d?NaN:1/0*(b?-1:1);d+=Math.pow(2,c),f-=m}return(b?-1:1)*d*Math.pow(2,f-c)},s.write=function(a,o,l,c,h,f){var d,u,p,m=8*f-h-1,F=(1<<m)-1,g=F>>1,w=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=c?0:f-1,y=c?1:-1,v=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(u=isNaN(o)?1:0,d=F):(d=Math.floor(Math.log(o)/Math.LN2),o*(p=Math.pow(2,-d))<1&&(d--,p*=2),(o+=d+g>=1?w/p:w*Math.pow(2,1-g))*p>=2&&(d++,p/=2),d+g>=F?(u=0,d=F):d+g>=1?(u=(o*p-1)*Math.pow(2,h),d+=g):(u=o*Math.pow(2,g-1)*Math.pow(2,h),d=0));h>=8;a[l+b]=255&u,b+=y,u/=256,h-=8);for(d=d<<h|u,m+=h;m>0;a[l+b]=255&d,b+=y,d/=256,m-=8);a[l+b-y]|=128*v}},8570:r=>{r.exports=a;var s=null;try{s=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function a(N,x,D){this.low=0|N,this.high=0|x,this.unsigned=!!D}function o(N){return(N&&N.__isLong__)===!0}a.prototype.__isLong__,Object.defineProperty(a.prototype,"__isLong__",{value:!0}),a.isLong=o;var l={},c={};function h(N,x){var D,S,U;return x?(U=0<=(N>>>=0)&&N<256)&&(S=c[N])?S:(D=d(N,(0|N)<0?-1:0,!0),U&&(c[N]=D),D):(U=-128<=(N|=0)&&N<128)&&(S=l[N])?S:(D=d(N,N<0?-1:0,!1),U&&(l[N]=D),D)}function f(N,x){if(isNaN(N))return x?v:y;if(x){if(N<0)return v;if(N>=g)return I}else{if(N<=-9223372036854776e3)return B;if(N+1>=w)return k}return N<0?f(-N,x).neg():d(N%F|0,N/F|0,x)}function d(N,x,D){return new a(N,x,D)}a.fromInt=h,a.fromNumber=f,a.fromBits=d;var u=Math.pow;function p(N,x,D){if(N.length===0)throw Error("empty string");if(N==="NaN"||N==="Infinity"||N==="+Infinity"||N==="-Infinity")return y;if(typeof x=="number"?(D=x,x=!1):x=!!x,(D=D||10)<2||36<D)throw RangeError("radix");var S;if((S=N.indexOf("-"))>0)throw Error("interior hyphen");if(S===0)return p(N.substring(1),x,D).neg();for(var U=f(u(D,8)),O=y,Q=0;Q<N.length;Q+=8){var K=Math.min(8,N.length-Q),G=parseInt(N.substring(Q,Q+K),D);if(K<8){var ne=f(u(D,K));O=O.mul(ne).add(f(G))}else O=(O=O.mul(U)).add(f(G))}return O.unsigned=x,O}function m(N,x){return typeof N=="number"?f(N,x):typeof N=="string"?p(N,x):d(N.low,N.high,typeof x=="boolean"?x:N.unsigned)}a.fromString=p,a.fromValue=m;var F=4294967296,g=F*F,w=g/2,b=h(1<<24),y=h(0);a.ZERO=y;var v=h(0,!0);a.UZERO=v;var T=h(1);a.ONE=T;var A=h(1,!0);a.UONE=A;var C=h(-1);a.NEG_ONE=C;var k=d(-1,2147483647,!1);a.MAX_VALUE=k;var I=d(-1,-1,!0);a.MAX_UNSIGNED_VALUE=I;var B=d(0,-2147483648,!1);a.MIN_VALUE=B;var M=a.prototype;M.toInt=function(){return this.unsigned?this.low>>>0:this.low},M.toNumber=function(){return this.unsigned?(this.high>>>0)*F+(this.low>>>0):this.high*F+(this.low>>>0)},M.toString=function(N){if((N=N||10)<2||36<N)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(B)){var x=f(N),D=this.div(x),S=D.mul(x).sub(this);return D.toString(N)+S.toInt().toString(N)}return"-"+this.neg().toString(N)}for(var U=f(u(N,6),this.unsigned),O=this,Q="";;){var K=O.div(U),G=(O.sub(K.mul(U)).toInt()>>>0).toString(N);if((O=K).isZero())return G+Q;for(;G.length<6;)G="0"+G;Q=""+G+Q}},M.getHighBits=function(){return this.high},M.getHighBitsUnsigned=function(){return this.high>>>0},M.getLowBits=function(){return this.low},M.getLowBitsUnsigned=function(){return this.low>>>0},M.getNumBitsAbs=function(){if(this.isNegative())return this.eq(B)?64:this.neg().getNumBitsAbs();for(var N=this.high!=0?this.high:this.low,x=31;x>0&&!(N&1<<x);x--);return this.high!=0?x+33:x+1},M.isZero=function(){return this.high===0&&this.low===0},M.eqz=M.isZero,M.isNegative=function(){return!this.unsigned&&this.high<0},M.isPositive=function(){return this.unsigned||this.high>=0},M.isOdd=function(){return!(1&~this.low)},M.isEven=function(){return!(1&this.low)},M.equals=function(N){return o(N)||(N=m(N)),(this.unsigned===N.unsigned||this.high>>>31!=1||N.high>>>31!=1)&&this.high===N.high&&this.low===N.low},M.eq=M.equals,M.notEquals=function(N){return!this.eq(N)},M.neq=M.notEquals,M.ne=M.notEquals,M.lessThan=function(N){return this.comp(N)<0},M.lt=M.lessThan,M.lessThanOrEqual=function(N){return this.comp(N)<=0},M.lte=M.lessThanOrEqual,M.le=M.lessThanOrEqual,M.greaterThan=function(N){return this.comp(N)>0},M.gt=M.greaterThan,M.greaterThanOrEqual=function(N){return this.comp(N)>=0},M.gte=M.greaterThanOrEqual,M.ge=M.greaterThanOrEqual,M.compare=function(N){if(o(N)||(N=m(N)),this.eq(N))return 0;var x=this.isNegative(),D=N.isNegative();return x&&!D?-1:!x&&D?1:this.unsigned?N.high>>>0>this.high>>>0||N.high===this.high&&N.low>>>0>this.low>>>0?-1:1:this.sub(N).isNegative()?-1:1},M.comp=M.compare,M.negate=function(){return!this.unsigned&&this.eq(B)?B:this.not().add(T)},M.neg=M.negate,M.add=function(N){o(N)||(N=m(N));var x=this.high>>>16,D=65535&this.high,S=this.low>>>16,U=65535&this.low,O=N.high>>>16,Q=65535&N.high,K=N.low>>>16,G=0,ne=0,H=0,$=0;return H+=($+=U+(65535&N.low))>>>16,ne+=(H+=S+K)>>>16,G+=(ne+=D+Q)>>>16,G+=x+O,d((H&=65535)<<16|($&=65535),(G&=65535)<<16|(ne&=65535),this.unsigned)},M.subtract=function(N){return o(N)||(N=m(N)),this.add(N.neg())},M.sub=M.subtract,M.multiply=function(N){if(this.isZero())return y;if(o(N)||(N=m(N)),s)return d(s.mul(this.low,this.high,N.low,N.high),s.get_high(),this.unsigned);if(N.isZero())return y;if(this.eq(B))return N.isOdd()?B:y;if(N.eq(B))return this.isOdd()?B:y;if(this.isNegative())return N.isNegative()?this.neg().mul(N.neg()):this.neg().mul(N).neg();if(N.isNegative())return this.mul(N.neg()).neg();if(this.lt(b)&&N.lt(b))return f(this.toNumber()*N.toNumber(),this.unsigned);var x=this.high>>>16,D=65535&this.high,S=this.low>>>16,U=65535&this.low,O=N.high>>>16,Q=65535&N.high,K=N.low>>>16,G=65535&N.low,ne=0,H=0,$=0,X=0;return $+=(X+=U*G)>>>16,H+=($+=S*G)>>>16,$&=65535,H+=($+=U*K)>>>16,ne+=(H+=D*G)>>>16,H&=65535,ne+=(H+=S*K)>>>16,H&=65535,ne+=(H+=U*Q)>>>16,ne+=x*G+D*K+S*Q+U*O,d(($&=65535)<<16|(X&=65535),(ne&=65535)<<16|(H&=65535),this.unsigned)},M.mul=M.multiply,M.divide=function(N){if(o(N)||(N=m(N)),N.isZero())throw Error("division by zero");var x,D,S;if(s)return this.unsigned||this.high!==-2147483648||N.low!==-1||N.high!==-1?d((this.unsigned?s.div_u:s.div_s)(this.low,this.high,N.low,N.high),s.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:y;if(this.unsigned){if(N.unsigned||(N=N.toUnsigned()),N.gt(this))return v;if(N.gt(this.shru(1)))return A;S=v}else{if(this.eq(B))return N.eq(T)||N.eq(C)?B:N.eq(B)?T:(x=this.shr(1).div(N).shl(1)).eq(y)?N.isNegative()?T:C:(D=this.sub(N.mul(x)),S=x.add(D.div(N)));if(N.eq(B))return this.unsigned?v:y;if(this.isNegative())return N.isNegative()?this.neg().div(N.neg()):this.neg().div(N).neg();if(N.isNegative())return this.div(N.neg()).neg();S=y}for(D=this;D.gte(N);){x=Math.max(1,Math.floor(D.toNumber()/N.toNumber()));for(var U=Math.ceil(Math.log(x)/Math.LN2),O=U<=48?1:u(2,U-48),Q=f(x),K=Q.mul(N);K.isNegative()||K.gt(D);)K=(Q=f(x-=O,this.unsigned)).mul(N);Q.isZero()&&(Q=T),S=S.add(Q),D=D.sub(K)}return S},M.div=M.divide,M.modulo=function(N){return o(N)||(N=m(N)),s?d((this.unsigned?s.rem_u:s.rem_s)(this.low,this.high,N.low,N.high),s.get_high(),this.unsigned):this.sub(this.div(N).mul(N))},M.mod=M.modulo,M.rem=M.modulo,M.not=function(){return d(~this.low,~this.high,this.unsigned)},M.and=function(N){return o(N)||(N=m(N)),d(this.low&N.low,this.high&N.high,this.unsigned)},M.or=function(N){return o(N)||(N=m(N)),d(this.low|N.low,this.high|N.high,this.unsigned)},M.xor=function(N){return o(N)||(N=m(N)),d(this.low^N.low,this.high^N.high,this.unsigned)},M.shiftLeft=function(N){return o(N)&&(N=N.toInt()),(N&=63)==0?this:N<32?d(this.low<<N,this.high<<N|this.low>>>32-N,this.unsigned):d(0,this.low<<N-32,this.unsigned)},M.shl=M.shiftLeft,M.shiftRight=function(N){return o(N)&&(N=N.toInt()),(N&=63)==0?this:N<32?d(this.low>>>N|this.high<<32-N,this.high>>N,this.unsigned):d(this.high>>N-32,this.high>=0?0:-1,this.unsigned)},M.shr=M.shiftRight,M.shiftRightUnsigned=function(N){if(o(N)&&(N=N.toInt()),(N&=63)==0)return this;var x=this.high;return N<32?d(this.low>>>N|x<<32-N,x>>>N,this.unsigned):d(N===32?x:x>>>N-32,0,this.unsigned)},M.shru=M.shiftRightUnsigned,M.shr_u=M.shiftRightUnsigned,M.toSigned=function(){return this.unsigned?d(this.low,this.high,!1):this},M.toUnsigned=function(){return this.unsigned?this:d(this.low,this.high,!0)},M.toBytes=function(N){return N?this.toBytesLE():this.toBytesBE()},M.toBytesLE=function(){var N=this.high,x=this.low;return[255&x,x>>>8&255,x>>>16&255,x>>>24,255&N,N>>>8&255,N>>>16&255,N>>>24]},M.toBytesBE=function(){var N=this.high,x=this.low;return[N>>>24,N>>>16&255,N>>>8&255,255&N,x>>>24,x>>>16&255,x>>>8&255,255&x]},a.fromBytes=function(N,x,D){return D?a.fromBytesLE(N,x):a.fromBytesBE(N,x)},a.fromBytesLE=function(N,x){return new a(N[0]|N[1]<<8|N[2]<<16|N[3]<<24,N[4]|N[5]<<8|N[6]<<16|N[7]<<24,x)},a.fromBytesBE=function(N,x){return new a(N[4]<<24|N[5]<<16|N[6]<<8|N[7],N[0]<<24|N[1]<<16|N[2]<<8|N[3],x)}},3503:(r,s,a)=>{var o,l,c,h,f;o=a(3939),l=a(2151).utf8,c=a(652),h=a(2151).bin,(f=function(d,u){d.constructor==String?d=u&&u.encoding==="binary"?h.stringToBytes(d):l.stringToBytes(d):c(d)?d=Array.prototype.slice.call(d,0):Array.isArray(d)||d.constructor===Uint8Array||(d=d.toString());for(var p=o.bytesToWords(d),m=8*d.length,F=1732584193,g=-271733879,w=-1732584194,b=271733878,y=0;y<p.length;y++)p[y]=16711935&(p[y]<<8|p[y]>>>24)|4278255360&(p[y]<<24|p[y]>>>8);p[m>>>5]|=128<<m%32,p[14+(m+64>>>9<<4)]=m;var v=f._ff,T=f._gg,A=f._hh,C=f._ii;for(y=0;y<p.length;y+=16){var k=F,I=g,B=w,M=b;F=v(F,g,w,b,p[y+0],7,-680876936),b=v(b,F,g,w,p[y+1],12,-389564586),w=v(w,b,F,g,p[y+2],17,606105819),g=v(g,w,b,F,p[y+3],22,-1044525330),F=v(F,g,w,b,p[y+4],7,-176418897),b=v(b,F,g,w,p[y+5],12,1200080426),w=v(w,b,F,g,p[y+6],17,-1473231341),g=v(g,w,b,F,p[y+7],22,-45705983),F=v(F,g,w,b,p[y+8],7,1770035416),b=v(b,F,g,w,p[y+9],12,-1958414417),w=v(w,b,F,g,p[y+10],17,-42063),g=v(g,w,b,F,p[y+11],22,-1990404162),F=v(F,g,w,b,p[y+12],7,1804603682),b=v(b,F,g,w,p[y+13],12,-40341101),w=v(w,b,F,g,p[y+14],17,-1502002290),F=T(F,g=v(g,w,b,F,p[y+15],22,1236535329),w,b,p[y+1],5,-165796510),b=T(b,F,g,w,p[y+6],9,-1069501632),w=T(w,b,F,g,p[y+11],14,643717713),g=T(g,w,b,F,p[y+0],20,-373897302),F=T(F,g,w,b,p[y+5],5,-701558691),b=T(b,F,g,w,p[y+10],9,38016083),w=T(w,b,F,g,p[y+15],14,-660478335),g=T(g,w,b,F,p[y+4],20,-405537848),F=T(F,g,w,b,p[y+9],5,568446438),b=T(b,F,g,w,p[y+14],9,-1019803690),w=T(w,b,F,g,p[y+3],14,-187363961),g=T(g,w,b,F,p[y+8],20,1163531501),F=T(F,g,w,b,p[y+13],5,-1444681467),b=T(b,F,g,w,p[y+2],9,-51403784),w=T(w,b,F,g,p[y+7],14,1735328473),F=A(F,g=T(g,w,b,F,p[y+12],20,-1926607734),w,b,p[y+5],4,-378558),b=A(b,F,g,w,p[y+8],11,-2022574463),w=A(w,b,F,g,p[y+11],16,1839030562),g=A(g,w,b,F,p[y+14],23,-35309556),F=A(F,g,w,b,p[y+1],4,-1530992060),b=A(b,F,g,w,p[y+4],11,1272893353),w=A(w,b,F,g,p[y+7],16,-155497632),g=A(g,w,b,F,p[y+10],23,-1094730640),F=A(F,g,w,b,p[y+13],4,681279174),b=A(b,F,g,w,p[y+0],11,-358537222),w=A(w,b,F,g,p[y+3],16,-722521979),g=A(g,w,b,F,p[y+6],23,76029189),F=A(F,g,w,b,p[y+9],4,-640364487),b=A(b,F,g,w,p[y+12],11,-421815835),w=A(w,b,F,g,p[y+15],16,530742520),F=C(F,g=A(g,w,b,F,p[y+2],23,-995338651),w,b,p[y+0],6,-198630844),b=C(b,F,g,w,p[y+7],10,1126891415),w=C(w,b,F,g,p[y+14],15,-1416354905),g=C(g,w,b,F,p[y+5],21,-57434055),F=C(F,g,w,b,p[y+12],6,1700485571),b=C(b,F,g,w,p[y+3],10,-1894986606),w=C(w,b,F,g,p[y+10],15,-1051523),g=C(g,w,b,F,p[y+1],21,-2054922799),F=C(F,g,w,b,p[y+8],6,1873313359),b=C(b,F,g,w,p[y+15],10,-30611744),w=C(w,b,F,g,p[y+6],15,-1560198380),g=C(g,w,b,F,p[y+13],21,1309151649),F=C(F,g,w,b,p[y+4],6,-145523070),b=C(b,F,g,w,p[y+11],10,-1120210379),w=C(w,b,F,g,p[y+2],15,718787259),g=C(g,w,b,F,p[y+9],21,-343485551),F=F+k>>>0,g=g+I>>>0,w=w+B>>>0,b=b+M>>>0}return o.endian([F,g,w,b])})._ff=function(d,u,p,m,F,g,w){var b=d+(u&p|~u&m)+(F>>>0)+w;return(b<<g|b>>>32-g)+u},f._gg=function(d,u,p,m,F,g,w){var b=d+(u&m|p&~m)+(F>>>0)+w;return(b<<g|b>>>32-g)+u},f._hh=function(d,u,p,m,F,g,w){var b=d+(u^p^m)+(F>>>0)+w;return(b<<g|b>>>32-g)+u},f._ii=function(d,u,p,m,F,g,w){var b=d+(p^(u|~m))+(F>>>0)+w;return(b<<g|b>>>32-g)+u},f._blocksize=16,f._digestsize=16,r.exports=function(d,u){if(d==null)throw new Error("Illegal argument "+d);var p=o.wordsToBytes(f(d,u));return u&&u.asBytes?p:u&&u.asString?h.bytesToString(p):o.bytesToHex(p)}},652:r=>{function s(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}r.exports=function(a){return a!=null&&(s(a)||function(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&s(o.slice(0,0))}(a)||!!a._isBuffer)}},1668:(r,s,a)=>{var o={};(0,a(9805).assign)(o,a(3303),a(7083),a(9681)),r.exports=o},3303:(r,s,a)=>{var o=a(8411),l=a(9805),c=a(1996),h=a(4674),f=a(4442),d=Object.prototype.toString,u=0,p=-1,m=0,F=8;function g(b){if(!(this instanceof g))return new g(b);this.options=l.assign({level:p,method:F,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},b||{});var y=this.options;y.raw&&y.windowBits>0?y.windowBits=-y.windowBits:y.gzip&&y.windowBits>0&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var v=o.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(v!==u)throw new Error(h[v]);if(y.header&&o.deflateSetHeader(this.strm,y.header),y.dictionary){var T;if(T=typeof y.dictionary=="string"?c.string2buf(y.dictionary):d.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(v=o.deflateSetDictionary(this.strm,T))!==u)throw new Error(h[v]);this._dict_set=!0}}function w(b,y){var v=new g(y);if(v.push(b,!0),v.err)throw v.msg||h[v.err];return v.result}g.prototype.push=function(b,y){var v,T,A=this.strm,C=this.options.chunkSize;if(this.ended)return!1;T=y===~~y?y:y===!0?4:0,typeof b=="string"?A.input=c.string2buf(b):d.call(b)==="[object ArrayBuffer]"?A.input=new Uint8Array(b):A.input=b,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new l.Buf8(C),A.next_out=0,A.avail_out=C),(v=o.deflate(A,T))!==1&&v!==u)return this.onEnd(v),this.ended=!0,!1;A.avail_out!==0&&(A.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(l.shrinkBuf(A.output,A.next_out))):this.onData(l.shrinkBuf(A.output,A.next_out)))}while((A.avail_in>0||A.avail_out===0)&&v!==1);return T===4?(v=o.deflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===u):T!==2||(this.onEnd(u),A.avail_out=0,!0)},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},s.Deflate=g,s.deflate=w,s.deflateRaw=function(b,y){return(y=y||{}).raw=!0,w(b,y)},s.gzip=function(b,y){return(y=y||{}).gzip=!0,w(b,y)}},7083:(r,s,a)=>{var o=a(1447),l=a(9805),c=a(1996),h=a(9681),f=a(4674),d=a(4442),u=a(7414),p=Object.prototype.toString;function m(g){if(!(this instanceof m))return new m(g);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},g||{});var w=this.options;w.raw&&w.windowBits>=0&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(w.windowBits>=0&&w.windowBits<16)||g&&g.windowBits||(w.windowBits+=32),w.windowBits>15&&w.windowBits<48&&(15&w.windowBits||(w.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var b=o.inflateInit2(this.strm,w.windowBits);if(b!==h.Z_OK)throw new Error(f[b]);if(this.header=new u,o.inflateGetHeader(this.strm,this.header),w.dictionary&&(typeof w.dictionary=="string"?w.dictionary=c.string2buf(w.dictionary):p.call(w.dictionary)==="[object ArrayBuffer]"&&(w.dictionary=new Uint8Array(w.dictionary)),w.raw&&(b=o.inflateSetDictionary(this.strm,w.dictionary))!==h.Z_OK))throw new Error(f[b])}function F(g,w){var b=new m(w);if(b.push(g,!0),b.err)throw b.msg||f[b.err];return b.result}m.prototype.push=function(g,w){var b,y,v,T,A,C=this.strm,k=this.options.chunkSize,I=this.options.dictionary,B=!1;if(this.ended)return!1;y=w===~~w?w:w===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof g=="string"?C.input=c.binstring2buf(g):p.call(g)==="[object ArrayBuffer]"?C.input=new Uint8Array(g):C.input=g,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new l.Buf8(k),C.next_out=0,C.avail_out=k),(b=o.inflate(C,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&I&&(b=o.inflateSetDictionary(this.strm,I)),b===h.Z_BUF_ERROR&&B===!0&&(b=h.Z_OK,B=!1),b!==h.Z_STREAM_END&&b!==h.Z_OK)return this.onEnd(b),this.ended=!0,!1;C.next_out&&(C.avail_out!==0&&b!==h.Z_STREAM_END&&(C.avail_in!==0||y!==h.Z_FINISH&&y!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(v=c.utf8border(C.output,C.next_out),T=C.next_out-v,A=c.buf2string(C.output,v),C.next_out=T,C.avail_out=k-T,T&&l.arraySet(C.output,C.output,v,T,0),this.onData(A)):this.onData(l.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(B=!0)}while((C.avail_in>0||C.avail_out===0)&&b!==h.Z_STREAM_END);return b===h.Z_STREAM_END&&(y=h.Z_FINISH),y===h.Z_FINISH?(b=o.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===h.Z_OK):y!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),C.avail_out=0,!0)},m.prototype.onData=function(g){this.chunks.push(g)},m.prototype.onEnd=function(g){g===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Inflate=m,s.inflate=F,s.inflateRaw=function(g,w){return(w=w||{}).raw=!0,F(g,w)},s.ungzip=F},9805:(r,s)=>{var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function o(h,f){return Object.prototype.hasOwnProperty.call(h,f)}s.assign=function(h){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var d=f.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var u in d)o(d,u)&&(h[u]=d[u])}}return h},s.shrinkBuf=function(h,f){return h.length===f?h:h.subarray?h.subarray(0,f):(h.length=f,h)};var l={arraySet:function(h,f,d,u,p){if(f.subarray&&h.subarray)h.set(f.subarray(d,d+u),p);else for(var m=0;m<u;m++)h[p+m]=f[d+m]},flattenChunks:function(h){var f,d,u,p,m,F;for(u=0,f=0,d=h.length;f<d;f++)u+=h[f].length;for(F=new Uint8Array(u),p=0,f=0,d=h.length;f<d;f++)m=h[f],F.set(m,p),p+=m.length;return F}},c={arraySet:function(h,f,d,u,p){for(var m=0;m<u;m++)h[p+m]=f[d+m]},flattenChunks:function(h){return[].concat.apply([],h)}};s.setTyped=function(h){h?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,l)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,c))},s.setTyped(a)},1996:(r,s,a)=>{var o=a(9805),l=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var h=new o.Buf8(256),f=0;f<256;f++)h[f]=f>=252?6:f>=248?5:f>=240?4:f>=224?3:f>=192?2:1;function d(u,p){if(p<65534&&(u.subarray&&c||!u.subarray&&l))return String.fromCharCode.apply(null,o.shrinkBuf(u,p));for(var m="",F=0;F<p;F++)m+=String.fromCharCode(u[F]);return m}h[254]=h[254]=1,s.string2buf=function(u){var p,m,F,g,w,b=u.length,y=0;for(g=0;g<b;g++)(64512&(m=u.charCodeAt(g)))==55296&&g+1<b&&(64512&(F=u.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(F-56320),g++),y+=m<128?1:m<2048?2:m<65536?3:4;for(p=new o.Buf8(y),w=0,g=0;w<y;g++)(64512&(m=u.charCodeAt(g)))==55296&&g+1<b&&(64512&(F=u.charCodeAt(g+1)))==56320&&(m=65536+(m-55296<<10)+(F-56320),g++),m<128?p[w++]=m:m<2048?(p[w++]=192|m>>>6,p[w++]=128|63&m):m<65536?(p[w++]=224|m>>>12,p[w++]=128|m>>>6&63,p[w++]=128|63&m):(p[w++]=240|m>>>18,p[w++]=128|m>>>12&63,p[w++]=128|m>>>6&63,p[w++]=128|63&m);return p},s.buf2binstring=function(u){return d(u,u.length)},s.binstring2buf=function(u){for(var p=new o.Buf8(u.length),m=0,F=p.length;m<F;m++)p[m]=u.charCodeAt(m);return p},s.buf2string=function(u,p){var m,F,g,w,b=p||u.length,y=new Array(2*b);for(F=0,m=0;m<b;)if((g=u[m++])<128)y[F++]=g;else if((w=h[g])>4)y[F++]=65533,m+=w-1;else{for(g&=w===2?31:w===3?15:7;w>1&&m<b;)g=g<<6|63&u[m++],w--;w>1?y[F++]=65533:g<65536?y[F++]=g:(g-=65536,y[F++]=55296|g>>10&1023,y[F++]=56320|1023&g)}return d(y,F)},s.utf8border=function(u,p){var m;for((p=p||u.length)>u.length&&(p=u.length),m=p-1;m>=0&&(192&u[m])==128;)m--;return m<0||m===0?p:m+h[u[m]]>p?m:p}},3269:r=>{r.exports=function(s,a,o,l){for(var c=65535&s,h=s>>>16&65535,f=0;o!==0;){o-=f=o>2e3?2e3:o;do h=h+(c=c+a[l++]|0)|0;while(--f);c%=65521,h%=65521}return c|h<<16}},9681:r=>{r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},4823:r=>{var s=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();r.exports=function(a,o,l,c){var h=s,f=c+l;a^=-1;for(var d=c;d<f;d++)a=a>>>8^h[255&(a^o[d])];return~a}},8411:(r,s,a)=>{var o,l=a(9805),c=a(3665),h=a(3269),f=a(4823),d=a(4674),u=0,p=0,m=-2,F=2,g=8,w=286,b=30,y=19,v=2*w+1,T=15,A=3,C=258,k=C+A+1,I=42,B=103,M=113,N=666;function x(E,Y){return E.msg=d[Y],Y}function D(E){return(E<<1)-(E>4?9:0)}function S(E){for(var Y=E.length;--Y>=0;)E[Y]=0}function U(E){var Y=E.state,j=Y.pending;j>E.avail_out&&(j=E.avail_out),j!==0&&(l.arraySet(E.output,Y.pending_buf,Y.pending_out,j,E.next_out),E.next_out+=j,Y.pending_out+=j,E.total_out+=j,E.avail_out-=j,Y.pending-=j,Y.pending===0&&(Y.pending_out=0))}function O(E,Y){c._tr_flush_block(E,E.block_start>=0?E.block_start:-1,E.strstart-E.block_start,Y),E.block_start=E.strstart,U(E.strm)}function Q(E,Y){E.pending_buf[E.pending++]=Y}function K(E,Y){E.pending_buf[E.pending++]=Y>>>8&255,E.pending_buf[E.pending++]=255&Y}function G(E,Y,j,P){var fe=E.avail_in;return fe>P&&(fe=P),fe===0?0:(E.avail_in-=fe,l.arraySet(Y,E.input,E.next_in,fe,j),E.state.wrap===1?E.adler=h(E.adler,Y,fe,j):E.state.wrap===2&&(E.adler=f(E.adler,Y,fe,j)),E.next_in+=fe,E.total_in+=fe,fe)}function ne(E,Y){var j,P,fe=E.max_chain_length,oe=E.strstart,ce=E.prev_length,ue=E.nice_match,he=E.strstart>E.w_size-k?E.strstart-(E.w_size-k):0,ye=E.window,Ie=E.w_mask,_=E.prev,R=E.strstart+C,L=ye[oe+ce-1],W=ye[oe+ce];E.prev_length>=E.good_match&&(fe>>=2),ue>E.lookahead&&(ue=E.lookahead);do if(ye[(j=Y)+ce]===W&&ye[j+ce-1]===L&&ye[j]===ye[oe]&&ye[++j]===ye[oe+1]){oe+=2,j++;do;while(ye[++oe]===ye[++j]&&ye[++oe]===ye[++j]&&ye[++oe]===ye[++j]&&ye[++oe]===ye[++j]&&ye[++oe]===ye[++j]&&ye[++oe]===ye[++j]&&ye[++oe]===ye[++j]&&ye[++oe]===ye[++j]&&oe<R);if(P=C-(R-oe),oe=R-C,P>ce){if(E.match_start=Y,ce=P,P>=ue)break;L=ye[oe+ce-1],W=ye[oe+ce]}}while((Y=_[Y&Ie])>he&&--fe!=0);return ce<=E.lookahead?ce:E.lookahead}function H(E){var Y,j,P,fe,oe,ce=E.w_size;do{if(fe=E.window_size-E.lookahead-E.strstart,E.strstart>=ce+(ce-k)){l.arraySet(E.window,E.window,ce,ce,0),E.match_start-=ce,E.strstart-=ce,E.block_start-=ce,Y=j=E.hash_size;do P=E.head[--Y],E.head[Y]=P>=ce?P-ce:0;while(--j);Y=j=ce;do P=E.prev[--Y],E.prev[Y]=P>=ce?P-ce:0;while(--j);fe+=ce}if(E.strm.avail_in===0)break;if(j=G(E.strm,E.window,E.strstart+E.lookahead,fe),E.lookahead+=j,E.lookahead+E.insert>=A)for(oe=E.strstart-E.insert,E.ins_h=E.window[oe],E.ins_h=(E.ins_h<<E.hash_shift^E.window[oe+1])&E.hash_mask;E.insert&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[oe+A-1])&E.hash_mask,E.prev[oe&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=oe,oe++,E.insert--,!(E.lookahead+E.insert<A)););}while(E.lookahead<k&&E.strm.avail_in!==0)}function $(E,Y){for(var j,P;;){if(E.lookahead<k){if(H(E),E.lookahead<k&&Y===u)return 1;if(E.lookahead===0)break}if(j=0,E.lookahead>=A&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+A-1])&E.hash_mask,j=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),j!==0&&E.strstart-j<=E.w_size-k&&(E.match_length=ne(E,j)),E.match_length>=A)if(P=c._tr_tally(E,E.strstart-E.match_start,E.match_length-A),E.lookahead-=E.match_length,E.match_length<=E.max_lazy_match&&E.lookahead>=A){E.match_length--;do E.strstart++,E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+A-1])&E.hash_mask,j=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart;while(--E.match_length!=0);E.strstart++}else E.strstart+=E.match_length,E.match_length=0,E.ins_h=E.window[E.strstart],E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+1])&E.hash_mask;else P=c._tr_tally(E,0,E.window[E.strstart]),E.lookahead--,E.strstart++;if(P&&(O(E,!1),E.strm.avail_out===0))return 1}return E.insert=E.strstart<A-1?E.strstart:A-1,Y===4?(O(E,!0),E.strm.avail_out===0?3:4):E.last_lit&&(O(E,!1),E.strm.avail_out===0)?1:2}function X(E,Y){for(var j,P,fe;;){if(E.lookahead<k){if(H(E),E.lookahead<k&&Y===u)return 1;if(E.lookahead===0)break}if(j=0,E.lookahead>=A&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+A-1])&E.hash_mask,j=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart),E.prev_length=E.match_length,E.prev_match=E.match_start,E.match_length=A-1,j!==0&&E.prev_length<E.max_lazy_match&&E.strstart-j<=E.w_size-k&&(E.match_length=ne(E,j),E.match_length<=5&&(E.strategy===1||E.match_length===A&&E.strstart-E.match_start>4096)&&(E.match_length=A-1)),E.prev_length>=A&&E.match_length<=E.prev_length){fe=E.strstart+E.lookahead-A,P=c._tr_tally(E,E.strstart-1-E.prev_match,E.prev_length-A),E.lookahead-=E.prev_length-1,E.prev_length-=2;do++E.strstart<=fe&&(E.ins_h=(E.ins_h<<E.hash_shift^E.window[E.strstart+A-1])&E.hash_mask,j=E.prev[E.strstart&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=E.strstart);while(--E.prev_length!=0);if(E.match_available=0,E.match_length=A-1,E.strstart++,P&&(O(E,!1),E.strm.avail_out===0))return 1}else if(E.match_available){if((P=c._tr_tally(E,0,E.window[E.strstart-1]))&&O(E,!1),E.strstart++,E.lookahead--,E.strm.avail_out===0)return 1}else E.match_available=1,E.strstart++,E.lookahead--}return E.match_available&&(P=c._tr_tally(E,0,E.window[E.strstart-1]),E.match_available=0),E.insert=E.strstart<A-1?E.strstart:A-1,Y===4?(O(E,!0),E.strm.avail_out===0?3:4):E.last_lit&&(O(E,!1),E.strm.avail_out===0)?1:2}function ee(E,Y,j,P,fe){this.good_length=E,this.max_lazy=Y,this.nice_length=j,this.max_chain=P,this.func=fe}function te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*v),this.dyn_dtree=new l.Buf16(2*(2*b+1)),this.bl_tree=new l.Buf16(2*(2*y+1)),S(this.dyn_ltree),S(this.dyn_dtree),S(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(T+1),this.heap=new l.Buf16(2*w+1),S(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*w+1),S(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function be(E){var Y;return E&&E.state?(E.total_in=E.total_out=0,E.data_type=F,(Y=E.state).pending=0,Y.pending_out=0,Y.wrap<0&&(Y.wrap=-Y.wrap),Y.status=Y.wrap?I:M,E.adler=Y.wrap===2?0:1,Y.last_flush=u,c._tr_init(Y),p):x(E,m)}function q(E){var Y,j=be(E);return j===p&&((Y=E.state).window_size=2*Y.w_size,S(Y.head),Y.max_lazy_match=o[Y.level].max_lazy,Y.good_match=o[Y.level].good_length,Y.nice_match=o[Y.level].nice_length,Y.max_chain_length=o[Y.level].max_chain,Y.strstart=0,Y.block_start=0,Y.lookahead=0,Y.insert=0,Y.match_length=Y.prev_length=A-1,Y.match_available=0,Y.ins_h=0),j}function J(E,Y,j,P,fe,oe){if(!E)return m;var ce=1;if(Y===-1&&(Y=6),P<0?(ce=0,P=-P):P>15&&(ce=2,P-=16),fe<1||fe>9||j!==g||P<8||P>15||Y<0||Y>9||oe<0||oe>4)return x(E,m);P===8&&(P=9);var ue=new te;return E.state=ue,ue.strm=E,ue.wrap=ce,ue.gzhead=null,ue.w_bits=P,ue.w_size=1<<ue.w_bits,ue.w_mask=ue.w_size-1,ue.hash_bits=fe+7,ue.hash_size=1<<ue.hash_bits,ue.hash_mask=ue.hash_size-1,ue.hash_shift=~~((ue.hash_bits+A-1)/A),ue.window=new l.Buf8(2*ue.w_size),ue.head=new l.Buf16(ue.hash_size),ue.prev=new l.Buf16(ue.w_size),ue.lit_bufsize=1<<fe+6,ue.pending_buf_size=4*ue.lit_bufsize,ue.pending_buf=new l.Buf8(ue.pending_buf_size),ue.d_buf=1*ue.lit_bufsize,ue.l_buf=3*ue.lit_bufsize,ue.level=Y,ue.strategy=oe,ue.method=j,q(E)}o=[new ee(0,0,0,0,function(E,Y){var j=65535;for(j>E.pending_buf_size-5&&(j=E.pending_buf_size-5);;){if(E.lookahead<=1){if(H(E),E.lookahead===0&&Y===u)return 1;if(E.lookahead===0)break}E.strstart+=E.lookahead,E.lookahead=0;var P=E.block_start+j;if((E.strstart===0||E.strstart>=P)&&(E.lookahead=E.strstart-P,E.strstart=P,O(E,!1),E.strm.avail_out===0)||E.strstart-E.block_start>=E.w_size-k&&(O(E,!1),E.strm.avail_out===0))return 1}return E.insert=0,Y===4?(O(E,!0),E.strm.avail_out===0?3:4):(E.strstart>E.block_start&&(O(E,!1),E.strm.avail_out),1)}),new ee(4,4,8,4,$),new ee(4,5,16,8,$),new ee(4,6,32,32,$),new ee(4,4,16,16,X),new ee(8,16,32,32,X),new ee(8,16,128,128,X),new ee(8,32,128,256,X),new ee(32,128,258,1024,X),new ee(32,258,258,4096,X)],s.deflateInit=function(E,Y){return J(E,Y,g,15,8,0)},s.deflateInit2=J,s.deflateReset=q,s.deflateResetKeep=be,s.deflateSetHeader=function(E,Y){return E&&E.state?E.state.wrap!==2?m:(E.state.gzhead=Y,p):m},s.deflate=function(E,Y){var j,P,fe,oe;if(!E||!E.state||Y>5||Y<0)return E?x(E,m):m;if(P=E.state,!E.output||!E.input&&E.avail_in!==0||P.status===N&&Y!==4)return x(E,E.avail_out===0?-5:m);if(P.strm=E,j=P.last_flush,P.last_flush=Y,P.status===I)if(P.wrap===2)E.adler=0,Q(P,31),Q(P,139),Q(P,8),P.gzhead?(Q(P,(P.gzhead.text?1:0)+(P.gzhead.hcrc?2:0)+(P.gzhead.extra?4:0)+(P.gzhead.name?8:0)+(P.gzhead.comment?16:0)),Q(P,255&P.gzhead.time),Q(P,P.gzhead.time>>8&255),Q(P,P.gzhead.time>>16&255),Q(P,P.gzhead.time>>24&255),Q(P,P.level===9?2:P.strategy>=2||P.level<2?4:0),Q(P,255&P.gzhead.os),P.gzhead.extra&&P.gzhead.extra.length&&(Q(P,255&P.gzhead.extra.length),Q(P,P.gzhead.extra.length>>8&255)),P.gzhead.hcrc&&(E.adler=f(E.adler,P.pending_buf,P.pending,0)),P.gzindex=0,P.status=69):(Q(P,0),Q(P,0),Q(P,0),Q(P,0),Q(P,0),Q(P,P.level===9?2:P.strategy>=2||P.level<2?4:0),Q(P,3),P.status=M);else{var ce=g+(P.w_bits-8<<4)<<8;ce|=(P.strategy>=2||P.level<2?0:P.level<6?1:P.level===6?2:3)<<6,P.strstart!==0&&(ce|=32),ce+=31-ce%31,P.status=M,K(P,ce),P.strstart!==0&&(K(P,E.adler>>>16),K(P,65535&E.adler)),E.adler=1}if(P.status===69)if(P.gzhead.extra){for(fe=P.pending;P.gzindex<(65535&P.gzhead.extra.length)&&(P.pending!==P.pending_buf_size||(P.gzhead.hcrc&&P.pending>fe&&(E.adler=f(E.adler,P.pending_buf,P.pending-fe,fe)),U(E),fe=P.pending,P.pending!==P.pending_buf_size));)Q(P,255&P.gzhead.extra[P.gzindex]),P.gzindex++;P.gzhead.hcrc&&P.pending>fe&&(E.adler=f(E.adler,P.pending_buf,P.pending-fe,fe)),P.gzindex===P.gzhead.extra.length&&(P.gzindex=0,P.status=73)}else P.status=73;if(P.status===73)if(P.gzhead.name){fe=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>fe&&(E.adler=f(E.adler,P.pending_buf,P.pending-fe,fe)),U(E),fe=P.pending,P.pending===P.pending_buf_size)){oe=1;break}oe=P.gzindex<P.gzhead.name.length?255&P.gzhead.name.charCodeAt(P.gzindex++):0,Q(P,oe)}while(oe!==0);P.gzhead.hcrc&&P.pending>fe&&(E.adler=f(E.adler,P.pending_buf,P.pending-fe,fe)),oe===0&&(P.gzindex=0,P.status=91)}else P.status=91;if(P.status===91)if(P.gzhead.comment){fe=P.pending;do{if(P.pending===P.pending_buf_size&&(P.gzhead.hcrc&&P.pending>fe&&(E.adler=f(E.adler,P.pending_buf,P.pending-fe,fe)),U(E),fe=P.pending,P.pending===P.pending_buf_size)){oe=1;break}oe=P.gzindex<P.gzhead.comment.length?255&P.gzhead.comment.charCodeAt(P.gzindex++):0,Q(P,oe)}while(oe!==0);P.gzhead.hcrc&&P.pending>fe&&(E.adler=f(E.adler,P.pending_buf,P.pending-fe,fe)),oe===0&&(P.status=B)}else P.status=B;if(P.status===B&&(P.gzhead.hcrc?(P.pending+2>P.pending_buf_size&&U(E),P.pending+2<=P.pending_buf_size&&(Q(P,255&E.adler),Q(P,E.adler>>8&255),E.adler=0,P.status=M)):P.status=M),P.pending!==0){if(U(E),E.avail_out===0)return P.last_flush=-1,p}else if(E.avail_in===0&&D(Y)<=D(j)&&Y!==4)return x(E,-5);if(P.status===N&&E.avail_in!==0)return x(E,-5);if(E.avail_in!==0||P.lookahead!==0||Y!==u&&P.status!==N){var ue=P.strategy===2?function(he,ye){for(var Ie;;){if(he.lookahead===0&&(H(he),he.lookahead===0)){if(ye===u)return 1;break}if(he.match_length=0,Ie=c._tr_tally(he,0,he.window[he.strstart]),he.lookahead--,he.strstart++,Ie&&(O(he,!1),he.strm.avail_out===0))return 1}return he.insert=0,ye===4?(O(he,!0),he.strm.avail_out===0?3:4):he.last_lit&&(O(he,!1),he.strm.avail_out===0)?1:2}(P,Y):P.strategy===3?function(he,ye){for(var Ie,_,R,L,W=he.window;;){if(he.lookahead<=C){if(H(he),he.lookahead<=C&&ye===u)return 1;if(he.lookahead===0)break}if(he.match_length=0,he.lookahead>=A&&he.strstart>0&&(_=W[R=he.strstart-1])===W[++R]&&_===W[++R]&&_===W[++R]){L=he.strstart+C;do;while(_===W[++R]&&_===W[++R]&&_===W[++R]&&_===W[++R]&&_===W[++R]&&_===W[++R]&&_===W[++R]&&_===W[++R]&&R<L);he.match_length=C-(L-R),he.match_length>he.lookahead&&(he.match_length=he.lookahead)}if(he.match_length>=A?(Ie=c._tr_tally(he,1,he.match_length-A),he.lookahead-=he.match_length,he.strstart+=he.match_length,he.match_length=0):(Ie=c._tr_tally(he,0,he.window[he.strstart]),he.lookahead--,he.strstart++),Ie&&(O(he,!1),he.strm.avail_out===0))return 1}return he.insert=0,ye===4?(O(he,!0),he.strm.avail_out===0?3:4):he.last_lit&&(O(he,!1),he.strm.avail_out===0)?1:2}(P,Y):o[P.level].func(P,Y);if(ue!==3&&ue!==4||(P.status=N),ue===1||ue===3)return E.avail_out===0&&(P.last_flush=-1),p;if(ue===2&&(Y===1?c._tr_align(P):Y!==5&&(c._tr_stored_block(P,0,0,!1),Y===3&&(S(P.head),P.lookahead===0&&(P.strstart=0,P.block_start=0,P.insert=0))),U(E),E.avail_out===0))return P.last_flush=-1,p}return Y!==4?p:P.wrap<=0?1:(P.wrap===2?(Q(P,255&E.adler),Q(P,E.adler>>8&255),Q(P,E.adler>>16&255),Q(P,E.adler>>24&255),Q(P,255&E.total_in),Q(P,E.total_in>>8&255),Q(P,E.total_in>>16&255),Q(P,E.total_in>>24&255)):(K(P,E.adler>>>16),K(P,65535&E.adler)),U(E),P.wrap>0&&(P.wrap=-P.wrap),P.pending!==0?p:1)},s.deflateEnd=function(E){var Y;return E&&E.state?(Y=E.state.status)!==I&&Y!==69&&Y!==73&&Y!==91&&Y!==B&&Y!==M&&Y!==N?x(E,m):(E.state=null,Y===M?x(E,-3):p):m},s.deflateSetDictionary=function(E,Y){var j,P,fe,oe,ce,ue,he,ye,Ie=Y.length;if(!E||!E.state||(oe=(j=E.state).wrap)===2||oe===1&&j.status!==I||j.lookahead)return m;for(oe===1&&(E.adler=h(E.adler,Y,Ie,0)),j.wrap=0,Ie>=j.w_size&&(oe===0&&(S(j.head),j.strstart=0,j.block_start=0,j.insert=0),ye=new l.Buf8(j.w_size),l.arraySet(ye,Y,Ie-j.w_size,j.w_size,0),Y=ye,Ie=j.w_size),ce=E.avail_in,ue=E.next_in,he=E.input,E.avail_in=Ie,E.next_in=0,E.input=Y,H(j);j.lookahead>=A;){P=j.strstart,fe=j.lookahead-(A-1);do j.ins_h=(j.ins_h<<j.hash_shift^j.window[P+A-1])&j.hash_mask,j.prev[P&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=P,P++;while(--fe);j.strstart=P,j.lookahead=A-1,H(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=A-1,j.match_available=0,E.next_in=ue,E.input=he,E.avail_in=ce,j.wrap=oe,p},s.deflateInfo="pako deflate (from Nodeca project)"},7414:r=>{r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},7293:r=>{r.exports=function(s,a){var o,l,c,h,f,d,u,p,m,F,g,w,b,y,v,T,A,C,k,I,B,M,N,x,D;o=s.state,l=s.next_in,x=s.input,c=l+(s.avail_in-5),h=s.next_out,D=s.output,f=h-(a-s.avail_out),d=h+(s.avail_out-257),u=o.dmax,p=o.wsize,m=o.whave,F=o.wnext,g=o.window,w=o.hold,b=o.bits,y=o.lencode,v=o.distcode,T=(1<<o.lenbits)-1,A=(1<<o.distbits)-1;e:do{b<15&&(w+=x[l++]<<b,b+=8,w+=x[l++]<<b,b+=8),C=y[w&T];t:for(;;){if(w>>>=k=C>>>24,b-=k,(k=C>>>16&255)==0)D[h++]=65535&C;else{if(!(16&k)){if(64&k){if(32&k){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}C=y[(65535&C)+(w&(1<<k)-1)];continue t}for(I=65535&C,(k&=15)&&(b<k&&(w+=x[l++]<<b,b+=8),I+=w&(1<<k)-1,w>>>=k,b-=k),b<15&&(w+=x[l++]<<b,b+=8,w+=x[l++]<<b,b+=8),C=v[w&A];;){if(w>>>=k=C>>>24,b-=k,16&(k=C>>>16&255)){if(B=65535&C,b<(k&=15)&&(w+=x[l++]<<b,(b+=8)<k&&(w+=x[l++]<<b,b+=8)),(B+=w&(1<<k)-1)>u){s.msg="invalid distance too far back",o.mode=30;break e}if(w>>>=k,b-=k,B>(k=h-f)){if((k=B-k)>m&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(M=0,N=g,F===0){if(M+=p-k,k<I){I-=k;do D[h++]=g[M++];while(--k);M=h-B,N=D}}else if(F<k){if(M+=p+F-k,(k-=F)<I){I-=k;do D[h++]=g[M++];while(--k);if(M=0,F<I){I-=k=F;do D[h++]=g[M++];while(--k);M=h-B,N=D}}}else if(M+=F-k,k<I){I-=k;do D[h++]=g[M++];while(--k);M=h-B,N=D}for(;I>2;)D[h++]=N[M++],D[h++]=N[M++],D[h++]=N[M++],I-=3;I&&(D[h++]=N[M++],I>1&&(D[h++]=N[M++]))}else{M=h-B;do D[h++]=D[M++],D[h++]=D[M++],D[h++]=D[M++],I-=3;while(I>2);I&&(D[h++]=D[M++],I>1&&(D[h++]=D[M++]))}break}if(64&k){s.msg="invalid distance code",o.mode=30;break e}C=v[(65535&C)+(w&(1<<k)-1)]}}break}}while(l<c&&h<d);l-=I=b>>3,w&=(1<<(b-=I<<3))-1,s.next_in=l,s.next_out=h,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=h<d?d-h+257:257-(h-d),o.hold=w,o.bits=b}},1447:(r,s,a)=>{var o=a(9805),l=a(3269),c=a(4823),h=a(7293),f=a(1998),d=0,u=-2,p=1,m=12,F=30,g=852,w=592;function b(x){return(x>>>24&255)+(x>>>8&65280)+((65280&x)<<8)+((255&x)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(x){var D;return x&&x.state?(D=x.state,x.total_in=x.total_out=D.total=0,x.msg="",D.wrap&&(x.adler=1&D.wrap),D.mode=p,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new o.Buf32(g),D.distcode=D.distdyn=new o.Buf32(w),D.sane=1,D.back=-1,d):u}function T(x){var D;return x&&x.state?((D=x.state).wsize=0,D.whave=0,D.wnext=0,v(x)):u}function A(x,D){var S,U;return x&&x.state?(U=x.state,D<0?(S=0,D=-D):(S=1+(D>>4),D<48&&(D&=15)),D&&(D<8||D>15)?u:(U.window!==null&&U.wbits!==D&&(U.window=null),U.wrap=S,U.wbits=D,T(x))):u}function C(x,D){var S,U;return x?(U=new y,x.state=U,U.window=null,(S=A(x,D))!==d&&(x.state=null),S):u}var k,I,B=!0;function M(x){if(B){var D;for(k=new o.Buf32(512),I=new o.Buf32(32),D=0;D<144;)x.lens[D++]=8;for(;D<256;)x.lens[D++]=9;for(;D<280;)x.lens[D++]=7;for(;D<288;)x.lens[D++]=8;for(f(1,x.lens,0,288,k,0,x.work,{bits:9}),D=0;D<32;)x.lens[D++]=5;f(2,x.lens,0,32,I,0,x.work,{bits:5}),B=!1}x.lencode=k,x.lenbits=9,x.distcode=I,x.distbits=5}function N(x,D,S,U){var O,Q=x.state;return Q.window===null&&(Q.wsize=1<<Q.wbits,Q.wnext=0,Q.whave=0,Q.window=new o.Buf8(Q.wsize)),U>=Q.wsize?(o.arraySet(Q.window,D,S-Q.wsize,Q.wsize,0),Q.wnext=0,Q.whave=Q.wsize):((O=Q.wsize-Q.wnext)>U&&(O=U),o.arraySet(Q.window,D,S-U,O,Q.wnext),(U-=O)?(o.arraySet(Q.window,D,S-U,U,0),Q.wnext=U,Q.whave=Q.wsize):(Q.wnext+=O,Q.wnext===Q.wsize&&(Q.wnext=0),Q.whave<Q.wsize&&(Q.whave+=O))),0}s.inflateReset=T,s.inflateReset2=A,s.inflateResetKeep=v,s.inflateInit=function(x){return C(x,15)},s.inflateInit2=C,s.inflate=function(x,D){var S,U,O,Q,K,G,ne,H,$,X,ee,te,be,q,J,E,Y,j,P,fe,oe,ce,ue,he,ye=0,Ie=new o.Buf8(4),_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!x||!x.state||!x.output||!x.input&&x.avail_in!==0)return u;(S=x.state).mode===m&&(S.mode=13),K=x.next_out,O=x.output,ne=x.avail_out,Q=x.next_in,U=x.input,G=x.avail_in,H=S.hold,$=S.bits,X=G,ee=ne,ce=d;e:for(;;)switch(S.mode){case p:if(S.wrap===0){S.mode=13;break}for(;$<16;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}if(2&S.wrap&&H===35615){S.check=0,Ie[0]=255&H,Ie[1]=H>>>8&255,S.check=c(S.check,Ie,2,0),H=0,$=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&H)<<8)+(H>>8))%31){x.msg="incorrect header check",S.mode=F;break}if((15&H)!=8){x.msg="unknown compression method",S.mode=F;break}if($-=4,oe=8+(15&(H>>>=4)),S.wbits===0)S.wbits=oe;else if(oe>S.wbits){x.msg="invalid window size",S.mode=F;break}S.dmax=1<<oe,x.adler=S.check=1,S.mode=512&H?10:m,H=0,$=0;break;case 2:for(;$<16;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}if(S.flags=H,(255&S.flags)!=8){x.msg="unknown compression method",S.mode=F;break}if(57344&S.flags){x.msg="unknown header flags set",S.mode=F;break}S.head&&(S.head.text=H>>8&1),512&S.flags&&(Ie[0]=255&H,Ie[1]=H>>>8&255,S.check=c(S.check,Ie,2,0)),H=0,$=0,S.mode=3;case 3:for(;$<32;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}S.head&&(S.head.time=H),512&S.flags&&(Ie[0]=255&H,Ie[1]=H>>>8&255,Ie[2]=H>>>16&255,Ie[3]=H>>>24&255,S.check=c(S.check,Ie,4,0)),H=0,$=0,S.mode=4;case 4:for(;$<16;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}S.head&&(S.head.xflags=255&H,S.head.os=H>>8),512&S.flags&&(Ie[0]=255&H,Ie[1]=H>>>8&255,S.check=c(S.check,Ie,2,0)),H=0,$=0,S.mode=5;case 5:if(1024&S.flags){for(;$<16;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}S.length=H,S.head&&(S.head.extra_len=H),512&S.flags&&(Ie[0]=255&H,Ie[1]=H>>>8&255,S.check=c(S.check,Ie,2,0)),H=0,$=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&((te=S.length)>G&&(te=G),te&&(S.head&&(oe=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),o.arraySet(S.head.extra,U,Q,te,oe)),512&S.flags&&(S.check=c(S.check,U,te,Q)),G-=te,Q+=te,S.length-=te),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(G===0)break e;te=0;do oe=U[Q+te++],S.head&&oe&&S.length<65536&&(S.head.name+=String.fromCharCode(oe));while(oe&&te<G);if(512&S.flags&&(S.check=c(S.check,U,te,Q)),G-=te,Q+=te,oe)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(G===0)break e;te=0;do oe=U[Q+te++],S.head&&oe&&S.length<65536&&(S.head.comment+=String.fromCharCode(oe));while(oe&&te<G);if(512&S.flags&&(S.check=c(S.check,U,te,Q)),G-=te,Q+=te,oe)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;$<16;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}if(H!==(65535&S.check)){x.msg="header crc mismatch",S.mode=F;break}H=0,$=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),x.adler=S.check=0,S.mode=m;break;case 10:for(;$<32;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}x.adler=S.check=b(H),H=0,$=0,S.mode=11;case 11:if(S.havedict===0)return x.next_out=K,x.avail_out=ne,x.next_in=Q,x.avail_in=G,S.hold=H,S.bits=$,2;x.adler=S.check=1,S.mode=m;case m:if(D===5||D===6)break e;case 13:if(S.last){H>>>=7&$,$-=7&$,S.mode=27;break}for(;$<3;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}switch(S.last=1&H,$-=1,3&(H>>>=1)){case 0:S.mode=14;break;case 1:if(M(S),S.mode=20,D===6){H>>>=2,$-=2;break e}break;case 2:S.mode=17;break;case 3:x.msg="invalid block type",S.mode=F}H>>>=2,$-=2;break;case 14:for(H>>>=7&$,$-=7&$;$<32;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}if((65535&H)!=(H>>>16^65535)){x.msg="invalid stored block lengths",S.mode=F;break}if(S.length=65535&H,H=0,$=0,S.mode=15,D===6)break e;case 15:S.mode=16;case 16:if(te=S.length){if(te>G&&(te=G),te>ne&&(te=ne),te===0)break e;o.arraySet(O,U,Q,te,K),G-=te,Q+=te,ne-=te,K+=te,S.length-=te;break}S.mode=m;break;case 17:for(;$<14;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}if(S.nlen=257+(31&H),H>>>=5,$-=5,S.ndist=1+(31&H),H>>>=5,$-=5,S.ncode=4+(15&H),H>>>=4,$-=4,S.nlen>286||S.ndist>30){x.msg="too many length or distance symbols",S.mode=F;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;$<3;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}S.lens[_[S.have++]]=7&H,H>>>=3,$-=3}for(;S.have<19;)S.lens[_[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,ue={bits:S.lenbits},ce=f(0,S.lens,0,19,S.lencode,0,S.work,ue),S.lenbits=ue.bits,ce){x.msg="invalid code lengths set",S.mode=F;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;E=(ye=S.lencode[H&(1<<S.lenbits)-1])>>>16&255,Y=65535&ye,!((J=ye>>>24)<=$);){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}if(Y<16)H>>>=J,$-=J,S.lens[S.have++]=Y;else{if(Y===16){for(he=J+2;$<he;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}if(H>>>=J,$-=J,S.have===0){x.msg="invalid bit length repeat",S.mode=F;break}oe=S.lens[S.have-1],te=3+(3&H),H>>>=2,$-=2}else if(Y===17){for(he=J+3;$<he;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}$-=J,oe=0,te=3+(7&(H>>>=J)),H>>>=3,$-=3}else{for(he=J+7;$<he;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}$-=J,oe=0,te=11+(127&(H>>>=J)),H>>>=7,$-=7}if(S.have+te>S.nlen+S.ndist){x.msg="invalid bit length repeat",S.mode=F;break}for(;te--;)S.lens[S.have++]=oe}}if(S.mode===F)break;if(S.lens[256]===0){x.msg="invalid code -- missing end-of-block",S.mode=F;break}if(S.lenbits=9,ue={bits:S.lenbits},ce=f(1,S.lens,0,S.nlen,S.lencode,0,S.work,ue),S.lenbits=ue.bits,ce){x.msg="invalid literal/lengths set",S.mode=F;break}if(S.distbits=6,S.distcode=S.distdyn,ue={bits:S.distbits},ce=f(2,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,ue),S.distbits=ue.bits,ce){x.msg="invalid distances set",S.mode=F;break}if(S.mode=20,D===6)break e;case 20:S.mode=21;case 21:if(G>=6&&ne>=258){x.next_out=K,x.avail_out=ne,x.next_in=Q,x.avail_in=G,S.hold=H,S.bits=$,h(x,ee),K=x.next_out,O=x.output,ne=x.avail_out,Q=x.next_in,U=x.input,G=x.avail_in,H=S.hold,$=S.bits,S.mode===m&&(S.back=-1);break}for(S.back=0;E=(ye=S.lencode[H&(1<<S.lenbits)-1])>>>16&255,Y=65535&ye,!((J=ye>>>24)<=$);){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}if(E&&!(240&E)){for(j=J,P=E,fe=Y;E=(ye=S.lencode[fe+((H&(1<<j+P)-1)>>j)])>>>16&255,Y=65535&ye,!(j+(J=ye>>>24)<=$);){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}H>>>=j,$-=j,S.back+=j}if(H>>>=J,$-=J,S.back+=J,S.length=Y,E===0){S.mode=26;break}if(32&E){S.back=-1,S.mode=m;break}if(64&E){x.msg="invalid literal/length code",S.mode=F;break}S.extra=15&E,S.mode=22;case 22:if(S.extra){for(he=S.extra;$<he;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}S.length+=H&(1<<S.extra)-1,H>>>=S.extra,$-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;E=(ye=S.distcode[H&(1<<S.distbits)-1])>>>16&255,Y=65535&ye,!((J=ye>>>24)<=$);){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}if(!(240&E)){for(j=J,P=E,fe=Y;E=(ye=S.distcode[fe+((H&(1<<j+P)-1)>>j)])>>>16&255,Y=65535&ye,!(j+(J=ye>>>24)<=$);){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}H>>>=j,$-=j,S.back+=j}if(H>>>=J,$-=J,S.back+=J,64&E){x.msg="invalid distance code",S.mode=F;break}S.offset=Y,S.extra=15&E,S.mode=24;case 24:if(S.extra){for(he=S.extra;$<he;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}S.offset+=H&(1<<S.extra)-1,H>>>=S.extra,$-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){x.msg="invalid distance too far back",S.mode=F;break}S.mode=25;case 25:if(ne===0)break e;if(te=ee-ne,S.offset>te){if((te=S.offset-te)>S.whave&&S.sane){x.msg="invalid distance too far back",S.mode=F;break}te>S.wnext?(te-=S.wnext,be=S.wsize-te):be=S.wnext-te,te>S.length&&(te=S.length),q=S.window}else q=O,be=K-S.offset,te=S.length;te>ne&&(te=ne),ne-=te,S.length-=te;do O[K++]=q[be++];while(--te);S.length===0&&(S.mode=21);break;case 26:if(ne===0)break e;O[K++]=S.length,ne--,S.mode=21;break;case 27:if(S.wrap){for(;$<32;){if(G===0)break e;G--,H|=U[Q++]<<$,$+=8}if(ee-=ne,x.total_out+=ee,S.total+=ee,ee&&(x.adler=S.check=S.flags?c(S.check,O,ee,K-ee):l(S.check,O,ee,K-ee)),ee=ne,(S.flags?H:b(H))!==S.check){x.msg="incorrect data check",S.mode=F;break}H=0,$=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;$<32;){if(G===0)break e;G--,H+=U[Q++]<<$,$+=8}if(H!==(4294967295&S.total)){x.msg="incorrect length check",S.mode=F;break}H=0,$=0}S.mode=29;case 29:ce=1;break e;case F:ce=-3;break e;case 31:return-4;default:return u}return x.next_out=K,x.avail_out=ne,x.next_in=Q,x.avail_in=G,S.hold=H,S.bits=$,(S.wsize||ee!==x.avail_out&&S.mode<F&&(S.mode<27||D!==4))&&N(x,x.output,x.next_out,ee-x.avail_out)?(S.mode=31,-4):(X-=x.avail_in,ee-=x.avail_out,x.total_in+=X,x.total_out+=ee,S.total+=ee,S.wrap&&ee&&(x.adler=S.check=S.flags?c(S.check,O,ee,x.next_out-ee):l(S.check,O,ee,x.next_out-ee)),x.data_type=S.bits+(S.last?64:0)+(S.mode===m?128:0)+(S.mode===20||S.mode===15?256:0),(X===0&&ee===0||D===4)&&ce===d&&(ce=-5),ce)},s.inflateEnd=function(x){if(!x||!x.state)return u;var D=x.state;return D.window&&(D.window=null),x.state=null,d},s.inflateGetHeader=function(x,D){var S;return x&&x.state&&2&(S=x.state).wrap?(S.head=D,D.done=!1,d):u},s.inflateSetDictionary=function(x,D){var S,U=D.length;return x&&x.state?(S=x.state).wrap!==0&&S.mode!==11?u:S.mode===11&&l(1,D,U,0)!==S.check?-3:N(x,D,U,U)?(S.mode=31,-4):(S.havedict=1,d):u},s.inflateInfo="pako inflate (from Nodeca project)"},1998:(r,s,a)=>{var o=a(9805),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,u,p,m,F,g,w,b){var y,v,T,A,C,k,I,B,M,N=b.bits,x=0,D=0,S=0,U=0,O=0,Q=0,K=0,G=0,ne=0,H=0,$=null,X=0,ee=new o.Buf16(16),te=new o.Buf16(16),be=null,q=0;for(x=0;x<=15;x++)ee[x]=0;for(D=0;D<m;D++)ee[u[p+D]]++;for(O=N,U=15;U>=1&&ee[U]===0;U--);if(O>U&&(O=U),U===0)return F[g++]=20971520,F[g++]=20971520,b.bits=1,0;for(S=1;S<U&&ee[S]===0;S++);for(O<S&&(O=S),G=1,x=1;x<=15;x++)if(G<<=1,(G-=ee[x])<0)return-1;if(G>0&&(d===0||U!==1))return-1;for(te[1]=0,x=1;x<15;x++)te[x+1]=te[x]+ee[x];for(D=0;D<m;D++)u[p+D]!==0&&(w[te[u[p+D]]++]=D);if(d===0?($=be=w,k=19):d===1?($=l,X-=257,be=c,q-=257,k=256):($=h,be=f,k=-1),H=0,D=0,x=S,C=g,Q=O,K=0,T=-1,A=(ne=1<<O)-1,d===1&&ne>852||d===2&&ne>592)return 1;for(;;){I=x-K,w[D]<k?(B=0,M=w[D]):w[D]>k?(B=be[q+w[D]],M=$[X+w[D]]):(B=96,M=0),y=1<<x-K,S=v=1<<Q;do F[C+(H>>K)+(v-=y)]=I<<24|B<<16|M;while(v!==0);for(y=1<<x-1;H&y;)y>>=1;if(y!==0?(H&=y-1,H+=y):H=0,D++,--ee[x]==0){if(x===U)break;x=u[p+w[D]]}if(x>O&&(H&A)!==T){for(K===0&&(K=O),C+=S,G=1<<(Q=x-K);Q+K<U&&!((G-=ee[Q+K])<=0);)Q++,G<<=1;if(ne+=1<<Q,d===1&&ne>852||d===2&&ne>592)return 1;F[T=H&A]=O<<24|Q<<16|C-g}}return H!==0&&(F[C+H]=x-K<<24|4194304),b.bits=O,0}},4674:r=>{r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},3665:(r,s,a)=>{var o=a(9805);function l(q){for(var J=q.length;--J>=0;)q[J]=0}var c=256,h=286,f=30,d=15,u=16,p=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],m=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],g=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],w=new Array(576);l(w);var b=new Array(60);l(b);var y=new Array(512);l(y);var v=new Array(256);l(v);var T=new Array(29);l(T);var A,C,k,I=new Array(f);function B(q,J,E,Y,j){this.static_tree=q,this.extra_bits=J,this.extra_base=E,this.elems=Y,this.max_length=j,this.has_stree=q&&q.length}function M(q,J){this.dyn_tree=q,this.max_code=0,this.stat_desc=J}function N(q){return q<256?y[q]:y[256+(q>>>7)]}function x(q,J){q.pending_buf[q.pending++]=255&J,q.pending_buf[q.pending++]=J>>>8&255}function D(q,J,E){q.bi_valid>u-E?(q.bi_buf|=J<<q.bi_valid&65535,x(q,q.bi_buf),q.bi_buf=J>>u-q.bi_valid,q.bi_valid+=E-u):(q.bi_buf|=J<<q.bi_valid&65535,q.bi_valid+=E)}function S(q,J,E){D(q,E[2*J],E[2*J+1])}function U(q,J){var E=0;do E|=1&q,q>>>=1,E<<=1;while(--J>0);return E>>>1}function O(q,J,E){var Y,j,P=new Array(d+1),fe=0;for(Y=1;Y<=d;Y++)P[Y]=fe=fe+E[Y-1]<<1;for(j=0;j<=J;j++){var oe=q[2*j+1];oe!==0&&(q[2*j]=U(P[oe]++,oe))}}function Q(q){var J;for(J=0;J<h;J++)q.dyn_ltree[2*J]=0;for(J=0;J<f;J++)q.dyn_dtree[2*J]=0;for(J=0;J<19;J++)q.bl_tree[2*J]=0;q.dyn_ltree[512]=1,q.opt_len=q.static_len=0,q.last_lit=q.matches=0}function K(q){q.bi_valid>8?x(q,q.bi_buf):q.bi_valid>0&&(q.pending_buf[q.pending++]=q.bi_buf),q.bi_buf=0,q.bi_valid=0}function G(q,J,E,Y){var j=2*J,P=2*E;return q[j]<q[P]||q[j]===q[P]&&Y[J]<=Y[E]}function ne(q,J,E){for(var Y=q.heap[E],j=E<<1;j<=q.heap_len&&(j<q.heap_len&&G(J,q.heap[j+1],q.heap[j],q.depth)&&j++,!G(J,Y,q.heap[j],q.depth));)q.heap[E]=q.heap[j],E=j,j<<=1;q.heap[E]=Y}function H(q,J,E){var Y,j,P,fe,oe=0;if(q.last_lit!==0)do Y=q.pending_buf[q.d_buf+2*oe]<<8|q.pending_buf[q.d_buf+2*oe+1],j=q.pending_buf[q.l_buf+oe],oe++,Y===0?S(q,j,J):(S(q,(P=v[j])+c+1,J),(fe=p[P])!==0&&D(q,j-=T[P],fe),S(q,P=N(--Y),E),(fe=m[P])!==0&&D(q,Y-=I[P],fe));while(oe<q.last_lit);S(q,256,J)}function $(q,J){var E,Y,j,P=J.dyn_tree,fe=J.stat_desc.static_tree,oe=J.stat_desc.has_stree,ce=J.stat_desc.elems,ue=-1;for(q.heap_len=0,q.heap_max=573,E=0;E<ce;E++)P[2*E]!==0?(q.heap[++q.heap_len]=ue=E,q.depth[E]=0):P[2*E+1]=0;for(;q.heap_len<2;)P[2*(j=q.heap[++q.heap_len]=ue<2?++ue:0)]=1,q.depth[j]=0,q.opt_len--,oe&&(q.static_len-=fe[2*j+1]);for(J.max_code=ue,E=q.heap_len>>1;E>=1;E--)ne(q,P,E);j=ce;do E=q.heap[1],q.heap[1]=q.heap[q.heap_len--],ne(q,P,1),Y=q.heap[1],q.heap[--q.heap_max]=E,q.heap[--q.heap_max]=Y,P[2*j]=P[2*E]+P[2*Y],q.depth[j]=(q.depth[E]>=q.depth[Y]?q.depth[E]:q.depth[Y])+1,P[2*E+1]=P[2*Y+1]=j,q.heap[1]=j++,ne(q,P,1);while(q.heap_len>=2);q.heap[--q.heap_max]=q.heap[1],function(he,ye){var Ie,_,R,L,W,ie,se=ye.dyn_tree,me=ye.max_code,ze=ye.stat_desc.static_tree,Pe=ye.stat_desc.has_stree,je=ye.stat_desc.extra_bits,Oe=ye.stat_desc.extra_base,We=ye.stat_desc.max_length,At=0;for(L=0;L<=d;L++)he.bl_count[L]=0;for(se[2*he.heap[he.heap_max]+1]=0,Ie=he.heap_max+1;Ie<573;Ie++)(L=se[2*se[2*(_=he.heap[Ie])+1]+1]+1)>We&&(L=We,At++),se[2*_+1]=L,_>me||(he.bl_count[L]++,W=0,_>=Oe&&(W=je[_-Oe]),ie=se[2*_],he.opt_len+=ie*(L+W),Pe&&(he.static_len+=ie*(ze[2*_+1]+W)));if(At!==0){do{for(L=We-1;he.bl_count[L]===0;)L--;he.bl_count[L]--,he.bl_count[L+1]+=2,he.bl_count[We]--,At-=2}while(At>0);for(L=We;L!==0;L--)for(_=he.bl_count[L];_!==0;)(R=he.heap[--Ie])>me||(se[2*R+1]!==L&&(he.opt_len+=(L-se[2*R+1])*se[2*R],se[2*R+1]=L),_--)}}(q,J),O(P,ue,q.bl_count)}function X(q,J,E){var Y,j,P=-1,fe=J[1],oe=0,ce=7,ue=4;for(fe===0&&(ce=138,ue=3),J[2*(E+1)+1]=65535,Y=0;Y<=E;Y++)j=fe,fe=J[2*(Y+1)+1],++oe<ce&&j===fe||(oe<ue?q.bl_tree[2*j]+=oe:j!==0?(j!==P&&q.bl_tree[2*j]++,q.bl_tree[32]++):oe<=10?q.bl_tree[34]++:q.bl_tree[36]++,oe=0,P=j,fe===0?(ce=138,ue=3):j===fe?(ce=6,ue=3):(ce=7,ue=4))}function ee(q,J,E){var Y,j,P=-1,fe=J[1],oe=0,ce=7,ue=4;for(fe===0&&(ce=138,ue=3),Y=0;Y<=E;Y++)if(j=fe,fe=J[2*(Y+1)+1],!(++oe<ce&&j===fe)){if(oe<ue)do S(q,j,q.bl_tree);while(--oe!=0);else j!==0?(j!==P&&(S(q,j,q.bl_tree),oe--),S(q,16,q.bl_tree),D(q,oe-3,2)):oe<=10?(S(q,17,q.bl_tree),D(q,oe-3,3)):(S(q,18,q.bl_tree),D(q,oe-11,7));oe=0,P=j,fe===0?(ce=138,ue=3):j===fe?(ce=6,ue=3):(ce=7,ue=4)}}l(I);var te=!1;function be(q,J,E,Y){D(q,0+(Y?1:0),3),function(j,P,fe){K(j),x(j,fe),x(j,~fe),o.arraySet(j.pending_buf,j.window,P,fe,j.pending),j.pending+=fe}(q,J,E)}s._tr_init=function(q){te||(function(){var J,E,Y,j,P,fe=new Array(d+1);for(Y=0,j=0;j<28;j++)for(T[j]=Y,J=0;J<1<<p[j];J++)v[Y++]=j;for(v[Y-1]=j,P=0,j=0;j<16;j++)for(I[j]=P,J=0;J<1<<m[j];J++)y[P++]=j;for(P>>=7;j<f;j++)for(I[j]=P<<7,J=0;J<1<<m[j]-7;J++)y[256+P++]=j;for(E=0;E<=d;E++)fe[E]=0;for(J=0;J<=143;)w[2*J+1]=8,J++,fe[8]++;for(;J<=255;)w[2*J+1]=9,J++,fe[9]++;for(;J<=279;)w[2*J+1]=7,J++,fe[7]++;for(;J<=287;)w[2*J+1]=8,J++,fe[8]++;for(O(w,287,fe),J=0;J<f;J++)b[2*J+1]=5,b[2*J]=U(J,5);A=new B(w,p,257,h,d),C=new B(b,m,0,f,d),k=new B(new Array(0),F,0,19,7)}(),te=!0),q.l_desc=new M(q.dyn_ltree,A),q.d_desc=new M(q.dyn_dtree,C),q.bl_desc=new M(q.bl_tree,k),q.bi_buf=0,q.bi_valid=0,Q(q)},s._tr_stored_block=be,s._tr_flush_block=function(q,J,E,Y){var j,P,fe=0;q.level>0?(q.strm.data_type===2&&(q.strm.data_type=function(oe){var ce,ue=4093624447;for(ce=0;ce<=31;ce++,ue>>>=1)if(1&ue&&oe.dyn_ltree[2*ce]!==0)return 0;if(oe.dyn_ltree[18]!==0||oe.dyn_ltree[20]!==0||oe.dyn_ltree[26]!==0)return 1;for(ce=32;ce<c;ce++)if(oe.dyn_ltree[2*ce]!==0)return 1;return 0}(q)),$(q,q.l_desc),$(q,q.d_desc),fe=function(oe){var ce;for(X(oe,oe.dyn_ltree,oe.l_desc.max_code),X(oe,oe.dyn_dtree,oe.d_desc.max_code),$(oe,oe.bl_desc),ce=18;ce>=3&&oe.bl_tree[2*g[ce]+1]===0;ce--);return oe.opt_len+=3*(ce+1)+5+5+4,ce}(q),j=q.opt_len+3+7>>>3,(P=q.static_len+3+7>>>3)<=j&&(j=P)):j=P=E+5,E+4<=j&&J!==-1?be(q,J,E,Y):q.strategy===4||P===j?(D(q,2+(Y?1:0),3),H(q,w,b)):(D(q,4+(Y?1:0),3),function(oe,ce,ue,he){var ye;for(D(oe,ce-257,5),D(oe,ue-1,5),D(oe,he-4,4),ye=0;ye<he;ye++)D(oe,oe.bl_tree[2*g[ye]+1],3);ee(oe,oe.dyn_ltree,ce-1),ee(oe,oe.dyn_dtree,ue-1)}(q,q.l_desc.max_code+1,q.d_desc.max_code+1,fe+1),H(q,q.dyn_ltree,q.dyn_dtree)),Q(q),Y&&K(q)},s._tr_tally=function(q,J,E){return q.pending_buf[q.d_buf+2*q.last_lit]=J>>>8&255,q.pending_buf[q.d_buf+2*q.last_lit+1]=255&J,q.pending_buf[q.l_buf+q.last_lit]=255&E,q.last_lit++,J===0?q.dyn_ltree[2*E]++:(q.matches++,J--,q.dyn_ltree[2*(v[E]+c+1)]++,q.dyn_dtree[2*N(J)]++),q.last_lit===q.lit_bufsize-1},s._tr_align=function(q){D(q,2,3),S(q,256,w),function(J){J.bi_valid===16?(x(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):J.bi_valid>=8&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)}(q)}},4442:r=>{r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},7392:r=>{class s{constructor(o={}){if(!(o.maxSize&&o.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=o.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(o,l){this.cache.set(o,l),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(o){if(this.cache.has(o))return this.cache.get(o);if(this.oldCache.has(o)){const l=this.oldCache.get(o);return this.oldCache.delete(o),this._set(o,l),l}}set(o,l){return this.cache.has(o)?this.cache.set(o,l):this._set(o,l),this}has(o){return this.cache.has(o)||this.oldCache.has(o)}peek(o){return this.cache.has(o)?this.cache.get(o):this.oldCache.has(o)?this.oldCache.get(o):void 0}delete(o){const l=this.cache.delete(o);return l&&this._size--,this.oldCache.delete(o)||l}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[o]of this)yield o}*values(){for(const[,o]of this)yield o}*[Symbol.iterator](){for(const o of this.cache)yield o;for(const o of this.oldCache){const[l]=o;this.cache.has(l)||(yield o)}}get size(){let o=0;for(const l of this.oldCache.keys())this.cache.has(l)||o++;return this._size+o}}r.exports=s},1307:function(r,s,a){var o;o=l=>(()=>{var c=[,u=>{u.exports="data:application/wasm;base64,AGFzbQEAAAABOApgAX8Bf2ABfwBgAABgA39/fwF/YAABf2ACf38AYAN/f34BfmACf38Bf2AEf39/fwF/YAN/f38AAyEgAAABAgMDAwMEAQUAAgMCBgcIBwUDAAMHAQcABwcBAwkFAwEAAgYIAX8BQfCgBAsHTgUGbWVtb3J5AgAOY3JlYXRlX2NvbnRleHQACA9kZXN0cm95X2NvbnRleHQACQxzdXBwbHlfaW5wdXQACg9nZXRfbmV4dF9vdXRwdXQACwqNYCDfAgEFf0EAIQECQCAAQQdqIgJBEEkNAEEBIQEgAkEDdiIDQQJGDQBBAiEBIAJBIEkNAEEDIQEgA0EERg0AQQQhASACQTBJDQBBBSEBIANBBkYNAEEGIQEgAkHIAEkNAEEHIQEgAkHYAEkNAEEIIQEgAkGIAUkNAEEJIQEgAkGIAkkNACAAEIGAgIAAIgBBCGpBACAAGw8LAkACQCABQQJ0QcCIgIAAaiIEKAIAIgANAEEAIQACQAJAQQAoAuSIgIAAIgJFDQBBACACKAIANgLkiICAAAwBC0EAEIGAgIAAIgJFDQILIAJBgIB8cSIAIAJBCHZB/wFxIgJyIAE6AAAgAkEIdCAAckGAAmohAEEAIQJBACABQQJ0QYCIgIAAaigCACIDayEFIAMhAQNAIAAgBWoiACACNgIAIAAhAiABIANqIgFBgQJJDQALIAQgADYCAAsgBCAAKAIANgIACyAAC+4HAQd/AkACQAJAAkACQEEALQC0iICAAEUNAEEAQQA6ALSIgIAAQQAoArCIgIAAIgFFDQFBsIiAgAAhAgNAAkACQCABQQhqIgMgASgCBCIEaiIFQQh2Qf8BcSIGDQAgASECDAELAkADQCAFQYCAfHEgBmotAABB/gFHDQFBsIiAgAAhBgNAIAYiBygCACIGIAVHDQALIAcgBSgCADYCACABIAQgBSgCBGpBCGoiBDYCBCAHIAIgAiAFRhshAiADIARqIgVBCHZB/wFxIgYNAAsLIAIoAgAhAgsgAigCACIBDQALC0EAKAKwiICAACIFRQ0AIABBhwJqQYB+cSEDQX8hAkGwiICAACEEQQAhAUGwiICAACEGA0AgBiEHAkAgBSIGKAIEIgUgAEkNACAFIAJPDQAgBSECIAchBCAGIQEgBUEIaiADRw0AIAchBCAFIQIgBiEBDAQLIAYoAgAiBQ0ACyABDQIMAQtBsIiAgAAhBAs/AEEQdCEBIABBiAJqIQdBACEDAkACQEEAKAK4iICAACICRQ0AQQAhBSABIQYMAQtBACABQfCghIAAQf//A2pBgIB8cSIGayICNgK4iICAACACIQULAkAgByAFTQ0AIAcgBWsiByACQQF2IgIgAiAHSRtB//8DaiIHQRB2QABBf0YNAkEAQQAoAriIgIAAIAdBgIB8cSIDajYCuIiAgAALIAZFDQEgBkH/AToAASAGQQAoArCIgIAANgKAAiAGQYQCaiADIAVqQYCAfHFB+H1qIgI2AgAgBkGAAmohAQsgAUGAgHxxIgYgAUEIdkH/AXFyQf8BOgAAIAQgASgCADYCAAJAIAIgAGtBgH5xIgUNACABDwsgASEDAkAgBiABQQhqIgQgAmoiByAFQX9zakGAgHxxRg0AIARB//8DcSEFAkAgAEH3/QNLDQAgBiAEQQh2Qf8BcWpB/gE6AAAgAUEAKAKwiICAADYCACABQYCABCAFayIFNgIEQQAgATYCsIiAgAAQg4CAgAAgBkGEggRqIAIgBWtB+H1qIgU2AgAgBkGBgARqQf8BOgAAIAZBgIIEaiEDIAUgAGtBgH5xIQUMAQsgAiAFaiAAIAVqQX9qQYCAfHFrQYCAfGohBSABIQMLIAMgAygCBCAFazYCBCAFQfgBaiEGIAcgBWtBCHZB/wFxIQUCQANAIAYiB0GAfmohBiAFIgQNAUEBIQUgB0H4AUcNAAsLAkAgB0H4AUYNACACIAFqIAZrQYCAfHEiBSAEakH+AToAACAFIARBCHRqIgVBACgCsIiAgAA2AgAgBSAGNgIEQQAgBTYCsIiAgAAQg4CAgAALIAMPC0EAC3wBAn8CQCAARQ0AAkAgAEGAgHxxIABBCHZB/wFxciIBLQAAIgJB/wFHDQAgAEF4aiIAQQAoArCIgIAANgIAQQAgADYCsIiAgAAgAUH+AToAAEEAQQE6ALSIgIAADwsgACACQQJ0QcCIgIAAaiICKAIANgIAIAIgADYCAAsLawECfwJAQQAoArCIgIAAIgAoAgRB/wFLDQAgAEGAgHxxIgEgAEEIdkH/AXEiAHJBCToAAEEAQQAoArCIgIAAKAIANgKwiICAACABIABBCHRyIgBBACgC5IiAgAA2AgBBACAANgLkiICAAAsLTgECfwJAIAAgAUYNACACRQ0AA0ACQCAALQAAIgMgAS0AACIERg0AQQFBfyADIARLGw8LIAFBAWohASAAQQFqIQAgAkF/aiICDQALC0EAC3gBAX8CQAJAIAAgAU8NACACRQ0BIAAhAwNAIAMgAS0AADoAACABQQFqIQEgA0EBaiEDIAJBf2oiAg0ADAILCyAAIAFNDQAgAkUNACABQX9qIQEgAEF/aiEDA0AgAyACaiABIAJqLQAAOgAAIAJBf2oiAg0ACwsgAAssAQF/AkAgAkUNACAAIQMDQCADIAE6AAAgA0EBaiEDIAJBf2oiAg0ACwsgAAuCAQEBfwJAAkAgAEEDcQ0AIAEgAnJBA3ENACACQQRJDQEgAkECdiECIAAhAwNAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIAJBf2oiAg0ADAILCyACRQ0AIAAhAwNAIAMgAS0AADoAACABQQFqIQEgA0EBaiEDIAJBf2oiAg0ACwsgAAuIAQECfwJAQQAtAOiIgIAADQBBAEEBOgDoiICAABCMgICAABCOgICAAAtBoIAIEICAgIAAIgBBgIAENgIAQQJBgICAIBCXgICAACEBIABBFGpCgICAgICAwAA3AgAgAEEQaiAAQaCABGo2AgAgAEEIakIANwMAIAAgAEEgajYCBCAAIAE2AhwgAAsVACAAKAIcEJiAgIAAIAAQgoCAgAALFgAgAEEMaiABNgIAIABBCGpBADYCAAsbACAAKAIcIABBBGogAEEMaigCAEUQloCAgAALVAEDf0EAIQADQEEIIQEgACECA0BBACACQQFxa0GghuLtfnEgAkEBdnMhAiABQX9qIgENAAsgAEECdEHwiICAAGogAjYCACAAQQFqIgBBgAJHDQALC0oAIAJBf3MhAgJAIAFFDQADQCACQf8BcSAALQAAc0ECdEHwiICAAGooAgAgAkEIdnMhAiAAQQFqIQAgAUF/aiIBDQALCyACQX9zC10DAX4BfwF+QgAhAANAQQghASAAIQIDQEIAIAJCAYN9QsKenLzd8pW2SYMgAkIBiIUhAiABQX9qIgENAAsgAKdBA3RB8JCAgABqIAI3AwAgAEIBfCIAQoACUg0ACwtLACACQn+FIQICQCABRQ0AA0AgAkL/AYMgADEAAIWnQQN0QfCQgIAAaikDACACQgiIhSECIABBAWohACABQX9qIgENAAsLIAJCf4UL1RACDH8CfgJAAkAgACgCJEUNACAAKAIAIQIMAQtBACECIABBADoAKCAAQgA3AwAgAEIANwMYIABByABqQQBB5AAQhoCAgAAaIABBrAFqQQw2AgALIAAgASgCBCIDNgIQIABBsAFqIQQgAEHgAGohBSAAQcgAaiEGIABBtgFqIQcgAEGoAWohCCABKAIQIQkCQAJAAkACQANAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIOCgECAAQFBgcICQoPCyABKAIAIQogACgCqAEhAiAAKAKsASELIAEoAgQhDCABKAIIIQ0MAgsgCCAAKAKoASIMakEIaiABKAIAIAEoAgQiAmogASgCCCACayICIAAoAqwBIAxrIgwgAiAMSRsiAhCHgICAABogASABKAIEIAJqNgIEQQAhDCAAQQAgACgCqAEgAmoiAiACIAAoAqwBIgtGGzYCqAEgAiALRw0RIABBATYCAAJAIARBqIiAgABBBhCEgICAAEUNAEEFIQwMEgsgB0ECQQAQjYCAgAAgACgAuAFHDRBBBiEMIActAAANESAAIAAtALcBIgI2AiAgAkEESw0RQQEgAnRBE3FFDRELIAEoAgQiDCABKAIIIg1GDQ4CQCABKAIAIgogDGotAAAiCw0AIAAgDDYCECABIAxBAWo2AgRBBiECDAwLQQAhAiAAQQA2AqgBIABBAjYCACAAIAtBAnRBBGoiCzYCrAEgACALNgJACyAIIAJqQQhqIAogDGogDSAMayIMIAsgAmsiAiAMIAJJGyICEIeAgIAAGiABIAIgASgCBGo2AgRBACEMIABBACAAKAKoASACaiICIAIgACgCrAEiC0YbNgKoASACIAtHDQ8gACACQXxqIgI2AqwBQQchDCAEIAJBABCNgICAACAAIAAoAqwBIgtqQbABaigAAEcNDyAAQQI2AqgBIAAtALEBIgJBP3ENDAJAAkAgAkHAAHFFDQAgACAEIAggCxCRgICAAEEBRw0RIAAgACkDCDcDMCAALQCxASECDAELIABCfzcDMAtCfyEOAkAgAkEYdEEYdUF/Sg0AIAAgBCAIIAAoAqwBEJGAgIAAQQFHDRAgACkDCCEOCyAAIA43AzggACgCrAEiDSAAKAKoASICa0ECSQ0PIAAgAkEBaiIKNgKoASAIIAJqQQhqLQAAQSFHDQwgACACQQJqIgs2AqgBIAggCmpBCGotAABBAUcNDCANIAtGDQ8gACACQQNqNgKoASAAKAKwCSAIIAtqQQhqLQAAEJyAgIAAIgwNDyAAKAKoASIMIAAoAqwBIgIgDCACSxshDQJAA0AgDSAMRg0BIAggDEEBaiICNgIAIAQgDGohCyACIQwgCy0AAA0ODAALCyAGQgA3AwAgAEEANgKoASAAQQM2AgAgBkEIakIANwMACyAAIAEoAgQ2AhAgACABKAIQNgIUIAAoArAJIAEQmYCAgAAhDCAAIAApA0ggASgCBCAAKAIQa618Ig43A0ggACAAKQNQIAEoAhAgACgCFCICayILrXwiDzcDUCAOIAApAzBWDQ0gDyAAKQM4Vg0NAkACQAJAAkAgACgCIEF/ag4EAAMDAQMLIAEoAgwgAmogCyAAKAIYEI2AgIAArSEODAELIAEoAgwgAmogCyAAKQMYEI+AgIAAIQ4LIAAgDjcDGAsgDEEBRw0OAkAgACkDMCIOQn9RDQAgDiAGKQMAUg0OCwJAIAApAzgiDkJ/UQ0AQQchDCAOIAApA1BSDQ8LIAAgACkDSCAANQJAfCAAKQNgfCIPNwNgQgQhDgJAAkACQCAAKAIgQX9qDgQBAgIAAgtCCCEOCyAFIA4gD3w3AwALIAAgACkDaCAAKQNQfDcDaCAAIAVBGCAAKAJwEI2AgIAANgJwIABBBDYCACAAIAApA1hCAXw3A1gLAkAgBikDACIOQgODUA0AIA5CAXwhDiABKAIEIQwgASgCCCELA0AgCyAMRg0NIAEgDEEBaiICNgIEIAEoAgAgDGotAAANDiAGIA43AwAgDkIDgyEPIA5CAXwhDiACIQwgD0IAUg0ACwsgAEEFNgIAC0EBIQIgACgCIEF/ag4EBgcHBQcLIAAgARCSgICAACIMQQFHDQsgAEEHNgIAC0EAIAAoAhBrIQggAEGAAWopAwAhDiABKAIEIQwCQANAIA4gCCAMaq18QgODUA0BAkAgDCABKAIIRw0AIAAgARCTgICAAAwLCyABIAxBAWoiAjYCBCABKAIAIAxqIQsgAiEMIAstAAANCwwACwsgACABEJOAgIAAQQchDCAFIABBkAFqQRgQhICAgAANCiAAQQg2AgALIAAgAUEgEJSAgIAAIgxBAUcNCSAAQQk2AgBBDCELIABBDDYCrAEMAQsgACgCrAEhCwsgAEGoAWogACgCqAEiDGpBCGogASgCACABKAIEIgJqIAEoAgggAmsiAiALIAxrIgwgAiAMSRsiAhCHgICAABogASABKAIEIAJqNgIEQQAhDCAAQQAgACgCqAEgAmoiAiACIAAoAqwBIgtGGzYCqAEgAiALRw0HIAAQlYCAgAAhDAwHC0EBIQIgACABQcAAEJSAgIAAIgxBAUcNBgwBC0EBIQIgACABQSAQlICAgAAiDEEBRw0FCyAAIAI2AgAMAAsLQQYhDAwCC0EAIQwMAQtBByEMCwJAAkAgACgCJA0AAkACQCAMDgIAAwELQQdBCCABKAIEIAEoAghGGyEMCyABIAk2AhAgASADNgIEIAwPCwJAIAwNACADIAEoAgRHDQAgCSABKAIQRw0AIAAtACghASAAQQE6ACggAUEDdA8LIABBADoAKAsgDAuaAQEDfwJAIAAoAgQiBA0AIABCADcDCAsgAigCACEFA0ACQCAFIANJDQBBAA8LIAEgBWotAAAhBiACIAVBAWoiBTYCACAAIAZB/wBxrSAErYYgACkDCIQ3AwgCQAJAIAZBgAFxDQACQCAGDQBBByEGIAQNAgsgAEEANgIEQQEPC0EHIQYgACAEQQdqIgQ2AgQgBEE/Rw0BCwsgBguhAgIDfwF+IABBkAFqIQIgAUEEaiEDA0ACQCAAIAEoAgAgAyABKAIIEJGAgIAAIgRBAUYNACAAQYABaiIDIAMpAwAgASgCBCAAKAIQIgNrIgKtfDcDACAAIAMgASgCAGogAiAAKAIYEI2AgIAArTcDGCAEDwsCQAJAAkACQAJAIAAoAngOAwACAQMLIAAgACkDCCIFNwOIAQJAIAUgACkDWFENAEEHDwsgAEEBNgJ4DAMLIAAgACkDmAEgACkDCHw3A5gBIAAgAkEYIAAoAqABEI2AgIAANgKgASAAQQE2AnggACAAKQOIAUJ/fCIFNwOIAQwCCyAAQQI2AnggACAAKQOQASAAKQMIfDcDkAELIAApA4gBIQULIAVCAFINAAtBAQtAAQJ/IABBgAFqIgIgAikDACABKAIEIAAoAhAiAmsiA618NwMAIAAgAiABKAIAaiADIAAoAhgQjYCAgACtNwMYC3wBBH8gASgCBCEDIAEoAgghBANAAkAgBCADRw0AQQAPCyABIANBAWoiBTYCBAJAIAEoAgAgA2otAAAgACkDGCAAKAIEIgOtiKdB/wFxRg0AQQcPCyAAIANBCGoiBjYCBCAFIQMgBiACSQ0ACyAAQQA2AgQgAEIANwMYQQELbwEBf0EHIQECQCAAQboBai8AAEHZtAFHDQAgAEG0AWpBBkEAEI2AgIAAIABBsAFqKAAARw0AIABBgAFqKQMAQgKIIAA1ALQBUg0AIABBuAFqLQAADQBBAUEHIAAoAiAgAEG5AWotAABGGyEBCyABC7QCAQR/AkACQCAAKAIkRQ0AIAAoAgAhAwwBC0EAIQMgAEEAOgAoIABCADcDACAAQgA3AxggAEHIAGpBAEHkABCGgICAABogAEGsAWpBDDYCAEEBIQILIABByABqIQQCQAJAA0ACQCADQQpHDQAgASgCBCIDIAEoAggiBUYNAiABKAIAIQYCQANAIAYgA2otAAANASABIANBAWoiAzYCBCAAIAAoAgRBAWpBA3E2AgQgBSADRg0EDAALCwJAIAAoAgRFDQBBBw8LIAAoAiRFDQAgAEEAOgAoIABCADcDACAAQgA3AxggBEEAQeQAEIaAgIAAGiAAQQw2AqwBCyAAIAEQkICAgAAiA0EBRw0CQQohAyAAQQo2AgAMAAsLAkAgAg0AQQAPC0EHQQEgACgCBBshAwsgAwt1AQF/AkBBuAkQgICAgAAiAkUNACACIAA2AiQgAiAAIAEQm4CAgAAiADYCsAkCQCAARQ0AIAJBADoAKCACQgA3AwAgAkIANwMYIAJByABqQQBB5AAQhoCAgAAaIAJBrAFqQQw2AgAgAg8LIAIQgoCAgAALQQALHgACQCAARQ0AIAAoArAJEJ2AgIAAIAAQgoCAgAALC4ARAQx/IABB6N0BaiECIABB1ABqIQMgAEEcaiIEQQhqIQUCQAJAA0AgACgCQCEGAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgASgCBCIHIAEoAggiCEkNACAGQQdGDQEMEgsgBg4JAQIDBAUGBwAJDwsgACgCTCEGDAcLQQEhCSABIAdBAWo2AgQgASgCACAHai0AACIHRQ0IAkACQCAHQd8BSw0AIAdBAUcNAQsgAEGAAjsBUAJAIAAoAjwNACAAIAEoAgwgASgCECIGajYCGCAAIAEoAhQgBms2AiwLIARCADcCACAFQgA3AgAMCwsgAC0AUEUNCgwOCyABIAdBAWo2AgQgASgCACAHai0AACEHIABBAjYCQCAAIAdBCHQgACgCSGo2AkgMDAsgASAHQQFqNgIEIAEoAgAgB2otAAAhByAAQQM2AkAgACAHIAAoAkhqQQFqNgJIDAsLIAEgB0EBajYCBCABKAIAIAdqLQAAIQcgAEEENgJAIAAgB0EIdDYCTAwKCyABIAdBAWo2AgQgASgCACAHai0AACEHIAAgACgCRDYCQCAAIAcgACgCTGpBAWo2AkwMCQsgASAHQQFqNgIEQQchCSABKAIAIAdqLQAAIgdB4AFLDQNBACEGAkACQCAHQS1PDQBBACEIDAELIAdBU2oiByAHQf8BcUEtbiIIQS1sayEHIAhBAWohCAsgAEF/IAh0QX9zNgJ0AkAgB0H/AXFBCUkNACAHQXdqIgcgB0H/AXFBCW4iBkEJbGshByAGQQFqIQYLIAAgBjYCcCAAIAdB/wFxIgc2AmwgBiAHakEESw0DIANCADcCACADQQhqQgA3AgAgA0EQakEANgIAIABBfyAGdEF/czYCcEH4ACEHA0AgACAHakGACDsBACAHQQJqIgdB5N0BRw0ACyAAQQY2AkAgAEEFNgIIIABC/////w83AgALIAAoAkwiCUEFSQ0IAkAgACgCCCIHRQ0AIAdBf2ohBiABKAIEIQcgASgCCCEKA0AgCiAHRg0LIAEgB0EBaiIINgIEIAEoAgAgB2otAAAhByAAIAY2AgggACAHIAAoAgRBCHRyNgIEIAghByAGQX9qIgZBf0cNAAsLIABBBzYCQCAAIAlBe2oiBjYCTAsgACAAKAIgIgcgASgCFCABKAIQayIIIAAoAkgiCiAIIApJGyIIaiAAKAIsIgogCiAHayAISxs2AiggASgCCCIJIAEoAgQiCGshBwJAAkACQCAAKALk3QEiCg0AIAYNAUEAIQYLIABB5N0BaiILIApqQQRqIAEoAgAgCGogByAGIAprIgZBKiAKayIIIAggBksbIgYgBiAHSxsiBxCHgICAABoCQAJAIAcgACgC5N0BIghqIgYgACgCTEcNACALIAhqIAdqQQRqQQBBPyAGaxCGgICAABogACgC5N0BIAdqIQYMAQsCQCAGQRRLDQAgACAGNgLk3QEgASABKAIEIAdqNgIEDAMLIAZBa2ohBgsgAEEANgIQIAAgAjYCDCAAIAY2AhRBByEJIAAQmoCAgABFDQMgACgCECIIIAAoAuTdASIKIAdqSw0DIAAgACgCTCAIayIGNgJMAkAgCiAITQ0AIAAgCiAIayIHNgLk3QEgAiALIAhqQQRqIAcQhYCAgAAaDAILIABBADYC5N0BIAEgASgCBCAIIApraiIINgIEIAEoAggiCSAIayEHCwJAIAdBFUkNACAAIAg2AhAgACABKAIANgIMIAAgCUFraiAIIAZqIAcgBkEVakkbNgIUQQchCSAAEJqAgIAARQ0DIAAoAkwiByAAKAIQIgggASgCBGsiBkkNAyABIAg2AgQgACAHIAZrIgY2AkwgASgCCCAIayIHQRRLDQELIAIgASgCACAIaiAGIAcgByAGSxsiBxCHgICAABogACAHNgLk3QEgASABKAIEIAdqNgIECyAAKAIgIgYgACgCHCIIayEHAkAgACgCPEUNAAJAIAYgACgCLEcNACAAQQA2AiALIAEoAgwgASgCEGogACgCGCAIaiAHEIeAgIAAGiAAKAIgIQYLIAAgBjYCHCABIAEoAhAgB2oiBjYCECAAIAAoAkggB2siBzYCSAJAIAcNAEEHIQkgACgCTA0CIAAoAmgNAiAAKAIEDQIgAEEANgJADAULQQAhCSAGIAEoAhRGDQEgASgCBCABKAIIRw0GIAAoAuTdASAAKAJMTw0GDAELIAAoAkwiCkUNAUEAIQkgCCAHTQ0AA0AgASgCFCIGIAEoAhAiC00NASAAIAogCiAAKAIsIAAoAiAiDGsiDSAIIAdrIgggBiALayIGIAggBkkbIgYgBiANSxsiBiAGIApLGyIGazYCTCAMIAAoAhhqIAEoAgAgB2ogBhCFgICAABogACAAKAIgIAZqIgc2AiACQCAAKAIkIAdPDQAgACAHNgIkCwJAIAAoAjxFDQACQCAHIAAoAixHDQAgAEEANgIgCyABKAIMIAEoAhBqIAEoAgAgASgCBGogBhCFgICAABogACgCICEHCyAAIAc2AhwgASABKAIQIAZqNgIQIAEgASgCBCAGaiIHNgIEIAAoAkwiCkUNAiABKAIIIgggB0sNAAsLIAkPCyAAQQA2AkAMAwsgB0EYdEEYdUF/Sg0BIABBATYCQCAAIAdBEHRBgID8AHE2AkgCQCAHQcABSQ0AIABBBTYCRCAAQQA6AFEMAwsgAC0AUQ0DIABBBjYCRCAHQaABSQ0CIANCADcCACADQRBqQQA2AgAgA0EIakIANwIAQfgAIQcDQCAAIAdqQYAIOwEAIAdBAmoiB0Hk3QFHDQALCyAAQQU2AgggAEL/////DzcCAAwBCyAHQQJLDQEgAEKDgICAgAE3AkAMAAsLQQcPC0EAC/8XARJ/IABBGGohAQJAIABBIGooAgAiAiAAQShqKAIAIgNPDQAgAEHoAGoiBCgCAEUNACABIAQgACgCVBCegICAABogACgCKCEDIAAoAiAhAgsCQCACIANPDQAgAEHcDWohBSAAQegAaiEGIABB4BVqIQcgAEHUAGohCANAIAAoAhAiCSAAKAIUSw0BIAAgACgCZCIKQQV0aiAAKAJ0IAJxIgtBAXRqIgxB+ABqIQ0CQAJAIAAoAgAiBEGAgIAISQ0AIAAoAgQhDgwBCyAAIARBCHQiBDYCACAAIAlBAWoiAzYCECAAIAAoAgRBCHQgACgCDCAJai0AAHIiDjYCBCADIQkLAkACQCAOIARBC3YgDS8BACIPbCIDTw0AIAAgAzYCACANIA9BgBAgD2tBBXZqOwEAIAJBf2ohBAJAIAINACAAKAIsIARqIQQLAkACQCAAKAIkIg8NAEEAIQQMAQsgACgCGCAEai0AACEECyAAKAJwIAJxIAAoAmwiDXQgBEEIIA1rdmohDAJAAkAgCkEGSw0AQQEhBANAIAAgDEGADGxqIARBAXQiBGpB5B1qIQ0CQAJAIANB////B00NACADIQoMAQsgACADQQh0Igo2AgAgACAJQQFqIgM2AhAgACAOQQh0IAAoAgwgCWotAAByIg42AgQgAyEJCwJAAkAgDiAKQQt2IA0vAQAiD2wiA0kNACAAIA4gA2siDjYCBCAAIAogA2siAzYCACANIA8gD0EFdms7AQAgBEEBciEEDAELIAAgAzYCACANIA9BgBAgD2tBBXZqOwEACyAEQYACSQ0ADAILCyACIAAoAlQiDUF/c2ohBAJAIAIgDUsNACAAKAIsIARqIQQLAkACQCAPDQBBACEQDAELIAAoAhggBGotAAAhEAtBASEEQYACIQ0DQCAAIAxBgAxsaiAQQQF0IhAgDXEiESANaiAEakEBdGpB5B1qIQ8CQAJAIANB////B00NACADIQsMAQsgACADQQh0Igs2AgAgACAJQQFqIgM2AhAgACAOQQh0IAAoAgwgCWotAAByIg42AgQgAyEJCwJAAkAgDiALQQt2IA8vAQAiCmwiA08iEg0AIAAgAzYCACAKQYAQIAprQQV2aiEKDAELIAAgDiADayIONgIEIAAgCyADayIDNgIAIAogCkEFdmshCkEAIQ0LIA8gCjsBACANIBFzIQ0gBEEBdCASciIEQYACSQ0ACwsgACACQQFqNgIgIAAoAhggAmogBDoAAAJAIAAoAiQgACgCICICTw0AIAAgAjYCJAtBACEDAkAgACgCZCIEQQRJDQACQCAEQQlLDQAgBEF9aiEDDAELIARBemohAwsgACADNgJkDAELIAAgDiADayIONgIEIAAgBCADayIDNgIAIA0gDyAPQQV2azsBACAAIApBAXRqIg9B+ANqIQQCQAJAIANB////B00NACAJIQoMAQsgACADQQh0IgM2AgAgACAJQQFqIgo2AhAgACAOQQh0IAAoAgwgCWotAAByIg42AgQLAkACQCAOIANBC3YgBC8BACINbCIJSQ0AIAAgDiAJayIONgIEIAAgAyAJayIDNgIAIAQgDSANQQV2azsBACAPQZAEaiENAkACQCADQf///wdNDQAgCiEQDAELIAAgA0EIdCIDNgIAIAAgCkEBaiIQNgIQIAAgDkEIdCAAKAIMIApqLQAAciIONgIECwJAAkAgDiADQQt2IA0vAQAiCWwiBE8NACANIAlBgBAgCWtBBXZqOwEAIAxB2ARqIQMCQCAEQf///wdLDQAgACAEQQh0IgQ2AgAgACAQQQFqNgIQIAAgDkEIdCAAKAIMIBBqLQAAciIONgIECwJAIA4gBEELdiADLwEAIg1sIglJDQAgACAOIAlrNgIEIAAgBCAJazYCACADIA0gDUEFdms7AQAMAgsgAyANQYAQIA1rQQV2ajsBACAAIAk2AgAgAEEBNgJoIABBCUELIAAoAmRBB0kbNgJkDAMLIAAgDiAEayIONgIEIA0gCSAJQQV2azsBACAPQagEaiENAkACQCADIARrIgNB////B00NACAQIQoMAQsgACADQQh0IgM2AgAgACAQQQFqIgo2AhAgACAOQQh0IAAoAgwgEGotAAByIg42AgQLAkACQCAOIANBC3YgDS8BACIEbCIJTw0AIAAgCTYCACANIARBgBAgBGtBBXZqOwEAIAAoAlghAwwBCyAAIA4gCWsiDjYCBCANIAQgBEEFdms7AQAgD0HABGohBAJAIAMgCWsiA0H///8HSw0AIAAgA0EIdCIDNgIAIAAgCkEBajYCECAAIA5BCHQgACgCDCAKai0AAHIiDjYCBAsCQAJAIA4gA0ELdiAELwEAIg1sIglPDQAgACAJNgIAIAQgDUGAECANa0EFdmo7AQAgACgCXCEDDAELIAAgDiAJazYCBCAAIAMgCWs2AgAgACgCYCEDIAAgACgCXDYCYCAEIA0gDUEFdms7AQALIAAgACgCWDYCXAsgACAAKAJUNgJYIAAgAzYCVAsgAEEIQQsgACgCZEEHSRs2AmQgACAHIAsQn4CAgAAMAQsgBCANQYAQIA1rQQV2ajsBACAAIAk2AgAgACAAKAJcNgJgIAAgACkCVDcCWCAAQQdBCiAAKAJkQQdJGzYCZCAAIAUgCxCfgICAACAAKAJoIgNBfmpBAyADQQZJGyEKIAAoAgAhA0EBIQ4DQCAAIApBB3RqIA5BAXQiDmpB2AdqIQ0CQAJAIANBgICACEkNACAAKAIEIQQMAQsgACADQQh0IgM2AgAgACAAKAIQIgRBAWo2AhAgACAAKAIEQQh0IAQgACgCDGotAAByIgQ2AgQLAkACQCAEIANBC3YgDS8BACIJbCIPSQ0AIAAgBCAPayIENgIEIAAgAyAPayIDNgIAIA0gCSAJQQV2azsBACAOQQFyIQ4MAQsgACAPNgIAIA0gCUGAECAJa0EFdmo7AQAgDyEDCyAOQcAASQ0ACwJAIA5BQGoiCUEDSw0AIAAgCTYCVAwBCyAAIA5BAXFBAnIiDTYCVCAJQQF2IQ8CQCAJQQ1LDQAgACANIA9Bf2oiDHQiCzYCVEEBIQ0gCCALQQF0akGEC2ohEEE/IA5rIRFBACEPA0AgECARIA1qQQF0aiEOAkACQCADQf///wdNDQAgAyEKDAELIAAgA0EIdCIKNgIAIAAgACgCECIDQQFqNgIQIAAgBEEIdCADIAAoAgxqLQAAciIENgIECwJAAkAgBCAKQQt2IA4vAQAiCWwiA0kNACAAIAQgA2siBDYCBCAAIAogA2siAzYCACAOIAkgCUEFdms7AQAgAEEBIA90IAtqIgs2AlQgDUEBdEEBciENDAELIAAgAzYCACAOIAlBgBAgCWtBBXZqOwEAIA1BAXQhDQsgDCAPQQFqIg9HDQAMAgsLIA9Be2ohDgNAAkAgA0H///8HSw0AIAAgA0EIdCIDNgIAIAAgACgCECIJQQFqNgIQIARBCHQgCSAAKAIMai0AAHIhBAsgACADQQF2IgM2AgAgACAEIANrIgRBH3UiCSANQQF0akEBaiINNgJUIAAgCSADcSAEaiIENgIEIA5Bf2oiDg0ACyAAIA1BBHQiCzYCVEEAIQ9BASEOA0AgACAOQQF0Ig5qQbwNaiENAkACQCADQf///wdNDQAgAyEKDAELIAAgA0EIdCIKNgIAIAAgACgCECIDQQFqNgIQIAAgBEEIdCADIAAoAgxqLQAAciIENgIECwJAAkAgBCAKQQt2IA0vAQAiCWwiA0kNACAAIAQgA2siBDYCBCAAIAogA2siAzYCACANIAkgCUEFdms7AQAgAEEBIA90IAtqIgs2AlQgDkEBciEODAELIAAgAzYCACANIAlBgBAgCWtBBXZqOwEACyAPQQFqIg9BBEcNAAsLAkAgASAGIAAoAlQQnoCAgAANAEEADwsgACgCICECCyACIAAoAihJDQALC0EBIQMCQCAAKAIAIgRB////B0sNACAAIARBCHQ2AgBBASEDIAAgACgCECIEQQFqNgIQIAAgACgCBEEIdCAEIAAoAgxqLQAAcjYCBAsgAwtwAQF/AkBBqN4BEICAgIAAIgJFDQAgAkE0aiABNgIAIAJBPGogADYCAAJAAkACQCAAQX9qDgIAAQILIAIgARCAgICAACIANgIYIAANASACEIKAgIAADAILIAJBADYCGCACQThqQQA2AgALIAIPC0EAC9IBAQJ/QQYhAgJAIAFBJ0sNACAAQTBqIAFBAXFBAnIgAUEBdkELanQiATYCAAJAAkAgAEE8aigCACIDRQ0AQQQhAiABIABBNGooAgBLDQIgAEEsaiABNgIAIANBAkcNACAAQThqIgMoAgAgAU8NACAAIAE2AjggACgCGBCCgICAACAAIAAoAjAQgICAgAAiATYCGCABDQBBAyECDAELQQAhAiAAQQA2AkAgAEHQAGpBAToAACAAQegAakEANgIAIABB5N0BaiEDCyADQQA2AgALIAILIwACQCAAQTxqKAIARQ0AIAAoAhgQgoCAgAALIAAQgoCAgAAL9QEBBH9BACEDAkAgACgCDCACTQ0AIAAoAhggAk0NACABIAEoAgAiBCAAKAIQIAAoAggiBWsiBiAEIAYgBEkbIgRrNgIAIAUgAkF/c2ohAQJAIAUgAksNACAAKAIUIAFqIQELIAAoAgAiAiABai0AACEGQQEhAyAAIAVBAWo2AgggAiAFaiAGOgAAAkAgBEF/aiICRQ0AA0AgACgCACIFQQAgAUEBaiIBIAEgACgCFEYbIgFqLQAAIQQgACAAKAIIIgZBAWo2AgggBSAGaiAEOgAAIAJBf2oiAg0ACwsgACgCDCAAKAIIIgFPDQAgACABNgIMCyADC8gEAQd/AkACQCAAKAIAIgNBgICACEkNACAAKAIEIQQMAQsgACADQQh0IgM2AgAgACAAKAIQIgVBAWo2AhAgACAAKAIEQQh0IAUgACgCDGotAAByIgQ2AgQLAkACQCAEIANBC3YgAS8BACIGbCIFTw0AIAEgBkGAECAGa0EFdmo7AQAgASACQQR0akEEaiEHQQghCEECIQkMAQsgACAEIAVrIgQ2AgQgASAGIAZBBXZrOwEAAkAgAyAFayIDQf///wdLDQAgACADQQh0IgM2AgAgACAAKAIQIgVBAWo2AhAgACAEQQh0IAUgACgCDGotAAByIgQ2AgQLAkAgBCADQQt2IAEvAQIiBmwiBU8NACABIAZBgBAgBmtBBXZqOwECIAEgAkEEdGpBhAJqIQdBCCEIQQohCQwBCyAAIAQgBWsiBDYCBCABIAYgBkEFdms7AQIgAUGEBGohByADIAVrIQVBgAIhCEESIQkLIABB6ABqIAk2AgBBASEBA0AgByABQQF0IgFqIQMCQAJAIAVB////B00NACAFIQIMAQsgACAFQQh0IgI2AgAgACAAKAIQIgVBAWo2AhAgACAEQQh0IAUgACgCDGotAAByIgQ2AgQLAkACQCAEIAJBC3YgAy8BACIGbCIFSQ0AIAAgBCAFayIENgIEIAAgAiAFayIFNgIAIAMgBiAGQQV2azsBACABQQFyIQEMAQsgACAFNgIAIAMgBkGAECAGa0EFdmo7AQALIAEgCEkNAAsgAEHoAGogASAIayAJajYCAAsLNQEAQYAICy4IAAAAEAAAABgAAAAgAAAAKAAAADAAAABAAAAAUAAAAIAAAAAAAQAA/Td6WFoA"},u=>{u.exports=l}],h={};function f(u){var p=h[u];if(p!==void 0)return p.exports;var m=h[u]={exports:{}};return c[u](m,m.exports,f),m.exports}f.d=(u,p)=>{for(var m in p)f.o(p,m)&&!f.o(u,m)&&Object.defineProperty(u,m,{enumerable:!0,get:p[m]})},f.o=(u,p)=>Object.prototype.hasOwnProperty.call(u,p),f.r=u=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})};var d={};return(()=>{f.r(d),f.d(d,{XzReadableStream:()=>F});var u=f(1);const p=globalThis.ReadableStream||f(2).ReadableStream;class m{constructor(b){this.exports=b.exports,this.memory=this.exports.memory,this.ptr=this.exports.create_context(),this._refresh(),this.bufSize=this.mem32[0],this.inStart=this.mem32[1]-this.ptr,this.inEnd=this.inStart+this.bufSize,this.outStart=this.mem32[4]-this.ptr}supplyInput(b){this._refresh(),this.mem8.subarray(this.inStart,this.inEnd).set(b,0),this.exports.supply_input(this.ptr,b.byteLength),this._refresh()}getNextOutput(){const b=this.exports.get_next_output(this.ptr);if(this._refresh(),b!==0&&b!==1)throw new Error(`get_next_output failed with error code ${b}`);return{outChunk:this.mem8.slice(this.outStart,this.outStart+this.mem32[5]),finished:b===1}}needsMoreInput(){return this.mem32[2]===this.mem32[3]}outputBufferIsFull(){return this.mem32[5]===this.bufSize}resetOutputBuffer(){this.outPos=this.mem32[5]=0}dispose(){this.exports.destroy_context(this.ptr),this.exports=null}_refresh(){var b;this.memory.buffer!==((b=this.mem8)==null?void 0:b.buffer)&&(this.mem8=new Uint8Array(this.memory.buffer,this.ptr),this.mem32=new Uint32Array(this.memory.buffer,this.ptr))}}const g=class g extends p{static async _getModuleInstance(){const b=u.replace("data:application/wasm;base64,",""),y=Uint8Array.from(atob(b),T=>T.charCodeAt(0)).buffer,v=await WebAssembly.instantiate(y,{});g._moduleInstance=v.instance}constructor(b){let y,v=null;const T=b.getReader();super({async start(A){g._moduleInstance||await(g._moduleInstancePromise||(g._moduleInstancePromise=g._getModuleInstance())),y=new m(g._moduleInstance)},async pull(A){if(y.needsMoreInput()){if(v===null||v.byteLength===0){const{done:I,value:B}=await T.read();I||(v=B)}const k=Math.min(y.bufSize,v.byteLength);y.supplyInput(v.subarray(0,k)),v=v.subarray(k)}const C=y.getNextOutput();A.enqueue(C.outChunk),y.resetOutputBuffer(),C.finished&&(y.dispose(),A.close())},cancel:()=>(y.dispose(),T.cancel())})}};ke(g,"_moduleInstancePromise"),ke(g,"_moduleInstance");let F=g})(),d})(),r.exports=o(a(772))},3617:()=>{},772:()=>{},928:(r,s,a)=>{const o=a(2886).default;r.exports=o,r.exports.default=o},1308:(r,s)=>{Object.defineProperty(s,"__esModule",{value:!0});let a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(a=new Int32Array(a)),s.default=(o,l)=>{let c=l===0?0:~l;for(let h=0;h<o.length;h++)c=a[255&(c^o[h])]^c>>>8;return~c}},2886:function(r,s,a){var o=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(s,"__esModule",{value:!0});const l=o(a(1308)),c=o(a(7327));s.default=(0,c.default)("crc-32",l.default)},4422:(r,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0});const o=a(8287);s.default=(l,c)=>o.Buffer.from(l,c)},7327:function(r,s,a){var o=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(s,"__esModule",{value:!0});const l=o(a(4422));s.default=function(c,h){const f=(d,u)=>h((0,l.default)(d),u)>>>0;return f.signed=(d,u)=>h((0,l.default)(d),u),f.unsigned=f,f.model=c,f}}},e={};function t(r){var s=e[r];if(s!==void 0)return s.exports;var a=e[r]={exports:{}};return i[r].call(a.exports,a,a.exports,t),a.exports}t.n=r=>{var s=r&&r.__esModule?()=>r.default:()=>r;return t.d(s,{a:s}),s},t.d=(r,s)=>{for(var a in s)t.o(s,a)&&!t.o(r,a)&&Object.defineProperty(r,a,{enumerable:!0,get:s[a]})},t.o=(r,s)=>Object.prototype.hasOwnProperty.call(r,s),t.r=r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var n=t(7806);return n})(),Fi=[],ei=[],$_=typeof Uint8Array<"u"?Uint8Array:Array,Sl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Kn=0,j_=Sl.length;Kn<j_;++Kn)Fi[Kn]=Sl[Kn],ei[Sl.charCodeAt(Kn)]=Kn;ei[45]=62;ei[95]=63;function $0(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function W_(i){var e=$0(i),t=e[0],n=e[1];return(t+n)*3/4-n}function K_(i,e,t){return(e+t)*3/4-t}function Y_(i){var e,t=$0(i),n=t[0],r=t[1],s=new $_(K_(i,n,r)),a=0,o=r>0?n-4:n,l;for(l=0;l<o;l+=4)e=ei[i.charCodeAt(l)]<<18|ei[i.charCodeAt(l+1)]<<12|ei[i.charCodeAt(l+2)]<<6|ei[i.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return r===2&&(e=ei[i.charCodeAt(l)]<<2|ei[i.charCodeAt(l+1)]>>4,s[a++]=e&255),r===1&&(e=ei[i.charCodeAt(l)]<<10|ei[i.charCodeAt(l+1)]<<4|ei[i.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function Z_(i){return Fi[i>>18&63]+Fi[i>>12&63]+Fi[i>>6&63]+Fi[i&63]}function X_(i,e,t){for(var n,r=[],s=e;s<t;s+=3)n=(i[s]<<16&16711680)+(i[s+1]<<8&65280)+(i[s+2]&255),r.push(Z_(n));return r.join("")}function J_(i){for(var e,t=i.length,n=t%3,r=[],s=16383,a=0,o=t-n;a<o;a+=s)r.push(X_(i,a,a+s>o?o:a+s));return n===1?(e=i[t-1],r.push(Fi[e>>2]+Fi[e<<4&63]+"==")):n===2&&(e=(i[t-2]<<8)+i[t-1],r.push(Fi[e>>10]+Fi[e>>4&63]+Fi[e<<2&63]+"=")),r.join("")}var Lc={byteLength:W_,toByteArray:Y_,fromByteArray:J_};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function e6(i,e,t,n,r){var s,a,o=r*8-n-1,l=(1<<o)-1,c=l>>1,h=-7,f=t?r-1:0,d=t?-1:1,u=i[e+f];for(f+=d,s=u&(1<<-h)-1,u>>=-h,h+=o;h>0;s=s*256+i[e+f],f+=d,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=n;h>0;a=a*256+i[e+f],f+=d,h-=8);if(s===0)s=1-c;else{if(s===l)return a?NaN:(u?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-c}return(u?-1:1)*a*Math.pow(2,s-n)}function t6(i,e,t,n,r,s){var a,o,l,c=s*8-r-1,h=(1<<c)-1,f=h>>1,d=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=n?0:s-1,p=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+f>=1?e+=d/l:e+=d*Math.pow(2,1-f),e*l>=2&&(a++,l/=2),a+f>=h?(o=0,a=h):a+f>=1?(o=(e*l-1)*Math.pow(2,r),a=a+f):(o=e*Math.pow(2,f-1)*Math.pow(2,r),a=0));r>=8;i[t+u]=o&255,u+=p,o/=256,r-=8);for(a=a<<r|o,c+=r;c>0;i[t+u]=a&255,u+=p,a/=256,c-=8);i[t+u-p]|=m*128}var Rr={read:e6,write:t6};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const Mu=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,zc=2147483647;pe.TYPED_ARRAY_SUPPORT=i6();!pe.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i6(){try{const i=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(i,e),i.foo()===42}catch{return!1}}Object.defineProperty(pe.prototype,"parent",{enumerable:!0,get:function(){if(pe.isBuffer(this))return this.buffer}});Object.defineProperty(pe.prototype,"offset",{enumerable:!0,get:function(){if(pe.isBuffer(this))return this.byteOffset}});function zi(i){if(i>zc)throw new RangeError('The value "'+i+'" is invalid for option "size"');const e=new Uint8Array(i);return Object.setPrototypeOf(e,pe.prototype),e}function pe(i,e,t){if(typeof i=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Lh(i)}return j0(i,e,t)}pe.poolSize=8192;function j0(i,e,t){if(typeof i=="string")return r6(i,e);if(ArrayBuffer.isView(i))return s6(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Ai(i,ArrayBuffer)||i&&Ai(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ai(i,SharedArrayBuffer)||i&&Ai(i.buffer,SharedArrayBuffer)))return Pc(i,e,t);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const n=i.valueOf&&i.valueOf();if(n!=null&&n!==i)return pe.from(n,e,t);const r=a6(i);if(r)return r;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return pe.from(i[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}pe.from=function(i,e,t){return j0(i,e,t)};Object.setPrototypeOf(pe.prototype,Uint8Array.prototype);Object.setPrototypeOf(pe,Uint8Array);function W0(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function n6(i,e,t){return W0(i),i<=0?zi(i):e!==void 0?typeof t=="string"?zi(i).fill(e,t):zi(i).fill(e):zi(i)}pe.alloc=function(i,e,t){return n6(i,e,t)};function Lh(i){return W0(i),zi(i<0?0:zh(i)|0)}pe.allocUnsafe=function(i){return Lh(i)};pe.allocUnsafeSlow=function(i){return Lh(i)};function r6(i,e){if((typeof e!="string"||e==="")&&(e="utf8"),!pe.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=K0(i,e)|0;let n=zi(t);const r=n.write(i,e);return r!==t&&(n=n.slice(0,r)),n}function Hc(i){const e=i.length<0?0:zh(i.length)|0,t=zi(e);for(let n=0;n<e;n+=1)t[n]=i[n]&255;return t}function s6(i){if(Ai(i,Uint8Array)){const e=new Uint8Array(i);return Pc(e.buffer,e.byteOffset,e.byteLength)}return Hc(i)}function Pc(i,e,t){if(e<0||i.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(i):t===void 0?n=new Uint8Array(i,e):n=new Uint8Array(i,e,t),Object.setPrototypeOf(n,pe.prototype),n}function a6(i){if(pe.isBuffer(i)){const e=zh(i.length)|0,t=zi(e);return t.length===0||i.copy(t,0,0,e),t}if(i.length!==void 0)return typeof i.length!="number"||Ph(i.length)?zi(0):Hc(i);if(i.type==="Buffer"&&Array.isArray(i.data))return Hc(i.data)}function zh(i){if(i>=zc)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+zc.toString(16)+" bytes");return i|0}pe.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==pe.prototype};pe.compare=function(e,t){if(Ai(e,Uint8Array)&&(e=pe.from(e,e.offset,e.byteLength)),Ai(t,Uint8Array)&&(t=pe.from(t,t.offset,t.byteLength)),!pe.isBuffer(e)||!pe.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let s=0,a=Math.min(n,r);s<a;++s)if(e[s]!==t[s]){n=e[s],r=t[s];break}return n<r?-1:r<n?1:0};pe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};pe.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return pe.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=pe.allocUnsafe(t);let s=0;for(n=0;n<e.length;++n){let a=e[n];if(Ai(a,Uint8Array))s+a.length>r.length?(pe.isBuffer(a)||(a=pe.from(a)),a.copy(r,s)):Uint8Array.prototype.set.call(r,a,s);else if(pe.isBuffer(a))a.copy(r,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return r};function K0(i,e){if(pe.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||Ai(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);const t=i.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let r=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Oc(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return rm(i).length;default:if(r)return n?-1:Oc(i).length;e=(""+e).toLowerCase(),r=!0}}pe.byteLength=K0;function o6(i,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(i||(i="utf8");;)switch(i){case"hex":return w6(this,e,t);case"utf8":case"utf-8":return Z0(this,e,t);case"ascii":return g6(this,e,t);case"latin1":case"binary":return m6(this,e,t);case"base64":return u6(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b6(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),n=!0}}pe.prototype._isBuffer=!0;function Fn(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}pe.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)Fn(this,t,t+1);return this};pe.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)Fn(this,t,t+3),Fn(this,t+1,t+2);return this};pe.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)Fn(this,t,t+7),Fn(this,t+1,t+6),Fn(this,t+2,t+5),Fn(this,t+3,t+4);return this};pe.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?Z0(this,0,e):o6.apply(this,arguments)};pe.prototype.toLocaleString=pe.prototype.toString;pe.prototype.equals=function(e){if(!pe.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:pe.compare(this,e)===0};pe.prototype.inspect=function(){let e="";const t=exports.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Mu&&(pe.prototype[Mu]=pe.prototype.inspect);pe.prototype.compare=function(e,t,n,r,s){if(Ai(e,Uint8Array)&&(e=pe.from(e,e.offset,e.byteLength)),!pe.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),r===void 0&&(r=0),s===void 0&&(s=this.length),t<0||n>e.length||r<0||s>this.length)throw new RangeError("out of range index");if(r>=s&&t>=n)return 0;if(r>=s)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,s>>>=0,this===e)return 0;let a=s-r,o=n-t;const l=Math.min(a,o),c=this.slice(r,s),h=e.slice(t,n);for(let f=0;f<l;++f)if(c[f]!==h[f]){a=c[f],o=h[f];break}return a<o?-1:o<a?1:0};function Y0(i,e,t,n,r){if(i.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Ph(t)&&(t=r?0:i.length-1),t<0&&(t=i.length+t),t>=i.length){if(r)return-1;t=i.length-1}else if(t<0)if(r)t=0;else return-1;if(typeof e=="string"&&(e=pe.from(e,n)),pe.isBuffer(e))return e.length===0?-1:Ru(i,e,t,n,r);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(i,e,t):Uint8Array.prototype.lastIndexOf.call(i,e,t):Ru(i,[e],t,n,r);throw new TypeError("val must be string, number or Buffer")}function Ru(i,e,t,n,r){let s=1,a=i.length,o=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(i.length<2||e.length<2)return-1;s=2,a/=2,o/=2,t/=2}function l(h,f){return s===1?h[f]:h.readUInt16BE(f*s)}let c;if(r){let h=-1;for(c=t;c<a;c++)if(l(i,c)===l(e,h===-1?0:c-h)){if(h===-1&&(h=c),c-h+1===o)return h*s}else h!==-1&&(c-=c-h),h=-1}else for(t+o>a&&(t=a-o),c=t;c>=0;c--){let h=!0;for(let f=0;f<o;f++)if(l(i,c+f)!==l(e,f)){h=!1;break}if(h)return c}return-1}pe.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};pe.prototype.indexOf=function(e,t,n){return Y0(this,e,t,n,!0)};pe.prototype.lastIndexOf=function(e,t,n){return Y0(this,e,t,n,!1)};function l6(i,e,t,n){t=Number(t)||0;const r=i.length-t;n?(n=Number(n),n>r&&(n=r)):n=r;const s=e.length;n>s/2&&(n=s/2);let a;for(a=0;a<n;++a){const o=parseInt(e.substr(a*2,2),16);if(Ph(o))return a;i[t+a]=o}return a}function c6(i,e,t,n){return Do(Oc(e,i.length-t),i,t,n)}function h6(i,e,t,n){return Do(v6(e),i,t,n)}function f6(i,e,t,n){return Do(rm(e),i,t,n)}function d6(i,e,t,n){return Do(_6(e,i.length-t),i,t,n)}pe.prototype.write=function(e,t,n,r){if(t===void 0)r="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")r=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,r===void 0&&(r="utf8")):(r=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const s=this.length-t;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let a=!1;for(;;)switch(r){case"hex":return l6(this,e,t,n);case"utf8":case"utf-8":return c6(this,e,t,n);case"ascii":case"latin1":case"binary":return h6(this,e,t,n);case"base64":return f6(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d6(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}};pe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function u6(i,e,t){return e===0&&t===i.length?Lc.fromByteArray(i):Lc.fromByteArray(i.slice(e,t))}function Z0(i,e,t){t=Math.min(i.length,t);const n=[];let r=e;for(;r<t;){const s=i[r];let a=null,o=s>239?4:s>223?3:s>191?2:1;if(r+o<=t){let l,c,h,f;switch(o){case 1:s<128&&(a=s);break;case 2:l=i[r+1],(l&192)===128&&(f=(s&31)<<6|l&63,f>127&&(a=f));break;case 3:l=i[r+1],c=i[r+2],(l&192)===128&&(c&192)===128&&(f=(s&15)<<12|(l&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:l=i[r+1],c=i[r+2],h=i[r+3],(l&192)===128&&(c&192)===128&&(h&192)===128&&(f=(s&15)<<18|(l&63)<<12|(c&63)<<6|h&63,f>65535&&f<1114112&&(a=f))}}a===null?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),r+=o}return p6(n)}const Du=4096;function p6(i){const e=i.length;if(e<=Du)return String.fromCharCode.apply(String,i);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,i.slice(n,n+=Du));return t}function g6(i,e,t){let n="";t=Math.min(i.length,t);for(let r=e;r<t;++r)n+=String.fromCharCode(i[r]&127);return n}function m6(i,e,t){let n="";t=Math.min(i.length,t);for(let r=e;r<t;++r)n+=String.fromCharCode(i[r]);return n}function w6(i,e,t){const n=i.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let r="";for(let s=e;s<t;++s)r+=C6[i[s]];return r}function b6(i,e,t){const n=i.slice(e,t);let r="";for(let s=0;s<n.length-1;s+=2)r+=String.fromCharCode(n[s]+n[s+1]*256);return r}pe.prototype.slice=function(e,t){const n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,pe.prototype),r};function Nt(i,e,t){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+e>t)throw new RangeError("Trying to access beyond buffer length")}pe.prototype.readUintLE=pe.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||Nt(e,t,this.length);let r=this[e],s=1,a=0;for(;++a<t&&(s*=256);)r+=this[e+a]*s;return r};pe.prototype.readUintBE=pe.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||Nt(e,t,this.length);let r=this[e+--t],s=1;for(;t>0&&(s*=256);)r+=this[e+--t]*s;return r};pe.prototype.readUint8=pe.prototype.readUInt8=function(e,t){return e=e>>>0,t||Nt(e,1,this.length),this[e]};pe.prototype.readUint16LE=pe.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||Nt(e,2,this.length),this[e]|this[e+1]<<8};pe.prototype.readUint16BE=pe.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||Nt(e,2,this.length),this[e]<<8|this[e+1]};pe.prototype.readUint32LE=pe.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||Nt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};pe.prototype.readUint32BE=pe.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||Nt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};pe.prototype.readBigUInt64LE=sn(function(e){e=e>>>0,Dr(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Zs(e,this.length-8);const r=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(r)+(BigInt(s)<<BigInt(32))});pe.prototype.readBigUInt64BE=sn(function(e){e=e>>>0,Dr(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Zs(e,this.length-8);const r=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(r)<<BigInt(32))+BigInt(s)});pe.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||Nt(e,t,this.length);let r=this[e],s=1,a=0;for(;++a<t&&(s*=256);)r+=this[e+a]*s;return s*=128,r>=s&&(r-=Math.pow(2,8*t)),r};pe.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||Nt(e,t,this.length);let r=t,s=1,a=this[e+--r];for(;r>0&&(s*=256);)a+=this[e+--r]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*t)),a};pe.prototype.readInt8=function(e,t){return e=e>>>0,t||Nt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};pe.prototype.readInt16LE=function(e,t){e=e>>>0,t||Nt(e,2,this.length);const n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};pe.prototype.readInt16BE=function(e,t){e=e>>>0,t||Nt(e,2,this.length);const n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};pe.prototype.readInt32LE=function(e,t){return e=e>>>0,t||Nt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};pe.prototype.readInt32BE=function(e,t){return e=e>>>0,t||Nt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};pe.prototype.readBigInt64LE=sn(function(e){e=e>>>0,Dr(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Zs(e,this.length-8);const r=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});pe.prototype.readBigInt64BE=sn(function(e){e=e>>>0,Dr(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Zs(e,this.length-8);const r=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});pe.prototype.readFloatLE=function(e,t){return e=e>>>0,t||Nt(e,4,this.length),Rr.read(this,e,!0,23,4)};pe.prototype.readFloatBE=function(e,t){return e=e>>>0,t||Nt(e,4,this.length),Rr.read(this,e,!1,23,4)};pe.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||Nt(e,8,this.length),Rr.read(this,e,!0,52,8)};pe.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||Nt(e,8,this.length),Rr.read(this,e,!1,52,8)};function Kt(i,e,t,n,r,s){if(!pe.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(t+n>i.length)throw new RangeError("Index out of range")}pe.prototype.writeUintLE=pe.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t=t>>>0,n=n>>>0,!r){const o=Math.pow(2,8*n)-1;Kt(this,e,t,n,o,0)}let s=1,a=0;for(this[t]=e&255;++a<n&&(s*=256);)this[t+a]=e/s&255;return t+n};pe.prototype.writeUintBE=pe.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t=t>>>0,n=n>>>0,!r){const o=Math.pow(2,8*n)-1;Kt(this,e,t,n,o,0)}let s=n-1,a=1;for(this[t+s]=e&255;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+n};pe.prototype.writeUint8=pe.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Kt(this,e,t,1,255,0),this[t]=e&255,t+1};pe.prototype.writeUint16LE=pe.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Kt(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};pe.prototype.writeUint16BE=pe.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Kt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};pe.prototype.writeUint32LE=pe.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Kt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};pe.prototype.writeUint32BE=pe.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Kt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function X0(i,e,t,n,r){nm(e,n,r,i,t,7);let s=Number(e&BigInt(4294967295));i[t++]=s,s=s>>8,i[t++]=s,s=s>>8,i[t++]=s,s=s>>8,i[t++]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return i[t++]=a,a=a>>8,i[t++]=a,a=a>>8,i[t++]=a,a=a>>8,i[t++]=a,t}function J0(i,e,t,n,r){nm(e,n,r,i,t,7);let s=Number(e&BigInt(4294967295));i[t+7]=s,s=s>>8,i[t+6]=s,s=s>>8,i[t+5]=s,s=s>>8,i[t+4]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return i[t+3]=a,a=a>>8,i[t+2]=a,a=a>>8,i[t+1]=a,a=a>>8,i[t]=a,t+8}pe.prototype.writeBigUInt64LE=sn(function(e,t=0){return X0(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});pe.prototype.writeBigUInt64BE=sn(function(e,t=0){return J0(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});pe.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=t>>>0,!r){const l=Math.pow(2,8*n-1);Kt(this,e,t,n,l-1,-l)}let s=0,a=1,o=0;for(this[t]=e&255;++s<n&&(a*=256);)e<0&&o===0&&this[t+s-1]!==0&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+n};pe.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=t>>>0,!r){const l=Math.pow(2,8*n-1);Kt(this,e,t,n,l-1,-l)}let s=n-1,a=1,o=0;for(this[t+s]=e&255;--s>=0&&(a*=256);)e<0&&o===0&&this[t+s+1]!==0&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+n};pe.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Kt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};pe.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Kt(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};pe.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Kt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};pe.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Kt(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};pe.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Kt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};pe.prototype.writeBigInt64LE=sn(function(e,t=0){return X0(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});pe.prototype.writeBigInt64BE=sn(function(e,t=0){return J0(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function em(i,e,t,n,r,s){if(t+n>i.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function tm(i,e,t,n,r){return e=+e,t=t>>>0,r||em(i,e,t,4),Rr.write(i,e,t,n,23,4),t+4}pe.prototype.writeFloatLE=function(e,t,n){return tm(this,e,t,!0,n)};pe.prototype.writeFloatBE=function(e,t,n){return tm(this,e,t,!1,n)};function im(i,e,t,n,r){return e=+e,t=t>>>0,r||em(i,e,t,8),Rr.write(i,e,t,n,52,8),t+8}pe.prototype.writeDoubleLE=function(e,t,n){return im(this,e,t,!0,n)};pe.prototype.writeDoubleBE=function(e,t,n){return im(this,e,t,!1,n)};pe.prototype.copy=function(e,t,n,r){if(!pe.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&r!==0&&(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const s=r-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),s};pe.prototype.fill=function(e,t,n,r){if(typeof e=="string"){if(typeof t=="string"?(r=t,t=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!pe.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(e.length===1){const a=e.charCodeAt(0);(r==="utf8"&&a<128||r==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=t;s<n;++s)this[s]=e;else{const a=pe.isBuffer(e)?e:pe.from(e,r),o=a.length;if(o===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-t;++s)this[s+t]=a[s%o]}return this};const fr={};function Hh(i,e,t){fr[i]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}Hh("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Hh("ERR_INVALID_ARG_TYPE",function(i,e){return`The "${i}" argument must be of type number. Received type ${typeof e}`},TypeError);Hh("ERR_OUT_OF_RANGE",function(i,e,t){let n=`The value of "${i}" is out of range.`,r=t;return Number.isInteger(t)&&Math.abs(t)>2**32?r=Lu(String(t)):typeof t=="bigint"&&(r=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(r=Lu(r)),r+="n"),n+=` It must be ${e}. Received ${r}`,n},RangeError);function Lu(i){let e="",t=i.length;const n=i[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${i.slice(t-3,t)}${e}`;return`${i.slice(0,t)}${e}`}function F6(i,e,t){Dr(e,"offset"),(i[e]===void 0||i[e+t]===void 0)&&Zs(e,i.length-(t+1))}function nm(i,e,t,n,r,s){if(i>t||i<e){const a=typeof e=="bigint"?"n":"";let o;throw e===0||e===BigInt(0)?o=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:o=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`,new fr.ERR_OUT_OF_RANGE("value",o,i)}F6(n,r,s)}function Dr(i,e){if(typeof i!="number")throw new fr.ERR_INVALID_ARG_TYPE(e,"number",i)}function Zs(i,e,t){throw Math.floor(i)!==i?(Dr(i,t),new fr.ERR_OUT_OF_RANGE("offset","an integer",i)):e<0?new fr.ERR_BUFFER_OUT_OF_BOUNDS:new fr.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,i)}const y6=/[^+/0-9A-Za-z-_]/g;function A6(i){if(i=i.split("=")[0],i=i.trim().replace(y6,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function Oc(i,e){e=e||1/0;let t;const n=i.length;let r=null;const s=[];for(let a=0;a<n;++a){if(t=i.charCodeAt(a),t>55295&&t<57344){if(!r){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===n){(e-=3)>-1&&s.push(239,191,189);continue}r=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),r=t;continue}t=(r-55296<<10|t-56320)+65536}else r&&(e-=3)>-1&&s.push(239,191,189);if(r=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function v6(i){const e=[];for(let t=0;t<i.length;++t)e.push(i.charCodeAt(t)&255);return e}function _6(i,e){let t,n,r;const s=[];for(let a=0;a<i.length&&!((e-=2)<0);++a)t=i.charCodeAt(a),n=t>>8,r=t%256,s.push(r),s.push(n);return s}function rm(i){return Lc.toByteArray(A6(i))}function Do(i,e,t,n){let r;for(r=0;r<n&&!(r+t>=e.length||r>=i.length);++r)e[r+t]=i[r];return r}function Ai(i,e){return i instanceof e||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===e.name}function Ph(i){return i!==i}const C6=function(){const i="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const n=t*16;for(let r=0;r<16;++r)e[n+r]=i[t]+i[r]}return e}();function sn(i){return typeof BigInt>"u"?x6:i}function x6(){throw new Error("BigInt not supported")}class zu{constructor(e,t){this.position=0,this.url=e,this.config=t,tn(e)||t.cacheFetches===!1?this.useCache=!1:(this.useCache=!0,this.cache=new k6({fetch:(n,r)=>this._fetch(n,r),fetchSize:t.fetchSize||1e4}))}async _fetch(e,t){const n={start:e,size:t};this._stat={size:void 0};const r=await Se.loadArrayBuffer(this.url,Le(this.config,{range:n}));return pe.from(r)}async read(e,t=0,n=1/0,r=0){return this.useCache?await this.cache.get(e,t,r,n):(await this._fetch(r,n)).copy(e,t),{bytesRead:n,buffer:e}}async readFile(){const e=await Se.loadArrayBuffer(this.url,Le(this.config));return pe.from(e)}async stat(){if(!this._stat){const e=pe.allocUnsafe(10);if(await this.read(e,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}}class k6{constructor({fetch:e,fetchSize:t=3e4}){this.fetch=e,this.position=0,this.buffer=pe.allocUnsafe(0),this.fetchSize=t}async get(e,t,n,r){if(e.length<t+r)throw new Error("output buffer not big enough for request");if(!(n>=this.position&&n+r<=this.position+this.buffer.length)){const l=Math.max(r,this.fetchSize);this.buffer=await this.fetch(n,l),this.position=n}const s=t,a=n-this.position,o=a+r;this.buffer.copy(e,s,a,o)}}const I6=16,E6=32,S6=1;var vo,sm;class N6{constructor(e,t,n){ct(this,vo);ke(this,"chrAliasTable",new Map);this.config=e,this.browser=n,this.genome=t,this.cramFile=new El.CramFile({filehandle:e.fileHandle?e.fileHandle:new zu(e.url,e),seqFetch:e.seqFetch||s.bind(this),checkSequenceMD5:e.checkSequenceMD5!==void 0?e.checkSequenceMD5:!0});const r=e.indexFileHandle?e.indexFileHandle:new zu(e.indexURL,e);this.indexedCramFile=new El.IndexedCramFile({cram:this.cramFile,index:new El.CraiIndex({filehandle:r}),fetchSizeLimit:e.fetchSizeLimit||1e9}),St.setReaderDefaults(this,e);async function s(a,o,l){const c=this.genome,h=await this.getHeader(),f=c.getChromosomeName(h.indexToChr[a]);return this.genome.getSequence(f,o-1,l)}}async getHeader(){if(!this.header){const e=await this.cramFile.getSamHeader(),t={},n=[],r=[];for(let s of e)if(s.tag==="SQ"){for(let a of s.data)if(a.tag==="SN"){const o=a.value;t[o]=n.length,n.push(o);break}}else s.tag==="RG"&&r.push(s.data);this.header={indexToChr:n,chrToIndex:t,chrNames:Object.keys(t),readGroups:r}}return this.header}async readAlignments(e,t,n){const r=await this.getHeader(),s=await Ke(this,vo,sm).call(this,e),a=new Mr(e,t,n,this.config);if(s===void 0)return a;try{const c=await this.indexedCramFile.getRecordsForRange(s,t,n);for(let h of c){const f=h.sequenceId,d=h.alignmentStart,u=d+h.lengthOnRef;if(f<0)continue;if(f>s||d>n)return;if(f<s||u<t)continue;const p=o(h,r.chrNames);this.filter.pass(p)&&a.push(p)}return a.finish(),a}catch(c){let h=c.message;throw h&&h.indexOf("MD5")>=0&&(h="Sequence mismatch. Is this the correct genome for the loaded CRAM?"),this.browser.alert.present(new Error(h)),c}function o(c,h){const f=new Dc;if(f.chr=h[c.sequenceId],f.start=c.alignmentStart-1,f.lengthOnRef=c.lengthOnRef,f.flags=c.flags,f.strand=!(c.flags&I6),f.fragmentLength=c.templateLength||c.templateSize,f.mq=c.mappingQuality,f.end=c.alignmentStart+c.lengthOnRef,f.readGroupId=c.readGroupId,c.mate&&c.mate.sequenceId!==void 0){const d=c.mate.flags!==void 0?!(c.mate.flags&S6):!(c.flags&E6);f.mate={chr:h[c.mate.sequenceId],position:c.mate.alignmentStart,strand:d}}return f.seq=c.getReadBases(),f.qual=c.qualityScores,f.tagDict=c.tags,f.readName=c.readName,l(c,f),f.mate&&f.start>f.mate.position&&f.fragmentLength>0&&(f.fragmentLength=-f.fragmentLength),St.setPairOrientation(f),f}function l(c,h){const f=[];let d,u,p=0,m="";if(h.scStart=h.start,h.scLengthOnRef=h.lengthOnRef,c.readFeatures)for(let g of c.readFeatures){const w=g.code,b=g.data,y=g.pos-1,v=g.refPos-1;switch(w){case"S":case"I":case"i":case"N":case"D":if(y>p){const T=y-p;f.push(new bn({start:v-T,seqOffset:p,len:T,type:"M"})),p+=T,m+=T+"M"}if(w==="S"){let T=v;h.scLengthOnRef+=b.length,y===0&&(h.scStart-=b.length,T-=b.length);const A=b.length;f.push(new bn({start:T,seqOffset:p,len:A,type:"S"})),p+=A,m+=A+w}else if(w==="I"||w==="i"){d===void 0&&(d=[]);const T=w==="i"?1:b.length;d.push(new bn({start:v,len:T,seqOffset:p,type:"I"})),p+=T,m+=T+w}else(w==="D"||w==="N")&&(u||(u=[]),u.push({start:v,len:b,type:w}),m+=b+w);break;case"H":case"P":m+=b+w;break}}const F=c.readLength-p;F>0&&(f.push(new bn({start:c.alignmentStart+c.lengthOnRef-F-1,seqOffset:p,len:F,type:"M"})),m+=F+"M"),h.blocks=f,h.insertions=d,h.gaps=u,h.cigar=m}}}vo=new WeakSet,sm=async function(e){if(await this.getHeader(),this.chrAliasTable.has(e)&&(e=this.chrAliasTable.get(e),e===void 0))return;let t=this.header.chrToIndex[e];if(t===void 0){const n=await this.genome.getAliasRecord(e);let r;if(n){const s=Object.keys(n).filter(a=>a!=="start"&&a!=="end").map(a=>n[a]).filter(a=>this.header.chrToIndex[a]!==void 0);s.length>0&&(r=s[0],t=this.header.chrToIndex[s[0]])}this.chrAliasTable.set(e,r)}return t};const B6=2291137574,T6=2273964779,M6=[84,68,70,52],R6=new Uint8Array([66,65,77,1]),D6=[67,82,65,77],L6=[31,139],z6=4,H6=new Set(["narrowpeak","broadpeak","regionpeak","peaks","bedgraph","wig","gff3","gff","gtf","fusionjuncspan","refflat","seg","aed","bed","bedMethyl","vcf","bb","bigbed","biginteract","biggenepred","bignarrowpeak","bw","bigwig","bam","tdf","refgene","genepred","genepredext","bedpe","bp","snp","rmsk","cram","gwas","maf","mut","hiccups","fasta","fa","fna","pytor","hic","qtl"]);function ya(i,e){const t=Math.min(i.length,e.length);if(t==0)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}async function am(i){let e;const t=i.filename||await Bo(i.url);return t&&(e=await P6(t)),e||(e=await U6(i)),e}function P6(i){if(!i)return;if(i=i.toLowerCase(),i.endsWith("refgene.txt.gz")||i.endsWith("refgene.txt.bgz")||i.endsWith("refgene.txt")||i.endsWith("refgene.sorted.txt.gz")||i.endsWith("refgene.sorted.txt.bgz"))return"refgene";i.endsWith(".gz")&&(i=i.substring(0,i.length-3)),i.endsWith(".bgz")&&(i=i.substring(0,i.length-4)),(i.endsWith(".txt")||i.endsWith(".tab")||i.endsWith(".tsv"))&&(i=i.substring(0,i.length-4));const e=i.lastIndexOf("."),t=e<0?i:i.substring(e+1);switch(t){case"bw":return"bigwig";case"bb":return"bigbed";case"fasta":case"fa":case"fna":return"fasta";default:return H6.has(t)?t:void 0}}function O6(i,e){if(ut(i))if(i.includes("?")){const t=i.indexOf("?");return i.substring(0,t)+"."+e+i.substring(t)}else return i+"."+e;else return}async function U6(i){const e=i.url;let t=Le(i,{range:{start:0,size:1e3}}),n=await Se.loadArrayBuffer(e,t),r=new Uint8Array(n);if(ya(r,L6))if((r[3]&z6)!==0&&r[12]===66&&r[13]===67){const p=gh(n);t=Le(i,{range:{start:0,size:p}}),n=await Se.loadArrayBuffer(e,t),r=ki(n)}else t=Le(i,{}),n=await Se.loadArrayBuffer(e,t),r=Ss(n),i._filecontents=r;if(ya(r,R6))return"bam";if(ya(r,D6))return"cram";const s=!0;let o=new bt(new DataView(n),s).getUInt();if(o===B6)return"bigwig";if(o===T6)return"bigbed";if(ya(r,M6))return"tdf";const f=new TextDecoder("utf-8").decode(r).split(/\r?\n/)[0];if(f.startsWith("##fileformat=VCF"))return"vcf";if(f.startsWith("##gff-version 3"))return"gff3";if(f.startsWith("##gff-version"))return"gff";if(f0.isQTL(f))return"qtl";if(r0.isGWAS(f))return"gwas";const d=f.split("	");return Vg(d)?"hiccups":null}class q6{constructor(e,t){const n=t.genome;if(this.config=e,this.genome=n,qi(e.url)&&(this.config.indexed=!1),e.sourceType==="ga4gh")throw Error("Unsupported source type 'ga4gh'");if(e.sourceType==="pysam")this.bamReader=new G0(e,n);else if(e.sourceType==="htsget")this.bamReader=new G_(e,n);else if(e.sourceType==="shardedBam")this.bamReader=new q_(e,n);else if(e.format==="cram")this.bamReader=new N6(e,n,t);else{if(!this.config.indexURL&&e.indexed!==!1)if(ut(this.config.url)){const r=O6(this.config.url,"bai");r?(console.warn(`Warning: no indexURL specified for ${this.config.url}.  Guessing ${r}`),this.config.indexURL=r):(console.warning(`Warning: no indexURL specified for ${this.config.url}.`),this.config.indexed=!1)}else console.warning(`Warning: no indexURL specified for ${this.config.name}.`),this.config.indexed=!1;this.config.indexed!==!1?this.bamReader=new V0(e,n):this.bamReader=new O_(e,n)}}async getAlignments(e,t,n){const r=this.genome,s=await this.bamReader.readAlignments(e,t,n);if(s.hasAlignments){const a=await r.getSequence(e,s.start,s.end);if(a)return s.coverageMap.refSeq=a,s.sequence=a,s;console.error("No sequence for: "+e+":"+s.start+"-"+s.end)}return s}}class uo{constructor({chr:e,start:t,end:n}){this.chr=e,this.start=t,this.end=n}contains(e){return e.chr===this.chr&&e.start>=this.start&&e.end<=this.end}overlaps(e){return e.chr===this.chr&&!(e.end<this.start||e.start>this.end)}extend(e){e.chr===this.chr&&(this.start=Math.min(e.start,this.start),this.end=Math.max(e.end,this.end))}getLocusString(){if(this.chr==="all")return"all";{const e=He(Math.floor(this.start)+1),t=He(Math.round(this.end));return`${this.chr}:${e}-${t}`}}static fromLocusString(e){if(e==="all")return new uo({chr:"all"});const t=e.split(":"),n=t[0],r=t[1].split("-"),s=Number.parseInt(r[0].replace(/,/g,""))-1,a=Number.parseInt(r[1].replace(/,/g,""));return new uo({chr:n,start:s,end:a})}}/*!
 * vanilla-picker v2.12.1
 * https://vanilla-picker.js.org
 *
 * Copyright 2017-2021 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
 * Released under the ISC license.
 */var Oh=function(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")},Uh=function(){function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),Aa=function(){function i(e,t){var n=[],r=!0,s=!1,a=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){s=!0,a=c}finally{try{!r&&o.return&&o.return()}finally{if(s)throw a}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return i(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.startsWith=String.prototype.startsWith||function(i){return this.indexOf(i)===0};String.prototype.padStart=String.prototype.padStart||function(i,e){for(var t=this;t.length<i;)t=e+t;return t};var V6={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function Hu(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=e>0?i.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):i.toString();return t||"0"}var Q6=function(){function i(e,t,n,r){Oh(this,i);var s=this;function a(l){if(l.startsWith("hsl")){var c=l.match(/([\-\d\.e]+)/g).map(Number),h=Aa(c,4),f=h[0],d=h[1],u=h[2],p=h[3];p===void 0&&(p=1),f/=360,d/=100,u/=100,s.hsla=[f,d,u,p]}else if(l.startsWith("rgb")){var m=l.match(/([\-\d\.e]+)/g).map(Number),F=Aa(m,4),g=F[0],w=F[1],b=F[2],y=F[3];y===void 0&&(y=1),s.rgba=[g,w,b,y]}else l.startsWith("#")?s.rgba=i.hexToRgb(l):s.rgba=i.nameToRgb(l)||i.hexToRgb(l)}if(e!==void 0)if(Array.isArray(e))this.rgba=e;else if(n===void 0){var o=e&&""+e;o&&a(o.toLowerCase())}else this.rgba=[e,t,n,r===void 0?1:r]}return Uh(i,[{key:"printRGB",value:function(t){var n=t?this.rgba:this.rgba.slice(0,3),r=n.map(function(s,a){return Hu(s,a===3?3:0)});return t?"rgba("+r+")":"rgb("+r+")"}},{key:"printHSL",value:function(t){var n=[360,100,100,1],r=["","%","%",""],s=t?this.hsla:this.hsla.slice(0,3),a=s.map(function(o,l){return Hu(o*n[l],l===3?3:1)+r[l]});return t?"hsla("+a+")":"hsl("+a+")"}},{key:"printHex",value:function(t){var n=this.hex;return t?n:n.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=i.hslToRgb(this._hsla)},set:function(t){t.length===3&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=i.rgbToHsl(this._rgba)},set:function(t){t.length===3&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){var t=this.rgba,n=t.map(function(r,s){return s<3?r.toString(16):Math.round(r*255).toString(16)});return"#"+n.map(function(r){return r.padStart(2,"0")}).join("")},set:function(t){this.rgba=i.hexToRgb(t)}}],[{key:"hexToRgb",value:function(t){var n=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!n.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var r=n.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(s){return parseInt(s,16)});return r[3]=r[3]/255,r}},{key:"nameToRgb",value:function(t){var n=t.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),r=V6[n];return r===void 0?r:i.hexToRgb(r.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var n=Aa(t,4),r=n[0],s=n[1],a=n[2],o=n[3];r/=255,s/=255,a/=255;var l=Math.max(r,s,a),c=Math.min(r,s,a),h=void 0,f=void 0,d=(l+c)/2;if(l===c)h=f=0;else{var u=l-c;switch(f=d>.5?u/(2-l-c):u/(l+c),l){case r:h=(s-a)/u+(s<a?6:0);break;case s:h=(a-r)/u+2;break;case a:h=(r-s)/u+4;break}h/=6}return[h,f,d,o]}},{key:"hslToRgb",value:function(t){var n=Aa(t,4),r=n[0],s=n[1],a=n[2],o=n[3],l=void 0,c=void 0,h=void 0;if(s===0)l=c=h=a;else{var f=function(F,g,w){return w<0&&(w+=1),w>1&&(w-=1),w<.16666666666666666?F+(g-F)*6*w:w<.5?g:w<.6666666666666666?F+(g-F)*(.6666666666666666-w)*6:F},d=a<.5?a*(1+s):a+s-a*s,u=2*a-d;l=f(u,d,r+1/3),c=f(u,d,r),h=f(u,d,r-1/3)}var p=[l*255,c*255,h*255].map(Math.round);return p[3]=o,p}}]),i}(),G6=function(){function i(){Oh(this,i),this._events=[]}return Uh(i,[{key:"add",value:function(t,n,r){t.addEventListener(n,r,!1),this._events.push({target:t,type:n,handler:r})}},{key:"remove",value:function(t,n,r){this._events=this._events.filter(function(s){var a=!0;return t&&t!==s.target&&(a=!1),n&&n!==s.type&&(a=!1),r&&r!==s.handler&&(a=!1),a&&i._doRemove(s.target,s.type,s.handler),!a})}},{key:"destroy",value:function(){this._events.forEach(function(t){return i._doRemove(t.target,t.type,t.handler)}),this._events=[]}}],[{key:"_doRemove",value:function(t,n,r){t.removeEventListener(n,r,!1)}}]),i}();function $6(i){var e=document.createElement("div");return e.innerHTML=i,e.firstElementChild}function Nl(i,e,t){var n=!1;function r(l,c,h){return Math.max(c,Math.min(l,h))}function s(l,c,h){if(h&&(n=!0),!!n){l.preventDefault();var f=e.getBoundingClientRect(),d=f.width,u=f.height,p=c.clientX,m=c.clientY,F=r(p-f.left,0,d),g=r(m-f.top,0,u);t(F/d,g/u)}}function a(l,c){var h=l.buttons===void 0?l.which:l.buttons;h===1?s(l,l,c):n=!1}function o(l,c){l.touches.length===1?s(l,l.touches[0],c):n=!1}i.add(e,"mousedown",function(l){a(l,!0)}),i.add(e,"touchstart",function(l){o(l,!0)}),i.add(window,"mousemove",a),i.add(e,"touchmove",o),i.add(window,"mouseup",function(l){n=!1}),i.add(e,"touchend",function(l){n=!1}),i.add(e,"touchcancel",function(l){n=!1})}var j6=`linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,
                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em`,W6=360,om="keydown",va="mousedown",Bl="focusin";function gi(i,e){return(e||document).querySelector(i)}function K6(i){i.preventDefault(),i.stopPropagation()}function Tl(i,e,t,n,r){i.add(e,om,function(s){t.indexOf(s.key)>=0&&n(s)})}var lm=function(){function i(e){Oh(this,i),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new G6,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return Uh(i,[{key:"setOptions",value:function(t){var n=this;if(!t)return;var r=this.settings;function s(c,h,f){for(var d in c)h[d]=c[d]}if(t instanceof HTMLElement)r.parent=t;else{r.parent&&t.parent&&r.parent!==t.parent&&(this._events.remove(r.parent),this._popupInited=!1),s(t,r),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var a=t.color||t.colour;a&&this._setColor(a)}var o=r.parent;if(o&&r.popup&&!this._popupInited){var l=function(h){return n.openHandler(h)};this._events.add(o,"click",l),Tl(this._events,o,[" ","Spacebar","Enter"],l),this._popupInited=!0}else t.parent&&!r.popup&&this.show()}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var n=t&&t.type===om?this._domEdit:this.domElement;setTimeout(function(){return n.focus()},100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var n=t&&t.type,r=!1;if(!t)r=!0;else if(n===va||n===Bl){var s=(this.__containedEvent||0)+100;t.timeStamp>s&&(r=!0)}else K6(t),r=!0;r&&this.hide()&&(this.settings.parent.style.pointerEvents="",n!==va&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,n){this.closeHandler(),this.setOptions(t),n&&this.openHandler()}},{key:"setColor",value:function(t,n){this._setColor(t,{silent:n})}},{key:"_setColor",value:function(t,n){if(typeof t=="string"&&(t=t.trim()),!!t){n=n||{};var r=void 0;try{r=new Q6(t)}catch(a){if(n.failSilently)return;throw a}if(!this.settings.alpha){var s=r.hsla;s[3]=1,r.hsla=s}this.colour=this.color=r,this._setHSLA(null,null,null,null,n)}}},{key:"setColour",value:function(t,n){this.setColor(t,n)}},{key:"show",value:function(){var t=this.settings.parent;if(!t)return!1;if(this.domElement){var n=this._toggleDOM(!0);return this._setPosition(),n}var r=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',s=$6(r);return this.domElement=s,this._domH=gi(".picker_hue",s),this._domSL=gi(".picker_sl",s),this._domA=gi(".picker_alpha",s),this._domEdit=gi(".picker_editor input",s),this._domSample=gi(".picker_sample",s),this._domOkay=gi(".picker_done button",s),this._domCancel=gi(".picker_cancel button",s),s.classList.add("layout_"+this.settings.layout),this.settings.alpha||s.classList.add("no_alpha"),this.settings.editor||s.classList.add("no_editor"),this.settings.cancelButton||s.classList.add("no_cancel"),this._ifPopup(function(){return s.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,n=this,r=this.domElement,s=this._events;function a(c,h,f){s.add(c,h,f)}a(r,"click",function(c){return c.preventDefault()}),Nl(s,this._domH,function(c,h){return n._setHSLA(c)}),Nl(s,this._domSL,function(c,h){return n._setHSLA(null,c,1-h)}),this.settings.alpha&&Nl(s,this._domA,function(c,h){return n._setHSLA(null,null,null,1-h)});var o=this._domEdit;a(o,"input",function(c){n._setColor(this.value,{fromEditor:!0,failSilently:!0})}),a(o,"focus",function(c){var h=this;h.selectionStart===h.selectionEnd&&h.select()}),this._ifPopup(function(){var c=function(d){return t.closeHandler(d)};a(window,va,c),a(window,Bl,c),Tl(s,r,["Esc","Escape"],c);var h=function(d){t.__containedEvent=d.timeStamp};a(r,va,h),a(r,Bl,h),a(t._domCancel,"click",c)});var l=function(h){t._ifPopup(function(){return t.closeHandler(h)}),t.onDone&&t.onDone(t.colour)};a(this._domOkay,"click",l),Tl(s,r,["Enter"],l)}},{key:"_setPosition",value:function(){var t=this.settings.parent,n=this.domElement;t!==n.parentNode&&t.appendChild(n),this._ifPopup(function(r){getComputedStyle(t).position==="static"&&(t.style.position="relative");var s=r===!0?"popup_right":"popup_"+r;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(a){a===s?n.classList.add(a):n.classList.remove(a)}),n.classList.add(s)})}},{key:"_setHSLA",value:function(t,n,r,s,a){a=a||{};var o=this.colour,l=o.hsla;[t,n,r,s].forEach(function(c,h){(c||c===0)&&(l[h]=c)}),o.hsla=l,this._updateUI(a),this.onChange&&!a.silent&&this.onChange(o)}},{key:"_updateUI",value:function(t){if(!this.domElement)return;t=t||{};var n=this.colour,r=n.hsla,s="hsl("+r[0]*W6+", 100%, 50%)",a=n.hslString,o=n.hslaString,l=this._domH,c=this._domSL,h=this._domA,f=gi(".picker_selector",l),d=gi(".picker_selector",c),u=gi(".picker_selector",h);function p(T,A,C){A.style.left=C*100+"%"}function m(T,A,C){A.style.top=C*100+"%"}p(l,f,r[0]),this._domSL.style.backgroundColor=this._domH.style.color=s,p(c,d,r[1]),m(c,d,1-r[2]),c.style.color=a,m(h,u,1-r[3]);var F=a,g=F.replace("hsl","hsla").replace(")",", 0)"),w="linear-gradient("+[F,g]+")";if(this._domA.style.background=w+", "+j6,!t.fromEditor){var b=this.settings.editorFormat,y=this.settings.alpha,v=void 0;switch(b){case"rgb":v=n.printRGB(y);break;case"hsl":v=n.printHSL(y);break;default:v=n.printHex(y)}this._domEdit.value=v}this._domSample.style.color=o}},{key:"_ifPopup",value:function(t,n){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):n&&n()}},{key:"_toggleDOM",value:function(t){var n=this.domElement;if(!n)return!1;var r=t?"":"none",s=n.style.display!==r;return s&&(n.style.display=r),s}}]),i}();{var Ml=document.createElement("style");Ml.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(Ml),lm.StyleElement=Ml}function Y6(i){if(Yn[i])return Yn[i];if(Yn["chr"+i]){const e=Yn["chr"+i];return Yn[i]=e,e}else{const e=Z6();return Yn[i]=e,e}}function Z6(i,e){var t=Math.round(Math.random()*255).toString(10),n=Math.round(Math.random()*255).toString(10),r=Math.round(Math.random()*255).toString(10);return"rgb("+t+","+n+","+r+")"}const Yn={chrX:"rgb(204, 153, 0)",chrY:"rgb(153, 204, 0",chrUn:"rgb(50, 50, 50)",chr1:"rgb(80, 80, 255)",chrI:"rgb(139, 155, 187)",chr2:"rgb(206, 61, 50)",chrII:"rgb(206, 61, 50)",chr2a:"rgb(216, 71, 60)",chr2b:"rgb(226, 81, 70)",chr3:"rgb(116, 155, 88)",chrIII:"rgb(116, 155, 88)",chr4:"rgb(240, 230, 133)",chrIV:"rgb(240, 230, 133)",chr5:"rgb(70, 105, 131)",chr6:"rgb(186, 99, 56)",chr7:"rgb(93, 177, 221)",chr8:"rgb(128, 34, 104)",chr9:"rgb(107, 215, 107)",chr10:"rgb(213, 149, 167)",chr11:"rgb(146, 72, 34)",chr12:"rgb(131, 123, 141)",chr13:"rgb(199, 81, 39)",chr14:"rgb(213, 143, 92)",chr15:"rgb(122, 101, 165)",chr16:"rgb(228, 175, 105)",chr17:"rgb(59, 27, 83)",chr18:"rgb(205, 222, 183)",chr19:"rgb(97, 42, 121)",chr20:"rgb(174, 31, 99)",chr21:"rgb(231, 199, 111)",chr22:"rgb(90, 101, 94)",chr23:"rgb(204, 153, 0)",chr24:"rgb(153, 204, 0)",chr25:"rgb(51, 204, 0)",chr26:"rgb(0, 204, 51)",chr27:"rgb(0, 204, 153)",chr28:"rgb(0, 153, 204)",chr29:"rgb(10, 71, 255)",chr30:"rgb(71, 117, 255)",chr31:"rgb(255, 194, 10)",chr32:"rgb(255, 209, 71)",chr33:"rgb(153, 0, 51)",chr34:"rgb(153, 26, 0)",chr35:"rgb(153, 102, 0)",chr36:"rgb(128, 153, 0)",chr37:"rgb(51, 153, 0)",chr38:"rgb(0, 153, 26)",chr39:"rgb(0, 153, 102)",chr40:"rgb(0, 128, 153)",chr41:"rgb(0, 51, 153)",chr42:"rgb(26, 0, 153)",chr43:"rgb(102, 0, 153)",chr44:"rgb(153, 0, 128)",chr45:"rgb(214, 0, 71)",chr46:"rgb(255, 20, 99)",chr47:"rgb(0, 214, 143)",chr48:"rgb(20, 255, 177)"};class X6{constructor(e){this.tracks=[],this.chordSets=[]}addChordSet(e){this.chordSets=this.chordSets.filter(n=>n.name!==e.name),this.chordSets.push(e);let t=this.tracks.find(n=>e.trackName===n.name);t&&(t.chordSets=t.chordSets.filter(n=>n.name!==e.name),t.chordSets.push(e)),t||(t=new J6(e),this.tracks.push(t))}clearChords(){this.tracks=[],this.chordSets=[]}getTrack(e){return this.tracks.find(t=>e===t.name)}getChordSet(e){return this.chordSets.find(t=>e===t.name)}}class J6{constructor(e){this.name=e.trackName,this.color=e.trackColor,this.visible=!0,this.chordSets=[e],this.id=eC()}get chords(){if(this.chordSets.length===1)return this.chordSets[0].chords;const e=[];for(let t of this.chordSets)for(let n of t.chords)e.push(n);return e}}function eC(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}const Pu=Math.exp(5);class qh{static isInstalled(){return window.JBrowseReactCircularGenomeView!==void 0&&window.React!==void 0&&window.ReactDOM!==void 0}constructor(e,t){if(t=t||{},this.config=t,qh.isInstalled()){this.parent=e,this.groupByTrack=t.groupByTrack===!0,this.chordManager=new X6(t);const n=document.createElement("div");n.className="igv-circview-container",e.appendChild(n),this.createControls(n),this.resetControlPanel();const r=document.createElement("div");r.className="igv-circview-circular-genome-view",n.appendChild(r),this.container=r,t.assembly&&this.setAssembly(t.assembly),this.width=t.width||500,this.height=t.height||500,this.setSize(this.width,this.height)}else console.error("JBrowse circular view is not installed")}createControls(e){const t=document.createElement("div");t.className="igv-circview-toolbar",e.appendChild(t),this.toolbar=t;const n=document.createElement("div");n.className="igv-circview-track-panel",e.appendChild(n),this.controlPanel=n,this.controlPanel.style.display="none";const r=document.createElement("div");r.className="igv-circview-toolbar-button-container",this.toolbar.appendChild(r),this.showControlsButton=document.createElement("div"),this.showControlsButton.className="igv-circview-button",r.appendChild(this.showControlsButton),this.showControlsButton.innerText=this.controlPanel.style.display==="none"?"Show Controls":"Hide Controls",this.showControlsButton.addEventListener("click",a=>{this.controlPanel.querySelectorAll("div").length>0&&(this.controlPanel.style.display==="none"?(this.controlPanel.style.display="flex",a.target.innerText="Hide Controls"):(this.controlPanel.style.display="none",a.target.innerText="Show Controls"))});let s=document.createElement("div");s.className="igv-circview-button",r.appendChild(s),s.innerText="Clear All",s.addEventListener("click",()=>{this.clearChords()}),this.config.showCloseButton!==!1&&(s=document.createElement("div"),s.className="igv-circview-button",r.appendChild(s),s.innerText="Close",s.addEventListener("click",()=>{this.visible=!1}))}resetControlPanel(){this.controlPanel.innerHTML="",this.controlPanel.appendChild(this.createGroupByCB());const e=this.groupByTrack?this.chordManager.tracks:this.chordManager.chordSets;for(let t of e)this.addToControlPanel(t)}createGroupByCB(){const e=document.createElement("input");e.type="checkbox",e.id="groupByCB",e.style.width="1.4em",e.style.height="1.4em",e.checked=this.groupByTrack,e.onclick=r=>{this.groupByTrack=r.target.checked,this.resetControlPanel(),this.render()};const t=document.createElement("label");t.for="groupByCB",t.innerText="Group by track",t.style.color="black",t.style.paddingLeft="10px";const n=document.createElement("div");return n.style.width="100%",n.style.paddingTop="5px",n.style.paddingBottom="5px",n.style.background="rgb(216, 230, 234)",n.appendChild(e),n.appendChild(t),n}addToControlPanel(e){const t=document.createElement("div");this.controlPanel.appendChild(t);const n=document.createElement("div");n.className="igv-circview-button",t.appendChild(n),n.innerText=e.visible===!0?"Hide":"Show",n.addEventListener("click",f=>{e.visible===!0?(this.hideChordSet(e.name),f.target.innerText="Show"):(this.showChordSet(e.name),f.target.innerText="Hide")});const r=document.createElement("input"),s=f=>Math.exp(f/200)/Pu,a=f=>200*Math.log(f*Pu),o=document.createElement("div");o.className="igv-circview-button",o.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;",t.appendChild(o),o.style.backgroundColor=Rl(e.color,1);const l={parent:o,popup:"right",editorFormat:"rgb",color:e.color,onChange:({rgbaString:f})=>{o.style.backgroundColor=Rl(f,1),this.setColor(e.name,f),r.value=a(Ou(e.color))}},c=new lm(l);r.setAttribute("title","Adjust transparency of arcs"),r.type="range",r.style.width="100px",r.style.marginRight="10px",r.setAttribute("class","range"),r.setAttribute("min","0"),r.setAttribute("max","1000"),r.value=a(Ou(e.color)),r.oninput=()=>{const f=s(r.value);this.setColor(e.name,Rl(e.color,f)),c.setColor(e.color)},t.appendChild(r);const h=document.createElement("div");h.style.color="black",t.appendChild(h),h.innerText=h.title=e.name}setAssembly(e){const t=this.genomeId||qu();if(this.genomeId===t)return;this.chordManager.clearChords(),this.genomeId=t,this.chrNames=new Set(e.chromosomes.map(s=>Uu(s.name)));const n=[],r=[];for(let s of e.chromosomes){const a=Uu(s.name);r.push(s.color||Y6(a)),n.push({refName:a,uniqueId:a,start:0,end:s.bpLength})}this.assembly={name:e.name,sequence:{trackId:t,type:"ReferenceSequenceTrack",adapter:{type:"FromConfigSequenceAdapter",features:n}},refNameColors:r},this.render()}addChords(e,t={}){const n=t.name||t.track||"*",r=n.split(" ")[0].replaceAll("%20"," "),a={name:n.replaceAll("%20"," "),trackName:r,chords:e,color:t.color||"black",trackColor:t.trackColor||t.color||"black",visible:!0,id:t.id||qu()};this.chordManager.addChordSet(a),this.resetControlPanel(),this.render()}setSize(e,t){if(t=t||e,this.width=e,this.height=t,this.viewState){const n=this.viewState.session.view;n.setWidth(e),n.setHeight(t),n.setBpPerPx(n.minBpPerPx)}}getSize(){return Math.min(this.width,this.height)}clearChords(){this.chordManager.clearChords(),this.resetControlPanel(),this.render()}clearSelection(){this.viewState.pluginManager.rootModel.session.clearSelection()}show(){this.parent.style.display="block"}hide(){this.parent.style.display="none"}get visible(){return this.parent.style.display!=="none"}set visible(e){this.parent.style.display=e?"block":"none"}hideChordSet(e){let t=this.getChordSet(e);t?(t.visible=!1,this.render()):console.warn(`No track with name: ${name}`)}showChordSet(e){let t=this.getChordSet(e);t?(t.visible=!0,this.render()):console.warn(`No track with name: ${e}`)}deleteTrack(e){let t=this.tracks.findIndex(n=>e===n.name);t>=0&&this.tracks.splice(t,1),this.render()}getChordSet(e){return this.groupByTrack?this.chordManager.getTrack(e):this.chordManager.getChordSet(e)}setColor(e,t){const n=this.getChordSet(e);if(n){n.color=t;const r=n.id;for(let s of this.viewState.config.tracks)if(r===s.trackId){s.displays[0].renderer.strokeColor.set(t);break}}}render(){const{createViewState:e,JBrowseCircularGenomeView:t}=JBrowseReactCircularGenomeView;ReactDOM.unmountComponentAtNode(this.container);const n=(this.groupByTrack?this.chordManager.tracks:this.chordManager.chordSets).filter(o=>o.visible),r=[],s=[];for(let o of n)r.push({trackId:o.id,name:o.name,assemblyNames:["forIGV"],type:"VariantTrack",adapter:{type:"FromConfigAdapter",features:o.chords}}),s.push(o.color);this.viewState=e({assembly:this.assembly,tracks:r});for(let o=0;o<n.length;o++)this.viewState.config.tracks[o].displays[0].renderer.strokeColor.set(s[o]);this.element=React.createElement(t,{viewState:this.viewState}),this.setSize(this.width,this.height),ReactDOM.render(this.element,this.container);const a=this.config.onChordClick||tC;for(let o=0;o<n.length;o++)this.viewState.session.view.showTrack(this.viewState.config.tracks[o].trackId),this.viewState.pluginManager.jexl.addFunction("onChordClick",a),this.viewState.config.tracks[o].displays[0].onChordClick.set("jexl:onChordClick(feature, track, pluginManager)")}}function Rl(i,e){const[t,n,r,s]=i.split(",");return`${t},${n},${r},${e})`}function Ou(i){return i.startsWith("rgba(")?Number(i.split(",")[3].replace(")","")):1}function Uu(i){return i.startsWith("chr")?i.substring(3):i}function tC(i,e,t){console.log(i)}function qu(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}function iC(){const i=`.igv-circview-container {
  width: fit-content;
  height: fit-content;
  box-sizing: content-box;
  color: dimgray;
  font-family: "Open Sans", sans-serif;
  font-size: 12px;
  background-color: white;
  border-color: dimgray;
  border-style: solid;
  border-width: thin;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: flex-start;
}

.igv-circview-toolbar {
  position: relative;
  width: 100%;
  height: 32px;
  background-color: lightgrey;
  border-bottom-style: solid;
  border-bottom-color: dimgray;
  border-bottom-width: thin;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-between;
  align-items: center;
}

.igv-circview-toolbar-button-container {
  height: 100%;
  width: fit-content;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
}
.igv-circview-toolbar-button-container > div {
  margin: 4px;
}

.igv-circview-track-panel {
  z-index: 1024;
  position: absolute;
  top: 33px;
  left: 0;
  width: 100%;
  height: fit-content;
  border-bottom-style: solid;
  border-bottom-color: dimgray;
  border-bottom-width: thin;
  background-color: white;
  display: flex;
  flex-flow: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: flex-start;
}
.igv-circview-track-panel > div {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
}
.igv-circview-track-panel > div > div {
  margin: 4px;
}

.igv-circview-swatch-button {
  cursor: pointer;
  padding: 5px;
  width: 8px;
  height: 8px;
  border: 1px solid #8d8b8b;
  border-radius: 16px;
}

.igv-circview-button {
  cursor: pointer;
  padding: 5px;
  color: #444;
  vertical-align: middle;
  text-align: center;
  font-family: "Open Sans", sans-serif;
  font-size: 12px;
  border: 1px solid #8d8b8b;
  border-radius: 4px;
  background: #efefef;
  box-shadow: 0 0 5px -1px rgba(0, 0, 0, 0.2);
}

.igv-circview-button:hover {
  background: #efefef;
  box-shadow: 0 0 5px -1px rgba(0, 0, 0, 0.6);
}

.igv-circview-button:active {
  color: #007bff;
  box-shadow: 0 0 5px -1px rgba(0, 0, 0, 0.6);
}

/*# sourceMappingURL=circular-view.css.map */
`,e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=i,document.head.insertBefore(e,document.head.childNodes[document.head.childNodes.length-1])}typeof document<"u"&&(function(e){for(let t of document.styleSheets)if(t=t.href?t.href.replace(/^.*[\\\/]/,""):"",t===e)return!0;return!1}("circular-view.css")||iC());const nC=1e6,vi=i=>i.startsWith("chr")?i.substring(3):i,rC=i=>{const e=[];for(let t of i)if(t.paired)t.firstAlignment&&t.secondAlignment&&e.push({uniqueId:t.readName,refName:vi(t.firstAlignment.chr),start:t.firstAlignment.start,end:t.firstAlignment.end,mate:{refName:vi(t.secondAlignment.chr),start:t.secondAlignment.start,end:t.secondAlignment.end}});else{const n=t.mate;n&&n.chr&&n.position&&e.push({uniqueId:t.readName,refName:vi(t.chr),start:t.start,end:t.end,mate:{refName:vi(n.chr),start:n.position-1,end:n.position}})}return e},sC=i=>{const e=n=>{const r=n.tags().SA,s=O0(r);let a=0;for(let o of s)o.start!==n.start&&t.push({uniqueId:`${n.readName}_${a++}`,refName:vi(n.chr),start:n.start,end:n.end,mate:{refName:vi(o.chr),start:o.start,end:o.start+o.lenOnRef}})},t=[];for(let n of i)n.paired?(e(n.firstAlignment),n.secondAlignment&&e(n.secondAlignment)):e(n);return t},aC=i=>i.map(e=>{const t=e._f||e;return{uniqueId:`${t.chr1}:${t.start1}-${t.end1}_${t.chr2}:${t.start2}-${t.end2}`,refName:vi(t.chr1),start:t.start1,end:t.end1,mate:{refName:vi(t.chr2),start:t.start2,end:t.end2}}}),oC=i=>i.filter(t=>{const n=t._f||t;return n.info&&n.info.CHR2&&n.info.END&&(n.info.CHR2!==n.chr||Math.abs(Number.parseInt(n.info.END)-n.pos)>nC)}).map(t=>{const n=t._f||t,r=Number.parseInt(n.info.END),s=r-100,a=r+100;return{uniqueId:`${n.chr}:${n.start}-${n.end}_${n.info.CHR2}:${n.info.END}`,refName:vi(n.chr),start:n.start,end:n.end,mate:{refName:vi(n.info.CHR2),start:s,end:a}}});function Vu(i){const e=[],t=[];if(i.wgChromosomeNames)for(let n of i.wgChromosomeNames){const r=i.getChromosome(n);t.push(vr(r.name)),e.push({name:r.name,bpLength:r.bpLength})}return e}function po(i,e,t,n){const r=e.color||"rgb(0,0,255)",s=qe.addAlpha(t.chr==="all"?r:vr(t.chr),n),a=qe.addAlpha(r,n),o=e.name.replaceAll(" ","%20"),l=t.chr==="all"?o:`${o}  ${t.chr}:${t.start}-${t.end}`;e.browser.circularView.addChords(i,{track:l,color:s,trackColor:a}),e.browser.circularViewVisible||(e.browser.circularViewVisible=!0)}function lC(i,e){return new qh(i,{onChordClick:(n,r,s)=>{const a=n.data,o=a.mate;l(a),l(o);function l(c){c.chr=e.genome.getChromosomeName(c.refName);let h=!1;for(let f of e.referenceFrameList){const d=uo.fromLocusString(f.getLocusString());if(d.contains(c)){h=!0;break}else if(d.overlaps(c)){f.extend(c),h=!0;break}}if(!h){const d=(c.start+c.end)/2;e.addMultiLocusPanel(c.chr,d-2e3,d+2e3)}}}})}class cC{constructor(e,{minTLENPercentile:t,maxTLENPercentile:n}){this.totalCount=0,this.frCount=0,this.rfCount=0,this.ffCount=0,this.sumF=0,this.sumF2=0,this.lp=t===void 0?.1:t,this.up=n===void 0?99.5:n,this.isizes=[],this.compute(e)}compute(e){for(let s of e)if(s.isProperPair()){var t=Math.abs(s.fragmentLength);this.sumF+=t,this.sumF2+=t*t,this.isizes.push(t);var n=s.pairOrientation;if(typeof n=="string"&&n.length===4){var r=""+n.charAt(0)+n.charAt(2);switch(r){case"FF":case"RR":this.ffCount++;break;case"FR":this.frCount++;break;case"RF":this.rfCount++}}this.totalCount++}this.ffCount/this.totalCount>.9?this.orienation="ff":this.frCount/this.totalCount>.9?this.orienation="fr":this.rfCount/this.totalCount>.9&&(this.orienation="rf"),this.minTLEN=this.lp===0?0:Qu(this.isizes,this.lp),this.maxTLEN=Qu(this.isizes,this.up)}}function Qu(i,e){if(i.length!==0){var t=Math.floor(i.length*(e/100));return i.sort(function(n,r){return n-r}),i[t]}}const hC="rgb(255,0,0)",cm="rgb(255,0,255)",fC="rgb(51,0,111)",dC="rgb(111, 78, 129)",uC="rgb(246, 200, 95)",pC="rgb(157, 216, 102)",gC="rgb(255, 160, 86)",mC="rgb(141, 221, 208)",wC="rgb(202, 71, 47)",Xs="rgb(0,0,255)",bC="rgb(132, 178, 158)",Mt=new Map;Mt.set("m",hC);Mt.set("h",cm);Mt.set("o",dC);Mt.set("f",uC);Mt.set("c",pC);Mt.set("g",gC);Mt.set("e",mC);Mt.set("b",wC);Mt.set("h",cm);Mt.set("a",fC);Mt.set("NONE_A",Xs);Mt.set("NONE_C",Xs);Mt.set("NONE_T",Xs);Mt.set("NONE_G",Xs);Mt.set("NONE_N",Xs);const Dl=new Map;function Uc(i,e,t){let n=FC(i),r=hr(e);if(r>255)return n;const s=i+r+t,a=256*0;if(r<a&&(r=0),!Dl.has(s)){const o=t==="basemod2"?Math.max(20,Math.min(255,20+(r*r/50-4*r+200))):Math.max(20,Math.min(255,.006127*r*r)),[l,c,h]=qe.rgbComponents(n);Dl.set(s,`rgba(${l},${c},${h},${o/255})`)}return Dl.get(s)}function FC(i,e){return Mt.has(i)?Mt.get(i):bC}class yC{constructor(e){this.alignmentTrack=e}updateContext(e){this.context=e}drawModifications(e,t,n,r,s,a){const{ctx:o,pixelEnd:l,bpStart:c,bpPerPixel:h}=r,f=e.getBaseModificationSets();if(f){let d;const u=s.split(":");u.length==2&&(s=u[0],d=u[1]);for(let p of e.blocks){if(p.type==="S")continue;const m=t,F=n;let g=Math.max(1,1/h);for(let w=p.seqOffset;w<p.seqOffset+p.len;w++){let b=(p.start+(w-p.seqOffset)-c)/h;if(b>l)break;if(b+g<0)continue;let y=-1,v=255,T,A=0;for(let C of f)if(!(d&&C.modification!==d)&&C.containsPosition(w)){const k=hr(C.likelihoods.get(w));v-=k,(!T||k>y)&&(T=C.modification,A=C.canonicalBase,y=k)}if(T){const C=a*255;let k;v>y&&s==="basemod2"&&v>=C?k=Uc("NONE_"+A,v,s):y>=C&&(k=Uc(T,y,s)),o.fillStyle=k,g<3&&(g=3,b--),o.fillRect(b,m,g,Math.max(1,F-2))}}}}}}const Gu=5,Ll=10,$u=10,AC="rgb(185, 185, 185)",vC="rgb(200, 200, 200)",_C="#00ff00",ju=20,CC=new Set(["firstOfPairStrand"]);class hm extends mt{constructor(t,n){super(t,n);ke(this,"_colorTables",new Map);ke(this,"_baseModifications",new Set);(t.colorTable||t.tagColorTable)&&(this.colorTable=new Sn(t.tagColorTable)),t.largeFragmentLengthColor&&(this.largeTLENColor=t.largeFragmentLengthColor),t.pairOrienation&&(this.expectedPairOrientation=t.pairOrientation),t.smallFragmentLengthColor&&(this.smallTLENColor=t.smallFragmentLengthColor),t.largeFragmentLengthColor&&(this.largeTLENColor=t.largeFragmentLengthColor),t.minFragmentLength&&(this.minTLEN=t.minFragmentLength),t.maxFragmentLength&&(this.maxTLEN=t.maxFragmentLength),t.displayMode&&(this.displayMode=t.displayMode.toUpperCase()),t.colorBy&&t.colorByTag&&(this.colorBy=t.colorBy+":"+t.colorByTag),this.featureSource=this.parent.featureSource,this.top=t.coverageTrackHeight===0?0:t.coverageTrackHeight+5,this.pairColors={RL:this.rlColor,RR:this.rrColor,LL:this.llColor},t.highlightedReads&&this.setHighlightedReads(t.highlightedReads),this.hasPairs=!1,this.hasSupplemental=!1,this._groupByTags=[],this._groupByPositions=[],t.groupBy&&(this.groupBy=t.groupBy,t.groupBy.startsWith("base:")&&this._groupByPositions.push(t.groupBy.substring(5)),t.groupBy.startsWith("tag:")&&this._groupByTags.push(t.groupBy.substring(4))),this._locusChange=kC.bind(this),this.browser.on("locuschange",this._locusChange)}init(t){this.parent=t.parent,delete t.parent,super.init(t)}dispose(){this.browser.off("locuschage",this._locusChange)}get baseModRenderer(){return this._baseModRenderer||(this._baseModRenderer=new yC(this)),this._baseModRenderer}get baseModificationThreshold(){return this.parent.baseModificationThreshold}setTop(t,n){this.top=t.height===0||n===!1?0:5+t.height}setHighlightedReads(t,n){if(!Array.isArray(t)||!t.every(r=>typeof r=="string"))throw new Error("AlignmentTrack.setHighlightedReads() only accept array of strings");n&&(this.highlightColor=n),this.highlightedReads=new Set(t)}computePixelHeight(t){if(t.packedGroups){let n=t.hasDownsampledIntervals()?Ll+Gu:0;const r=this.displayMode==="SQUISHED"?this.squishedRowHeight:this.alignmentRowHeight;for(let s of t.packedGroups.values())n+=r*s.length+$u;return n+5}else return 0}draw(t){const n=t.features,r=t.context,s=t.bpPerPixel,a=t.bpStart,o=t.pixelWidth,l=a+o*s+1,c=this.showSoftClips,h=this.showAllBases,f=this.browser.nucleotideColors;r.save();for(let y of n.baseModificationKeys)this._baseModifications.add(y.modification);let d=n.sequence;d&&(d=d.toUpperCase());let u=0;this.colorBy||(this.colorBy=this.hasPairs?"unexpectedPair":"none");let p=t.pixelTop;this.top&&r.translate(0,this.top);const m=p+t.pixelHeight;n.hasDownsampledIntervals()?(u=Ll+Gu,n.downsampledIntervals.forEach(function(y){var v=(y.start-a)/s,T=(y.end-a)/s;T-v>5&&(v+=1,T-=1),de.fillRect(r,v,2,T-v,Ll-2,{fillStyle:"black"})})):u=0,this.alignmentsYOffset=u;const F=this.displayMode==="SQUISHED"?this.squishedRowHeight:this.alignmentRowHeight,g=n.packedGroups;if(g){let y=u;for(let v of g.keys()){const T=g.get(v),A=T.rows,C=A.length;T.pixelTop=y;for(let k=0;k<C;k++){const I=A[k],B=F<=4?F:F-2;if(y>m)break;if(y+B<p){y+=F;continue}for(let M of I.alignments)if(this.browser.circularView&&(this.hasSupplemental=this.hasSupplemental||M.hasTag("SA")),!(M.start+M.lengthOnRef<a)){if(M.start>l)break;M.hidden!==!0&&(M instanceof Rs?(w.call(this,M,y,B),b.call(this,M.firstAlignment,y,B),M.secondAlignment&&b.call(this,M.secondAlignment,y,B)):b.call(this,M,y,B))}y+=F}if(T.pixelBottom=y,this.groupBy&&v){r.save(),r.font="400 12px sans-serif";const k=r.measureText(v),I=k.width+10,B=-t.pixelShift+t.viewportWidth-I-10,M=k.actualBoundingBoxAscent+k.actualBoundingBoxDescent+10,N=Math.min(T.pixelTop+M-1,T.pixelBottom);r.textAlign="center",r.fillStyle="white",r.strokeStyle="lightGray",de.roundRect(r,B,N-k.actualBoundingBoxAscent-5,I,M,2,1,1),r.fillStyle="black",r.fillText(v,B+I/2,N),de.dashedLine(r,0,y,o,y),r.restore(),y+=$u}}}r.restore();function w(y,v,T){var A=this.getConnectorColor(y.firstAlignment),C=(y.connectingStart-a)/s,k=(y.connectingEnd-a)/s,I=v+T/2;y.connectingEnd<a||y.connectingStart>l||(y.mq<=0&&(A=qe.addAlpha(A,.15)),de.setProperties(r,{fillStyle:A,strokeStyle:A}),de.strokeLine(r,C,I,k,I))}function b(y,v,T){if(y.start+y.lengthOnRef<a||y.start>l)return;const A=c?y.blocks:y.blocks.filter(M=>M.type!=="S");let C=this.getAlignmentColor(y);const k=C;y.mq<=0&&(C=qe.addAlpha(C,.15)),de.setProperties(r,{fillStyle:C,strokeStyle:k});const I=[];for(let M=0;M<A.length;M++){const N=A[M];if(!(M!==A.length-1&&A[M+1].start<a)&&(I.push(...B.call(this,N,M)),N.start+N.len>l))break}if(y.gaps){const M=v+T/2;for(let N of y.gaps){const x=(N.start-a)/s,D=(N.start+N.len-a)/s,S=D-x,U=N.len.toString(),O=U.length*6,Q=x+S/2,K=N.type==="D"?this.deletionColor:this.skippedColor;if(de.strokeLine(r,x,M,D,M,{strokeStyle:K,lineWidth:2}),this.showDeletionText&&N.len>1&&S>=O+8){const G=Q-O/2;de.fillRect(r,G-1,v-1,O+2,12,{fillStyle:"white"}),de.fillText(r,U,G,v+10,{font:"normal 10px monospace",fillStyle:this.deletionTextColor})}}}if(y.insertions&&this.showInsertions){let M=-1;for(let N of y.insertions){if(this.hideSmallIndels&&N.len<=this.indelSizeThreshold||N.start<a)continue;if(N.start>l)break;const x=N.start-a,D=N.len.toString(),S=2+D.length*6,U=!this.showInsertionText||N.len===1?2:Math.round(N.len/s),O=Math.max(Math.min(S,U),2),Q=x/s-O/2;if(Q-M>2){const K={fillStyle:this.insertionColor};de.fillRect(r,Q-2,v,O+4,2,K),de.fillRect(r,Q,v+2,O,T-4,K),de.fillRect(r,Q-2,v+T-2,O+4,2,K),this.showInsertionText&&N.len>1&&U>S&&de.fillText(r,D,Q+1,v+10,{font:"normal 10px monospace",fillStyle:this.insertionTextColor}),M=Q}}}for(let{bbox:M,baseColor:N,readChar:x}of I)if(s<=.1&&M.height>=8){const S=Math.min(10,M.height);r.font=""+S+"px sans-serif";const U=M.x+M.width/2;de.strokeText(r,x,U-r.measureText(x).width/2,S-1+M.y,{strokeStyle:N})}else de.fillRect(r,M.x,M.y,M.width,M.height,{fillStyle:N});if(this.colorBy&&this.colorBy.startsWith("basemod")){const M={ctx:r,bpPerPixel:s,bpStart:a,bpEnd:l,pixelEnd:o};this.baseModRenderer.drawModifications(y,v,T,M,this.colorBy,this.baseModificationThreshold)}function B(M,N){const x=[],D=M.start-n.start,S=(M.start-a)/s,U=(M.start+M.len-a)/s,O=Math.max(1,U-S),Q=100/s,K=Math.min(F/2,Q/6),G=M.type==="S",ne=y.mq<=0||this.selectedReadName===y.readName||G||this.highlightedReads&&this.highlightedReads.has(y.readName);let H=k;this.selectedReadName===y.readName?H="red":G?H="rgb(50,50,50)":this.highlightedReads&&this.highlightedReads.has(y.readName)&&(H=this.highlightColor||_C);const $=y.strand===!0&&N===A.length-1,X=y.strand===!1&&N===0;if($|X){let te,be;$?(te=[S,U,U+K,U,S,S],be=[v,v,v+T/2,v+T,v+T,v]):X&&(te=[U,S,S-K,S,U,U],be=[v,v,v+T/2,v+T,v+T,v]),de.fillPolygon(r,te,be,{fillStyle:C}),ne&&de.strokePolygon(r,te,be,{strokeStyle:H})}else de.fillRect(r,S,v,O,T,{fillStyle:C}),ne&&(r.save(),r.strokeStyle=H,r.strokeRect(S,v,O,T),r.restore());if(G||h||this.showMismatches&&d&&y.seq&&y.seq!=="*"){const te=y.seq?y.seq.toUpperCase():void 0,be=y.qual,q=M.seqOffset,J=Math.max(1,1/s);for(let E=0,Y=M.len;E<Y;E++){const j=(M.start+E-a)/s;if(j+J<0)continue;if(j>o)break;let P=te?te.charAt(q+E):"";const fe=D+E>=0?d.charAt(D+E):"";if(P==="="&&(P=fe),P==="X"||fe!==P||G||h){let oe=f[P]||"rgb(0,0,0)";if(!G&&be!==void 0&&be.length>q+E){const ce=be[q+E];oe=xC(ce,oe)}x.push({bbox:{x:j,y:v,width:J,height:T},baseColor:oe,readChar:P})}}}return x}}}popupData(t){const n=this.getClickedObject(t);return n?n.popupData(t.genomicLocation):void 0}menuItemList(){let t=[];t.push("<hr/>");const n=ve('<div class="igv-track-menu-category">');n.text("Color by:"),t.push({name:void 0,object:n,click:void 0,init:void 0});const r=[];r.push({key:"none",label:"none"}),r.push({key:"strand",label:"read strand"}),this.hasPairs&&(r.push({key:"firstOfPairStrand",label:"first-of-pair strand"}),r.push({key:"pairOrientation",label:"pair orientation"}),r.push({key:"tlen",label:"insert size (TLEN)"}),r.push({key:"unexpectedPair",label:"pair orientation & insert size (TLEN)"})),r.push({key:"tag",label:"tag"});for(let c of r){const h=this.colorBy===void 0&&c.key==="none"||this.colorBy===c.key;t.push(this.colorByCB(c,h))}const s=this._baseModifications.size;if(s>0){t.push('<hr style="border-top:1px dotted;border-bottom: none;">');let c=s===1?"base modification":"base modification (all)";if(t.push(this.basemodColorByCB({key:"basemod",label:c})),s>1)for(let h of this._baseModifications)t.push(this.basemodColorByCB({key:"basemod:"+h,label:`base modification (${Rc(h)})`}));if(t.push('<hr style="border-top:1px dotted;border-bottom: none;">'),c=s===1?"base modification 2-color":"base modification 2-color (all)",t.push(this.basemodColorByCB({key:"basemod2",label:c})),s>1)for(let h of this._baseModifications)t.push(this.basemodColorByCB({key:"basemod2:"+h,label:`base modification 2-color (${Rc(h)})`}))}t.push("<hr/>");const a=ve('<div class="igv-track-menu-category">');a.text("Group by:"),t.push({name:void 0,object:a,click:void 0,init:void 0});const o=[];o.push({key:"none",label:"none"}),o.push({key:"strand",label:"read strand"}),this.hasPairs&&(o.push({key:"firstOfPairStrand",label:"first-of-pair strand"}),o.push({key:"pairOrientation",label:"pair orientation"}),o.push({key:"mateChr",label:"chromosome of mate"})),o.push({key:"chimeric",label:"chimeric"}),o.push({key:"supplementary",label:"supplementary flag"}),o.push({key:"readOrder",label:"read order"});for(let c of this._groupByTags)o.push({key:`tag:${c}`,label:`tag:${c}`});for(let c of this._groupByPositions)o.push({key:`base:${c}`,label:`base:${c}`});o.push({key:"tag",label:"tag..."});for(let c of o){const h=this.groupBy===void 0&&c.key==="none"||this.groupBy===c.key;t.push(this.groupByCB(c,h))}t.push("<hr/>"),t.push({object:ve(ht("Show all bases",this.showAllBases)),click:function(){this.alignmentTrack.showAllBases=!this.alignmentTrack.showAllBases,this.trackView.repaintViews()}}),t.push({object:ve(ht("Show mismatches",this.showMismatches)),click:function(){this.alignmentTrack.showMismatches=!this.alignmentTrack.showMismatches,this.trackView.repaintViews()}}),t.push({object:ve(ht("Show insertions",this.showInsertions)),click:function(){this.alignmentTrack.showInsertions=!this.alignmentTrack.showInsertions,this.trackView.repaintViews()}}),t.push({object:ve(ht("Show soft clips",this.showSoftClips)),click:function(){this.alignmentTrack.showSoftClips=!this.alignmentTrack.showSoftClips;const h=this.getCachedAlignmentContainers();for(let f of h)f.pack(this);this.trackView.repaintViews()}}),this.hasPairs&&(t.push("<hr/>"),t.push({object:ve(ht("View as pairs",this.viewAsPairs)),click:function(){const h=!this.alignmentTrack.viewAsPairs;if(h&&this.groupBy&&!CC.has(this.groupBy)){this.browser.alert.present(`'View as Pairs' is incompatible with 'Group By ${this.groupBy}'`);return}this.alignmentTrack.viewAsPairs=h;const f=this.getCachedAlignmentContainers();for(let d of f)d.pack(this);this.trackView.checkContentHeight(),this.trackView.repaintViews()}})),this.browser.circularView&&(this.hasPairs||this.hasSupplemental)&&(t.push("<hr/>"),this.hasPairs&&t.push({label:"Add discordant pairs to circular view",click:function(){for(let h of this.trackView.viewports)this.addPairedChordsForViewport(h)}}),this.hasSupplemental&&t.push({label:"Add split reads to circular view",click:function(){for(let h of this.trackView.viewports)this.addSplitChordsForViewport(h)}})),t.push("<hr/>");const l=ve('<div class="igv-track-menu-category">');l.text("Display mode:"),t.push({name:void 0,object:l,click:void 0,init:void 0});for(let c of["EXPANDED","SQUISHED","FULL"])t.push({object:ve(ht(c.toLowerCase(),this.displayMode===c)),click:function(){this.alignmentTrack.setDisplayMode(c)}});return t}setDisplayMode(t){const n=this.displayMode==="FULL"||t==="FULL";if(this.displayMode=t,n){const r=this.getCachedAlignmentContainers();for(let s of r)s.pack(this)}this.trackView.checkContentHeight(),this.trackView.repaintViews()}colorByCB(t,n){const r=ve(ht(t.label,n));return t.key!=="tag"?{name:void 0,object:r,click:function(){this.alignmentTrack.colorBy=t.key,this.trackView.repaintViews()},init:void 0}:{name:void 0,object:r,dialog:function(a){const o=this.alignmentTrack.colorBy.startsWith("tag:")?this.alignmentTrack.colorBy.substring(4):"";this.browser.inputDialog.present({label:"Tag Name",value:o,callback:l=>{const c=this.alignmentTrack;l?(c.colorBy="tag:"+l,c.colorTable||(c.colorTable=new Bs("Set1"))):c.colorBy=void 0,this.trackView.repaintViews()}},a)},init:void 0}}basemodColorByCB(t){const n=this.colorBy===t.key,r=ve(ht(t.label,n));function s(){this.alignmentTrack.colorBy=t.key,this.alignmentTrack.groupBy!=="strand"&&(this.alignmentTrack.groupBy="strand",this.alignmentTrack.repackAlignments()),this.trackView.repaintViews()}return{name:void 0,object:r,click:s,init:void 0}}groupByCB(t,n){const r=ve(ht(t.label,n));function s(a){const o=()=>this.alignmentTrack.repackAlignments();if(t.key==="tag"){let l="";this.alignmentTrack.groupBy&&this.alignmentTrack.groupBy.startsWith("tag:")&&(l=this.alignmentTrack.groupBy.substring(4)),this.browser.inputDialog.present({label:"Tag Name",value:l,callback:c=>{c&&(this.alignmentTrack.groupBy="tag:"+c,this.alignmentTrack._groupByTags.push(c),o())}},a)}else t.key==="none"?this.alignmentTrack.groupBy=void 0:this.alignmentTrack.groupBy=t.key,o()}return{name:void 0,object:r,dialog:s,init:void 0}}repackAlignments(){const t=this.getCachedAlignmentContainers();for(let n of t)typeof n.pack=="function"&&n.pack(this);this.trackView.checkContentHeight(),this.trackView.repaintViews()}contextMenuItemList(t){const n=t.viewport,r=[],s=l=>{const c=this.sortObject,h=c&&c.position===Math.floor(t.genomicLocation)?!c.direction:!0,f={chr:n.referenceFrame.chr,position:Math.floor(t.genomicLocation),option:l,direction:h,sortAsPairs:n.trackView.track.viewAsPairs};this.sortObject=f,n.cachedFeatures.sortRows(f),n.repaint()};r.push("<b>Sort by...</b>"),r.push({label:"&nbsp; base",click:()=>s("BASE")}),r.push({label:"&nbsp; read strand",click:()=>s("strand")}),r.push({label:"&nbsp; start location",click:()=>s("START")}),r.push({label:"&nbsp; insert size",click:()=>s("INSERT_SIZE")}),r.push({label:"&nbsp; gap size",click:()=>s("GAP_SIZE")}),r.push({label:"&nbsp; chromosome of mate",click:()=>s("MATE_CHR")}),r.push({label:"&nbsp; mapping quality",click:()=>s("MQ")}),r.push({label:"&nbsp; read name",click:()=>s("READ_NAME")}),r.push({label:"&nbsp; aligned read length",click:()=>s("ALIGNED_READ_LENGTH")}),r.push({label:"&nbsp; tag",click:()=>{const l=this.sortObject,c=l&&l.position===Math.floor(t.genomicLocation)?!l.direction:!0,h={label:"Tag Name",value:this.sortByTag?this.sortByTag:"",callback:f=>{if(f){const d={chr:n.referenceFrame.chr,position:Math.floor(t.genomicLocation),option:"TAG",tag:f,direction:c};this.sortByTag=f,this.sortObject=d,n.cachedFeatures.sortRows(d),n.repaint()}}};this.browser.inputDialog.present(h,t.event)}}),r.push("<hr/>");const a=`${n.referenceFrame.chr}:${He(Math.floor(t.genomicLocation)+1)}`;r.push({label:`Group by base @${a}`,click:()=>{this._groupByPositions.push(a),this.groupBy=`base:${a}`;const l=this.getCachedAlignmentContainers();for(let c of l)c.pack(this);this.trackView.checkContentHeight(),this.trackView.repaintViews()}}),r.push("<hr/>");const o=this.getClickedObject(t);if(o){const l=this.showSoftClips,c=typeof o.alignmentContaining=="function"?o.alignmentContaining(t.genomicLocation,l):o;if(c){c.isPaired()&&c.isMateMapped()&&r.push({label:"View mate in split screen",click:()=>{if(c.mate){const f=t.viewport.referenceFrame,d=this.browser.genome.getChromosome(c.mate.chr);if(d){this.selectedReadName=c.readName;const u=f.bpPerPixel*t.viewport.getWidth(),p=c.mate.position-u/2,m=c.mate.position+u/2;this.browser.addMultiLocusPanel(d.name,p,m,f)}else this.browser.alert.present(`Reference does not contain chromosome: ${c.mate.chr}`)}},init:void 0}),r.push({label:"View read sequence",click:()=>{const f=c.seq;!f||f==="*"?this.browser.alert.present("Read sequence: *"):this.browser.alert.present(f)}}),To()&&r.push({label:"Copy read sequence",click:async()=>{const f=c.seq;try{await navigator.clipboard.writeText(f)}catch(d){console.error(d),this.browser.alert.present(`error copying sequence to clipboard ${d}`)}}});const h=c.seq;if(h&&h!=="*"){h.length<ds&&r.push({label:"BLAT read sequence",click:()=>{const d=c.isNegativeStrand()?Hi(h):h,u=`${c.readName} - blat`,p=`${this.name} - ${u}`;us({sequence:d,browser:this.browser,name:u,title:p})}});const f=c.softClippedBlocks();f.left&&f.left.len>ju&&f.left.len<ds&&r.push({label:"BLAT left soft-clipped sequence",click:()=>{const d=h.substr(f.left.seqOffset,f.left.len),u=c.isNegativeStrand()?Hi(d):d,p=`${c.readName} - blat left clip`,m=`${this.name} - ${p}`;us({sequence:u,browser:this.browser,name:p,title:m})}}),f.right&&f.right.len>ju&&f.right.len<ds&&r.push({label:"BLAT right soft-clipped sequence",click:()=>{const d=h.substr(f.right.seqOffset,f.right.len),u=c.isNegativeStrand()?Hi(d):d,p=`${c.readName} - blat right clip`,m=`${this.name} - ${p}`;us({sequence:u,browser:this.browser,name:p,title:m})}})}r.push("<hr/>")}}return this.browser.circularView&&(this.hasPairs||this.hasSupplemental)&&(this.hasPairs&&r.push({label:"Add discordant pairs to circular view",click:()=>{this.addPairedChordsForViewport(n)}}),this.hasSupplemental&&r.push({label:"Add split reads to circular view",click:()=>{this.addSplitChordsForViewport(n)}}),r.push("<hr/>")),r}getClickedObject(t){let r=t.viewport.cachedFeatures;if(!r)return;const a=t.y-this.top,o=t.genomicLocation;if(r.packedGroups){let l=Number.MAX_VALUE;for(let c of r.packedGroups.values())if(l=Math.min(l,c.pixelTop),a>c.pixelTop&&a<=c.pixelBottom){const h=this.displayMode==="SQUISHED"?this.squishedRowHeight:this.alignmentRowHeight;let f=Math.floor((a-c.pixelTop)/h);if(f>=0&&f<c.length){const u=c.rows[f].alignments.filter(p=>p.containsLocation(o,this.showSoftClips));if(u.length>0)return u[0]}}}if(a<minGroupY&&r.downsampledIntervals){for(const l of r.downsampledIntervals)if(l.start<=o&&l.end>=o)return l}}getConnectorColor(t){if(this.pairConnectorColor)return this.pairConnectorColor;let n=this.colorBy;switch(n&&n.startsWith("tag:")&&(n.substring(4),n="tag"),n){case"strand":case"firstOfPairStrand":case"pairOrientation":case"tag":return this.color?typeof this.color=="function"?this.color(t):this.color:vC;default:return this.getAlignmentColor(t)}}getAlignmentColor(t){let n;this.color?n=typeof this.color=="function"?this.color(t):this.color:n=AC;let r=this.colorBy,s;switch(r&&r.startsWith("tag:")&&(s=r.substring(4),r="tag"),r){case"basemod":case"basemod2":n=t.strand?this.baseModPosStrandColor:this.baseModNegStrandColor;break;case"strand":n=t.strand?this.posStrandColor:this.negStrandColor;break;case"firstOfPairStrand":const a=t.firstOfPairStrand;a!==void 0&&(n=a?this.posStrandColor:this.negStrandColor);break;case"unexpectedPair":case"pairOrientation":if(t.pairOrientation){const l=Dh[this.expectedPairOrientation];if(l){const c=this.pairColors[l[t.pairOrientation]];if(c){n=c;break}}}if(r==="pairOrientation")break;case"tlen":case"fragmentLength":t.mate&&t.isMateMapped()&&(t.mate.chr!==t.chr?n=vr(t.mate.chr):this.minTemplateLength&&Math.abs(t.fragmentLength)<this.minTemplateLength?n=this.smallTLENColor:this.maxTemplateLength&&Math.abs(t.fragmentLength)>this.maxTemplateLength&&(n=this.largeTLENColor));break;case"tag":const o=t.tags()[s];o!==void 0&&(this.bamColorTag===s&&(n=qe.createColorStringSafe(o)),this.colorTable||(this.colorTable=new Bs(this.tagColorPallete)),n=this.colorTable.getColor(o));break}return n}get nucleotideColors(){return this.browser.nucleotideColors}get minTemplateLength(){return this.minTLEN!==void 0?this.minTLEN:this.parent._pairedEndStats?this.parent._pairedEndStats.minTLEN:0}get maxTemplateLength(){return this.maxTLEN!==void 0?this.maxTLEN:this.parent._pairedEndStats?this.parent._pairedEndStats.maxTLEN:1e3}getState(){const t=super.getState();return this.highlightedReads&&(t.highlightedReads=Array.from(this.highlightedReads)),t}get name(){return this.parent.name}set name(t){this.parent.name=t}get color(){return this.parent.color}set color(t){this.parent.color=t}get trackView(){return this.parent.trackView}get getCachedAlignmentContainers(){return this.parent.getCachedAlignmentContainers}get sortObject(){return this.parent.sortObject}set sortObject(t){this.parent.sortObject=t}addPairedChordsForViewport(t){return this.parent.addPairedChordsForViewport(t)}addSplitChordsForViewport(t){return this.parent.addSplitChordsForViewport(t)}}ke(hm,"defaults",{viewAsPairs:!1,showSoftClips:!1,showAllBases:!1,showInsertions:!0,showMismatches:!0,colorBy:void 0,groupBy:void 0,displayMode:"EXPANDED",alignmentRowHeight:14,squishedRowHeight:3,negStrandColor:"rgba(150, 150, 230, 0.75)",posStrandColor:"rgba(230, 150, 150, 0.75)",baseModPosStrandColor:"rgb(195, 195, 195)",baseModNegStrandColor:"rgb(195, 210, 195)",insertionColor:"rgb(138, 94, 161)",insertionTextColor:"white",showInsertionText:!1,deletionColor:"black",deletionTextColor:"black",showDeletionText:!1,skippedColor:"rgb(150, 170, 170)",pairConnectorColor:void 0,smallTLENColor:"rgb(0, 0, 150)",largeTLENColor:"rgb(200, 0, 0)",expectedPairOrientation:"fr",rlColor:"rgb(0, 150, 0)",rrColor:"rgb(20, 50, 200)",llColor:"rgb(0, 150, 150)",bamColorTag:"YC",hideSmallIndels:!1,indelSizeThreshold:1,highlightColor:void 0,minTLEN:void 0,maxTLEN:void 0,tagColorPallete:"Set1"});function xC(i,e){let r;return i<5?r=.1:r=Math.max(.1,Math.min(1,.1+.9*(i-5)/15)),r=Math.round(r*10)/10,r<1&&(e=qe.addAlpha(e,r)),e}function kC(){this.displayMode==="FULL"&&!this.browser.isTrackPanning()&&this.repackAlignments()}function IC(i,e,t,n,r,s,a,o,l){const c=a.baseModCounts,h=a.coverageMap;if(c){let f;const d=o.split(":");d.length==2&&(o=d[0],f=d[1]);const u=Array.from(c.allModifications);u.sort(Cr.compare);const p=h.getTotalCount(s);if(!u.filter(F=>f?f===F.modification:!F.modification.startsWith("NONE_")).find(F=>c.getCount(s,F,0,!1)>0))return;for(let F of u){if(F.modification.startsWith("NONE_")&&o!=="basemod2"||f&&f!==F.modification&&!F.modification.startsWith("NONE_"))continue;const g=F.base,w=Fh(g),b=h.getCount(s,g)+h.getCount(s,w),y=c.simplexModifications.has(F.modification)?h.getPosCount(s,g)+h.getNegCount(s,w):b;if(y==0)continue;const v=o==="basemod2",T=c.getCount(s,F,l,v);if(T==0)continue;const A=b/p*(T/y),C=Math.round(A*r),I=c.getLikelihoodSum(s,F,l,v)/T,B=t-C,M=Uc(F.modification,I,o);i.fillStyle=M,i.fillRect(e,B,n,C),t=B}}}const EC="rgb(150, 150, 150)";class SC{constructor(e,t){this.featureType="numeric",this.parent=t,this.featureSource=t.featureSource,this.paintAxis=Ys,this.top=0,this.autoscale=e.autoscale||e.max===void 0,e.coverageColor&&(this.color=e.coverageColor),this.autoscale||(this.dataRange={min:e.min||0,max:e.max})}get height(){return this.parent.coverageTrackHeight}draw(e){const t=e.pixelTop;t+e.pixelHeight;const n=this.parent.browser.nucleotideColors;if(t>this.height)return;const r=e.context,s=e.features,a=s.coverageMap;let o;a.refSeq&&(o=a.refSeq.toUpperCase());const l=e.bpPerPixel,c=e.bpStart,h=e.pixelWidth,f=c+h*l+1;let d;this.color?d=this.color:this.parent.color&&typeof this.parent.color!="function"?d=qe.darkenLighten(this.parent.color,-35):d=EC,de.setProperties(r,{fillStyle:d,strokeStyle:d});const u=Math.max(1,1/l);for(let p=0,m=a.coverage.length;p<m;p++){const F=a.bpStart+p;if(F<c)continue;if(F>f)break;const g=a.coverage[p];if(!g)continue;const w=g.total/this.dataRange.max*this.height,b=this.height-w,y=(F-c)/l;de.fillRect(r,y,b,u,w)}if(o)for(let p=0,m=a.coverage.length;p<m;p++){const F=a.bpStart+p;if(F<c)continue;if(F>f)break;const g=a.coverage[p];if(!g)continue;const w=g.total/this.dataRange.max*this.height;let b=this.height-w;const y=Math.floor((F-c)/l),v=o[p];if(this.parent.colorBy&&this.parent.colorBy.startsWith("basemod"))IC(r,y,this.height,u,w,F,s,this.parent.colorBy,this.parent.baseModificationThreshold);else if(g.isMismatch(v)){de.setProperties(r,{fillStyle:n[v]}),de.fillRect(r,y,b,u,w);let T=0;for(let A of["A","C","T","G"]){const k=(g["pos"+A]+g["neg"+A])/this.dataRange.max*this.height;b=this.height-k-T,T+=k,de.setProperties(r,{fillStyle:n[A]}),de.fillRect(r,y,b,u,k)}}}}getClickedObject(e){let t=e.viewport.cachedFeatures;if(!t||t.length===0)return;const n=Math.floor(e.genomicLocation),r=t.coverageMap,s=Math.floor(n-r.bpStart),a=r.coverage[s];if(a)return{coverage:a,baseModCounts:t.baseModCounts,hoverText:()=>r.coverage[s].hoverText()}}popupData(e){const t=[],{coverage:n,baseModCounts:r}=this.getClickedObject(e);if(n){const s=Math.floor(e.genomicLocation),a=e.viewport.referenceFrame;t.push(a.chr+":"+He(1+s)),t.push({name:"Total Count",value:n.total});let o=n.posA+n.negA;o>0&&(o=o.toString()+" ("+Math.round(o/n.total*100)+"%, "+n.posA+"+, "+n.negA+"- )"),t.push({name:"A",value:o}),o=n.posC+n.negC,o>0&&(o=o.toString()+" ("+Math.round(o/n.total*100)+"%, "+n.posC+"+, "+n.negC+"- )"),t.push({name:"C",value:o}),o=n.posG+n.negG,o>0&&(o=o.toString()+" ("+Math.round(o/n.total*100)+"%, "+n.posG+"+, "+n.negG+"- )"),t.push({name:"G",value:o}),o=n.posT+n.negT,o>0&&(o=o.toString()+" ("+Math.round(o/n.total*100)+"%, "+n.posT+"+, "+n.negT+"- )"),t.push({name:"T",value:o}),o=n.posN+n.negN,o>0&&(o=o.toString()+" ("+Math.round(o/n.total*100)+"%, "+n.posN+"+, "+n.negN+"- )"),t.push({name:"N",value:o}),t.push("<HR/>"),t.push({name:"DEL",value:n.del.toString()}),t.push({name:"INS",value:n.ins.toString()}),r&&(t.push("<hr/>"),t.push(...r.popupData(s,this.parent.colorBy)))}return t}}class fm extends mt{constructor(e,t){super(e,t)}init(e){this.type="alignment",this.featureSource=new q6(e,this.browser);const t=Object.assign({parent:this},e);this.coverageTrack=new SC(t,this);const n=Object.assign({parent:this},e);this.alignmentTrack=new hm(n,this.browser),super.init(e),this.showAlignments||(this._height=this.coverageTrackHeight),e.sort&&(Array.isArray(e.sort)?this.assignSort(e.sort[0]):this.assignSort(e.sort))}dispose(){this.alignmentTrack.dispose()}setHighlightedReads(e,t){this.alignmentTrack.setHighlightedReads(e,t),this.updateViews()}get expectedPairOrientation(){return this.alignmentTrack.expectedPairOrientation}get viewAsPairs(){return this.alignmentTrack.viewAsPairs}get colorBy(){return this.alignmentTrack.colorBy}set height(e){this._height=e,this.showAlignments&&(this.alignmentTrack.height=this.showCoverage?e-this.coverageTrackHeight:e)}get height(){return this._height}sort(e){e=this.assignSort(e);for(let t of this.trackView.viewports)if(t.containsPosition(e.chr,e.position)){const n=t.cachedFeatures;n&&(n.sortRows(e),t.repaint())}}assignSort(e){if(e.locus){const t=xw(e.locus);e.chr=t.chr,e.position=t.start}else e.position--;return e.direction=e.direction==="ASC"||e.direction===!0,e.chr=this.browser.genome.getChromosomeName(e.chr),this.sortObject=e,this.sortObject}async getFeatures(e,t,n,r,s){const a=await this.featureSource.getAlignments(e,t,n);if(a.viewport=s,a.hasPairs&&!this._pairedEndStats&&!this.config.maxFragmentLength){const l=new cC(a.allAlignments(),this.config);l.totalCount>99&&(this._pairedEndStats=l)}a.pack(this.alignmentTrack);const o=this.sortObject;return o&&o.chr===e&&o.position>=t&&o.position<=n&&a.sortRows(o),this.alignmentTrack.hasPairs=this.alignmentTrack.hasPairs||a.hasPairs,a}computePixelHeight(e){return(this.showCoverage?this.coverageTrackHeight:0)+(this.showAlignments?this.alignmentTrack.computePixelHeight(e):0)}draw(e){de.fillRect(e.context,0,e.pixelTop,e.pixelWidth,e.pixelHeight,{fillStyle:"rgb(255, 255, 255)"}),this.showCoverage===!0&&this.coverageTrackHeight>0?(this.trackView.axisCanvas.style.display="block",this.coverageTrack.draw(e)):this.trackView.axisCanvas.style.display="none",this.showAlignments===!0&&(this.alignmentTrack.setTop(this.coverageTrack,this.showCoverage),this.alignmentTrack.draw(e))}paintAxis(e,t,n){this.coverageTrack.paintAxis(e,t,this.coverageTrackHeight)}contextMenuItemList(e){return this.alignmentTrack.contextMenuItemList(e)}popupData(e){return this.showCoverage===!0&&e.y>=this.coverageTrack.top&&e.y<this.coverageTrackHeight?this.coverageTrack.popupData(e):this.alignmentTrack.popupData(e)}clickedFeatures(e){let t;return this.showCoverage===!0&&e.y>=this.coverageTrack.top&&e.y<this.coverageTrackHeight?t=this.coverageTrack.getClickedObject(e):t=this.alignmentTrack.getClickedObject(e),t?[t]:void 0}hoverText(e){if(this.showCoverage===!0&&e.y>=this.coverageTrack.top&&e.y<this.coverageTrackHeight){const t=this.coverageTrack.getClickedObject(e);if(t)return t.hoverText()}}menuItemList(){let e=[];e=e.concat(this.numericDataMenuItems()),e=e.concat(this.alignmentTrack.menuItemList());const t=()=>{if(!this.autoHeight){const s=(this.showCoverage?this.coverageTrackHeight:0)+(this.showAlignments?this.alignmentTrack.height:0);this.trackView.setTrackHeight(s)}};e.push("<hr/>");function n(){this.showCoverage=!this.showCoverage,t(),this.trackView.checkContentHeight(),this.trackView.repaintViews()}e.push({object:ve(ht("Show Coverage",this.showCoverage)),click:n});function r(){this.showAlignments=!this.showAlignments,t(),this.trackView.checkContentHeight(),this.trackView.repaintViews()}return e.push({object:ve(ht("Show Alignments",this.showAlignments)),click:r}),e}getState(){const e=super.getState();return this.sortObject&&(e.sort={chr:this.sortObject.chr,position:this.sortObject.position+1,option:this.sortObject.option,direction:this.sortObject.direction?"ASC":"DESC"}),Object.assign(e,this.alignmentTrack.getState()),e}getCachedAlignmentContainers(){return this.trackView.viewports.map(e=>e.cachedFeatures)}get dataRange(){return this.coverageTrack.dataRange}set dataRange(e){this.coverageTrack.dataRange=e}get logScale(){return this.coverageTrack.logScale}set logScale(e){this.coverageTrack.logScale=e}get autoscale(){return this.coverageTrack.autoscale}set autoscale(e){this.coverageTrack.autoscale=e}addPairedChordsForViewport(e){const t=this.maxTemplateLength,n=[],r=e.referenceFrame;for(let a of e.cachedFeatures.allAlignments())a.end>=r.start&&a.start<=r.end&&(a.paired?a.end-a.start>t&&n.push(a):a.mate&&a.mate.chr&&(a.mate.chr!==a.chr||Math.max(a.fragmentLength)>t)&&n.push(a));const s=rC(n);po(s,this,r,.02)}addSplitChordsForViewport(e){const t=[],n=e.referenceFrame;for(let s of e.cachedFeatures.allAlignments()){const a=s.hasTag("SA");s.end>=n.start&&s.start<=n.end&&a&&t.push(s)}const r=sC(t);po(r,this,n,.02)}}ke(fm,"defaults",{alleleFreqThreshold:.2,visibilityWindow:3e4,showCoverage:!0,showAlignments:!0,height:300,coverageTrackHeight:50,baseModificationThreshold:0});function NC(i){if(!i.arcType)return"nested";switch(i.arcType){case"chiapet":return"inView";case"chiapetoutbound":return"partialInView";default:return i.arcType}}const BC="rgb(180,25,137)";class qc extends mt{constructor(e,t){super(e,t)}init(e){super.init(e),e.arcOrientation===!1?this.arcOrientation="DOWN":e.arcOrientation===!0?this.arcOrientation="UP":e.arcOrientation?this.arcOrientation=e.arcOrientation.toUpperCase():this.arcOrientation="UP",this.sinTheta=Math.sin(this.theta),this.cosTheta=Math.cos(this.theta),this.arcType=NC(e),this.painter={flipAxis:this.arcOrientation==="DOWN",dataRange:this.dataRange,paintAxis:Ys},e.valueColumn?(this.valueColumn=e.valueColumn,this.hasValue=!0):e.useScore&&(this.hasValue=!0,this.valueColumn="score"),e.max?(this.dataRange={min:e.min||0,max:e.max},this.autoscale=!1):this.autoscale=!0,e.featureSource?(this.featureSource=e.featureSource,delete e._featureSource):(this.featureSource=Wt(e,this.browser.genome),this.featureSource.getWGFeatures=MC)}async postInit(){if(!(typeof this.featureSource.getHeader=="function"&&(this.header=await this.featureSource.getHeader(),this.disposed)))return this.header&&this.setTrackProperties(this.header),this.visibilityWindow===void 0&&typeof this.featureSource.defaultVisibilityWindow=="function"&&(this.visibilityWindow=await this.featureSource.defaultVisibilityWindow(),this.featureSource.visibilityWindow=this.visibilityWindow),this}get supportsWholeGenome(){return!0}async getFeatures(e,t,n){const r=this.visibilityWindow,s=await this.featureSource.getFeatures({chr:e,start:t,end:n,visibilityWindow:r});return this.hasValue===void 0&&s&&s.length>0&&(this.hasValue=s[0].score!==void 0),s}draw(e){this.arcType==="proportional"?this.drawProportional(e):this.arcType==="inView"||this.arcType==="partialInView"?this.drawProportional(e):this.drawNested(e)}drawNested(e){const t=e.context,n=e.pixelWidth,r=e.pixelHeight,s=e.viewportWidth,a=e.bpPerPixel,o=e.bpStart,l=a;de.fillRect(t,0,e.pixelTop,n,r,{fillStyle:"rgb(255, 255, 255)"});const c=e.features;if(c){h.call(this);const f=this.arcOrientation==="UP",d=f?e.pixelHeight:0;t.font="8px sans-serif",t.textAlign="center";for(let u of c){u.drawState=void 0;let p;if(typeof this.color=="function"?p=this.color(u):(p=this.color||u.color||BC,p&&this.config.useScore&&(p=Jr(p,zy(u.score)))),t.lineWidth=u.thickness||this.thickness||1,u.chr1===u.chr2||u.chr==="all"){const{m1:m,m2:F}=Wu(u,this.browser.genome);let g=Math.round((m-o)/l),w=Math.round((F-o)/l);if(w<0||g>n)continue;let b=w-g;b<3&&(b=3,g--);const y=b/2,v=y/this.sinTheta,T=this.cosTheta*v,A=g+y;let C,k,I;if(f?(C=this.height+T,k=Math.PI+Math.PI/2-this.theta,I=Math.PI+Math.PI/2+this.theta):(C=-T,k=Math.PI/2-this.theta,I=Math.PI/2+this.theta),this.showBlocks&&u.chr!=="all"){const B=(u.start1-o)/l,M=(u.end1-o)/l,N=(u.start2-o)/l,x=(u.end2-o)/l,D=f?-this.blockHeight:this.blockHeight;t.fillRect(B,d,M-B,D),t.fillRect(N,d,x-N,D)}p&&!this.config.useScore&&b>s&&(p=Jr(p,this.alpha)),t.strokeStyle=p,t.fillStyle=p,t.beginPath(),t.arc(A,C,v,k,I,!1),t.stroke(),u.drawState={xc:A,yc:C,r:v}}else{let m=Math.round((u.start-o)/l),F=Math.round((u.end-o)/l);if(F<0||m>n)continue;let g=F-m;g<3&&(g=3,m--);const w=u.chr===u.chr1?u.chr2:u.chr1;t.strokeStyle=p,t.fillStyle=Jr(vr(w),.5),f?(t.fillRect(m,this.height/2,g,this.height/2),t.fillText(w,m+g/2,this.height/2-5),u.drawState={x:m,y:this.height/2,w:g,h:this.height/2}):(t.fillRect(m,0,g,this.height/2),t.fillText(w,m+g/2,this.height/2+13),u.drawState={x:m,y:0,w:g,h:this.height/2})}}}function h(){let f=0;for(let u of c){let p=(u.start-o)/l,m=(u.end-o)/l;p>=0&&m<=n&&(f=Math.max(f,m-p))}let d=Math.min(s,f)/2;if(f>0){let u=(r-10)/d;this.theta=TC(u),this.sinTheta=Math.sin(this.theta),this.cosTheta=Math.cos(this.theta)}}}getScaleFactor(e,t,n,r){return r?n/(Math.log10(t+1)-(e<=0?0:Math.log10(e+1))):n/(t-e)}drawProportional(e){const t=e.context,n=e.pixelWidth,r=e.pixelHeight,s=e.bpPerPixel,a=e.bpStart,o=s,l=e.referenceFrame.start,c=e.referenceFrame.end,h=this.arcOrientation==="UP";de.fillRect(t,0,e.pixelTop,n,r,{fillStyle:"rgb(255, 255, 255)"});const f=e.features;if(f&&f.length>0){const u=this.getScaleFactor(0,this.dataRange.max,e.pixelHeight-1,this.logScale),p=h?e.pixelHeight:0;for(let m of f){m.drawState=void 0;const F=this.valueColumn?m[this.valueColumn]:m.score;if(F===void 0||Number.isNaN(F))continue;const g=Math.round((this.logScale?Math.log10(F+1):F)*u);if(m.chr1===m.chr2||m.chr==="all"){const{m1:w,m2:b}=Wu(m,this.browser.genome);let y=Math.round((w-a)/o),T=Math.round((b-a)/o)-y;if(T<3&&(T=3,y--),F<this.dataRange.min||F>this.dataRange.max)continue;if(this.arcType!=="proportional"){const B=this.arcType==="partialInView",M=w>=l&&b<=c;let N=!1,x=!1;if(!M&&B&&(N=l<=w&&w<=c,N||(x=l<=b&&b<=c)),!(M||N||x))continue}const A=T/2,C=y+T/2;m.drawState={xc:C,yc:p,radiusX:A,radiusY:g};const k=h,I=m.color||this.color;if(t.strokeStyle=I,t.lineWidth=m.thickness||this.thickness||1,t.isSVG===!0?t.strokeEllipse(C,p,A,g,0,0,Math.PI,k):(t.beginPath(),t.ellipse(C,p,A,g,0,0,Math.PI,k),t.stroke()),this.alpha&&(t.fillStyle=Jr(I,this.alpha),t.isSVG===!0?t.fillEllipse(C,p,A,g,0,0,Math.PI,k):t.fill()),this.showBlocks&&m.chr!=="all"){t.fillStyle=I;const B=(m.start1-a)/o,M=(m.end1-a)/o,N=(m.start2-a)/o,x=(m.end2-a)/o,D=h?-this.blockHeight:this.blockHeight;t.fillRect(B,p,M-B,D),t.fillRect(N,p,x-N,D)}}else{let w=Math.round((m.start-a)/o),b=Math.round((m.end-a)/o);if(b<0||w>n||F<this.dataRange.min||F>this.dataRange.max)continue;const y=Math.min(g,this.height-13);let v=b-w;v<3&&(v=3,w--);const T=m.chr===m.chr1?m.chr2:m.chr1;if(t.font="8px sans-serif",t.textAlign="center",t.fillStyle=Jr(vr(T),.5),h){const A=this.height-y;t.fillRect(w,A,v,y),t.fillText(T,w+v/2,A-5),m.drawState={x:w,y:A,w:v,h:y}}else t.fillRect(w,0,v,y),t.fillText(T,w+v/2,y+13),m.drawState={x:w,y:0,w:v,h:y}}}}}clearAxis(e,t,n){de.fillRect(e,0,0,t,n,{fillStyle:"rgb(255, 255, 255)"})}paintAxis(e,t,n){const r={min:0,max:this.dataRange.max};this.arcType==="proportional"?(this.painter.flipAxis=this.arcOrientation==="DOWN",this.painter.dataRange=r,this.painter.paintAxis(e,t,n)):this.arcType==="inView"||this.arcType==="partialInView"?(this.painter.flipAxis=this.arcOrientation==="DOWN",this.painter.dataRange=r,this.painter.paintAxis(e,t,n)):this.clearAxis(e,t,n)}menuItemList(){let e=[];if(this.hasValue){e.push("<hr/>");const t={nested:"Nested",proportional:"Proportional - All",inView:"Proportional - Both Ends in View",partialInView:"Proportional - One End in View"};e.push("<b>Arc Type</b>");for(let n of["nested","proportional","inView","partialInView"])e.push({object:ve(ht(t[n],n===this.arcType)),click:function(){this.arcType=n,this.trackView.repaintViews()}})}return e.push("<hr/>"),e.push({name:"Toggle arc direction",click:function(){this.arcOrientation=this.arcOrientation==="UP"?"DOWN":"UP",this.trackView.repaintViews()}}),e.push({name:this.showBlocks?"Hide Blocks":"Show Blocks",click:function(){this.showBlocks=!this.showBlocks,this.trackView.repaintViews()}}),(this.arcType==="proportional"||this.arcType==="inView"||this.arcType==="partialInView")&&(e=e.concat(this.numericDataMenuItems())),this.browser.circularView&&(e.push("<hr/>"),e.push({label:"Add interactions to circular view",click:function(){for(let n of this.trackView.viewports)this.addChordsForViewport(n.referenceFrame)}})),e}contextMenuItemList(e){if(this.browser.circularView){const t=e.viewport,n=[];return n.push({label:"Add interactions to circular view",click:()=>{const r=t.referenceFrame;this.addChordsForViewport(r)}}),n.push("<hr/>"),n}}addChordsForViewport(e){let t;if(e.chr==="all"?t=Object.values(this.featureSource.getAllFeatures()).flat():t=this.featureSource.featureCache.queryFeatures(e.chr,e.start,e.end).filter(s=>s.drawState),t.length===0)return;const n=aC(t);po(n,this,e,.5)}doAutoscale(e){let t=0;if(e)for(let n of e){const r=this.valueColumn?n[this.valueColumn]:n.score;Number.isNaN(r)||(t=Math.max(t,r))}return{min:0,max:t}}popupData(e,t){t===void 0&&(t=this.clickedFeatures(e));const n=[];for(let r of t){const s=r._||r;if(n.push({name:"Region 1",value:Ku(s.chr1,s.start1,s.end1,s.strand1)}),n.push({name:"Region 2",value:Ku(s.chr2,s.start2,s.end2,s.strand2)}),s.name&&n.push({name:"Name",value:s.name}),s.value!==void 0&&n.push({name:"Value",value:s.value}),s.score!==void 0&&n.push({name:"Score",value:s.score}),s.extras&&this.header&&this.header.columnNames){const a=this.header.columnNames,o=this.header.hiccups?6:10;for(let l=o;l<a.length;l++)this.header.colorColumn!==l&&(a[l]==="info"?RC(n,s.extras[l-o]):n.push({name:a[l],value:s.extras[l-o]}))}break}return n}clickedFeatures(e){const t=e.viewport.cachedFeatures,n=[];if(t){const r=this.arcType==="proportional"||this.arcType==="inView"||this.arcType==="partialInView";for(let s of t)if(s.drawState)if(s.chr1===s.chr2||s.chr==="all")if(r){const{xc:a,yc:o,radiusX:l,radiusY:c}=s.drawState,h=e.canvasX-a,f=e.canvasY-o,d=h/l*(h/l)+f/c*(f/c);d<=1&&n.push({score:1/d,feature:s})}else{const{xc:a,yc:o,r:l}=s.drawState,c=e.canvasX-a,h=e.canvasY-o,f=Math.abs(Math.sqrt(c*c+h*h)-l);f<5&&n.push({score:f,feature:s})}else{const{x:a,y:o,w:l,h:c}=s.drawState,h=5;if(e.canvasX>=a-h&&e.canvasX<=a+l+h&&e.canvasY>=o&&e.canvasY<=o+c){const f=-Math.abs(e.canvasX-(a+l/2));n.push({score:f,feature:s});break}}}return n.length>1&&n.sort((r,s)=>r.score-s.score),n.map(r=>r.feature)}}ke(qc,"defaults",{height:250,theta:Math.PI/4,arcOrientation:"UP",showBlocks:!0,blockHeight:3,thickness:1,color:"rgb(180,25,137)",alpha:.02,logScale:!0});function Wu(i,e){let t=(i.start1+i.end1)/2,n=(i.start2+i.end2)/2;if(i.chr==="all"&&(t=e.getGenomeCoordinate(i.chr1,t),n=e.getGenomeCoordinate(i.chr2,n)),t>n){const r=t;t=n,n=r}return{m1:t,m2:n}}function Ku(i,e,t,n){return n&&n!=="."?`${i}:${He(e+1)}-${He(t)} (${n})`:`${i}:${He(e+1)}-${He(t)}`}function TC(i){let e=[.01570925532366355,.15838444032453644,.3249196962329063,.5095254494944288,.7265425280053609,.9999999999999999],t=[.031415926535897934,.3141592653589793,.6283185307179586,.9424777960769379,1.2566370614359172,1.5707963267948966],n;for(n=0;n<e.length&&!(e[n]>i);n++);let r=n===0?0:e[n-1],s=n<e.length?e[n]:1,a=(i-r)/(s-r),o=n===0?0:t[n-1],l=n<t.length?t[n]:Math.PI/2;return Math.min(Math.PI/2,o+a*(l-o))}const Yu=new Map;function Jr(i,e){const t=`${i}_${e}`;let n=Yu.get(t);return n||(n=qe.addAlpha(i,e),Yu.set(t,n)),n}function MC(i){const e=d=>{const u=Object.assign({},d);return u.chr="all",u.start=t.getGenomeCoordinate(d.chr1,d.start1),u.end=t.getGenomeCoordinate(d.chr2,d.end2),u},t=this.genome;let n,r=0;for(let d of t.wgChromosomeNames){let u=i[d];if(u)for(let p of u)p.dup||(r++,p.score&&(!n||p.score>n.score)&&(n=p))}const s=this.maxWGCount,a=n&&n.score>0&&r>s?5:1,o=Math.floor(s/a),l=n&&n.score>0?Math.log(n.score)/a:Number.MAX_SAFE_INTEGER;let c=[],h=[];for(let d=0;d<a;d++)h.push([0]),c.push([]);for(let d of t.wgChromosomeNames){let u=i[d];if(u){for(let p of u)if(!p.dup){const m=p.score?Math.max(0,Math.min(a-1,Math.floor(Math.log(p.score)/l))):0;if(c[m].length<o)c[m].push(e(p));else{const F=o/(h[m]+1);if(Math.random()<F){const g=Math.floor(Math.random()*(o-1));c[m][g]=e(p)}}h[m]++}}}let f;if(a===1)f=c[0];else{f=[];for(let d of c)for(let u of d)f.push(u);n&&f.push(e(n)),f.sort(function(d,u){return d.start-u.start}),console.log(f.length)}return f}function RC(i,e){const t=e.split(";");for(let n of t){const r=n.split("=");r.length===2&&i.push({name:r[0],value:r[1]})}}class dm{constructor(e){this.config=e,this.url=DC(e.path||e.url)}async read(e,t){const n=this.config.headers||{};if(e!==void 0&&t){const l="bytes="+e+"-"+(e+t-1);n.Range=l}let r=this.url.slice();if(this.config.oauthToken){const l=o(this.config.oauthToken);n.Authorization=`Bearer ${l}`}this.config.apiKey&&(r=LC(r,"key",this.config.apiKey));const s=await fetch(r,{method:"GET",headers:n,redirect:"follow",mode:"cors"}),a=s.status;if(a>=400){const l=Error(s.statusText);throw l.code=a,l}else return s.arrayBuffer();async function o(l){return typeof l=="function"?await Promise.resolve(l()):l}}}function DC(i){return i.includes("//www.dropbox.com")?i.replace("//www.dropbox.com","//dl.dropboxusercontent.com"):i.startsWith("ftp://ftp.ncbi.nlm.nih.gov")?i.replace("ftp://","https://"):i}function LC(i,e,t){const n=i.includes("?")?"&":"?";return i+n+e+"="+t}class zC{constructor(e){this.file=e.file,this.fetchSize=e.fetchSize||16e3,this.maxSize=e.maxSize||1e6,this.buffers=[]}async read(e,t){let n=this.buffers.filter(r=>r.overlaps(e,e+t));for(let r of n)if(r.contains(e,e+t))return r.slice(e,e+t);if(n.length===0){let r=Math.max(t,this.fetchSize);this.buffers.sort((c,h)=>c.start-h.start);const s=PC(this.buffers,c=>c.start>e,0);s<this.buffers.length&&(r=Math.min(r,this.buffers[s].start-e));const a=e,o=await this.file.read(a,r),l=new _a(a,o);return this.addBuffer(l),l.slice(e,e+t)}else{n.sort((f,d)=>f.start-d.start);const r=[];let s=e;for(let f of n){if(s<f.start){const d=s,u=f.start-s,p=await this.file.read(d,u),m=new _a(d,p);r.push(m)}r.push(f),s=f.end}const a=e+t;if(a>s){const f=s,d=a-f,u=await this.file.read(f,d),p=new _a(f,u);r.push(p)}const o=r[0].start,l=HC(r.map(f=>f.buffer)),c=new _a(o,l),h=new Set(n);return this.buffers=this.buffers.filter(f=>!h.has(f)),this.addBuffer(c),c.slice(e,e+t)}}addBuffer(e){const t=this.buffers.reduce((n,r)=>n+r.size,0)+e.size;if(t>this.maxSize){const n=t-this.maxSize;this.buffers.sort((a,o)=>a.creationTime-o.creationTime);let r=0,s;for(s=0;s<this.buffers.length&&(r+=this.buffers[s].size,!(r>n));s++);this.buffers=s<this.buffers.length-1?this.buffers.slice(s):[]}e.size<=this.maxSize&&this.buffers.push(e)}}class _a{constructor(e,t){this.creationTime=Date.now(),this.start=e,this.buffer=t}slice(e,t){if(e<this.start||t-e>this.buffer.byteLength)throw Error("buffer bounds error");return this.buffer.slice(e-this.start,t-this.start)}get end(){return this.start+this.buffer.byteLength}get size(){return this.buffer.byteLength}contains(e,t){return e>=this.start&&t<=this.end}overlaps(e,t){return e>this.start&&e<this.end||t>this.start&&t<this.end}toString(){return`Buffer ${this.creationTime}   ${this.start} - ${this.end}`}}function HC(i){const e=i.reduce((r,s)=>r+s.byteLength,0),t=new Uint8Array(e);let n=0;for(let r of i)t.set(new Uint8Array(r),n),n+=r.byteLength;return t.buffer}function PC(i,e,t){let n=t-1,r=i.length;for(;1+n<r;){const s=n+(r-n>>1);e(i[s])?r=s:n=s}return r}class um{constructor(e){this.file=e}async read(e,t){return t===0?new ArrayBuffer:(e!=null&&t?this.file.slice(e,e+t):this.file).arrayBuffer()}}var OC=Object.defineProperty,UC=(i,e,t)=>e in i?OC(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Bn=(i,e,t)=>(UC(i,typeof e!="symbol"?e+"":e,t),t);async function nt(i,e,t=0){var n=new Map;for(let[r,s]of i.entries()){let a=await Ee.unpack_from_async("<"+s,e,t);t+=Ee.calcsize(s),a.length==1&&(a=a[0]),n.set(r,a)}return n}function pm(i,e,t=0){var n=new Map;for(let[r,s]of i.entries()){let a=Ee.unpack_from("<"+s,e,t);t+=Ee.calcsize(s),a.length==1&&(a=a[0]),n.set(r,a)}return n}function it(i){i||i()}function lt(i){var e="<"+Array.from(i.values()).join("");return Ee.calcsize(e)}function ls(i,e=8){return Math.ceil(i/e)*e}var qC={u:"Uint",i:"Int",f:"Float"};function Ua(i){var e=Ee._is_big_endian(i),t,n;if(/S/.test(i))t="getString",n=((i.match(/S(\d*)/)||[])[1]||1)|0;else{let[r,s,a]=i.match(/[<>=!@]?(i|u|f)(\d*)/);n=parseInt(a||4,10);let o=n*8;t="get"+qC[s]+o.toFixed()}return[t,e,n]}var VC=class{constructor(){this.big_endian=QC(),this.getters={s:"getUint8",b:"getInt8",B:"getUint8",h:"getInt16",H:"getUint16",i:"getInt32",I:"getUint32",l:"getInt32",L:"getUint32",q:"getInt64",Q:"getUint64",f:"getFloat32",d:"getFloat64"},this.byte_lengths={s:1,b:1,B:1,h:2,H:2,i:4,I:4,l:4,L:4,q:8,Q:8,f:4,d:8};let i=Object.keys(this.byte_lengths).join("");this.fmt_size_regex="(\\d*)(["+i+"])"}calcsize(i){for(var e=0,t,n=new RegExp(this.fmt_size_regex,"g");(t=n.exec(i))!==null;){let r=parseInt(t[1]||1,10),s=t[2],a=this.byte_lengths[s];e+=r*a}return e}_is_big_endian(i){var e;return/^</.test(i)?e=!1:/^(!|>)/.test(i)?e=!0:e=this.big_endian,e}async unpack_from_async(i,e,t){t=Number.parseInt(t||0);const n=this.calcsize(i),r=await e.slice(t,t+n);let s=0;for(var a=new dr(r),o=[],l=this._is_big_endian(i),c,h=new RegExp(this.fmt_size_regex,"g");(c=h.exec(i))!==null;){let d=parseInt(c[1]||1,10),u=c[2],p=this.getters[u],m=this.byte_lengths[u];if(u=="s")o.push(new TextDecoder().decode(r.slice(s,s+d))),s+=d;else for(var f=0;f<d;f++)o.push(a[p](s,!l)),s+=m}return o}unpack_from(i,e,t){t=Number.parseInt(t||0);const n=this.calcsize(i),r=e.slice(t,t+n);let s=0;for(var a=new dr(r),o=[],l=this._is_big_endian(i),c,h=new RegExp(this.fmt_size_regex,"g");(c=h.exec(i))!==null;){let d=parseInt(c[1]||1,10),u=c[2],p=this.getters[u],m=this.byte_lengths[u];if(u=="s")o.push(new TextDecoder().decode(r.slice(s,s+d))),s+=d;else for(var f=0;f<d;f++)o.push(a[p](s,!l)),s+=m}return o}},Ee=new VC;function QC(){const i=new Uint8Array(4),e=new Uint32Array(i.buffer);return!((e[0]=1)&i[0])}var dr=class extends DataView{getUint64(i,e){const t=BigInt(this.getUint32(i,e)),n=BigInt(this.getUint32(i+4,e));let r=e?t+(n<<32n):(t<<32n)+n;return Number.parseInt(r)}getInt64(i,e){var t,n;e?(t=this.getUint32(i,!0),n=this.getInt32(i+4,!0)):(n=this.getInt32(i,!1),t=this.getUint32(i+4,!1));let r=BigInt(t)+(BigInt(n)<<32n);return Number.parseInt(r)}getString(i,e,t){const n=this.buffer.slice(i,i+t);return new TextDecoder().decode(n)}getVLENStruct(i,e,t){let n=this.getUint32(i,e),r=this.getUint64(i+4,e),s=this.getUint32(i+12,e);return[n,r,s]}};function gm(i){return i.toString(2).length}function Zu(i,e,t=0,n=!0){const r=e.slice(t,t+i);let s=new Uint8Array(r);return n||s.reverse(),s.reduce((o,l,c)=>o+(l<<c*8),0)}var Xu=class{constructor(i,e){this.buf=i,this.offset=e,this.dtype=this.determine_dtype()}async determine_dtype(){let i=await nt(mm,this.buf,this.offset);this.offset+=GC;let e=i.get("class_and_version")&15;if(e==jC)return this._determine_dtype_fixed_point(i);if(e==WC)return this._determine_dtype_floating_point(i);if(e==KC)throw"Time datatype class not supported.";if(e==YC)return this._determine_dtype_string(i);if(e==ZC)throw"Bitfield datatype class not supported.";if(e==Ju)return{datatype_class:Ju,size:i.get("size")};if(e==XC)return this._determine_dtype_compound(i);if(e==JC)return["REFERENCE",i.get("size")];if(e==e8)return this.determine_dtype();if(e==i8)throw"Array datatype class not supported.";if(e==t8){let t=this._determine_dtype_vlen(i);return t[0]=="VLEN_SEQUENCE"&&(t=["VLEN_SEQUENCE",this.determine_dtype()]),t}else throw"Invalid datatype class "+e}_determine_dtype_fixed_point(i){let e=i.get("size");if(![1,2,4,8].includes(e))throw"Unsupported datatype size";let t=i.get("class_bit_field_0")&8;var n;t>0?n="i":n="u";let r=i.get("class_bit_field_0")&1;var s;return r==0?s="<":s=">",this.offset+=4,s+n+e.toFixed()}_determine_dtype_floating_point(i){let e=i.get("size");if(![1,2,4,8].includes(e))throw"Unsupported datatype size";let t="f",n=i.get("class_bit_field_0")&1;var r;return n==0?r="<":r=">",this.offset+=12,r+t+e.toFixed()}_determine_dtype_string(i){return"S"+i.get("size").toFixed()}_determine_dtype_vlen(i){if((i.get("class_bit_field_0")&1)!=1)return["VLEN_SEQUENCE",0,0];let t=i.get("class_bit_field_0")>>4,n=i.get("class_bit_field_1")&1;return["VLEN_STRING",t,n]}_determine_dtype_compound(i){throw"Compound type not yet implemented!"}},mm=new Map([["class_and_version","B"],["class_bit_field_0","B"],["class_bit_field_1","B"],["class_bit_field_2","B"],["size","I"]]),GC=lt(mm),$C=new Map([["offset","I"],["dimensionality","B"],["reserved_0","B"],["reserved_1","B"],["reserved_2","B"],["permutation","I"],["reserved_3","I"],["dim_size_1","I"],["dim_size_2","I"],["dim_size_3","I"],["dim_size_4","I"]]);lt($C);var jC=0,WC=1,KC=2,YC=3,ZC=4,Ju=5,XC=6,JC=7,e8=8,t8=9,i8=10;function Lr(i){let e=i.length;for(;--e>=0;)i[e]=0}var n8=3,r8=258,wm=29,s8=256,a8=s8+1+wm,bm=30,o8=512,l8=new Array((a8+2)*2);Lr(l8);var c8=new Array(bm*2);Lr(c8);var h8=new Array(o8);Lr(h8);var f8=new Array(r8-n8+1);Lr(f8);var d8=new Array(wm);Lr(d8);var u8=new Array(bm);Lr(u8);var p8=(i,e,t,n)=>{let r=i&65535|0,s=i>>>16&65535|0,a=0;for(;t!==0;){a=t>2e3?2e3:t,t-=a;do r=r+e[n++]|0,s=s+r|0;while(--a);r%=65521,s%=65521}return r|s<<16|0},Vc=p8,g8=()=>{let i,e=[];for(var t=0;t<256;t++){i=t;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;e[t]=i}return e},m8=new Uint32Array(g8()),w8=(i,e,t,n)=>{const r=m8,s=n+t;i^=-1;for(let a=n;a<s;a++)i=i>>>8^r[(i^e[a])&255];return i^-1},mi=w8,Qc={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Vh={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},b8=(i,e)=>Object.prototype.hasOwnProperty.call(i,e),F8=function(i){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)b8(t,n)&&(i[n]=t[n])}}return i},y8=i=>{let e=0;for(let n=0,r=i.length;n<r;n++)e+=i[n].length;const t=new Uint8Array(e);for(let n=0,r=0,s=i.length;n<s;n++){let a=i[n];t.set(a,r),r+=a.length}return t},Fm={assign:F8,flattenChunks:y8},ym=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ym=!1}var Ds=new Uint8Array(256);for(let i=0;i<256;i++)Ds[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;Ds[254]=Ds[254]=1;var A8=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let e,t,n,r,s,a=i.length,o=0;for(r=0;r<a;r++)t=i.charCodeAt(r),(t&64512)===55296&&r+1<a&&(n=i.charCodeAt(r+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),r++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(o),s=0,r=0;s<o;r++)t=i.charCodeAt(r),(t&64512)===55296&&r+1<a&&(n=i.charCodeAt(r+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),r++)),t<128?e[s++]=t:t<2048?(e[s++]=192|t>>>6,e[s++]=128|t&63):t<65536?(e[s++]=224|t>>>12,e[s++]=128|t>>>6&63,e[s++]=128|t&63):(e[s++]=240|t>>>18,e[s++]=128|t>>>12&63,e[s++]=128|t>>>6&63,e[s++]=128|t&63);return e},v8=(i,e)=>{if(e<65534&&i.subarray&&ym)return String.fromCharCode.apply(null,i.length===e?i:i.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(i[n]);return t},_8=(i,e)=>{const t=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));let n,r;const s=new Array(t*2);for(r=0,n=0;n<t;){let a=i[n++];if(a<128){s[r++]=a;continue}let o=Ds[a];if(o>4){s[r++]=65533,n+=o-1;continue}for(a&=o===2?31:o===3?15:7;o>1&&n<t;)a=a<<6|i[n++]&63,o--;if(o>1){s[r++]=65533;continue}a<65536?s[r++]=a:(a-=65536,s[r++]=55296|a>>10&1023,s[r++]=56320|a&1023)}return v8(s,r)},C8=(i,e)=>{e=e||i.length,e>i.length&&(e=i.length);let t=e-1;for(;t>=0&&(i[t]&192)===128;)t--;return t<0||t===0?e:t+Ds[i[t]]>e?t:e},Gc={string2buf:A8,buf2string:_8,utf8border:C8};function x8(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var k8=x8,Ca=30,I8=12,E8=function(e,t){let n,r,s,a,o,l,c,h,f,d,u,p,m,F,g,w,b,y,v,T,A,C,k,I;const B=e.state;n=e.next_in,k=e.input,r=n+(e.avail_in-5),s=e.next_out,I=e.output,a=s-(t-e.avail_out),o=s+(e.avail_out-257),l=B.dmax,c=B.wsize,h=B.whave,f=B.wnext,d=B.window,u=B.hold,p=B.bits,m=B.lencode,F=B.distcode,g=(1<<B.lenbits)-1,w=(1<<B.distbits)-1;e:do{p<15&&(u+=k[n++]<<p,p+=8,u+=k[n++]<<p,p+=8),b=m[u&g];t:for(;;){if(y=b>>>24,u>>>=y,p-=y,y=b>>>16&255,y===0)I[s++]=b&65535;else if(y&16){v=b&65535,y&=15,y&&(p<y&&(u+=k[n++]<<p,p+=8),v+=u&(1<<y)-1,u>>>=y,p-=y),p<15&&(u+=k[n++]<<p,p+=8,u+=k[n++]<<p,p+=8),b=F[u&w];i:for(;;){if(y=b>>>24,u>>>=y,p-=y,y=b>>>16&255,y&16){if(T=b&65535,y&=15,p<y&&(u+=k[n++]<<p,p+=8,p<y&&(u+=k[n++]<<p,p+=8)),T+=u&(1<<y)-1,T>l){e.msg="invalid distance too far back",B.mode=Ca;break e}if(u>>>=y,p-=y,y=s-a,T>y){if(y=T-y,y>h&&B.sane){e.msg="invalid distance too far back",B.mode=Ca;break e}if(A=0,C=d,f===0){if(A+=c-y,y<v){v-=y;do I[s++]=d[A++];while(--y);A=s-T,C=I}}else if(f<y){if(A+=c+f-y,y-=f,y<v){v-=y;do I[s++]=d[A++];while(--y);if(A=0,f<v){y=f,v-=y;do I[s++]=d[A++];while(--y);A=s-T,C=I}}}else if(A+=f-y,y<v){v-=y;do I[s++]=d[A++];while(--y);A=s-T,C=I}for(;v>2;)I[s++]=C[A++],I[s++]=C[A++],I[s++]=C[A++],v-=3;v&&(I[s++]=C[A++],v>1&&(I[s++]=C[A++]))}else{A=s-T;do I[s++]=I[A++],I[s++]=I[A++],I[s++]=I[A++],v-=3;while(v>2);v&&(I[s++]=I[A++],v>1&&(I[s++]=I[A++]))}}else if(y&64){e.msg="invalid distance code",B.mode=Ca;break e}else{b=F[(b&65535)+(u&(1<<y)-1)];continue i}break}}else if(y&64)if(y&32){B.mode=I8;break e}else{e.msg="invalid literal/length code",B.mode=Ca;break e}else{b=m[(b&65535)+(u&(1<<y)-1)];continue t}break}}while(n<r&&s<o);v=p>>3,n-=v,p-=v<<3,u&=(1<<p)-1,e.next_in=n,e.next_out=s,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=s<o?257+(o-s):257-(s-o),B.hold=u,B.bits=p},Zn=15,ep=852,tp=592,ip=0,zl=1,np=2,S8=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),N8=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),B8=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),T8=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),M8=(i,e,t,n,r,s,a,o)=>{const l=o.bits;let c=0,h=0,f=0,d=0,u=0,p=0,m=0,F=0,g=0,w=0,b,y,v,T,A,C=null,k=0,I;const B=new Uint16Array(Zn+1),M=new Uint16Array(Zn+1);let N=null,x=0,D,S,U;for(c=0;c<=Zn;c++)B[c]=0;for(h=0;h<n;h++)B[e[t+h]]++;for(u=l,d=Zn;d>=1&&B[d]===0;d--);if(u>d&&(u=d),d===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,o.bits=1,0;for(f=1;f<d&&B[f]===0;f++);for(u<f&&(u=f),F=1,c=1;c<=Zn;c++)if(F<<=1,F-=B[c],F<0)return-1;if(F>0&&(i===ip||d!==1))return-1;for(M[1]=0,c=1;c<Zn;c++)M[c+1]=M[c]+B[c];for(h=0;h<n;h++)e[t+h]!==0&&(a[M[e[t+h]]++]=h);if(i===ip?(C=N=a,I=19):i===zl?(C=S8,k-=257,N=N8,x-=257,I=256):(C=B8,N=T8,I=-1),w=0,h=0,c=f,A=s,p=u,m=0,v=-1,g=1<<u,T=g-1,i===zl&&g>ep||i===np&&g>tp)return 1;for(;;){D=c-m,a[h]<I?(S=0,U=a[h]):a[h]>I?(S=N[x+a[h]],U=C[k+a[h]]):(S=96,U=0),b=1<<c-m,y=1<<p,f=y;do y-=b,r[A+(w>>m)+y]=D<<24|S<<16|U|0;while(y!==0);for(b=1<<c-1;w&b;)b>>=1;if(b!==0?(w&=b-1,w+=b):w=0,h++,--B[c]===0){if(c===d)break;c=e[t+a[h]]}if(c>u&&(w&T)!==v){for(m===0&&(m=u),A+=f,p=c-m,F=1<<p;p+m<d&&(F-=B[p+m],!(F<=0));)p++,F<<=1;if(g+=1<<p,i===zl&&g>ep||i===np&&g>tp)return 1;v=w&T,r[v]=u<<24|p<<16|A-s|0}}return w!==0&&(r[A+w]=c-m<<24|64<<16|0),o.bits=u,0},gs=M8,R8=0,Am=1,vm=2,{Z_FINISH:rp,Z_BLOCK:D8,Z_TREES:xa,Z_OK:Tn,Z_STREAM_END:L8,Z_NEED_DICT:z8,Z_STREAM_ERROR:oi,Z_DATA_ERROR:_m,Z_MEM_ERROR:Cm,Z_BUF_ERROR:H8,Z_DEFLATED:sp}=Vh,xm=1,ap=2,op=3,lp=4,cp=5,hp=6,fp=7,dp=8,up=9,pp=10,go=11,Bi=12,Hl=13,gp=14,Pl=15,mp=16,wp=17,bp=18,Fp=19,ka=20,Ia=21,yp=22,Ap=23,vp=24,_p=25,Cp=26,Ol=27,xp=28,kp=29,dt=30,km=31,P8=32,O8=852,U8=592,q8=15,V8=q8,Ip=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function Q8(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Im=i=>{if(!i||!i.state)return oi;const e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=xm,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(O8),e.distcode=e.distdyn=new Int32Array(U8),e.sane=1,e.back=-1,Tn},Em=i=>{if(!i||!i.state)return oi;const e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,Im(i)},Sm=(i,e)=>{let t;if(!i||!i.state)return oi;const n=i.state;return e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15)?oi:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,Em(i))},Nm=(i,e)=>{if(!i)return oi;const t=new Q8;i.state=t,t.window=null;const n=Sm(i,e);return n!==Tn&&(i.state=null),n},G8=i=>Nm(i,V8),Ep=!0,Ul,ql,$8=i=>{if(Ep){Ul=new Int32Array(512),ql=new Int32Array(32);let e=0;for(;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(gs(Am,i.lens,0,288,Ul,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;gs(vm,i.lens,0,32,ql,0,i.work,{bits:5}),Ep=!1}i.lencode=Ul,i.lenbits=9,i.distcode=ql,i.distbits=5},Bm=(i,e,t,n)=>{let r;const s=i.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>n&&(r=n),s.window.set(e.subarray(t-n,t-n+r),s.wnext),n-=r,n?(s.window.set(e.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},j8=(i,e)=>{let t,n,r,s,a,o,l,c,h,f,d,u,p,m,F=0,g,w,b,y,v,T,A,C;const k=new Uint8Array(4);let I,B;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!i||!i.state||!i.output||!i.input&&i.avail_in!==0)return oi;t=i.state,t.mode===Bi&&(t.mode=Hl),a=i.next_out,r=i.output,l=i.avail_out,s=i.next_in,n=i.input,o=i.avail_in,c=t.hold,h=t.bits,f=o,d=l,C=Tn;e:for(;;)switch(t.mode){case xm:if(t.wrap===0){t.mode=Hl;break}for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(t.wrap&2&&c===35615){t.check=0,k[0]=c&255,k[1]=c>>>8&255,t.check=mi(t.check,k,2,0),c=0,h=0,t.mode=ap;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((c&255)<<8)+(c>>8))%31){i.msg="incorrect header check",t.mode=dt;break}if((c&15)!==sp){i.msg="unknown compression method",t.mode=dt;break}if(c>>>=4,h-=4,A=(c&15)+8,t.wbits===0)t.wbits=A;else if(A>t.wbits){i.msg="invalid window size",t.mode=dt;break}t.dmax=1<<t.wbits,i.adler=t.check=1,t.mode=c&512?pp:Bi,c=0,h=0;break;case ap:for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(t.flags=c,(t.flags&255)!==sp){i.msg="unknown compression method",t.mode=dt;break}if(t.flags&57344){i.msg="unknown header flags set",t.mode=dt;break}t.head&&(t.head.text=c>>8&1),t.flags&512&&(k[0]=c&255,k[1]=c>>>8&255,t.check=mi(t.check,k,2,0)),c=0,h=0,t.mode=op;case op:for(;h<32;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.head&&(t.head.time=c),t.flags&512&&(k[0]=c&255,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,t.check=mi(t.check,k,4,0)),c=0,h=0,t.mode=lp;case lp:for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.head&&(t.head.xflags=c&255,t.head.os=c>>8),t.flags&512&&(k[0]=c&255,k[1]=c>>>8&255,t.check=mi(t.check,k,2,0)),c=0,h=0,t.mode=cp;case cp:if(t.flags&1024){for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.length=c,t.head&&(t.head.extra_len=c),t.flags&512&&(k[0]=c&255,k[1]=c>>>8&255,t.check=mi(t.check,k,2,0)),c=0,h=0}else t.head&&(t.head.extra=null);t.mode=hp;case hp:if(t.flags&1024&&(u=t.length,u>o&&(u=o),u&&(t.head&&(A=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+u),A)),t.flags&512&&(t.check=mi(t.check,n,u,s)),o-=u,s+=u,t.length-=u),t.length))break e;t.length=0,t.mode=fp;case fp:if(t.flags&2048){if(o===0)break e;u=0;do A=n[s+u++],t.head&&A&&t.length<65536&&(t.head.name+=String.fromCharCode(A));while(A&&u<o);if(t.flags&512&&(t.check=mi(t.check,n,u,s)),o-=u,s+=u,A)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=dp;case dp:if(t.flags&4096){if(o===0)break e;u=0;do A=n[s+u++],t.head&&A&&t.length<65536&&(t.head.comment+=String.fromCharCode(A));while(A&&u<o);if(t.flags&512&&(t.check=mi(t.check,n,u,s)),o-=u,s+=u,A)break e}else t.head&&(t.head.comment=null);t.mode=up;case up:if(t.flags&512){for(;h<16;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(c!==(t.check&65535)){i.msg="header crc mismatch",t.mode=dt;break}c=0,h=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),i.adler=t.check=0,t.mode=Bi;break;case pp:for(;h<32;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}i.adler=t.check=Ip(c),c=0,h=0,t.mode=go;case go:if(t.havedict===0)return i.next_out=a,i.avail_out=l,i.next_in=s,i.avail_in=o,t.hold=c,t.bits=h,z8;i.adler=t.check=1,t.mode=Bi;case Bi:if(e===D8||e===xa)break e;case Hl:if(t.last){c>>>=h&7,h-=h&7,t.mode=Ol;break}for(;h<3;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}switch(t.last=c&1,c>>>=1,h-=1,c&3){case 0:t.mode=gp;break;case 1:if($8(t),t.mode=ka,e===xa){c>>>=2,h-=2;break e}break;case 2:t.mode=wp;break;case 3:i.msg="invalid block type",t.mode=dt}c>>>=2,h-=2;break;case gp:for(c>>>=h&7,h-=h&7;h<32;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if((c&65535)!==(c>>>16^65535)){i.msg="invalid stored block lengths",t.mode=dt;break}if(t.length=c&65535,c=0,h=0,t.mode=Pl,e===xa)break e;case Pl:t.mode=mp;case mp:if(u=t.length,u){if(u>o&&(u=o),u>l&&(u=l),u===0)break e;r.set(n.subarray(s,s+u),a),o-=u,s+=u,l-=u,a+=u,t.length-=u;break}t.mode=Bi;break;case wp:for(;h<14;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(t.nlen=(c&31)+257,c>>>=5,h-=5,t.ndist=(c&31)+1,c>>>=5,h-=5,t.ncode=(c&15)+4,c>>>=4,h-=4,t.nlen>286||t.ndist>30){i.msg="too many length or distance symbols",t.mode=dt;break}t.have=0,t.mode=bp;case bp:for(;t.have<t.ncode;){for(;h<3;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.lens[M[t.have++]]=c&7,c>>>=3,h-=3}for(;t.have<19;)t.lens[M[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,I={bits:t.lenbits},C=gs(R8,t.lens,0,19,t.lencode,0,t.work,I),t.lenbits=I.bits,C){i.msg="invalid code lengths set",t.mode=dt;break}t.have=0,t.mode=Fp;case Fp:for(;t.have<t.nlen+t.ndist;){for(;F=t.lencode[c&(1<<t.lenbits)-1],g=F>>>24,w=F>>>16&255,b=F&65535,!(g<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(b<16)c>>>=g,h-=g,t.lens[t.have++]=b;else{if(b===16){for(B=g+2;h<B;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(c>>>=g,h-=g,t.have===0){i.msg="invalid bit length repeat",t.mode=dt;break}A=t.lens[t.have-1],u=3+(c&3),c>>>=2,h-=2}else if(b===17){for(B=g+3;h<B;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}c>>>=g,h-=g,A=0,u=3+(c&7),c>>>=3,h-=3}else{for(B=g+7;h<B;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}c>>>=g,h-=g,A=0,u=11+(c&127),c>>>=7,h-=7}if(t.have+u>t.nlen+t.ndist){i.msg="invalid bit length repeat",t.mode=dt;break}for(;u--;)t.lens[t.have++]=A}}if(t.mode===dt)break;if(t.lens[256]===0){i.msg="invalid code -- missing end-of-block",t.mode=dt;break}if(t.lenbits=9,I={bits:t.lenbits},C=gs(Am,t.lens,0,t.nlen,t.lencode,0,t.work,I),t.lenbits=I.bits,C){i.msg="invalid literal/lengths set",t.mode=dt;break}if(t.distbits=6,t.distcode=t.distdyn,I={bits:t.distbits},C=gs(vm,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,I),t.distbits=I.bits,C){i.msg="invalid distances set",t.mode=dt;break}if(t.mode=ka,e===xa)break e;case ka:t.mode=Ia;case Ia:if(o>=6&&l>=258){i.next_out=a,i.avail_out=l,i.next_in=s,i.avail_in=o,t.hold=c,t.bits=h,E8(i,d),a=i.next_out,r=i.output,l=i.avail_out,s=i.next_in,n=i.input,o=i.avail_in,c=t.hold,h=t.bits,t.mode===Bi&&(t.back=-1);break}for(t.back=0;F=t.lencode[c&(1<<t.lenbits)-1],g=F>>>24,w=F>>>16&255,b=F&65535,!(g<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(w&&!(w&240)){for(y=g,v=w,T=b;F=t.lencode[T+((c&(1<<y+v)-1)>>y)],g=F>>>24,w=F>>>16&255,b=F&65535,!(y+g<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}c>>>=y,h-=y,t.back+=y}if(c>>>=g,h-=g,t.back+=g,t.length=b,w===0){t.mode=Cp;break}if(w&32){t.back=-1,t.mode=Bi;break}if(w&64){i.msg="invalid literal/length code",t.mode=dt;break}t.extra=w&15,t.mode=yp;case yp:if(t.extra){for(B=t.extra;h<B;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.length+=c&(1<<t.extra)-1,c>>>=t.extra,h-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Ap;case Ap:for(;F=t.distcode[c&(1<<t.distbits)-1],g=F>>>24,w=F>>>16&255,b=F&65535,!(g<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(!(w&240)){for(y=g,v=w,T=b;F=t.distcode[T+((c&(1<<y+v)-1)>>y)],g=F>>>24,w=F>>>16&255,b=F&65535,!(y+g<=h);){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}c>>>=y,h-=y,t.back+=y}if(c>>>=g,h-=g,t.back+=g,w&64){i.msg="invalid distance code",t.mode=dt;break}t.offset=b,t.extra=w&15,t.mode=vp;case vp:if(t.extra){for(B=t.extra;h<B;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}t.offset+=c&(1<<t.extra)-1,c>>>=t.extra,h-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){i.msg="invalid distance too far back",t.mode=dt;break}t.mode=_p;case _p:if(l===0)break e;if(u=d-l,t.offset>u){if(u=t.offset-u,u>t.whave&&t.sane){i.msg="invalid distance too far back",t.mode=dt;break}u>t.wnext?(u-=t.wnext,p=t.wsize-u):p=t.wnext-u,u>t.length&&(u=t.length),m=t.window}else m=r,p=a-t.offset,u=t.length;u>l&&(u=l),l-=u,t.length-=u;do r[a++]=m[p++];while(--u);t.length===0&&(t.mode=Ia);break;case Cp:if(l===0)break e;r[a++]=t.length,l--,t.mode=Ia;break;case Ol:if(t.wrap){for(;h<32;){if(o===0)break e;o--,c|=n[s++]<<h,h+=8}if(d-=l,i.total_out+=d,t.total+=d,d&&(i.adler=t.check=t.flags?mi(t.check,r,d,a-d):Vc(t.check,r,d,a-d)),d=l,(t.flags?c:Ip(c))!==t.check){i.msg="incorrect data check",t.mode=dt;break}c=0,h=0}t.mode=xp;case xp:if(t.wrap&&t.flags){for(;h<32;){if(o===0)break e;o--,c+=n[s++]<<h,h+=8}if(c!==(t.total&4294967295)){i.msg="incorrect length check",t.mode=dt;break}c=0,h=0}t.mode=kp;case kp:C=L8;break e;case dt:C=_m;break e;case km:return Cm;case P8:default:return oi}return i.next_out=a,i.avail_out=l,i.next_in=s,i.avail_in=o,t.hold=c,t.bits=h,(t.wsize||d!==i.avail_out&&t.mode<dt&&(t.mode<Ol||e!==rp))&&Bm(i,i.output,i.next_out,d-i.avail_out),f-=i.avail_in,d-=i.avail_out,i.total_in+=f,i.total_out+=d,t.total+=d,t.wrap&&d&&(i.adler=t.check=t.flags?mi(t.check,r,d,i.next_out-d):Vc(t.check,r,d,i.next_out-d)),i.data_type=t.bits+(t.last?64:0)+(t.mode===Bi?128:0)+(t.mode===ka||t.mode===Pl?256:0),(f===0&&d===0||e===rp)&&C===Tn&&(C=H8),C},W8=i=>{if(!i||!i.state)return oi;let e=i.state;return e.window&&(e.window=null),i.state=null,Tn},K8=(i,e)=>{if(!i||!i.state)return oi;const t=i.state;return t.wrap&2?(t.head=e,e.done=!1,Tn):oi},Y8=(i,e)=>{const t=e.length;let n,r,s;return!i||!i.state||(n=i.state,n.wrap!==0&&n.mode!==go)?oi:n.mode===go&&(r=1,r=Vc(r,e,t,0),r!==n.check)?_m:(s=Bm(i,e,t,t),s?(n.mode=km,Cm):(n.havedict=1,Tn))},Z8=Em,X8=Sm,J8=Im,e7=G8,t7=Nm,i7=j8,n7=W8,r7=K8,s7=Y8,a7="pako inflate (from Nodeca project)",Di={inflateReset:Z8,inflateReset2:X8,inflateResetKeep:J8,inflateInit:e7,inflateInit2:t7,inflate:i7,inflateEnd:n7,inflateGetHeader:r7,inflateSetDictionary:s7,inflateInfo:a7};function o7(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var l7=o7,Tm=Object.prototype.toString,{Z_NO_FLUSH:c7,Z_FINISH:h7,Z_OK:Ls,Z_STREAM_END:Vl,Z_NEED_DICT:Ql,Z_STREAM_ERROR:f7,Z_DATA_ERROR:Sp,Z_MEM_ERROR:d7}=Vh;function Js(i){this.options=Fm.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k8,this.strm.avail_out=0;let t=Di.inflateInit2(this.strm,e.windowBits);if(t!==Ls)throw new Error(Qc[t]);if(this.header=new l7,Di.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Gc.string2buf(e.dictionary):Tm.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Di.inflateSetDictionary(this.strm,e.dictionary),t!==Ls)))throw new Error(Qc[t])}Js.prototype.push=function(i,e){const t=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let s,a,o;if(this.ended)return!1;for(e===~~e?a=e:a=e===!0?h7:c7,Tm.call(i)==="[object ArrayBuffer]"?t.input=new Uint8Array(i):t.input=i,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=Di.inflate(t,a),s===Ql&&r&&(s=Di.inflateSetDictionary(t,r),s===Ls?s=Di.inflate(t,a):s===Sp&&(s=Ql));t.avail_in>0&&s===Vl&&t.state.wrap>0&&i[t.next_in]!==0;)Di.inflateReset(t),s=Di.inflate(t,a);switch(s){case f7:case Sp:case Ql:case d7:return this.onEnd(s),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||s===Vl))if(this.options.to==="string"){let l=Gc.utf8border(t.output,t.next_out),c=t.next_out-l,h=Gc.buf2string(t.output,l);t.next_out=c,t.avail_out=n-c,c&&t.output.set(t.output.subarray(l,l+c),0),this.onData(h)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===Ls&&o===0)){if(s===Vl)return s=Di.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Js.prototype.onData=function(i){this.chunks.push(i)};Js.prototype.onEnd=function(i){i===Ls&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Fm.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function Qh(i,e){const t=new Js(e);if(t.push(i),t.err)throw t.msg||Qc[t.err];return t.result}function u7(i,e){return e=e||{},e.raw=!0,Qh(i,e)}var p7=Js,g7=Qh,m7=u7,w7=Qh,b7=Vh,F7={Inflate:p7,inflate:g7,inflateRaw:m7,ungzip:w7,constants:b7},{Inflate:Mk,inflate:y7,inflateRaw:Rk,ungzip:A7}=F7,v7=y7,_7=A7,C7=function(i,e){let t=new Uint8Array(i);return v7(t).buffer},x7=function(i,e){let t=i.byteLength,n=new Uint8Array(t),r=Math.floor(t/e),s=new DataView(i);for(var a=0;a<e;a++)for(var o=0;o<r;o++)n[a+o*e]=s.getUint8(a*r+o);return n.buffer},k7=function(i,e){return I7(i),i.slice(0,-4)};function I7(i){for(var e=i.byteLength%2!=0,t=i.byteLength-4,n=new DataView(i),r=0,s=0,a=0;a<t-1;a+=2){let c=n.getUint16(a,!0);r=(r+c)%65535,s=(s+r)%65535}if(e){let c=n.getUint8(t-1);r=(r+c)%65535,s=(s+r)%65535}var[o,l]=Ee.unpack_from(">HH",i,t);if(o=o%65535,l=l%65535,r!=o||s!=l)throw'ValueError("fletcher32 checksum invalid")';return!0}var E7=1,S7=2,N7=3,Np=new Map([[E7,C7],[S7,x7],[N7,k7]]),Mm=class{constructor(i,e){this.fh=i,this.offset=e,this.depth=null}async init(){this.all_nodes=new Map,await this._read_root_node(),await this._read_children()}async _read_children(){let i=this.depth;for(;i>0;){for(var e of this.all_nodes.get(i))for(var t of e.get("addresses"))this._add_node(await this._read_node(t,i-1));i--}}async _read_root_node(){let i=await this._read_node(this.offset,null);this._add_node(i),this.depth=i.get("node_level")}_add_node(i){let e=i.get("node_level");this.all_nodes.has(e)?this.all_nodes.get(e).push(i):this.all_nodes.set(e,[i])}async _read_node(i,e){let t=await this._read_node_header(i,e);return t.set("keys",[]),t.set("addresses",[]),t}async _read_node_header(i){throw"NotImplementedError: must define _read_node_header in implementation class"}},Rm=class extends Mm{constructor(){super(...arguments),Bn(this,"B_LINK_NODE",new Map([["signature","4s"],["node_type","B"],["node_level","B"],["entries_used","H"],["left_sibling","Q"],["right_sibling","Q"]]))}async _read_node_header(i,e){let t=await nt(this.B_LINK_NODE,this.fh,i);if(e!=null&&t.get("node_level")!=e)throw"node level does not match";return t}},B7=class extends Rm{constructor(i,e){super(i,e),Bn(this,"NODE_TYPE",0),this.ready=this.init()}async _read_node(i,e){let t=await this._read_node_header(i,e);i+=lt(this.B_LINK_NODE);let n=[],r=[],s=t.get("entries_used");for(var a=0;a<s;a++){let o=(await Ee.unpack_from_async("<Q",this.fh,i))[0];i+=8;let l=(await Ee.unpack_from_async("<Q",this.fh,i))[0];i+=8,n.push(o),r.push(l)}return n.push((await Ee.unpack_from_async("<Q",this.fh,i))[0]),t.set("keys",n),t.set("addresses",r),t}symbol_table_addresses(){var i=[],e=this.all_nodes.get(0);for(var t of e)i=i.concat(t.get("addresses"));return i}},T7=class extends Rm{constructor(i,e,t){super(i,e),Bn(this,"NODE_TYPE",1),this.dims=t,this.ready=this.init()}async _read_node(i,e){let t=await this._read_node_header(i,e);i+=lt(this.B_LINK_NODE);var n=[],r=[];let s=t.get("entries_used");for(var a=0;a<s;a++){let[o,l]=await Ee.unpack_from_async("<II",this.fh,i);i+=8;let c="<"+this.dims.toFixed()+"Q",h=Ee.calcsize(c),f=await Ee.unpack_from_async(c,this.fh,i);i+=h;let d=(await Ee.unpack_from_async("<Q",this.fh,i))[0];i+=8,n.push(new Map([["chunk_size",o],["filter_mask",l],["chunk_offset",f]])),r.push(d)}return t.set("keys",n),t.set("addresses",r),t}async construct_data_from_chunks(i,e,t,n){var r,s,a;if(t instanceof Array){let A=t[0];if(A=="REFERENCE"){if(t[1]!=8)throw"NotImplementedError('Unsupported Reference type')";t="<u8",r="getUint64",s=!1,a=8}else if(A=="VLEN_STRING"||A=="VLEN_SEQUENCE")r="getVLENStruct",s=!1,a=16;else throw"NotImplementedError('datatype not implemented')"}else[r,s,a]=Ua(t);var o=e.reduce(function(A,C){return A*C},1),l=i.reduce(function(A,C){return A*C},1);let c=e.length;var h=1;i.slice().map(function(A){let C=h;return h*=A,C});var h=1,f=e.slice().reverse().map(function(A){let C=h;return h*=A,C}).reverse(),d=new Array(o);let u=l*a;for(var p of this.all_nodes.get(0)){let A=p.get("keys"),C=p.get("addresses"),k=A.length;for(var m=0;m<k;m++){let I=A[m],B=C[m];var F;if(n==null)F=await this.fh.slice(B,B+u);else{F=await this.fh.slice(B,B+I.get("chunk_size"));let M=I.get("filter_mask");F=this._filter_chunk(F,M,n,a)}for(var g=I.get("chunk_offset").slice(),w=g.slice(),b=w.map(function(){return 0}),y=new dr(F),v=0;v<l;v++){for(var T=c-1;T>=0&&b[T]>=i[T];T--)b[T]=0,w[T]=g[T],T>0&&(b[T-1]+=1,w[T-1]+=1);if(w.slice(0,-1).every(function(N,x){return N<e[x]})){let N=v*a,x=y[r](N,!s,a),D=w.slice(0,-1).reduce(function(S,U,O){return U*f[O]+S},0);d[D]=x}b[c-1]+=1,w[c-1]+=1}}}return d}_filter_chunk(i,e,t,n){let r=t.length,s=i.slice();for(var a=r-1;a>=0;a--){if(e&1<<a)continue;let o=t[a],l=o.get("filter_id"),c=o.get("client_data");if(Np.has(l))s=Np.get(l)(s,n,c);else throw'NotImplementedError("Filter with id:'+l.toFixed()+' not supported")'}return s}},Dm=class extends Mm{constructor(i,e){super(i,e),Bn(this,"B_TREE_HEADER",new Map([["signature","4s"],["version","B"],["node_type","B"],["node_size","I"],["record_size","H"],["depth","H"],["split_percent","B"],["merge_percent","B"],["root_address","Q"],["root_nrecords","H"],["total_nrecords","Q"]])),Bn(this,"B_LINK_NODE",new Map([["signature","4s"],["version","B"],["node_type","B"]])),this.ready=this.init()}async _read_root_node(){let i=await this._read_tree_header(this.offset);this.address_formats=this._calculate_address_formats(i),this.header=i,this.depth=i.get("depth");let e=[i.get("root_address"),i.get("root_nrecords"),i.get("total_nrecords")],t=await this._read_node(e,this.depth);this._add_node(t)}async _read_tree_header(i){return await nt(this.B_TREE_HEADER,this.fh,this.offset)}_calculate_address_formats(i){let e=i.get("node_size"),t=i.get("record_size"),n=0,r=0,s=new Map,a=i.get("depth");for(var o=0;o<=a;o++){let l="",c="",h="",f,d,u;if(o==0?(f=0,d=0,u=0):o==1?(f=8,l="<Q",d=this._required_bytes(n),c=this._int_format(d),u=0):(f=8,l="<Q",d=this._required_bytes(n),c=this._int_format(d),u=this._required_bytes(r),h=this._int_format(u)),s.set(o,[f,d,u,l,c,h]),o<a){let p=f+d+u;n=this._nrecords_max(e,t,p),r>0?r*=n:r=n}}return s}_nrecords_max(i,e,t){return Math.floor((i-10-t)/(e+t))}_required_bytes(i){return Math.ceil(gm(i)/8)}_int_format(i){return["<B","<H","<I","<Q"][i-1]}async _read_node(i,e){let[t,n,r]=i,s=this._read_node_header(t,e);t+=lt(this.B_LINK_NODE);let a=this.header.get("record_size"),o=[];for(let h=0;h<n;h++){let f=await this._parse_record(this.fh,t,a);t+=a,o.push(f)}let l=[],c=this.address_formats.get(e);if(e!=0){let[h,f,d,u,p,m]=c;for(let F=0;F<=n;F++){let g=(await Ee.unpack_from_async(u,this.fh,t))[0];t+=h;let w=(await Ee.unpack_from_async(p,this.fh,t))[0];t+=f;let b=w;d>0&&(b=(await Ee.unpack_from_async(m,this.fh,t))[0],t+=d),l.push([g,w,b])}}return s.set("keys",o),s.set("addresses",l),s}async _read_node_header(i,e){let t=await nt(this.B_LINK_NODE,this.fh,i);return t.set("node_level",e),t}*iter_records(){for(let i of this.all_nodes.values())for(let e of i)for(let t of e.get("keys"))yield t}_parse_record(i){throw"NotImplementedError"}},M7=class extends Dm{constructor(){super(...arguments),Bn(this,"NODE_TYPE",5)}async _parse_record(i,e,t){let n=(await Ee.unpack_from_async("<I",i,e))[0];e+=4;const r=await i.slice(e,e+7);return new Map([["namehash",n],["heapid",r]])}},R7=class extends Dm{constructor(){super(...arguments),Bn(this,"NODE_TYPE",6)}async _parse_record(i,e,t){let n=(await Ee.unpack_from_async("<Q",i,e))[0];e+=8;const r=await i.slice(e,e+7);return new Map([["creationorder",n],["heapid",r]])}},D7=class{constructor(i,e){this.ready=this.init(i,e)}async init(i,e){let t=await Ee.unpack_from_async("<B",i,e+8);var n;if(t==0)n=await nt(zm,i,e),this._end_of_sblock=e+P7;else if(t==2||t==3)n=await nt(Hm,i,e),this._end_of_sblock=e+O7;else throw"unsupported superblock version: "+t.toFixed();if(n.get("format_signature")!=H7)throw"Incorrect file signature: "+n.get("format_signature");if(n.get("offset_size")!=8||n.get("length_size")!=8)throw"File uses non-64-bit addressing";this.version=n.get("superblock_version"),this._contents=n,this._root_symbol_table=null,this._fh=i}async get_offset_to_dataobjects(){if(this.version==0){var i=new Lm(this._fh,this._end_of_sblock,!0);return await i.ready,this._root_symbol_table=i,i.group_offset}else{if(this.version==2||this.version==3)return this._contents.get("root_group_address");throw"Not implemented version = "+this.version.toFixed()}}},L7=class{constructor(i,e){this.ready=this.init(i,e)}async init(i,e){let t=await nt(V7,i,e);it(t.get("signature")=="HEAP"),it(t.get("version")==0);let n=t.get("address_of_data_segment"),r=await i.slice(n,n+t.get("data_segment_size"));t.set("heap_data",r),this._contents=t,this.data=r}get_object_name(i){let t=new Uint8Array(this.data).indexOf(0,i)-i;return Ee.unpack_from("<"+t.toFixed()+"s",this.data,i)[0]}},Lm=class{constructor(i,e,t=!1){this.ready=this.init(i,e,t)}async init(i,e,t){var n;if(t)n=new Map([["symbols",1]]);else{if(n=await nt(Om,i,e),n.get("signature")!="SNOD")throw"incorrect node type";e+=q7}for(var r=[],s=n.get("symbols"),a=0;a<s;a++)r.push(await nt(Pm,i,e)),e+=U7;return t&&(this.group_offset=r[0].get("object_header_address")),this.entries=r,this._contents=n,this}assign_name(i){this.entries.forEach(function(e){let t=e.get("link_name_offset"),n=i.get_object_name(t);e.set("link_name",n)})}get_links(i){var e={};return this.entries.forEach(function(t){let n=t.get("cache_type"),r=t.get("link_name");if(n==0||n==1)e[r]=t.get("object_header_address");else if(n==2){let a=t.get("scratch"),o=new ArrayBuffer(4),l=new Uint8Array(o);for(var s=0;s<4;s++)l[s]=a.charCodeAt(s);let c=Ee.unpack_from("<I",o,0)[0];e[r]=i.get_object_name(c)}}),e}},Bp=class{constructor(i,e){this.ready=this.init(i,e)}async init(i,e){let t=await nt(Um,i,e);e+=Tp;let n=t.get("collection_size")-Tp,r=await i.slice(e,e+n);this.heap_data=r,this._header=t,this._objects=null}get objects(){if(this._objects==null){this._objects=new Map;for(var i=0;i<=this.heap_data.byteLength-Mp;){let e=pm(qm,this.heap_data,i);if(e.get("object_index")==0)break;i+=Mp;let t=this.heap_data.slice(i,i+e.get("object_size"));this._objects.set(e.get("object_index"),t),i+=ls(e.get("object_size"))}}return this._objects}},z7=class{constructor(i,e){this.fh=i,this.ready=this.init(e)}async init(i){let e=await nt(Rp,this.fh,i);if(i+=lt(Rp),it(e.get("signature")=="FRHP"),it(e.get("version")==0),e.get("filter_info_size")>0)throw"Filter info size not supported on FractalHeap";if(e.get("btree_address_huge_objects")==Ea)e.set("btree_address_huge_objects",null);else throw"Huge objects not implemented in FractalHeap";e.get("root_block_address")==Ea&&e.set("root_block_address",null);let t=e.get("log2_maximum_heap_size"),n=this._min_size_nbits(t),r=new Map([["signature","4s"],["version","B"],["heap_header_adddress","Q"],["block_offset",`${n}B`]]);this.indirect_block_header=new Map(r),this.indirect_block_header_size=lt(r),(e.get("flags")&2)==2&&r.set("checksum","I"),this.direct_block_header=r,this.direct_block_header_size=lt(r);let s=e.get("maximum_direct_block_size");this._managed_object_offset_size=this._min_size_nbits(t);let a=Math.min(s,e.get("max_managed_object_size"));this._managed_object_length_size=this._min_size_integer(a);let o=e.get("starting_block_size"),l=e.get("table_width");if(!(o>0))throw"Starting block size == 0 not implemented";let c=Number(Math.floor(Math.log2(s)));it(1n<<BigInt(c)==s);let h=Number(Math.floor(Math.log2(o)));it(1n<<BigInt(h)==o),this._max_direct_nrows=c-h+2;let f=Math.floor(Math.log2(l));it(1<<f==l),this._indirect_nrows_sub=f+h-1,this.header=e,this.nobjects=e.get("managed_object_count")+e.get("huge_object_count")+e.get("tiny_object_count");let d=[],u=e.get("root_block_address"),p=0;if(u!=null&&(p=e.get("indirect_current_rows_count")),p>0)for await(let w of this._iter_indirect_block(this.fh,u,p))d.push(w);else{let w=await this._read_direct_block(this.fh,u,o);d.push(w)}let m=d.reduce((w,b)=>w+b.byteLength,0),F=new Uint8Array(m),g=0;d.forEach(w=>{F.set(new Uint8Array(w),g),g+=w.byteLength}),this.managed=F.buffer}async _read_direct_block(i,e,t){let n=await i.slice(e,e+t),r=pm(this.direct_block_header,n);return it(r.get("signature")=="FHDB"),n}get_data(i){let e=Ee.unpack_from("<B",i,0)[0],t=e>>4&3,n=e>>6,r=1;if(t==0){it(n==0);let s=this._managed_object_offset_size,a=Zu(s,i,r);r+=s,s=this._managed_object_length_size;let o=Zu(s,i,r);return this.managed.slice(a,a+o)}else throw t==1?"tiny objectID not supported in FractalHeap":t==2?"huge objectID not supported in FractalHeap":"unknown objectID type in FractalHeap"}_min_size_integer(i){return this._min_size_nbits(gm(i))}_min_size_nbits(i){return Math.ceil(i/8)}async*_iter_indirect_block(i,e,t){let n=await nt(this.indirect_block_header,i,e);e+=this.indirect_block_header_size,it(n.get("signature")=="FHIB");let s=n.get("block_offset").reduce((h,f,d)=>h+(f<<d*8),0);n.set("block_offset",s);let[a,o]=this._indirect_info(t),l=[];for(let h=0;h<a;h++){let f=(await Ee.unpack_from_async("<Q",i,e))[0];if(e+=8,f==Ea)break;let d=this._calc_block_size(h);l.push([f,d])}let c=[];for(let h=a;h<a+o;h++){let f=(await Ee.unpack_from_async("<Q",i,e))[0];if(e+=8,f==Ea)break;let d=this._calc_block_size(h),u=this._iblock_nrows_from_block_size(d);c.push([f,u])}for(let[h,f]of l)yield await this._read_direct_block(i,h,f);for(let[h,f]of c)for await(let d of this._iter_indirect_block(i,h,f))yield d}_calc_block_size(i){let e=Math.floor(i/this.header.get("table_width"));return 2**Math.max(e-1,0)*this.header.get("starting_block_size")}_iblock_nrows_from_block_size(i){let e=Math.floor(Math.log2(i));return it(2**e==i),e-this._indirect_nrows_sub}_indirect_info(i){let e=this.header.get("table_width"),t=i*e,n=this._max_direct_nrows*e,r,s;return i<=n?(r=t,s=0):(r=n,s=t-n),[r,s]}_int_format(i){return["B","H","I","Q"][i-1]}},H7=Ee.unpack_from("8s",new Uint8Array([137,72,68,70,13,10,26,10]).buffer)[0],Ea=Ee.unpack_from("<Q",new Uint8Array([255,255,255,255,255,255,255,255]).buffer)[0],zm=new Map([["format_signature","8s"],["superblock_version","B"],["free_storage_version","B"],["root_group_version","B"],["reserved_0","B"],["shared_header_version","B"],["offset_size","B"],["length_size","B"],["reserved_1","B"],["group_leaf_node_k","H"],["group_internal_node_k","H"],["file_consistency_flags","L"],["base_address_lower","Q"],["free_space_address","Q"],["end_of_file_address","Q"],["driver_information_address","Q"]]),P7=lt(zm),Hm=new Map([["format_signature","8s"],["superblock_version","B"],["offset_size","B"],["length_size","B"],["file_consistency_flags","B"],["base_address","Q"],["superblock_extension_address","Q"],["end_of_file_address","Q"],["root_group_address","Q"],["superblock_checksum","I"]]),O7=lt(Hm),Pm=new Map([["link_name_offset","Q"],["object_header_address","Q"],["cache_type","I"],["reserved","I"],["scratch","16s"]]),U7=lt(Pm),Om=new Map([["signature","4s"],["version","B"],["reserved_0","B"],["symbols","H"]]),q7=lt(Om),V7=new Map([["signature","4s"],["version","B"],["reserved","3s"],["data_segment_size","Q"],["offset_to_free_list","Q"],["address_of_data_segment","Q"]]),Um=new Map([["signature","4s"],["version","B"],["reserved","3s"],["collection_size","Q"]]),Tp=lt(Um),qm=new Map([["object_index","H"],["reference_count","H"],["reserved","I"],["object_size","Q"]]),Mp=lt(qm),Rp=new Map([["signature","4s"],["version","B"],["object_index_size","H"],["filter_info_size","H"],["flags","B"],["max_managed_object_size","I"],["next_huge_object_index","Q"],["btree_address_huge_objects","Q"],["managed_freespace_size","Q"],["freespace_manager_address","Q"],["managed_space_size","Q"],["managed_alloc_size","Q"],["next_directblock_iterator_address","Q"],["managed_object_count","Q"],["huge_objects_total_size","Q"],["huge_object_count","Q"],["tiny_objects_total_size","Q"],["tiny_object_count","Q"],["table_width","H"],["starting_block_size","Q"],["maximum_direct_block_size","Q"],["log2_maximum_heap_size","H"],["indirect_starting_rows_count","H"],["root_block_address","Q"],["indirect_current_rows_count","H"]]),$c=class{constructor(i,e){this.ready=this.init(i,e)}async init(i,e){let t=(await Ee.unpack_from_async("<B",i,e))[0];if(t==1)var[n,r,s]=await this._parse_v1_objects(i,e);else if(t==79)var[n,r,s]=await this._parse_v2_objects(i,e);else throw"InvalidHDF5File('unknown Data Object Header')";this.fh=i,this.msgs=n,this.msg_data=r,this.offset=e,this._global_heaps={},this._header=s,this._filter_pipeline=null,this._chunk_params_set=!1,this._chunks=null,this._chunk_dims=null,this._chunk_address=null}get dtype(){let e=this.find_msg_type(e9)[0].get("offset_to_message");return new Xu(this.fh,e).dtype}get chunks(){return this._get_chunk_params().then(()=>this._chunks)}get shape(){let e=this.find_msg_type(Hp)[0].get("offset_to_message");return Q7(this.fh,e)}async get_filter_pipeline(){if(this._filter_pipeline!=null)return this._filter_pipeline;let i=this.find_msg_type(n9);if(!i.length)return this._filter_pipeline=null,this._filter_pipeline;var e=i[0].get("offset_to_message");let[t,n]=await Ee.unpack_from_async("<BB",this.fh,e);e+=Ee.calcsize("<BB");var r=[];if(t==1){await Ee.unpack_from_async("<HI",this.fh,e),e+=Ee.calcsize("<HI");for(var s=0;s<n;s++){let a=await nt(Xm,this.fh,e);e+=X7;let o=ls(a.get("name_length"),8),l="<"+o.toFixed()+"s",c=(await Ee.unpack_from_async(l,this.fh,e))[0];a.set("filter_name",c),e+=o,l="<"+a.get("client_data_values").toFixed()+"I";let h=await Ee.unpack_from_async(l,this.fh,e);a.set("client_data",h),e+=4*a.get("client_data_values"),a.get("client_data_values")%2&&(e+=4),r.push(a)}}else if(t==2)for(let a=0;a<n;a++){let o=new Map,l=this.fh,c=(await Ee.unpack_from_async("<H",l,e))[0];e+=2,o.set("filter_id",c);let h=0;c>255&&(h=(await Ee.unpack_from_async("<H",l,e))[0],e+=2);let f=(await Ee.unpack_from_async("<H",l,e))[0];e+=2;let d=(f&1)>0;o.set("optional",d);let u=(await Ee.unpack_from_async("<H",l,e))[0];e+=2;let p;h>0&&(p=(await Ee.unpack_from_async(`${h}s`,l,e))[0],e+=h),o.set("name",p);let m=await Ee.unpack_from_async(`<${u}i`,l,e);e+=4*u,o.set("client_data_values",m),r.push(o)}else throw`version ${t} is not supported`;return this._filter_pipeline=r,this._filter_pipeline}find_msg_type(i){return this.msgs.filter(function(e){return e.get("type")==i})}async get_attributes(){let i={},e=this.find_msg_type(r9);for(let t of e){let n=t.get("offset_to_message"),[r,s]=await this.unpack_attribute(n);i[r]=s}return i}async get_fillvalue(){var e=this.find_msg_type(t9)[0].get("offset_to_message"),t;let n=(await Ee.unpack_from_async("<B",this.fh,e))[0];var r,s,a;if(n==1||n==2)r=await nt(Ym,this.fh,e),e+=Y7,t=r.get("fillvalue_defined");else if(n==3)r=await nt(Zm,this.fh,e),e+=Z7,t=r.get("flags")&32;else throw'InvalidHDF5File("Unknown fillvalue msg version: "'+String(n);if(t?(s=(await Ee.unpack_from_async("<I",this.fh,e))[0],e+=4):s=0,s){let[o,l,c]=Ua(await this.dtype);a=new dr(await this.fh.slice(e,e+c))[o](e,!l,c)}else a=0;return a}async unpack_attribute(i){let e=(await Ee.unpack_from_async("<B",this.fh,i))[0];var t,n;if(e==1)t=await nt(Qm,this.fh,i),it(t.get("version")==1),i+=G7,n=8;else if(e==3)t=await nt(Gm,this.fh,i),it(t.get("version")==3),i+=$7,n=1;else throw"unsupported attribute message version: "+e;let r=t.get("name_size"),s=(await Ee.unpack_from_async("<"+r.toFixed()+"s",this.fh,i))[0];s=s.replace(/\x00$/,""),i+=ls(r,n);var a;try{a=await new Xu(this.fh,i).dtype}catch{return console.warn("Attribute "+s+" type not implemented, set to null."),[s,null]}i+=ls(t.get("datatype_size"),n);let o=await this.determine_data_shape(this.fh,i),l=o.reduce(function(h,f){return h*f},1);if(i+=ls(t.get("dataspace_size"),n),a.datatype_class===5)c=await this.fh.slice(i,i+a.size);else{var c=await this._attr_value(a,this.fh,l,i);o.length==0&&(c=c[0])}return[s,c]}async determine_data_shape(i,e){let t=(await Ee.unpack_from_async("<B",i,e))[0];var n;if(t==1)n=await nt(Gh,i,e),it(n.get("version")==1),e+=$m;else if(t==2)n=await nt($h,i,e),it(n.get("version")==2),e+=jm;else throw"unknown dataspace message version";let r=n.get("dimensionality");return await Ee.unpack_from_async("<"+r.toFixed()+"Q",i,e)}async _attr_value(i,e,t,n){var r=new Array(t);if(i instanceof Array){let c=i[0];for(var s=0;s<t;s++)if(c=="VLEN_STRING"){let h=i[2];var[a,o]=await this._vlen_size_and_data(e,n);const f=h==0?"ascii":"utf-8",d=new TextDecoder(f);r[s]=d.decode(o),n+=16}else if(c=="REFERENCE"){var l=await Ee.unpack_from_async("<Q",e,n);r[s]=l,n+=8}else if(c=="VLEN_SEQUENCE"){let h=i[1];var[a,o]=this._vlen_size_and_data(e,n);r[s]=this._attr_value(h,o,a,0),n+=16}else throw"NotImplementedError"}else{let[c,h,f]=Ua(i);const d=await e.slice(n,n+t*f);let u=new dr(d,0),p=0;for(var s=0;s<t;s++)r[s]=u[c](p,!h,f),p+=f}return r}async _vlen_size_and_data(i,e){let t=(await Ee.unpack_from_async("<I",i,e))[0],n=await nt(Vm,i,e+4),r=n.get("collection_address");it(n.get("collection_address")<Number.MAX_SAFE_INTEGER);var s;r in this._global_heaps||(s=new Bp(this.fh,r),await s.ready,this._global_heaps[r]=s),s=this._global_heaps[r];let a=s.objects.get(n.get("object_index"));return[t,a]}async _parse_v1_objects(i,e){let t=await nt(Dp,i,e);it(t.get("version")==1);let n=t.get("total_header_messages");for(var r=t.get("object_header_size"),s=e+lt(Dp),a=await i.slice(s,s+r),o=[[s,r]],l=0,c=0,h=new Array(n),f=0;f<n;f++){c>=r&&([s,r]=o[++l],c=0);let p=await nt(Wm,i,s+c),m=s+c+zp;if(p.set("offset_to_message",m),p.get("type")==Op){var[d,u]=await Ee.unpack_from_async("<QQ",i,m);o.push([d,u])}c+=zp+p.get("size"),h[f]=p}return[h,a,t]}async _parse_v2_objects(i,e){var[t,n,r]=await this._parse_v2_header(i,e);e=r;for(var s=[],a=t.get("size_of_chunk_0"),o=i.slice(e,e+=a),l=[[r,a]],c=0,h=0;;){if(h>=a-$l){let m=l[++c];if(m==null)break;[r,a]=m,h=0}let u=await nt(Km,i,r+h),p=r+h+$l+n;if(u.set("offset_to_message",p),u.get("type")==Op){var[f,d]=await Ee.unpack_from_async("<QQ",i,p);l.push([f+4,d-4])}h+=$l+u.get("size")+n,s.push(u)}return[s,o,t]}async _parse_v2_header(i,e){let t=await nt(Lp,i,e);var n;if(e+=lt(Lp),it(t.get("version")==2),t.get("flags")&4?n=2:n=0,it((t.get("flags")&16)==0),t.get("flags")&32){let s=await Ee.unpack_from_async("<4I",i,e);e+=16,t.set("access_time",s[0]),t.set("modification_time",s[1]),t.set("change_time",s[2]),t.set("birth_time",s[3])}let r=["<B","<H","<I","<Q"][t.get("flags")&3];return t.set("size_of_chunk_0",(await Ee.unpack_from_async(r,i,e))[0]),e+=Ee.calcsize(r),[t,n,e]}async find_link(i){if(this._links){for(link of this._links)if(i===link[0])return link}else{const e=[];for await(const t of this.iter_links()){if(i===t[0])return t;e.push(t)}this._links=e}}async get_links(){const i=[];for await(const e of this.iter_links())i.push(e);return Object.fromEntries(i)}async*iter_links(){for(let i of this.msgs)i.get("type")==s9?yield*this._iter_links_from_symbol_tables(i):i.get("type")==i9?yield this._get_link_from_link_msg(i):i.get("type")==J7&&(yield*this._iter_link_from_link_info_msg(i))}async*_iter_links_from_symbol_tables(i){it(i.get("size")==16);let e=await nt(j7,this.fh,i.get("offset_to_message"));yield*this._iter_links_btree_v1(e.get("btree_address"),e.get("heap_address"))}async*_iter_links_btree_v1(i,e){let t=new B7(this.fh,i);await t.ready;let n=new L7(this.fh,e);await n.ready;for(let r of t.symbol_table_addresses()){let s=new Lm(this.fh,r);await s.ready,s.assign_name(n),yield*Object.entries(s.get_links(n))}}async _get_link_from_link_msg(i){let e=i.get("offset_to_message");return await this._decode_link_msg(this.fh,e)[1]}async _decode_link_msg(i,e){let[t,n]=await Ee.unpack_from_async("<BB",i,e);e+=2,it(t==1);let r=2**(n&3),s=(n&2**3)>0,a=(n&2**4)>0,o=(n&2**2)>0,l;s?(l=(await Ee.unpack_from_async("<B",i,e))[0],e+=1):l=0,it([0,1].includes(l));let c;o&&(c=(await Ee.unpack_from_async("<Q",i,e))[0],e+=8);let h=0;a&&(h=(await Ee.unpack_from_async("<B",i,e))[0],e+=1);let f=h==0?"ascii":"utf-8",d=["<B","<H","<I","<Q"][n&3],u=(await Ee.unpack_from_async(d,i,e))[0];e+=r;let p=new TextDecoder(f).decode(await i.slice(e,e+u));e+=u;let m;if(l==0)m=(await Ee.unpack_from_async("<Q",i,e))[0];else if(l==1){let F=(await Ee.unpack_from_async("<H",i,e))[0];e+=2,m=new TextDecoder(f).decode(await i.slice(e,e+F))}return[c,[p,m]]}async*_iter_link_from_link_info_msg(i){let e=i.get("offset_to_message"),t=await this._decode_link_info_msg(this.fh,e),n=t.get("heap_address"),r=t.get("name_btree_address"),s=t.get("order_btree_address");r!=null&&(yield*this._iter_links_btree_v2(r,s,n))}async*_iter_links_btree_v2(i,e,t){let n=new z7(this.fh,t);await n.ready;let r;const s=e!=null;s?(r=new R7(this.fh,e),await r.ready):(r=new M7(this.fh,i),await r.ready);let a=new Map;for(let l of r.iter_records()){let c=n.get_data(l.get("heapid")),[h,f]=await this._decode_link_msg(c,0);const d=s?h:f[0];a.set(d,f)}let o=Array.from(a.keys()).sort();for(let l of o)yield a.get(l)}async _decode_link_info_msg(i,e){let[t,n]=await Ee.unpack_from_async("<BB",i,e);it(t==0),e+=2,(n&1)>0&&(e+=8);let r=(n&2)>0?K7:W7,s=await nt(r,i,e),a=new Map;for(let[o,l]of s.entries())a.set(o,l==Gl?null:l);return a}get is_dataset(){return this.find_msg_type(Hp).length>0}async get_data(){let e=this.find_msg_type(Pp)[0].get("offset_to_message");var[t,n,r,s]=await this._get_data_message_properties(e);if(r==0)throw"Compact storage of DataObject not implemented";if(r==1)return this._get_contiguous_data(s);if(r==2)return this._get_chunked_data(e)}async _get_data_message_properties(i){let e,t,n,[r,s,a]=await Ee.unpack_from_async("<BBB",this.fh,i);return r==1||r==2?(e=s,t=a,n=i,n+=Ee.calcsize("<BBB"),n+=Ee.calcsize("<BI"),it(t==1||t==2)):(r==3||r==4)&&(t=s,n=i,n+=Ee.calcsize("<BB")),it(r>=1&&r<=4),[r,e,t,n]}async _get_contiguous_data(i){let[e]=await Ee.unpack_from_async("<Q",this.fh,i);const t=await this.shape,n=await this.dtype;if(e==Gl){let o=t.reduce(function(l,c){return l*c},1);return new Array(o)}var r=t.reduce(function(o,l){return o*l},1);if(n instanceof Array){let o=n[0];if(o=="REFERENCE"){if(n[1]!=8)throw"NotImplementedError('Unsupported Reference type')";return await this.fh.slice(e,e+r)}else if(o=="VLEN_STRING"){const c=n[2]==0?"ascii":"utf-8",h=new TextDecoder(c);for(var a=[],s=0;s<r;s++){const[d,u]=await this._vlen_size_and_data(this.fh,e);a[s]=h.decode(u),e+=16}return a}else throw"NotImplementedError('datatype not implemented')"}else if(/[<>=!@\|]?(i|u|f|S)(\d*)/.test(n)){let[o,l,c]=Ua(n),h=new Array(r);const f=await this.fh.slice(e,e+c*r);let d=new dr(f);for(var s=0;s<r;s++)h[s]=d[o](s*c,!l,c);return h}else{if(n.datatype_class===5)return this.fh.slice(e,e+n.size);throw"not Implemented - no proper dtype defined"}}async _get_chunked_data(i){if(await this._get_chunk_params(),this._chunk_address==Gl)return[];var e=new T7(this.fh,this._chunk_address,this._chunk_dims);await e.ready;const t=await this.dtype,n=await this.shape,r=await this.chunks,s=await this.get_filter_pipeline();let a=await e.construct_data_from_chunks(r,n,t,s);if(t instanceof Array&&/^VLEN/.test(t[0])){let c=t[0];for(var o=0;o<a.length;o++){let[h,f,d]=a[o];var l;f in this._global_heaps?l=this._global_heaps[f]:(l=new Bp(this.fh,f),await l.ready,this._global_heaps[f]=l);let u=l.objects.get(d);if(c=="VLEN_STRING"){const m=t[2]==0?"ascii":"utf-8",F=new TextDecoder(m);a[o]=F.decode(u)}}}return a}async _get_chunk_params(){if(!this._chunk_params_set){this._chunk_params_set=!0;var i=this.find_msg_type(Pp)[0],e=i.get("offset_to_message"),[t,n,r,s]=await this._get_data_message_properties(e);if(r==2){var a;if(t==1||t==2){var o=(await Ee.unpack_from_async("<Q",this.fh,s))[0];a=s+Ee.calcsize("<Q")}else if(t==3){var[n,o]=await Ee.unpack_from_async("<BQ",this.fh,s);a=s+Ee.calcsize("<BQ")}it(t>=1&&t<=3);var l="<"+(n-1).toFixed()+"I",c=await Ee.unpack_from_async(l,this.fh,a);this._chunks=c,this._chunk_dims=n,this._chunk_address=o}}}};async function Q7(i,e){let t=(await Ee.unpack_from_async("<B",i,e))[0];var n;if(t==1)n=await nt(Gh,i,e),it(n.get("version")==1),e+=$m;else if(t==2)n=await nt($h,i,e),it(n.get("version")==2),e+=jm;else throw"InvalidHDF5File('unknown dataspace message version')";let r=n.get("dimensionality");return(await Ee.unpack_from_async("<"+(r*2).toFixed()+"I",i,e)).filter(function(a,o){return o%2==0})}var Gl=Ee.unpack_from("<Q",new Uint8Array([255,255,255,255,255,255,255,255]).buffer),Vm=new Map([["collection_address","Q"],["object_index","I"]]);lt(Vm);var Qm=new Map([["version","B"],["reserved","B"],["name_size","H"],["datatype_size","H"],["dataspace_size","H"]]),G7=lt(Qm),Gm=new Map([["version","B"],["flags","B"],["name_size","H"],["datatype_size","H"],["dataspace_size","H"],["character_set_encoding","B"]]),$7=lt(Gm),Dp=new Map([["version","B"],["reserved","B"],["total_header_messages","H"],["object_reference_count","I"],["object_header_size","I"],["padding","I"]]),Lp=new Map([["signature","4s"],["version","B"],["flags","B"]]),Gh=new Map([["version","B"],["dimensionality","B"],["flags","B"],["reserved_0","B"],["reserved_1","I"]]),$m=lt(Gh),$h=new Map([["version","B"],["dimensionality","B"],["flags","B"],["type","B"]]),jm=lt($h),Wm=new Map([["type","H"],["size","H"],["flags","B"],["reserved","3s"]]),zp=lt(Wm),Km=new Map([["type","B"],["size","H"],["flags","B"]]),$l=lt(Km),j7=new Map([["btree_address","Q"],["heap_address","Q"]]),W7=new Map([["heap_address","Q"],["name_btree_address","Q"]]),K7=new Map([["heap_address","Q"],["name_btree_address","Q"],["order_btree_address","Q"]]),Ym=new Map([["version","B"],["space_allocation_time","B"],["fillvalue_write_time","B"],["fillvalue_defined","B"]]),Y7=lt(Ym),Zm=new Map([["version","B"],["flags","B"]]),Z7=lt(Zm),Xm=new Map([["filter_id","H"],["name_length","H"],["flags","H"],["client_data_values","H"]]),X7=lt(Xm),Hp=1,J7=2,e9=3,t9=5,i9=6,Pp=8,n9=11,r9=12,Op=16,s9=17,jc=class{constructor(i,e){e==null?(this.parent=this,this.file=this):(this.parent=e,this.file=e.file),this.name=i}async init(i){const e=this.file.index;e&&this.name in e?this._links=e[this.name]:this._links=await i.get_links(),this._dataobjects=i,this._attrs=null,this._keys=null}get keys(){return this._keys==null&&(this._keys=Object.keys(this._links)),this._keys.slice()}get values(){return this.keys.map(i=>this.get(i))}length(){return this.keys.length}_dereference(i){if(!i)throw"cannot deference null reference";let e=this.file._get_object_by_address(i);if(e==null)throw"reference not found in file";return e}async get(i){if(typeof i=="number")return this._dereference(i);var e=Up(i);if(e=="/")return this.file;if(e==".")return this;if(/^\//.test(e))return this.file.get(e.slice(1));if(l9(e)!="")var[t,n]=e.split(/\/(.*)/);else var t=e,n=".";if(!(t in this._links))throw t+" not found in group";var r=Up(this.name+"/"+t);let s=this._links[t];if(typeof s=="string")try{return this.get(s)}catch{return null}var a=new $c(this.file._fh,s);if(await a.ready,a.is_dataset){if(n!=".")throw r+" is a dataset, not a group";return new o9(r,a,this)}else{var o=new jc(r,this);return await o.init(a),o.get(n)}}visit(i){return this.visititems((e,t)=>i(e))}visititems(i){var e=this.name.length;/\/$/.test(this.name)||(e+=1);for(var t=this.values.slice();t;){let n=t.shift();t.length==1&&console.log(n);let r=n.name.slice(e),s=i(r,n);if(s!=null)return s;n instanceof jc&&(t=t.concat(n.values))}return null}get attrs(){return this._attrs==null&&(this._attrs=this._dataobjects.get_attributes()),this._attrs}},a9=class extends jc{constructor(i,e,t){super("/",null),this.ready=this.init(i,e,t)}async init(i,e,t){var n=new D7(i,0);await n.ready;var r=await n.get_offset_to_dataobjects(),s=new $c(i,r);if(await s.ready,this.parent=this,this.file=this,this.name="/",this._dataobjects=s,this._attrs=null,this._keys=null,this._fh=i,this.filename=e||"",this.mode="r",this.userblock_size=0,t&&t.index)this.index=t.index;else{let a;if(t&&t.indexOffset)a=t.indexOffset;else{const o=await this.attrs;if(o.hasOwnProperty("_index_offset"))a=o._index_offset;else{const l=this.indexName||"_index",c=await s.find_link(l);c&&(a=c[1])}}if(a)try{const o=new $c(i,a);await o.ready;const l=await o.get_data(),c=_7(l),h=new TextDecoder().decode(c);this.index=JSON.parse(h)}catch(o){console.error(`Error loading index by offset ${o}`)}}this.index&&this.name in this.index?this._links=this.index[this.name]:this._links=await s.get_links()}_get_object_by_address(i){return this._dataobjects.offset==i?this:this.visititems(e=>{e._dataobjects.offset==i})}},o9=class extends Array{constructor(i,e,t){super(),this.parent=t,this.file=t.file,this.name=i,this._dataobjects=e,this._attrs=null,this._astype=null}get value(){var i=this._dataobjects.get_data();return this._astype==null?this.getValue(i):i.astype(this._astype)}get shape(){return this._dataobjects.shape}get attrs(){return this._dataobjects.get_attributes()}get dtype(){return this._dataobjects.dtype}get fillvalue(){return this._dataobjects.get_fillvalue()}async to_array(){const i=await this.value,e=await this.shape;return c9(i,e)}async getValue(i){const e=await this.dtype;return(typeof e=="string"||e instanceof String)&&e.startsWith("S")?(await i).map(t=>{let n=t.indexOf("\0");return n>=0?t.substring(0,n):t}):i}};function l9(i){let e="/",t=i.lastIndexOf(e)+1,n=i.slice(0,t),r=new RegExp("^"+e+"+$"),s=new RegExp(e+"$");return n&&!r.test(n)&&(n=n.replace(s,"")),n}function Up(i){return i.replace(/\/(\/)+/g,"/")}function c9(i,e){const t=i.length,n=e.reduce((a,o)=>a*o,1);t!==n&&console.warn(`shape product: ${n} does not match length of flattened array: ${t}`);let r=i;const s=e.slice(1).reverse();for(let a of s){const o=[],{length:l}=r;let c=0;for(;c<l;)o.push(r.slice(c,c+=a));r=o}return r}/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */async function h9(i){i.url&&g9(i.url)&&(i.file=i.url,i.url=void 0);const e=i.url!==void 0;let t=i.reader?i.reader:d9(i);const n=i.fetchSize||2e3,r=i.maxSize||2e5;e&&(t=new zC({file:t,fetchSize:n,maxSize:r}));const s=new p9(t),a=await f9(i),o=i.indexOffset,l=u9(i),c=new a9(s,l,{index:a,indexOffset:o});return await c.ready,c}async function f9(i){let e;if(i.indexReader)e=i.indexReader;else{if(i.index)return i.index;i.indexURL?e=new dm({url:i.indexURL}):i.indexPath?e=new NodeLocalFile({path:i.indexPath}):i.indexFile&&(e=new um({file:i.indexFile}))}if(e){const t=await e.read(),n=new TextDecoder().decode(t);return JSON.parse(n)}else return}function d9(i){if(i.url)return new dm(i);if(i.path)return new NodeLocalFile(i);if(i.file)return new um(i.file);throw Error("One of 'url', 'path (node only)', or 'file (browser only)' must be specified")}function u9(i){if(i.url)return qp(i.url);if(i.path)return qp(i.path);if(i.file)return i.file.name}class p9{constructor(e){this.fileReader=e}async slice(e,t){return this.fileReader.read(e,t-e)}}function qp(i){const e=i.lastIndexOf("/");return e>0?i.substring(e+1):i}function g9(i){return typeof i.slice=="function"&&typeof i.arrayBuffer=="function"}class m9{constructor(e,t){this.chrom=e,this.signal_bin_size=t;let n="";this.signals={raw_RD:`his_rd_p_${this.chrom}_${this.signal_bin_size}${n}`,gc_RD:`his_rd_p_${this.chrom}_${this.signal_bin_size}_GC`,gc_partition:`his_rd_p_${this.chrom}_${this.signal_bin_size}_partition_GC_merge`,baf:`snp_likelihood_${this.chrom}_${this.signal_bin_size}_mask`,baf_i1:`snp_i1_${this.chrom}_${this.signal_bin_size}_mask`,Mosaic_segments:`his_rd_p_${this.chrom}_${this.signal_bin_size}_partition_GC_mosaic_segments_2d`,Mosaic_calls:`his_rd_p_${this.chrom}_${this.signal_bin_size}_partition_GC_mosaic_call_2d`}}}class w9{constructor(e,t=1e5){this.h5_file=e,this.bin_size=t,this.h5_obj=void 0}async fetch(){return this.h5_obj||(this.h5_obj=await h9({url:this.h5_file,fetchSize:1e6,maxSize:2e8})),this.h5_obj}async get_keys(){return(await this.fetch()).keys}async get_rd_signal(e=this.bin_size){let t=await this.fetch();this.h5_obj=t,this.pytor_keys=t.keys;let n=new b9(this.pytor_keys),r=n.get_rd_bins(),s=n.get_snp_bins();this.available_bins=[...new Set(r,s)],this.available_bins.includes(e)||(e=this.available_bins.at(-1));const a=await t.get("rd_chromosomes");await a.dtype;let o=await a.value,l=await this.rd_stat(e);var c=[],h=[],f=[],d=[],u=[],p=[];for(let b of o){let y=new m9(b,e);var m=y.signals.raw_RD;let v=await this.get_chr_signal(b,e,m,l);c=c.concat(v);var F=y.signals.gc_RD;let T=await this.get_chr_signal(b,e,F,l);h=h.concat(T);let A=y.signals.gc_partition,C=await this.get_chr_signal(b,e,A,l);f=f.concat(C);let k=await this.rd_call_combined(b,e,l,y);d=d.concat(k);let I=y.signals.baf_i1,B=await this.get_baf_signals_v2(b,e,I);u=u.concat(B[0]),p=p.concat(B[1])}this.callers=[],d.length!=0&&this.callers.push("ReadDepth"),d.length!=0&&this.callers.push("2D");var g={},w={RD_Raw:c,RD_Raw_gc_coor:h,ReadDepth:f,"2D":d,BAF1:u,BAF2:p};return g[e]=w,g}decode_segments(e){let t=4294967295,n=[],r=[];for(let s of e)s==t?(n.push(r),r=[]):r.push(s);return n}async rd_call_combined(e,t,n,r){let s=[],a,o=r.signals.Mosaic_segments;if(this.pytor_keys.includes(o)){let h=await(await this.h5_obj.get(o)).value;a=this.decode_segments(h)}let l=r.signals.Mosaic_calls;if(this.pytor_keys.includes(l)){let h=await(await this.h5_obj.get(l)).to_array();a.forEach((f,d)=>{f.forEach((u,p)=>{s.push({chr:e,start:u*t,end:(u+1)*t,value:h[0][d]/n[4]*2})})})}return s}async rd_stat(e){let t=`rd_stat_${e}_auto`,n;return this.pytor_keys.includes(t)&&(n=await(await this.h5_obj.get(t)).value),n}async get_chr_signal(e,t,n,r){let s=[];return this.pytor_keys.includes(n)&&(await(await this.h5_obj.get(n)).value).forEach((l,c)=>{s.push({chr:e,start:c*t,end:(c+1)*t,value:l/r[4]*2})}),s}async get_baf_signals(e,t,n,r=-1){let s=[],a=[];return this.pytor_keys.includes(n)&&(await(await this.h5_obj.get(n)).to_array()).forEach((c,h)=>{let f=Math.max(...c);const d=c.indexOf(f);let u=Math.max(d/200,1-d/200);s.push({chr:e,start:h*t,end:(h+1)*t,value:r*u}),u!=.5&&a.push({chr:e,start:h*t,end:(h+1)*t,value:r*(1-u)})}),[s,a]}async get_baf_signals_v2(e,t,n,r=-1){let s=[],a=[];return this.pytor_keys.includes(n)&&(await(await this.h5_obj.get(n)).to_array()).forEach((c,h)=>{isNaN(c)||(s.push({chr:e,start:h*t,end:(h+1)*t,value:r*(.5-c)}),c!=.5&&a.push({chr:e,start:h*t,end:(h+1)*t,value:r*(.5+c)}))}),[s,a]}}class b9{constructor(e){this.signals=e}get_rd_bins(){let e=[];return this.signals.forEach(n=>{let r=n.match(/^his_rd_p_(.*)_(\d+)$/);r&&e.push({chr:r[1],bin_size:r[2]})}),[...new Set(e.map(n=>Number(n.bin_size)))]}get_snp_bins(){let e=[];return this.signals.forEach(n=>{let r=n.match(/^snp_likelihood_(.*)_(\d+)_mask$/);r&&e.push({chr:r[1],bin_size:r[2]})}),[...new Set(e.map(n=>Number(n.bin_size)))]}}class F9{constructor(e){this.allBins=e}getValues(){return Object.values(this.allBins).reduce((t,n)=>t.concat(n.filter(r=>r.binScore>0).map(r=>r.binScore)),[])}getMean(e){return e.reduce(function(t,n){return t+n})/e.length}fit_data(){let e=this.getValues();return Jm(e)}histogram(e,t){const n=t[1]-t[0],r=[];e.forEach((a,o)=>{t.forEach((l,c)=>{if(r[l]||(r[l]={count:0}),l<=a&&a<l+n)return r[l].count++,!1})});const s=[];return r.forEach((a,o)=>{s.push(a.count)}),s}}function y9(i,e,t){return Array(Math.ceil((e-i)/t)).fill(i).map((r,s)=>r+s*t)}function A9(i){if(i.length<4)return i;let e,t,n,r,s,a;return e=i.slice().sort((o,l)=>o-l),e.length/4%1===0?(t=1/2*(e[e.length/4]+e[e.length/4+1]),n=1/2*(e[e.length*(3/4)]+e[e.length*(3/4)+1])):(t=e[Math.floor(e.length/4+1)],n=e[Math.ceil(e.length*(3/4)+1)]),r=n-t,s=n+r*1.5,a=t-r*1.5,e.filter(o=>o>=a&&o<=s)}function Jm(i){let e=A9(i);const t=e.length,n=e.reduce((s,a)=>s+a)/t,r=Math.sqrt(e.map(s=>Math.pow(s-n,2)).reduce((s,a)=>s+a)/t);return[n,r]}function v9(i,e,t){if(typeof t>"u"&&(t=Math.max(Math.round(e-i)+1,1)),t<2)return t===1?[i]:[];var n=Array(t);t--;for(let r=t;r>=0;r--)n[r]=(r*e+(t-r)*i)/t;return n}var yn={range_function:y9,getDistParams:Jm,linspace:v9,GetFit:F9};function jh(i,e){return isNaN(i)||isNaN(e)||e<=0?NaN:i===0?.5:1/2+1/2*(Vp(1/2*e,1/2,1)-Vp(1/2*e,1/2,e/(e+i*i)))*Math.sign(i)}function Vp(i,e,t){if(t==0)return 0;if(t==1)return 1;{let n=jl(i+e)-jl(i)-jl(e)+i*Math.log(t)+e*Math.log(1-t);return t<(i+1)/(i+e+2)?Math.exp(n)*Qp(i,e,t)/i:1-Math.exp(n)*Qp(e,i,1-t)/e}}function Qp(i,e,t,n=1e3){let r=3e-7,s=1,a=1,o=1,l=i+e,c=i+1,h=i-1,f=1-l*t/c;for(let d=0;d<=n;d++){let u=parseFloat(d+1),p=u+u,m=u*(e-u)*t/((h+p)*(i+p)),F=s+m*a,g=f+m*o;m=-(i+u)*(l+u)*t/((c+p)*(i+p));let w=F+m*s,b=g+m*f,y=s;if(a=F/b,o=g/b,s=w/b,f=1,Math.abs(s-y)<r*Math.abs(s))return s}}function e1(i){return i==0||i==1?1:i*e1(i-1)}function t1(i){let e;var t=[75122.633153,80916.6278952,36308.2951477,8687.24529705,1168.92649479,83.8676043424,2.50662827511],n=0,r=1;if(i==0)e=1e99;else if(i%1==0)e=e1(i-1);else{for(let s=0;s<t.length;s++)n=n+t[s]*Math.pow(i,s),r=r*(i+s);e=n*Math.pow(i+5.5,i+.5)*Math.exp(-(i+5.5))/r}return e}function jl(i){return Math.log(t1(i))}function _9(i,e,t,n){t==0&&(t=1);var r=(i-e)/t*Math.sqrt(n),s=1-jh(Math.abs(r),n-1);return s}function C9(i,e,t,n,r,s){e==0&&(e=1),r==0&&(r=1);var a=(i-n)/Math.sqrt(e**2/t+r**2/s),o=(e**2/t+r**2/s)**2*(t-1)*(s-1)/(e**4*(s-1)/t**2+r**4*(t-1)/s**2),l=1-jh(Math.abs(a),parseInt(o+.5));return l}var Wh={TdistributionCDF:jh,gamma:t1,t_test_1_sample:_9,t_test_2_samples:C9};class x9{constructor(e,t){this.wigFeatures=e,this.binSize=t}get_fit(){var e=new yn.GetFit(this.wigFeatures),[t,n]=e.fit_data();return{globalMean:t,globalStd:n}}async call_2d(e=null,t=null,n="both",r=.1,s=0,a=10,o=0){let l=this.get_fit();this.globalMean=l.globalMean,this.globalStd=l.globalStd;let c=e??.05*this.binSize/3e9,h=t??parseInt(this.binSize/1e4),f=[],d=[],u=[],p=[],m=[],F=[];for(const[A,C]of Object.entries(this.wigFeatures)){let k=[],I=[],B=[];C.forEach((U,O)=>{U.hets_count>4&&U.dp_count>h&&(k.push([O]),I.push(U.binScore),B.push(U.likelihood_score),delete U.likelihood_score)});let M=[];for(let U=1;U<I.length;U++)M.push(Math.abs(I[U]-I[U-1]));let N=[0];for(let U=1;U<M.length;U++)N.push(Math.min(M[U-1],M[U]));N.push(0);let x=I.map((U,O)=>Math.sqrt(Math.sqrt(U)**2+this.globalStd**2+Math.pow(N[O]/2,2))),D=[];for(let U=0;U<k.length-1;U++){let O=0;try{O=ts(B[U],B[U+1])}catch{console.log("Overlap failed: ",U,B[U],k[U+1],B[U+1])}let Q=es(I[U],x[U],I[U+1],x[U+1]);D.push(Q*O)}for(;D.length>0;){D=D.filter(ne=>typeof ne=="number");let U=Gp(D);if(isNaN(U)&&console.log("NaN value",D),U<c)break;let O=D.indexOf(U),Q=jp(I[O],x[O],I[O+1],x[O+1]),K,G;try{K=B[O].map((ne,H)=>ne*B[O+1][H]),G=K.reduce((ne,H)=>ne+H)}catch{console.log(B),console.log("max_overlap:",U,O,D.length),console.log("likelihood: ",O,B[O],B[O+1]),console.log("nlh: ",G)}if(I[O]=Q.nl,x[O]=Q.ne,B[O]=K.map(function(ne){return ne/G}),k[O].push(...k[O+1]),I.splice(O+1,1),x.splice(O+1,1),k.splice(O+1,1),B.splice(O+1,1),D.splice(O,1),O<D.length){let H=es(I[O],x[O],I[O+1],x[O+1])*ts(B[O],B[O+1]);D[O]=H}if(O>0){let ne=es(I[O-1],x[O-1],I[O],x[O])*ts(B[O-1],B[O]);D[O-1]=ne}}let S=-1;for(;;){D=[];for(let K=0;K<I.length;K++)for(let G=K;G<I.length;G++)k[G][0]-k[K].at(-1)<r*(k[K].length+k[G].length)&&D.push(es(I[K],x[K],I[G],x[G])*ts(B[K],B[G]));if(D.length==0)break;let U=Gp(D);if(U<c)break;let O=0,Q=1;for(;O<k.length-1;){let K=es(I[O],x[O],I[Q],x[Q])*ts(B[O],B[Q]);if(k[Q][0]-k[O].at(-1)<r*(k[O].length+k[Q].length)&&K==U){let G=jp(I[O],x[O],I[O+1],x[O+1]);I[O]=G.nl,x[O]=G.ne;let ne=B[O].map(($,X)=>$*B[O+1][X]),H=ne.reduce(($,X)=>$+X);B[O]=ne.map(function($){return $/H}),k[O].push(...k[O+1]),k[O]=k[O].sort(($,X)=>$-X),I.splice(Q,1),x.splice(Q,1),k.splice(Q,1),B.splice(Q,1),Q>=k.length&&(O+=1,Q=O+1)}else Q+=1,Q>=k.length&&(O+=1,Q=O+1)}if(S==k.length)break;S=k.length}k.forEach((U,O)=>{let Q=k9(B[O]);U.length>1&&(U.forEach((K,G)=>{d.push(C[K]),Q.mean<=s&&f.push(C[K]),C[K].segment_score=I[O]}),u.push(I[O]),p.push(x[O]),m.push(B[O]))})}let g=parseInt(1e3*(1-o));g==0&&(g=1);let w=yn.linspace(o,1,g),b={},y={};for(let A=10;A>-1;A--)for(let C=0;C<A/2+1;C++){let k=A-C,I=w.map((x,D)=>1-x+x*A/2),B=A/2,M,N;A>0?(M=.5-C/(C+k),N=w.map((x,D)=>.5-(1-x+x*C)/(2-2*x+(C+k)*x))):(M=0,N=w.map((x,D)=>0*x));for(let x=0;x<u.length;x++){let D=$p(B*this.globalMean,1,u[x],p[x])*Wp(m[x],.5+M);x in y?y[x].push([A,C,k,D,1]):y[x]=[A,C,k,D,1];let S=0,U=0,O=0;I.forEach((Q,K)=>{if(!isNaN(N[K])){let G=$p(Q*this.globalMean,1,u[x],p[x])*Wp(m[x],.5+N[K]);S+=G,G>U&&(U=G,O=w[K])}}),x in b?b[x].push([A,C,k,S/w.length,O]):b[x]=[A,C,k,S/w.length,O]}for(let x=0;x<u.length;x++)if(n=="germline")b[x].sort((D,S)=>D[3]-S[3]);else if(b[x].sort((D,S)=>D[3]-S[3]),n=="both"&&(y[x].sort((D,S)=>D[3]-S[3]),y[x][0][3]>b[x][0][3])){let D=b[x].filter(S=>S[0]!=y[x][0][0]&&S[1]<=y[x][0][1]);b[x]=[y[x][0]].push(...D)}for(let x=0;x<u.length;x++)b[x][0][0]>2,b[x][0][0]<2,u[x]/this.globalMean,Wh.t_test_1_sample(this.globalMean,u[x],p[x],F[x])}var v=this.formatDataStructure(this.wigFeatures,"binScore",this.globalMean),T=this.formatDataStructure(this.wigFeatures,"segment_score",this.globalMean);return{binScore:v,segment_score:T}}formatDataStructure(e,t,n=1){const r=[];for(const[s,a]of Object.entries(e))a.forEach(o=>{var l={...o};n!=1&&(l.value=o[t]/n*2),r.push(l)});return r}formatDataStructure_BAF(e,t=-1){const n=[],r=[];for(const[s,a]of Object.entries(this.wigFeatures))a.forEach(o=>{var l={...o},c={...o};let h=o[e];h!=.5&&(c.value=t*(1-h),r.push(c)),l.value=t*h,n.push(l)});return[n,r]}}function Gp(i){return i.reduce(function(e,t){return e>t?e:t})}function $p(i,e,t,n){return e*Math.exp(-1*(i-t)**2/(2*n**2))/Math.sqrt(2*Math.PI)/n}function es(i,e,t,n){return Math.exp(-1*(i-t)**2/(e**2+n**2))}function ts(i,e){let t;try{t=i.reduce((n,r,s)=>n+Math.min(r,e[s]))}catch{return console.log("Failed to find likelihood overlap: ",i,e),0}return t}function jp(i,e,t,n){return e==0&&n==0?{nl:.5*(i+t),ne:0}:{nl:(i*n*n+t*e*e)/(e*e+n*n),ne:Math.sqrt(e*e*n*n/(e*e+n*n))}}function Wp(i,e){let t=parseInt(e*(i.length-1)),n=e*(i.length-1)-t;return t<i.length-1?i[t]*(1-n)+i[t+1]*n:i[t]}function k9(i){const e=i.length,t=Math.max(...i);let n=i.indexOf(t);n>Math.floor(e/2)&&(n=e-1-n);const r=(e/2-n)/(e+1),s=Math.floor((e/2+n)/2),a=e-1-s;let o=i.slice(s,a+1).reduce((l,c)=>l+c,0)/i.reduce((l,c)=>l+c,0);return n===Math.floor(e/2)&&(o=1),{mean:r,p:o}}var I9={CombinedCaller:x9};const Sa=2871e6;function Kp(i){for(var e=1,t=1,n=i*1,r=1;r<50;r++)e*=r,t*=-1,n+=t*Math.pow(i,2*r+1)/(e*(2*r+1));return 2*n/Math.sqrt(3.14159265358979)}function is(i,e,t,n,r){var s=new Yt(t.slice(n,r));s.std==0&&(e>0?s.std=e*s.mean/i:s.std=1);var a=Wc(i,s.mean,s.std,r-n)/(r-n);return a}function E9(i,e,t,n,r){var s=new Yt(t.slice(n,r));if(s.mean<i){var a=(s.max-s.mean)/(e*Math.sqrt(2));return Math.pow(.5*(1+Kp(a)),r-n)}var a=(s.min-s.mean)/(e*Math.sqrt(2));return Math.pow(.5*(1-Kp(a)),r-n)}function Yp(i,e,t,n,r,s,a=1e3){for(var o=is(i,e,t,n,r),l=0,c=!1;o>s&!c&l<a;){c=!0,l+=1;var[h,f,d,u]=[1e10,1e10,1e10,1e10];if(n>0&&(h=is(i,e,t,n-1,r)),r-n>2)var f=is(i,e,t,n+1,r),d=is(i,e,t,n,r-1);if(r<t.length)var u=is(i,e,t,n,r+1);Math.min[u]<o&&(c=!1,h==Math.min[u]&&(n-=1,o=h),elif(f==Math.min[u]),n+=1,o=f,elif(d==Math.min[u]),r-=1,o=d,elif(u==Math.min[u]),r+=1,o=u)}return o<=s?r:0}class Yt{constructor(e){this.data=e,this.mean=e.reduce((t,n)=>t+n)/e.length,this.std=Math.sqrt(e.reduce((t,n)=>(n-this.mean)**2)/e.length)}}function Wc(i,e,t,n){t==0&&(t=1);var r=(i-e)/t*Math.sqrt(n),s=1-Wh.TdistributionCDF(Math.abs(r),n-1);return s}function Na(i,e,t,n,r,s){e==0&&(e=1),r==0&&(r=1);var a=(i-n)/Math.sqrt(e**2/t+r**2/s),o=(e**2/t+r**2/s)**2*(t-1)*(s-1)/(e**4*(s-1)/t**2+r**4*(t-1)/s**2),l=1-Wh.TdistributionCDF(Math.abs(a),parseInt(o+.5));return l}class S9{constructor(e,t,n){this.rd=e,this.mean=t,this.std=n,this.bin_bands=[2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128]}get_rd_signal_bandwidth(e){var t=[];return e.forEach((n,r)=>{var s=0;n>this.mean/4?s=this.mean/(this.std**2*n):s=4/this.std**2,t.push(s)}),t}meanShiftCaller(e,t=3){var n={};return Object.entries(this.rd).forEach(([r,s])=>{var a=new Array(s.length).fill(!1),o=new Array(s.length);for(let l=0;l<s.length;l++)a[l]||(o[l]=s[l]);this.bin_bands.forEach((l,c)=>{var h=a.map(($,X)=>!$),f=[];Object.entries(s).forEach(([$,X])=>{f.push(X.binScore)});var d=[0],u=0;for(let $=0;$<a.length;$++)a[$]?u>0&&(d.push(d[d.length-1]+u-1),u=0):u+=1;d.shift();for(let $=0;$<t;$++){var p=this.get_rd_signal_bandwidth(f),m=new Array(f.length).fill(0);for(let ee=0;ee<f.length;ee++)for(let te=ee-3*l;te<=ee+3*l+1;te++)if(!(te<0||te>=f.length)&&!(Math.abs(ee-te)>=f.length)){var F=(te-ee)*Math.exp(-.5*(te-ee)**2/l**2)*Math.exp(-.5*(f[ee]-f[te])**2*p[ee]);m[ee]+=F}for(var T=new Array,g=0;g<m.length-1;g++)m[g]<0&m[g+1]>=0&&T.push(g);T.push(m.length-1),T=T.concat(d).sort((ee,te)=>ee-te),T=Array.from(new Set(T));for(var w=0,g=0;g<T.length;g++){var b=f.slice(w,T[g]+1),y=b.reduce((te,be)=>te+be)/b.length;f.fill(y,w,T[g]+1),w=T[g]+1}}for(var g=0,v=0;g<o.length;g++)h[g]&&(o[g]=f[v],v++);for(var T=new Array,g=0;g<o.length-1;g++){var A=Math.abs(o[g+1]-o[g]);A>.01&&T.push(g+1)}T.unshift(0),T.push(o.length),a=new Array(this.rd.length).fill(!1);for(var g=1;g<T.length;g++){var C=[T[g-1],T[g]],k=[T[g-1],T[g-1]];if(g>1)k[0]=T[g-2];else continue;var I=[T[g],T[g]];if(g<T.length-1)I[1]=T[g+1];else continue;var B=C[1]-C[0],M=k[1]-k[0],N=I[1]-I[0];if(B<=1)continue;var x=new Yt(o.slice(C[0],C[1]));if(N<=15||M<=15||B<=15){var D=1.8*Math.sqrt(o[k[0]]/this.mean)*this.std;if(Math.abs(o[k[0]]-o[C[0]])<D||(D=1.8*Math.sqrt(o[I[0]]/this.mean)*this.std,Math.abs(o[I[0]]-o[C[0]])<D))continue}else{var S=o.slice(k[0],k[1]),U=new Yt(S),O=o.slice(I[0],I[1]),Q=new Yt(O),K=Na(x.mean,x.std,x.data.length,U.mean,U.std,U.data.length);if(K>.01/Sa*bin_size*(B+M))continue;var G=Na(x.mean,x.std,x.data.length,Q.mean,Q.std,Q.data.length);if(G>.01/Sa*bin_size*(B+N))continue}var ne=Wc(this.mean,x.mean,x.std,x.data.length);if(ne>.05)continue;let X=f.slice(C[0],C[1]);var H=new Yt(X);a.fill(!0,C[0],C[1]),o.fill(H.mean,C[0],C[1])}}),n[r]=o}),n}call_mean_shift(e=3){for(var n=new Array(this.rd.length).fill(!1),r=new Array(this.rd.length),s=0;s<this.rd.length;s++)n[s]||(r[s]=this.rd[s]);return this.bin_bands.forEach((a,o)=>{var l=n.map((H,$)=>!H),c=[];l.forEach((H,$)=>{H&&c.push(this.rd[$])});for(var h=[0],f=0,d=0;d<n.length;d++)n[d]?f>0&&(h.push(h[h.length-1]+f-1),f=0):f+=1;h.shift();for(var u=0;u<e;u++){for(var p=this.get_rd_signal_bandwidth(c),m=new Array(c.length).fill(0),d=0;d<c.length;d++)for(var F=d-3*a;F<=d+3*a+1;F++)if(!(F<0||F>=c.length)&&!(Math.abs(d-F)>=c.length)){var g=(F-d)*Math.exp(-.5*(F-d)**2/a**2)*Math.exp(-.5*(c[d]-c[F])**2*p[d]);m[d]+=g}for(var v=new Array,d=0;d<m.length-1;d++)m[d]<0&m[d+1]>=0&&v.push(d);v.push(m.length-1),v=v.concat(h).sort(($,X)=>$-X),v=Array.from(new Set(v));for(var w=0,d=0;d<v.length;d++){var b=c.slice(w,v[d]+1),y=b.reduce((X,ee)=>X+ee)/b.length;c.fill(y,w,v[d]+1),w=v[d]+1}}for(var d=0,F=0;d<r.length;d++)l[d]&&(r[d]=c[F],F++);for(var v=new Array,d=0;d<r.length-1;d++){var T=Math.abs(r[d+1]-r[d]);T>.01&&v.push(d+1)}v.unshift(0),v.push(r.length),n=new Array(this.rd.length).fill(!1);for(var d=1;d<v.length;d++){var A=[v[d-1],v[d]],C=[v[d-1],v[d-1]];if(d>1)C[0]=v[d-2];else continue;var k=[v[d],v[d]];if(d<v.length-1)k[1]=v[d+1];else continue;var I=A[1]-A[0],B=C[1]-C[0],M=k[1]-k[0];if(!(I<=1)){var N=new Yt(r.slice(A[0],A[1]));if(M<=15||B<=15||I<=15){var x=1.8*Math.sqrt(r[C[0]]/this.mean)*this.std;if(Math.abs(r[C[0]]-r[A[0]])<x||(x=1.8*Math.sqrt(r[k[0]]/this.mean)*this.std,Math.abs(r[k[0]]-r[A[0]])<x))continue}else{var D=r.slice(C[0],C[1]),S=new Yt(D),U=r.slice(k[0],k[1]),O=new Yt(U),Q=Na(N.mean,N.std,N.data.length,S.mean,S.std,S.data.length);if(Q>.01/Sa*1e3*(I+B))continue;var K=Na(N.mean,N.std,N.data.length,O.mean,O.std,O.data.length);if(K>.01/Sa*1e3*(I+M))continue}var G=Wc(this.mean,N.mean,N.std,N.data.length);if(!(G>.05)){var ne=new Yt(this.rd.slice(A[0],A[1]));n.fill(!0,A[0],A[1]),r.fill(ne.mean,A[0],A[1])}}}}),r}cnv_calling(e=1e5){var t=.25*this.mean,n=this.mean-t,r=this.mean+t,s=2971e6,a=this.meanShiftCaller(e),o={},l=[];return Object.entries(a).forEach(([c,h])=>{for(var f=!1;!f;){f=!0;var d=new Array(1).fill(0);for(let x=0;x<h.length-1;x++){var u=Math.abs(h[x+1]-h[x]);u>.01&&d.push(x+1)}d.push(h.length);for(let x=0;x<d.length-2;x++){var p=Math.abs(h[d[x]]-h[d[x+1]]);if(p<t){var m=p+1,F=p+1;if(x>0&&(m=Math.abs(h[d[x]]-h[d[x-1]])),x<d.length-3&&(F=Math.abs(a[d[x+1]]-h[d[x+2]])),p<m&&p<F){f=!1;var g=new Yt(h.slice(d[x],d[x+2]));h.fill(g.mean,d[x],d[x+2]),d.splice(x+1,x+1)}}}}var w=[];Object.entries(this.rd[c]).forEach(([x,D])=>{w.push(D.binScore)});for(var b=new Array(h.length).fill(""),y=0,v=.05*e/s;y<h.length;){for(var T=y,A=y;y<h.length&h[y]<n;)y+=1;var C=y;if(C>A+1){var k=Yp(this.mean,this.std,w,A,C,v);if(k){var A,C=k;b.fill("D",A,C)}}for(A=y;y<h.length&h[y]>r;)y+=1;C=y,C>A+1&&(k=Yp(this.mean,this.std,w,A,C,v),k&&(C=k,b.fill("A",A,C))),y==T&&(y+=1)}for(y=0;y<h.length;){for(;y<h.length&b[y]!="";)y+=1;for(A=y;y<h.length&h[y]<n;)y+=1;C=y,C>A+1&&(E9(this.mean,this.std,w,A,C)<.05/s&&b.fill(["d"]*(C-A),A,C),y-=1),y+=1}y=0;var I;y<h.length&&(I=b[y]),A=0;for(var B=[...w];y<h.length;){for(;b[y]==I&&(y+=1,!(y>=b.length)););if(y>A){var M=new Yt(B.slice(A,y));B.fill(M.mean,A,y)}y<h.length&&(I=b[y]),A=y}for(o[c]=B,y=0;y<h.length;){if(I=b[y],I==""){y+=1;continue}for(A=y;y<h.length&I==b[y];)y+=1;var N=new Yt(B.slice(A,y));let x=N.mean/this.mean,D;I=="D"?D="deletion":D="duplication";let S={chr:c,start:e*A+1,end:e*y,size:e*(y-A+1),value:x*2,event_type:D};l.push(S)}}),[o,l]}}var N9={Partition:S9};class B9{constructor(e,t){this.allVariants=e,this.rowBinSize=1e4,this.binSize=t,this.binFactor=parseInt(t/this.rowBinSize)}async read_rd_baf(e="ReadDepth"){var t={};for(let o=this.allVariants.length-1;o>=0;o--){var n;let l=this.allVariants[o];this.allVariants.splice(o,1);let c=l.chr;n=Math.max(Math.floor(l.start/this.rowBinSize),0),t[c]||(t[c]=[]),t[c][n]||(t[c][n]={chr:c,start:n*this.rowBinSize,end:(n+1)*this.rowBinSize,dp_sum_score:0,dp_count:0,hets_count:0,hets:[]});const h=Object.values(l.calls);if(h.length!==1)throw Error(`Unexpected number of genotypes: ${h.length}.  CNVPytor expects 1 and only 1 genotype`);const f=h[0],d=f.info.DP;d&&(t[c][n].dp_sum_score+=Number.parseInt(d),t[c][n].dp_count++);let u=f.info.AD.split(","),p=f.genotype;if(p[0]==0&&p[1]==1||p[0]==1&&p[1]==0){t[c][n].hets_count++;let m=parseInt(u[0]),F=parseInt(u[1]);t[c][n].hets.push({ref:m,alt:F})}}this.chromosomes=Object.keys(t);var r=this.adjust_bin_size(t),s;if(e=="ReadDepth"){s=new T9(r,this.binSize).ReadDepth_caller();var a=this.formatDataStructure_BAF(r,"max_likelihood")}else if(e=="2D"){let o=new I9.CombinedCaller(r,this.binSize),l=await o.call_2d();s=[l.binScore,[],l.segment_score];var a=o.formatDataStructure_BAF("max_likelihood",-1)}return[s,a]}formatDataStructure(e,t,n=1){const r=[];for(const[a,o]of Object.entries(e))for(let l of o){var s={...l};n!=1&&(s.value=l[t]/n*2),r.push(s)}return r}format_BAF_likelihood(e){const t=[];for(const[r,s]of Object.entries(e))for(let a of s){var n={...a};a.value!=.5&&(n.value=1-a.value,t.push(n))}return t}get_max_min_score(e){if(e.likelihood_score.length>0){const t=Math.max(...e.likelihood_score),n=e.likelihood_score.indexOf(t);e.value=Math.max(n/100,1-n/100),e.min_score=Math.min(n/100,1-n/100)}else e.score=0;return e}async getAllbins(){const e=await this.computeDepthFeatures();return new yn.GetFit(e).fit_data(),e}formatDataStructure_BAF(e,t,n=-1){const r=[],s=[];for(const[l,c]of Object.entries(e))for(let h of c){var a={...h},o={...h};let f=h[t];f!=.5&&(o.value=n*(1-f),s.push(o)),a.value=n*f,r.push(a)}return[r,s]}adjust_bin_size(e){var t={};for(let s of this.chromosomes){t[s]||(t[s]=[]);for(let a=0;a<e[s].length/this.binFactor;a++){const o=a;t[s][a]||(t[s][a]={chr:s,start:o*this.binSize,end:(o+1)*this.binSize,dp_count:0,hets_count:0,binScore:0,likelihood_score:[],dp_sum_score:0});for(var n=a*this.binFactor;n<this.binFactor*a+this.binFactor;n++)if(e[s][n]&&(t[s][a].dp_sum_score+=e[s][n].dp_sum_score,t[s][a].dp_count+=e[s][n].dp_count,t[s][a].hets_count+=e[s][n].hets_count,e[s][n].hets.length!=0))for(let c of e[s][n].hets)if(t[s][a].likelihood_score.length==0)t[s][a].likelihood_score=yn.linspace(0,1,100).map((h,f)=>Zp(c.ref,c.alt,h));else{var r=0;t[s][a].likelihood_score=yn.linspace(0,1,100).map((h,f)=>{var d=t[s][a].likelihood_score[f]*Zp(c.ref,c.alt,h);return r+=d,d}),t[s][a].likelihood_score=yn.linspace(0,1,100).map((h,f)=>t[s][a].likelihood_score[f]/r)}t[s][a].binScore=parseInt(t[s][a].dp_sum_score/t[s][a].dp_count)*100;const l=this.get_max_min_score(t[s][a]);t[s][a].max_likelihood=l.value}}return t}}function Zp(i,e,t,n=!0){return Math.pow(t,i)*Math.pow(1-t,e)+Math.pow(t,e)*Math.pow(1-t,i)}class T9{constructor(e,t){this.wigFeatures=e,this.binSize=t}ReadDepth_caller(){var e=new yn.GetFit(this.wigFeatures),[t,n]=e.fit_data(),r=new N9.Partition(this.wigFeatures,t,n),s=r.meanShiftCaller(this.binSize),a=r.cnv_calling();Object.entries(this.wigFeatures).forEach(([h,f])=>{f.forEach((d,u)=>{d.partition_level=parseInt(s[h][u]),d.partition_call=parseInt(a[0][h][u])})});var o=this.formatDataStructure("binScore",t),l=this.formatDataStructure("partition_level",t),c=this.formatDataStructure("partition_call",t);return[o,l,c,a[1]]}formatDataStructure(e,t=1){const n=[];for(const[s,a]of Object.entries(this.wigFeatures))for(let o of a){var r={...o};t!=1&&(r.value=o[e]/t*2),n.push(r)}return n}}const _o=class _o extends mt{constructor(e,t){super(e,t)}init(e){this.featureType="numeric",this.type="cnvpytor",e.max||(this.defaultScale=!0,this.autoscale=!1),e.height||(e.height=_o.DEFAULT_TRACK_HEIGHT),this.type="cnvpytor",this.graphType=e.graphType||"points",this.bin_size=e.bin_size||1e5,this.signal_name=e.signal_name||"rd_snp",this.cnv_caller=e.cnv_caller||"2D",this.colors=e.colors||["gray","black","green","blue"],super.init(e)}get supportsWholeGenome(){return!0}get_signals(){let e=[];return this.signal_name=="rd_snp"?e=["RD_Raw","RD_Raw_gc_coor",this.cnv_caller,"BAF1","BAF2"]:this.signal_name=="rd"?e=["RD_Raw","RD_Raw_gc_coor",this.cnv_caller]:this.signal_name=="snp"?e=["BAF1","BAF2"]:this.signal_name=="cnh"&&(e=[this.cnv_caller]),e}get_signal_colors(){return[{singal_name:"RD_Raw",color:this.colors[0]},{singal_name:"RD_Raw_gc_coor",color:this.colors[1]},{singal_name:"ReadDepth",color:this.colors[2]},{singal_name:"2D",color:this.colors[2]},{singal_name:"BAF1",color:this.colors[3]},{singal_name:"BAF2",color:this.colors[3]}]}async postInit(){if(this.config.format=="vcf"){let t;this.featureSource?t=Object.values(this.featureSource.getAllFeatures()).flat():(this.featureSource=this.featureSource||Wt(this.config,this.browser.genome),this.header=await this.getHeader(),t=this.featureSource.reader.features);const n=new B9(t,this.bin_size);let r,s;this.wigFeatures_obj={},this.wigFeatures_obj[this.bin_size]={};let a;this.cnv_caller=="2D"?(a=await n.read_rd_baf("2D"),r=a[0],s=a[1],this.wigFeatures_obj[this.bin_size]["2D"]=r[2],this.available_callers=["2D"]):(a=await n.read_rd_baf(),r=a[0],s=a[1],this.wigFeatures_obj[this.bin_size].ReadDepth=r[2],this.available_callers=["ReadDepth"]),this.wigFeatures_obj[this.bin_size].RD_Raw=r[0],this.wigFeatures_obj[this.bin_size].RD_Raw_gc_coor=r[1],this.wigFeatures_obj[this.bin_size].BAF1=s[0],this.wigFeatures_obj[this.bin_size].BAF2=s[1],this.available_bins=[this.bin_size],this.set_available_callers()}else this.cnvpytor_obj=new w9(this.config.url,this.bin_size),this.wigFeatures_obj=await this.cnvpytor_obj.get_rd_signal(this.bin_size),this.available_bins=this.cnvpytor_obj.available_bins,this.available_callers=this.cnvpytor_obj.callers,this.set_available_callers();this.tracks=[];const e=[];this.signals=this.get_signals(),this.signal_colors=this.get_signal_colors();for(let t in this.wigFeatures_obj)for(const[n,r]of Object.entries(this.wigFeatures_obj[t]))if(this.signals.includes(n)){let s={};s.type="wig",s.features=r,s.name=n,s.color=this.signal_colors.filter(o=>o.singal_name===n).map(o=>o.color);const a=await this.browser.createTrack(s);a?(a.isMergedTrack=!0,a.autoscale=!1,this.tracks.push(a)):console.warn("Could not create track "+s),typeof a.postInit=="function"&&e.push(a.postInit())}this.flipAxis=this.config.flipAxis?this.config.flipAxis:!1,this.logScale=this.config.logScale?this.config.logScale:!1,this.autoscale=this.config.autoscale,this.autoscale||(this.dataRange={min:this.config.min||0,max:this.config.max});for(let t of this.tracks)t.autoscale=!1,t.dataRange=this.dataRange;return Promise.all(e)}set_available_callers(){this.available_callers.includes(this.cnv_caller)||(this.available_callers.length>0?this.cnv_caller=this.available_callers[0]:this.cnv_caller=null)}async getHeader(){if(!this.header){if(typeof this.featureSource.getHeader=="function"){const e=await this.featureSource.getHeader();e&&(this.callSets=e.callSets||[]),this.header=e}this.sampleKeys=this.callSets?this.callSets.map(e=>e.sample):[],this.sampleNames=this.sampleKeys}return this.header}get height(){return this._height}set height(e){if(this._height=e,this.tracks)for(let t of this.tracks)t.height=e,t.config.height=e}menuItemList(){let e=[];this.flipAxis!==void 0&&e.push({label:"Flip y-axis",click:function(){this.flipAxis=!this.flipAxis,this.trackView.repaintViews()}}),e=e.concat(this.numericDataMenuItems()),e.push("<hr/>"),e.push("Bin Sizes");for(let n of this.available_bins){const r=ht(n,n===this.bin_size);e.push({object:ve(r),click:async function(){this.bin_size=n,this.trackView.startSpinner(),await this.recreate_tracks(n),this.clearCachedFeatures(),this.trackView.updateViews(),this.trackView.repaintViews()}})}e.push("<hr/>"),e.push("Signal Type");let t={rd_snp:"RD and BAF Likelihood",rd:"RD Signal",snp:"BAF Likelihood"};for(let n in t){const r=ht(t[n],n===this.signal_name);e.push({object:ve(r),click:async function(){this.signal_name=n,await this.recreate_tracks(this.bin_size),this.clearCachedFeatures(),this.trackView.updateViews(),this.trackView.repaintViews()}})}e.push("<hr/>"),e.push("CNV caller");for(let n of this.available_callers){const r=ht(n,n===this.cnv_caller);e.push({object:ve(r),click:async function(){this.cnv_caller=n,this.trackView.startSpinner(),await this.recreate_tracks(this.bin_size),this.clearCachedFeatures(),this.trackView.updateViews(),this.trackView.repaintViews()}})}if(this.variantState){e.push("<hr/>");for(let n of this.available_callers)e.push({label:"Convert to variant track",click:()=>{this.convertToVariant()}})}return e}async recreate_tracks(e){this.tracks=[];const t=[];e in this.wigFeatures_obj||(this.wigFeatures_obj={...this.wigFeatures_obj,...await this.cnvpytor_obj.get_rd_signal(e)}),this.signals=this.get_signals(),this.signal_colors=this.get_signal_colors();for(const[n,r]of Object.entries(this.wigFeatures_obj[e]))if(this.signals.includes(n)){let s={};s.type="wig",s.features=r,s.name=n,s.color=this.signal_colors.filter(o=>o.singal_name===n).map(o=>o.color);const a=await this.browser.createTrack(s);a?(a.isMergedTrack=!0,a.autoscale=!1,this.tracks.push(a)):console.warn("Could not create track "+s),typeof a.postInit=="function"&&t.push(a.postInit())}this.flipAxis=this.config.flipAxis?this.config.flipAxis:!1,this.logScale=this.config.logScale?this.config.logScale:!1,this.autoscale=this.config.autoscale,this.autoscale||(this.dataRange={min:this.config.min||0,max:this.config.max});for(let n of this.tracks)n.autoscale=!1,n.dataRange=this.dataRange;return Promise.all(t)}async getFeatures(e,t,n,r){if(this.tracks){const s=this.tracks.map(a=>a.getFeatures(e,t,n,r));return Promise.all(s)}else return}getScaleFactor(e,t,n,r){return r?n/(Math.log10(t+1)-(e<=0?0:Math.log10(e+1))):n/(t-e)}computeYPixelValue(e,t){return(this.flipAxis?e-this.dataRange.min:this.dataRange.max-e)*t}computeYPixelValueInLogScale(e,t){let n=this.dataRange.max,r=this.dataRange.min;return n<=0?0:(r<=-1&&(r=0),r=r<=0?0:Math.log10(r+1),n=Math.log10(n+1),e=Math.log10(e+1),(this.flipAxis?e-r:n-e)*t)}draw(e){const t=e.features;if(!t)return;if(this.defaultScale&&(this.signal_name=="rd_snp"?this.dataRange={min:this.config.min||this.dataRange.min||-1,max:this.config.max||this.dataRange.max||5}:this.signal_name=="rd"?this.dataRange={min:this.config.min||this.dataRange.min||0,max:this.config.max||this.dataRange.max||5}:this.signal_name=="snp"&&(this.dataRange={min:this.config.min||this.dataRange.min||-1,max:this.config.max||this.dataRange.max||0})),this.autoscale&&(this.dataRange=M9(e.referenceFrame.chr,t)),this.tracks)for(let o=0,l=this.tracks.length;o<l;o++){const c=Object.assign({},e);c.features=t[o],this.tracks[o].dataRange=this.dataRange,this.tracks[o].flipAxis=this.flipAxis,this.tracks[o].logScale=this.logScale,this.graphType&&(this.tracks[o].graphType=this.graphType),this.tracks[o].draw(c)}const n=this.getScaleFactor(this.dataRange.min,this.dataRange.max,e.pixelHeight,this.logScale),r=o=>this.logScale?this.computeYPixelValueInLogScale(o,n):this.computeYPixelValue(o,n);if(this.config.hasOwnProperty("guideLines")){for(let o of this.config.guideLines)if(o.hasOwnProperty("color")&&o.hasOwnProperty("y")&&o.hasOwnProperty("dotted")){let l=r(o.y),c={strokeStyle:o.color,strokeWidth:1};o.dotted?de.dashedLine(e.context,0,l,e.pixelWidth,l,5,c):de.strokeLine(e.context,0,l,e.pixelWidth,l,c)}}let s={strokeStyle:"lightgray",strokeWidth:.5},a=r(2);de.dashedLine(e.context,0,a,e.pixelWidth,a,5,s)}paintAxis(e,t,n){var r,s,a,o,l,c,h,f,d={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};if(this.dataRange===void 0||this.dataRange.max===void 0||this.dataRange.min===void 0)return;let u=this.flipAxis===void 0?!1:this.flipAxis;de.fillRect(e,0,0,t,n,{fillStyle:"rgb(255, 255, 255)"}),h=.95*t,r=h-8,s=h,f=.01,a=o=f*n,l={x:s,y:a},de.strokeLine(e,r,a,s,o,d),de.fillText(e,p(u?this.dataRange.min:this.dataRange.max),r+4,a+12,d),a=o=(1-f)*n,c={x:s,y:a},de.strokeLine(e,r,a,s,o,d),de.fillText(e,p(u?this.dataRange.max:this.dataRange.min),r+4,a-4,d),de.strokeLine(e,l.x,l.y,c.x,c.y,d);function p(w){return w<0?Math.abs(w):w===0?"0":Math.abs(w)>=10||w%1==0?w.toFixed():Math.abs(w)>=1?w.toFixed(1):w.toFixed(2)}const m=this.getScaleFactor(this.dataRange.min,this.dataRange.max,n,this.logScale),F=w=>this.logScale?this.computeYPixelValueInLogScale(w,m):this.computeYPixelValue(w,m),g=Math.ceil((this.dataRange.max-this.dataRange.min)/10);for(let w=Math.ceil(this.dataRange.min+1);w<Math.round(this.dataRange.max-.4);w+=g){const b=F(w);de.strokeLine(e,45,b,50,b,d),de.fillText(e,p(u?this.dataRange.max-w:w),44,b+4,d)}}popupData(e,t){const n=t||e.viewport.cachedFeatures;if(n&&n.length===this.tracks.length){const r=[];for(let s=0;s<this.tracks.length;s++){s>0&&r.push("<hr/>"),r.push(`<div style=background-color:rgb(245,245,245);border-bottom-style:dashed;border-bottom-width:1px;padding-bottom:5px;padding-top:10px;font-weight:bold;font-size:larger >${this.tracks[s].name}</div>`);const a=this.tracks[s].popupData(e,n[s]);r.push(...a)}return r}}async convertToVariant(){this.variantState&&(Object.setPrototypeOf(this,Kh.prototype),this.init(this.variantState),await this.postInit(),this.trackView.clearCachedFeatures(),this.variantState.trackHeight&&this.trackView.setTrackHeight(this.variantState.trackHeight),this.trackView.checkContentHeight(),this.trackView.updateViews(),delete this.variantState)}};ke(_o,"DEFAULT_TRACK_HEIGHT",250);let zs=_o;function M9(i,e){let t=0,n=-Number.MAX_VALUE;for(let r of e)for(let s of r)typeof s.value<"u"&&!Number.isNaN(s.value)&&(t=Math.min(t,s.value),n=Math.max(n,s.value));return{min:t,max:n}}const R9=ut,D9="rgb(0,0,150)",L9=1e6,Xn=10;class Kh extends mt{constructor(t,n){super(t,n);ke(this,"_sortDirections",new Map)}init(t){if(super.init(t),t.variantHeight&&(this.expandedVariantHeight=t.variantHeight),this.featureSource=Wt(t,this.browser.genome),this.colorTables=new Map,t.colorTable){const n=t.colorBy||"*";this.colorTables.set(n,new Sn(t.colorTable))}if(this.strokecolor=t.strokecolor,this._context_hook=t.context_hook,t.color&&(this.colorBy=void 0),this.nVariantRows=1,t.samples)for(let n of t.samples)this.sampleKeys=t.samples;t.sort&&(this.initialSort=t.sort),this._colorByItems=new Map([["none","None"]])}async postInit(){if(this.header=await this.getHeader(),this.header.INFO){const t=new Set(Object.keys(this.header.INFO));this.config.colorBy?this.colorBy=this.config.colorBy:!this.config.color&&t.has("AF")&&(this.colorBy="AF"),t.has("AF")&&this._colorByItems.set("AF","Allele frequency"),t.has("VT")&&this._colorByItems.set("VT","Variant Type"),t.has("SVTYPE")&&this._colorByItems.set("SVTYPE","SV Type")}if(this.config.colorBy&&!this._colorByItems.has(this.config.colorBy)&&this._colorByItems.set(this.config.colorBy,this.config.colorBy),!this.disposed){if(this.header&&!this.sampleKeys&&(this.sampleKeys=this.header.sampleNameMap?Array.from(this.header.sampleNameMap.keys()):[]),this.visibilityWindow===void 0&&this.config.indexed!==!1){const t=tn(this.config.url)?this.config.url.name:this.config.url;R9(t)&&t.toLowerCase().includes("gnomad")?this.visibilityWindow=1e3:typeof this.featureSource.defaultVisibilityWindow=="function"?this.visibilityWindow=await this.featureSource.defaultVisibilityWindow():this.visibilityWindow=L9}return this}}get supportsWholeGenome(){return!this.config.indexURL||this.config.supportsWholeGenome===!0}get color(){return this._color||D9}set color(t){this._color=t,t&&(this.colorBy=void 0)}async getHeader(){return this.header||typeof this.featureSource.getHeader=="function"&&(this.header=await this.featureSource.getHeader()),this.header}getSampleCount(){return this.sampleKeys?this.sampleKeys.length:0}async getFeatures(t,n,r,s){this.header===void 0&&(this.header=await this.getHeader());const a=await this.featureSource.getFeatures({chr:t,start:n,end:r,bpPerPixel:s,visibilityWindow:this.visibilityWindow});if(this.initialSort){const o=this.initialSort;if(o.option===void 0||o.option.toUpperCase()==="GENOTYPE")this.sortSamplesByGenotype(o,a);else if(o.option.toUpperCase()==="ATTRIBUTE"&&o.attribute){const l=o.direction==="ASC"?1:-1;this.sortByAttribute(o.attribute,l)}this.initialSort=void 0}return a}hasSamples(){return this.getSampleCount()>0}getSamples(){const t=this.displayMode==="SQUISHED"?this.squishedVGap:this.expandedVGap,n=this.displayMode==="COLLAPSED"?1:this.nVariantRows,r=this.displayMode==="SQUISHED"?this.squishedVariantHeight:this.expandedVariantHeight,s=this.displayMode==="SQUISHED"?this.squishedCallHeight:this.expandedCallHeight,a=n*(s+t),o=Xn+n*(r+t);return{names:this.sampleKeys,yOffset:o,height:a}}computePixelHeight(t){if(!t||t.length===0)return Xn;const n=this.displayMode==="COLLAPSED"?1:this.nVariantRows,r=this.displayMode==="SQUISHED"?this.squishedVGap:this.expandedVGap,s=this.displayMode==="SQUISHED"?this.squishedVariantHeight:this.expandedVariantHeight,a=this.displayMode==="SQUISHED"?this.squishedCallHeight:this.expandedCallHeight,o=this.showGenotypes===!1?0:this.getSampleCount()*n;return Xn+n*(s+r)+r+(o+1)*(a+r)}variantRowCount(t){this.nVariantRows=t}draw({context:t,pixelWidth:n,pixelHeight:r,bpPerPixel:s,bpStart:a,pixelTop:o,features:l}){de.fillRect(t,0,o,n,r,{fillStyle:"rgb(255, 255, 255)"});const c=this.displayMode==="SQUISHED"?this.squishedVGap:this.expandedVGap,h=this.displayMode==="COLLAPSED"?1:this.nVariantRows,f=this.displayMode==="SQUISHED"?this.squishedVariantHeight:this.expandedVariantHeight;this.variantBandHeight=Xn+h*(f+c);let d=this.sampleColumns;const u=this.hasSamples();if(d&&u&&this.showGenotypes!==!1&&de.strokeLine(t,0,this.variantBandHeight,n,this.variantBandHeight,{strokeStyle:"rgb(224,224,224) "}),l){const p=this.displayMode==="SQUISHED"?this.squishedCallHeight:this.expandedCallHeight,m=this.displayMode==="SQUISHED"?this.squishedVGap:this.expandedVGap,F=a+n*s+1;for(let g of l){if(g.end<a)continue;if(g.start>F)break;const w=this.displayMode==="SQUISHED"?this.squishedVariantHeight:this.expandedVariantHeight,b=Xn+(this.displayMode==="COLLAPSED"?0:g.row*(w+m)),y=w;let v=(g.start-a)/s,T=(g.end-a)/s,A=Math.max(1,T-v);A<3?(A=3,v-=1):A>5&&(v+=1,A-=2);const C=g._f||g;let k;try{k=C.alleleFreq()}catch(B){console.log(B)}if(this.colorBy==="AF"&&k){const B=Math.min(1,k)*y,M=y-B;t.fillStyle=C.isFiltered()?this.refColorFiltered:this.refColor,t.fillRect(v,b,A,M),t.fillStyle=C.isFiltered()?this.altColorFiltered:this.altColor,t.fillRect(v,b+M,A,B)}else t.fillStyle=this.getColorForFeature(C),t.fillRect(v,b,A,y);let I=this.getVariantStrokecolor(C);if(I&&(t.strokeStyle=I,t.strokeRect(v,b,A,y)),this.callContextHook(C,t,v,b,A,y),u&&this.showGenotypes!==!1){const B=this.displayMode==="COLLAPSED"?1:this.nVariantRows;this.sampleYOffset=this.variantBandHeight+m,this.sampleHeight=B*(p+m);let M=0;for(let N of this.sampleKeys){const x=this.header.sampleNameMap.get(N),D=C.calls[x];if(D){const S=this.displayMode==="COLLAPSED"?0:C.row,U=this.sampleYOffset+M*this.sampleHeight+S*(p+m);let O=!0,Q=!0,K=!1;if(D.genotype)for(let G of D.genotype)if(G==="."){K=!0;break}else G!==0&&(Q=!1),G===0&&(O=!1);D.genotype?K?t.fillStyle=this.noCallColor:Q?t.fillStyle=this.homrefColor:O?t.fillStyle=this.homvarColor:t.fillStyle=this.hetvarColor:t.fillStyle=this.noGenotypeColor,t.fillRect(v,U,A,p)}M++}}}}else console.log("No feature list")}get refColorFiltered(){return this._refColorFiltered||(this._refColorFiltered=qe.addAlpha(this.refColor,.2)),this._refColorFiltered}get altColorFiltered(){return this._altColorFiltered||(this._altColorFiltered=qe.addAlpha(this.altColor,.2)),this._altColorFiltered}getColorForFeature(t){const n=t._f||t;let r;if(this.colorBy&&this.colorBy!=="none"){const s=n.getAttributeValue(this.colorBy);r=s!==void 0?this.getVariantColorTable(this.colorBy).getColor(s):"gray"}else this.color?r=typeof this.color=="function"?this.color(t):this.color:n.type==="NONVARIANT"?r=this.nonRefColor:n.type==="MIXED"?r=this.mixedColor:r=this.color;return n.isFiltered()&&(r=qe.addAlpha(r,.2)),r}getVariantStrokecolor(t){const n=t._f||t;let r;return this.strokecolor?r=typeof this.strokecolor=="function"?this.strokecolor(n):this.strokecolor:r=void 0,r}callContextHook(t,n,r,s,a,o){if(this._context_hook&&typeof this._context_hook=="function"){const l=t._f||t;n.save(),this._context_hook(l,n,r,s,a,o),n.restore()}}clickedFeatures(t){let n=super.clickedFeatures(t);const r=this.displayMode==="EXPANDED"?this.expandedVGap:this.squishedVGap,s=r+(this.displayMode==="SQUISHED"?this.squishedCallHeight:this.expandedCallHeight),a=t.y;if(a<=this.variantBandHeight){const o=this.displayMode==="SQUISHED"?this.squishedVariantHeight:this.expandedVariantHeight,l=Math.floor((a-Xn)/(o+r));this.displayMode!=="COLLAPSED"&&(n=n.filter(c=>c.row===l))}else if(this.sampleKeys){const o=a-this.variantBandHeight,l=Math.floor(o/this.sampleHeight);if(l>=0&&l<this.sampleKeys.length){const c=Math.floor((o-l*this.sampleHeight)/s),h=this.displayMode==="COLLAPSED"?n:n.filter(u=>u.row===c),f=this.sampleKeys[l],d=this.header.sampleNameMap.get(f);n=h.map(u=>{const p=u.calls[d];return p.genotypeString=z9(p,u),p})}}return n}popupData(t,n){n===void 0&&(n=this.clickedFeatures(t));const r=t.genomicLocation,s=this.browser.genome.id;let a=[];for(let o of n){const l=o._f||o;if(a.length>0&&a.push({html:'<hr style="border-top-width:2px ;border-color: #c9c3ba" />'}),typeof l.popupData=="function"){const c=l.popupData(r,s);Array.prototype.push.apply(a,c)}}return a}menuItemList(){const t=[];if(this.header.INFO&&this.header.INFO){const r=this._colorByItems;t.push("<hr/>");const s=ve('<div class="igv-track-menu-category igv-track-menu-border-top">');s.text("Color by:"),t.push({name:void 0,object:s,click:void 0,init:void 0});for(let a of r.keys()){const o=this.colorBy===a;t.push(this.colorByCB({key:a,label:r.get(a)},o))}t.push(this.colorByCB({key:"info",label:"Info field..."}))}if(P0(this.browser.sampleInfo,this.sampleKeys)===!0){t.push("<hr/>"),t.push("Sort by attribute:");for(const r of this.browser.sampleInfo.attributeNames)if(this.sampleKeys.some(s=>{const a=this.browser.sampleInfo.getAttributes(s);return a&&a[r]})){let a=function(){const o=this._sortDirections.get(r)||1;this.sortByAttribute(r,o),this.config.sort={option:"ATTRIBUTE",attribute:r,direction:o>0?"ASC":"DESC"},this._sortDirections.set(r,o*-1)};const s=ve("<div>");s.html(`&nbsp;&nbsp;${r.split(_r.emptySpaceReplacement).join(" ")}`),t.push({object:s,click:a})}}t.push("<hr/>"),this.getSampleCount()>0&&(t.push({object:ve('<div class="igv-track-menu-border-top">')}),t.push({object:ve(ht("Show Genotypes",this.showGenotypes)),click:function(){this.showGenotypes=!this.showGenotypes,this.trackView.checkContentHeight(),this.trackView.repaintViews(),this.browser.sampleNameControl.performClickWithState(this.browser,this.showGenotypes),this.browser.sampleInfoControl.performClickWithState(this.browser,this.showGenotypes)}})),t.push({object:ve('<div class="igv-track-menu-border-top">')});for(let r of["COLLAPSED","SQUISHED","EXPANDED"]){var n={COLLAPSED:"Collapse",SQUISHED:"Squish",EXPANDED:"Expand"};t.push({object:ve(ht(n[r],r===this.displayMode)),click:function(){this.displayMode=r,this.trackView.checkContentHeight(),this.trackView.repaintViews()}})}return this.browser.circularView&&(t.push("<hr>"),t.push({label:"Add SVs to circular view",click:function(){for(let s of this.trackView.viewports)this.sendChordsForViewport(s)}})),this.canCovertToPytor()&&(t.push("<hr>"),t.push({label:"Convert to CNVpytor track",click:function(){this.convertToPytor()}})),t}contextMenuItemList(t){const n=[];if(this.hasSamples()&&this.showGenotypes){const r=t.viewport.referenceFrame,s=t.genomicLocation,a=r.toBP(2.5),o=this._sortDirections.get("genotype")||1;this._sortDirections.set("genotype",o*-1),n.push({label:"Sort by genotype",click:l=>{const c={direction:o,option:"genotype",chr:t.viewport.referenceFrame.chr,start:Math.floor(s-a),end:Math.ceil(s+a)},f=t.viewport.cachedFeatures;this.sortSamplesByGenotype(c,f),this.config.sort=c}}),n.push("<hr/>")}if(this.browser.circularView){const r=t.viewport;n.push({label:"Add SVs to Circular View",click:()=>{this.sendChordsForViewport(r)}}),n.push("<hr/>")}return n}async sortSamplesByGenotype({chr:t,position:n,start:r,end:s,direction:a},o){if(r===void 0&&(r=n-1),s===void 0&&(s=n),o||(o=await this.featureSource.getFeatures({chr:t,start:r,end:s})),!o)return;const l=new Map,c=a==="ASC"?1:-1;for(let h of o)if(!(h.end<r)){if(h.start>s)break;for(let f of h.calls){const d=f.sample,u=f.zygosityScore();l.set(d,l.has(d)?l.get(d)+u:u)}}this.sampleKeys.sort(function(h,f){let d=l.get(h)||0,u=l.get(f)||0;return c*(d-u)}),this.trackView.repaintViews()}sortByAttribute(t,n){this.config.sort={option:"ATTRIBUTE",attribute:t,direction:n===1?"ASC":"DESC"},this.sampleKeys=this.browser.sampleInfo.getSortedSampleKeysByAttribute(this.sampleKeys,t,n),this.trackView.repaintViews()}sendChordsForViewport(t){const n=t.referenceFrame;let r;if(n.chr==="all"){const a=this.featureSource.getAllFeatures(),o=Object.keys(a).map(l=>a[l]);r=[].concat(...o)}else r=this.featureSource.featureCache.queryFeatures(n.chr,n.start,n.end);const s=oC(r);po(s,this,n,.5)}colorByCB(t,n){const r=ve(ht(t.label,n));return t.key!=="info"?{name:void 0,object:r,click:function(){const a=t.key==="none"?void 0:t.key;this.colorBy=a,this.config.colorBy=a,this.trackView.repaintViews()},init:void 0}:{name:void 0,object:r,dialog:function(a){this.browser.inputDialog.present({label:"Info field",value:"",callback:o=>{o?(this.colorBy=o,this._colorByItems.set(o,o)):this.colorBy=void 0,this.trackView.repaintViews()}},a)},init:void 0}}getState(){const t=super.getState();return this.color&&typeof this.color!="function"&&(t.color=this.color),t}getVariantColorTable(t){if(this.colorTables.has(t))return this.colorTables.get(t);if(this.colorTables.has("*"))return this.colorTables.get("*");{let n;switch(t){case"SVTYPE":n=H9;break;default:n=new Bs("Set1")}return this.colorTables.set(t,n),n}}paintAxis(){}canCovertToPytor(){return this.config.indexURL?!1:this.header?Object.keys(this.sampleKeys).length===1&&this.header.FORMAT&&this.header.FORMAT.AD&&this.header.FORMAT.DP:!1}async convertToPytor(){this.variantState={...this.config,...this.getState()},this.variantState.trackHeight=this.height,this.trackView.startSpinner(),setTimeout(async()=>{try{const t=Object.assign({},this.config);Object.setPrototypeOf(this,zs.prototype),this.init(t),await this.postInit(),this.trackView.clearCachedFeatures(),this.trackView.setTrackHeight(this.config.height||zs.DEFAULT_TRACK_HEIGHT),this.trackView.checkContentHeight(),this.trackView.updateViews()}finally{this.trackView.stopSpinner()}},100)}}ke(Kh,"defaults",{displayMode:"EXPANDED",sortDirection:"ASC",showGenotypes:!0,expandedVariantHeight:10,squishedVariantHeight:2,squishedCallHeight:1,expandedCallHeight:10,expandedVGap:2,squishedVGap:1,expandedGroupGap:10,squishedGroupGap:5,featureHeight:14,noGenotypeColor:"rgb(200,180,180)",noCallColor:"rgb(225, 225, 225)",nonRefColor:"rgb(200, 200, 215)",mixedColor:"rgb(200, 220, 200)",homrefColor:"rgb(200, 200, 200)",homvarColor:"rgb(17,248,254)",hetvarColor:"rgb(34,12,253)",refColor:"rgb(0,0,220)",altColor:"rgb(255,0,0)",visibilityWindow:void 0,labelDisplayMode:void 0,type:"variant"});function z9(i,e){if(i.genotype){let t="";if(e.alternateBases===".")t="No Call";else{const n=e.alternateBases.split(",");for(let r of i.genotype)if(t.length>0&&(t+=" | "),r===".")t+=".";else if(r===0)t+=e.referenceBases;else{let s=n[r-1].replace("<","&lt;");t+=s}}return t}}const H9=new Sn({DEL:"#ff2101",INS:"#001888",DUP:"#028401",INV:"#008688",CNV:"#8931ff",BND:"#891100","*":"#002eff"}),P9={timeout:5e3,type:"plain",url:"https://igv.org/genomes/locus.php?genome=$GENOME$&name=$FEATURE$",coords:0};async function i1(i,e){const t=i.searchConfig||P9;let n;const r=i.tracks.filter(s=>s.searchable);for(let s of r){const a=await s.search(e);if(a)return a}if(i.config&&i.config.search!==!1)try{return n=await U9(i,e,t),n}catch(s){console.log("Search service not available "+s)}}async function O9(i,e){if(e===void 0||e.trim()==="")return;const t=e.split(" ");let n=[];const r=async s=>{if(s.trim().toLowerCase()==="all"||s==="*")return i.genome.wholeGenomeView?{chr:"all",start:0,end:i.genome.getChromosome("all").bpLength}:void 0;let a,o;if(s.includes(":")&&(a=Kc(s,i.isSoftclipped()),a&&(o=await i.genome.loadChromosome(a.chr))),!o){a=void 0;const l=await i1(i,s);l&&(a={chr:l.chr,start:l.start,end:l.end,name:(l.name||s).toUpperCase()}),a||(o=await i.genome.loadChromosome(s),o&&(a={chr:o.name}))}return a&&(o=o||await i.genome.loadChromosome(a.chr),a.chr=o.name,a.start===void 0&&a.end===void 0&&(a.start=0,a.end=o.bpLength)),a};for(let s of t){const a=await r(s);a&&n.push(a)}if(n.length===0){const s=await r(e.replaceAll(" ","+"));s&&n.push(s)}return n.length===0?void 0:n}function Kc(i,e=!1){const t=i.split("	");if(t.length>2)try{const s=t[0],a=parseInt(t[1].replace(/,/g,""),10)-1,o=parseInt(t[2].replace(/,/g,""),10);if(!isNaN(a)&&!isNaN(o))return{chr:s,start:a,end:o}}catch{}const n=i.split(":"),r={chr:n[0]};if(n.length>1){let s=n[1].split("-");if(s.length>2)if(n[1].startsWith("-")){const o=n[1].indexOf("-",1);if(o>0){const l=n[1].substring(0,o),c=n[1].substring(o+1);s=[l,c]}}else return;let a;if(a=s[0].replace(/,/g,""),isNaN(a))return;if(r.start=parseInt(a,10)-1,r.end=r.start+1,s.length===1&&(r.start-=20,r.end+=20),s.length===2){if(a=s[1].replace(/,/g,""),isNaN(a))return;if(r.end=parseInt(a,10),r.start<0&&!e){const o=-extent.start;r.start+=o,r.end+=o}}}return r}async function U9(i,e,t){let n=t.url.replace("$FEATURE$",e.toUpperCase());n.indexOf("$GENOME$")>-1&&(n=n.replace("$GENOME$",i.genome.id?i.genome.id:"hg19"));const r=t.timeout?{timeout:t.timeout}:void 0,s=await Se.loadString(n,r);return q9(i,s,t)}function q9(i,e,t){let n;if(t.type==="plain"?n=V9(i,e):n=JSON.parse(e),t.resultsField&&(n=n[t.resultsField]),!(!n||n.length===0)){const r=t.chromosomeField||"chromosome",s=t.startField||"start",a=t.endField||"end",o=t.coords||1;let l;Array.isArray(n)?l=n[0]:l=n,l.hasOwnProperty(r)&&l.hasOwnProperty(s)||console.error("Search service results must include chromosome and start fields: "+l);const c=l[r];let h=l[s]-o,f=l[a];f===void 0&&(f=h+1);const d={chr:c,start:h,end:f};if(l.type&&l.type,t.geneField&&t.snpField){const u=l[t.geneField]||l[t.snpField];u&&(d.name=u.toUpperCase())}return d}}function V9(i,e){const t=[],n=zn(e);for(let r of n){const s=r.split("	");if(s.length>=3){const a=s[1].split(":"),o=a[1].split("-");t.push({chromosome:i.genome.getChromosomeName(a[0].trim()),start:parseInt(o[0].replace(/,/g,"")),end:parseInt(o[1].replace(/,/g,"")),name:s[0].toUpperCase()})}}return t}class Xp extends mt{constructor(e,t){super(e,t)}init(e){super.init(e),this.type="qtl",this.name=e.name;const t=e.minLogP||e.min,n=e.maxLogP||e.max;this.dataRange={min:t!==void 0?t:3.5,max:n||25},n?this.autoscale=e.autoscale:this.autoscale=!0,this.autoscalePercentile=e.autoscalePercentile===void 0?98:e.autoscalePercentile,this.background=e.background,this.divider=e.divider||"rgb(225,225,225)",this.dotSize=e.dotSize||2,this.height=e.height||100,this.disableButtons=e.disableButtons,this.featureSource=Wt(e,this.browser.genome)}paintAxis(e,t,n){const r=(this.dataRange.max-this.dataRange.min)/n,s={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};de.fillRect(e,0,0,t,n,{fillStyle:"rgb(255, 255, 255)"});const a=Math.ceil((this.dataRange.max-this.dataRange.min)*10/n);for(let o=4;o<=this.dataRange.max;o+=a){const l=.85*t,c=l-5,h=l,f=n-(o-this.dataRange.min)/r;de.strokeLine(e,c,f,h,f,s),f>8&&de.fillText(e,o,c-1,f+2,s)}s.textAlign="center",de.fillText(e,"-log10(pvalue)",t/4,n/2,s,{rotate:{angle:-90}})}async getFeatures(e,t,n){const r=this.visibilityWindow;return await this.featureSource.getFeatures({chr:e,start:t,end:n,visibilityWindow:r})}draw(e){const{context:t,referenceFrame:n,pixelWidth:r,pixelHeight:s}=e;this.background&&de.fillRect(t,0,0,r,s,{fillStyle:this.background}),de.strokeLine(t,0,s-1,r,s-1,{strokeStyle:this.divider}),n.feature&&n.feature.match(/RS[0-9]+/);const a=o=>{const l=o?2*this.dotSize:this.dotSize,c=e.bpStart,h=(this.dataRange.max-this.dataRange.min)/s;for(let d of e.features){const u=(d.start-c+.5)/e.bpPerPixel;if(u<0)continue;if(u>r)break;const p=d.phenotype;let m;if(this.browser.qtlSelections.qtl?m=Q9(this.browser.qtlSelections.qtl,d):this.browser.qtlSelections.snps.size>0?m=this.browser.qtlSelections.hasSnp(d.snp)&&this.browser.qtlSelections.hasPhenotype(p):m=this.browser.qtlSelections.hasPhenotype(p),!o||m){var f=-Math.log(d.pValue)/Math.LN10;if(f>=this.dataRange.min){let F;f>this.dataRange.max?(f=this.dataRange.max,F=!0):F=!1;const g=Math.max(0+l,s-Math.round((f-this.dataRange.min)/h));d.px=u,d.py=g,d.radius=l;let w;o&&m?(w=this.browser.qtlSelections.colorForGene(p),de.setProperties(t,{fillStyle:w,strokeStyle:"black"})):(w=F?"rgb(150, 150, 150)":"rgb(180, 180, 180)",de.setProperties(t,{fillStyle:w,strokeStyle:w})),de.fillCircle(t,u,g,l),de.strokeCircle(t,u,g,l)}}}};a(!1),a(!0)}popupData(e,t){if(t===void 0&&(t=e.viewport.cachedFeatures),!t||t.length===0)return[];const n=this.name,r=[];for(let s of this._clickedFeatures(e,t))r.length>0&&r.push("<hr/>"),typeof s.popupData=="function"?r.push(...s.popupData(e)):r.push({name:"snp id",value:s.snp},{name:"gene id",value:s.gencodeId},{name:"gene name",value:s.geneSymbol},{name:"p value",value:s.pValue},{name:"tissue",value:n});return r}_clickedFeatures(e,t){const n=(a,o)=>Math.sqrt((a.px-o.canvasX)*(a.px-o.canvasX)+(a.py-o.canvasY)*(a.py-o.canvasY)),s=t.filter(a=>n(a,e)<6);if(s.length>1){s.sort((o,l)=>n(o,e)-n(l,e));const a=n(s[0],e);return s.filter(o=>n(o,e)<=a)}else return s}contextMenuItemList(e){const t=[],n=e.viewport.cachedFeatures;if(n){const r=this._clickedFeatures(e,n);r.length>0&&(t.push({label:"Highlight associated features",click:async()=>{this.browser.qtlSelections.clear();for(let s of r)this.browser.qtlSelections.qtl=s,this.browser.qtlSelections.addPhenotype(s.phenotype);this.browser.repaintViews()}}),t.push("<hr>"))}return t}menuItemList(){const e=[];e.push(...this.numericDataMenuItems()),e.push("<hr/>");function t(n){this.browser.inputDialog.present({label:"Search for snp or phenotype",value:"",callback:async r=>{if(r){r=r.trim().toUpperCase();const s=h=>((h.phenotype&&h.phenotype.toUpperCase())===r||h.snp&&h.snp.toUpperCase()===r)&&-Math.log(h.pValue)/Math.LN10>this.dataRange.min;let a=await this.featureSource.findFeatures(s);a.length==0&&await this.browser.search(r)&&(a=await this.featureSource.findFeatures(s));let o,l,c;if(a.length>0){this.browser.qtlSelections.clear();const h=new Set;o=a[0].chr,l=a[0].start,c=a[0].end;for(let u of a)u.snp&&u.snp.toUpperCase()===r&&this.browser.qtlSelections.addSnp(u.snp),this.browser.qtlSelections.addPhenotype(u.phenotype),h.add(u.phenotype),u.chr===o&&(l=Math.min(l,u.start),c=Math.max(c,u.end));const f=this.browser.genome.getChromosomeName(o);for(let u of h){const p=await i1(this.browser,u);p&&f===this.browser.genome.getChromosomeName(p.chr)&&(l=Math.min(l,p.start),c=Math.max(c,p.end))}const d=Math.floor(.1*(c-l));l=Math.max(0,l-d),c+=d,await this.browser.search(`${o}:${l}-${c}`)}}}},n)}return e.push({label:"Search for...",dialog:t}),e}doAutoscale(e){let t=this.config.max||25;if(e.length>0){const n=e.map(s=>-Math.log(s.pValue)/Math.LN10);n.sort((s,a)=>s-a);const r=Math.floor(n.length*(this.autoscalePercentile/100));t=n[r]}return this.dataRange.max=Math.max(t,10),this.dataRange}}function Q9(i,e){return i.chr===e.chr&&i.start===e.start&&i.pValue===e.pValue}const ur={X:"rgb(204, 153, 0)",Y:"rgb(153, 204, 0)",Un:"darkGray)",1:"rgb(80, 80, 255)",2:"rgb(206, 61, 50)","2a":"rgb(210, 65, 55)","2b":"rgb(215, 70, 60)",3:"rgb(116, 155, 88)",4:"rgb(240, 230, 133)",5:"rgb(70, 105, 131)",6:"rgb(186, 99, 56)",7:"rgb(93, 177, 221)",8:"rgb(128, 34, 104)",9:"rgb(107, 215, 107)",10:"rgb(213, 149, 167)",11:"rgb(146, 72, 34)",12:"rgb(131, 123, 141)",13:"rgb(199, 81, 39)",14:"rgb(213, 143, 92)",15:"rgb(122, 101, 165)",16:"rgb(228, 175, 105)",17:"rgb(59, 27, 83)",18:"rgb(205, 222, 183)",19:"rgb(97, 42, 121)",20:"rgb(174, 31, 99)",21:"rgb(231, 199, 111)",22:"rgb(90, 101, 94)",23:"rgb(204, 153, 0)",24:"rgb(153, 204, 0)",25:"rgb(51, 204, 0)",26:"rgb(0, 204, 51)",27:"rgb(0, 204, 153)",28:"rgb(0, 153, 204)",29:"rgb(10, 71, 255)",30:"rgb(71, 117, 255)",31:"rgb(255, 194, 10)",32:"rgb(255, 209, 71)",33:"rgb(153, 0, 51)",34:"rgb(153, 26, 0)",35:"rgb(153, 102, 0)",36:"rgb(128, 153, 0)",37:"rgb(51, 153, 0)",38:"rgb(0, 153, 26)",39:"rgb(0, 153, 102)",40:"rgb(0, 128, 153)",41:"rgb(0, 51, 153)",42:"rgb(26, 0, 153)",43:"rgb(102, 0, 153)",44:"rgb(153, 0, 128)",45:"rgb(214, 0, 71)",46:"rgb(255, 20, 99)",47:"rgb(0, 214, 143)",48:"rgb(20, 255, 177)"};for(let i of Object.keys(ur)){const e="chr"+i;ur[e]=ur[i]}for(let i=1;i<=48;i++){if(i===10)continue;const e=G9(i);ur[e]=ur[i.toString()]}function G9(i){if(!+i)return!1;for(var e=String(+i).split(""),t=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],n="",r=3;r--;)n=(t[+e.pop()+r*10]||"")+n;return Array(+e.join("")+1).join("M")+n}const $9=1e8;class j9 extends mt{constructor(e,t){super(e,t)}init(e){super.init(e),this.useChrColors=e.useChrColors===void 0?!0:e.useChrColors,this.trait=e.trait,this.posteriorProbability=e.posteriorProbability,this.valueProperty=e.format==="bed"?"score":"value",this.height=e.height||100,this.autoscale=e.autoscale,this.autoscalePercentile=e.autoscalePercentile===void 0?98:e.autoscalePercentile,this.background=e.background,this.divider=e.divider||"rgb(225,225,225)",this.dotSize=e.dotSize||3,this.popoverWindow=e.popoverWindow===void 0?$9:e.popoverWindow,this.useChrColors?this.colorScale=new Sn(e.colorTable||ur):e.color?this.colorScale=new Iv(e.color):this.colorScale=new H0(e.colorScale||{thresholds:[5e-8,5e-4,.5],colors:["rgb(255,50,50)","rgb(251,100,100)","rgb(251,170,170)","rgb(227,238,249)"]}),this.featureSource=Wt(e,this.browser.genome)}async postInit(){if(!(typeof this.featureSource.getHeader=="function"&&(this.header=await this.featureSource.getHeader(),this.disposed)))return this.header&&this.setTrackProperties(this.header),this.autoscale||(this.posteriorProbability?this.dataRange={min:this.config.min===void 0?0:this.config.min,max:this.config.max===void 0?1:this.config.max}:this.dataRange={min:this.config.min===void 0?0:this.config.min,max:this.config.max===void 0?25:this.config.max}),this}get supportsWholeGenome(){return!0}async getFeatures(e,t,n){const r=this.visibilityWindow;return this.featureSource.getFeatures({chr:e,start:t,end:n,visibilityWindow:r})}draw(e){const t=e.features,n=e.context,r=e.pixelWidth,s=e.pixelHeight;if(this.background&&de.fillRect(n,0,0,r,s,{fillStyle:this.background}),de.strokeLine(n,0,s-1,r,s-1,{strokeStyle:this.divider}),t){const a=e.bpPerPixel,o=e.bpStart,l=o+r*a+1;for(let c of t){const h=c.start;if(h<o)continue;if(h>l)break;let f;if(this.posteriorProbability)f=c[this.valueProperty];else{const g=c[this.valueProperty];if(!g)continue;f=-Math.log10(g)}const d=this.useChrColors?c._f?c._f.chr:c.chr:f,u=this.colorScale.getColor(d),p=(this.dataRange.max-this.dataRange.min)/s,m=Math.round((h-o)/a),F=Math.max(this.dotSize,s-Math.round((f-this.dataRange.min)/p));u&&de.setProperties(n,{fillStyle:u,strokeStyle:"black"}),de.fillCircle(n,m,F,this.dotSize),c.px=m,c.py=F}}}paintAxis(e,t,n){de.fillRect(e,0,0,t,n,{fillStyle:"rgb(255, 255, 255)"});var r={font:"normal 10px Arial",textAlign:"right",strokeStyle:"black"};const s=(this.dataRange.max-this.dataRange.min)/n;if(this.posteriorProbability)for(let o=this.dataRange.min;o<this.dataRange.max;o+=.1){const l=n-Math.round((o-this.dataRange.min)/s);de.strokeLine(e,45,l-2,50,l-2,r),de.fillText(e,o.toFixed(1),44,l+2,r)}else{const a=Math.ceil((this.dataRange.max-this.dataRange.min)*10/n);for(let o=this.dataRange.min;o<this.dataRange.max;o+=a){const l=n-Math.round((o-this.dataRange.min)/s);de.strokeLine(e,45,l,50,l,r),de.fillText(e,Math.floor(o),44,l+4,r)}}r.textAlign="center",this.posteriorProbability?de.fillText(e,"PPA",t/2,n/2,r,{rotate:{angle:-90}}):de.fillText(e,"-log10(pvalue)",t/2,n/2,r,{rotate:{angle:-90}})}popupData(e,t){t===void 0&&(t=e.viewport.cachedFeatures);let n=[];const r=e.viewport.trackView.track;if(t){let s=0;for(let a of t){const o=Math.abs(e.canvasX-a.px),l=Math.abs(e.canvasY-a.py);if(o<this.dotSize&&l<this.dotSize){if(s>0&&n.push("<HR/>"),s==5){n.push("...");break}if(a=a._f||a,typeof a.popupData=="function")n=n.concat(a.popupData());else{const c=a[this.valueProperty],h=a.chr,f=He(a.start+1);n.push({name:"chromosome",value:h}),n.push({name:"position",value:f}),n.push({name:"name",value:a.name}),r.posteriorProbability?n.push({name:"posterior probability",value:c}):n.push({name:"pValue",value:c})}s++}}}return n}menuItemList(){return this.numericDataMenuItems()}doAutoscale(e){if(e.length>0){const t=this.valueProperty,n=this.posteriorProbability,r=e.map(function(s){const a=s[t];return{value:n?a:-Math.log(a)/Math.LN10}});this.dataRange=Ts(r)}else this.posteriorProbability?this.dataRange={min:this.config.min||0,max:this.config.max||1}:this.dataRange={min:this.config.max||25,max:this.config.min||0};return this.dataRange}}const Jp=1;class W9 extends mt{constructor(e,t){super(e,t)}init(e){super.init(e),this.autoscale=e.autoscale||e.max===void 0,this.dataRange={min:e.min||0,max:e.max},this.windowFunction=e.windowFunction||"mean",this.paintAxis=Ys,this.graphType=e.graphType||"bar",e._featureSource?(this.featureSource=e._featureSource,delete e._featureSource):this.featureSource=Wt(this.config,this.browser.genome),this.visibilityWindow=-1,this.featureSource.visibilityWindow=this.visibilityWindow}async postInit(){if(typeof this.featureSource.getHeader=="function"){if(this.header=await this.featureSource.getHeader(),this.disposed)return;if(this.sampleKeys=this.header.columnNames.slice(3),this.setTrackProperties(this.header),this.header.hasOwnProperty("clickToHighlight")){let e=this.header.clickToHighlight;this.config.clickToHighlight=e,this.config.samplesClickedToHighlight={}}if(this.header.hasOwnProperty("highlight")){this.config.highlightSamples={};let e=this.header.highlight;Array.isArray(e)||(e=[e]);for(let t of e){const n=t.split(";");n.length===2&&(this.config.highlightSamples[n[0]]=n[1])}}}}menuItemList(){return this.numericDataMenuItems()}async getFeatures(e,t,n){const r=await this.featureSource.getFeatures({chr:e,start:0,end:Number.MAX_SAFE_INTEGER,visibilityWindow:this.visibilityWindow});let s,a;for(let o=1;o<r.length-1;o++)if(s===void 0&&r[o].end>t&&(s=o-1),a===void 0&&r[o].start>n){a=o+1;break}return s===void 0&&(s=0),a===void 0&&(a=r.length),r.slice(s,a)}draw(e){const{features:t,context:n,bpPerPixel:r,bpStart:s,pixelWidth:a,pixelHeight:o}=e,l=f=>(this.dataRange.max-f)/(this.dataRange.max-this.dataRange.min)*o,c=function(f){let d=Math.floor((f-s)/r);return isNaN(d)&&console.warn("isNaN(x). feature start "+He(f)+" bp start "+He(s)),d},h=f=>{if(this.config.hasOwnProperty("guideLines")){for(let d of this.config.guideLines)if(d.hasOwnProperty("color")&&d.hasOwnProperty("y")&&d.hasOwnProperty("dotted")){let u=l(d.y),p={strokeStyle:d.color,strokeWidth:2};d.dotted?de.dashedLine(f.context,0,u,f.pixelWidth,u,5,p):de.strokeLine(f.context,0,u,f.pixelWidth,u,p)}}};if(t&&t.length>0&&(this.dataRange.min===void 0&&(this.dataRange.min=0),this.dataRange.max>this.dataRange.min)){const f=this.config.highlightSamples,d=this.config.onlyHandleClicksForHighlightedSamples,u=this.config.clickToHighlight;let p=-1,m={},F=[],g=[];this.clickDetectorCache={};for(let w of t){const b=c(w.start),y=c(w.end),v=p>=0?c(p):b;if(!(isNaN(b)||isNaN(y))){this.clickDetectorCache[b]=[],this.clickDetectorCache[y]=[];for(let T=0;T<w.values.length;T++){const A=this.sampleKeys[T],C=w.values[T],k=l(C);if(b-v>=Jp){const I=m[A],B=l(I),M=f&&f[A];M?F.push([v,B,b,k,M]):u&&A in this.config.samplesClickedToHighlight?F.push([v,B,b,k,this.config.samplesClickedToHighlight[A]]):de.strokeLine(n,v,B,b,k,{strokeStyle:"#D9D9D9"}),(!d||A in f)&&this.clickDetectorCache[b].push([v,B,b,k,A,M||"gray"])}if(y-b>=Jp){const I=f&&f[A];I?g.push([b,k,y,k,I]):u&&A in this.config.samplesClickedToHighlight?g.push([b,k,y,k,this.config.samplesClickedToHighlight[A]]):de.strokeLine(n,b,k,y,k,{strokeStyle:"gray"}),(!d||A in f)&&this.clickDetectorCache[y].push([b,k,y,k,A,I||"gray"])}m[A]=C}p=w.end}}for(let w of F)de.strokeLine(n,w[0],w[1],w[2],w[3],{strokeStyle:w[4],lineWidth:1.3});for(let w of g)de.strokeLine(n,w[0],w[1],w[2],w[3],{strokeStyle:w[4],lineWidth:2})}h(e)}doAutoscale(e){let t,n;return e.length>0?(t=Number.MAX_VALUE,n=-Number.MAX_VALUE,e.forEach(function(r){t=Math.min(t,...r.values),n=Math.max(n,...r.values)}),t-=.01,n+=.01):(t=0,n=100),{min:t,max:n}}clickedFeatures(e){const r=e.canvasX,s=e.canvasY;let a=null;for(a of Object.keys(this.clickDetectorCache))if(a=parseInt(a),a>=r)break;if(a){let c=Number.MAX_VALUE,h=[];const f=this.clickDetectorCache[a];for(let d of f){const u=d[0],p=d[2];if(r<u||r>p)return[];const m=d[1],F=d[3];if(s<Math.min(m,F)-10||s>Math.max(m,F)+10)continue;const g=K9(r,s,u,m,p,F);g<c&&(h=[{name:d[4],color:d[5]}],c=g)}if(c<5){if(this.config.clickToHighlight){if(h[0].name in this.config.samplesClickedToHighlight)delete this.config.samplesClickedToHighlight[h[0].name];else if(this.config.clickToHighlight==="any"){var o=["red","darkblue","green","teal","olivedrab","orange","maroon","purple","blue","gold"],l=o[Math.floor(Math.random()*(o.length+1))];this.config.samplesClickedToHighlight[h[0].name]=l}else this.config.samplesClickedToHighlight[h[0].name]=this.config.clickToHighlight;this.trackView.repaintViews()}return h}}return[]}popupData(e,t){t===void 0&&(t=this.clickedFeatures(e));const n=[];return t.forEach(function(r){for(let s of Object.keys(r))La(r[s])&&n.push({name:s,value:r[s]})}),n}get supportsWholeGenome(){return!1}}function K9(i,e,t,n,r,s){const a=r-t,o=s-n,l=Math.abs(a*(n-e)-(t-i)*o),c=Math.sqrt(a*a+o*o);return c>0?l/c:0}class n1 extends mt{constructor(e,t){super(e,t),e.arcOrientation===!1?this.arcOrientation="DOWN":e.arcOrientation===!0?this.arcOrientation="UP":e.arcOrientation?this.arcOrientation=e.arcOrientation.toUpperCase():this.arcOrientation="UP",e.format==="bp"?this.featureSource=new Y9(e,t.genome):this.featureSource=new y0(e,t.genome)}async getFeatures(e,t,n){const r=this.visibilityWindow;return this.featureSource.getFeatures({chr:e,start:t,end:n,visibilityWindow:r})}draw(e){const t=e.context,n=Math.PI/2,r=e.pixelWidth,s=e.pixelHeight;e.viewportWidth;const a=e.bpPerPixel,o=e.bpStart,l=a,c=this.arcOrientation==="UP";de.fillRect(t,0,e.pixelTop,r,s,{fillStyle:"rgb(255, 255, 255)"});const h=e.features;if(h){e2(h,1);for(let f of h)if(f.startLeft){let d=Math.round((f.startLeft-o)/l),u=Math.round((f.startRight-o)/l),p=Math.round((f.endLeft-o)/l),m=Math.round((f.endRight-o)/l);t.fillStyle=f.color,t.strokeStyle=f.color,t.beginPath();let F=(d+m)/2,g=(m-d)/2,w=this.height,b=Math.PI+(Math.PI/2-n),y=2*Math.PI-(Math.PI/2-n);c?(t.arc(F,w,g,b,y),t.lineTo(p,w)):(w=0,t.arc(F,w,g,y,b),t.lineTo(m,w));const v=(u+p)/2,T=(p-u)/2,A=w;c?(t.arc(v,A,T,y,b,!0),t.lineTo(d,A)):(t.arc(v,A,T,b,y,!0),t.lineTo(p,A)),t.stroke(),t.fill(),f.drawState={x1:F,y1:w,r1:g,x2:v,y2:A,r2:T,sa:b,ea:y}}else{let d=Math.round((f.start-o)/l),u=Math.round((f.end-o)/l);t.strokeStyle=f.color,t.beginPath();let p=(d+u)/2,m=(u-d)/2,F=this.height,g=Math.PI+(Math.PI/2-n),w=2*Math.PI-(Math.PI/2-n);c?t.arc(p,F,m,g,w):(F=0,t.arc(p,F,m,w,g)),t.stroke(),f.drawState={x1:p,y1:F,r1:m,sa:g,ea:w}}}}clickedFeatures(e){const t=super.clickedFeatures(e),n=[];e2(t,-1);for(let r of t){const s=r.drawState,a=e.canvasX-s.x1,o=e.canvasY-s.y1,l=Math.sqrt(a*a+o*o),c=s.r1+3;let h,f;if(s.x2===void 0)h=l,f=s.r1-3;else{const d=e.canvasX-s.x2,u=e.canvasY-s.y2;h=Math.sqrt(d*d+u*u),f=s.r2-3}if(l<c&&h>f){n.push(r);break}}return n}popupData(e,t){if(t===void 0&&(t=this.clickedFeatures(e)),t&&t.length>0)return this.extractPopupData(t[0],this.getGenomeId())}menuItemList(){return[{name:"Toggle arc direction",click:function(){this.arcOrientation=this.arcOrientation==="UP"?"DOWN":"UP",this.trackView.repaintViews()}}]}}ke(n1,"defaults",{height:300,theta:Math.PI/2,arcOrientation:"UP"});function e2(i,e){i.sort(function(t,n){const r=t.score===void 0?-Number.MAX_VALUE:t.score,s=n.score===void 0?-Number.MAX_VALUE:n.score;return(e===void 0?1:e)*(r-s)})}class Y9{constructor(e,t){this.config=e,this.genome=t}async getFeatures({chr:e,start:t,end:n,bpPerPixel:r,visibilityWindow:s}){const a=this.genome;if(this.featureCache)return this.featureCache.queryFeatures(e,t,n);{const l=Le(this.config),c=await Se.loadByteArray(this.config.url,l);return this.featureCache=new Ns(o(c),a),this.featureCache.queryFeatures(e,t,n)}function o(l){if(!l)return null;const c=Qt(l);let h=!0,f;const d=[],u=[],p=[];for(;(f=c.nextLine())!==void 0;){const F=f.split("	");if(h&&f.startsWith("color:")){const g="rgb("+F[1]+","+F[2]+","+F[3]+")";d.push(g),F.length>4&&u.push(F[4])}else{h=!1;const g=F[0],w=Number.parseInt(F[1])-1,b=Number.parseInt(F[2])-1,y=Number.parseInt(F[3]),v=Number.parseInt(F[4]);var m=Number.parseInt(F[5]);const T=d[m];let A;w<=v?A={chr:g,startLeft:Math.min(w,b),startRight:Math.max(w,b),endLeft:Math.min(y,v),endRight:Math.max(y,v),color:T,score:m}:A={chr:g,startLeft:Math.min(y,v),startRight:Math.max(y,v),endLeft:Math.min(w,b),endRight:Math.max(w,b),color:T,score:m},A.start=A.startLeft,A.end=A.endRight,u.length>m&&(A.description=u[m]),p.push(A)}}return p}}}class r1{constructor(e){this.browser=e,this.type="ideogram",this.height=16,this.order=Number.MIN_SAFE_INTEGER,this.disableButtons=!0,this.ignoreTrackMenu=!0}computePixelHeight(e){return this.height}draw({context:e,referenceFrame:t,pixelWidth:n,pixelHeight:r,features:s}){const a=t.chr,o=t.genome.getChromosome(a);if(o===void 0||n<=0||r<=0||a.toLowerCase()==="all")return;const l=[];Z9({ctx:e,features:s,chr:a,referenceFrame:t,genome:t.genome,width:n,height:r,stainColors:l});const c=Math.round(t.bpPerPixel*n),h=t.start;let f=o.bpLength;const d=t.genome.getCytobands(a);if(d&&d.length>0&&d[d.length-1].end&&(f=Math.max(f,d[d.length-1].end),o.bpLength=f),c<f){const u=c/f,p=h/f;let m=Math.floor(p*n),F=Math.floor(u*n);m=Math.max(0,m),m=Math.min(n-F,m),e.save(),e.strokeStyle="red",e.lineWidth=F<2?1:2;const g=m+e.lineWidth/2;F=F<2?1:F-e.lineWidth;const w=e.lineWidth/2,b=r-e.lineWidth;e.strokeRect(g,w,F,b),e.restore()}}dispose(){this.trackView=void 0}}function Z9({ctx:i,chr:e,referenceFrame:t,genome:n,width:r,height:s,stainColors:a,features:o}){if(n===void 0)return;de.fillRect(i,0,0,r,s,{fillStyle:qe.greyScale(255)});const f=o;if(f){const d=0+s/2,u=[],p=[];if(f.length===0)return;const m=f[f.length-1].end,F=r/m;i.beginPath(),de.roundRect(i,.5,.5+0,r-2*.5,s-2*.5,(s-2*.5)/2,0,1),i.clip();for(let g=0;g<f.length;g++){const w=f[g],b=F*w.start,y=F*w.end;w.type==="c"?(w.name.charAt(0)==="p"?(u[0]=b,p[0]=s+0,u[1]=b,p[1]=0,u[2]=y,p[2]=d):(u[0]=y,p[0]=s+0,u[1]=y,p[1]=0,u[2]=b,p[2]=d),i.fillStyle="rgb(150, 0, 0)",i.strokeStyle="rgb(150, 0, 0)",de.polygon(i,u,p,1,0)):(i.fillStyle=X9(a,w),de.fillRect(i,b,1,y-b,s-2*1))}}i.strokeStyle=qe.greyScale(41),de.roundRect(i,.5,.5+0,r-2*.5,s-2*.5,(s-2*.5)/2,0,1)}function X9(i,e){if(e.type==="c")return"rgb(150, 10, 10)";var t=e.stain,n=230;e.type==="p"&&(n=Math.floor(230-t/100*230));var r=i[n];return r||(r="rgb("+n+","+n+","+n+")",i[n]=r),r}let s1=new Bs("Dark2");const J9=["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"];J9.forEach(i=>{s1.getColor(i)});class a1 extends mt{constructor(e,t){super(e,t)}init(e){super.init(e),this.type=e.type||"junctions",e._featureSource?(this.featureSource=e._featureSource,delete e._featureSource):this.featureSource=e.featureSource?e.featureSource:Wt(e,this.browser.genome)}async postInit(){if(!(typeof this.featureSource.getHeader=="function"&&(this.header=await this.featureSource.getHeader(),this.disposed)))return this.header&&this.setTrackProperties(this.header),this.visibilityWindow===void 0&&typeof this.featureSource.defaultVisibilityWindow=="function"&&(this.visibilityWindow=await this.featureSource.defaultVisibilityWindow()),this}get supportsWholeGenome(){return!1}async getFeatures(e,t,n,r){const s=this.visibilityWindow;return this.featureSource.getFeatures({chr:e,start:t,end:n,bpPerPixel:r,visibilityWindow:s})}computePixelHeight(e){return this.height}draw(e){const t=e.features,n=e.context,r=e.bpPerPixel,s=e.bpStart,a=e.pixelWidth,o=e.pixelHeight,l=s+a*r+1;if(this.isMergedTrack||de.fillRect(n,0,e.pixelTop,a,o,{fillStyle:"rgb(255, 255, 255)"}),t){const c={};c.referenceFrame=e.viewport.referenceFrame,c.referenceFrameStart=c.referenceFrame.start,c.referenceFrameEnd=c.referenceFrameStart+c.referenceFrame.toBP(e.viewport.getWidth()),c.featureZoomOutTracker={};for(let h of t)if(!(h.end<s)){if(h.start>l)break;this.renderJunction(h,s,r,o,n,c)}}else console.log("No feature list")}renderJunction(e,t,n,r,s,a){e.isVisible=!1;const o=Math.round((e.start-t)/n),l=Math.round((e.end-t)/n),c=(o+l)/2;if(l-o<=3){if(c in a.featureZoomOutTracker)return;a.featureZoomOutTracker[c]=!0}if(this.config.hideAnnotatedJunctions&&e.attributes.annotated_junction==="true"||this.config.hideUnannotatedJunctions&&e.attributes.annotated_junction==="false"||this.config.hideMotifs&&this.config.hideMotifs.includes(e.attributes.motif)||this.config.hideStrand===e.strand)return;if(this.config.minJunctionEndsVisible){let B=0;if(e.start>=a.referenceFrameStart&&e.start<=a.referenceFrameEnd&&(B+=1),e.end>=a.referenceFrameStart&&e.end<=a.referenceFrameEnd&&(B+=1),B<this.config.minJunctionEndsVisible)return}let h,f,d;if(e.attributes.uniquely_mapped&&(h=parseInt(e.attributes.uniquely_mapped),h<this.config.minUniquelyMappedReads||(f=parseInt(e.attributes.multi_mapped),d=h+f,d<this.config.minTotalReads)||d>0&&f/d>this.config.maxFractionMultiMappedReads||e.attributes.maximum_spliced_alignment_overhang&&parseInt(e.attributes.maximum_spliced_alignment_overhang)<this.config.minSplicedAlignmentOverhang))return;let u;if(e.attributes.num_samples_with_this_junction&&(u=parseInt(e.attributes.num_samples_with_this_junction),this.config.minSamplesWithThisJunction&&u<this.config.minSamplesWithThisJunction||this.config.maxSamplesWithThisJunction&&u>this.config.maxSamplesWithThisJunction||e.attributes.num_samples_total&&(e.attributes.percent_samples_with_this_junction=100*u/Number(e.attributes.num_samples_total),this.config.minPercentSamplesWithThisJunction&&(e.attributes.percent_samples_with_this_junction<this.config.minPercentSamplesWithThisJunction||e.attributes.percent_samples_with_this_junction>this.config.maxPercentSamplesWithThisJunction))))return;const p=this.margin,m=r,F=p+.5*m;let g=p;const b=p+m-10,y=(o+c)/2,v=(c+l)/2;let T=1;e.attributes.line_width?T=Number(e.attributes.line_width):(this.config.thicknessBasedOn===void 0||this.config.thicknessBasedOn==="numUniqueReads"?T=h:this.config.thicknessBasedOn==="numReads"?T=d:this.config.thicknessBasedOn==="numSamplesWithThisJunction"&&u!==void 0&&(T=u),T=1+Math.log(T+1)/Math.log(12));let A;this.config.bounceHeightBasedOn===void 0||this.config.bounceHeightBasedOn==="random"?A=(e.start+e.end)%7:this.config.bounceHeightBasedOn==="distance"?A=6*(e.end-e.start)/(a.referenceFrameEnd-a.referenceFrameStart):this.config.bounceHeightBasedOn==="thickness"&&(A=2*T),g+=m*Math.max(7-A,0)/10;let C;e.attributes.color?C=e.attributes.color:this.config.colorBy===void 0||this.config.colorBy==="numUniqueReads"?C=h>this.config.colorByNumReadsThreshold?"blue":"#AAAAAA":this.config.colorBy==="numReads"?C=d>this.config.colorByNumReadsThreshold?"blue":"#AAAAAA":this.config.colorBy==="isAnnotatedJunction"?C=e.attributes.annotated_junction==="true"?"#b0b0ec":"orange":this.config.colorBy==="strand"?C=e.strand==="+"?"#b0b0ec":"#ecb0b0":this.config.colorBy==="motif"?C=s1.getColor(e.attributes.motif):C="#AAAAAA";let k="";e.attributes.label?k=e.attributes.label.replace(/_/g," "):this.config.labelWith===void 0||this.config.labelWith==="uniqueReadCount"?k=h:this.config.labelWith==="totalReadCount"?k=d:this.config.labelWith==="numSamplesWithThisJunction"?u!==void 0&&(k=u):this.config.labelWith==="percentSamplesWithThisJunction"?e.attributes.percent_samples_with_this_junction!==void 0&&(k=e.attributes.percent_samples_with_this_junction.toFixed(0)+"%"):this.config.labelWith==="motif"&&e.attributes.motif!==void 0&&(k+=e.attributes.motif),this.config.labelWithInParen==="uniqueReadCount"?k+=" ("+h+")":this.config.labelWithInParen==="totalReadCount"?k+=" ("+d+")":this.config.labelWithInParen==="multiMappedReadCount"?f>0&&(k+=" (+"+f+")"):this.config.labelWithInParen==="numSamplesWithThisJunction"?u!==void 0&&(k+=" ("+u+")"):this.config.labelWithInParen==="percentSamplesWithThisJunction"?e.attributes.percent_samples_with_this_junction!==void 0&&(k+=" ("+e.attributes.percent_samples_with_this_junction.toFixed(0)+"%)"):this.config.labelWithInParen==="motif"&&e.attributes.motif!==void 0&&(k+=` ${e.attributes.motif}`),e.isVisible=!0,s.beginPath(),s.moveTo(o,b),s.bezierCurveTo(y,g,v,g,l,b),s.lineWidth=T,s.strokeStyle=C,s.stroke();const I=(B,M,N,x)=>{B.beginPath(),B.moveTo(M,N),B.lineTo(M-x/2,N-x),B.lineTo(M+x/2,N-x),B.lineTo(M,N),B.closePath(),B.fill()};if(e.attributes.left_shape||e.attributes.right_shape){s.fillStyle=C;const B=s.lineWidth>2?10:7;e.attributes.left_shape&&I(s,o,b,B),e.attributes.right_shape&&I(s,l,b,B)}s.fillText(k,c-s.measureText(k).width/2,(7*g+F)/8)}clickedFeatures(e){return super.clickedFeatures(e).filter(function(n){return n.isVisible&&n.attributes})}popupData(e,t){t===void 0&&(t=this.clickedFeatures(e));const n=e.genomicLocation,r=[];for(let s of t){const a=typeof s.popupData=="function"?s.popupData(n):this.extractPopupData(s._f||s,this.getGenomeId());a&&(r.length>0&&r.push("<hr/><hr/>"),Array.prototype.push.apply(r,a))}return r}dispose(){this.trackView=void 0}}ke(a1,"defaults",{margin:10,colorByNumReadsThreshold:5,height:100});const mo=new Map([["ideogram",(i,e)=>new r1(i,e)],["sequence",(i,e)=>new x0(i,e)],["feature",(i,e)=>new Ih(i,e)],["seg",(i,e)=>new ba(i,e)],["mut",(i,e)=>new ba(i,e)],["maf",(i,e)=>new ba(i,e)],["shoebox",(i,e)=>new ba(i,e)],["wig",(i,e)=>new b0(i,e)],["merged",(i,e)=>new Bh(i,e)],["alignment",(i,e)=>new fm(i,e)],["interaction",(i,e)=>new qc(i,e)],["interact",(i,e)=>new qc(i,e)],["variant",(i,e)=>new Kh(i,e)],["qtl",(i,e)=>new Xp(i,e)],["eqtl",(i,e)=>new Xp(i,e)],["gwas",(i,e)=>new j9(i,e)],["arc",(i,e)=>new n1(i,e)],["gcnv",(i,e)=>new W9(i,e)],["junction",(i,e)=>new a1(i,e)],["blat",(i,e)=>new IA(i,e)],["cnvpytor",(i,e)=>new zs(i,e)]]);function ex(i,e,t){let n;switch(i){case"annotation":case"genes":case"fusionjuncspan":case"snp":n="feature";break;case"seg":case"maf":case"mut":n="seg";break;case"junctions":case"splicejunctions":n="junction";break;default:n=i}return mo.has(n)?mo.get(n)(e,t):void 0}function tx(i,e){mo.set(i,(t,n)=>new e(t,n))}function ix(i,e){mo.set(i,e)}class nx{constructor(e,t){const r=new DOMParser().parseFromString(e,"text/xml");this.processRootNode(r,t);const s=r.getElementsByTagName("Resource"),a=r.getElementsByTagName("Track"),o=a&&a.length>0,l=[];this.tracks=l;const c=new Map;Array.from(s).forEach(function(h,f){var d={url:h.getAttribute("path"),indexURL:h.getAttribute("index"),order:f};c.set(d.url,d),o||l.push(d)}),o&&Array.from(a).forEach(function(h){const f=h.getElementsByTagName("Track");if(f&&f.length>0){const d={type:"merged",tracks:[]};Wl(h,d),l.push(d),Array.from(f).forEach(function(u){u.processed=!0;const p=u.getAttribute("id"),m=c.get(p);m&&(d.tracks.push(m),Wl(u,m),m.autoscale=!1,d.height=m.height)})}else if(!h.processed){const d=h.getAttribute("id"),u=c.get(d);u&&(l.push(u),Wl(h,u))}})}processRootNode(e,t){const n=e.getElementsByTagName("Session");!n||n.length;const r=n.item(0),s=r.getAttribute("genome"),a=r.getAttribute("locus"),o=r.getAttribute("ucscID");t&&t.hasOwnProperty(s)?this.genome=s:(this.reference={fastaURL:s},o&&(this.reference.id=o)),a&&(this.locus=a)}}function Wl(i,e){e.name=i.getAttribute("name");const t=i.getAttribute("color");t&&(e.color="rgb("+t+")");const n=i.getAttribute("altColor");t&&(e.altColor="rgb("+n+")");const r=i.getAttribute("height");r&&(e.height=parseInt(r));const s=i.getAttribute("autoScale");s&&(e.autoscale=s==="true");const a=i.getAttribute("autoscaleGroup");a&&(e.autoscaleGroup=a);const o=i.getAttribute("windowFunction");o&&(e.windowFunction=o);const l=i.getAttribute("visibilityWindow")||i.getAttribute("featureVisibilityWindow");l&&(e.visibilityWindow=l);const c=i.getAttribute("indexed");c&&(e.indexed=c==="true");const h=i.getAttribute("normalize");h&&(e.normalize=h==="true");const f=i.getElementsByTagName("DataRange");if(f.length>0){const d=f.item(0);e.min=Number(d.getAttribute("minimum")),e.max=Number(d.getAttribute("maximum")),e.logScale=d.getAttribute("type")==="LOG"}}class o1{constructor(e,t,n,r,s){this.genome=e,this.chr=t,this.start=n,this.end=r,this.bpPerPixel=s,this.id=Et()}get center(){return(this.start+this.end)/2}get locusSearchString(){return`${this.chr}:${this.start+1}-${this.end}`}extend(e){const t=Math.min(e.start,this.start),n=Math.max(e.end,this.end),r=(n-t)/(this.end-this.start);this.start=t,this.end=n,this.bpPerPixel*=r}calculateEnd(e){return this.start+this.bpPerPixel*e}calculateCenter(e){return this.start+this.bpPerPixel*e/2}calculateBPP(e,t){return(e-this.start)/t}set(e){this.chr=e.chr,this.start=e.start,this.bpPerPixel=e.bpPerPixel}toPixels(e){return e/this.bpPerPixel}toBP(e){return this.bpPerPixel*e}shift(e){this.start+=e,this.end+=e}shiftPixels(e,t,n){const r=this.start,s=e*this.bpPerPixel;return this.start+=s,n&&this.clampStart(t),this.end=this.start+t*this.bpPerPixel,r!==this.start}clampStart(e){const t=this.genome.getChromosome(this.chr).bpStart||0;if(this.start=Math.max(t,this.start),e){const{bpLength:n}=this.genome.getChromosome(this.chr),r=n-e*this.bpPerPixel;this.start>r&&(this.start=r)}}async zoomWithScaleFactor(e,t,n,r){const s=r===void 0?this.start+this.toBP(n/2):r,a=this.start,o=this.bpPerPixel,l=this.getChromosome().bpLength,c=t<1?e.minimumBases()/n:l/n;t<1?this.bpPerPixel=Math.max(this.bpPerPixel*t,c):this.bpPerPixel=Math.min(this.bpPerPixel*t,c);const h=this.bpPerPixel*n;this.start=s-.5*h,this.clampStart(n),this.end=this.start+h,(a!==this.start||o!==this.bpPerPixel)&&await e.updateViews(!0)}getChromosome(){return this.genome.getChromosome(this.chr)}getMultiLocusLabelBPLengthOnly(e){const t="&nbsp",n=Math.floor(this.start)+1,r=Math.round(this.start+this.bpPerPixel*e);return`${t}${this.chr}${t}${wc(r-n)}${t}`}getMultiLocusLabelLocusOnly(e){const t="&nbsp",{chr:n,start:r,end:s}=this.getPresentationLocusComponents(e);return`${t}${n}:${r}-${s}${t}`}getMultiLocusLabel(e){const t="&nbsp",{chr:n,start:r,end:s}=this.getPresentationLocusComponents(e),a=Math.floor(this.start)+1,o=Math.round(this.start+this.bpPerPixel*e);return`${t}${n}:${r}-${s}${t}${t}(${wc(o-a)})${t}`}getPresentationLocusComponents(e){if(this.chr==="all")return{chr:this.chr};{const t=He(Math.floor(this.start)+1),n=He(Math.round(this.start+this.bpPerPixel*e));return{chr:this.chr,start:t,end:n}}}getLocusString(){if(this.chr==="all")return"all";{const e=this.genome.getChromosomeDisplayName(this.chr),t=He(Math.floor(this.start)+1),n=He(Math.round(this.end));return`${e}:${t}-${n}`}}description(e){console.log(` ${e||""} referenceFrame - ${this.chr} bpp ${this.bpPerPixel.toFixed(3)} start ${He(Math.round(this.start))} end ${He(Math.round(this.end))} `)}overlaps(e){return this.chr===e.chr&&this.end>=e.start&&e.end>=this.start}}function rx(i,e,t,n,r,s){return i.map(a=>{const o=Object.assign({},a);if(t&&o.name&&(o.start=Math.max(0,o.start-t),o.end+=t),!s){const c=e.getChromosome(o.chr);Hg(c.bpLength,o,n)}return new o1(e,o.chr,o.start,o.end,(o.end-o.start)/r)})}const sx="3.0.8";function l1(){return sx}const ns={},t2=8;let Yc;function Zc(i,e){di.currentNavbarButtonClass(i)==="igv-navbar-text-button"&&(Yc=i.$navigation.get(0).querySelector(".igv-navbar-right-container").getBoundingClientRect().width);const n=ax(i,e);ve(i.zoomWidget.zoomContainer).removeClass(),ve(i.zoomWidget.zoomContainer).addClass(n.zoomContainer),i.fireEvent("navbar-resize",[n.navbarButton])}function ax(i,e){const t=i.isMultiLocusWholeGenomeView()||i.referenceFrameList&&yt.isWholeGenomeView(i.referenceFrameList[0].chr);t?i.windowSizePanel.hide():i.windowSizePanel.show();const{x:n,width:r}=i.$navigation.get(0).querySelector(".igv-navbar-left-container").getBoundingClientRect(),s=n+r,{x:a}=i.$navigation.get(0).querySelector(".igv-navbar-right-container").getBoundingClientRect(),o=a-s,l=di.currentNavbarButtonClass(i);return l==="igv-navbar-text-button"&&o<t2?ns.navbarButton="igv-navbar-icon-button":Yc&&l==="igv-navbar-icon-button"&&e-s-Yc>t2&&(ns.navbarButton="igv-navbar-text-button"),t?ns.zoomContainer="igv-zoom-widget-hidden":ns.zoomContainer=e>860?"igv-zoom-widget":"igv-zoom-widget-900",ns}const i2="Maximum sequence count exceeded";class ox{constructor(e,t){this.container=Fe({class:"igv-chromosome-select-widget-container"}),t.appendChild(this.container),this.select=document.createElement("select"),this.select.setAttribute("name","chromosome-select-widget"),this.container.appendChild(this.select),this.select.addEventListener("change",()=>{this.select.blur(),this.select.value!==""&&i2!==this.select.value&&e.search(this.select.value)}),this.showAllChromosomes=e.config.showAllChromosomes!==!1}show(){this.container.style.display="flex"}hide(){this.container.style.display="none"}update(e){const t=e.wgChromosomeNames||[];if(this.showAllChromosomes&&e.chromosomeNames.length>1){const n=new Set(t);let r=0;for(let s of e.chromosomeNames){if(++r===1e3){t.push(i2);break}n.has(s)||t.push(s)}}this.select.innerHTML="",e.showWholeGenomeView()&&t.unshift("all");for(let n of t){const r=document.createElement("option");r.setAttribute("value",n),r.innerText=e.getChromosomeDisplayName(n),this.select.appendChild(r)}}}class lx{constructor(e,t){this.container=Fe({class:"igv-windowsize-panel-container"}),e.appendChild(this.container),t.on("locuschange",n=>{this.updatePanel(n)}),this.browser=t}show(){this.container.style.display="block"}hide(){this.container.style.display="none"}updatePanel(e){const t=this.browser.calculateViewportWidth(this.browser.referenceFrameList.length);this.container.innerText=e.length===1?wc(Math.round(t*e[0].bpPerPixel)):""}}class cx{constructor(e,t){this.browser=t,this.columnContainer=e,this.horizontalGuide=Fe({class:"igv-cursor-guide-horizontal"}),e.appendChild(this.horizontalGuide),this.verticalGuide=Fe({class:"igv-cursor-guide-vertical"}),e.appendChild(this.verticalGuide),this.addMouseHandler(t),this.setVisibility(t.config.showCursorGuide)}addMouseHandler(e){this.boundMouseMoveHandler=t.bind(this),this.columnContainer.addEventListener("mousemove",this.boundMouseMoveHandler);function t(n){n.target.tagName;const{x:r,y:s}=xt(n,this.columnContainer);if(this.horizontalGuide.style.top=`${s}px`,n.target.tagName==="CANVAS"){const a=hx(n.target,"igv-viewport");if(a&&e.getRulerTrackView()){this.verticalGuide.style.left=`${r}px`;const o=e.root.querySelectorAll(".igv-column");let l;const c=a.parentElement;for(let h=0;h<o.length;h++)l===void 0&&c===o[h]&&(l=h);if(l!==void 0){const f=e.getRulerTrackView().viewports[l].mouseMove(n);if(f){const{start:d,bp:u,end:p}=f,m=(u-d)/(p-d);this.customMouseHandler&&this.customMouseHandler({start:d,bp:u,end:p,interpolant:m})}}}}}}removeMouseHandler(){this.columnContainer.removeEventListener("mousemove",this.boundMouseMoveHandler)}setVisibility(e){e===!0?this.show():this.hide()}show(){this.verticalGuide.style.display="block",this.horizontalGuide.style.display="block"}hide(){if(this.verticalGuide.style.display="none",this.horizontalGuide.style.display="none",this.browser.getRulerTrackView())for(let e of this.browser.getRulerTrackView().viewports)e.$tooltip.hide()}}function hx(i,e){for(;i.parentElement;){if(i.parentElement.classList.contains(e))return i.parentElement;i=i.parentElement}}const fx=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>cursor</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="cursor" stroke="#737373">
            <rect id="Rectangle-Copy-3" stroke-width="12" fill="#FFFFFF" x="6" y="6" width="613" height="613" rx="135"></rect>
            <g id="Group" transform="translate(5, 9)" stroke-width="24">
                <line x1="0.5" y1="212.5" x2="614.5" y2="212.5" id="Line"></line>
                <line x1="-115.5" y1="303.5" x2="490.5" y2="303.5" id="Line-Copy" transform="translate(187.5, 303.5) scale(-1, 1) rotate(90) translate(-187.5, -303.5)"></line>
            </g>
            <circle id="Oval" stroke-width="24" cx="191.5" cy="221.5" r="88.5"></circle>
        </g>
    </g>
</svg>`,dx=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>cursor hover</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="cursor-hover">
            <rect id="Rectangle-Copy-5" stroke="#737373" stroke-width="12" fill="#737373" x="6" y="6" width="613" height="613" rx="135"></rect>
            <g id="Group-Copy-2" transform="translate(5, 9)" stroke="#FFFFFF" stroke-width="24">
                <line x1="0.5" y1="212.5" x2="614.5" y2="212.5" id="Line"></line>
                <line x1="-115.5" y1="303.5" x2="490.5" y2="303.5" id="Line-Copy" transform="translate(187.5, 303.5) scale(-1, 1) rotate(90) translate(-187.5, -303.5)"></line>
            </g>
            <circle id="Oval" stroke="#FFFFFF" stroke-width="24" cx="191.5" cy="221.5" r="88.5"></circle>
        </g>
    </g>
</svg>`;class ux extends di{constructor(e,t){super(e,t,"Crosshairs",rn,fx,dx,e.doShowCursorGuide),this.button.addEventListener("mouseenter",()=>{e.doShowCursorGuide===!1&&this.setState(!0)}),this.button.addEventListener("mouseleave",()=>{e.doShowCursorGuide===!1&&this.setState(!1)});const n=()=>{e.doShowCursorGuide=!e.doShowCursorGuide,e.setCursorGuideVisibility(e.doShowCursorGuide),this.setState(e.doShowCursorGuide)};this.boundMouseClickHandler=n.bind(this),this.button.addEventListener("click",this.boundMouseClickHandler),this.setVisibility(e.config.showCursorTrackingGuideButton)}}const px=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>centerline</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="centerline" stroke="#737373">
            <rect id="Rectangle-Copy-2" stroke-width="12" fill="#FFFFFF" x="6" y="6" width="613" height="613" rx="135"></rect>
            <line x1="6.5" y1="312.5" x2="618.5" y2="312.5" id="Line-Copy" stroke-width="31" transform="translate(312.5, 312.5) scale(-1, 1) rotate(90) translate(-312.5, -312.5)"></line>
        </g>
    </g>
</svg>`,gx=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>centerline hover</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="centerline-hover">
            <rect id="Rectangle-Copy-9" stroke="#737373" stroke-width="12" fill="#737373" x="6" y="6" width="613" height="613" rx="135"></rect>
            <line x1="6.5" y1="312.5" x2="618.5" y2="312.5" id="Line-Copy" stroke="#FFFFFF" stroke-width="31" transform="translate(312.5, 312.5) scale(-1, 1) rotate(90) translate(-312.5, -312.5)"></line>
        </g>
    </g>
</svg>`;class mx extends di{constructor(e,t){super(e,t,"Center Line",rn,px,gx,e.config.showCenterGuide),this.button.addEventListener("mouseenter",()=>{e.doShowCenterLine===!1&&this.setState(!0)}),this.button.addEventListener("mouseleave",()=>{e.doShowCenterLine===!1&&this.setState(!1)});const n=()=>{e.doShowCenterLine=!e.doShowCenterLine,e.setCenterLineVisibility(e.doShowCenterLine),this.setState(e.doShowCenterLine)};this.boundMouseClickHandler=n.bind(this),this.button.addEventListener("click",this.boundMouseClickHandler),this.setVisibility(e.config.showCenterGuideButton)}}const wx=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>track labels</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="track-labels" fill="#FFFFFF" stroke="#737373">
            <rect id="Rectangle-Copy-27" stroke-width="12" x="6" y="6" width="613" height="613" rx="135"></rect>
            <g id="group" transform="translate(52.2778, 149.7248)" stroke-width="24">
                <path d="M448.444444,87.1189616 L448.444444,322.431462 L166.619398,322.431462 L19.2344421,204.775212 L166.619398,87.1189616 L448.444444,87.1189616 Z M244.028212,163.997434 C232.925565,163.997434 222.874656,168.493347 215.598982,175.760254 C208.318067,183.032394 203.815972,193.079106 203.815972,204.175675 C203.815972,215.272243 208.318067,225.318955 215.598982,232.591095 C222.874656,239.858002 232.925565,244.353915 244.028212,244.353915 C255.130858,244.353915 265.181767,239.858002 272.457442,232.591095 C279.738356,225.318955 284.240451,215.272243 284.240451,204.175675 C284.240451,193.079106 279.738356,183.032394 272.457442,175.760254 C265.181767,168.493347 255.130858,163.997434 244.028212,163.997434 Z" id="backdrop"></path>
                <path d="M495.232604,12 L495.232604,264.550423 L193.616935,264.550423 L35.4455183,138.275212 L193.616935,12 L495.232604,12 Z M168.133512,95.1660194 C156.441871,95.1660194 145.858581,99.8943121 138.197214,107.534302 C130.523695,115.18641 125.780417,125.758499 125.780417,137.434423 C125.780417,149.110347 130.523695,159.682435 138.197214,167.334543 C145.858581,174.974533 156.441871,179.702826 168.133512,179.702826 C179.825153,179.702826 190.408443,174.974533 198.06981,167.334543 C205.743329,159.682435 210.486607,149.110347 210.486607,137.434423 C210.486607,125.758499 205.743329,115.18641 198.06981,107.534302 C190.408443,99.8943121 179.825153,95.1660194 168.133512,95.1660194 Z" id="hero"></path>
            </g>
        </g>
    </g>
</svg>`,bx=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>track labels hover</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="track-labels-hover" stroke="#737373">
            <rect id="Rectangle-Copy-29" stroke-width="12" fill="#737373" x="6" y="6" width="613" height="613" rx="135"></rect>
            <g id="group" transform="translate(52.2778, 149.7248)" fill="#FFFFFF" stroke-width="24">
                <path d="M448.444444,85.1189616 L448.444444,320.431462 L166.619398,320.431462 L19.2344421,202.775212 L166.619398,85.1189616 L448.444444,85.1189616 Z M244.028212,161.997434 C232.925565,161.997434 222.874656,166.493347 215.598982,173.760254 C208.318067,181.032394 203.815972,191.079106 203.815972,202.175675 C203.815972,213.272243 208.318067,223.318955 215.598982,230.591095 C222.874656,237.858002 232.925565,242.353915 244.028212,242.353915 C255.130858,242.353915 265.181767,237.858002 272.457442,230.591095 C279.738356,223.318955 284.240451,213.272243 284.240451,202.175675 C284.240451,191.079106 279.738356,181.032394 272.457442,173.760254 C265.181767,166.493347 255.130858,161.997434 244.028212,161.997434 Z" id="backdrop"></path>
                <path d="M495.232604,12 L495.232604,264.550423 L193.616935,264.550423 L35.4455183,138.275212 L193.616935,12 L495.232604,12 Z M168.133512,95.1660194 C156.441871,95.1660194 145.858581,99.8943121 138.197214,107.534302 C130.523695,115.18641 125.780417,125.758499 125.780417,137.434423 C125.780417,149.110347 130.523695,159.682435 138.197214,167.334543 C145.858581,174.974533 156.441871,179.702826 168.133512,179.702826 C179.825153,179.702826 190.408443,174.974533 198.06981,167.334543 C205.743329,159.682435 210.486607,149.110347 210.486607,137.434423 C210.486607,125.758499 205.743329,115.18641 198.06981,107.534302 C190.408443,99.8943121 179.825153,95.1660194 168.133512,95.1660194 Z" id="hero"></path>
            </g>
        </g>
    </g>
</svg>`;class Fx extends di{constructor(e,t){super(t,e,"Track Labels",rn,wx,bx,t.config.showTrackLabels),this.button.addEventListener("mouseenter",()=>{t.doShowTrackLabels===!1&&this.setState(!0)}),this.button.addEventListener("mouseleave",()=>{t.doShowTrackLabels===!1&&this.setState(!1)});const n=()=>{t.doShowTrackLabels=!t.doShowTrackLabels,t.setTrackLabelVisibility(t.doShowTrackLabels),this.setState(t.doShowTrackLabels)};this.boundMouseClickHandler=n.bind(this),this.button.addEventListener("click",this.boundMouseClickHandler),this.setVisibility(t.config.showTrackLabelButton)}}const yx=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>sample names</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="sample-names" stroke="#737373">
            <rect id="Rectangle-Copy-13" stroke-width="12" fill="#FFFFFF" x="6" y="6" width="613" height="613" rx="135"></rect>
            <line x1="80" y1="465" x2="541" y2="464.5" id="Line-3-Copy-3" stroke-width="32"></line>
            <line x1="80" y1="312.5" x2="542" y2="313" id="Line-3" stroke-width="32"></line>
            <line x1="80" y1="158" x2="541" y2="158" id="Line-3-Copy" stroke-width="32"></line>
        </g>
    </g>
</svg>`,Ax=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>sample names hover</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="sample-names-hover">
            <rect id="Rectangle-Copy-18" stroke="#737373" stroke-width="12" fill="#737373" x="6" y="6" width="613" height="613" rx="135"></rect>
            <line x1="80" y1="465" x2="541" y2="464.5" id="Line-3-Copy-3" stroke="#FFFFFF" stroke-width="32" fill="#FFFFFF"></line>
            <line x1="80" y1="312.5" x2="542" y2="313" id="Line-3" stroke="#FFFFFF" stroke-width="32" fill="#FFFFFF"></line>
            <line x1="80" y1="158" x2="541" y2="158" id="Line-3-Copy" stroke="#FFFFFF" stroke-width="32" fill="#FFFFFF"></line>
        </g>
    </g>
</svg>`;class vx extends di{constructor(e,t){super(t,e,"Sample Names",Av,yx,Ax,t.config.showSampleNames),this.button.addEventListener("mouseenter",()=>{t.showSampleNames===!1&&this.setState(!0)}),this.button.addEventListener("mouseleave",()=>{t.showSampleNames===!1&&this.setState(!1)}),this.button.addEventListener("click",()=>{this.performClickWithState(t,void 0)}),t.config.showSampleNameButton===!0?this.show():this.hide()}performClickWithState(e,t){e.showSampleNames=t===void 0?!e.showSampleNames:t;const n=e.columnContainer.querySelector(".igv-sample-name-column");n.style.display=e.showSampleNames===!1?"none":"flex",this.setState(e.showSampleNames),e.layoutChange()}}const _x=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>sample info</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="sample-info">
            <rect id="Rectangle-Copy-6" stroke="#737373" stroke-width="12" fill="#FFFFFF" x="6" y="6" width="613" height="613" rx="135"></rect>
            <g id="Group-2" transform="translate(8, 149)">
                <rect id="Rectangle" fill="#8DD3C7" x="0" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy" fill="#FBB4AE" x="102" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-8" fill="#7FC97F" x="204" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#ADE2CF" x="306" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#E41A1C" x="408" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#3F70AE" x="510" y="0" width="102" height="102"></rect>
            </g>
            <g id="Group-2-Copy" transform="translate(8, 251)">
                <rect id="Rectangle" fill="#E41A1C" x="0" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy" fill="#377EB8" x="102" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-8" fill="#FDB46B" x="204" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#BC80BD" x="306" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#FFFFB3" x="408" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#ADE2CF" x="510" y="0" width="102" height="102"></rect>
            </g>
            <g id="Group-2-Copy-2" transform="translate(314, 404) scale(-1, 1) translate(-314, -404)translate(8, 353)">
                <rect id="Rectangle" fill="#1B9E77" x="0" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy" fill="#377EB8" x="102" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-8" fill="#FDB46B" x="204" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#BAD1E9" x="306" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#4DAF4A" x="408" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#CBF03E" x="510" y="0" width="102" height="102"></rect>
            </g>
            <rect id="Rectangle-Copy-10" stroke="#737373" stroke-width="12" x="6" y="6" width="613" height="613" rx="135"></rect>
        </g>
    </g>
</svg>`,Cx=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>sample info hover</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="sample-info-hover">
            <rect id="Rectangle-Copy-14" stroke="#737373" stroke-width="12" fill="#737373" x="6" y="6" width="613" height="613" rx="135"></rect>
            <g id="row-2" transform="translate(314, 404) scale(-1, 1) translate(-314, -404)translate(8, 353)">
                <rect id="Rectangle" fill="#1B9E77" x="0" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy" fill="#377EB8" x="102" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-8" fill="#FDB46B" x="204" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#BAD1E9" x="306" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#4DAF4A" x="408" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#CBF03E" x="510" y="0" width="102" height="102"></rect>
            </g>
            <g id="row-1" transform="translate(8, 251)">
                <rect id="Rectangle" fill="#E41A1C" x="0" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy" fill="#377EB8" x="102" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-8" fill="#FDB46B" x="204" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#BC80BD" x="306" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#FFFFB3" x="408" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#ADE2CF" x="510" y="0" width="102" height="102"></rect>
            </g>
            <g id="row-0" transform="translate(8, 149)">
                <rect id="Rectangle" fill="#8DD3C7" x="0" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy" fill="#FBB4AE" x="102" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-8" fill="#7FC97F" x="204" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#ADE2CF" x="306" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#E41A1C" x="408" y="0" width="102" height="102"></rect>
                <rect id="Rectangle-Copy-7" fill="#3F70AE" x="510" y="0" width="102" height="102"></rect>
            </g>
            <rect id="Rectangle-Copy-15" stroke="#737373" stroke-width="12" x="6" y="6" width="613" height="613" rx="135"></rect>
            <rect id="scrim" fill="#000000" style="mix-blend-mode: hue;" x="8" y="149" width="612" height="306"></rect>
        </g>
    </g>
</svg>`;class xx extends di{constructor(e,t){super(t,e,"Sample Info",rn,_x,Cx,!1),this.showSampleInfo=!1,this.button.addEventListener("mouseenter",()=>{this.showSampleInfo===!1&&this.setState(!0)}),this.button.addEventListener("mouseleave",()=>{this.showSampleInfo===!1&&this.setState(!1)}),this.button.addEventListener("click",()=>{this.performClickWithState(t,void 0)})}performClickWithState(e,t){this.showSampleInfo=t===void 0?!this.showSampleInfo:t;const n=e.columnContainer.querySelector(".igv-sample-info-column");n.style.display=this.showSampleInfo===!1?"none":"flex",this.setState(this.showSampleInfo),e.layoutChange()}setButtonVisibility(e){this.showSampleInfo=e,this.setState(this.showSampleInfo),this.showSampleInfo===!0?this.show():this.hide()}}const kx=0;let Xc=23,n2=0;const an=function(i,e){this.browser=i,this.zoomContainer=Fe({class:"igv-zoom-widget"}),e.appendChild(this.zoomContainer),this.zoomOutButton=Fe(),this.zoomContainer.appendChild(this.zoomOutButton),this.zoomOutButton.appendChild(Pi("minus-circle")),this.zoomOutButton.addEventListener("click",()=>{i.zoomOut()});const t=Fe();this.zoomContainer.appendChild(t),this.slider=document.createElement("input"),this.slider.type="range",this.slider.min=`${kx}`,this.slider.max=`${Xc}`,t.appendChild(this.slider),this.slider.addEventListener("change",n=>{n.preventDefault(),n.stopPropagation();const r=i.referenceFrameList[0],{bpLength:s}=r.genome.getChromosome(r.chr),{end:a,start:o}=r,l=a-o,c=Math.pow(2,n.target.valueAsNumber),h=s/c;i.zoomWithScaleFactor(h/l)}),this.zoomInButton=Fe(),this.zoomContainer.appendChild(this.zoomInButton),this.zoomInButton.appendChild(Pi("plus-circle")),this.zoomInButton.addEventListener("click",()=>{i.zoomIn()}),i.on("locuschange",n=>{this.browser.isMultiLocusMode()?this.disable():(this.enable(),this.update(n))})};an.prototype.update=function(i){const e=i[0],{bpLength:t}=e.genome.getChromosome(e.chr),{start:n,end:r}=e;Xc=Math.ceil(Math.log2(t/this.browser.minimumBases())),this.slider.max=`${Xc}`;const s=t/(r-n);n2=Math.log2(s),this.slider.value=`${Math.round(n2)}`};an.prototype.enable=function(){this.slider.disabled=!1};an.prototype.disable=function(){this.slider.disabled=!0};an.prototype.hide=function(){this.zoomContainer.style.display="none"};an.prototype.show=function(){this.zoomContainer.style.display="block"};an.prototype.hideSlider=function(){this.slider.style.display="none"};an.prototype.showSlider=function(){this.slider.style.display="block"};class Ix{constructor(e,t){this.parent=e,this.popover=Fe({class:"igv-ui-dropdown"}),e.appendChild(this.popover),this.popoverContent=Fe(),this.popover.appendChild(this.popoverContent),this.popover.style.display="none",this.shim=t}configure(e){if(e.length===0)return;const t=bc(e,this.popover);for(const{object:n}of t)this.popoverContent.appendChild(n)}present(e){this.popover.style.display="block";let{x:t,y:n}=xt(e,this.parent);this.popover.style.left=`${t+this.shim.left}px`,this.popover.style.top=`${n+this.shim.top}px`}_present(e){this.popover.style.display="block";let{x:t,y:n,width:r}=xt(e,this.parent);t+=this.shim.left,n+=this.shim.top,this.popover.style.top=`${n}px`;const{width:s}=this.popover.getBoundingClientRect(),a=t+s,o=a-r;this.popover.style.left=`${a>r?t-o:t}px`}dismiss(){this.popover.style.display="none"}}const Ex=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>save image</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="save-image">
            <rect id="border" stroke="#737373" stroke-width="12" fill="#FFFFFF" x="6" y="6" width="613" height="613" rx="135"></rect>
            <g id="frame" transform="translate(66, 66)" fill="#737373" fill-rule="nonzero">
                <path d="M54.75,493 C39.69375,493 26.8046875,487.639062 16.0828125,476.917187 C5.3609375,466.195312 0,453.30625 0,438.25 L0,274 L54.75,274 L54.75,438.25 L219,438.25 L219,493 L54.75,493 Z" id="Path"></path>
                <path d="M274,493 L274,438.25 L438.25,438.25 L438.25,274 L493,274 L493,438.25 C493,453.30625 487.639062,466.195312 476.917187,476.917187 C466.195312,487.639062 453.30625,493 438.25,493 L274,493 Z" id="Path"></path>
                <path d="M0,219 L0,54.75 C0,39.69375 5.3609375,26.8046875 16.0828125,16.0828125 C26.8046875,5.3609375 39.69375,0 54.75,0 L219,0 L219,54.75 L54.75,54.75 L54.75,219 L0,219 Z" id="Path"></path>
                <path d="M438.25,219 L438.25,54.75 L274,54.75 L274,0 L438.25,0 C453.30625,0 466.195312,5.3609375 476.917187,16.0828125 C487.639062,26.8046875 493,39.69375 493,54.75 L493,219 L438.25,219 Z" id="Path"></path>
            </g>
            <rect id="border-hold-out-matte" fill="#FFFFFF" x="91" y="90" width="444" height="444" rx="38"></rect>
            <g id="artwork" transform="translate(148, 176)" fill="#737373" fill-rule="nonzero">
                <polygon id="Path" points="0 273 82.25 163.4 143.9375 245.6 226.1875 136 329 273"></polygon>
                <path d="M260,82 C248.155556,82 238.361111,78.1277778 230.616667,70.3833333 C222.872222,62.6388889 219,52.8444444 219,41 C219,29.1555556 222.872222,19.3611111 230.616667,11.6166667 C238.361111,3.87222222 248.155556,0 260,0 C271.844444,0 281.638889,3.87222222 289.383333,11.6166667 C297.127778,19.3611111 301,29.1555556 301,41 C301,52.8444444 297.127778,62.6388889 289.383333,70.3833333 C281.638889,78.1277778 271.844444,82 260,82 Z" id="Path"></path>
            </g>
        </g>
    </g>
</svg>`,Sx=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>save image</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="save-image">
            <rect id="border" stroke="#737373" stroke-width="12" fill="#FFFFFF" x="6" y="6" width="613" height="613" rx="135"></rect>
            <g id="frame" transform="translate(66, 66)" fill="#737373" fill-rule="nonzero">
                <path d="M54.75,493 C39.69375,493 26.8046875,487.639062 16.0828125,476.917187 C5.3609375,466.195312 0,453.30625 0,438.25 L0,274 L54.75,274 L54.75,438.25 L219,438.25 L219,493 L54.75,493 Z" id="Path"></path>
                <path d="M274,493 L274,438.25 L438.25,438.25 L438.25,274 L493,274 L493,438.25 C493,453.30625 487.639062,466.195312 476.917187,476.917187 C466.195312,487.639062 453.30625,493 438.25,493 L274,493 Z" id="Path"></path>
                <path d="M0,219 L0,54.75 C0,39.69375 5.3609375,26.8046875 16.0828125,16.0828125 C26.8046875,5.3609375 39.69375,0 54.75,0 L219,0 L219,54.75 L54.75,54.75 L54.75,219 L0,219 Z" id="Path"></path>
                <path d="M438.25,219 L438.25,54.75 L274,54.75 L274,0 L438.25,0 C453.30625,0 466.195312,5.3609375 476.917187,16.0828125 C487.639062,26.8046875 493,39.69375 493,54.75 L493,219 L438.25,219 Z" id="Path"></path>
            </g>
            <rect id="border-hold-out-matte" fill="#FFFFFF" x="91" y="90" width="444" height="444" rx="38"></rect>
            <g id="artwork" transform="translate(148, 176)" fill="#737373" fill-rule="nonzero">
                <polygon id="Path" points="0 273 82.25 163.4 143.9375 245.6 226.1875 136 329 273"></polygon>
                <path d="M260,82 C248.155556,82 238.361111,78.1277778 230.616667,70.3833333 C222.872222,62.6388889 219,52.8444444 219,41 C219,29.1555556 222.872222,19.3611111 230.616667,11.6166667 C238.361111,3.87222222 248.155556,0 260,0 C271.844444,0 281.638889,3.87222222 289.383333,11.6166667 C297.127778,19.3611111 301,29.1555556 301,41 C301,52.8444444 297.127778,62.6388889 289.383333,70.3833333 C281.638889,78.1277778 271.844444,82 260,82 Z" id="Path"></path>
            </g>
        </g>
    </g>
</svg>`;class Nx extends di{constructor(e,t){super(t,e,"Save Image",rn,Ex,Sx,!1),this.button.addEventListener("mouseenter",()=>this.setState(!0)),this.button.addEventListener("mouseleave",()=>{for(const r of this.button.querySelectorAll("div"))if(r.style.display==="block")return;this.setState(!1)}),this.dropdown=new Ix(this.button.parentNode,{top:24,left:-88});const n=[{label:"Save as SVG",click:r=>{this.browser.saveSVGtoFile("igvjs.svg"),this.dropdown.dismiss()}},{label:"Save as PNG",click:r=>{this.browser.savePNGtoFile("igvjs.png"),this.dropdown.dismiss()}}];this.dropdown.configure(n),this.button.addEventListener("click",r=>{let s;(r.target===this.button||r.target.closest("svg")&&r.target.closest("div")===this.button)&&(s=!0),s===!0&&(this.dropdown.popover.style.display==="none"?this.dropdown.present(r):this.dropdown.dismiss())}),this.setVisibility(t.config.showSVGButton)}navbarResizeHandler(e){this.dropdown.dismiss(),super.navbarResizeHandler(e)}}const Kl={createColumns:(i,e)=>{for(let t=0;t<e;t++)t===0||i.appendChild(Fe({class:"igv-column-shim"})),Wi(i,"igv-column")},removeColumnAtIndex:(i,e)=>{const t=i===0?e.nextElementSibling:e.previousElementSibling;e.remove(),t.remove()},insertAfter:i=>{const e=Fe({class:"igv-column-shim"});Td(e,i);const t=Fe({class:"igv-column"});return Td(t,e),t},insertBefore:(i,e)=>{for(let t=0;t<e;t++){const n=Fe({class:"igv-column"});if(Bd(n,i),e>1&&t>0){const r=Fe({class:"igv-column-shim"});Bd(r,n)}}},indexOfColumn:(i,e)=>{const t=i.querySelectorAll(".igv-column");for(let n=0;n<t.length;n++)if(t[n]===e)return n}};class Bx{constructor(e,t,n){this.browser=e,this.referenceFrame=t,this.column=n,this.container=Fe({class:"igv-center-line"}),n.appendChild(this.container),e.doShowCenterLine?this.show():this.hide()}repaint(){if(this.referenceFrame)if(1/this.referenceFrame.bpPerPixel>1){const t=Math.floor(this.referenceFrame.toPixels(1));this.container.style.width=`${t}px`,this.container.classList.remove("igv-center-line-thin"),this.container.classList.add("igv-center-line-wide")}else this.container.style.width="1px",this.container.classList.remove("igv-center-line-wide"),this.container.classList.add("igv-center-line-thin")}show(){this.isVisible=!0,this.container.style.display="block",this.repaint()}hide(){this.isVisible=!1,this.container.style.display="none"}resize(){this.repaint()}}const ea=function(i,e){this.button=Fe({class:"igv-navbar-button"}),i.appendChild(this.button),this.button.textContent="circular view",this.button.addEventListener("click",()=>{e.circularViewVisible=!e.circularViewVisible}),this.browser=e,this.setVisibility(e.config.showCircularViewButton),this.setState(e.circularViewVisible)};ea.prototype.setVisibility=function(i){i===!0?this.show():this.hide()};ea.prototype.setState=function(i){i===!0?this.button.classList.add("igv-navbar-button-clicked"):this.button.classList.remove("igv-navbar-button-clicked")};ea.prototype.show=function(){this.button.style.display="block",this.setState(this.browser.circularViewVisible)};ea.prototype.hide=function(){this.button.style.display="none"};const Tx=function(i,e,t){const n=Fe({class:"igv-navbar-button"});i.append(n),n.textContent=t.label,n.addEventListener("click",()=>t.callback(e))},Mx=1e6,Rx=25e3;class Dx{constructor(e,t){this.browser=e,this.container=Fe({class:"igv-roi-menu"}),t.appendChild(this.container);const n=Fe();this.container.appendChild(n),Dn(n,()=>this.container.style.display="none"),this.body=Fe(),this.container.appendChild(this.body),this.container.style.display="none"}async present(e,t,n,r,s,a){const o=this.menuItems(e,t,n,r,s,a);this.browser.menuPopup.presentTrackContextMenu(n,o)}menuItems(e,t,n,r,s,a){const o=e.name?[`<b>${e.name}</b><br/>`]:[];return"name"in t&&o.push(`<b>ROI Set: ${t.name}</b>`),o.length>0&&o.push("<hr/>"),t.isUserDefined&&o.push({label:"Set description ...",click:()=>{const l=()=>{const h=this.browser.inputDialog.value||"";e.name=h.trim(),this.browser.roiManager.repaintTable()},c={label:"Description",value:e.name||"",callback:l};this.browser.inputDialog.present(c,n)}}),To()&&e.end-e.start<Mx&&o.push({label:"Copy reference sequence",click:async()=>{this.container.style.display="none";let l=await this.browser.genome.getSequence(e.chr,e.start,e.end);l||(l="Unknown sequence");try{await navigator.clipboard.writeText(l)}catch(c){console.error(c),this.browser.alert.present(`error copying sequence to clipboard ${c}`)}}}),e.end-e.start<=Rx&&o.push({label:"BLAT reference sequence",click:async()=>{this.container.style.display="none";const{chr:l,start:c,end:h}=e;let f=await this.browser.genome.getSequence(l,c,h);if(f){const d=`blat: ${l}:${c+1}-${h}`,u=`blat: ${l}:${c+1}-${h}`;us({sequence:f,browser:this.browser,name:d,title:u})}}}),t.isUserDefined&&o.push("<hr/>",{label:"Delete",click:async()=>{t.removeFeature(e);const l=await t.getAllFeatures();Object.keys(l).length===0&&r.deleteUserDefinedROISet(),r.deleteRegionWithKey(a.dataset.region,s),r.repaintTable()}}),o}dispose(){this.container.innerHTML=""}}class wo extends _0{constructor(e){const t={browser:e,parent:e.columnContainer,headerTitle:"Regions of Interest",dismissHandler:()=>e.roiTableControl.buttonHandler(!1),gotoButtonHandler:wo.gotoButtonHandler};t.columnFormat=wo.getColumnFormatConfiguration(!0),super(Object.assign({width:"640px"},t))}tableRowDOM(e){const t=Fe({class:"igv-roi-table-row"}),{setName:n,feature:r}=e;t.dataset.region=c1(r.chr,r.start,r.end);let s=[r.chr,He(r.start),He(r.end),r.name||"",n];this.columnFormat.length===4&&(s=s.slice(0,4));for(let a=0;a<s.length;a++){const o=Fe();t.appendChild(o),o.style.width=this.columnFormat[a].width,o.innerText=s[a]}return this.tableRowDOMHelper(t),t}renderTable(e){if(Array.from(this.tableRowContainer.querySelectorAll(".igv-roi-table-row")).forEach(t=>t.remove()),e.length>0){const t=e.sort((n,r)=>n.feature.chr.localeCompare(r.feature.chr)||n.feature.start-r.feature.start||n.feature.end-r.feature.end);for(let n of t){const r=this.tableRowDOM(n);this.tableRowContainer.appendChild(r)}}}set footerDOM(e){super.footerDOM=e,this.gotoButton.textContent="Go to selected region(s)";const t=Fe({class:"igv-roi-table-button"});this._footerDOM.appendChild(t),t.id="igv-roi-hide-show-button",t.textContent="Copy Sequence",t.title="One region only of max size 1 mb",this.copySequenceButton=t,Yl(this.copySequenceButton,!1);async function n(a){a.preventDefault(),a.stopPropagation();const o=this.tableDOM.querySelectorAll(".igv-roi-table-row-selected");if(o.length>0){const l=[];for(let c of o){const{locus:h}=qa(c.dataset.region);l.push(h)}for(let c of this.tableDOM.querySelectorAll(".igv-roi-table-row"))c.classList.remove("igv-roi-table-row-selected");if(this.setTableRowSelectionState(!1),l.length>0){const{chr:c,start:h,end:f}=Kc(l[0],this.browser.isSoftclipped()),d=await this.browser.genome.getSequence(c,h,f);await navigator.clipboard.writeText(d)}}}this.boundCopySequenceButtonHandler=n.bind(this),this.copySequenceButton.addEventListener("click",this.boundCopySequenceButtonHandler);const r=Fe({class:"igv-roi-table-button"});this._footerDOM.appendChild(r),r.id="igv-roi-hide-show-button",r.textContent="Hide all ROIs",this.toggleROIButton=r;function s(a){a.preventDefault(),a.stopPropagation(),this.browser.roiManager.toggleROIs()}this.boundToggleDisplayButtonHandler=s.bind(this),this.toggleROIButton.addEventListener("click",this.boundToggleDisplayButtonHandler)}setROIVisibility(e){const t=this.browser.columnContainer.querySelectorAll(".igv-roi-region");for(let n=0;n<t.length;n++){const r=t[n];e===!1?Lx(r,0):r.style.backgroundColor=r.dataset.color}this.toggleROIButton.textContent=e===!1?"Show all ROIs":"Hide all ROIs"}setTableRowSelectionState(e){super.setTableRowSelectionState(e);const t=this.tableDOM.querySelectorAll(".igv-roi-table-row-selected");if(t.length>0&&t.length<2){const{locus:n}=qa(t[0].dataset.region),{chr:r,start:s,end:a}=Kc(n,this.browser.isSoftclipped());Yl(this.copySequenceButton,a-s<1e6)}else Yl(this.copySequenceButton,!1)}dispose(){document.removeEventListener("click",this.boundGotoButtonHandler),document.removeEventListener("click",this.boundCopySequenceButtonHandler),document.removeEventListener("click",this.boundToggleDisplayButtonHandler),this.browser.roiTableControl.buttonHandler(!1),super.dispose()}static getColumnFormatConfiguration(e){return e===!0?[{label:"Chr",width:"20%"},{label:"Start",width:"15%"},{label:"End",width:"15%"},{label:"Description",width:"30%"},{label:"ROI Set",width:"20%"}]:[{label:"Chr",width:"25%"},{label:"Start",width:"20%"},{label:"End",width:"20%"},{label:"Description",width:"35%"}]}static gotoButtonHandler(e){e.stopPropagation();const t=this.tableDOM.querySelectorAll(".igv-roi-table-row-selected"),n=[];for(let r of t){const{locus:s}=qa(r.dataset.region);n.push(s)}for(let r of this.tableDOM.querySelectorAll(".igv-roi-table-row"))r.classList.remove("igv-roi-table-row-selected");this.setTableRowSelectionState(!1),n.length>0&&this.browser.search(n.join(" "))}}function Yl(i,e){i.style.pointerEvents=e?"auto":"none",i.style.color=Lt(e?"licorice":"silver"),i.style.borderColor=Lt(e?"licorice":"silver")}function Lx(i,e){const n=window.getComputedStyle(i).backgroundColor.match(/[\d.]+/g);n.length===3&&n.push(1),n[3]=e,i.style.backgroundColor=`rgba(${n.join(", ")})`}class zx{constructor(e){this.browser=e,this.roiMenu=new Dx(e,e.columnContainer),this.roiTable=new wo(e,e.columnContainer),this.top=0,this.roiSets=[],this.boundLocusChangeHandler=Hx.bind(this),e.on("locuschange",this.boundLocusChangeHandler);const t=()=>{const n=e.findTracks(h=>new Set(["ideogram","ruler"]).has(h.type)),[r,s]=n.map(h=>h.trackView.viewports[0].$viewport.get(0)).map(h=>I3(h)),a=r?r.height:0,o=s?s.height:0,l=e.columnContainer.querySelectorAll(".igv-roi-region"),c=-.5;if(l)for(const h of l)h.style.marginTop=`${a+o+c}px`};this.observer=new MutationObserver(t),this.observer.observe(e.columnContainer,{attributes:!0,childList:!0,subtree:!0})}async reset(){this.roiSets.length>0&&this.browser.roiTableControl.setVisibility(!0);const e=this.roiSets.map(n=>this.renderROISet({browser:this.browser,pixelTop:this.top,roiSet:n}));e.length>0&&await Promise.all(e);const t=await this.getTableRecords();if(this.roiTable.renderTable(t),this.roiSets.length>0){const n=this.roiSets[0].isVisible;this.roiTable.setROIVisibility(n)}}async loadROI(e,t){const n=Array.isArray(e)?e:[e];for(let r of n)!r.name&&r.url&&(r.name=await Bo(r.url)),r.url&&!r.format&&(r.format=await am(r)),this.roiSets.push(new hu(r,t));await this.reset()}clearROIs(){this.roiTable.clearTable();const e=this.browser.columnContainer.querySelectorAll(".igv-roi-region");for(let t of e)t.remove();for(let t of this.roiSets)t.dispose();this.roiSets=[]}async getTableRecords(){const e=[];for(let t of this.roiSets){const n=t.name||"",r=await t.getAllFeatures();for(let s of Object.keys(r))for(let a of r[s])e.push({setName:n,feature:a})}return e}presentTable(){this.roiTable.present()}async repaintTable(){const e=await this.getTableRecords();this.roiTable.renderTable(e)}dismissTable(){this.roiTable.dismiss()}roiTableIsVisible(){return this.roiTable.isVisible()}async updateUserDefinedROISet(e){let t=await this.getUserDefinedROISet();t===void 0&&(t=this.initializeUserDefinedROISet()),t.addFeature(e),this.setROITableButtonVisibility(!0),await this.renderROISet({browser:this.browser,pixelTop:this.top,roiSet:t});const n=await this.getTableRecords();this.roiTable.renderTable(n)}setROITableButtonVisibility(e){this.browser.roiTableControl.setVisibility(e)}toggleROIs(){const e=!this.roiSets[0].isVisible;this.roiTable.setROIVisibility(e);for(const t of this.roiSets)t.isVisible=e}async renderAllROISets(){for(let e of this.roiSets)await this.renderROISet({browser:this.browser,pixelTop:this.top,roiSet:e})}async renderROISet({browser:e,pixelTop:t,roiSet:n}){const r=e.columnContainer.querySelectorAll(".igv-column");for(let s=0;s<r.length;s++){let{chr:a,start:o,end:l,bpPerPixel:c}=e.referenceFrameList[s];const h=r[s].querySelectorAll(".igv-roi-region");for(let d of h){const u=d.dataset.region,{chr:p,start:m,end:F}=qa(u);(p!==a||F<o||m>l)&&d.remove()}const f=await n.getFeatures(a,o,l);if(f)for(let d of f){const u=c1(a,d.start,d.end),{x:p,width:m}=N0(Math.max(o,d.start),Math.min(l,d.end),o,c),F=r[s].querySelector(r2(u));if(F)F.style.left=`${p}px`,F.style.width=`${m}px`;else{const g=this.createRegionElement(e.columnContainer,t,p,m,n,u,d);r[s].appendChild(g)}}}}createRegionElement(e,t,n,r,s,a,o){const l=Fe({class:"igv-roi-region"});l.style.top=`${t}px`,l.style.left=`${n}px`,l.style.width=`${r}px`,l.style.backgroundColor=s.color,l.dataset.color=s.color,l.dataset.region=a;const c=Fe();return l.appendChild(c),c.style.backgroundColor=s.headerColor,c.addEventListener("click",h=>{h.preventDefault(),h.stopPropagation(),xt(h,e),this.roiMenu.present(o,s,h,this,e,l)}),l}renderSVGContext(e,t,{deltaX:n,deltaY:r}){for(const s of e.querySelectorAll(".igv-roi-region")){const{x:a,y:o,width:l,height:c}=s.getBoundingClientRect();t.fillStyle=s.style.backgroundColor,t.fillRect(a-n,o+r,l,c);const h=s.querySelector("div"),{x:f,y:d,width:u,height:p}=h.getBoundingClientRect();t.fillStyle=h.style.backgroundColor,t.fillRect(f-n,d+r,u,p)}}getUserDefinedROISet(){return this.roiSets.find(e=>e.isUserDefined===!0)}deleteUserDefinedROISet(){this.roiSets=this.roiSets.filter(e=>e.isUserDefined!==!0)}initializeUserDefinedROISet(){const e={name:"user defined",isUserDefined:!0,features:[]},t=new hu(e,this.browser.genome);return this.roiSets.push(t),t}async deleteRegionWithKey(e,t){t.querySelectorAll(r2(e)).forEach(r=>r.remove()),(await this.getTableRecords()).length===0&&(this.browser.roiTableControl.buttonHandler(!1),this.setROITableButtonVisibility(!1))}toJSON(){return this.roiSets.map(e=>e.toJSON())}dispose(){this.browser.off("locuschange",this.boundLocusChangeHandler);const e=this.browser.columnContainer.querySelectorAll(".igv-roi-region");for(let t of e)t.remove();this.roiMenu&&this.roiMenu.dispose(),this.roiTable&&this.roiTable.dispose();for(let t of this.roiSets)t.dispose();for(let t of Object.keys(this))this[t]=void 0}}function Hx(){this.renderAllROISets()}function c1(i,e,t){return`${i}-${e}-${t}`}function r2(i){return`[data-region="${i}"]`}function qa(i){let e=i.split("-"),t=parseInt(e.pop()),n=parseInt(e.pop()),r=e.join("-");return{chr:r,start:n,end:t,locus:`${r}:${n}-${t}`,bedRecord:`${r}	${n}	${t}`}}class Px{constructor(e,t){this.name=e.name,this.featureSource=e.featureSource||Wt(e,t),this.color=e.color||Nh}async getFeatures(e,t,n){return this.featureSource.getFeatures({chr:e,start:t,end:n})}draw(e){const{context:t,bpPerPixel:n,bpStart:r,pixelTop:s,pixelHeight:a,pixelWidth:o,features:l}=e;if(!l)return;const c=r+o*n+1;for(let{start:h,end:f}of l){if(f<r)continue;if(h>c)break;const{x:d,width:u}=N0(h,f,r,n);de.fillRect(t,d,s,u,a,{fillStyle:this.color})}}}const Ox=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>roi</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="roi">
            <rect id="Rectangle-Copy-23" stroke="#737373" stroke-width="12" fill="#FFFFFF" x="6" y="6" width="613" height="613" rx="135"></rect>
            <text id="ROI" font-family="HelveticaNeue-Bold, Helvetica Neue" font-size="258" font-weight="bold" fill="#737373">
                <tspan x="81.445" y="389">ROI</tspan>
            </text>
        </g>
    </g>
</svg>`,Ux=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>roi hover</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="roi-hover">
            <rect id="Rectangle-Copy-24" stroke="#737373" stroke-width="12" fill="#737373" x="6" y="6" width="613" height="613" rx="135"></rect>
            <text id="ROI" font-family="HelveticaNeue-Bold, Helvetica Neue" font-size="258" font-weight="bold" fill="#FFFFFF">
                <tspan x="81.445" y="389">ROI</tspan>
            </text>
        </g>
    </g>
</svg>`;class qx extends di{constructor(e,t){super(t,e,["ROI","Regions of Interest Table"],rn,Ox,Ux,!1),this.button.addEventListener("mouseenter",()=>{t.doShowROITable===!1&&this.setState(!0)}),this.button.addEventListener("mouseleave",()=>{t.doShowROITable===!1&&this.setState(!1)}),this.button.addEventListener("click",()=>this.buttonHandler(!t.doShowROITable)),this.setVisibility(!1)}buttonHandler(e){this.setState(e),this.browser.setROITableVisibility(e)}}async function Vx(i){const e=i.browsers[0],t={},n=new Rh({url:e.url});await n.readHeaderAndFooter(),t.sampleNameViewportWidth=20,t.genome="hg38";const r=e.state.split(","),s=n.bpResolutions[Number.parseInt(r[2])],a=1700,o=Number.parseInt(r[0]),l=Math.floor(Number.parseFloat(r[3])*s),c=l+Math.floor(a*s);return t.locus=`${n.chromosomes[o].name}:${l}-${c}`,t.tracks=(e.tracks||[]).filter(h=>!(h.format==="refgene"||h.name==="cellType")),t.tracks.push({type:"shoebox",url:e.url,name:e.name,colorScale:e.colorScale,_hicFile:n}),t}const Qx=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>multi select</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="multi-select">
            <rect id="backdrop-copy-3" stroke="#737373" stroke-width="12" fill="#FFFFFF" x="6" y="6" width="613" height="613" rx="135"></rect>
            <g id="row-copy-3" transform="translate(81, 427)" fill="#737373">
                <rect id="Rectangle" x="134" y="0" width="329" height="70"></rect>
                <rect id="Rectangle-Copy-16" stroke="#737373" stroke-width="12" x="6" y="6" width="58" height="58"></rect>
            </g>
            <g id="row-copy-2" transform="translate(82, 277)">
                <rect id="Rectangle" fill-opacity="0.33" fill="#CFCECE" x="133" y="0" width="329" height="70"></rect>
                <rect id="Rectangle-Copy-16" stroke-opacity="0.32659528" stroke="#CFCECE" stroke-width="12" x="6" y="6" width="58" height="58"></rect>
            </g>
            <g id="row-copy" transform="translate(81, 119)" fill="#737373">
                <rect id="Rectangle" x="134" y="0" width="329" height="70"></rect>
                <rect id="Rectangle-Copy-17" stroke="#737373" stroke-width="12" x="6" y="6" width="58" height="58"></rect>
            </g>
        </g>
    </g>
</svg>`,Gx=`<svg width="625px" height="625px" viewBox="0 0 625 625" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>multi select hover</title>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="multi-select-hover">
            <rect id="backdrop-copy-4" stroke="#737373" stroke-width="12" fill="#737373" x="6" y="6" width="613" height="613" rx="135"></rect>
            <g id="row-copy-3" transform="translate(81, 427)" fill="#FFFFFF">
                <rect id="Rectangle" x="134" y="0" width="329" height="70"></rect>
                <rect id="Rectangle-Copy-16" stroke="#FFFFFF" stroke-width="12" x="6" y="6" width="58" height="58"></rect>
            </g>
            <g id="row-copy-2" transform="translate(82, 277)">
                <rect id="Rectangle" fill-opacity="0.33" fill="#CFCECE" x="133" y="0" width="329" height="70"></rect>
                <rect id="Rectangle-Copy-16" stroke-opacity="0.33" stroke="#CFCECE" stroke-width="12" x="6" y="6" width="58" height="58"></rect>
            </g>
            <g id="row-copy" transform="translate(81, 119)" fill="#FFFFFF">
                <rect id="Rectangle" x="134" y="0" width="329" height="70"></rect>
                <rect id="Rectangle-Copy-17" stroke="#FFFFFF" stroke-width="12" x="6" y="6" width="58" height="58"></rect>
            </g>
        </g>
    </g>
</svg>`;class $x extends di{constructor(e,t,n){super(e,t,"Select Tracks",rn,Qx,Gx,n=!1),this.enableMultiTrackSelection=n,this.button.addEventListener("mouseenter",s=>{n===!1&&this.setState(!0)}),this.button.addEventListener("mouseleave",s=>{n===!1&&this.setState(!1)});const r=()=>{this.setMultiTrackSelection(!this.enableMultiTrackSelection)};this.boundMouseClickHandler=r.bind(this),this.button.addEventListener("click",this.boundMouseClickHandler),this.setVisibility(!0)}setMultiTrackSelection(e){this.enableMultiTrackSelection=e;for(const t of this.browser.trackViews)Ma.has(t.track.type)===!1&&(t.setTrackSelectionState(t.axis,this.enableMultiTrackSelection),this.enableMultiTrackSelection||(t.track.selected=!1));this.setState(this.enableMultiTrackSelection),this.enableMultiTrackSelection===!1&&this.browser.overlayTrackButton.setVisibility(!1)}}class jx{constructor(e,t,n){ke(this,"aliasRecordCache",new Map);t=t||{},t.url=e,this.reader=new p0(t,n)}getChromosomeName(e){return this.aliasRecordCache.has(e)?this.aliasRecordCache.get(e).chr:e}getChromosomeAlias(e,t){const n=this.aliasRecordCache.get(e);return n&&n[t]||e}async search(e){if(!this.aliasRecordCache.has(e)){const t=await this.reader.search(e);if(t)for(let n of Object.keys(t))n!=="start"&&n!=="end"&&this.aliasRecordCache.set(t[n],t)}return this.aliasRecordCache.get(e)}async getChromosomeNames(){return await this.reader.loadHeader(),Array.from(this.reader.chrNames)}}class Wx{constructor(e,t,n){ke(this,"aliasRecordCache",new Map);this.aliasURL=e,this.config=t,this.genome=n}getChromosomeName(e){return this.aliasRecordCache.has(e)?this.aliasRecordCache.get(e).chr:e}getChromosomeAlias(e,t){const n=this.aliasRecordCache.get(e);return n&&n[t]||e}async loadAliases(){const e=await Se.loadString(this.aliasURL,Le(this.config)),t=zn(e),n=t[0];n.startsWith("#")&&(this.headings=n.substring(1).split("	").map(s=>s.trim()),this.altNameSets=this.headings.slice(1));const r=this.genome.chromosomeNames?new Set(this.genome.chromosomeNames):new Set;for(let s of t)if(!s.startsWith("#")&&s.length>0){const a=s.split("	");let o=a.find(c=>r.has(c));o||(o=a[0]);const l={chr:o};for(let c=0;c<a.length;c++){const h=this.headings?this.headings[c]:c;l[h]=a[c],this.aliasRecordCache.set(a[c],l)}}}async search(e){return this.aliasRecordCache.size===0&&await this.loadAliases(),this.aliasRecordCache.get(e)}}class h1{constructor(e,t,n,r){this.start=e,this.end=t,this.name=n,this.stain=0,r==="acen"?this.type="c":(this.type=r.charAt(1),this.type==="p"&&(this.stain=parseInt(r.substring(4))))}}var Co,f1;class Kx{constructor(e,t,n){ct(this,Co);ke(this,"cytobandMap",new Map);t=t||{},t.url=e,this.source=new kh(t,n)}async getCytobands(e){if(this.cytobandMap.has(e))return this.cytobandMap.get(e);{let t=await Ke(this,Co,f1).call(this,e);return t||(t=[]),this.cytobandMap.set(e,t),t}}}Co=new WeakSet,f1=async function(e){return(await this.source.getFeatures({chr:e})).map(n=>new h1(n.start,n.end,n.name,n.gieStain))};var br,Va;class Yx{constructor(e,t){ct(this,br);ke(this,"cytobands",new Map);this.url=e,this.config=t}async getCytobands(e){return this.cytobands.size===0&&await Ke(this,br,Va).call(this),this.cytobands.get(e)}async getChromosomeNames(){return this.cytobands.size===0&&await Ke(this,br,Va).call(this),Array.from(this.cytobands.keys())}async getChromosomes(){this.cytobands.size===0&&await Ke(this,br,Va).call(this);const e=[];let t=0;for(let[n,r]of this.cytobands.entries())e.push(new Nn(n,t++,r[r.length-1].end));return e}}br=new WeakSet,Va=async function(){let e;if(qi(this.url)){const s=nn(this.url);e="";const a=s.length;for(let o=0;o<a;o++)e+=String.fromCharCode(s[o])}else e=await Se.loadString(this.url,Le(this.config));let t,n=[];const r=zn(e);for(let s of r){const a=s.split("	"),o=a[0];if(t||(t=o),o!==t&&(this.cytobands.set(t,n),n=[],t=o),a.length===5){const l=parseInt(a[1]),c=parseInt(a[2]),h=a[3],f=a[4];n.push(new h1(l,c,h,f))}}};class Yh{constructor(e,t){ke(this,"aliasRecordCache",new Map);this.genomeID=e,this.update(e,t)}getChromosomeName(e){return this.aliasRecordCache.has(e)?this.aliasRecordCache.get(e).chr:e}getChromosomeAlias(e,t){const n=this.aliasRecordCache.get(e);return n&&n[t]||e}update(e,t){if(t){const n=[];for(let r of t){if(this.aliasRecordCache.has(r))continue;let s=!1;const a={chr:r};if(n.push(a),r.startsWith("gi|")){const o=Yh.getNCBIName(r);a["ncbi-gi-versioned"]=o;const l=o.lastIndexOf(".");if(l>0){const c=c.substring(0,l);a["ncbi-gi"]=c}}else{if(e.startsWith("hg")||e.startsWith("GRCh")||e==="1kg_ref"||e==="b37")switch(r){case"23":a.ucsc="chrX",s=!0;break;case"24":a.ucsc="chrY",s=!0;break;case"chrX":a.ncbi="23",s=!0;break;case"chrY":a.ncbi="24",s=!0;break}else if(e.startsWith("mm")||e.startsWith("GRCm")||e.startsWith("rheMac"))switch(r){case"21":a.ucsc="chrX",s=!0;break;case"22":a.ucsc="chrY",s=!0;break;case"chrX":a.ncbi="21",s=!0;break;case"chrY":a.ncbi="22",s=!0;break}if(s)continue;r==="chrM"?a.ncbi="MT":r==="MT"?a.ucsc="chrM":r.toLowerCase().startsWith("chr")?a.ncbi=r.substring(3):Number.isInteger(Number(r))&&(a.ucsc="chr"+r)}}for(let r of n)for(let s of Object.values(r))this.aliasRecordCache.set(s,r)}}search(e){return this.aliasRecordCache.get(e)}static getNCBIName(e){const t=e.split("\\|");return t[t.length-1]}}var Ot;const Zh=class Zh{constructor(e,t){ct(this,Ot);this.config=e,this.browser=t,this.id=e.id||Xx(e),this.name=e.name,this.nameSet=e.nameSet}static async createGenome(e,t){const n=new Zh(e,t);return await n.init(),n}async init(){const e=this.config;if(this.sequence=await qg(e,this.browser),e.chromSizesURL?this.chromosomes=await P3(e.chromSizesURL):this.chromosomes=this.sequence.chromosomes||new Map,this.chromosomes.size>0&&(this.chromosomeNames=Array.from(this.chromosomes.keys())),e.chromAliasBbURL?(this.chromAlias=new jx(e.chromAliasBbURL,Object.assign({},e),this),this.chromosomeNames||(this.chromosomeNames=await this.chromAlias.getChromosomeNames())):e.aliasURL?this.chromAlias=new Wx(e.aliasURL,Object.assign({},e),this):this.chromosomeNames&&(this.chromAlias=new Yh(this.id,this.chromosomeNames)),e.cytobandBbURL)this.cytobandSource=new Kx(e.cytobandBbURL,Object.assign({},e),this),this.chromosomeNames||(this.chromosomeNames=await this.cytobandSource.getChromosomeNames());else if(e.cytobandURL&&(this.cytobandSource=new Yx(e.cytobandURL,Object.assign({},e)),this.chromosomeNames||(this.chromosomeNames=await this.cytobandSource.getChromosomeNames()),this.chromosomes.size===0)){const t=await this.cytobandSource.getChromosomes();for(let n of t)this.chromosomes.set(t.name,t)}if(e.wholeGenomeView!==!1&&this.chromosomes.size>0&&(e.chromosomeOrder?Array.isArray(e.chromosomeOrder)?ci(this,Ot,e.chromosomeOrder):ci(this,Ot,e.chromosomeOrder.split(",").map(t=>t.trim())):ci(this,Ot,Zx(this.chromosomes))),this.wholeGenomeView=e.wholeGenomeView!==!1&&Ve(this,Ot)&&this.chromosomes.size>1,this.wholeGenomeView){const t=Ve(this,Ot).reduce((n,r)=>n+=this.chromosomes.get(r).bpLength,0);this.chromosomes.set("all",new Nn("all",0,t))}}get description(){return this.config.description||`${this.id}
${this.name}`}get infoURL(){return this.config.infoURL}showWholeGenomeView(){return this.wholeGenomeView}toJSON(){return Object.assign({},this.config,{tracks:void 0})}get initialLocus(){return this.config.locus?this.config.locus:this.getHomeChromosomeName()}getHomeChromosomeName(){return this.showWholeGenomeView()&&this.chromosomes.has("all")?"all":this.chromosomeNames[0]}getChromosomeName(e){return this.chromAlias?this.chromAlias.getChromosomeName(e,this.chromosomes.keys()):e}getChromosomeDisplayName(e){return this.nameSet&&this.chromAlias&&this.chromAlias.getChromosomeAlias(e,this.nameSet)||e}getChromosome(e){return this.chromAlias&&(e=this.chromAlias.getChromosomeName(e)),this.chromosomes.get(e)}async loadChromosome(e){if(this.chromAlias){const t=await this.chromAlias.search(e);t&&(e=t.chr)}if(!this.chromosomes.has(e)){let t;const n=await this.sequence.getSequenceRecord(e);n&&(t=new Nn(e,0,n.bpLength)),this.chromosomes.set(e,t)}return this.chromosomes.get(e)}async getAliasRecord(e){if(this.chromAlias)return this.chromAlias.search(e)}async getCytobands(e){if(this.cytobandSource){const t=this.getChromosomeName(e);return await this.cytobandSource.getCytobands(t)}}getChromosomes(){return this.chromosomes}get wgChromosomeNames(){return Ve(this,Ot)?Ve(this,Ot).slice():void 0}get showChromosomeWidget(){return this.config.showChromosomeWidget}getGenomeCoordinate(e,t){var n=this.getCumulativeOffset(e);if(n!==void 0)return n+t}getChromosomeCoordinate(e){this.cumulativeOffsets===void 0&&(this.cumulativeOffsets=computeCumulativeOffsets.call(this));let t,n=0;for(let r of Ve(this,Ot)){const s=this.cumulativeOffsets[r];if(s>e){const a=e-n;return{chr:t,position:a}}t=r,n=s}return{chr:Ve(this,Ot)[Ve(this,Ot).length-1],position:0}}getCumulativeOffset(e){this.cumulativeOffsets===void 0&&(this.cumulativeOffsets=n.call(this));const t=this.getChromosomeName(e);return this.cumulativeOffsets[t];function n(){let r={},s=0;for(let a of Ve(this,Ot)){r[a]=Math.floor(s);const o=this.getChromosome(a);s+=o.bpLength}return r}}getGenomeLength(){if(!this.bpLength){let e=0;for(let t of Ve(this,Ot)){let n=this.chromosomes.get(t);e+=n.bpLength}this.bpLength=e}return this.bpLength}async getSequence(e,t,n){return e=this.getChromosomeName(e),this.sequence.getSequence(e,t,n)}getSequenceInterval(e,t,n){if(typeof this.sequence.getSequenceInterval=="function")return this.sequence.getSequenceInterval(e,t,n)}};Ot=new WeakMap;let Jc=Zh;function Zx(i){const e=[];let t,n=1;for(let r of i.values()){if(!t)t=r.bpLength,e.push(r.name);else{if(r.bpLength<t/100)continue;t=((n-1)*t+r.bpLength)/n,e.push(r.name)}n++}return e}function Xx(i){return i.id!==void 0?i.id:i.fastaURL&&ut(i.fastaURL)&&!i.fastaURL.startsWith("data:")?i.fastaURL:i.fastaURL&&i.fastaURL.name?i.fastaURL.name:""}var Jx=`.igv-ui-dropdown {
  cursor: default;
  position: absolute;
  top: 0;
  left: 0;
  z-index: 2048;
  border-color: #7F7F7F;
  border-style: solid;
  border-width: 1px;
  font-family: "Open Sans", sans-serif;
  font-size: small;
  font-weight: 400;
  background-color: white;
}
.igv-ui-dropdown > div {
  overflow-y: auto;
  overflow-x: hidden;
  background-color: white;
}
.igv-ui-dropdown > div > div {
  padding: 4px;
  width: 100%;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  border-bottom-color: #7F7F7F;
  border-bottom-style: solid;
  border-bottom-width: 1px;
  background-color: white;
}
.igv-ui-dropdown > div > div:last-child {
  border-bottom-color: transparent;
  border-bottom-width: 0;
}
.igv-ui-dropdown > div > div:hover {
  cursor: pointer;
  background-color: rgba(0, 0, 0, 0.04);
}

.igv-ui-popover {
  cursor: default;
  position: absolute;
  z-index: 2048;
  border-color: #7F7F7F;
  border-radius: 4px;
  border-style: solid;
  border-width: 1px;
  font-family: "Open Sans", sans-serif;
  font-size: small;
  background-color: white;
}
.igv-ui-popover > div:first-child {
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  height: 24px;
  cursor: move;
  border-top-width: 0;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  border-bottom-color: #7F7F7F;
  border-bottom-style: solid;
  border-bottom-width: thin;
  background-color: #eee;
}
.igv-ui-popover > div:first-child > div:first-child {
  margin-left: 4px;
}
.igv-ui-popover > div:first-child > div:last-child {
  margin-right: 4px;
  height: 12px;
  width: 12px;
  color: #7F7F7F;
}
.igv-ui-popover > div:first-child > div:last-child:hover {
  cursor: pointer;
  color: #444;
}
.igv-ui-popover > div:last-child {
  user-select: text;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 400px;
  max-width: 800px;
  background-color: white;
  border-bottom-width: 0;
  border-bottom-left-radius: 4px;
  border-bottom-right-radius: 4px;
}
.igv-ui-popover > div:last-child > div {
  margin-left: 4px;
  margin-right: 4px;
  min-width: 220px;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.igv-ui-popover > div:last-child > div > span {
  font-weight: bolder;
}
.igv-ui-popover > div:last-child hr {
  width: 100%;
}

.igv-ui-alert-dialog-container {
  box-sizing: content-box;
  position: absolute;
  z-index: 2048;
  top: 50%;
  left: 50%;
  width: 400px;
  height: 200px;
  border-color: #7F7F7F;
  border-radius: 4px;
  border-style: solid;
  border-width: thin;
  outline: none;
  font-family: "Open Sans", sans-serif;
  font-size: 15px;
  font-weight: 400;
  background-color: white;
  display: flex;
  flex-flow: column;
  flex-wrap: nowrap;
  justify-content: space-between;
  align-items: center;
}
.igv-ui-alert-dialog-container > div:first-child {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
  width: 100%;
  height: 24px;
  cursor: move;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  border-bottom-color: #7F7F7F;
  border-bottom-style: solid;
  border-bottom-width: thin;
  background-color: #eee;
}
.igv-ui-alert-dialog-container > div:first-child div:first-child {
  padding-left: 8px;
}
.igv-ui-alert-dialog-container .igv-ui-alert-dialog-body {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
  color: #373737;
  width: 100%;
  height: calc(100% - 24px - 64px);
  overflow-y: scroll;
}
.igv-ui-alert-dialog-container .igv-ui-alert-dialog-body .igv-ui-alert-dialog-body-copy {
  margin: 16px;
  width: auto;
  height: auto;
  overflow-wrap: break-word;
  word-break: break-word;
  background-color: white;
  border: unset;
}
.igv-ui-alert-dialog-container > div:last-child {
  width: 100%;
  margin-bottom: 10px;
  background-color: white;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: center;
  align-items: center;
}
.igv-ui-alert-dialog-container > div:last-child div {
  margin: unset;
  width: 40px;
  height: 30px;
  line-height: 30px;
  text-align: center;
  color: white;
  font-family: "Open Sans", sans-serif;
  font-size: small;
  font-weight: 400;
  border-color: #2B81AF;
  border-style: solid;
  border-width: thin;
  border-radius: 4px;
  background-color: #2B81AF;
}
.igv-ui-alert-dialog-container > div:last-child div:hover {
  cursor: pointer;
  border-color: #25597f;
  background-color: #25597f;
}

.igv-ui-color-swatch {
  position: relative;
  box-sizing: content-box;
  display: flex;
  flex-flow: row;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  width: 32px;
  height: 32px;
  border-style: solid;
  border-width: 2px;
  border-color: white;
  border-radius: 4px;
}

.igv-ui-color-swatch:hover {
  border-color: dimgray;
}

.igv-ui-colorpicker-menu-close-button {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-end;
  align-items: center;
  width: 100%;
  height: 32px;
  margin-top: 4px;
  margin-bottom: 4px;
  padding-right: 8px;
}
.igv-ui-colorpicker-menu-close-button i.fa {
  display: block;
  margin-left: 4px;
  margin-right: 4px;
  color: #5f5f5f;
}
.igv-ui-colorpicker-menu-close-button i.fa:hover,
.igv-ui-colorpicker-menu-close-button i.fa:focus,
.igv-ui-colorpicker-menu-close-button i.fa:active {
  cursor: pointer;
  color: #0f0f0f;
}

.igv-ui-generic-dialog-container {
  box-sizing: content-box;
  position: fixed;
  top: 0;
  left: 0;
  width: 300px;
  height: fit-content;
  padding-bottom: 16px;
  border-color: #7F7F7F;
  border-radius: 4px;
  border-style: solid;
  border-width: thin;
  font-family: "Open Sans", sans-serif;
  font-size: medium;
  font-weight: 400;
  z-index: 2048;
  background-color: white;
  display: flex;
  flex-flow: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-header {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-end;
  align-items: center;
  width: 100%;
  height: 24px;
  cursor: move;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  border-bottom-color: #7F7F7F;
  border-bottom-style: solid;
  border-bottom-width: thin;
  background-color: #eee;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-header div {
  margin-right: 4px;
  margin-bottom: 2px;
  height: 12px;
  width: 12px;
  color: #7F7F7F;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-header div:hover {
  cursor: pointer;
  color: #444;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-one-liner {
  color: #373737;
  width: 95%;
  line-height: 24px;
  text-align: left;
  margin-top: 8px;
  padding-left: 8px;
  overflow-wrap: break-word;
  background-color: white;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input {
  margin-top: 8px;
  width: 95%;
  height: 24px;
  color: #373737;
  line-height: 24px;
  padding-left: 8px;
  background-color: white;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input > div {
  width: fit-content;
  height: 100%;
  font-size: 16px;
  text-align: right;
  padding-right: 8px;
  background-color: white;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input input {
  display: block;
  height: 100%;
  width: 100%;
  padding-left: 4px;
  font-family: "Open Sans", sans-serif;
  font-weight: 400;
  color: #373737;
  text-align: left;
  outline: none;
  border-style: solid;
  border-width: thin;
  border-color: #7F7F7F;
  background-color: white;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-label-input input {
  width: 50%;
  font-size: 16px;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-input {
  margin-top: 8px;
  width: calc(100% - 16px);
  height: 24px;
  color: #373737;
  line-height: 24px;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-around;
  align-items: center;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-input input {
  display: block;
  height: 100%;
  width: 100%;
  padding-left: 4px;
  font-family: "Open Sans", sans-serif;
  font-weight: 400;
  color: #373737;
  text-align: left;
  outline: none;
  border-style: solid;
  border-width: thin;
  border-color: #7F7F7F;
  background-color: white;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-input input {
  font-size: 16px;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-input input[type=range] {
  width: 70%;
  -webkit-appearance: none;
  background: linear-gradient(90deg, white, black);
  outline: none;
  margin: 0;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-input output {
  display: block;
  height: 100%;
  width: 20%;
  font-size: 16px;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel {
  width: 100%;
  height: 28px;
  padding-top: 16px;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-around;
  align-items: center;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel > div {
  color: white;
  font-family: "Open Sans", sans-serif;
  font-size: 14px;
  font-weight: 400;
  width: 75px;
  height: 28px;
  line-height: 28px;
  text-align: center;
  border-color: transparent;
  border-style: solid;
  border-width: thin;
  border-radius: 2px;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel > div:first-child {
  margin-left: 32px;
  margin-right: 0;
  background-color: #5ea4e0;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel > div:last-child {
  margin-left: 0;
  margin-right: 32px;
  background-color: #c4c4c4;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel > div:first-child:hover {
  cursor: pointer;
  background-color: #3b5c7f;
}
.igv-ui-generic-dialog-container .igv-ui-generic-dialog-ok-cancel > div:last-child:hover {
  cursor: pointer;
  background-color: #7f7f7f;
}

.igv-ui-generic-container {
  box-sizing: content-box;
  position: absolute;
  z-index: 2048;
  background-color: white;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: flex-start;
  align-items: center;
}
.igv-ui-generic-container > div:first-child {
  cursor: move;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-end;
  align-items: center;
  height: 24px;
  width: 100%;
  background-color: #dddddd;
}
.igv-ui-generic-container > div:first-child > div {
  display: block;
  color: #5f5f5f;
  cursor: pointer;
  width: 14px;
  height: 14px;
  margin-right: 8px;
  margin-bottom: 4px;
}

.igv-ui-dialog {
  z-index: 2048;
  position: fixed;
  width: fit-content;
  height: fit-content;
  display: flex;
  flex-flow: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  background-color: white;
  border-color: #7F7F7F;
  border-radius: 4px;
  border-style: solid;
  border-width: thin;
  font-family: "Open Sans", sans-serif;
  font-size: medium;
  font-weight: 400;
}
.igv-ui-dialog .igv-ui-dialog-header {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-end;
  align-items: center;
  width: 100%;
  height: 24px;
  cursor: move;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  border-bottom-color: #7F7F7F;
  border-bottom-style: solid;
  border-bottom-width: thin;
  background-color: #eee;
}
.igv-ui-dialog .igv-ui-dialog-header div {
  margin-right: 4px;
  margin-bottom: 2px;
  height: 12px;
  width: 12px;
  color: #7F7F7F;
}
.igv-ui-dialog .igv-ui-dialog-header div:hover {
  cursor: pointer;
  color: #444;
}
.igv-ui-dialog .igv-ui-dialog-one-liner {
  width: 95%;
  height: 24px;
  line-height: 24px;
  text-align: left;
  margin: 8px;
  overflow-wrap: break-word;
  background-color: white;
  font-weight: bold;
}
.igv-ui-dialog .igv-ui-dialog-ok-cancel {
  width: 100%;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-around;
  align-items: center;
}
.igv-ui-dialog .igv-ui-dialog-ok-cancel div {
  margin: 16px;
  margin-top: 32px;
  color: white;
  font-family: "Open Sans", sans-serif;
  font-size: 14px;
  font-weight: 400;
  width: 75px;
  height: 28px;
  line-height: 28px;
  text-align: center;
  border-color: transparent;
  border-style: solid;
  border-width: thin;
  border-radius: 2px;
}
.igv-ui-dialog .igv-ui-dialog-ok-cancel div:first-child {
  background-color: #5ea4e0;
}
.igv-ui-dialog .igv-ui-dialog-ok-cancel div:last-child {
  background-color: #c4c4c4;
}
.igv-ui-dialog .igv-ui-dialog-ok-cancel div:first-child:hover {
  cursor: pointer;
  background-color: #3b5c7f;
}
.igv-ui-dialog .igv-ui-dialog-ok-cancel div:last-child:hover {
  cursor: pointer;
  background-color: #7f7f7f;
}
.igv-ui-dialog .igv-ui-dialog-ok {
  width: 100%;
  height: 36px;
  margin-top: 32px;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-around;
  align-items: center;
}
.igv-ui-dialog .igv-ui-dialog-ok div {
  width: 98px;
  height: 36px;
  line-height: 36px;
  text-align: center;
  color: white;
  font-family: "Open Sans", sans-serif;
  font-size: medium;
  font-weight: 400;
  border-color: white;
  border-style: solid;
  border-width: thin;
  border-radius: 4px;
  background-color: #2B81AF;
}
.igv-ui-dialog .igv-ui-dialog-ok div:hover {
  cursor: pointer;
  background-color: #25597f;
}

.igv-ui-panel, .igv-ui-panel-row, .igv-ui-panel-column {
  z-index: 2048;
  background-color: white;
  font-family: "Open Sans", sans-serif;
  font-size: medium;
  font-weight: 400;
  display: flex;
  justify-content: flex-start;
  align-items: flex-start;
}

.igv-ui-panel-column {
  display: flex;
  flex-direction: column;
}

.igv-ui-panel-row {
  display: flex;
  flex-direction: row;
}

.igv-ui-textbox {
  background-color: white;
  font-family: "Open Sans", sans-serif;
  font-size: medium;
  font-weight: 400;
  display: flex;
  justify-content: flex-start;
  align-items: flex-start;
}

.igv-ui-table {
  background-color: white;
}

.igv-ui-table thead {
  position: sticky;
  top: 0;
}

.igv-ui-table th {
  text-align: left;
}

.igv-ui-table td {
  padding-right: 20px;
}

.igv-ui-table tr:hover {
  background-color: lightblue;
}

.igv-ui-center-fixed {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}

.igv-navbar {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-between;
  align-items: center;
  box-sizing: border-box;
  width: 100%;
  color: #444;
  font-size: 12px;
  font-family: "Open Sans", sans-serif;
  font-weight: 400;
  line-height: 32px;
  padding-left: 8px;
  padding-right: 8px;
  margin-top: 2px;
  margin-bottom: 6px;
  height: 32px;
  border-style: solid;
  border-radius: 3px;
  border-width: thin;
  border-color: #bfbfbf;
  background-color: #f3f3f3;
}
.igv-navbar .igv-navbar-left-container {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-between;
  align-items: center;
  height: 32px;
  line-height: 32px;
}
.igv-navbar .igv-navbar-left-container .igv-logo {
  width: 34px;
  height: 32px;
  margin-right: 8px;
}
.igv-navbar .igv-navbar-left-container .igv-current-genome {
  height: 32px;
  margin-left: 4px;
  margin-right: 4px;
  user-select: none;
  line-height: 32px;
  vertical-align: middle;
  text-align: center;
}
.igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-between;
  align-items: center;
  height: 100%;
}
.igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-chromosome-select-widget-container {
  display: flex;
  flex-flow: column;
  flex-wrap: nowrap;
  justify-content: space-around;
  align-items: center;
  height: 100%;
  width: 125px;
  margin-right: 4px;
}
.igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-chromosome-select-widget-container select {
  display: block;
  cursor: pointer;
  width: 100px;
  height: 75%;
  outline: none;
  font-size: 12px;
  font-family: "Open Sans", sans-serif;
  font-weight: 400;
}
.igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-between;
  align-items: center;
  margin-left: 8px;
  height: 22px;
}
.igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-search-container {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
  width: 240px;
  height: 22px;
  line-height: 22px;
}
.igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-search-container input.igv-search-input {
  cursor: text;
  width: 85%;
  height: 22px;
  line-height: 22px;
  font-size: 12px;
  font-family: "Open Sans", sans-serif;
  font-weight: 400;
  text-align: left;
  padding-left: 8px;
  margin-right: 8px;
  outline: none;
  border-style: solid;
  border-radius: 3px;
  border-width: thin;
  border-color: #bfbfbf;
  background-color: white;
}
.igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-search-container .igv-search-icon-container {
  cursor: pointer;
  height: 16px;
  width: 16px;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: center;
  align-items: center;
}
.igv-navbar .igv-navbar-left-container .igv-navbar-genomic-location .igv-locus-size-group .igv-windowsize-panel-container {
  margin-left: 4px;
  user-select: none;
}
.igv-navbar .igv-navbar-right-container {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-between;
  align-items: center;
}
.igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container {
  position: relative;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-end;
  align-items: center;
}
.igv-navbar .igv-navbar-right-container .igv-navbar-toggle-button-container-hidden {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
  height: 100%;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget {
  color: #737373;
  font-size: 18px;
  margin-left: 8px;
  user-select: none;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-end;
  align-items: center;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget div {
  cursor: pointer;
  margin-left: unset;
  margin-right: unset;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget div:first-child {
  height: 20px;
  width: 20px;
  margin-left: unset;
  margin-right: 4px;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget div:last-child {
  height: 20px;
  width: 20px;
  margin-left: 4px;
  margin-right: unset;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget div:nth-child(even) {
  display: block;
  height: fit-content;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget input {
  display: block;
  width: 125px;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget svg {
  display: block;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 {
  color: #737373;
  font-size: 18px;
  height: 32px;
  line-height: 32px;
  margin-left: 8px;
  user-select: none;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-end;
  align-items: center;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div {
  cursor: pointer;
  margin-left: unset;
  margin-right: unset;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div:first-child {
  height: 20px;
  width: 20px;
  margin-left: unset;
  margin-right: 4px;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div:last-child {
  height: 20px;
  width: 20px;
  margin-left: 4px;
  margin-right: unset;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 div:nth-child(even) {
  width: 0;
  height: 0;
  display: none;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 input {
  width: 0;
  height: 0;
  display: none;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget-900 svg {
  display: block;
}
.igv-navbar .igv-navbar-right-container .igv-zoom-widget-hidden {
  display: none;
}

.igv-navbar-button {
  display: block;
  box-sizing: unset;
  padding-left: 6px;
  padding-right: 6px;
  height: 18px;
  text-transform: capitalize;
  user-select: none;
  line-height: 18px;
  text-align: center;
  vertical-align: middle;
  font-family: "Open Sans", sans-serif;
  font-size: 11px;
  font-weight: 200;
  color: #737373;
  background-color: #f3f3f3;
  border-color: #737373;
  border-style: solid;
  border-width: thin;
  border-radius: 6px;
}

.igv-navbar-button:hover {
  cursor: pointer;
}

.igv-navbar-button-clicked {
  color: white;
  background-color: #737373;
}

.igv-navbar-icon-button {
  cursor: pointer;
  position: relative;
  width: 24px;
  height: 24px;
  margin-left: 4px;
  margin-right: 4px;
  border: none;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}
.igv-navbar-icon-button > div:first-child {
  z-index: 512;
  position: absolute;
  top: 36px;
  left: -18px;
  width: 24px;
  height: 24px;
  border: none;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}
.igv-navbar-icon-button > div:last-child {
  z-index: 512;
  position: absolute;
  top: 36px;
  left: 18px;
  width: 24px;
  height: 24px;
  border: none;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

.igv-navbar-text-button {
  cursor: pointer;
  position: relative;
  margin-left: 2px;
  margin-right: 2px;
  border: none;
  display: flex;
  justify-content: center;
  align-items: center;
}
.igv-navbar-text-button > div:nth-child(2) {
  z-index: 512;
  position: absolute;
  top: 36px;
  left: 0;
  width: 38px;
  height: 18px;
  border: none;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}
.igv-navbar-text-button > div:nth-child(3) {
  z-index: 512;
  position: absolute;
  top: 36px;
  left: 42px;
  width: 38px;
  height: 18px;
  border: none;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

#igv-text-button-label {
  text-anchor: middle;
  dominant-baseline: middle;
}

.igv-navbar-text-button-svg-inactive rect {
  stroke: #737373;
  fill: white;
}
.igv-navbar-text-button-svg-inactive text {
  fill: #737373;
}
.igv-navbar-text-button-svg-inactive tspan {
  dominant-baseline: middle;
}

.igv-navbar-text-button-svg-hover rect {
  stroke: #737373;
  fill: #737373;
}
.igv-navbar-text-button-svg-hover text {
  fill: white;
}
.igv-navbar-text-button-svg-hover tspan {
  dominant-baseline: middle;
}

#igv-save-svg-group rect {
  stroke: #737373;
  fill: white;
}
#igv-save-svg-group text {
  fill: #737373;
}

#igv-save-svg-group:hover rect {
  stroke: #737373;
  fill: #737373;
}
#igv-save-svg-group:hover text {
  fill: white;
}

#igv-save-png-group rect {
  stroke: #737373;
  fill: white;
}
#igv-save-png-group text {
  fill: #737373;
}

#igv-save-png-group:hover rect {
  stroke: #737373;
  fill: #737373;
}
#igv-save-png-group:hover text {
  fill: white;
}

.igv-zoom-in-notice-container {
  z-index: 256;
  position: absolute;
  top: 8px;
  left: 50%;
  transform: translate(-50%, 0%);
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  justify-content: center;
  align-items: center;
  background-color: white;
}
.igv-zoom-in-notice-container > div {
  padding-left: 4px;
  padding-right: 4px;
  padding-top: 2px;
  padding-bottom: 2px;
  width: 100%;
  height: 100%;
  font-family: "Open Sans", sans-serif;
  font-size: 14px;
  font-weight: 400;
  color: #3f3f3f;
}

.igv-zoom-in-notice {
  position: absolute;
  top: 10px;
  left: 50%;
}
.igv-zoom-in-notice div {
  position: relative;
  left: -50%;
  font-family: "Open Sans", sans-serif;
  font-size: medium;
  font-weight: 400;
  color: #3f3f3f;
  background-color: rgba(255, 255, 255, 0.51);
  z-index: 64;
}

.igv-container-spinner {
  position: absolute;
  top: 90%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1024;
  width: 24px;
  height: 24px;
  pointer-events: none;
  color: #737373;
}

.igv-multi-locus-close-button {
  position: absolute;
  top: 2px;
  right: 0;
  padding-left: 2px;
  padding-right: 2px;
  width: 12px;
  height: 12px;
  color: #666666;
  background-color: white;
  z-index: 1000;
}
.igv-multi-locus-close-button > svg {
  vertical-align: top;
}

.igv-multi-locus-close-button:hover {
  cursor: pointer;
  color: #434343;
}

.igv-multi-locus-ruler-label {
  z-index: 64;
  position: absolute;
  top: 2px;
  left: 0;
  width: 100%;
  height: 12px;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: center;
  align-items: center;
}
.igv-multi-locus-ruler-label > div {
  font-family: "Open Sans", sans-serif;
  font-size: 12px;
  color: rgb(16, 16, 16);
  background-color: white;
}
.igv-multi-locus-ruler-label > div {
  cursor: pointer;
}

.igv-multi-locus-ruler-label-square-dot {
  z-index: 64;
  position: absolute;
  left: 50%;
  top: 5%;
  transform: translate(-50%, 0%);
  background-color: white;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
}
.igv-multi-locus-ruler-label-square-dot > div:first-child {
  width: 14px;
  height: 14px;
}
.igv-multi-locus-ruler-label-square-dot > div:last-child {
  margin-left: 16px;
  font-family: "Open Sans", sans-serif;
  font-size: 14px;
  font-weight: 400;
  color: rgb(16, 16, 16);
}

.igv-ruler-sweeper {
  display: none;
  pointer-events: none;
  position: absolute;
  top: 26px;
  bottom: 0;
  left: 0;
  width: 0;
  z-index: 99999;
  background-color: rgba(68, 134, 247, 0.25);
}

.igv-ruler-tooltip {
  pointer-events: none;
  z-index: 128;
  position: absolute;
  top: 0;
  left: 0;
  width: 1px;
  height: 32px;
  background-color: transparent;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
}
.igv-ruler-tooltip > div {
  pointer-events: none;
  width: 128px;
  height: auto;
  padding: 1px;
  color: #373737;
  font-size: 10px;
  font-family: "Open Sans", sans-serif;
  font-weight: 400;
  background-color: white;
  border-style: solid;
  border-width: thin;
  border-color: #373737;
}

.igv-track-label {
  position: absolute;
  left: 8px;
  top: 8px;
  width: auto;
  height: auto;
  max-width: 50%;
  padding-left: 4px;
  padding-right: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-family: "Open Sans", sans-serif;
  font-size: small;
  font-weight: 400;
  text-align: center;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  border-color: #444;
  border-radius: 2px;
  border-style: solid;
  border-width: thin;
  background-color: white;
  z-index: 128;
  cursor: pointer;
}

.igv-track-label:hover,
.igv-track-label:focus,
.igv-track-label:active {
  background-color: #e8e8e8;
}

.igv-track-label-popup-shim {
  padding-left: 8px;
  padding-right: 8px;
  padding-top: 4px;
}

.igv-center-line {
  display: none;
  pointer-events: none;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  z-index: 8;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  border-left-style: dashed;
  border-left-width: thin;
  border-right-style: dashed;
  border-right-width: thin;
}

.igv-center-line-wide {
  background-color: rgba(0, 0, 0, 0);
  border-left-color: rgba(127, 127, 127, 0.51);
  border-right-color: rgba(127, 127, 127, 0.51);
}

.igv-center-line-thin {
  background-color: rgba(0, 0, 0, 0);
  border-left-color: rgba(127, 127, 127, 0.51);
  border-right-color: rgba(0, 0, 0, 0);
}

.igv-cursor-guide-horizontal {
  display: none;
  pointer-events: none;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  height: 1px;
  z-index: 32;
  margin-left: 50px;
  margin-right: 54px;
  border-top-style: dotted;
  border-top-width: thin;
  border-top-color: rgba(127, 127, 127, 0.76);
}

.igv-cursor-guide-vertical {
  pointer-events: none;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 50%;
  width: 1px;
  z-index: 32;
  border-left-style: dotted;
  border-left-width: thin;
  border-left-color: rgba(127, 127, 127, 0.76);
  display: none;
}

.igv-user-feedback {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 512px;
  height: 360px;
  z-index: 2048;
  background-color: white;
  border-color: #a2a2a2;
  border-style: solid;
  border-width: thin;
  font-family: "Open Sans", sans-serif;
  font-size: medium;
  font-weight: 400;
  color: #444;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
}
.igv-user-feedback div:first-child {
  position: relative;
  height: 24px;
  width: 100%;
  background-color: white;
  border-bottom-color: #a2a2a2;
  border-bottom-style: solid;
  border-bottom-width: thin;
}
.igv-user-feedback div:first-child div {
  position: absolute;
  top: 2px;
  width: 16px;
  height: 16px;
  background-color: transparent;
}
.igv-user-feedback div:first-child div:first-child {
  left: 8px;
}
.igv-user-feedback div:first-child div:last-child {
  cursor: pointer;
  right: 8px;
}
.igv-user-feedback div:last-child {
  width: 100%;
  height: calc(100% - 24px);
  border-width: 0;
}
.igv-user-feedback div:last-child div {
  width: auto;
  height: auto;
  margin: 8px;
}

.igv-generic-dialog-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 300px;
  height: 200px;
  border-color: #7F7F7F;
  border-radius: 4px;
  border-style: solid;
  border-width: thin;
  font-family: "Open Sans", sans-serif;
  font-size: medium;
  font-weight: 400;
  z-index: 2048;
  background-color: white;
  display: flex;
  flex-flow: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
}
.igv-generic-dialog-container .igv-generic-dialog-header {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-end;
  align-items: center;
  width: 100%;
  height: 24px;
  cursor: move;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  border-bottom-color: #7F7F7F;
  border-bottom-style: solid;
  border-bottom-width: thin;
  background-color: #eee;
}
.igv-generic-dialog-container .igv-generic-dialog-header div {
  margin-right: 4px;
  margin-bottom: 2px;
  height: 12px;
  width: 12px;
  color: #7F7F7F;
}
.igv-generic-dialog-container .igv-generic-dialog-header div:hover {
  cursor: pointer;
  color: #444;
}
.igv-generic-dialog-container .igv-generic-dialog-one-liner {
  color: #373737;
  width: 95%;
  height: 24px;
  line-height: 24px;
  text-align: left;
  margin-top: 8px;
  padding-left: 8px;
  overflow-wrap: break-word;
  background-color: white;
}
.igv-generic-dialog-container .igv-generic-dialog-label-input {
  margin-top: 8px;
  width: 95%;
  height: 24px;
  color: #373737;
  line-height: 24px;
  padding-left: 8px;
  background-color: white;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
}
.igv-generic-dialog-container .igv-generic-dialog-label-input div {
  width: 30%;
  height: 100%;
  font-size: 16px;
  text-align: right;
  padding-right: 8px;
  background-color: white;
}
.igv-generic-dialog-container .igv-generic-dialog-label-input input {
  display: block;
  height: 100%;
  width: 100%;
  padding-left: 4px;
  font-family: "Open Sans", sans-serif;
  font-weight: 400;
  color: #373737;
  text-align: left;
  outline: none;
  border-style: solid;
  border-width: thin;
  border-color: #7F7F7F;
  background-color: white;
}
.igv-generic-dialog-container .igv-generic-dialog-label-input input {
  width: 50%;
  font-size: 16px;
}
.igv-generic-dialog-container .igv-generic-dialog-input {
  margin-top: 8px;
  width: calc(100% - 16px);
  height: 24px;
  color: #373737;
  line-height: 24px;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-around;
  align-items: center;
}
.igv-generic-dialog-container .igv-generic-dialog-input input {
  display: block;
  height: 100%;
  width: 100%;
  padding-left: 4px;
  font-family: "Open Sans", sans-serif;
  font-weight: 400;
  color: #373737;
  text-align: left;
  outline: none;
  border-style: solid;
  border-width: thin;
  border-color: #7F7F7F;
  background-color: white;
}
.igv-generic-dialog-container .igv-generic-dialog-input input {
  font-size: 16px;
}
.igv-generic-dialog-container .igv-generic-dialog-ok-cancel {
  width: 100%;
  height: 28px;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-around;
  align-items: center;
}
.igv-generic-dialog-container .igv-generic-dialog-ok-cancel div {
  margin-top: 32px;
  color: white;
  font-family: "Open Sans", sans-serif;
  font-size: 14px;
  font-weight: 400;
  width: 75px;
  height: 28px;
  line-height: 28px;
  text-align: center;
  border-color: transparent;
  border-style: solid;
  border-width: thin;
  border-radius: 2px;
}
.igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:first-child {
  margin-left: 32px;
  margin-right: 0;
  background-color: #5ea4e0;
}
.igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:last-child {
  margin-left: 0;
  margin-right: 32px;
  background-color: #c4c4c4;
}
.igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:first-child:hover {
  cursor: pointer;
  background-color: #3b5c7f;
}
.igv-generic-dialog-container .igv-generic-dialog-ok-cancel div:last-child:hover {
  cursor: pointer;
  background-color: #7f7f7f;
}
.igv-generic-dialog-container .igv-generic-dialog-ok {
  width: 100%;
  height: 36px;
  margin-top: 32px;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-around;
  align-items: center;
}
.igv-generic-dialog-container .igv-generic-dialog-ok div {
  width: 98px;
  height: 36px;
  line-height: 36px;
  text-align: center;
  color: white;
  font-family: "Open Sans", sans-serif;
  font-size: medium;
  font-weight: 400;
  border-color: white;
  border-style: solid;
  border-width: thin;
  border-radius: 4px;
  background-color: #2B81AF;
}
.igv-generic-dialog-container .igv-generic-dialog-ok div:hover {
  cursor: pointer;
  background-color: #25597f;
}

.igv-generic-container {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 2048;
  background-color: white;
  cursor: pointer;
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  justify-content: flex-start;
  align-items: center;
}
.igv-generic-container div:first-child {
  cursor: move;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-end;
  align-items: center;
  height: 24px;
  width: 100%;
  background-color: #dddddd;
}
.igv-generic-container div:first-child i {
  display: block;
  color: #5f5f5f;
  cursor: pointer;
  width: 14px;
  height: 14px;
  margin-right: 8px;
  margin-bottom: 4px;
}

.igv-menu-popup {
  position: absolute;
  top: 0;
  left: 0;
  width: max-content;
  max-width: 400px;
  z-index: 512;
  cursor: pointer;
  font-family: "Open Sans", sans-serif;
  font-size: small;
  font-weight: 400;
  color: #4b4b4b;
  background: white;
  border-radius: 4px;
  border-color: #7F7F7F;
  border-style: solid;
  border-width: thin;
  display: flex;
  flex-flow: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: flex-end;
  text-align: left;
}
.igv-menu-popup > div:not(:first-child) {
  width: 100%;
}
.igv-menu-popup > div:not(:first-child) > div {
  background: white;
}
.igv-menu-popup > div:not(:first-child) > div.context-menu {
  padding-left: 4px;
  padding-right: 4px;
}
.igv-menu-popup > div:not(:first-child) > div:last-child {
  border-bottom-left-radius: 4px;
  border-bottom-right-radius: 4px;
  border-bottom-color: transparent;
  border-bottom-style: solid;
  border-bottom-width: thin;
}
.igv-menu-popup > div:not(:first-child) > div:hover {
  background: #efefef;
}

.igv-menu-popup-shim {
  padding-left: 8px;
  padding-right: 8px;
  padding-bottom: 1px;
  padding-top: 1px;
}

.igv-menu-popup-header {
  position: relative;
  width: 100%;
  height: 24px;
  cursor: move;
  border-top-color: transparent;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  border-bottom-color: #7F7F7F;
  border-bottom-style: solid;
  border-bottom-width: thin;
  background-color: #eee;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-end;
  align-items: center;
}
.igv-menu-popup-header div {
  margin-right: 4px;
  height: 12px;
  width: 12px;
  color: #7F7F7F;
}
.igv-menu-popup-header div:hover {
  cursor: pointer;
  color: #444;
}

.igv-menu-popup-check-container {
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
  width: 100%;
  height: 20px;
  margin-right: 4px;
  background-color: transparent;
}
.igv-menu-popup-check-container div {
  padding-top: 2px;
  padding-left: 8px;
}
.igv-menu-popup-check-container div:first-child {
  position: relative;
  width: 12px;
  height: 12px;
}
.igv-menu-popup-check-container div:first-child svg {
  position: absolute;
  width: 12px;
  height: 12px;
}

.igv-user-feedback {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 512px;
  height: 360px;
  z-index: 2048;
  background-color: white;
  border-color: #a2a2a2;
  border-style: solid;
  border-width: thin;
  font-family: "Open Sans", sans-serif;
  font-size: medium;
  font-weight: 400;
  color: #444;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
}
.igv-user-feedback div:first-child {
  position: relative;
  height: 24px;
  width: 100%;
  background-color: white;
  border-bottom-color: #a2a2a2;
  border-bottom-style: solid;
  border-bottom-width: thin;
}
.igv-user-feedback div:first-child div {
  position: absolute;
  top: 2px;
  width: 16px;
  height: 16px;
  background-color: transparent;
}
.igv-user-feedback div:first-child div:first-child {
  left: 8px;
}
.igv-user-feedback div:first-child div:last-child {
  cursor: pointer;
  right: 8px;
}
.igv-user-feedback div:last-child {
  width: 100%;
  height: calc(100% - 24px);
  border-width: 0;
}
.igv-user-feedback div:last-child div {
  width: auto;
  height: auto;
  margin: 8px;
}

.igv-loading-spinner-container {
  z-index: 1024;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 32px;
  height: 32px;
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  justify-content: center;
  align-items: center;
}
.igv-loading-spinner-container > div {
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 4px solid rgba(128, 128, 128, 0.5);
  border-top-color: rgb(255, 255, 255);
  animation: spin 1s ease-in-out infinite;
  -webkit-animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
@-webkit-keyframes spin {
  to {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
.igv-roi-menu {
  position: absolute;
  z-index: 512;
  font-family: "Open Sans", sans-serif;
  font-size: small;
  font-weight: 400;
  color: #4b4b4b;
  background-color: white;
  width: 192px;
  border-radius: 4px;
  border-color: #7F7F7F;
  border-style: solid;
  border-width: thin;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: stretch;
}
.igv-roi-menu > div:first-child {
  height: 24px;
  border-top-color: transparent;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  border-bottom-color: #7F7F7F;
  border-bottom-style: solid;
  border-bottom-width: thin;
  background-color: #eee;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: flex-end;
  align-items: center;
}
.igv-roi-menu > div:first-child > div {
  margin-right: 4px;
  height: 12px;
  width: 12px;
  color: #7F7F7F;
}
.igv-roi-menu > div:first-child > div:hover {
  cursor: pointer;
  color: #444;
}
.igv-roi-menu > div:last-child {
  background-color: white;
  border-bottom-left-radius: 4px;
  border-bottom-right-radius: 4px;
  border-bottom-color: transparent;
  border-bottom-style: solid;
  border-bottom-width: 0;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: stretch;
  text-align: start;
  vertical-align: middle;
}
.igv-roi-menu > div:last-child > div {
  height: 24px;
  padding-left: 4px;
  border-bottom-style: solid;
  border-bottom-width: thin;
  border-bottom-color: #7f7f7f;
}
.igv-roi-menu > div:last-child > div:not(:first-child):hover {
  cursor: pointer;
  background-color: rgba(127, 127, 127, 0.1);
}
.igv-roi-menu > div:last-child div:first-child {
  font-style: italic;
  text-align: center;
  padding-right: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.igv-roi-menu > div:last-child > div:last-child {
  border-bottom-width: 0;
  border-bottom-color: transparent;
}

.igv-roi-placeholder {
  font-style: normal;
  color: rgba(75, 75, 75, 0.6);
}

.igv-roi-table {
  position: absolute;
  z-index: 1024;
  display: flex;
  flex-flow: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: stretch;
  resize: both;
  overflow: hidden;
  width: min-content;
  max-width: 1600px;
  border-color: #7f7f7f;
  border-radius: 4px;
  border-style: solid;
  border-width: thin;
  font-family: "Open Sans", sans-serif;
  font-size: 12px;
  font-weight: 400;
  background-color: white;
  cursor: default;
}
.igv-roi-table > div {
  height: 24px;
  font-size: 14px;
  text-align: start;
  vertical-align: middle;
  line-height: 24px;
}
.igv-roi-table > div:first-child {
  border-color: transparent;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  border-top-width: 0;
  border-bottom-color: #7f7f7f;
  border-bottom-style: solid;
  border-bottom-width: thin;
  background-color: #eee;
  cursor: move;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-between;
  align-items: center;
}
.igv-roi-table > div:first-child > div:first-child {
  text-align: center;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  margin-left: 4px;
  margin-right: 4px;
  width: calc(100% - 4px - 12px);
}
.igv-roi-table > div:first-child > div:last-child {
  margin-right: 4px;
  margin-bottom: 2px;
  height: 12px;
  width: 12px;
  color: #7f7f7f;
}
.igv-roi-table > div:first-child > div:last-child > svg {
  display: block;
}
.igv-roi-table > div:first-child > div:last-child:hover {
  cursor: pointer;
  color: #444;
}
.igv-roi-table > .igv-roi-table-description {
  padding: 4px;
  margin-left: 4px;
  word-break: break-all;
  overflow-y: auto;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  background-color: transparent;
}
.igv-roi-table > .igv-roi-table-goto-explainer {
  margin-top: 5px;
  margin-left: 4px;
  color: #7F7F7F;
  font-style: italic;
  height: 24px;
  border-top: solid lightgray;
  background-color: transparent;
}
.igv-roi-table > .igv-roi-table-column-titles {
  height: 24px;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: stretch;
  align-items: stretch;
  padding-right: 16px;
  background-color: white;
  border-top-color: #7f7f7f;
  border-top-style: solid;
  border-top-width: thin;
  border-bottom-color: #7f7f7f;
  border-bottom-style: solid;
  border-bottom-width: thin;
}
.igv-roi-table > .igv-roi-table-column-titles > div {
  font-size: 14px;
  vertical-align: middle;
  line-height: 24px;
  text-align: left;
  margin-left: 4px;
  height: 24px;
  overflow: hidden;
  text-overflow: ellipsis;
  border-right-color: #7f7f7f;
  border-right-style: solid;
  border-right-width: thin;
}
.igv-roi-table > .igv-roi-table-column-titles > div:last-child {
  border-right: unset;
}
.igv-roi-table > .igv-roi-table-row-container {
  display: flex;
  flex-flow: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: stretch;
  overflow: auto;
  height: 360px;
  flex: 1 1 auto;
  background-color: transparent;
}
.igv-roi-table > .igv-roi-table-row-container > .igv-roi-table-row {
  height: 24px;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: stretch;
  align-items: stretch;
}
.igv-roi-table > .igv-roi-table-row-container > .igv-roi-table-row > div {
  font-size: 14px;
  vertical-align: middle;
  line-height: 24px;
  text-align: left;
  margin-left: 4px;
  height: 24px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  border-right-color: transparent;
  border-right-style: solid;
  border-right-width: thin;
}
.igv-roi-table > .igv-roi-table-row-container > .igv-roi-table-row > div:last-child {
  border-right: unset;
}
.igv-roi-table > .igv-roi-table-row-container > .igv-roi-table-row-hover {
  background-color: rgba(0, 0, 0, 0.04);
}
.igv-roi-table > div:last-child {
  min-height: 32px;
  height: 32px;
  line-height: 32px;
  border-top-color: #7f7f7f;
  border-top-style: solid;
  border-top-width: thin;
  border-bottom-color: transparent;
  border-bottom-left-radius: 4px;
  border-bottom-right-radius: 4px;
  border-bottom-width: 0;
  background-color: #eee;
  display: flex;
  flex-flow: row;
  flex-wrap: nowrap;
  justify-content: space-around;
  align-items: center;
}

.igv-roi-table-row-selected {
  background-color: rgba(0, 0, 0, 0.125);
}

.igv-roi-table-button {
  cursor: pointer;
  height: 20px;
  user-select: none;
  line-height: 20px;
  text-align: center;
  vertical-align: middle;
  font-family: "Open Sans", sans-serif;
  font-size: 13px;
  font-weight: 400;
  color: black;
  padding-left: 6px;
  padding-right: 6px;
  background-color: rgb(239, 239, 239);
  border-color: black;
  border-style: solid;
  border-width: thin;
  border-radius: 3px;
}

.igv-roi-table-button:hover {
  font-weight: 400;
  background-color: rgba(0, 0, 0, 0.13);
}

.igv-roi-region {
  z-index: 64;
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;
  overflow: visible;
  margin-top: 66px;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: stretch;
}
.igv-roi-region > div {
  position: relative;
  width: 100%;
  height: 8px;
  pointer-events: auto;
}

.igv-roi-menu-row {
  height: 24px;
  padding-left: 8px;
  font-size: small;
  text-align: start;
  vertical-align: middle;
  line-height: 24px;
  background-color: white;
}

.igv-roi-menu-row-edit-description {
  width: -webkit-fill-available;
  font-size: small;
  text-align: start;
  vertical-align: middle;
  background-color: white;
  padding-left: 4px;
  padding-right: 4px;
  padding-bottom: 4px;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: stretch;
  align-items: stretch;
}
.igv-roi-menu-row-edit-description > label {
  margin-left: 2px;
  margin-bottom: 0;
  display: block;
  width: -webkit-fill-available;
}
.igv-roi-menu-row-edit-description > input {
  display: block;
  margin-left: 2px;
  margin-right: 2px;
  margin-bottom: 1px;
  width: -webkit-fill-available;
}

.igv-container {
  position: relative;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: flex-start;
  padding-top: 4px;
  user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  min-height: 160px;
}

.igv-viewport {
  position: relative;
  margin-top: 5px;
  line-height: 1;
  overflow-x: hidden;
  overflow-y: hidden;
}

.igv-viewport-content {
  position: relative;
  width: 100%;
}
.igv-viewport-content > canvas {
  position: relative;
  display: block;
}

.igv-column-container {
  position: relative;
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: stretch;
  width: 100%;
}

.igv-column-shim {
  width: 1px;
  margin-left: 2px;
  margin-right: 2px;
  background-color: #545453;
}

.igv-axis-column {
  position: relative;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: flex-start;
  box-sizing: border-box;
  height: 100%;
  width: 50px;
}
.igv-axis-column > div {
  position: relative;
  margin-top: 5px;
  width: 100%;
}
.igv-axis-column > div > div {
  z-index: 512;
  position: absolute;
  top: 8px;
  left: 8px;
  width: fit-content;
  height: fit-content;
  background-color: transparent;
  display: grid;
  align-items: start;
  justify-items: center;
}
.igv-axis-column > div > div > input {
  display: block;
  margin: unset;
  cursor: pointer;
}

.igv-column {
  position: relative;
  position: relative;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: flex-start;
  box-sizing: border-box;
  height: 100%;
}

.igv-sample-info-column {
  position: relative;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: flex-start;
  box-sizing: border-box;
  height: 100%;
}

.igv-sample-name-column {
  position: relative;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: flex-start;
  box-sizing: border-box;
  height: 100%;
}

.igv-scrollbar-column {
  position: relative;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: flex-start;
  box-sizing: border-box;
  height: 100%;
  width: 14px;
}
.igv-scrollbar-column > div {
  position: relative;
  margin-top: 5px;
  width: 14px;
}
.igv-scrollbar-column > div > div {
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 2px;
  width: 8px;
  border-width: 1px;
  border-style: solid;
  border-color: #c4c4c4;
  border-top-left-radius: 4px;
  border-top-right-radius: 4px;
  border-bottom-left-radius: 4px;
  border-bottom-right-radius: 4px;
}
.igv-scrollbar-column > div > div:hover {
  background-color: #c4c4c4;
}

.igv-track-drag-column {
  position: relative;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: flex-start;
  box-sizing: border-box;
  height: 100%;
  width: 12px;
  background-color: white;
}
.igv-track-drag-column > .igv-track-drag-handle {
  z-index: 512;
  position: relative;
  cursor: pointer;
  margin-top: 5px;
  width: 100%;
  border-style: solid;
  border-width: 0;
  border-top-right-radius: 6px;
  border-bottom-right-radius: 6px;
}
.igv-track-drag-column .igv-track-drag-handle-color {
  background-color: #c4c4c4;
}
.igv-track-drag-column .igv-track-drag-handle-hover-color {
  background-color: #787878;
}
.igv-track-drag-column .igv-track-drag-handle-selected-color {
  background-color: #0963fa;
}
.igv-track-drag-column > .igv-track-drag-shim {
  position: relative;
  margin-top: 5px;
  width: 100%;
  border-style: solid;
  border-width: 0;
}

.igv-gear-menu-column {
  position: relative;
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: flex-start;
  box-sizing: border-box;
  height: 100%;
  width: 28px;
}
.igv-gear-menu-column > div {
  display: flex;
  flex-direction: column;
  flex-wrap: nowrap;
  justify-content: flex-start;
  align-items: center;
  margin-top: 5px;
  width: 100%;
  background: white;
}
.igv-gear-menu-column > div > div {
  position: relative;
  margin-top: 4px;
  width: 16px;
  height: 16px;
  color: #7F7F7F;
}
.igv-gear-menu-column > div > div:hover {
  cursor: pointer;
  color: #444;
}

/*# sourceMappingURL=igv.css.map */
`;class bo{constructor(){this.clear()}clear(){this.phenotypeColors=new Map,this.snps=new Set,this.qtl=null}isEmpty(){return this.phenotypeColors.size===0&&this.snps.size===0&&this.qtl===null}addSnp(e){e=e.toUpperCase(),this.snps.add(e)}addPhenotype(e){e=e.toUpperCase();const t=this.phenotypeColors.size;if(!this.phenotypeColors.has(e.toUpperCase())){const n=t<rt.length?rt[t]:qe.randomRGB(0,255);this.phenotypeColors.set(e.toUpperCase(),n)}}hasSnp(e){return e&&this.snps.has(e.toUpperCase())}hasPhenotype(e){return e&&this.phenotypeColors.has(e.toUpperCase())}hasQTL(e){return this.qtls.has(e)}colorForGene(e){return e?this.phenotypeColors.get(e.toUpperCase()):"black"}toJSON(){const e={};return this.phenotypeColors.size>0&&(e.phenotypes=Array.from(this.phenotypeColors.keys())),this.snps.size>0&&(e.snps=Array.from(this.snps)),this.qtl&&(e.qtl=this.qtl),e}static fromJSON(e){const t=new bo;if(e.phenotypes)for(let n of e.phenotypes)t.addPhenotype(n);if(e.snps)for(let n of e.snps)t.addSnp(n);return e.qtl&&(t.qtl=e.qtl),t}}const rt=[];rt.push("rgb(228,26,28)");rt.push("rgb(55,126,184)");rt.push("rgb(77,175,74)");rt.push("rgb(166,86,40)");rt.push("rgb(152,78,163)");rt.push("rgb(255,127,0)");rt.push("rgb(247,129,191)");rt.push("rgb(255,255,51)");rt.push("rgb(102,194,165)");rt.push("rgb(252,141,98)");rt.push("rgb(141, 160, 203)");rt.push("rgb(231, 138, 195)");rt.push("rgb(166, 216, 84)");rt.push("rgb(255, 217, 47)");rt.push("rgb(229, 196, 148)");rt.push("rgb( 141, 211, 199)");rt.push("rgb(255, 255, 179)");rt.push("rgb(190, 186, 218)");rt.push("rgb(251, 128, 114)");rt.push("rgb(128, 177, 211)");rt.push("rgb(253, 180, 98)");rt.push("rgb(179, 222, 105)");rt.push("rgb(252, 205, 229)");rt.push("rgb(188, 128, 189)");rt.push("rgb(204, 235, 197)");rt.push("rgb(255, 237, 111)");const ek=14,tk=12,ik=28,nk=5;class xr{constructor(e,t){ke(this,"qtlSelections",new bo);this.config=e,this.guid=Et(),this.namespace=".browser_"+this.guid,this.parent=t;let n=t.shadowRoot;if(!n){n=t.attachShadow({mode:"open"});const r=new CSSStyleSheet;r.replaceSync(Jx),n.adoptedStyleSheets=[r]}if(this.root=Fe({class:"igv-container"}),n.appendChild(this.root),this.spinner=Fe({class:"igv-loading-spinner-container"}),this.root.appendChild(this.spinner),this.spinner.appendChild(Fe()),this.spinner.style.width="64px",this.spinner.style.height="64px",this.stopSpinner(),this.alert=new x3(this.root),this.columnContainer=Fe({class:"igv-column-container"}),this.root.appendChild(this.columnContainer),this.menuPopup=new L0(this.columnContainer),this.menuUtils=new xg(this),this.initialize(e),this.trackViews=[],this.constants={dragThreshold:3,scrollThreshold:5,defaultColor:"rgb(0,0,150)",doubleClickDelay:e.doubleClickDelay||500},this.eventHandlers={},e.listeners)for(let r of Object.keys(e.listeners))this.on(r,e.listeners[r]);this.on("trackremoved",()=>{this.findTracks(s=>typeof s.getSamples=="function").length===0&&(this.sampleInfoControl.setButtonVisibility(!1),this.sampleNameViewportWidth=void 0,this.showSampleNames=!1,this.sampleNameControl.setState(this.showSampleNames),this.sampleNameControl.hide(),this.layoutChange())}),this.on("didchangecolumnlayout",()=>{if(wi.length>0){const r=wi.length;for(let s=0;s<r;s++)wi[s].dispose();wi.length=0}}),this.addEventHandlers(),this.sampleInfo=new _r(this),this.setControls(e),this.roiManager=new zx(this)}get doShowROITable(){return this.roiManager.roiTableIsVisible()}startSpinner(){this.spinner.style.display="flex"}stopSpinner(){this.spinner.style.display="none"}initialize(e){this.flanking=e.flanking,this.crossDomainProxy=e.crossDomainProxy,this.formats=e.formats,this.trackDefaults=e.trackDefaults,this.nucleotideColors=e.nucleotideColors||Q3;for(let t of Object.keys(this.nucleotideColors))this.nucleotideColors[t.toLowerCase()]=this.nucleotideColors[t];this.doShowTrackLabels=e.showTrackLabels,this.doShowCenterLine=e.showCenterGuide,this.doShowCursorGuide=e.showCursorGuide,this.showSampleNames=e.showSampleNames,this.sampleNameViewportWidth=void 0,e.sampleNameViewportWidth&&(this.sampleNameViewportWidth=e.sampleNameViewportWidth),e.search&&(this.searchConfig={type:"json",url:e.search.url,coords:e.search.coords===void 0?1:e.search.coords,chromosomeField:e.search.chromosomeField||"chromosome",startField:e.search.startField||"start",endField:e.search.endField||"end",geneField:e.search.geneField||"gene",snpField:e.search.snpField||"snp",resultsField:e.search.resultsField})}setControls(e){const t=this.createStandardControls(e);t.insertBefore(ve(this.columnContainer)),this.$navigation=t,e.showControls===!1&&t.hide()}createStandardControls(e){const t=ve("<div>",{class:"igv-navbar"});this.$navigation=t;const n=ve("<div>",{class:"igv-navbar-left-container"});t.append(n);const r=ve("<div>",{class:"igv-logo"});n.append(r);const s=ak();s.css("width","34px"),s.css("height","32px"),r.append(s),this.$current_genome=ve("<div>",{class:"igv-current-genome"}),n.append(this.$current_genome),this.$current_genome.text("");const a=ve("<div>",{class:"igv-navbar-genomic-location"});n.append(a),this.chromosomeSelectWidget=new ox(this,a.get(0)),e.showChromosomeWidget!==!1?this.chromosomeSelectWidget.show():this.chromosomeSelectWidget.hide();const o=ve("<div>",{class:"igv-locus-size-group"});a.append(o);const l=ve("<div>",{class:"igv-search-container"});o.append(l),this.$searchInput=ve("<input>",{class:"igv-search-input",type:"text",placeholder:"Locus Search"}),l.append(this.$searchInput),this.$searchInput[0].addEventListener("keyup",d=>{d.stopImmediatePropagation()}),this.$searchInput.change(()=>this.doSearch(this.$searchInput.val()));const c=Fe({class:"igv-search-icon-container"});l.append(ve(c)),c.appendChild(Pi("search")),c.addEventListener("click",()=>this.doSearch(this.$searchInput.val())),this.windowSizePanel=new lx(o.get(0),this);const h=ve("<div>",{class:"igv-navbar-right-container"});t.append(h);const f=ve('<div class="igv-navbar-toggle-button-container">');if(h.append(f),this.$toggle_button_container=f,this.overlayTrackButton=new vv(this,f.get(0)),this.overlayTrackButton.setVisibility(!1),this.multiTrackSelectButton=new $x(this,f.get(0)),this.cursorGuide=new cx(this.columnContainer,this),this.cursorGuideButton=new ux(this,f.get(0)),this.centerLineButton=new mx(this,f.get(0)),this.setTrackLabelVisibility(e.showTrackLabels),this.trackLabelControl=new Fx(f.get(0),this),this.roiTableControl=new qx(f.get(0),this),this.sampleInfoControl=new xx(f.get(0),this),this.sampleNameControl=new vx(f.get(0),this),e.showSVGButton===!0&&(this.saveImageControl=new Nx(f.get(0),this)),e.customButtons)for(let d of e.customButtons)new Tx(f.get(0),this,d);return this.zoomWidget=new an(this,h.get(0)),e.showNavigation===!1&&this.$navigation.hide(),this.sliderDialog=new _3(this.root),this.sliderDialog.container.id=`igv-slider-dialog-${Et()}`,this.inputDialog=new C3(this.root),this.inputDialog.container.id=`igv-input-dialog-${Et()}`,this.dataRangeDialog=new kg(this,ve(this.root)),this.dataRangeDialog.$container.get(0).id=`igv-data-range-dialog-${Et()}`,this.genericColorPicker=new Rg({parent:this.columnContainer,width:432}),this.genericColorPicker.container.id=`igv-track-color-picker-${Et()}`,t}getSampleNameViewportWidth(){return this.sampleNameViewportWidth===void 0||this.showSampleNames===!1?0:this.sampleNameViewportWidth}getSampleInfoViewportWidth(){return this.getSampleInfoColumnWidth()}isMultiLocusMode(){return this.referenceFrameList&&this.referenceFrameList.length>1}isMultiLocusWholeGenomeView(){if(this.referenceFrameList===void 0||this.referenceFrameList.length===1)return!1;for(let e of this.referenceFrameList)if(e.chr.toLowerCase()==="all")return!0;return!1}currentLoci(){const e=t=>`${t.chr}:${t.start+1}-${t.end}`;return this.referenceFrameList===void 0||this.referenceFrameList.length===0?"":this.referenceFrameList.length===1?e(this.referenceFrameList[0]):this.referenceFrameList.map(t=>e(t))}toSVG(){const{x:e,y:t,width:n,height:r}=this.columnContainer.getBoundingClientRect(),s=r,a={width:n,height:s,backdropColor:"white",multiLocusGap:0,viewbox:{x:0,y:0,width:n,height:s}},o=new mn(a),l={deltaX:0,deltaY:-t};for(let c of this.trackViews)c.renderSVGContext(o,l);return l.deltaX=e,this.roiManager.renderSVGContext(this.columnContainer,o,l),o.getSerializedSvg(!0)}saveSVGtoFile(e,t){let n=this.toSVG();if(t){const a=document.createElement("svg");a.innerHTML=n,t.append(a),t.appendChild(a)}const r=e||"igvjs.svg",s=URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));Ya(r,s),URL.revokeObjectURL(s)}savePNGtoFile(e){const t=this.toSVG(),n=new Blob([t],{type:"image/svg+xml"}),r=URL.createObjectURL(n),s=document.createElement("img"),a=()=>{const o=this.columnContainer.getBoundingClientRect(),l=window.devicePixelRatio,c=o.width*l,h=o.height*l,f=document.createElement("canvas");f.width=c,f.height=h;const d=f.getContext("2d");d.scale(l,l),d.drawImage(s,0,0);const u=f.toDataURL("image/png");e=e||"igvjs.png",Ya(e,u),URL.revokeObjectURL(r)};s.addEventListener("load",a),s.src=r}async loadSession(e){this.sampleInfo.initialize(),this.roiSets=[];let t;return e.url||e.file?t=await xr.loadSessionFile(e):t=e,this.loadSessionObject(t)}static async loadSessionFile(e){const t=e.url||e.file;let n;if(e.url&&ut(e.url)&&(e.url.startsWith("blob:")||e.url.startsWith("data:"))){const r=xr.uncompressSession(e.url);n=JSON.parse(r)}else{let r=e.filename;if(r||(r=e.url?await Bo(e.url):e.file.name),r.endsWith(".xml")){const s=yt.KNOWN_GENOMES,a=await Se.loadString(t);n=new nx(a,s)}else if(r.endsWith("hub.txt"))n={reference:(await wn.loadHub(t,e)).getGenomeConfig()};else if(r.endsWith(".json"))n=await Se.loadJson(t);else throw Error("Unrecognized session file format:"+r)}return eh(n)}async loadSessionObject(e){this.cleanHouseForSession(),this.config=e,e.browsers&&(e=await Vx(e)),this.sampleInfoControl.setButtonVisibility(!1),this.showSampleNames=e.showSampleNames||!1,this.sampleNameControl.setState(this.showSampleNames===!0),e.sampleNameViewportWidth&&(this.sampleNameViewportWidth=e.sampleNameViewportWidth),Wi(this.columnContainer,"igv-axis-column"),Wi(this.columnContainer,"igv-sample-info-column"),Wi(this.columnContainer,"igv-sample-name-column"),Wi(this.columnContainer,"igv-scrollbar-column"),Wi(this.columnContainer,"igv-track-drag-column"),Wi(this.columnContainer,"igv-gear-menu-column");const t=e.reference||e.genome;if(!t){console.warn("No genome or reference object specified");return}const n=ut(t)?await yt.expandReference(this.alert,t):t;if(await this.loadReference(n,n.locus||e.locus),this.centerLineList=this.createCenterLineList(this.columnContainer),e.showIdeogram!==!1){const d=new r1(this);d.id="ideogram";const u=new Al(this,this.columnContainer,d);this.trackViews.push(u)}if(e.showRuler!==!1){const d=new Al(this,this.columnContainer,new av(this));this.trackViews.push(d)}e.qtlSelections&&(this.qtlSelections=bo.fromJSON(e.qtlSelections)),this.roiManager.clearROIs(),e.roi?this.roiManager.loadROI(e.roi):await this.roiManager.reset();const r=[];if(e.sampleinfo)for(const d of e.sampleinfo)d.file?r.push(d.file):this.loadSampleInfo(d);const s=n.tracks||[],a=e.tracks?s.concat(e.tracks):s;a.filter(d=>d.type==="sequence"&&!d.url&&!d.fastaURL).length===0&&a.push({type:"sequence",order:ho,removable:!1});const l=a.filter(d=>d.file!==void 0).map(({file:d})=>d),c=a.filter(d=>d.indexFile!==void 0).map(({indexFile:d})=>d);c.length>0&&l.push(...c),r.length>0&&l.push(...r),l.length>0&&alert(`Local files cannot be loaded automatically.
This session contains references to these local files:
${l.map(d=>`    ${d}`).join(`
`)}`);const h=a.filter(d=>d.file===void 0);let f=1;for(let d of h)d.order===void 0&&(d.order=f++);await this.loadTrackList(h);for(let d of this.trackViews.filter(u=>u.track.type==="ruler"||u.track.type==="ideogram"))await d.updateViews();return this.trackViews.some(d=>d.track.selected)&&this.multiTrackSelectButton.setMultiTrackSelection(!0),this.updateUIWithReferenceFrameList(),this.updateLocusSearchWidget(),a}cleanHouseForSession(){for(let t of this.trackViews)t.removeDOMFromColumnContainer();this.columnContainer.querySelectorAll(".igv-axis-column, .igv-column-shim, .igv-column, .igv-sample-info-column, .igv-sample-name-column, .igv-scrollbar-column, .igv-track-drag-column, .igv-gear-menu-column").forEach(t=>t.remove()),this.trackViews=[],this.circularView&&this.circularView.clearChords()}async loadReference(e,t){this.removeAllTracks(),this.roiManager.clearROIs(),this.multiTrackSelectButton.setMultiTrackSelection(!1);let n;e.gbkURL?n=await A0(e.gbkURL):n=await Jc.createGenome(e,this);const r=this.genome===void 0||this.genome.id!==n.id;this.genome=n,this.updateNavbarDOMWithGenome(n);let s=t||n.initialLocus;if(Array.isArray(s)&&(s=s.join(" ")),!await this.search(s,!0))throw new Error(`Cannot set initial locus ${s}`);if(r){let o;e.hubURL&&(o=(await wn.loadHub(e.hubURL)).getGroupedTrackConfigurations()),this.fireEvent("genomechange",[{genome:n,trackConfigurations:o}]),this.circularView&&this.circularView.setAssembly({name:this.genome.id,id:this.genome.id,chromosomes:Vu(this.genome)})}}updateNavbarDOMWithGenome(e){let t=e.id&&e.id.length<20?e.id:`${e.id.substring(0,8)}...${e.id.substring(e.id.length-8)}`;this.$current_genome.text(t),this.$current_genome.attr("title",e.description),this.config.showChromosomeWidget!==!1&&this.genome.showChromosomeWidget!==!1&&e.chromosomeNames&&e.chromosomeNames.length>1?(this.chromosomeSelectWidget.update(e),this.chromosomeSelectWidget.show()):this.chromosomeSelectWidget.hide()}async loadGenome(e){e.genarkAccession&&(e.url=k0(e.genarkAccession)),e.url&&(ut(e.url)&&e.url.endsWith("/hub.txt")?(e.hubURL=e.url,delete e.url):rk(e.url)==="gbk"&&(e.gbkURL=e.url,delete e.url));let t;e.hubURL||e.url&&ut(e.url)&&e.url.endsWith("/hub.txt")?t=(await wn.loadHub(e.hubURL||e.url,e)).getGenomeConfig():ut(e)||!(e.url||e.fastaURL||e.twoBitURL||e.gbkURL)?t=await yt.expandReference(this.alert,e):t=e,await this.loadReference(t);let r;return t.gbkURL||t.format==="gbk"?r=[{name:"Annotations",format:"gbk",url:t.gbkURL}]:r=t.tracks||[],r.filter(a=>a.type==="sequence").length===0&&r.push({type:"sequence",order:ho}),await this.loadTrackList(r),await this.updateViews(),this.genome}async loadTrackHub(e){const t=await wn.loadHub(e.url,e),n=eh(t.getGenomeConfig());return this.loadGenome(n)}updateUIWithReferenceFrameList(){const e=this.referenceFrameList;this.isMultiLocusWholeGenomeView()||yt.isWholeGenomeView(e[0].chr),Zc(this,this.$navigation.width()),Xl(this.trackViews,this.doShowTrackLabels),this.doShowCenterLine&&yt.isWholeGenomeView(e[0].chr)&&this.centerLineButton.boundMouseClickHandler(),this.doShowCursorGuide&&yt.isWholeGenomeView(e[0].chr)&&this.cursorGuideButton.boundMouseClickHandler(),this.setCenterLineAndCenterLineButtonVisibility(yt.isWholeGenomeView(e[0].chr))}setCenterLineAndCenterLineButtonVisibility(e){e?this.centerLineButton.setVisibility(!e):this.centerLineButton.setVisibility(this.config.showCenterGuideButton);for(let t of this.centerLineList)e?this.setCenterLineVisibility(!e):this.setCenterLineVisibility(this.doShowCenterLine)}setTrackLabelVisibility(e){Xl(this.trackViews,e)}setROITableVisibility(e){e===!0?this.roiManager.presentTable():this.roiManager.dismissTable()}setCursorGuideVisibility(e){e?this.cursorGuide.show():this.cursorGuide.hide()}setCustomCursorGuideMouseHandler(e){this.cursorGuide.customMouseHandler=e}setCenterLineVisibility(e){for(let t of this.centerLineList)e===!0?(t.show(),t.repaint()):t.hide()}async loadTrackList(e){let t=0;for(let a of e)a.order===void 0&&(a.order=t++);const n=[];for(let a of e)n.push(this._loadTrack(a));const r=await Promise.all(n);return this.trackViews.filter(function(a){return a.track.autoscaleGroup}).length>0&&this.updateViews(),r}async loadTrack(e){e.sync=e.sync!==!1;const t=this._loadTrack(e);return t&&e.autoscaleGroup&&(await t,this.updateViews()),t}async _loadTrack(e){ut(e)&&(e=JSON.parse(e));try{if(e.hidden){await Wt(e,this.genome).getFeatures({chr:"1",start:0,end:Number.MAX_SAFE_INTEGER});return}const t=await this.createTrack(e);if(e.type==="sampleinfo"){this.layoutChange();return}else if(t===void 0)return;return this.addTrack(e,t)}catch(t){let n=t.message||t.error||t.toString();const r={401:"Access unauthorized",403:"Access forbidden",404:"Not found"};r.hasOwnProperty(n)&&(n=r[n]),n=`${n} : ${tn(e.url)?e.url.name:e.url}`;const s=new Error(n);throw console.error(s),s}}async addTrack(e,t){t.order===void 0&&(t.order=this.trackViews.length);const n=new Al(this,this.columnContainer,t);if(this.trackViews.push(n),Xl(this.trackViews,this.doShowTrackLabels),typeof t.postInit=="function")try{n.startSpinner(),await t.postInit()}finally{n.stopSpinner()}return t.autoscaleGroup||(e.sync?await n.updateViews():n.updateViews()),typeof t.hasSamples=="function"&&t.hasSamples()&&(this.sampleInfo.hasAttributes()&&this.sampleInfoControl.setButtonVisibility(!0),this.config.showSampleNameButton!==!1&&this.sampleNameControl.show()),this.reorderTracks(),this.fireEvent("trackorderchanged",[this.getTrackOrder()]),this.multiTrackSelectButton.setMultiTrackSelection(this.multiTrackSelectButton.enableMultiTrackSelection),t}async loadROI(e){return this.roiManager.loadROI(e,this.genome)}clearROIs(){this.roiManager.clearROIs()}async getUserDefinedROIs(){if(this.roiManager){const e=this.roiManager.getUserDefinedROISet();if(e===void 0)return[];const t=await e.getAllFeatures(),n=[];for(let r of Object.values(t))n.push(...r);return n}else return[]}getRulerTrackView(){const e=this.trackViews.filter(({track:t})=>t.id==="ruler");return e.length>0?e[0]:void 0}async createTrack(e){let t=await Iw(e.url||e.fastaURL);if(ut(t)&&(t=t.trim()),t)if(e.format)e.format=e.format.toLowerCase();else if(e.fastaURL)e.format="fasta";else if(e.sourceType)e.sourceType==="htsget"&&await Ch.inferFormat(e);else{const s=await am(e);s&&(e.format=s)}e.type&&zg(e);let n=e.type?e.type.toLowerCase():void 0;if(!n){if(e.format){if(e.format==="hic"){const s=new Rh(e);if(await s.readHeaderAndFooter(),s.chromosomeIndexMap.celltype)n="shoebox",e._hicFile=s;else throw Error("'.hic' files not supported")}else if(n=Lg(e.format),n==="bedtype"){const s=Wt(e,this.genome);e._featureSource=s;const a=await s.trackType();a?n=a:n="annotation"}}else throw Error(`Unrecognized track:  ${JSON.stringify(e)}`);e.type=n}if(this.trackDefaults&&n){const s=this.trackDefaults[n];if(s)for(let a in s)s.hasOwnProperty(a)&&e[a]===void 0&&(e[a]=s[a])}const r=ex(n,e,this);if(r===void 0)this.alert.present(new Error(`Error creating track.  Could not determine track type for file: ${e.url||e}`),void 0);else return e.roi&&e.roi.length>0&&(r.roiSets=e.roi.map(s=>new Px(s,this.genome))),r}reorderTracks(){this.trackViews.sort(function(t,n){const r=o=>o.track.id==="ideogram"?1:o.track.id==="ruler"?2:3,s=r(t),a=r(n);if(s===a){const o=t.track.order||0,l=n.track.order||0;return o-l}else return s-a});for(let{axis:t,viewports:n,sampleInfoViewport:r,sampleNameViewport:s,outerScroll:a,dragHandle:o,gearContainer:l}of this.trackViews){t.remove();for(let{$viewport:c}of n)c.detach();r.viewport.remove(),s.viewport.remove(),a.remove(),o.remove(),l.remove()}const e=this.columnContainer.querySelectorAll(".igv-column");for(let{axis:t,viewports:n,sampleInfoViewport:r,sampleNameViewport:s,outerScroll:a,dragHandle:o,gearContainer:l}of this.trackViews){this.columnContainer.querySelector(".igv-axis-column").appendChild(t);for(let c=0;c<e.length;c++){const{$viewport:h}=n[c];e[c].appendChild(h.get(0))}this.columnContainer.querySelector(".igv-sample-info-column").appendChild(r.viewport),this.columnContainer.querySelector(".igv-sample-name-column").appendChild(s.viewport),this.columnContainer.querySelector(".igv-scrollbar-column").appendChild(a),this.columnContainer.querySelector(".igv-track-drag-column").appendChild(o),this.columnContainer.querySelector(".igv-gear-menu-column").appendChild(l)}}getTrackOrder(){return this.trackViews.filter(e=>e.track&&e.track.name).map(e=>e.track.name)}getSelectedTrackViews(){return this.trackViews.filter(e=>e.track.selected===!0)}removeTrackByName(e){const t=this.trackViews.slice();for(let n of t)e===n.track.name&&this.removeTrack(n.track)}removeTrack(e){for(let t of this.trackViews)if(e===t.track){this._removeTrack(t.track);break}}_removeTrack(e){e.disposed||(this.trackViews.splice(this.trackViews.indexOf(e.trackView),1),this.fireEvent("trackremoved",[e]),this.fireEvent("trackorderchanged",[this.getTrackOrder()]),e.trackView&&e.trackView.dispose())}removeAllTracks(){const e=this.trackViews;this.trackViews=[];for(let t of e)t.track.id!=="ruler"&&t.track.id!=="ideogram"?(this.fireEvent("trackremoved",[t.track]),t.dispose()):this.trackViews.push(t)}get ideogramTrackView(){return this.trackViews[0]}get rulerTrackView(){return this.trackViews[1]}findTracks(e,t){let n=typeof e=="function"?r=>e(r.track):r=>t===r.track[e];return this.trackViews.filter(n).map(r=>r.track)}get tracks(){return this.trackViews.map(e=>e.track).filter(e=>e!==void 0)}setTrackHeight(e){this.trackHeight=e,this.trackViews.forEach(function(t){t.setTrackHeight(e)})}async visibilityChange(){this.layoutChange()}async layoutChange(){if(this.referenceFrameList.find(t=>t.bpPerPixel<0)){const t=this.calculateViewportWidth(this.referenceFrameList.length);for(let n of this.referenceFrameList)n.bpPerPixel=(n.end-n.start)/t}this.referenceFrameList&&(this.isMultiLocusWholeGenomeView()||yt.isWholeGenomeView(this.referenceFrameList[0].chr),Zc(this,this.$navigation.width())),Zl.call(this),await this.updateViews()}async updateViews(){const e=this.trackViews;this.updateLocusSearchWidget();for(let t of this.referenceFrameList)t.bpPerPixel<=Eh&&await this.genome.getSequence(t.chr,t.start,t.start+1);for(let t of this.centerLineList)t.repaint();if(this.dragObject)for(let t of e)await t.updateViews();else{const t={},n=[];for(const r of e)if(r.track.autoscaleGroup){const s=r.track.autoscaleGroup;t[s]||(t[s]=[]),t[s].push(r)}else n.push(r);if(Object.entries(t).length>0)for(const[r,s]of Object.entries(t)){const a=await Promise.all(s.map(l=>l.getInViewFeatures())),o=Ts(a.flat());for(const l of s)l.track.dataRange=Object.assign({},o),l.track.autoscale=!1;await Promise.all(s.map(l=>l.updateViews()))}await Promise.all(n.map(r=>r.updateViews()))}}repaintViews(){for(let e of this.trackViews)e.repaintViews()}updateLocusSearchWidget(){if(!this.referenceFrameList)return;const e=this.referenceFrameList,t=this.calculateViewportWidth(this.referenceFrameList.length);for(let r of e)r.end=r.start+r.bpPerPixel*t;this.chromosomeSelectWidget&&(this.chromosomeSelectWidget.select.value=e.length===1?this.referenceFrameList[0].chr:"");const n=this.referenceFrameList.map(r=>r.getLocusString()).join(" ");this.$searchInput.val(n),this.fireEvent("locuschange",[this.referenceFrameList])}calculateViewportWidth(e){let{width:t}=this.columnContainer.getBoundingClientRect();return t-=Cv+this.getSampleInfoViewportWidth()+this.getSampleNameViewportWidth()+ek+tk+ik,t-=nk*(e-1),Math.floor(t/e)}minimumBases(){return this.config.minimumBases}zoomIn(){this.zoomWithScaleFactor(.5)}zoomOut(){this.zoomWithScaleFactor(2)}async zoomWithScaleFactor(e,t,n){if(!this.referenceFrameList)return;const r=this.calculateViewportWidth(this.referenceFrameList.length);let s=n?[n]:this.referenceFrameList;for(let a of s)a.zoomWithScaleFactor(this,e,r,t)}async addMultiLocusPanel(e,t,n,r){if(!this.referenceFrameList)return;const s=this.calculateViewportWidth(1+this.referenceFrameList.length),a=this.calculateViewportWidth(this.referenceFrameList.length)/this.calculateViewportWidth(1+this.referenceFrameList.length);for(let u of this.referenceFrameList)u.bpPerPixel*=a;const o=(n-t)/s,l=new o1(this.genome,e,t,n,o),c=r?this.referenceFrameList.indexOf(r):this.referenceFrameList.length-1,h=1+c,{$viewport:f}=this.trackViews[0].viewports[c],d=Kl.insertAfter(f.get(0).parentElement);if(this.fireEvent("didchangecolumnlayout"),h===this.referenceFrameList.length){this.referenceFrameList.push(l);for(let u of this.trackViews){const p=Nc(u,d,l);u.viewports.push(p)}}else{this.referenceFrameList.splice(h,0,l);for(let u of this.trackViews){const p=Nc(u,d,l);u.viewports.splice(h,0,p)}}this.centerLineList=this.createCenterLineList(this.columnContainer),Zl.call(this),await this.updateViews(!0)}createCenterLineList(e){const t=e.querySelectorAll(".igv-center-line");for(let s=0;s<t.length;s++)t[s].remove();const n=[],r=e.querySelectorAll(".igv-column");for(let s=0;s<r.length;s++)n.push(new Bx(this,this.referenceFrameList[s],r[s]));return n}async removeMultiLocusPanel(e){const t=this.referenceFrameList.indexOf(e),{$viewport:n}=this.trackViews[0].viewports[t];Kl.removeColumnAtIndex(t,n.parent().get(0)),this.fireEvent("didchangecolumnlayout");for(let{viewports:s}of this.trackViews)s[t].dispose(),s.splice(t,1);if(this.referenceFrameList.splice(t,1),this.referenceFrameList.length===1&&this.getRulerTrackView())for(let s of this.getRulerTrackView().viewports)s.dismissLocusLabel();const r=this.calculateViewportWidth(1+this.referenceFrameList.length)/this.calculateViewportWidth(this.referenceFrameList.length);await this.rescaleForMultiLocus(r)}async gotoMultilocusPanel(e){const t=this.referenceFrameList.indexOf(e);this.columnContainer.querySelectorAll(".igv-column").forEach((r,s)=>{s===t||r.remove()}),this.columnContainer.querySelectorAll(".igv-column-shim").forEach(r=>r.remove());for(let r of this.trackViews){const s=r.viewports[t];r.viewports.filter((a,o)=>o!==t).forEach(a=>a.dispose()),r.viewports=[s]}const n=this.calculateViewportWidth(1);e.bpPerPixel=(e.end-e.start)/n,this.referenceFrameList=[e],this.trackViews.forEach(({viewports:r})=>r.forEach(s=>s.setWidth(n))),this.centerLineList=this.createCenterLineList(this.columnContainer),this.updateUIWithReferenceFrameList(),await this.updateViews(!0)}async rescaleForMultiLocus(e){const t=this.calculateViewportWidth(this.referenceFrameList.length);for(let n of this.referenceFrameList)n.bpPerPixel*=e;for(let{viewports:n}of this.trackViews)for(let r of n)r.setWidth(t);this.centerLineList=this.createCenterLineList(this.columnContainer),this.updateUIWithReferenceFrameList(),await this.updateViews()}async goto(e,t,n){await this.search(e+":"+t+"-"+n)}async doSearch(e,t){const n=await this.search(e,t);return n||this.alert.present(new Error(`Unrecognized locus: <b> ${e} </b>`)),n}async search(e,t){const n=await O9(this,e);if(n&&n.length>0){this.referenceFrameList=rx(n,this.genome,this.flanking,this.minimumBases(),this.calculateViewportWidth(n.length),this.isSoftclipped());for(let r of this.trackViews)r.removeViewportsFromColumnContainer();this.columnContainer.querySelectorAll(".igv-column-shim, .igv-column").forEach(r=>r.remove()),Kl.insertBefore(this.columnContainer.querySelector(".igv-sample-info-column"),this.referenceFrameList.length),this.fireEvent("didchangecolumnlayout");for(let r of this.trackViews)r.createViewports(this,this.columnContainer,this.referenceFrameList);return this.centerLineList=this.createCenterLineList(this.columnContainer),this.updateUIWithReferenceFrameList(),t||await this.updateViews(),!0}else return!1}async loadSampleInfo(e){await this.sampleInfo.loadSampleInfoFile(e.url);for(const{sampleInfoViewport:n}of this.trackViews)n.setWidth(this.getSampleInfoColumnWidth());this.findTracks(n=>typeof n.getSamples=="function").length>0&&(this.sampleInfoControl.performClickWithState(this,!0),this.sampleInfoControl.setButtonVisibility(!0));for(const{sampleInfoViewport:n}of this.trackViews)n.repaint()}getSampleInfoColumnWidth(){if(this.sampleInfo.attributeCount){const t=this.findTracks(a=>typeof a.getSamples=="function").length>0,n=this.sampleInfo.hasAttributes(),r=this.sampleInfoControl.showSampleInfo;return t&&n&&r?this.sampleInfo.attributeCount*tr+Bc:0}else return 0}on(e,t){this.eventHandlers[e]||(this.eventHandlers[e]=[]),this.eventHandlers[e].push(t)}un(e,t){this.off(e,t)}off(e,t){if(!e)this.eventHandlers={};else if(!t)this.eventHandlers[e]=[];else{const n=this.eventHandlers[e];if(!n||n.length===0)console.warn("No handlers to remove for event: "+e);else{const r=n.indexOf(t);r!==-1&&this.eventHandlers[e].splice(r,1)}}}fireEvent(e,t,n){const r=this.eventHandlers[e];if(r===void 0||r.length===0)return;const s=n||window;return r.map(function(o){return o.apply(s,t)})[0]}dispose(){this.removeEventHandlers();for(let e of this.trackViews)e.dispose();this.roiManager&&this.roiManager.dispose()}toJSON(){const e={version:l1()};if(this.showSampleNames!==void 0&&(e.showSampleNames=this.showSampleNames),this.sampleNameViewportWidth&&(e.sampleNameViewportWidth=this.sampleNameViewportWidth),e.reference=this.genome.toJSON(),e.reference.fastaURL instanceof File)throw new Error(`Error. Sessions cannot include local file references ${e.reference.fastaURL.name}.`);if(e.reference.indexURL instanceof File)throw new Error(`Error. Sessions cannot include local file references ${e.reference.indexURL.name}.`);const t=[];let n=this.trackViews[0];for(let{referenceFrame:l}of n.viewports){const c=l.getLocusString();t.push(c)}e.locus=t.length===1?t[0]:t,e.roi=this.roiManager.toJSON(),this.qtlSelections.isEmpty()||(e.qtlSelections=this.qtlSelections.toJSON());const r=[],s=[];for(const{track:l}of this.trackViews)try{let c;typeof l.getState=="function"?c=mt.localFileInspection(l.getState()):l.config&&(c=mt.localFileInspection(l.config)),c&&(c.browser&&delete c.browser,c.order=l.order,r.push(c))}catch(c){const h=`Track: ${l.name}: ${c}`;console.error(h),s.push(h)}if(s.length>0){let l=1,c="Errors encountered saving session: </br>";for(let h of s)c+=` (${l++}) ${h.toString()} <br/>`;throw Error(c)}e.tracks=r;const a=[];for(const l of r)for(const c of Object.keys(l))(c==="file"||c==="indexFile")&&a.push(l[c]);const o=[];if(this.sampleInfo.sampleInfoFiles.length>0){const l=this.sampleInfo.toJSON();l.length>0&&(e.sampleinfo=l);for(const c of this.sampleInfo.sampleInfoFiles){const h=mt.localFileInspection({url:c});h.file&&o.push(h.file)}o.length>0&&a.push(...o)}return a.length>0&&alert(`This session includes reference(s) to local file(s):
${a.map(l=>`    ${l}`).join(`
`)}
Local files cannot be loaded automatically when a saved session is restored.`),e}compressedSession(){const e=JSON.stringify(this.toJSON());return w4(e)}sessionURL(){const e=window.location.href.slice(),t=e.indexOf("?");return(t>0?e.substring(0,t):e)+"?sessionURL=blob:"+this.compressedSession()}mouseDownOnViewport(e,t){var n;n=bs(e),this.vpMouseDown={viewport:t,lastMouseX:n.x,mouseDownX:n.x,lastMouseY:n.y,mouseDownY:n.y,referenceFrame:t.referenceFrame}}cancelTrackPan(){const e=this.dragObject;this.dragObject=void 0,this.isScrolling=!1,this.vpMouseDown=void 0,e&&e.viewport.referenceFrame.start!==e.start&&(this.updateViews(),this.fireEvent("trackdragend",[e.viewport]))}isTrackPanning(){return this.dragObject}isSoftclipped(){return this.trackViews.find(t=>t.track.showSoftClips===!0)!==void 0}startTrackDrag(e){this.dragTrack=e}updateTrackDrag(e){if(e&&this.dragTrack){const t=this.dragTrack,n=this.trackViews.indexOf(e),r=this.trackViews.indexOf(t),s=this.trackViews;s[n]=t,s[r]=e;const a=this.trackViews[n].track.order;this.trackViews[r].track.order=a;const o=s.length;let l=a;if(n<r)for(let c=n+1;c<o;c++){const h=s[c].track;if(h.order<=l)h.order=Math.min(Number.MAX_SAFE_INTEGER,l+1),l=h.order;else break}else for(let c=n-1;c>0;c--){const h=s[c].track;if(h.order>=l)h.order=Math.max(-Number.MAX_SAFE_INTEGER,l-1),l=h.order;else break}this.reorderTracks()}}endTrackDrag(){this.dragTrack?(this.dragTrack=void 0,this.fireEvent("trackorderchanged",[this.getTrackOrder()])):this.dragTrack=void 0}addEventHandlers(){this.addWindowResizeHandler(),this.addRootMouseUpHandler(),this.addRootMouseLeaveHandler(),this.addColumnContainerEventHandlers(),this.addKeyboardHandler()}removeEventHandlers(){this.removeWindowResizeHandler(),this.removeRootMouseUpHandler(),this.removeRootMouseLeaveHandler(),this.removeColumnContainerEventHandlers(),this.removeKeyboardHandler()}addWindowResizeHandler(){this.boundWindowResizeHandler=Zl.bind(this),window.addEventListener("resize",this.boundWindowResizeHandler)}removeWindowResizeHandler(){window.removeEventListener("resize",this.boundWindowResizeHandler)}addRootMouseUpHandler(){this.boundRootMouseUpHandler=rs.bind(this),this.root.addEventListener("mouseup",this.boundRootMouseUpHandler)}removeRootMouseUpHandler(){this.root.removeEventListener("mouseup",this.boundRootMouseUpHandler)}addRootMouseLeaveHandler(){this.boundRootMouseLeaveHandler=rs.bind(this),this.root.addEventListener("mouseleave",this.boundRootMouseLeaveHandler)}removeRootMouseLeaveHandler(){this.root.removeEventListener("mouseleave",this.boundRootMouseLeaveHandler)}addColumnContainerEventHandlers(){this.boundColumnContainerMouseMoveHandler=s2.bind(this),this.boundColumnContainerTouchMoveHandler=s2.bind(this),this.boundColumnContainerMouseLeaveHandler=rs.bind(this),this.boundColumnContainerMouseUpHandler=rs.bind(this),this.boundColumnContainerTouchEndHandler=rs.bind(this),this.columnContainer.addEventListener("mousemove",this.boundColumnContainerMouseMoveHandler),this.columnContainer.addEventListener("touchmove",this.boundColumnContainerTouchMoveHandler),this.columnContainer.addEventListener("mouseleave",this.boundColumnContainerMouseLeaveHandler),this.columnContainer.addEventListener("mouseup",this.boundColumnContainerMouseUpHandler),this.columnContainer.addEventListener("touchend",this.boundColumnContainerTouchEndHandler)}removeColumnContainerEventHandlers(){this.columnContainer.removeEventListener("mousemove",this.boundColumnContainerMouseMoveHandler),this.columnContainer.removeEventListener("touchmove",this.boundColumnContainerTouchMoveHandler),this.columnContainer.removeEventListener("mouseleave",this.boundColumnContainerMouseLeaveHandler),this.columnContainer.removeEventListener("mouseup",this.boundColumnContainerMouseUpHandler),this.columnContainer.removeEventListener("touchend",this.boundColumnContainerTouchEndHandler)}addKeyboardHandler(){this.keyUpHandler=sk.bind(this),document.addEventListener("keyup",this.keyUpHandler)}removeKeyboardHandler(){console.log("Remove handler"),document.addEventListener("keyup",this.keyUpHandler)}static uncompressSession(e){let t;if(e.indexOf("/gzip;base64")>0){t=nn(e);let n="";for(let r of t)n+=String.fromCharCode(r);return n}else{let n=e.substring(5);return b4(n)}}createCircularView(e,t){return t=t===!0,this.circularView=lC(e,this),this.circularViewControl=new ea(this.$toggle_button_container.get(0),this),this.circularView.setAssembly({name:this.genome.id,id:this.genome.id,chromosomes:Vu(this.genome)}),this.circularViewVisible=t,this.circularView}get circularViewVisible(){return this.circularView!==void 0&&this.circularView.visible}set circularViewVisible(e){this.circularView&&(this.circularView.visible=e,this.circularViewControl.setState(e))}}function rk(i){let e;if(i instanceof File)e=i.name;else if(typeof i=="string")e=i;else throw new Error("Input must be a File object or a URL string");return e.split(".").pop().split("?")[0]}async function Zl(){if(!this.referenceFrameList)return;const i=this.calculateViewportWidth(this.referenceFrameList.length);for(let e of this.referenceFrameList){const t=this.referenceFrameList.indexOf(e),{chr:n,genome:r}=e,{bpLength:s}=r.getChromosome(e.chr),a=e.toBP(i);yt.isWholeGenomeView(n)||a>s?e.bpPerPixel=s/i:e.end=e.start+e.toBP(i);for(let{viewports:o}of this.trackViews)o[t].setWidth(i)}this.updateUIWithReferenceFrameList(),await this.updateViews(!0)}function s2(i){i.preventDefault();const{x:e,y:t}=bs(i);if(this.vpMouseDown){const{viewport:n,referenceFrame:r}=this.vpMouseDown,s=Math.abs(e-this.vpMouseDown.mouseDownX)>Math.abs(t-this.vpMouseDown.mouseDownY);if(!this.dragObject&&!this.isScrolling){if(s)this.vpMouseDown.mouseDownX&&Math.abs(e-this.vpMouseDown.mouseDownX)>this.constants.dragThreshold&&(this.dragObject={viewport:n,start:r.start});else if(this.vpMouseDown.mouseDownY&&Math.abs(t-this.vpMouseDown.mouseDownY)>this.constants.scrollThreshold){this.isScrolling=!0;const a=n.$viewport.height(),o=n.trackView.maxViewportContentHeight();this.vpMouseDown.r=a/o}}if(this.dragObject){const a=!this.isSoftclipped();let o=this.vpMouseDown.lastMouseX-e;r.shiftPixels(o,n.$viewport.width(),a)&&this.updateViews(),this.fireEvent("trackdrag")}if(this.isScrolling){const a=this.vpMouseDown.r*(this.vpMouseDown.lastMouseY-t);n.trackView.moveScroller(a)}this.vpMouseDown.lastMouseX=e,this.vpMouseDown.lastMouseY=t}}function rs(i){this.cancelTrackPan(),this.endTrackDrag()}async function sk(i){if(!(!this.referenceFrameList||this.referenceFrameList.length>1)&&(i.code==="KeyF"||i.code==="KeyB")){const e=this.getSelectedTrackViews();if(e.length>0){const t=e[0].track;if(typeof t.nextFeatureAfter=="function"){const n=this.referenceFrameList[0],r=n.viewport?n.viewport.getWidth():this.calculateViewportWidth(this.referenceFrameList.length),s=n.chr.toLowerCase()==="all",a=t.visibilityWindow;if(s||a&&a>0&&n.bpPerPixel*r>a)return;const o=i.code==="KeyF",l=n.chr,c=n.center,h=await t.nextFeatureAfter(l,c,o);if(h){const f=await this.genome.getChromosomeName(h.chr);if(l===f){const d=(h.start+h.end)/2;if(i.shiftKey){const u=this.config.minimumBases||40,p=Math.max(u,1.1*(h.end-h.start));n.start=Math.max(0,d-p/2),n.end=d+p/2,n.bpPerPixel=(n.end-n.start)/r}else n.shift(d-c);this.updateViews()}else{n.chr=f;const d=(h.start+h.end)/2;if(i.shiftKey){const u=this.config.minimumBases||40,p=Math.max(u,1.1*(h.end-h.start));n.start=Math.max(0,d-p/2),n.end=n.start+p,n.bpPerPixel=(n.end-n.start)/r}else n.start=d-r*n.bpPerPixel/2,n.end=n.start+r*n.bpPerPixel;this.updateViews()}}}}}}function ak(){return ve('<svg width="690px" height="324px" viewBox="0 0 690 324" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>IGV</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="IGV" fill="#666666"><polygon id="Path" points="379.54574 8.00169252 455.581247 8.00169252 515.564813 188.87244 532.884012 253.529506 537.108207 253.529506 554.849825 188.87244 614.833392 8.00169252 689.60164 8.00169252 582.729511 320.722144 486.840288 320.722144"></polygon><path d="M261.482414,323.793286 C207.975678,323.793286 168.339046,310.552102 142.571329,284.069337 C116.803612,257.586572 103.919946,217.158702 103.919946,162.784513 C103.919946,108.410325 117.437235,67.8415913 144.472217,41.0770945 C171.507199,14.3125977 212.903894,0.930550071 268.663545,0.930550071 C283.025879,0.930550071 298.232828,1.84616386 314.284849,3.6774189 C330.33687,5.50867394 344.839793,7.97378798 357.794056,11.072835 L357.794056,68.968378 C339.48912,65.869331 323.578145,63.5450806 310.060654,61.9955571 C296.543163,60.4460336 284.574731,59.6712835 274.154998,59.6712835 C255.850062,59.6712835 240.502308,61.4320792 228.111274,64.9537236 C215.720241,68.4753679 205.793482,74.2507779 198.330701,82.2801269 C190.867919,90.309476 185.587729,100.87425 182.48997,113.974767 C179.392212,127.075284 177.843356,143.345037 177.843356,162.784513 C177.843356,181.942258 179.251407,198.000716 182.067551,210.960367 C184.883695,223.920018 189.671068,234.41436 196.429813,242.443709 C203.188559,250.473058 212.059279,256.178037 223.042241,259.558815 C234.025202,262.939594 247.683295,264.629958 264.01693,264.629958 C268.241146,264.629958 273.098922,264.489094 278.590403,264.207362 C284.081883,263.925631 289.643684,263.50304 295.275972,262.939577 L295.275972,159.826347 L361.595831,159.826347 L361.595831,308.579859 C344.698967,313.087564 327.239137,316.750019 309.215815,319.567334 C291.192494,322.38465 275.281519,323.793286 261.482414,323.793286 L261.482414,323.793286 L261.482414,323.793286 Z" id="Path"></path>;<polygon id="Path" points="0.81355666 5.00169252 73.0472883 5.00169252 73.0472883 317.722144 0.81355666 317.722144"></polygon></g> </g> </svg>')}function Xl(i,e){for(let{viewports:t}of i)for(let n of t)n.$trackLabel&&(t.indexOf(n)===0&&e===!0?n.$trackLabel.show():n.$trackLabel.hide())}let kr=[];async function ok(i,e){e===void 0&&(e={}),yt.KNOWN_GENOMES||await yt.initializeGenomes(e),eh(e),e.queryParametersSupported&&fk(e),e.apiKey&&Se.setApiKey(e.apiKey),e.oauthToken&&Se.setOauthToken(e.oauthToken),e.clientId&&!Pn()&&await x4({client_id:e.clientId,apiKey:e.apiKey,scope:"https://www.googleapis.com/auth/userinfo.profile"});const t=new xr(e,i);kr.push(t),t.startSpinner();const n=e.sessionURL||e.session||e.hubURL;return n?await t.loadSession({url:n}):await t.loadSessionObject(e),t.stopSpinner(),Zc(t,t.$navigation.width()),t}function lk(i){i.dispose(),i.root.remove(),kr=kr.filter(e=>e!==i)}function ck(){for(let i of kr)i.dispose(),i.root.remove();kr=[]}async function hk(){for(let i of kr)await i.visibilityChange()}function eh(i){return i.minimumBases===void 0&&(i.minimumBases=40),i.showIdeogram===void 0&&(i.showIdeogram=!0),i.showCircularView===void 0&&(i.showCircularView=!1),i.showCircularViewButton===void 0&&(i.showCircularViewButton=!1),i.showTrackLabelButton===void 0&&(i.showTrackLabelButton=!0),i.showTrackLabels===void 0&&(i.showTrackLabels=!0),i.showCursorTrackingGuideButton===void 0&&(i.showCursorTrackingGuideButton=!0),i.showCursorGuide===void 0&&(i.showCursorGuide=i.showCursorTrackingGuide||!1),i.showCenterGuideButton===void 0&&(i.showCenterGuideButton=!0),i.showCenterGuide===void 0&&(i.showCenterGuide=!1),i.showSampleNames===void 0&&(i.showSampleNames=!1),i.showSVGButton===void 0&&(i.showSVGButton=!0),i.showControls===void 0&&(i.showControls=!0),i.showNavigation===void 0&&(i.showNavigation=!0),i.showRuler===void 0&&(i.showRuler=!0),i.flanking===void 0&&(i.flanking=1e3),i.pairsSupported===void 0&&(i.pairsSupported=!0),i.tracks||(i.tracks=[]),i}function fk(i){var e,t,n,r,s,a,o,l,c,h;l=window.location.href,a={},e=l.indexOf("?"),t=l.lastIndexOf("#");let f,d,u;if(e>=0)for(t<0&&(t=l.length),n=e+1;n<t;)r=l.indexOf("&",n),r<0&&(r=t),s=l.substring(n,r),o=s.split("=",2),o.length===2?(c=o[0],h=decodeURIComponent(o[1]),c==="file"?f=h.split(","):c==="index"?d=h.split(","):c==="name"?u=h.split(","):c==="genome"?(h.startsWith("https://")||h.startsWith("http://"))&&!h.endsWith(".json")?i.reference={fastaURL:h,indexURL:h+".fai"}:(i[c]=h,i.reference=void 0):(c==="reference"&&(i.genome=void 0),i[c]=h),n=r+1):n++;if(f){i.tracks||(i.tracks=[]);for(let p=0;p<f.length;p++){if(f[p].endsWith(".xml")||f[p].endsWith(".json")){i.sessionURL=f[p];break}const m={url:f[p]};d&&d.length>p&&(m.indexURL=d[p]),u&&u.length>p&&(m.name=u[p]),i.tracks.push(m)}}return a}async function dk(i,e){return await xr.prototype.createTrack.call(e,i)}const uk=Se.setApiKey;function pk(i){return Se.setOauthToken(i)}function gk(i,e){return Se.setOauthToken(i,e)}const mk=Se.oauth;var a2={TrackUtils:k3,IGVGraphics:de,MenuUtils:xg,DataRangeDialog:kg,createTrack:dk,createBrowser:ok,removeBrowser:lk,removeAllBrowsers:ck,visibilityChange:hk,setGoogleOauthToken:pk,setOauthToken:gk,oauth:mk,version:l1,setApiKey:uk,TrackBase:mt,registerTrackClass:tx,registerTrackCreatorFunction:ix,registerFileFormats:w5,loadSessionFile:xr.loadSessionFile};function o2(i){let e,t="Reference genome not loaded";return{c(){e=th("p"),e.textContent=t},l(n){e=ih(n,"P",{"data-svelte-h":!0}),b1(e)!=="svelte-h7nz0k"&&(e.textContent=t)},m(n,r){Qa(n,e,r)},d(n){n&&or(e)}}}function wk(i){let e,t,n=i[0].url===void 0&&o2();return{c(){n&&n.c(),e=g1(),t=th("div"),this.h()},l(r){n&&n.l(r),e=m1(r),t=ih(r,"DIV",{id:!0}),c2(t).forEach(or),this.h()},h(){h2(t,"id","igv_div")},m(r,s){n&&n.m(r,s),Qa(r,e,s),Qa(r,t,s)},p(r,[s]){r[0].url===void 0?n||(n=o2(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Jl,o:Jl,d(r){r&&(or(e),or(t)),n&&n.d(r)}}}function bk(i,e,t){let n,r,s,a,o,l;Or(i,x1,d=>t(3,r=d)),Or(i,I1,d=>t(4,s=d)),Or(i,k1,d=>t(0,a=d)),Or(i,Ho,d=>t(5,o=d)),Or(i,S1,d=>t(6,l=d));let c,h=!1;w1(()=>{t(2,h=!0)});async function f(){const d=document.getElementById("igv_div");d!==null&&(t(1,c=await a2.createBrowser(d,n).catch(u=>{tf(Ho,o.locus=void 0,o)})),c!==void 0&&c.on("locuschange",u=>{let p=u.map(m=>m.getLocusString()).join("%20");tf(Ho,o.locus=p,o)}))}return N1(()=>{c!==void 0&&a2.removeAllBrowsers()}),i.$$.update=()=>{i.$$.dirty&121&&(n={loadDefaultGenomes:!1,search:!1,locus:o.locus,reference:{id:a.filename,name:a.filename,fastaURL:a.url,indexURL:a.indexUrl,wholeGenomeView:!1,tracks:[{name:"TA Sites",format:"bed",displayMode:"expanded",height:40,url:r.url,indexURL:r.indexUrl,visibilityWindow:0,color:"#34495e"},...Array.from(l).map(([d,u])=>({type:"wig",name:d,format:"wig",height:100,logScale:!0,windowFunction:"mean",visibilityWindow:void 0,autoscaleGroup:"insertPlots",url:E1(u.wig),autoscale:!0,color:"rgb(59, 61, 145)",altColor:"rgb(236, 72, 153)"})),{name:"Annotations",format:"gff3",displayMode:"expanded",height:160,url:s.url,indexURL:s.indexUrl,visibilityWindow:0,color:d=>{switch(d.strand){case"-":return"blueviolet";case"+":return"blue";default:return"black"}}}]}}),i.$$.dirty&31&&h&&c==null&&a.url!==void 0&&s.url!==void 0&&r.url!==void 0&&f()},[a,c,h,r,s,o,l]}class Fk extends f2{constructor(e){super(),d2(this,e,bk,wk,l2,{})}}function yk(i){let e,t,n;return t=new Fk({}),{c(){e=th("div"),F1(t.$$.fragment),this.h()},l(r){e=ih(r,"DIV",{class:!0});var s=c2(e);y1(t.$$.fragment,s),s.forEach(or),this.h()},h(){h2(e,"class","h-full variant-filled-secondary !bg-white p-2")},m(r,s){Qa(r,e,s),A1(t,e,null),n=!0},p:Jl,i(r){n||(v1(t.$$.fragment,r),n=!0)},o(r){_1(t.$$.fragment,r),n=!1},d(r){r&&or(e),C1(t)}}}class Dk extends f2{constructor(e){super(),d2(this,e,null,yk,l2,{})}}export{Dk as component};
