import{s as Q,e as w,t as ee,a as x,c as I,b as $,d as te,f as v,g as C,l as U,m as y,u as M,i as T,h as p,j as ae,k as X,H as ne,I as oe,n as se,J as re}from"../chunks/BhI1zJCn.js";import{S as Y,i as Z,t as E,g as H,a as D,c as L,b as R,d as j,m as q,e as z}from"../chunks/Cx8QCVXx.js";import{e as G}from"../chunks/CzSYVJTr.js";import{i as le}from"../chunks/C1t0Bbsy.js";import{D as ie,a as ce}from"../chunks/DybIDsOK.js";import{a as fe}from"../chunks/CYJFvo7s.js";import{g as de,P as V}from"../chunks/CT0txMk3.js";import"../chunks/CTwa16_9.js";import{P as me}from"../chunks/LTQc53xn.js";function N(d){let e,t;return e=new ce({props:{handler:d[1],filename:`${d[0]}.csv`}}),{c(){R(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){q(e,a,o),t=!0},p(a,o){const n={};o&2&&(n.handler=a[1]),o&1&&(n.filename=`${a[0]}.csv`),e.$set(n)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){D(e.$$.fragment,a),t=!1},d(a){z(e,a)}}}function J(d){let e,t,a;return t=new me({props:{value:void 0,width:"w-14",strokeLinecap:"round"}}),{c(){e=w("div"),R(t.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0});var n=$(e);j(t.$$.fragment,n),n.forEach(v),this.h()},h(){y(e,"class","flex items-center justify-center align-middle m-12")},m(o,n){T(o,e,n),q(t,e,null),a=!0},p:se,i(o){a||(E(t.$$.fragment,o),a=!0)},o(o){D(t.$$.fragment,o),a=!1},d(o){o&&v(e),z(t)}}}function ue(d){let e,t,a,o,n,h,u,l,_,r,s,i,g,P="The insert index is the number of inserts in a feature divided by the feature length.",k,c=d[1]&&N(d),f=d[2]&&J();return{c(){e=w("div"),t=w("header"),a=w("div"),o=w("h2"),n=ee(d[0]),h=x(),u=w("div"),c&&c.c(),l=x(),_=w("section"),r=w("div"),s=x(),f&&f.c(),i=x(),g=w("footer"),g.textContent=P,this.h()},l(m){e=I(m,"DIV",{class:!0});var b=$(e);t=I(b,"HEADER",{class:!0});var O=$(t);a=I(O,"DIV",{class:!0});var S=$(a);o=I(S,"H2",{class:!0});var A=$(o);n=te(A,d[0]),A.forEach(v),h=C(S),u=I(S,"DIV",{});var F=$(u);c&&c.l(F),F.forEach(v),S.forEach(v),O.forEach(v),l=C(b),_=I(b,"SECTION",{class:!0});var B=$(_);r=I(B,"DIV",{id:!0,style:!0}),$(r).forEach(v),s=C(B),f&&f.l(B),B.forEach(v),i=C(b),g=I(b,"FOOTER",{class:!0,"data-svelte-h":!0}),U(g)!=="svelte-1sqs8gt"&&(g.textContent=P),b.forEach(v),this.h()},h(){y(o,"class","h3"),y(a,"class","flex justify-between align-middle"),y(t,"class","card-header"),y(r,"id",d[3]),M(r,"width","100%"),M(r,"height","100%"),y(_,"class","p-4"),y(g,"class","card-footer"),y(e,"class","card")},m(m,b){T(m,e,b),p(e,t),p(t,a),p(a,o),p(o,n),p(a,h),p(a,u),c&&c.m(u,null),p(e,l),p(e,_),p(_,r),p(_,s),f&&f.m(_,null),p(e,i),p(e,g),k=!0},p(m,[b]){(!k||b&1)&&ae(n,m[0]),m[1]?c?(c.p(m,b),b&2&&E(c,1)):(c=N(m),c.c(),E(c,1),c.m(u,null)):c&&(H(),D(c,1,1,()=>{c=null}),L()),m[2]?f?(f.p(m,b),b&4&&E(f,1)):(f=J(),f.c(),E(f,1),f.m(_,null)):f&&(H(),D(f,1,1,()=>{f=null}),L())},i(m){k||(E(c),E(f),k=!0)},o(m){D(c),D(f),k=!1},d(m){m&&v(e),c&&c.d(),f&&f.d()}}}function he(d,e,t){let a;X(d,fe,s=>t(5,a=s));let{filename:o}=e,{data:n}=e,h,u=`plotly-${o}`,l=!0;const _=()=>{const s=document.getElementById(u);s&&V.relayout(s,{width:s.clientWidth,height:s.clientHeight})},r=()=>{V.downloadImage(document.getElementById(u),{format:"svg",filename:o||"plot"})};return ne(async()=>{const s=await de(a.filteredFeatures,n);t(1,h=new ie(s,{rowsPerPage:5}));const i=s.reduce((c,f)=>{const m=f.seqId;return c[m]||(c[m]=[]),c[m].push(f),c},{});let g=[];for(const[c,f]of Object.entries(i))g.push({x:f.map(m=>m.start),y:f.map(m=>m.insIndex),text:f.map(m=>m.name),textfont:{family:"Times New Roman"},textposition:"bottom center",type:"scatter",mode:"markers",name:c});const P={yaxis:{title:"Insert Index"},xaxis:{zeroline:!1,rangemode:"nonnegative"},margin:{b:25,t:25,r:25},barmode:"overlay",modebar:{orientation:"v"},legend:{x:1,xanchor:"right",y:1}},k={modeBarButtonsToRemove:["autoScale2d"],responsive:!0,displaylogo:!1,modeBarButtonsToAdd:[{name:"Download plot as svg",icon:V.Icons.camera,click:r}]};V.newPlot(u,g,P,k),window.addEventListener("resize",_),t(2,l=!1)}),oe(()=>{window.removeEventListener("resize",_)}),d.$$set=s=>{"filename"in s&&t(0,o=s.filename),"data"in s&&t(4,n=s.data)},[o,h,l,u,n]}class ge extends Y{constructor(e){super(),Z(this,e,he,ue,Q,{filename:0,data:4})}}function W(d,e,t){const a=d.slice();return a[1]=e[t][0],a[2]=e[t][1],a[4]=t,a}function K(d){let e,t,a,o;return t=new ge({props:{filename:d[1],data:d[2].chromosomes}}),{c(){e=w("div"),R(t.$$.fragment),a=x(),this.h()},l(n){e=I(n,"DIV",{class:!0});var h=$(e);j(t.$$.fragment,h),a=C(h),h.forEach(v),this.h()},h(){y(e,"class","m-4")},m(n,h){T(n,e,h),q(t,e,null),p(e,a),o=!0},p(n,h){const u={};h&1&&(u.filename=n[1]),h&1&&(u.data=n[2].chromosomes),t.$set(u)},i(n){o||(E(t.$$.fragment,n),o=!0)},o(n){D(t.$$.fragment,n),o=!1},d(n){n&&v(e),z(t)}}}function pe(d){let e,t,a='<h1 class="h1 mb-1">Chromosomal location bias</h1> <p>Explore the chromosomal location bias of the insertions in your dataset. For more detailed analysis and bias correction see <a class="anchor" href="https://github.com/BarquistLab/ChromoCorrect" target="_blank">ChromoCorrect</a>.</p>',o,n,h,u=G(d[0]),l=[];for(let r=0;r<u.length;r+=1)l[r]=K(W(d,u,r));const _=r=>D(l[r],1,1,()=>{l[r]=null});return{c(){e=w("div"),t=w("div"),t.innerHTML=a,o=x(),n=w("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=I(r,"DIV",{class:!0});var s=$(e);t=I(s,"DIV",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1rxbwma"&&(t.innerHTML=a),o=C(s),n=I(s,"DIV",{class:!0});var i=$(n);for(let g=0;g<l.length;g+=1)l[g].l(i);i.forEach(v),s.forEach(v),this.h()},h(){y(t,"class","mb-4"),y(n,"class","grid grid-cols-1 2xl:grid-cols-2 gap-4"),y(e,"class","m-4")},m(r,s){T(r,e,s),p(e,t),p(e,o),p(e,n);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(n,null);h=!0},p(r,[s]){if(s&1){u=G(r[0]);let i;for(i=0;i<u.length;i+=1){const g=W(r,u,i);l[i]?(l[i].p(g,s),E(l[i],1)):(l[i]=K(g),l[i].c(),E(l[i],1),l[i].m(n,null))}for(H(),i=u.length;i<l.length;i+=1)_(i);L()}},i(r){if(!h){for(let s=0;s<u.length;s+=1)E(l[s]);h=!0}},o(r){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)D(l[s]);h=!1},d(r){r&&v(e),re(l,r)}}}function ve(d,e,t){let a;return X(d,le,o=>t(0,a=o)),[a]}class xe extends Y{constructor(e){super(),Z(this,e,ve,pe,Q,{})}}export{xe as component};
