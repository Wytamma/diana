import{s as le,y as K,A as de,e as z,a as W,c as D,b as S,g as N,f as g,O as oe,p as h,v as J,i as H,h as L,P as j,B as me,C as he,D as ge,J as Ne,Q as ce,w as Ue,z as fe,R as F,F as we,t as Q,o as Y,d as Z,n as X,W as Qe,L as Oe,j as ue,G as qe,I as Ze,k as ae,S as ze}from"../chunks/scheduler.Cnzm-Pn7.js";import{S as se,i as ne,t as C,g as q,a as A,c as G,f as Ge,b as x,d as $,m as ee,e as te}from"../chunks/index.BWxcAyja.js";import{e as De}from"../chunks/each.SoU_5gPK.js";import{g as Xe}from"../chunks/stores.9yxo98nw.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.aA2OJerz.js";import{g as Je}from"../chunks/spread.CN4WR7uZ.js";import{P as Ye}from"../chunks/ProgressRadial.ILNWxSmG.js";import{a as Ee}from"../chunks/annotationStore.CSH3VeDA.js";import{i as ie}from"../chunks/insertStore.2CzxKJCQ.js";import{t as Le}from"../chunks/TAStore.auniZptI.js";import{r as re}from"../chunks/refStore.DXrCE_Ss.js";import{i as ye}from"../chunks/igvStore.BiOSav-K.js";const xe=l=>({}),Ve=l=>({}),$e=l=>({}),Se=l=>({}),et=l=>({}),Me=l=>({});function Re(l){let e,t,s;const a=l[18].lead,n=de(a,l,l[17],Me);return{c(){e=z("div"),n&&n.c(),this.h()},l(i){e=D(i,"DIV",{class:!0});var r=S(e);n&&n.l(r),r.forEach(g),this.h()},h(){h(e,"class",t="dropzone-lead "+l[5])},m(i,r){H(i,e,r),n&&n.m(e,null),s=!0},p(i,r){n&&n.p&&(!s||r[0]&131072)&&me(n,a,i,i[17],s?ge(a,i[17],r,et):he(i[17]),Me),(!s||r[0]&32&&t!==(t="dropzone-lead "+i[5]))&&h(e,"class",t)},i(i){s||(C(n,i),s=!0)},o(i){A(n,i),s=!1},d(i){i&&g(e),n&&n.d(i)}}}function tt(l){let e,t="Upload a file",s;return{c(){e=z("strong"),e.textContent=t,s=Q(" or drag and drop")},l(a){e=D(a,"STRONG",{"data-svelte-h":!0}),Y(e)!=="svelte-13uz6lq"&&(e.textContent=t),s=Z(a," or drag and drop")},m(a,n){H(a,e,n),H(a,s,n)},p:X,d(a){a&&(g(e),g(s))}}}function Pe(l){let e,t,s;const a=l[18].meta,n=de(a,l,l[17],Ve);return{c(){e=z("small"),n&&n.c(),this.h()},l(i){e=D(i,"SMALL",{class:!0});var r=S(e);n&&n.l(r),r.forEach(g),this.h()},h(){h(e,"class",t="dropzone-meta "+l[7])},m(i,r){H(i,e,r),n&&n.m(e,null),s=!0},p(i,r){n&&n.p&&(!s||r[0]&131072)&&me(n,a,i,i[17],s?ge(a,i[17],r,xe):he(i[17]),Ve),(!s||r[0]&128&&t!==(t="dropzone-meta "+i[7]))&&h(e,"class",t)},i(i){s||(C(n,i),s=!0)},o(i){A(n,i),s=!1},d(i){i&&g(e),n&&n.d(i)}}}function lt(l){let e,t,s,a,n,i,r,m,v,M,E,T,b,_,y,p,V=[{type:"file"},{name:l[2]},{class:s="dropzone-input "+l[9]},l[11]()],c={};for(let d=0;d<V.length;d+=1)c=K(c,V[d]);let u=l[13].lead&&Re(l);const k=l[18].message,w=de(k,l,l[17],Se),R=w||tt();let f=l[13].meta&&Pe(l);return{c(){e=z("div"),t=z("input"),a=W(),n=z("div"),i=z("div"),u&&u.c(),r=W(),m=z("div"),R&&R.c(),M=W(),f&&f.c(),this.h()},l(d){e=D(d,"DIV",{class:!0,"data-testid":!0});var I=S(e);t=D(I,"INPUT",{type:!0,name:!0,class:!0}),a=N(I),n=D(I,"DIV",{class:!0});var P=S(n);i=D(P,"DIV",{class:!0});var B=S(i);u&&u.l(B),r=N(B),m=D(B,"DIV",{class:!0});var U=S(m);R&&R.l(U),U.forEach(g),M=N(B),f&&f.l(B),B.forEach(g),P.forEach(g),I.forEach(g),this.h()},h(){oe(t,c),h(m,"class",v="dropzone-message "+l[6]),h(i,"class",E="dropzone-interface-text "+l[4]),h(n,"class",T="dropzone-interface "+l[8]+" "+l[3]),h(e,"class",b="dropzone "+l[10]),h(e,"data-testid","file-dropzone"),J(e,"opacity-50",l[12].disabled)},m(d,I){H(d,e,I),L(e,t),t.autofocus&&t.focus(),l[32](t),L(e,a),L(e,n),L(n,i),u&&u.m(i,null),L(i,r),L(i,m),R&&R.m(m,null),L(i,M),f&&f.m(i,null),_=!0,y||(p=[j(t,"change",l[31]),j(t,"change",l[19]),j(t,"dragenter",l[20]),j(t,"dragover",l[21]),j(t,"dragleave",l[22]),j(t,"drop",l[23]),j(t,"click",l[24]),j(t,"keydown",l[25]),j(t,"keyup",l[26]),j(t,"keypress",l[27]),j(t,"focus",l[28]),j(t,"focusin",l[29]),j(t,"focusout",l[30])],y=!0)},p(d,I){oe(t,c=Je(V,[{type:"file"},(!_||I[0]&4)&&{name:d[2]},(!_||I[0]&512&&s!==(s="dropzone-input "+d[9]))&&{class:s},d[11]()])),d[13].lead?u?(u.p(d,I),I[0]&8192&&C(u,1)):(u=Re(d),u.c(),C(u,1),u.m(i,r)):u&&(q(),A(u,1,1,()=>{u=null}),G()),w&&w.p&&(!_||I[0]&131072)&&me(w,k,d,d[17],_?ge(k,d[17],I,$e):he(d[17]),Se),(!_||I[0]&64&&v!==(v="dropzone-message "+d[6]))&&h(m,"class",v),d[13].meta?f?(f.p(d,I),I[0]&8192&&C(f,1)):(f=Pe(d),f.c(),C(f,1),f.m(i,null)):f&&(q(),A(f,1,1,()=>{f=null}),G()),(!_||I[0]&16&&E!==(E="dropzone-interface-text "+d[4]))&&h(i,"class",E),(!_||I[0]&264&&T!==(T="dropzone-interface "+d[8]+" "+d[3]))&&h(n,"class",T),(!_||I[0]&1024&&b!==(b="dropzone "+d[10]))&&h(e,"class",b),(!_||I[0]&5120)&&J(e,"opacity-50",d[12].disabled)},i(d){_||(C(u),C(R,d),C(f),_=!0)},o(d){A(u),A(R,d),A(f),_=!1},d(d){d&&g(e),l[32](null),u&&u.d(),R&&R.d(d),f&&f.d(),y=!1,Ne(p)}}}const st="textarea relative flex justify-center items-center",nt="w-full absolute top-0 left-0 right-0 bottom-0 z-[1] opacity-0 disabled:!opacity-0 cursor-pointer",at="flex justify-center items-center text-center";function it(l,e,t){let s,a,n;const i=["files","fileInput","name","border","padding","rounded","regionInterface","regionInterfaceText","slotLead","slotMessage","slotMeta"];let r=ce(e,i),{$$slots:m={},$$scope:v}=e;const M=Ue(m);let{files:E=void 0}=e,{fileInput:T=void 0}=e,{name:b}=e,{border:_="border-2 border-dashed"}=e,{padding:y="p-4 py-8"}=e,{rounded:p="rounded-container-token"}=e,{regionInterface:V=""}=e,{regionInterfaceText:c=""}=e,{slotLead:u="mb-4"}=e,{slotMessage:k=""}=e,{slotMeta:w="opacity-75"}=e;function R(){return delete r.class,r}function f(o){F.call(this,l,o)}function d(o){F.call(this,l,o)}function I(o){F.call(this,l,o)}function P(o){F.call(this,l,o)}function B(o){F.call(this,l,o)}function U(o){F.call(this,l,o)}function O(o){F.call(this,l,o)}function _e(o){F.call(this,l,o)}function ve(o){F.call(this,l,o)}function be(o){F.call(this,l,o)}function pe(o){F.call(this,l,o)}function ke(o){F.call(this,l,o)}function Te(){E=this.files,t(0,E)}function Ie(o){we[o?"unshift":"push"](()=>{T=o,t(1,T)})}return l.$$set=o=>{t(33,e=K(K({},e),fe(o))),t(12,r=ce(e,i)),"files"in o&&t(0,E=o.files),"fileInput"in o&&t(1,T=o.fileInput),"name"in o&&t(2,b=o.name),"border"in o&&t(14,_=o.border),"padding"in o&&t(15,y=o.padding),"rounded"in o&&t(16,p=o.rounded),"regionInterface"in o&&t(3,V=o.regionInterface),"regionInterfaceText"in o&&t(4,c=o.regionInterfaceText),"slotLead"in o&&t(5,u=o.slotLead),"slotMessage"in o&&t(6,k=o.slotMessage),"slotMeta"in o&&t(7,w=o.slotMeta),"$$scope"in o&&t(17,v=o.$$scope)},l.$$.update=()=>{t(10,s=`${st} ${_} ${y} ${p} ${e.class??""}`)},t(9,a=`${nt}`),t(8,n=`${at}`),e=fe(e),[E,T,b,V,c,u,k,w,n,a,s,R,r,M,_,y,p,v,m,f,d,I,P,B,U,O,_e,ve,be,pe,ke,Te,Ie]}class rt extends se{constructor(e){super(),ne(this,e,it,lt,le,{files:0,fileInput:1,name:2,border:14,padding:15,rounded:16,regionInterface:3,regionInterfaceText:4,slotLead:5,slotMessage:6,slotMeta:7},null,[-1,-1])}}function Ce(l){let e,t;const s=l[22].default,a=de(s,l,l[21],null);return{c(){e=z("div"),a&&a.c(),this.h()},l(n){e=D(n,"DIV",{class:!0});var i=S(e);a&&a.l(i),i.forEach(g),this.h()},h(){h(e,"class","slide-toggle-text ml-3")},m(n,i){H(n,e,i),a&&a.m(e,null),t=!0},p(n,i){a&&a.p&&(!t||i[0]&2097152)&&me(a,s,n,n[21],t?ge(s,n[21],i,null):he(n[21]),null)},i(n){t||(C(a,n),t=!0)},o(n){A(a,n),t=!1},d(n){n&&g(e),a&&a.d(n)}}}function ot(l){let e,t,s,a,n,i,r,m,v,M,E,T,b,_,y,p=[{type:"checkbox"},{class:"slide-toggle-input hidden"},{name:l[1]},l[8](),{disabled:a=l[9].disabled}],V={};for(let u=0;u<p.length;u+=1)V=K(V,p[u]);let c=l[10].default&&Ce(l);return{c(){e=z("div"),t=z("label"),s=z("input"),n=W(),i=z("div"),r=z("div"),M=W(),c&&c.c(),this.h()},l(u){e=D(u,"DIV",{id:!0,class:!0,"data-testid":!0,role:!0,"aria-label":!0,"aria-checked":!0,tabindex:!0});var k=S(e);t=D(k,"LABEL",{class:!0});var w=S(t);s=D(w,"INPUT",{type:!0,class:!0,name:!0}),n=N(w),i=D(w,"DIV",{class:!0});var R=S(i);r=D(R,"DIV",{class:!0}),S(r).forEach(g),R.forEach(g),M=N(w),c&&c.l(w),w.forEach(g),k.forEach(g),this.h()},h(){oe(s,V),h(r,"class",m="slide-toggle-thumb "+l[3]),J(r,"cursor-not-allowed",l[9].disabled),h(i,"class",v="slide-toggle-track "+l[4]),J(i,"cursor-not-allowed",l[9].disabled),h(t,"class",E="slide-toggle-label "+l[5]),h(e,"id",l[2]),h(e,"class",T="slide-toggle "+l[6]),h(e,"data-testid","slide-toggle"),h(e,"role","switch"),h(e,"aria-label",l[2]),h(e,"aria-checked",l[0]),h(e,"tabindex","0")},m(u,k){H(u,e,k),L(e,t),L(t,s),s.autofocus&&s.focus(),s.checked=l[0],L(t,n),L(t,i),L(i,r),L(t,M),c&&c.m(t,null),b=!0,_||(y=[j(s,"change",l[31]),j(s,"click",l[23]),j(s,"keydown",l[24]),j(s,"keyup",l[25]),j(s,"keypress",l[26]),j(s,"mouseover",l[27]),j(s,"change",l[28]),j(s,"focus",l[29]),j(s,"blur",l[30]),j(e,"keydown",l[7])],_=!0)},p(u,k){oe(s,V=Je(p,[{type:"checkbox"},{class:"slide-toggle-input hidden"},(!b||k[0]&2)&&{name:u[1]},u[8](),(!b||k[0]&512&&a!==(a=u[9].disabled))&&{disabled:a}])),k[0]&1&&(s.checked=u[0]),(!b||k[0]&8&&m!==(m="slide-toggle-thumb "+u[3]))&&h(r,"class",m),(!b||k[0]&520)&&J(r,"cursor-not-allowed",u[9].disabled),(!b||k[0]&16&&v!==(v="slide-toggle-track "+u[4]))&&h(i,"class",v),(!b||k[0]&528)&&J(i,"cursor-not-allowed",u[9].disabled),u[10].default?c?(c.p(u,k),k[0]&1024&&C(c,1)):(c=Ce(u),c.c(),C(c,1),c.m(t,null)):c&&(q(),A(c,1,1,()=>{c=null}),G()),(!b||k[0]&32&&E!==(E="slide-toggle-label "+u[5]))&&h(t,"class",E),(!b||k[0]&4)&&h(e,"id",u[2]),(!b||k[0]&64&&T!==(T="slide-toggle "+u[6]))&&h(e,"class",T),(!b||k[0]&4)&&h(e,"aria-label",u[2]),(!b||k[0]&1)&&h(e,"aria-checked",u[0])},i(u){b||(C(c),b=!0)},o(u){A(c),b=!1},d(u){u&&g(e),c&&c.d(),_=!1,Ne(y)}}}const ct="inline-block",ft="unstyled flex items-center",ut="flex transition-all duration-[200ms] cursor-pointer",dt="w-[50%] h-full scale-[0.8] transition-all duration-[200ms] shadow";function mt(l,e,t){let s,a,n,i,r,m,v,M;const E=["name","checked","size","background","active","border","rounded","label"];let T=ce(e,E),{$$slots:b={},$$scope:_}=e;const y=Ue(b),p=Qe();let{name:V}=e,{checked:c=!1}=e,{size:u="md"}=e,{background:k="bg-surface-400 dark:bg-surface-700"}=e,{active:w="bg-surface-900 dark:bg-surface-300"}=e,{border:R=""}=e,{rounded:f="rounded-full"}=e,{label:d=""}=e,I;switch(u){case"sm":I="w-12 h-6";break;case"lg":I="w-20 h-10";break;default:I="w-16 h-8"}function P(o){["Enter","Space"].includes(o.code)&&(o.preventDefault(),p("keyup",o),o.currentTarget.firstChild.click())}function B(){return delete T.class,T}function U(o){F.call(this,l,o)}function O(o){F.call(this,l,o)}function _e(o){F.call(this,l,o)}function ve(o){F.call(this,l,o)}function be(o){F.call(this,l,o)}function pe(o){F.call(this,l,o)}function ke(o){F.call(this,l,o)}function Te(o){F.call(this,l,o)}function Ie(){c=this.checked,t(0,c)}return l.$$set=o=>{t(9,e=K(K({},e),fe(o))),t(33,T=ce(e,E)),"name"in o&&t(1,V=o.name),"checked"in o&&t(0,c=o.checked),"size"in o&&t(11,u=o.size),"background"in o&&t(12,k=o.background),"active"in o&&t(13,w=o.active),"border"in o&&t(14,R=o.border),"rounded"in o&&t(15,f=o.rounded),"label"in o&&t(2,d=o.label),"$$scope"in o&&t(21,_=o.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&12289&&t(19,s=c?w:`${k} cursor-pointer`),l.$$.dirty[0]&1&&t(18,a=c?"bg-white/75":"bg-white"),l.$$.dirty[0]&1&&t(17,n=c?"translate-x-full":""),t(20,i=e.disabled===!0?"opacity-50":"hover:brightness-[105%] dark:hover:brightness-110 cursor-pointer"),t(6,r=`${ct} ${f} ${i} ${e.class??""}`),l.$$.dirty[0]&638976&&t(4,v=`${ut} ${R} ${f} ${I} ${s}`),l.$$.dirty[0]&425984&&t(3,M=`${dt} ${f} ${a} ${n}`)},t(5,m=`${ft}`),e=fe(e),[c,V,d,M,v,m,r,P,B,e,y,u,k,w,R,f,I,n,a,s,i,_,b,U,O,_e,ve,be,pe,ke,Te,Ie]}class ht extends se{constructor(e){super(),ne(this,e,mt,ot,le,{name:1,checked:0,size:11,background:12,active:13,border:14,rounded:15,label:2},null,[-1,-1])}}function gt(l){let e,t=l[0]?"Treatment":"Control",s,a;return{c(){e=z("span"),s=Q(t),this.h()},l(n){e=D(n,"SPAN",{class:!0});var i=S(e);s=Z(i,t),i.forEach(g),this.h()},h(){h(e,"class",a=`chip ${l[0]?"variant-soft-primary":"variant-soft-surface"}`)},m(n,i){H(n,e,i),L(e,s)},p(n,i){i&1&&t!==(t=n[0]?"Treatment":"Control")&&ue(s,t),i&1&&a!==(a=`chip ${n[0]?"variant-soft-primary":"variant-soft-surface"}`)&&h(e,"class",a)},d(n){n&&g(e)}}}function _t(l){let e,t,s,a,n,i,r,m,v,M,E,T='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',b,_,y;function p(c){l[4](c)}let V={active:"variant-soft-primary",size:"sm",class:"mr-2",name:"slide",$$slots:{default:[gt]},$$scope:{ctx:l}};return l[0]!==void 0&&(V.checked=l[0]),m=new ht({props:V}),we.push(()=>Ge(m,"checked",p)),m.$on("change",l[5]),{c(){e=z("div"),t=z("div"),s=z("div"),a=z("p"),n=Q(l[1]),i=W(),r=z("div"),x(m.$$.fragment),M=W(),E=z("button"),E.innerHTML=T,this.h()},l(c){e=D(c,"DIV",{class:!0});var u=S(e);t=D(u,"DIV",{class:!0});var k=S(t);s=D(k,"DIV",{class:!0});var w=S(s);a=D(w,"P",{class:!0});var R=S(a);n=Z(R,l[1]),R.forEach(g),i=N(w),r=D(w,"DIV",{class:!0});var f=S(r);$(m.$$.fragment,f),M=N(f),E=D(f,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(E)!=="svelte-1m0ck3b"&&(E.innerHTML=T),f.forEach(g),w.forEach(g),k.forEach(g),u.forEach(g),this.h()},h(){h(a,"class","text-lg"),h(E,"type","button"),h(E,"class","btn-icon hover:variant-ringed-tertiary"),h(r,"class","flex justify-between items-center min-w-64"),h(s,"class","flex flex-col space-y-2 w-full"),h(t,"class","flex justify-center items-center space-x-2"),h(e,"class","card p-4")},m(c,u){H(c,e,u),L(e,t),L(t,s),L(s,a),L(a,n),L(s,i),L(s,r),ee(m,r,null),L(r,M),L(r,E),b=!0,_||(y=j(E,"click",function(){Oe(l[2])&&l[2].apply(this,arguments)}),_=!0)},p(c,[u]){l=c,(!b||u&2)&&ue(n,l[1]);const k={};u&65&&(k.$$scope={dirty:u,ctx:l}),!v&&u&1&&(v=!0,k.checked=l[0],qe(()=>v=!1)),m.$set(k)},i(c){b||(C(m.$$.fragment,c),b=!0)},o(c){A(m.$$.fragment,c),b=!1},d(c){c&&g(e),te(m),_=!1,y()}}}function vt(l,e,t){let{filename:s}=e,{onRemove:a}=e,{onToggle:n}=e,{isTreatment:i=!1}=e;function r(v){i=v,t(0,i)}const m=()=>n(i);return l.$$set=v=>{"filename"in v&&t(1,s=v.filename),"onRemove"in v&&t(2,a=v.onRemove),"onToggle"in v&&t(3,n=v.onToggle),"isTreatment"in v&&t(0,i=v.isTreatment)},[i,s,a,n,r,m]}class bt extends se{constructor(e){super(),ne(this,e,vt,_t,le,{filename:1,onRemove:2,onToggle:3,isTreatment:0})}}function pt(l){let e,t,s,a,n,i,r,m,v,M,E,T,b='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',_,y;return{c(){e=z("div"),t=z("div"),s=z("div"),a=z("p"),n=Q(l[0]),i=W(),r=z("div"),m=z("span"),v=Q(l[2]),E=W(),T=z("button"),T.innerHTML=b,this.h()},l(p){e=D(p,"DIV",{class:!0});var V=S(e);t=D(V,"DIV",{class:!0});var c=S(t);s=D(c,"DIV",{class:!0});var u=S(s);a=D(u,"P",{class:!0});var k=S(a);n=Z(k,l[0]),k.forEach(g),i=N(u),r=D(u,"DIV",{class:!0});var w=S(r);m=D(w,"SPAN",{class:!0});var R=S(m);v=Z(R,l[2]),R.forEach(g),E=N(w),T=D(w,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(T)!=="svelte-1m0ck3b"&&(T.innerHTML=b),w.forEach(g),u.forEach(g),c.forEach(g),V.forEach(g),this.h()},h(){h(a,"class","text-lg"),h(m,"class",M=`chip ${l[3]}`),h(T,"type","button"),h(T,"class","btn-icon hover:variant-ringed-tertiary"),h(r,"class","flex justify-between items-center min-w-64"),h(s,"class","flex flex-col space-y-2 w-full"),h(t,"class","flex justify-center items-center space-x-2"),h(e,"class","card p-4")},m(p,V){H(p,e,V),L(e,t),L(t,s),L(s,a),L(a,n),L(s,i),L(s,r),L(r,m),L(m,v),L(r,E),L(r,T),_||(y=j(T,"click",function(){Oe(l[1])&&l[1].apply(this,arguments)}),_=!0)},p(p,[V]){l=p,V&1&&ue(n,l[0]),V&4&&ue(v,l[2]),V&8&&M!==(M=`chip ${l[3]}`)&&h(m,"class",M)},i:X,o:X,d(p){p&&g(e),_=!1,y()}}}function kt(l,e,t){let{filename:s}=e,{onRemove:a}=e,{type:n}=e,{chip:i="variant-soft-success"}=e;return l.$$set=r=>{"filename"in r&&t(0,s=r.filename),"onRemove"in r&&t(1,a=r.onRemove),"type"in r&&t(2,n=r.type),"chip"in r&&t(3,i=r.chip)},[s,a,n,i]}class Ke extends se{constructor(e){super(),ne(this,e,kt,pt,le,{filename:0,onRemove:1,type:2,chip:3})}}function je(l,e,t){const s=l.slice();return s[13]=e[t][0],s[14]=e[t][1].isTreatment,s[16]=t,s}function Ae(l){let e,t,s;return t=new Ke({props:{type:"Reference",filename:l[2].filename,onRemove:re.reset}}),{c(){e=z("div"),x(t.$$.fragment),this.h()},l(a){e=D(a,"DIV",{class:!0});var n=S(e);$(t.$$.fragment,n),n.forEach(g),this.h()},h(){h(e,"class","m-2 w-full md:w-auto")},m(a,n){H(a,e,n),ee(t,e,null),s=!0},p(a,n){const i={};n&4&&(i.filename=a[2].filename),t.$set(i)},i(a){s||(C(t.$$.fragment,a),s=!0)},o(a){A(t.$$.fragment,a),s=!1},d(a){a&&g(e),te(t)}}}function He(l){let e,t,s;return t=new Ke({props:{type:"Annotations",chip:"variant-soft-warning",filename:l[3].filename,onRemove:Ee.reset}}),{c(){e=z("div"),x(t.$$.fragment),this.h()},l(a){e=D(a,"DIV",{class:!0});var n=S(e);$(t.$$.fragment,n),n.forEach(g),this.h()},h(){h(e,"class","m-2 w-full md:w-auto")},m(a,n){H(a,e,n),ee(t,e,null),s=!0},p(a,n){const i={};n&8&&(i.filename=a[3].filename),t.$set(i)},i(a){s||(C(t.$$.fragment,a),s=!0)},o(a){A(t.$$.fragment,a),s=!1},d(a){a&&g(e),te(t)}}}function Be(l){let e,t,s,a;function n(...r){return l[6](l[13],...r)}function i(){return l[7](l[13])}return t=new bt({props:{isTreatment:l[14],onToggle:n,onRemove:i,filename:l[13]}}),{c(){e=z("div"),x(t.$$.fragment),s=W(),this.h()},l(r){e=D(r,"DIV",{class:!0});var m=S(e);$(t.$$.fragment,m),s=N(m),m.forEach(g),this.h()},h(){h(e,"class","m-2 w-full md:w-auto ")},m(r,m){H(r,e,m),ee(t,e,null),L(e,s),a=!0},p(r,m){l=r;const v={};m&16&&(v.isTreatment=l[14]),m&16&&(v.onToggle=n),m&16&&(v.onRemove=i),m&16&&(v.filename=l[13]),t.$set(v)},i(r){a||(C(t.$$.fragment,r),a=!0)},o(r){A(t.$$.fragment,r),a=!1},d(r){r&&g(e),te(t)}}}function Tt(l){let e,t,s;function a(i){l[8](i)}let n={padding:"py-4",name:"files",multiple:!0,$$slots:{meta:[wt],message:[Et],lead:[yt]},$$scope:{ctx:l}};return l[0]!==void 0&&(n.files=l[0]),e=new rt({props:n}),we.push(()=>Ge(e,"files",a)),e.$on("change",l[5]),e.$on("click",Fe),e.$on("drop",Fe),{c(){x(e.$$.fragment)},l(i){$(e.$$.fragment,i)},m(i,r){ee(e,i,r),s=!0},p(i,r){const m={};r&131072&&(m.$$scope={dirty:r,ctx:i}),!t&&r&1&&(t=!0,m.files=i[0],qe(()=>t=!1)),e.$set(m)},i(i){s||(C(e.$$.fragment,i),s=!0)},o(i){A(e.$$.fragment,i),s=!1},d(i){te(e,i)}}}function It(l){let e,t,s;return t=new Ye({props:{value:void 0,width:"w-16",strokeLinecap:"round"}}),{c(){e=z("div"),x(t.$$.fragment),this.h()},l(a){e=D(a,"DIV",{class:!0});var n=S(e);$(t.$$.fragment,n),n.forEach(g),this.h()},h(){h(e,"class","flex items-center justify-center align-middle")},m(a,n){H(a,e,n),ee(t,e,null),s=!0},p:X,i(a){s||(C(t.$$.fragment,a),s=!0)},o(a){A(t.$$.fragment,a),s=!1},d(a){a&&g(e),te(t)}}}function yt(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-8"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"></path></svg>';return{c(){e=z("div"),e.innerHTML=t,this.h()},l(s){e=D(s,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-stz8rw"&&(e.innerHTML=t),this.h()},h(){h(e,"class","flex justify-center")},m(s,a){H(s,e,a)},p:X,d(s){s&&g(e)}}}function Et(l){let e,t='<span class="font-semibold">Load files</span> or drag and drop';return{c(){e=z("p"),e.innerHTML=t,this.h()},l(s){e=D(s,"P",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-10rbgmq"&&(e.innerHTML=t),this.h()},h(){h(e,"class","text-xl ")},m(s,a){H(s,e,a)},p:X,d(s){s&&g(e)}}}function wt(l){let e;return{c(){e=Q("Only GFF+FASTA and .userplot files allowed.")},l(t){e=Z(t,"Only GFF+FASTA and .userplot files allowed.")},m(t,s){H(t,e,s)},d(t){t&&g(e)}}}function zt(l){let e,t='<div class="flex flex-col items-center align-baseline justify-center max-w-4xl space-y-8 "><figure class="card-hover rounded-full svelte-ppo8by"><div><section class="img-bg svelte-ppo8by"></section></div> <img class="logo-img mt-8 svelte-ppo8by" src="/images/logo2.png" alt="Skeleton Logo"/></figure> <h1 class="text-center text-3xl mx-2">Transposon Sequencing Data Visualiser</h1></div>',s,a,n,i,r,m,v,M,E,T,b,_,y=l[2].filename&&Ae(l),p=l[3].filename&&He(l),V=De(Array.from(l[4].entries()).sort(We)),c=[];for(let f=0;f<V.length;f+=1)c[f]=Be(je(l,V,f));const u=f=>A(c[f],1,1,()=>{c[f]=null}),k=[It,Tt],w=[];function R(f,d){return f[1]?0:1}return T=R(l),b=w[T]=k[T](l),{c(){e=z("div"),e.innerHTML=t,s=W(),a=z("div"),n=z("div"),y&&y.c(),i=W(),p&&p.c(),r=W(),m=z("div");for(let f=0;f<c.length;f+=1)c[f].c();v=W(),M=z("div"),E=z("div"),b.c(),this.h()},l(f){e=D(f,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-kcnmyh"&&(e.innerHTML=t),s=N(f),a=D(f,"DIV",{class:!0});var d=S(a);n=D(d,"DIV",{class:!0});var I=S(n);y&&y.l(I),i=N(I),p&&p.l(I),I.forEach(g),r=N(d),m=D(d,"DIV",{class:!0});var P=S(m);for(let O=0;O<c.length;O+=1)c[O].l(P);P.forEach(g),d.forEach(g),v=N(f),M=D(f,"DIV",{class:!0});var B=S(M);E=D(B,"DIV",{class:!0});var U=S(E);b.l(U),U.forEach(g),B.forEach(g),this.h()},h(){h(e,"class","flex justify-center mb-6"),h(n,"class","flex flex-wrap justify-center w-full"),h(m,"class","flex flex-wrap justify-center "),h(a,"class","flex flex-col justify-center items-center mb-6"),h(E,"class","w-full max-w-3xl mx-4 mb-4"),h(M,"class","flex justify-center ")},m(f,d){H(f,e,d),H(f,s,d),H(f,a,d),L(a,n),y&&y.m(n,null),L(n,i),p&&p.m(n,null),L(a,r),L(a,m);for(let I=0;I<c.length;I+=1)c[I]&&c[I].m(m,null);H(f,v,d),H(f,M,d),L(M,E),w[T].m(E,null),_=!0},p(f,[d]){if(f[2].filename?y?(y.p(f,d),d&4&&C(y,1)):(y=Ae(f),y.c(),C(y,1),y.m(n,i)):y&&(q(),A(y,1,1,()=>{y=null}),G()),f[3].filename?p?(p.p(f,d),d&8&&C(p,1)):(p=He(f),p.c(),C(p,1),p.m(n,null)):p&&(q(),A(p,1,1,()=>{p=null}),G()),d&16){V=De(Array.from(f[4].entries()).sort(We));let P;for(P=0;P<V.length;P+=1){const B=je(f,V,P);c[P]?(c[P].p(B,d),C(c[P],1)):(c[P]=Be(B),c[P].c(),C(c[P],1),c[P].m(m,null))}for(q(),P=V.length;P<c.length;P+=1)u(P);G()}let I=T;T=R(f),T===I?w[T].p(f,d):(q(),A(w[I],1,1,()=>{w[I]=null}),G(),b=w[T],b?b.p(f,d):(b=w[T]=k[T](f),b.c()),C(b,1),b.m(E,null))},i(f){if(!_){C(y),C(p);for(let d=0;d<V.length;d+=1)C(c[d]);C(b),_=!0}},o(f){A(y),A(p),c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)A(c[d]);A(b),_=!1},d(f){f&&(g(e),g(s),g(a),g(v),g(M)),y&&y.d(),p&&p.d(),Ze(c,f),w[T].d()}}}function Dt(l){const e=l.split(`
`);let t="",s="",a=!1;for(const n of e){if(n.startsWith("##FASTA")){a=!0;continue}a&&(n.startsWith(">")?(s&&(t+=s+`
`),s=n+`
`):s+=n.trim())}return s&&(t+=s+`
`),t.trim()}function Fe(){const l=document.getElementsByName("files")[0];l.value=""}const We=([l],[e])=>l.localeCompare(e);function Lt(l,e,t){let s,a,n,i;ae(l,ye,_=>t(9,s=_)),ae(l,re,_=>t(2,a=_)),ae(l,Ee,_=>t(3,n=_)),ae(l,ie,_=>t(4,i=_));const r=Xe();let m,v=!1;function M(_){if(!m||m.length===0)return;t(1,v=!0);let y=[];for(let p=0;p<m.length;p++){const V=m[p],c=V.name,u=new FileReader;y.push(new Promise((k,w)=>{u.onload=async R=>{var d,I;let f=(I=(d=R.target)==null?void 0:d.result)==null?void 0:I.toString();if(c.endsWith(".gff")||c.endsWith(".gff3")){await Ee.load(c,f),ze(ye,s.locus=void 0,s);const P=Dt(f);P.length>0&&(await re.load(c,P).catch(B=>{console.error("Error loading reference:",B);const O={message:"Error loading reference: "+B,background:"variant-glass-error"};r.trigger(O)}),await Le.load(P),k(0))}else if(c.endsWith(".fasta")||c.endsWith(".fa"))await re.load(c,f),await Le.load(f),ze(ye,s.locus=void 0,s),k(0);else if(c.endsWith(".userplot")||c.endsWith(".plot"))await ie.load(c,f);else{console.error("Unsupported file type:",c);const B={message:"Unsupported file type: "+c,background:"variant-glass-error"};r.trigger(B),w("Unsupported file type: "+c)}k(0)},u.onerror=w,u.readAsText(V)}))}Promise.all(y).then(p=>{t(1,v=!1)}).catch(p=>{console.error("Error reading files:",p),t(1,v=!1)})}const E=(_,y)=>ie.setIsTreatment(_,y),T=_=>ie.remove(_);function b(_){m=_,t(0,m)}return[m,v,a,n,i,M,E,T,b]}class Ut extends se{constructor(e){super(),ne(this,e,Lt,zt,le,{})}}export{Ut as component};
