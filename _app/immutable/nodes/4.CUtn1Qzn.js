import{s as R,e as v,t as F,a as D,c as y,b as E,d as G,f as g,g as S,l as W,m as I,u as P,i as $,h as p,j as J,k as z,E as K,M as Q,n as U,I as X}from"../chunks/scheduler.Ctx98Cov.js";import{S as L,i as O,t as b,g as j,a as w,c as q,b as A,d as H,m as M,e as N}from"../chunks/index.DzosD7qk.js";import{e as B}from"../chunks/each.tnL4mEXE.js";import{i as Y}from"../chunks/insertStore.Bo2G9Fro.js";import{a as Z}from"../chunks/annotationStore.Dn3m1aBo.js";import"../chunks/TAStore.BMmLN0sp.js";import{g as ee}from"../chunks/generateGeneInsertSites.TkpiqTe1.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.HlYL--rL.js";import{P as te}from"../chunks/ProgressRadial.XZQD61kG.js";import{P as k}from"../chunks/plotly.KXwo0Jee.js";function T(d){let t,n,r;return n=new te({props:{value:void 0,width:"w-14",strokeLinecap:"round"}}),{c(){t=v("div"),A(n.$$.fragment),this.h()},l(o){t=y(o,"DIV",{class:!0});var e=E(t);H(n.$$.fragment,e),e.forEach(g),this.h()},h(){I(t,"class","flex items-center justify-center align-middle m-12")},m(o,e){$(o,t,e),M(n,t,null),r=!0},p:U,i(o){r||(b(n.$$.fragment,o),r=!0)},o(o){w(n.$$.fragment,o),r=!1},d(o){o&&g(t),N(n)}}}function ne(d){let t,n,r,o,e,l,a,c,s,i="The insert index is the number of inserts in a feature divided by the feature length.",x,f=d[1]&&T();return{c(){t=v("div"),n=v("header"),r=F(d[0]),o=D(),e=v("section"),l=v("div"),a=D(),f&&f.c(),c=D(),s=v("footer"),s.textContent=i,this.h()},l(h){t=y(h,"DIV",{class:!0});var m=E(t);n=y(m,"HEADER",{class:!0});var _=E(n);r=G(_,d[0]),_.forEach(g),o=S(m),e=y(m,"SECTION",{class:!0});var u=E(e);l=y(u,"DIV",{id:!0,style:!0}),E(l).forEach(g),a=S(u),f&&f.l(u),u.forEach(g),c=S(m),s=y(m,"FOOTER",{class:!0,"data-svelte-h":!0}),W(s)!=="svelte-1sqs8gt"&&(s.textContent=i),m.forEach(g),this.h()},h(){I(n,"class","card-header"),I(l,"id",d[2]),P(l,"width","100%"),P(l,"height","100%"),I(e,"class","p-4"),I(s,"class","card-footer"),I(t,"class","card")},m(h,m){$(h,t,m),p(t,n),p(n,r),p(t,o),p(t,e),p(e,l),p(e,a),f&&f.m(e,null),p(t,c),p(t,s),x=!0},p(h,[m]){(!x||m&1)&&J(r,h[0]),h[1]?f?(f.p(h,m),m&2&&b(f,1)):(f=T(),f.c(),b(f,1),f.m(e,null)):f&&(j(),w(f,1,1,()=>{f=null}),q())},i(h){x||(b(f),x=!0)},o(h){w(f),x=!1},d(h){h&&g(t),f&&f.d()}}}function ae(d,t,n){let r;z(d,Z,i=>n(4,r=i));let{filename:o}=t,{data:e}=t,l=`plotly-${o}`,a=!0;const c=()=>{const i=document.getElementById(l);i&&k.relayout(i,{width:i.clientWidth,height:i.clientHeight})},s=()=>{k.downloadImage(document.getElementById(l),{format:"svg",filename:o||"plot"})};return K(async()=>{const i=(await ee(r.features,e)).reduce((m,_)=>{const u=_.seqId;return m[u]||(m[u]=[]),m[u].push(_),m},{});let x=[];for(const[m,_]of Object.entries(i))x.push({x:_.map(u=>u.start),y:_.map(u=>u.insIndex),text:_.map(u=>u.name),textfont:{family:"Times New Roman"},textposition:"bottom center",type:"scatter",mode:"markers",name:m});const f={yaxis:{title:"Insert Index"},xaxis:{zeroline:!1,rangemode:"nonnegative"},margin:{b:25,t:25,r:25},barmode:"overlay",modebar:{orientation:"v"},legend:{x:1,xanchor:"right",y:1}},h={modeBarButtonsToRemove:["autoScale2d"],responsive:!0,displaylogo:!1,modeBarButtonsToAdd:[{name:"Download plot as svg",icon:k.Icons.camera,click:s}]};k.newPlot(l,x,f,h),window.addEventListener("resize",c),n(1,a=!1)}),Q(()=>{window.removeEventListener("resize",c)}),d.$$set=i=>{"filename"in i&&n(0,o=i.filename),"data"in i&&n(3,e=i.data)},[o,a,l,e]}class oe extends L{constructor(t){super(),O(this,t,ae,ne,R,{filename:0,data:3})}}function V(d,t,n){const r=d.slice();return r[1]=t[n][0],r[2]=t[n][1],r[4]=n,r}function C(d){let t,n,r,o;return n=new oe({props:{filename:d[1],data:d[2].chromosomes}}),{c(){t=v("div"),A(n.$$.fragment),r=D(),this.h()},l(e){t=y(e,"DIV",{class:!0});var l=E(t);H(n.$$.fragment,l),r=S(l),l.forEach(g),this.h()},h(){I(t,"class","m-4")},m(e,l){$(e,t,l),M(n,t,null),p(t,r),o=!0},p(e,l){const a={};l&1&&(a.filename=e[1]),l&1&&(a.data=e[2].chromosomes),n.$set(a)},i(e){o||(b(n.$$.fragment,e),o=!0)},o(e){w(n.$$.fragment,e),o=!1},d(e){e&&g(t),N(n)}}}function se(d){let t,n,r,o=B(d[0]),e=[];for(let a=0;a<o.length;a+=1)e[a]=C(V(d,o,a));const l=a=>w(e[a],1,1,()=>{e[a]=null});return{c(){t=v("div"),n=v("div");for(let a=0;a<e.length;a+=1)e[a].c();this.h()},l(a){t=y(a,"DIV",{class:!0});var c=E(t);n=y(c,"DIV",{class:!0});var s=E(n);for(let i=0;i<e.length;i+=1)e[i].l(s);s.forEach(g),c.forEach(g),this.h()},h(){I(n,"class","grid grid-cols-1 2xl:grid-cols-2 gap-4"),I(t,"class","m-4")},m(a,c){$(a,t,c),p(t,n);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(n,null);r=!0},p(a,[c]){if(c&1){o=B(a[0]);let s;for(s=0;s<o.length;s+=1){const i=V(a,o,s);e[s]?(e[s].p(i,c),b(e[s],1)):(e[s]=C(i),e[s].c(),b(e[s],1),e[s].m(n,null))}for(j(),s=o.length;s<e.length;s+=1)l(s);q()}},i(a){if(!r){for(let c=0;c<o.length;c+=1)b(e[c]);r=!0}},o(a){e=e.filter(Boolean);for(let c=0;c<e.length;c+=1)w(e[c]);r=!1},d(a){a&&g(t),X(e,a)}}}function re(d,t,n){let r;return z(d,Y,o=>n(0,r=o)),[r]}class _e extends L{constructor(t){super(),O(this,t,re,se,R,{})}}export{_e as component};
