import{s as z,c as R,o as G,q as M,n as W}from"../chunks/scheduler.Cxdq5DjT.js";import{S as q,i as L,e as p,t as J,s as k,c as _,a as y,b as K,d as h,f as D,k as Q,l as v,o as P,g as S,h as g,j as U,q as x,r as A,u as I,v as O,w as j,x as H,y as N,z as F,C as X}from"../chunks/index.Bp_61F_m.js";import{e as B}from"../chunks/each.J0AVf1RG.js";import{i as Y}from"../chunks/insertStore.DJYib06i.js";import{a as Z}from"../chunks/annotationStore.D01fgoLY.js";import{g as ee}from"../chunks/generateGeneInsertSites.ozbo97IV.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.DkJRRaEQ.js";import{P as te}from"../chunks/ProgressRadial.BwNK8EGC.js";import{P as b}from"../chunks/plotly.cbd5aJyv.js";function C(d){let t,a,r;return a=new te({props:{value:void 0,width:"w-14",strokeLinecap:"round"}}),{c(){t=p("div"),j(a.$$.fragment),this.h()},l(o){t=_(o,"DIV",{class:!0});var e=y(t);H(a.$$.fragment,e),e.forEach(h),this.h()},h(){v(t,"class","flex items-center justify-center align-middle m-12")},m(o,e){S(o,t,e),N(a,t,null),r=!0},p:W,i(o){r||(x(a.$$.fragment,o),r=!0)},o(o){I(a.$$.fragment,o),r=!1},d(o){o&&h(t),F(a)}}}function ae(d){let t,a,r,o,e,i,n,c,s,l="The insert index is the number of inserts in a locus divided by the locus length.",E,f=d[1]&&C();return{c(){t=p("div"),a=p("header"),r=J(d[0]),o=k(),e=p("section"),i=p("div"),n=k(),f&&f.c(),c=k(),s=p("footer"),s.textContent=l,this.h()},l(u){t=_(u,"DIV",{class:!0});var m=y(t);a=_(m,"HEADER",{class:!0});var $=y(a);r=K($,d[0]),$.forEach(h),o=D(m),e=_(m,"SECTION",{class:!0});var w=y(e);i=_(w,"DIV",{id:!0,style:!0}),y(i).forEach(h),n=D(w),f&&f.l(w),w.forEach(h),c=D(m),s=_(m,"FOOTER",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-v6qryd"&&(s.textContent=l),m.forEach(h),this.h()},h(){v(a,"class","card-header"),v(i,"id",d[2]),P(i,"width","100%"),P(i,"height","100%"),v(e,"class","p-4"),v(s,"class","card-footer"),v(t,"class","card")},m(u,m){S(u,t,m),g(t,a),g(a,r),g(t,o),g(t,e),g(e,i),g(e,n),f&&f.m(e,null),g(t,c),g(t,s),E=!0},p(u,[m]){(!E||m&1)&&U(r,u[0]),u[1]?f?(f.p(u,m),m&2&&x(f,1)):(f=C(),f.c(),x(f,1),f.m(e,null)):f&&(A(),I(f,1,1,()=>{f=null}),O())},i(u){E||(x(f),E=!0)},o(u){I(f),E=!1},d(u){u&&h(t),f&&f.d()}}}function ne(d,t,a){let r;R(d,Z,l=>a(4,r=l));let{filename:o}=t,{data:e}=t,i=`plotly-${o}`,n=!0;const c=()=>{const l=document.getElementById(i);l&&b.relayout(l,{width:l.clientWidth,height:l.clientHeight})},s=()=>{b.downloadImage(document.getElementById(i),{format:"svg",filename:o||"plot"})};return G(async()=>{const l=await ee(r.features,e,[],0,0),E={yaxis:{title:"Insert Index"},xaxis:{zeroline:!1,rangemode:"nonnegative"},margin:{b:25,t:25,r:25},barmode:"overlay",modebar:{orientation:"v"}},f={modeBarButtonsToRemove:["autoScale2d"],responsive:!0,displaylogo:!1,modeBarButtonsToAdd:[{name:"Download plot as svg",icon:b.Icons.camera,click:s}]},u={x:l.map(m=>m.start),y:l.map(m=>m.insIndex),text:l.map(m=>m.name),textfont:{family:"Times New Roman"},textposition:"bottom center",type:"scatter",mode:"markers"};b.newPlot(i,[u],E,f),window.addEventListener("resize",c),a(1,n=!1)}),M(()=>{window.removeEventListener("resize",c)}),d.$$set=l=>{"filename"in l&&a(0,o=l.filename),"data"in l&&a(3,e=l.data)},[o,n,i,e]}class oe extends q{constructor(t){super(),L(this,t,ne,ae,z,{filename:0,data:3})}}function T(d,t,a){const r=d.slice();return r[1]=t[a][0],r[2]=t[a][1],r[4]=a,r}function V(d){let t,a,r,o;return a=new oe({props:{filename:d[1],data:d[2].total}}),{c(){t=p("div"),j(a.$$.fragment),r=k(),this.h()},l(e){t=_(e,"DIV",{class:!0});var i=y(t);H(a.$$.fragment,i),r=D(i),i.forEach(h),this.h()},h(){v(t,"class","m-4")},m(e,i){S(e,t,i),N(a,t,null),g(t,r),o=!0},p(e,i){const n={};i&1&&(n.filename=e[1]),i&1&&(n.data=e[2].total),a.$set(n)},i(e){o||(x(a.$$.fragment,e),o=!0)},o(e){I(a.$$.fragment,e),o=!1},d(e){e&&h(t),F(a)}}}function se(d){let t,a,r,o=B(d[0]),e=[];for(let n=0;n<o.length;n+=1)e[n]=V(T(d,o,n));const i=n=>I(e[n],1,1,()=>{e[n]=null});return{c(){t=p("div"),a=p("div");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=_(n,"DIV",{class:!0});var c=y(t);a=_(c,"DIV",{class:!0});var s=y(a);for(let l=0;l<e.length;l+=1)e[l].l(s);s.forEach(h),c.forEach(h),this.h()},h(){v(a,"class","grid grid-cols-1 2xl:grid-cols-2 gap-4"),v(t,"class","m-4")},m(n,c){S(n,t,c),g(t,a);for(let s=0;s<e.length;s+=1)e[s]&&e[s].m(a,null);r=!0},p(n,[c]){if(c&1){o=B(n[0]);let s;for(s=0;s<o.length;s+=1){const l=T(n,o,s);e[s]?(e[s].p(l,c),x(e[s],1)):(e[s]=V(l),e[s].c(),x(e[s],1),e[s].m(a,null))}for(A(),s=o.length;s<e.length;s+=1)i(s);O()}},i(n){if(!r){for(let c=0;c<o.length;c+=1)x(e[c]);r=!0}},o(n){e=e.filter(Boolean);for(let c=0;c<e.length;c+=1)I(e[c]);r=!1},d(n){n&&h(t),X(e,n)}}}function re(d,t,a){let r;return R(d,Y,o=>a(0,r=o)),[r]}class pe extends q{constructor(t){super(),L(this,t,re,se,z,{})}}export{pe as component};
