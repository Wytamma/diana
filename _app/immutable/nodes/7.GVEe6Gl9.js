import{s as T,c as q,o as G,q as M,n as W}from"../chunks/scheduler.Cxdq5DjT.js";import{S as B,i as L,e as g,t as J,s as b,c as _,a as y,b as K,d as u,f as $,k as Q,l as v,o as S,g as k,h as p,j as U,q as x,r as O,u as w,v as j,w as H,x as N,y as A,z as F,C as X}from"../chunks/index.Bp_61F_m.js";import{e as P}from"../chunks/each.J0AVf1RG.js";import{i as Y}from"../chunks/insertStore.DJYib06i.js";import{a as Z}from"../chunks/annotationStore.D01fgoLY.js";import{g as ee}from"../chunks/generateGeneInsertSites.ozbo97IV.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.DkJRRaEQ.js";import{P as te}from"../chunks/ProgressRadial.BwNK8EGC.js";import{P as C}from"../chunks/plotly.cbd5aJyv.js";function V(f){let t,n,o;return n=new te({props:{value:void 0,width:"w-14",strokeLinecap:"round"}}),{c(){t=g("div"),H(n.$$.fragment),this.h()},l(r){t=_(r,"DIV",{class:!0});var e=y(t);N(n.$$.fragment,e),e.forEach(u),this.h()},h(){v(t,"class","flex items-center justify-center align-middle m-12")},m(r,e){k(r,t,e),A(n,t,null),o=!0},p:W,i(r){o||(x(n.$$.fragment,r),o=!0)},o(r){w(n.$$.fragment,r),o=!1},d(r){r&&u(t),F(n)}}}function ae(f){let t,n,o,r,e,l,s,i,a,h="The insert index is the number of inserts in a locus divided by the locus length.",E,c=f[1]&&V();return{c(){t=g("div"),n=g("header"),o=J(f[0]),r=b(),e=g("section"),l=g("div"),s=b(),c&&c.c(),i=b(),a=g("footer"),a.textContent=h,this.h()},l(d){t=_(d,"DIV",{class:!0});var m=y(t);n=_(m,"HEADER",{class:!0});var D=y(n);o=K(D,f[0]),D.forEach(u),r=$(m),e=_(m,"SECTION",{class:!0});var I=y(e);l=_(I,"DIV",{id:!0,style:!0}),y(l).forEach(u),s=$(I),c&&c.l(I),I.forEach(u),i=$(m),a=_(m,"FOOTER",{class:!0,"data-svelte-h":!0}),Q(a)!=="svelte-v6qryd"&&(a.textContent=h),m.forEach(u),this.h()},h(){v(n,"class","card-header"),v(l,"id",f[2]),S(l,"width","100%"),S(l,"height","100%"),v(e,"class","p-4"),v(a,"class","card-footer"),v(t,"class","card")},m(d,m){k(d,t,m),p(t,n),p(n,o),p(t,r),p(t,e),p(e,l),p(e,s),c&&c.m(e,null),p(t,i),p(t,a),E=!0},p(d,[m]){(!E||m&1)&&U(o,d[0]),d[1]?c?(c.p(d,m),m&2&&x(c,1)):(c=V(),c.c(),x(c,1),c.m(e,null)):c&&(O(),w(c,1,1,()=>{c=null}),j())},i(d){E||(x(c),E=!0)},o(d){w(c),E=!1},d(d){d&&u(t),c&&c.d()}}}function ne(f,t,n){let o;q(f,Z,a=>n(4,o=a));let{filename:r}=t,{data:e}=t,l=`plotly-${r}`,s=!0;const i=()=>{const a=document.getElementById(l);a&&C.relayout(a,{width:a.clientWidth,height:a.clientHeight})};return G(async()=>{const a=await ee(o.features,e,[],0,0),h={yaxis:{title:"Insert Index"},xaxis:{zeroline:!1,rangemode:"nonnegative"},margin:{b:25,t:25,r:25},barmode:"overlay",modebar:{orientation:"v"}},E={modeBarButtonsToRemove:["autoScale2d"],responsive:!0,displaylogo:!1},c={x:a.map(d=>d.start),y:a.map(d=>d.insIndex),text:a.map(d=>d.name),textfont:{family:"Times New Roman"},textposition:"bottom center",type:"scatter",mode:"markers"};C.newPlot(l,[c],h,E),window.addEventListener("resize",i),n(1,s=!1)}),M(()=>{window.removeEventListener("resize",i)}),f.$$set=a=>{"filename"in a&&n(0,r=a.filename),"data"in a&&n(3,e=a.data)},[r,s,l,e]}class se extends B{constructor(t){super(),L(this,t,ne,ae,T,{filename:0,data:3})}}function z(f,t,n){const o=f.slice();return o[1]=t[n][0],o[2]=t[n][1],o[4]=n,o}function R(f){let t,n,o,r;return n=new se({props:{filename:f[1],data:f[2].total}}),{c(){t=g("div"),H(n.$$.fragment),o=b(),this.h()},l(e){t=_(e,"DIV",{class:!0});var l=y(t);N(n.$$.fragment,l),o=$(l),l.forEach(u),this.h()},h(){v(t,"class","m-4")},m(e,l){k(e,t,l),A(n,t,null),p(t,o),r=!0},p(e,l){const s={};l&1&&(s.filename=e[1]),l&1&&(s.data=e[2].total),n.$set(s)},i(e){r||(x(n.$$.fragment,e),r=!0)},o(e){w(n.$$.fragment,e),r=!1},d(e){e&&u(t),F(n)}}}function re(f){let t,n,o,r=P(f[0]),e=[];for(let s=0;s<r.length;s+=1)e[s]=R(z(f,r,s));const l=s=>w(e[s],1,1,()=>{e[s]=null});return{c(){t=g("div"),n=g("div");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=_(s,"DIV",{class:!0});var i=y(t);n=_(i,"DIV",{class:!0});var a=y(n);for(let h=0;h<e.length;h+=1)e[h].l(a);a.forEach(u),i.forEach(u),this.h()},h(){v(n,"class","grid grid-cols-1 2xl:grid-cols-2 gap-4"),v(t,"class","m-4")},m(s,i){k(s,t,i),p(t,n);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(n,null);o=!0},p(s,[i]){if(i&1){r=P(s[0]);let a;for(a=0;a<r.length;a+=1){const h=z(s,r,a);e[a]?(e[a].p(h,i),x(e[a],1)):(e[a]=R(h),e[a].c(),x(e[a],1),e[a].m(n,null))}for(O(),a=r.length;a<e.length;a+=1)l(a);j()}},i(s){if(!o){for(let i=0;i<r.length;i+=1)x(e[i]);o=!0}},o(s){e=e.filter(Boolean);for(let i=0;i<e.length;i+=1)w(e[i]);o=!1},d(s){s&&u(t),X(e,s)}}}function oe(f,t,n){let o;return q(f,Y,r=>n(0,o=r)),[o]}class ge extends B{constructor(t){super(),L(this,t,oe,re,T,{})}}export{ge as component};
