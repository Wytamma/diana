import{s as V,e as v,t as G,a as k,c as b,b as I,d as J,f as p,g as C,l as H,m as y,u as $,i as S,h as g,j as W,k as R,H as K,I as Q,n as U,J as X}from"../chunks/DfgCqy7z.js";import{S as q,i as z,t as E,g as O,a as w,c as j,b as A,d as F,m as M,e as N}from"../chunks/P-XqeZIV.js";import{e as B}from"../chunks/DvuRD1Iq.js";import{i as Y}from"../chunks/yOHqSJsW.js";import{a as Z}from"../chunks/Chyq7ORs.js";import{g as ee,P as D}from"../chunks/CT0txMk3.js";import"../chunks/fwD94gG5.js";import{P as te}from"../chunks/CdmrloOh.js";function P(d){let e,a,l;return a=new te({props:{value:void 0,width:"w-14",strokeLinecap:"round"}}),{c(){e=v("div"),A(a.$$.fragment),this.h()},l(r){e=b(r,"DIV",{class:!0});var s=I(e);F(a.$$.fragment,s),s.forEach(p),this.h()},h(){y(e,"class","flex items-center justify-center align-middle m-12")},m(r,s){S(r,e,s),M(a,e,null),l=!0},p:U,i(r){l||(E(a.$$.fragment,r),l=!0)},o(r){w(a.$$.fragment,r),l=!1},d(r){r&&p(e),N(a)}}}function ae(d){let e,a,l,r,s,i,u,n,_,o="The insert index is the number of inserts in a feature divided by the feature length.",c,t=d[1]&&P();return{c(){e=v("div"),a=v("header"),l=G(d[0]),r=k(),s=v("section"),i=v("div"),u=k(),t&&t.c(),n=k(),_=v("footer"),_.textContent=o,this.h()},l(m){e=b(m,"DIV",{class:!0});var f=I(e);a=b(f,"HEADER",{class:!0});var x=I(a);l=J(x,d[0]),x.forEach(p),r=C(f),s=b(f,"SECTION",{class:!0});var h=I(s);i=b(h,"DIV",{id:!0,style:!0}),I(i).forEach(p),u=C(h),t&&t.l(h),h.forEach(p),n=C(f),_=b(f,"FOOTER",{class:!0,"data-svelte-h":!0}),H(_)!=="svelte-1sqs8gt"&&(_.textContent=o),f.forEach(p),this.h()},h(){y(a,"class","card-header"),y(i,"id",d[2]),$(i,"width","100%"),$(i,"height","100%"),y(s,"class","p-4"),y(_,"class","card-footer"),y(e,"class","card")},m(m,f){S(m,e,f),g(e,a),g(a,l),g(e,r),g(e,s),g(s,i),g(s,u),t&&t.m(s,null),g(e,n),g(e,_),c=!0},p(m,[f]){(!c||f&1)&&W(l,m[0]),m[1]?t?(t.p(m,f),f&2&&E(t,1)):(t=P(),t.c(),E(t,1),t.m(s,null)):t&&(O(),w(t,1,1,()=>{t=null}),j())},i(m){c||(E(t),c=!0)},o(m){w(t),c=!1},d(m){m&&p(e),t&&t.d()}}}function oe(d,e,a){let l;R(d,Z,o=>a(4,l=o));let{filename:r}=e,{data:s}=e,i=`plotly-${r}`,u=!0;const n=()=>{const o=document.getElementById(i);o&&D.relayout(o,{width:o.clientWidth,height:o.clientHeight})},_=()=>{D.downloadImage(document.getElementById(i),{format:"svg",filename:r||"plot"})};return K(async()=>{const o=(await ee(l.filteredFeatures,s)).reduce((f,x)=>{const h=x.seqId;return f[h]||(f[h]=[]),f[h].push(x),f},{});let c=[];for(const[f,x]of Object.entries(o))c.push({x:x.map(h=>h.start),y:x.map(h=>h.insIndex),text:x.map(h=>h.name),textfont:{family:"Times New Roman"},textposition:"bottom center",type:"scatter",mode:"markers",name:f});const t={yaxis:{title:"Insert Index"},xaxis:{zeroline:!1,rangemode:"nonnegative"},margin:{b:25,t:25,r:25},barmode:"overlay",modebar:{orientation:"v"},legend:{x:1,xanchor:"right",y:1}},m={modeBarButtonsToRemove:["autoScale2d"],responsive:!0,displaylogo:!1,modeBarButtonsToAdd:[{name:"Download plot as svg",icon:D.Icons.camera,click:_}]};D.newPlot(i,c,t,m),window.addEventListener("resize",n),a(1,u=!1)}),Q(()=>{window.removeEventListener("resize",n)}),d.$$set=o=>{"filename"in o&&a(0,r=o.filename),"data"in o&&a(3,s=o.data)},[r,u,i,s]}class se extends q{constructor(e){super(),z(this,e,oe,ae,V,{filename:0,data:3})}}function T(d,e,a){const l=d.slice();return l[1]=e[a][0],l[2]=e[a][1],l[4]=a,l}function L(d){let e,a,l,r;return a=new se({props:{filename:d[1],data:d[2].chromosomes}}),{c(){e=v("div"),A(a.$$.fragment),l=k(),this.h()},l(s){e=b(s,"DIV",{class:!0});var i=I(e);F(a.$$.fragment,i),l=C(i),i.forEach(p),this.h()},h(){y(e,"class","m-4")},m(s,i){S(s,e,i),M(a,e,null),g(e,l),r=!0},p(s,i){const u={};i&1&&(u.filename=s[1]),i&1&&(u.data=s[2].chromosomes),a.$set(u)},i(s){r||(E(a.$$.fragment,s),r=!0)},o(s){w(a.$$.fragment,s),r=!1},d(s){s&&p(e),N(a)}}}function ne(d){let e,a,l='<h1 class="h1 mb-1">Chromosomal location bias</h1> <p>Explore the chromosomal location bias of the insertions in your dataset. For more detailed analysis and bias correction see <a class="anchor" href="https://github.com/BarquistLab/ChromoCorrect" target="_blank">ChromoCorrect</a>.</p>',r,s,i,u=B(d[0]),n=[];for(let o=0;o<u.length;o+=1)n[o]=L(T(d,u,o));const _=o=>w(n[o],1,1,()=>{n[o]=null});return{c(){e=v("div"),a=v("div"),a.innerHTML=l,r=k(),s=v("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=b(o,"DIV",{class:!0});var c=I(e);a=b(c,"DIV",{class:!0,"data-svelte-h":!0}),H(a)!=="svelte-1rxbwma"&&(a.innerHTML=l),r=C(c),s=b(c,"DIV",{class:!0});var t=I(s);for(let m=0;m<n.length;m+=1)n[m].l(t);t.forEach(p),c.forEach(p),this.h()},h(){y(a,"class","mb-4"),y(s,"class","grid grid-cols-1 2xl:grid-cols-2 gap-4"),y(e,"class","m-4")},m(o,c){S(o,e,c),g(e,a),g(e,r),g(e,s);for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(s,null);i=!0},p(o,[c]){if(c&1){u=B(o[0]);let t;for(t=0;t<u.length;t+=1){const m=T(o,u,t);n[t]?(n[t].p(m,c),E(n[t],1)):(n[t]=L(m),n[t].c(),E(n[t],1),n[t].m(s,null))}for(O(),t=u.length;t<n.length;t+=1)_(t);j()}},i(o){if(!i){for(let c=0;c<u.length;c+=1)E(n[c]);i=!0}},o(o){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)w(n[c]);i=!1},d(o){o&&p(e),X(n,o)}}}function re(d,e,a){let l;return R(d,Y,r=>a(0,l=r)),[l]}class ge extends q{constructor(e){super(),z(this,e,re,ne,V,{})}}export{ge as component};
