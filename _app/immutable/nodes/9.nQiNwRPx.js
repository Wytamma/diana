import{s as Pe,e as N,a as O,c as V,b as q,g as P,f as v,p as ae,i as M,h,I as fe,k as ue,t as J,d as K,n as le,j as ie,F as he,G as de,H as Te}from"../chunks/scheduler.Cnzm-Pn7.js";import{S as Le,i as Ge,b as R,d as B,m as j,t as w,g as we,c as ke,a as k,e as F,f as be}from"../chunks/index.BWxcAyja.js";import{e as U}from"../chunks/each.SoU_5gPK.js";import{S as Ne,R as Ve,T as $e,a as ce,b as qe,P as Me,D as Ye}from"../chunks/Datatable.svelte_svelte_type_style_lang.nWv56wJ0.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.aA2OJerz.js";import{T as ze,a as ve}from"../chunks/Tab.Ml3Vmoq9.js";import{i as Je}from"../chunks/insertStore.2CzxKJCQ.js";import{g as Ke}from"../chunks/generateGeneInsertSites.ozbo97IV.js";import{a as Qe}from"../chunks/annotationStore.CSH3VeDA.js";import{t as Ue}from"../chunks/TAStore.auniZptI.js";function Se(r,e,t){const n=r.slice();return n[7]=e[t],n}function De(r,e,t){const n=r.slice();return n[10]=e[t],n}function Ce(r,e,t){const n=r.slice();return n[10]=e[t],n}function Re(r,e,t){const n=r.slice();return n[10]=e[t],n}function We(r){let e;return{c(){e=J("Name")},l(t){e=K(t,"Name")},m(t,n){M(t,e,n)},d(t){t&&v(e)}}}function Xe(r){let e;return{c(){e=J("Start")},l(t){e=K(t,"Start")},m(t,n){M(t,e,n)},d(t){t&&v(e)}}}function Ze(r){let e;return{c(){e=J("Length")},l(t){e=K(t,"Length")},m(t,n){M(t,e,n)},d(t){t&&v(e)}}}function ye(r){let e=r[10]+"",t;return{c(){t=J(e)},l(n){t=K(n,e)},m(n,l){M(n,t,l)},p:le,d(n){n&&v(t)}}}function Be(r){let e,t;return e=new $e({props:{handler:r[2],orderBy:r[10],$$slots:{default:[ye]},$$scope:{ctx:r}}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p(n,l){const u={};l&131072&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function je(r){let e,t;return e=new ce({props:{handler:r[2],filterBy:r[10]}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p:le,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function Fe(r){let e,t=parseFloat(r[7][r[10]]).toFixed(2)+"",n;return{c(){e=N("td"),n=J(t)},l(l){e=V(l,"TD",{});var u=q(e);n=K(u,t),u.forEach(v)},m(l,u){M(l,e,u),h(e,n)},p(l,u){u&1&&t!==(t=parseFloat(l[7][l[10]]).toFixed(2)+"")&&ie(n,t)},d(l){l&&v(e)}}}function Oe(r){let e,t,n=r[7].name+"",l,u,c,g=r[7].start+"",i,_,p,S=r[7].length+"",C,m,D,L=U(r[1]),o=[];for(let s=0;s<L.length;s+=1)o[s]=Fe(De(r,L,s));return{c(){e=N("tr"),t=N("td"),l=J(n),u=O(),c=N("td"),i=J(g),_=O(),p=N("td"),C=J(S),m=O();for(let s=0;s<o.length;s+=1)o[s].c();D=O()},l(s){e=V(s,"TR",{});var d=q(e);t=V(d,"TD",{});var b=q(t);l=K(b,n),b.forEach(v),u=P(d),c=V(d,"TD",{});var G=q(c);i=K(G,g),G.forEach(v),_=P(d),p=V(d,"TD",{});var te=q(p);C=K(te,S),te.forEach(v),m=P(d);for(let Y=0;Y<o.length;Y+=1)o[Y].l(d);D=P(d),d.forEach(v)},m(s,d){M(s,e,d),h(e,t),h(t,l),h(e,u),h(e,c),h(c,i),h(e,_),h(e,p),h(p,C),h(e,m);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);h(e,D)},p(s,d){if(d&1&&n!==(n=s[7].name+"")&&ie(l,n),d&1&&g!==(g=s[7].start+"")&&ie(i,g),d&1&&S!==(S=s[7].length+"")&&ie(C,S),d&3){L=U(s[1]);let b;for(b=0;b<L.length;b+=1){const G=De(s,L,b);o[b]?o[b].p(G,d):(o[b]=Fe(G),o[b].c(),o[b].m(e,D))}for(;b<o.length;b+=1)o[b].d(1);o.length=L.length}},d(s){s&&v(e),fe(o,s)}}}function xe(r){let e,t,n,l,u,c,g,i,_,p,S,C,m,D,L,o,s,d,b,G,te,Y,me,ge,ne,_e,Q,W,pe,X,oe;n=new Ne({props:{handler:r[2]}}),u=new Ve({props:{handler:r[2]}}),p=new $e({props:{handler:r[2],orderBy:"name",$$slots:{default:[We]},$$scope:{ctx:r}}}),C=new $e({props:{handler:r[2],orderBy:"start",$$slots:{default:[Xe]},$$scope:{ctx:r}}}),D=new $e({props:{handler:r[2],orderBy:"length",$$slots:{default:[Ze]},$$scope:{ctx:r}}});let Z=U(r[1]),E=[];for(let a=0;a<Z.length;a+=1)E[a]=Be(Re(r,Z,a));const He=a=>k(E[a],1,1,()=>{E[a]=null});d=new ce({props:{handler:r[2],filterBy:"name"}}),G=new ce({props:{handler:r[2],filterBy:"start"}}),Y=new ce({props:{handler:r[2],filterBy:"length"}});let y=U(r[1]),I=[];for(let a=0;a<y.length;a+=1)I[a]=je(Ce(r,y,a));const Ae=a=>k(I[a],1,1,()=>{I[a]=null});let re=U(r[0]),H=[];for(let a=0;a<re.length;a+=1)H[a]=Oe(Se(r,re,a));return W=new qe({props:{handler:r[2]}}),X=new Me({props:{handler:r[2]}}),{c(){e=N("div"),t=N("header"),R(n.$$.fragment),l=O(),R(u.$$.fragment),c=O(),g=N("table"),i=N("thead"),_=N("tr"),R(p.$$.fragment),S=O(),R(C.$$.fragment),m=O(),R(D.$$.fragment),L=O();for(let a=0;a<E.length;a+=1)E[a].c();o=O(),s=N("tr"),R(d.$$.fragment),b=O(),R(G.$$.fragment),te=O(),R(Y.$$.fragment),me=O();for(let a=0;a<I.length;a+=1)I[a].c();ge=O(),ne=N("tbody");for(let a=0;a<H.length;a+=1)H[a].c();_e=O(),Q=N("footer"),R(W.$$.fragment),pe=O(),R(X.$$.fragment),this.h()},l(a){e=V(a,"DIV",{class:!0});var $=q(e);t=V($,"HEADER",{class:!0});var T=q(t);B(n.$$.fragment,T),l=P(T),B(u.$$.fragment,T),T.forEach(v),c=P($),g=V($,"TABLE",{class:!0});var x=q(g);i=V(x,"THEAD",{});var ee=q(i);_=V(ee,"TR",{});var f=q(_);B(p.$$.fragment,f),S=P(f),B(C.$$.fragment,f),m=P(f),B(D.$$.fragment,f),L=P(f);for(let z=0;z<E.length;z+=1)E[z].l(f);f.forEach(v),o=P(ee),s=V(ee,"TR",{});var A=q(s);B(d.$$.fragment,A),b=P(A),B(G.$$.fragment,A),te=P(A),B(Y.$$.fragment,A),me=P(A);for(let z=0;z<I.length;z+=1)I[z].l(A);A.forEach(v),ee.forEach(v),ge=P(x),ne=V(x,"TBODY",{});var Ie=q(ne);for(let z=0;z<H.length;z+=1)H[z].l(Ie);Ie.forEach(v),x.forEach(v),_e=P($),Q=V($,"FOOTER",{class:!0});var se=q(Q);B(W.$$.fragment,se),pe=P(se),B(X.$$.fragment,se),se.forEach(v),$.forEach(v),this.h()},h(){ae(t,"class","flex justify-between gap-4"),ae(g,"class","table table-hover table-compact w-full table-auto"),ae(Q,"class","flex justify-between"),ae(e,"class","overflow-x-auto space-y-4")},m(a,$){M(a,e,$),h(e,t),j(n,t,null),h(t,l),j(u,t,null),h(e,c),h(e,g),h(g,i),h(i,_),j(p,_,null),h(_,S),j(C,_,null),h(_,m),j(D,_,null),h(_,L);for(let T=0;T<E.length;T+=1)E[T]&&E[T].m(_,null);h(i,o),h(i,s),j(d,s,null),h(s,b),j(G,s,null),h(s,te),j(Y,s,null),h(s,me);for(let T=0;T<I.length;T+=1)I[T]&&I[T].m(s,null);h(g,ge),h(g,ne);for(let T=0;T<H.length;T+=1)H[T]&&H[T].m(ne,null);h(e,_e),h(e,Q),j(W,Q,null),h(Q,pe),j(X,Q,null),oe=!0},p(a,[$]){const T={};$&131072&&(T.$$scope={dirty:$,ctx:a}),p.$set(T);const x={};$&131072&&(x.$$scope={dirty:$,ctx:a}),C.$set(x);const ee={};if($&131072&&(ee.$$scope={dirty:$,ctx:a}),D.$set(ee),$&6){Z=U(a[1]);let f;for(f=0;f<Z.length;f+=1){const A=Re(a,Z,f);E[f]?(E[f].p(A,$),w(E[f],1)):(E[f]=Be(A),E[f].c(),w(E[f],1),E[f].m(_,null))}for(we(),f=Z.length;f<E.length;f+=1)He(f);ke()}if($&6){y=U(a[1]);let f;for(f=0;f<y.length;f+=1){const A=Ce(a,y,f);I[f]?(I[f].p(A,$),w(I[f],1)):(I[f]=je(A),I[f].c(),w(I[f],1),I[f].m(s,null))}for(we(),f=y.length;f<I.length;f+=1)Ae(f);ke()}if($&3){re=U(a[0]);let f;for(f=0;f<re.length;f+=1){const A=Se(a,re,f);H[f]?H[f].p(A,$):(H[f]=Oe(A),H[f].c(),H[f].m(ne,null))}for(;f<H.length;f+=1)H[f].d(1);H.length=re.length}},i(a){if(!oe){w(n.$$.fragment,a),w(u.$$.fragment,a),w(p.$$.fragment,a),w(C.$$.fragment,a),w(D.$$.fragment,a);for(let $=0;$<Z.length;$+=1)w(E[$]);w(d.$$.fragment,a),w(G.$$.fragment,a),w(Y.$$.fragment,a);for(let $=0;$<y.length;$+=1)w(I[$]);w(W.$$.fragment,a),w(X.$$.fragment,a),oe=!0}},o(a){k(n.$$.fragment,a),k(u.$$.fragment,a),k(p.$$.fragment,a),k(C.$$.fragment,a),k(D.$$.fragment,a),E=E.filter(Boolean);for(let $=0;$<E.length;$+=1)k(E[$]);k(d.$$.fragment,a),k(G.$$.fragment,a),k(Y.$$.fragment,a),I=I.filter(Boolean);for(let $=0;$<I.length;$+=1)k(I[$]);k(W.$$.fragment,a),k(X.$$.fragment,a),oe=!1},d(a){a&&v(e),F(n),F(u),F(p),F(C),F(D),fe(E,a),F(d),F(G),F(Y),fe(I,a),fe(H,a),F(W),F(X)}}}function et(r,e,t){let n,{data:l}=e,{column:u}=e;const c=Object.keys(l[0]).sort();let g=[];for(const p of l){let S={};for(const[C,m]of Object.entries(p))S[C]=m[u],S.name=m.name,S.start=m.start,S.length=m.geneLength;g.push(S)}const i=new Ye(g,{rowsPerPage:5}),_=i.getRows();return ue(r,_,p=>t(0,n=p)),r.$$set=p=>{"data"in p&&t(4,l=p.data),"column"in p&&t(5,u=p.column)},[n,c,i,_,l,u]}class Ee extends Le{constructor(e){super(),Ge(this,e,et,xe,Pe,{data:4,column:5})}}function tt(r){let e;return{c(){e=J("Read Counts")},l(t){e=K(t,"Read Counts")},m(t,n){M(t,e,n)},d(t){t&&v(e)}}}function nt(r){let e;return{c(){e=J("Insert Count")},l(t){e=K(t,"Insert Count")},m(t,n){M(t,e,n)},d(t){t&&v(e)}}}function rt(r){let e;return{c(){e=J("Insert Index")},l(t){e=K(t,"Insert Index")},m(t,n){M(t,e,n)},d(t){t&&v(e)}}}function at(r){let e,t,n,l,u,c,g,i,_;function p(o){r[2](o)}let S={name:"readCount",value:"readCount",$$slots:{default:[tt]},$$scope:{ctx:r}};r[0]!==void 0&&(S.group=r[0]),e=new ve({props:S}),he.push(()=>be(e,"group",p));function C(o){r[3](o)}let m={name:"insertCount",value:"insertCount",$$slots:{default:[nt]},$$scope:{ctx:r}};r[0]!==void 0&&(m.group=r[0]),l=new ve({props:m}),he.push(()=>be(l,"group",C));function D(o){r[4](o)}let L={name:"insertIndex",value:"insertIndex",$$slots:{default:[rt]},$$scope:{ctx:r}};return r[0]!==void 0&&(L.group=r[0]),g=new ve({props:L}),he.push(()=>be(g,"group",D)),{c(){R(e.$$.fragment),n=O(),R(l.$$.fragment),c=O(),R(g.$$.fragment)},l(o){B(e.$$.fragment,o),n=P(o),B(l.$$.fragment,o),c=P(o),B(g.$$.fragment,o)},m(o,s){j(e,o,s),M(o,n,s),j(l,o,s),M(o,c,s),j(g,o,s),_=!0},p(o,s){const d={};s&1024&&(d.$$scope={dirty:s,ctx:o}),!t&&s&1&&(t=!0,d.group=o[0],de(()=>t=!1)),e.$set(d);const b={};s&1024&&(b.$$scope={dirty:s,ctx:o}),!u&&s&1&&(u=!0,b.group=o[0],de(()=>u=!1)),l.$set(b);const G={};s&1024&&(G.$$scope={dirty:s,ctx:o}),!i&&s&1&&(i=!0,G.group=o[0],de(()=>i=!1)),g.$set(G)},i(o){_||(w(e.$$.fragment,o),w(l.$$.fragment,o),w(g.$$.fragment,o),_=!0)},o(o){k(e.$$.fragment,o),k(l.$$.fragment,o),k(g.$$.fragment,o),_=!1},d(o){o&&(v(n),v(c)),F(e,o),F(l,o),F(g,o)}}}function lt(r){let e,t;return e=new Ee({props:{data:r[1],column:"readCount"}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p:le,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function ot(r){let e,t;return e=new Ee({props:{data:r[1],column:"insertCount"}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p:le,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function st(r){let e,t;return e=new Ee({props:{data:r[1],column:"insIndex"}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p:le,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){F(e,n)}}}function ft(r){let e,t,n,l;const u=[st,ot,lt],c=[];function g(i,_){return i[0]=="insertIndex"?0:i[0]=="insertCount"?1:i[0]=="readCount"?2:-1}return~(e=g(r))&&(t=c[e]=u[e](r)),{c(){t&&t.c(),n=Te()},l(i){t&&t.l(i),n=Te()},m(i,_){~e&&c[e].m(i,_),M(i,n,_),l=!0},p(i,_){let p=e;e=g(i),e===p?~e&&c[e].p(i,_):(t&&(we(),k(c[p],1,1,()=>{c[p]=null}),ke()),~e?(t=c[e],t?t.p(i,_):(t=c[e]=u[e](i),t.c()),w(t,1),t.m(n.parentNode,n)):t=null)},i(i){l||(w(t),l=!0)},o(i){k(t),l=!1},d(i){i&&v(n),~e&&c[e].d(i)}}}function ut(r){let e,t,n;return t=new ze({props:{$$slots:{panel:[ft],default:[at]},$$scope:{ctx:r}}}),{c(){e=N("div"),R(t.$$.fragment),this.h()},l(l){e=V(l,"DIV",{class:!0});var u=q(e);B(t.$$.fragment,u),u.forEach(v),this.h()},h(){ae(e,"class","m-4")},m(l,u){M(l,e,u),j(t,e,null),n=!0},p(l,[u]){const c={};u&1025&&(c.$$scope={dirty:u,ctx:l}),t.$set(c)},i(l){n||(w(t.$$.fragment,l),n=!0)},o(l){k(t.$$.fragment,l),n=!1},d(l){l&&v(e),F(t)}}}function it(r,e,t){let n,l,u;ue(r,Ue,m=>t(6,n=m)),ue(r,Qe,m=>t(7,l=m)),ue(r,Je,m=>t(8,u=m));let c="insertIndex";const g={};for(const[m,D]of u){const L=D.map(s=>s.minus+s.plus),o=Ke(l.features,L,n,0,0);g[m]=o}const i=Math.max(...Object.values(g).map(m=>m.length)),_=[];for(let m=0;m<i;m++){const D={};for(const[L,o]of Object.entries(g))o[m]&&(D[L]=o[m]);_.push(D)}function p(m){c=m,t(0,c)}function S(m){c=m,t(0,c)}function C(m){c=m,t(0,c)}return[c,_,p,S,C]}class wt extends Le{constructor(e){super(),Ge(this,e,it,ut,Pe,{})}}export{wt as component};
