import{s as oe,l as J,f as ee,u as te,h as le,j as se,r as Oe,o as de,k as De,m as Y,p as R,d as Fe,n as fe,t as We,e as Je,c as ae,v as Ke}from"../chunks/scheduler.CkvNFtTO.js";import{S as ce,i as ue,e as S,s as w,c as M,a as D,f as G,d as b,A as me,l as i,E as Z,g as U,h as L,B as H,m as C,v as x,n as A,w as $,t as N,k as O,b as W,F as Q,G as X,C as K,x as Qe,o as Ve,p as je,q as Be,r as Ce,u as Xe,j as Pe}from"../chunks/index.C5AUI8_b.js";import{e as he}from"../chunks/each.DeNHq1dd.js";import{g as Ye}from"../chunks/stores.CBWOTlUs.js";import{g as Ze}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.huyUOs6B.js";import{a as xe}from"../chunks/annotationStore.CW3TlMex.js";import{u as re,t as $e}from"../chunks/TAStore.dEGDcR6u.js";import{r as ne}from"../chunks/refStore.C_Dmh6U1.js";import{i as ge}from"../chunks/igvStore.Bx96UU6m.js";const et=l=>({}),_e=l=>({}),tt=l=>({}),ve=l=>({}),lt=l=>({}),ke=l=>({});function pe(l){let e,t,a;const c=l[18].lead,s=ee(c,l,l[17],ke);return{c(){e=S("div"),s&&s.c(),this.h()},l(r){e=M(r,"DIV",{class:!0});var o=D(e);s&&s.l(o),o.forEach(b),this.h()},h(){i(e,"class",t="dropzone-lead "+l[5])},m(r,o){U(r,e,o),s&&s.m(e,null),a=!0},p(r,o){s&&s.p&&(!a||o[0]&131072)&&te(s,c,r,r[17],a?se(c,r[17],o,lt):le(r[17]),ke),(!a||o[0]&32&&t!==(t="dropzone-lead "+r[5]))&&i(e,"class",t)},i(r){a||(C(s,r),a=!0)},o(r){A(s,r),a=!1},d(r){r&&b(e),s&&s.d(r)}}}function st(l){let e,t="Upload a file",a;return{c(){e=S("strong"),e.textContent=t,a=N(" or drag and drop")},l(c){e=M(c,"STRONG",{"data-svelte-h":!0}),O(e)!=="svelte-13uz6lq"&&(e.textContent=t),a=W(c," or drag and drop")},m(c,s){U(c,e,s),U(c,a,s)},p:fe,d(c){c&&(b(e),b(a))}}}function be(l){let e,t,a;const c=l[18].meta,s=ee(c,l,l[17],_e);return{c(){e=S("small"),s&&s.c(),this.h()},l(r){e=M(r,"SMALL",{class:!0});var o=D(e);s&&s.l(o),o.forEach(b),this.h()},h(){i(e,"class",t="dropzone-meta "+l[7])},m(r,o){U(r,e,o),s&&s.m(e,null),a=!0},p(r,o){s&&s.p&&(!a||o[0]&131072)&&te(s,c,r,r[17],a?se(c,r[17],o,et):le(r[17]),_e),(!a||o[0]&128&&t!==(t="dropzone-meta "+r[7]))&&i(e,"class",t)},i(r){a||(C(s,r),a=!0)},o(r){A(s,r),a=!1},d(r){r&&b(e),s&&s.d(r)}}}function at(l){let e,t,a,c,s,r,o,_,E,I,p,d,n,f,y,T,P=[{type:"file"},{name:l[2]},{class:a="dropzone-input "+l[9]},l[11]()],j={};for(let m=0;m<P.length;m+=1)j=J(j,P[m]);let v=l[13].lead&&pe(l);const B=l[18].message,h=ee(B,l,l[17],ve),z=h||st();let u=l[13].meta&&be(l);return{c(){e=S("div"),t=S("input"),c=w(),s=S("div"),r=S("div"),v&&v.c(),o=w(),_=S("div"),z&&z.c(),I=w(),u&&u.c(),this.h()},l(m){e=M(m,"DIV",{class:!0,"data-testid":!0});var k=D(e);t=M(k,"INPUT",{type:!0,name:!0,class:!0}),c=G(k),s=M(k,"DIV",{class:!0});var F=D(s);r=M(F,"DIV",{class:!0});var V=D(r);v&&v.l(V),o=G(V),_=M(V,"DIV",{class:!0});var q=D(_);z&&z.l(q),q.forEach(b),I=G(V),u&&u.l(V),V.forEach(b),F.forEach(b),k.forEach(b),this.h()},h(){me(t,j),i(_,"class",E="dropzone-message "+l[6]),i(r,"class",p="dropzone-interface-text "+l[4]),i(s,"class",d="dropzone-interface "+l[8]+" "+l[3]),i(e,"class",n="dropzone "+l[10]),i(e,"data-testid","file-dropzone"),Z(e,"opacity-50",l[12].disabled)},m(m,k){U(m,e,k),L(e,t),t.autofocus&&t.focus(),l[32](t),L(e,c),L(e,s),L(s,r),v&&v.m(r,null),L(r,o),L(r,_),z&&z.m(_,null),L(r,I),u&&u.m(r,null),f=!0,y||(T=[H(t,"change",l[31]),H(t,"change",l[19]),H(t,"dragenter",l[20]),H(t,"dragover",l[21]),H(t,"dragleave",l[22]),H(t,"drop",l[23]),H(t,"click",l[24]),H(t,"keydown",l[25]),H(t,"keyup",l[26]),H(t,"keypress",l[27]),H(t,"focus",l[28]),H(t,"focusin",l[29]),H(t,"focusout",l[30])],y=!0)},p(m,k){me(t,j=Ze(P,[{type:"file"},(!f||k[0]&4)&&{name:m[2]},(!f||k[0]&512&&a!==(a="dropzone-input "+m[9]))&&{class:a},m[11]()])),m[13].lead?v?(v.p(m,k),k[0]&8192&&C(v,1)):(v=pe(m),v.c(),C(v,1),v.m(r,o)):v&&(x(),A(v,1,1,()=>{v=null}),$()),h&&h.p&&(!f||k[0]&131072)&&te(h,B,m,m[17],f?se(B,m[17],k,tt):le(m[17]),ve),(!f||k[0]&64&&E!==(E="dropzone-message "+m[6]))&&i(_,"class",E),m[13].meta?u?(u.p(m,k),k[0]&8192&&C(u,1)):(u=be(m),u.c(),C(u,1),u.m(r,null)):u&&(x(),A(u,1,1,()=>{u=null}),$()),(!f||k[0]&16&&p!==(p="dropzone-interface-text "+m[4]))&&i(r,"class",p),(!f||k[0]&264&&d!==(d="dropzone-interface "+m[8]+" "+m[3]))&&i(s,"class",d),(!f||k[0]&1024&&n!==(n="dropzone "+m[10]))&&i(e,"class",n),(!f||k[0]&5120)&&Z(e,"opacity-50",m[12].disabled)},i(m){f||(C(v),C(z,m),C(u),f=!0)},o(m){A(v),A(z,m),A(u),f=!1},d(m){m&&b(e),l[32](null),v&&v.d(),z&&z.d(m),u&&u.d(),y=!1,Oe(T)}}}const rt="textarea relative flex justify-center items-center",nt="w-full absolute top-0 left-0 right-0 bottom-0 z-[1] opacity-0 disabled:!opacity-0 cursor-pointer",it="flex justify-center items-center text-center";function ot(l,e,t){let a,c,s;const r=["files","fileInput","name","border","padding","rounded","regionInterface","regionInterfaceText","slotLead","slotMessage","slotMeta"];let o=de(e,r),{$$slots:_={},$$scope:E}=e;const I=De(_);let{files:p=void 0}=e,{fileInput:d=void 0}=e,{name:n}=e,{border:f="border-2 border-dashed"}=e,{padding:y="p-4 py-8"}=e,{rounded:T="rounded-container-token"}=e,{regionInterface:P=""}=e,{regionInterfaceText:j=""}=e,{slotLead:v="mb-4"}=e,{slotMessage:B=""}=e,{slotMeta:h="opacity-75"}=e;function z(){return delete o.class,o}function u(g){R.call(this,l,g)}function m(g){R.call(this,l,g)}function k(g){R.call(this,l,g)}function F(g){R.call(this,l,g)}function V(g){R.call(this,l,g)}function q(g){R.call(this,l,g)}function He(g){R.call(this,l,g)}function Ue(g){R.call(this,l,g)}function Ae(g){R.call(this,l,g)}function Re(g){R.call(this,l,g)}function we(g){R.call(this,l,g)}function Ge(g){R.call(this,l,g)}function qe(){p=this.files,t(0,p)}function Ne(g){Fe[g?"unshift":"push"](()=>{d=g,t(1,d)})}return l.$$set=g=>{t(33,e=J(J({},e),Y(g))),t(12,o=de(e,r)),"files"in g&&t(0,p=g.files),"fileInput"in g&&t(1,d=g.fileInput),"name"in g&&t(2,n=g.name),"border"in g&&t(14,f=g.border),"padding"in g&&t(15,y=g.padding),"rounded"in g&&t(16,T=g.rounded),"regionInterface"in g&&t(3,P=g.regionInterface),"regionInterfaceText"in g&&t(4,j=g.regionInterfaceText),"slotLead"in g&&t(5,v=g.slotLead),"slotMessage"in g&&t(6,B=g.slotMessage),"slotMeta"in g&&t(7,h=g.slotMeta),"$$scope"in g&&t(17,E=g.$$scope)},l.$$.update=()=>{t(10,a=`${rt} ${f} ${y} ${T} ${e.class??""}`)},t(9,c=`${nt}`),t(8,s=`${it}`),e=Y(e),[p,d,n,P,j,v,B,h,s,c,a,z,o,I,f,y,T,E,_,u,m,k,F,V,q,He,Ue,Ae,Re,we,Ge,qe,Ne]}class ft extends ce{constructor(e){super(),ue(this,e,ot,at,oe,{files:0,fileInput:1,name:2,border:14,padding:15,rounded:16,regionInterface:3,regionInterfaceText:4,slotLead:5,slotMessage:6,slotMeta:7},null,[-1,-1])}}function Ie(l){let e,t,a;const c=l[16].default,s=ee(c,l,l[15],null);return{c(){e=Q("text"),s&&s.c(),this.h()},l(r){e=X(r,"text",{x:!0,y:!0,"text-anchor":!0,"dominant-baseline":!0,"font-weight":!0,"font-size":!0,class:!0});var o=D(e);s&&s.l(o),o.forEach(b),this.h()},h(){i(e,"x","50%"),i(e,"y","50%"),i(e,"text-anchor","middle"),i(e,"dominant-baseline","middle"),i(e,"font-weight","bold"),i(e,"font-size",l[2]),i(e,"class",t="progress-radial-text "+l[7])},m(r,o){U(r,e,o),s&&s.m(e,null),a=!0},p(r,o){s&&s.p&&(!a||o&32768)&&te(s,c,r,r[15],a?se(c,r[15],o,null):le(r[15]),null),(!a||o&4)&&i(e,"font-size",r[2]),(!a||o&128&&t!==(t="progress-radial-text "+r[7]))&&i(e,"class",t)},i(r){a||(C(s,r),a=!0)},o(r){A(s,r),a=!1},d(r){r&&b(e),s&&s.d(r)}}}function ct(l){let e,t,a,c,s,r,o=`${l[9]}
			${l[9]}`,_,E,I,p,d=l[0]!=null&&l[0]>=0&&l[13].default&&Ie(l);return{c(){e=S("figure"),t=Q("svg"),a=Q("circle"),s=Q("circle"),d&&d.c(),this.h()},l(n){e=M(n,"FIGURE",{class:!0,"data-testid":!0,role:!0,"aria-labelledby":!0,"aria-valuenow":!0,"aria-valuetext":!0,"aria-valuemin":!0,"aria-valuemax":!0});var f=D(e);t=X(f,"svg",{viewBox:!0,class:!0});var y=D(t);a=X(y,"circle",{class:!0,"stroke-width":!0,r:!0,cx:!0,cy:!0}),D(a).forEach(b),s=X(y,"circle",{class:!0,"stroke-width":!0,r:!0,cx:!0,cy:!0,"stroke-linecap":!0}),D(s).forEach(b),d&&d.l(y),y.forEach(b),f.forEach(b),this.h()},h(){i(a,"class",c="progress-radial-track "+ze+" "+l[6]),i(a,"stroke-width",l[1]),i(a,"r",l[12]),i(a,"cx","50%"),i(a,"cy","50%"),i(s,"class",r="progress-radial-meter "+ye+" "+l[5]+" "+l[4]),i(s,"stroke-width",l[1]),i(s,"r",l[12]),i(s,"cx","50%"),i(s,"cy","50%"),i(s,"stroke-linecap",l[3]),K(s,"stroke-dasharray",o),K(s,"stroke-dashoffset",l[10]),i(t,"viewBox","0 0 "+ie+" "+ie),i(t,"class","rounded-full"),Z(t,"animate-spin",l[0]===void 0),i(e,"class",_="progress-radial "+l[11]),i(e,"data-testid","progress-radial"),i(e,"role","meter"),i(e,"aria-labelledby",l[8]),i(e,"aria-valuenow",E=l[0]||0),i(e,"aria-valuetext",I=l[0]?`${l[0]}%`:"Indeterminate Spinner"),i(e,"aria-valuemin",0),i(e,"aria-valuemax",100)},m(n,f){U(n,e,f),L(e,t),L(t,a),L(t,s),d&&d.m(t,null),p=!0},p(n,[f]){(!p||f&64&&c!==(c="progress-radial-track "+ze+" "+n[6]))&&i(a,"class",c),(!p||f&2)&&i(a,"stroke-width",n[1]),(!p||f&48&&r!==(r="progress-radial-meter "+ye+" "+n[5]+" "+n[4]))&&i(s,"class",r),(!p||f&2)&&i(s,"stroke-width",n[1]),(!p||f&8)&&i(s,"stroke-linecap",n[3]),f&512&&o!==(o=`${n[9]}
			${n[9]}`)&&K(s,"stroke-dasharray",o),f&1024&&K(s,"stroke-dashoffset",n[10]),n[0]!=null&&n[0]>=0&&n[13].default?d?(d.p(n,f),f&8193&&C(d,1)):(d=Ie(n),d.c(),C(d,1),d.m(t,null)):d&&(x(),A(d,1,1,()=>{d=null}),$()),(!p||f&1)&&Z(t,"animate-spin",n[0]===void 0),(!p||f&2048&&_!==(_="progress-radial "+n[11]))&&i(e,"class",_),(!p||f&256)&&i(e,"aria-labelledby",n[8]),(!p||f&1&&E!==(E=n[0]||0))&&i(e,"aria-valuenow",E),(!p||f&1&&I!==(I=n[0]?`${n[0]}%`:"Indeterminate Spinner"))&&i(e,"aria-valuetext",I)},i(n){p||(C(d),p=!0)},o(n){A(d),p=!1},d(n){n&&b(e),d&&d.d()}}}const ut="progress-radial relative overflow-hidden",ze="fill-transparent",ye="fill-transparent -rotate-90 origin-[50%_50%]",ie=512;function dt(l,e,t){let a,{$$slots:c={},$$scope:s}=e;const r=De(c);let{value:o=void 0}=e,{stroke:_=40}=e,{font:E=56}=e,{strokeLinecap:I="butt"}=e,{transition:p="transition-[stroke-dashoffset]"}=e,{width:d="w-36"}=e,{meter:n="stroke-surface-900 dark:stroke-surface-50"}=e,{track:f="stroke-surface-500/30"}=e,{fill:y="fill-token"}=e,{labelledby:T=""}=e;const P=ie/2-_/2;let j=P,v;function B(h){t(9,j=P*2*Math.PI),t(10,v=j-h/100*j)}return B(0),We(()=>{B(o===void 0?25:o)}),l.$$set=h=>{t(18,e=J(J({},e),Y(h))),"value"in h&&t(0,o=h.value),"stroke"in h&&t(1,_=h.stroke),"font"in h&&t(2,E=h.font),"strokeLinecap"in h&&t(3,I=h.strokeLinecap),"transition"in h&&t(4,p=h.transition),"width"in h&&t(14,d=h.width),"meter"in h&&t(5,n=h.meter),"track"in h&&t(6,f=h.track),"fill"in h&&t(7,y=h.fill),"labelledby"in h&&t(8,T=h.labelledby),"$$scope"in h&&t(15,s=h.$$scope)},l.$$.update=()=>{t(11,a=`${ut} ${d} ${e.class??""}`)},e=Y(e),[o,_,E,I,p,n,f,y,T,j,v,a,P,r,d,s,c]}class mt extends ce{constructor(e){super(),ue(this,e,dt,ct,oe,{value:0,stroke:1,font:2,strokeLinecap:3,transition:4,width:14,meter:5,track:6,fill:7,labelledby:8})}}function Ee(l,e,t){const a=l.slice();return a[11]=e[t],a[13]=t,a}function ht(l){let e,t='<span class="font-semibold">Load files</span> or drag and drop';return{c(){e=S("p"),e.innerHTML=t,this.h()},l(a){e=M(a,"P",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-10rbgmq"&&(e.innerHTML=t),this.h()},h(){i(e,"class","text-xl ")},m(a,c){U(a,e,c)},p:fe,d(a){a&&b(e)}}}function gt(l){let e;return{c(){e=N("Only GFF+FASTA and .userplot files allowed.")},l(t){e=W(t,"Only GFF+FASTA and .userplot files allowed.")},m(t,a){U(t,e,a)},d(t){t&&b(e)}}}function Le(l){let e,t,a,c,s=l[2].name+"",r,o,_,E='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',I,p;return{c(){e=S("div"),t=S("div"),a=S("p"),c=N("Reference: "),r=N(s),o=w(),_=S("button"),_.innerHTML=E,this.h()},l(d){e=M(d,"DIV",{class:!0});var n=D(e);t=M(n,"DIV",{class:!0});var f=D(t);a=M(f,"P",{class:!0});var y=D(a);c=W(y,"Reference: "),r=W(y,s),y.forEach(b),o=G(f),_=M(f,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(_)!=="svelte-220c8p"&&(_.innerHTML=E),f.forEach(b),n.forEach(b),this.h()},h(){i(a,"class","text-center text-lg"),i(_,"type","button"),i(_,"class","btn-icon variant-ringed-tertiary"),i(t,"class","flex justify-center items-center space-x-2"),i(e,"class","card p-4 m-2")},m(d,n){U(d,e,n),L(e,t),L(t,a),L(a,c),L(a,r),L(t,o),L(t,_),I||(p=H(_,"click",ne.reset),I=!0)},p(d,n){n&4&&s!==(s=d[2].name+"")&&Pe(r,s)},d(d){d&&b(e),I=!1,p()}}}function Te(l){let e,t,a,c,s=l[11][0]+"",r,o,_,E='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',I,p;function d(){return l[6](l[11])}return{c(){e=S("div"),t=S("div"),a=S("p"),c=N("Data: "),r=N(s),o=w(),_=S("button"),_.innerHTML=E,this.h()},l(n){e=M(n,"DIV",{class:!0});var f=D(e);t=M(f,"DIV",{class:!0});var y=D(t);a=M(y,"P",{class:!0});var T=D(a);c=W(T,"Data: "),r=W(T,s),T.forEach(b),o=G(y),_=M(y,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(_)!=="svelte-1wj9zhx"&&(_.innerHTML=E),y.forEach(b),f.forEach(b),this.h()},h(){i(a,"class","text-center text-lg"),i(_,"type","button"),i(_,"class","btn-icon variant-ringed-tertiary"),i(t,"class","flex justify-center items-center space-x-2"),i(e,"class","card p-4 m-2")},m(n,f){U(n,e,f),L(e,t),L(t,a),L(a,c),L(a,r),L(t,o),L(t,_),I||(p=H(_,"click",d),I=!0)},p(n,f){l=n,f&8&&s!==(s=l[11][0]+"")&&Pe(r,s)},d(n){n&&b(e),I=!1,p()}}}function Se(l){let e,t,a;return t=new mt({props:{value:void 0,width:"w-14",strokeLinecap:"round"}}),{c(){e=S("div"),Ve(t.$$.fragment),this.h()},l(c){e=M(c,"DIV",{class:!0});var s=D(e);je(t.$$.fragment,s),s.forEach(b),this.h()},h(){i(e,"class","flex items-center justify-center align-middle ml-8")},m(c,s){U(c,e,s),Be(t,e,null),a=!0},p:fe,i(c){a||(C(t.$$.fragment,c),a=!0)},o(c){A(t.$$.fragment,c),a=!1},d(c){c&&b(e),Ce(t)}}}function _t(l){let e,t,a,c='<div><section class="img-bg svelte-cmzijy"></section></div> <img class="logo-img mt-16 svelte-cmzijy" src="/images/logo2.png" alt="Skeleton Logo"/>',s,r,o="Transposon Sequencing Data Visualiser",_,E,I,p,d,n,f,y,T;function P(u){l[5](u)}let j={name:"files",multiple:!0,$$slots:{meta:[gt],message:[ht]},$$scope:{ctx:l}};l[0]!==void 0&&(j.files=l[0]),I=new ft({props:j}),Fe.push(()=>Qe(I,"files",P)),I.$on("change",l[4]),I.$on("click",Me),I.$on("drop",Me);let v=l[2].name&&Le(l),B=he(l[3]),h=[];for(let u=0;u<B.length;u+=1)h[u]=Te(Ee(l,B,u));let z=l[1]&&Se();return{c(){e=S("div"),t=S("div"),a=S("figure"),a.innerHTML=c,s=w(),r=S("h1"),r.textContent=o,_=w(),E=S("div"),Ve(I.$$.fragment),d=w(),n=S("div"),v&&v.c(),f=w();for(let u=0;u<h.length;u+=1)h[u].c();y=w(),z&&z.c(),this.h()},l(u){e=M(u,"DIV",{class:!0});var m=D(e);t=M(m,"DIV",{class:!0});var k=D(t);a=M(k,"FIGURE",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-vpzkus"&&(a.innerHTML=c),s=G(k),r=M(k,"H1",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-1opypuh"&&(r.textContent=o),_=G(k),E=M(k,"DIV",{class:!0});var F=D(E);je(I.$$.fragment,F),F.forEach(b),k.forEach(b),m.forEach(b),d=G(u),n=M(u,"DIV",{class:!0});var V=D(n);v&&v.l(V),f=G(V);for(let q=0;q<h.length;q+=1)h[q].l(V);y=G(V),z&&z.l(V),V.forEach(b),this.h()},h(){i(a,"class","card-hover rounded-full svelte-cmzijy"),i(r,"class","text-center text-3xl"),i(E,"class","px-2 w-full"),i(t,"class","flex flex-col items-center align-baseline justify-center max-w-4xl space-y-10 "),i(e,"class","flex justify-center mb-6"),i(n,"class","flex flex-wrap space-4 justify-center")},m(u,m){U(u,e,m),L(e,t),L(t,a),L(t,s),L(t,r),L(t,_),L(t,E),Be(I,E,null),U(u,d,m),U(u,n,m),v&&v.m(n,null),L(n,f);for(let k=0;k<h.length;k+=1)h[k]&&h[k].m(n,null);L(n,y),z&&z.m(n,null),T=!0},p(u,[m]){const k={};if(m&16384&&(k.$$scope={dirty:m,ctx:u}),!p&&m&1&&(p=!0,k.files=u[0],Je(()=>p=!1)),I.$set(k),u[2].name?v?v.p(u,m):(v=Le(u),v.c(),v.m(n,f)):v&&(v.d(1),v=null),m&8){B=he(u[3]);let F;for(F=0;F<B.length;F+=1){const V=Ee(u,B,F);h[F]?h[F].p(V,m):(h[F]=Te(V),h[F].c(),h[F].m(n,y))}for(;F<h.length;F+=1)h[F].d(1);h.length=B.length}u[1]?z?(z.p(u,m),m&2&&C(z,1)):(z=Se(),z.c(),C(z,1),z.m(n,null)):z&&(x(),A(z,1,1,()=>{z=null}),$())},i(u){T||(C(I.$$.fragment,u),C(z),T=!0)},o(u){A(I.$$.fragment,u),A(z),T=!1},d(u){u&&(b(e),b(d),b(n)),Ce(I),v&&v.d(),Xe(h,u),z&&z.d()}}}function vt(l){const e=l.split(`
`);let t="",a="",c=!1;for(const s of e){if(s.startsWith("##FASTA")){c=!0;continue}c&&(s.startsWith(">")?(a&&(t+=a+`
`),a=s+`
`):a+=s.trim())}return a&&(t+=a+`
`),t.trim()}function Me(){const l=document.getElementsByName("files")[0];l.value=""}function kt(l,e,t){let a,c,s;ae(l,ge,d=>t(7,a=d)),ae(l,ne,d=>t(2,c=d)),ae(l,re,d=>t(3,s=d));const r=Ye();let o,_=!1;function E(d){if(console.log("Files dropped:",o),!o||o.length===0)return;t(1,_=!0);let n=[];for(let f=0;f<o.length;f++){const y=o[f],T=y.name,P=new FileReader;n.push(new Promise((j,v)=>{P.onload=async B=>{var z,u;let h=(u=(z=B.target)==null?void 0:z.result)==null?void 0:u.toString();if(T.endsWith(".gff")||T.endsWith(".gff3")){await xe.load(h);const m=vt(h);await ne.load(T,m).catch(k=>{console.error("Error loading reference:",k);const V={message:"Error loading reference: "+k,background:"variant-ghost-error"};r.trigger(V)}),Ke(ge,a.locus=void 0,a),await $e.load(m),j(0)}else if(T.endsWith(".userplot"))await re.load(T,h);else{console.error("Unsupported file type:",T);const k={message:"Unsupported file type: "+T,background:"variant-ghost-error"};r.trigger(k),v("Unsupported file type: "+T)}j(0)},P.onerror=v,P.readAsText(y)}))}Promise.all(n).then(f=>{t(1,_=!1)}).catch(f=>{console.error("Error reading files:",f),t(1,_=!1)})}function I(d){o=d,t(0,o)}return[o,_,c,s,E,I,d=>re.remove(d[0])]}class Mt extends ce{constructor(e){super(),ue(this,e,kt,_t,oe,{})}}export{Mt as component};
