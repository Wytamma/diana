import{s as He,e as k,t as C,a as g,c as B,b as D,d as O,f as h,g as p,m as j,i as X,h as l,Q as qe,j as he,n as Ie,k as Fe,J as Qe,l as We}from"../chunks/DfgCqy7z.js";import{S as Ce,i as Oe,b as A,d as P,m as F,t as w,g as Ye,c as ze,a as T,e as I}from"../chunks/P-XqeZIV.js";import{e as Le}from"../chunks/DvuRD1Iq.js";import{S as Xe,D as Ze,T as Ee,a as Te,R as xe,b as et,P as tt,c as nt}from"../chunks/CK802j79.js";import{a as Re}from"../chunks/8Ozl1p9l.js";function rt(n){let e,t,r,$,s,i=Ve(n[2],n[0])+"",o,v,u;return{c(){e=k("button"),t=k("span"),r=C(n[1]),$=g(),s=k("span"),o=C(i),this.h()},l(E){e=B(E,"BUTTON",{class:!0});var R=D(e);t=B(R,"SPAN",{class:!0});var _=D(t);r=O(_,n[1]),_.forEach(h),$=p(R),s=B(R,"SPAN",{class:!0});var z=D(s);o=O(z,i),z.forEach(h),R.forEach(h),this.h()},h(){j(t,"class","font-semibold bg-surface-500 px-1 py-1"),j(s,"class","px-1 py-1 mr-1"),j(e,"class","inline-flex items-center rounded m-1 overflow-hidden border border-surface-200 [&>*]:pointer-events-none")},m(E,R){X(E,e,R),l(e,t),l(t,r),l(e,$),l(e,s),l(s,o),v||(u=qe(e,"click",n[3]),v=!0)},p(E,[R]){R&2&&he(r,E[1]),R&5&&i!==(i=Ve(E[2],E[0])+"")&&he(o,i)},i:Ie,o:Ie,d(E){E&&h(e),v=!1,u()}}}function Ve(n,e){return n.length>e?n.substring(0,e)+"...":n}function at(n,e,t){let{keyName:r}=e,{value:$}=e,{maxLength:s=15}=e;function i(){s===$.length?t(0,s=15):t(0,s=$.length)}return n.$$set=o=>{"keyName"in o&&t(1,r=o.keyName),"value"in o&&t(2,$=o.value),"maxLength"in o&&t(0,s=o.maxLength)},[s,r,$,i]}class lt extends Ce{constructor(e){super(),Oe(this,e,at,rt,He,{keyName:1,value:2,maxLength:0})}}function st(n){let e,t,r,$;return{c(){e=k("th"),t=k("input"),this.h()},l(s){e=B(s,"TH",{class:!0});var i=D(e);t=B(i,"INPUT",{type:!0,class:!0}),i.forEach(h),this.h()},h(){j(t,"type","checkbox"),j(t,"class","checkbox"),t.checked=n[0],j(e,"class","cursor-pointer select-none text-center")},m(s,i){X(s,e,i),l(e,t),r||($=qe(e,"click",n[3]),r=!0)},p(s,[i]){i&1&&(t.checked=s[0])},i:Ie,o:Ie,d(s){s&&h(e),r=!1,$()}}}function ot(n,e,t){let r,$,{handler:s}=e;const i=s.isAllSelected();Fe(n,i,u=>t(0,$=u));const o=s.getSelected();Fe(n,o,u=>t(5,r=u));function v(){s.selectAll({selectBy:"_id"}),Re.setFilteredFeatures(r)}return n.$$set=u=>{"handler"in u&&t(4,s=u.handler)},[$,i,o,v,s]}class ft extends Ce{constructor(e){super(),Oe(this,e,ot,st,He,{handler:4})}}function Ue(n,e,t){const r=n.slice();return r[9]=e[t],r}function Me(n,e,t){const r=n.slice();return r[12]=e[t][0],r[13]=e[t][1],r}function ut(n){let e;return{c(){e=C("Chromosome")},l(t){e=O(t,"Chromosome")},m(t,r){X(t,e,r)},d(t){t&&h(e)}}}function $t(n){let e;return{c(){e=C("Name")},l(t){e=O(t,"Name")},m(t,r){X(t,e,r)},d(t){t&&h(e)}}}function ht(n){let e;return{c(){e=C("Type")},l(t){e=O(t,"Type")},m(t,r){X(t,e,r)},d(t){t&&h(e)}}}function it(n){let e;return{c(){e=C("Start")},l(t){e=O(t,"Start")},m(t,r){X(t,e,r)},d(t){t&&h(e)}}}function ct(n){let e;return{c(){e=C("End")},l(t){e=O(t,"End")},m(t,r){X(t,e,r)},d(t){t&&h(e)}}}function dt(n){let e;return{c(){e=C("Strand")},l(t){e=O(t,"Strand")},m(t,r){X(t,e,r)},d(t){t&&h(e)}}}function mt(n){let e;return{c(){e=C("Attributes")},l(t){e=O(t,"Attributes")},m(t,r){X(t,e,r)},d(t){t&&h(e)}}}function Ge(n){let e,t;return e=new lt({props:{keyName:n[12],value:n[13]?n[13]:"",maxLength:15}}),{c(){A(e.$$.fragment)},l(r){P(e.$$.fragment,r)},m(r,$){F(e,r,$),t=!0},p(r,$){const s={};$&2&&(s.keyName=r[12]),$&2&&(s.value=r[13]?r[13]:""),e.$set(s)},i(r){t||(w(e.$$.fragment,r),t=!0)},o(r){T(e.$$.fragment,r),t=!1},d(r){I(e,r)}}}function Je(n){let e,t,r,$,s,i,o=n[9].seqId+"",v,u,E,R=n[9].attributes.Name+"",_,z,V,le=n[9].type+"",G,ce,U,se=n[9].start+"",J,de,M,oe=n[9].stop+"",Q,me,y,K=n[9].strand+"",te,ie,ne,Z,q,x,ke;function fe(){return n[6](n[9])}let ee=Le(Object.entries(n[9].attributes)),d=[];for(let b=0;b<ee.length;b+=1)d[b]=Ge(Me(n,ee,b));const De=b=>T(d[b],1,1,()=>{d[b]=null});return{c(){e=k("tr"),t=k("td"),r=k("input"),s=g(),i=k("td"),v=C(o),u=g(),E=k("td"),_=C(R),z=g(),V=k("td"),G=C(le),ce=g(),U=k("td"),J=C(se),de=g(),M=k("td"),Q=C(oe),me=g(),y=k("td"),te=C(K),ie=g(),ne=k("td");for(let b=0;b<d.length;b+=1)d[b].c();Z=g(),this.h()},l(b){e=B(b,"TR",{});var f=D(e);t=B(f,"TD",{class:!0});var m=D(t);r=B(m,"INPUT",{class:!0,type:!0}),m.forEach(h),s=p(f),i=B(f,"TD",{});var ue=D(i);v=O(ue,o),ue.forEach(h),u=p(f),E=B(f,"TD",{});var re=D(E);_=O(re,R),re.forEach(h),z=p(f),V=B(f,"TD",{});var Be=D(V);G=O(Be,le),Be.forEach(h),ce=p(f),U=B(f,"TD",{});var $e=D(U);J=O($e,se),$e.forEach(h),de=p(f),M=B(f,"TD",{});var ye=D(M);Q=O(ye,oe),ye.forEach(h),me=p(f),y=B(f,"TD",{});var Y=D(y);te=O(Y,K),Y.forEach(h),ie=p(f),ne=B(f,"TD",{});var ae=D(ne);for(let ge=0;ge<d.length;ge+=1)d[ge].l(ae);ae.forEach(h),Z=p(f),f.forEach(h),this.h()},h(){j(r,"class","checkbox"),j(r,"type","checkbox"),r.checked=$=n[0].includes(n[9]._id),j(t,"class","text-center")},m(b,f){X(b,e,f),l(e,t),l(t,r),l(e,s),l(e,i),l(i,v),l(e,u),l(e,E),l(E,_),l(e,z),l(e,V),l(V,G),l(e,ce),l(e,U),l(U,J),l(e,de),l(e,M),l(M,Q),l(e,me),l(e,y),l(y,te),l(e,ie),l(e,ne);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(ne,null);l(e,Z),q=!0,x||(ke=qe(r,"click",fe),x=!0)},p(b,f){if(n=b,(!q||f&3&&$!==($=n[0].includes(n[9]._id)))&&(r.checked=$),(!q||f&2)&&o!==(o=n[9].seqId+"")&&he(v,o),(!q||f&2)&&R!==(R=n[9].attributes.Name+"")&&he(_,R),(!q||f&2)&&le!==(le=n[9].type+"")&&he(G,le),(!q||f&2)&&se!==(se=n[9].start+"")&&he(J,se),(!q||f&2)&&oe!==(oe=n[9].stop+"")&&he(Q,oe),(!q||f&2)&&K!==(K=n[9].strand+"")&&he(te,K),f&2){ee=Le(Object.entries(n[9].attributes));let m;for(m=0;m<ee.length;m+=1){const ue=Me(n,ee,m);d[m]?(d[m].p(ue,f),w(d[m],1)):(d[m]=Ge(ue),d[m].c(),w(d[m],1),d[m].m(ne,null))}for(Ye(),m=ee.length;m<d.length;m+=1)De(m);ze()}},i(b){if(!q){for(let f=0;f<ee.length;f+=1)w(d[f]);q=!0}},o(b){d=d.filter(Boolean);for(let f=0;f<d.length;f+=1)T(d[f]);q=!1},d(b){b&&h(e),Qe(d,b),x=!1,ke()}}}function gt(n){let e,t,r,$,s,i,o,v,u,E,R,_,z,V,le,G,ce,U,se,J,de,M,oe,Q,me,y,K,te=n[0].length+"",ie,ne,Z,q,x,ke,fe,ee,d,De,b,f,m,ue,re,Be,$e,ye,Y,ae,ge,pe,je,_e,Ne;r=new Xe({props:{handler:n[2]}}),s=new Ze({props:{handler:n[2]}}),E=new ft({props:{handler:n[2]}}),_=new Ee({props:{handler:n[2],orderBy:"seqId",$$slots:{default:[ut]},$$scope:{ctx:n}}}),V=new Ee({props:{handler:n[2],orderBy:"attributes",$$slots:{default:[$t]},$$scope:{ctx:n}}}),G=new Ee({props:{handler:n[2],orderBy:"type",$$slots:{default:[ht]},$$scope:{ctx:n}}}),U=new Ee({props:{handler:n[2],orderBy:"start",$$slots:{default:[it]},$$scope:{ctx:n}}}),J=new Ee({props:{handler:n[2],orderBy:"end",$$slots:{default:[ct]},$$scope:{ctx:n}}}),M=new Ee({props:{handler:n[2],orderBy:"strand",$$slots:{default:[dt]},$$scope:{ctx:n}}}),Q=new Ee({props:{handler:n[2],orderBy:"attributes",$$slots:{default:[mt]},$$scope:{ctx:n}}}),Z=new Te({props:{handler:n[2],filterBy:"seqId"}}),x=new Te({props:{handler:n[2],filterBy:"attributes"}}),fe=new Te({props:{handler:n[2],filterBy:"type"}}),d=new Te({props:{handler:n[2],filterBy:"start"}}),b=new Te({props:{handler:n[2],filterBy:"end"}}),m=new Te({props:{handler:n[2],filterBy:"strand"}}),re=new Te({props:{handler:n[2],filterBy:"attributes"}});let be=Le(n[1]),S=[];for(let a=0;a<be.length;a+=1)S[a]=Je(Ue(n,be,a));const Ke=a=>T(S[a],1,1,()=>{S[a]=null});return ae=new xe({props:{handler:n[2]}}),pe=new et({props:{handler:n[2]}}),_e=new tt({props:{handler:n[2]}}),{c(){e=k("div"),t=k("header"),A(r.$$.fragment),$=g(),A(s.$$.fragment),i=g(),o=k("table"),v=k("thead"),u=k("tr"),A(E.$$.fragment),R=g(),A(_.$$.fragment),z=g(),A(V.$$.fragment),le=g(),A(G.$$.fragment),ce=g(),A(U.$$.fragment),se=g(),A(J.$$.fragment),de=g(),A(M.$$.fragment),oe=g(),A(Q.$$.fragment),me=g(),y=k("tr"),K=k("th"),ie=C(te),ne=g(),A(Z.$$.fragment),q=g(),A(x.$$.fragment),ke=g(),A(fe.$$.fragment),ee=g(),A(d.$$.fragment),De=g(),A(b.$$.fragment),f=g(),A(m.$$.fragment),ue=g(),A(re.$$.fragment),Be=g(),$e=k("tbody");for(let a=0;a<S.length;a+=1)S[a].c();ye=g(),Y=k("footer"),A(ae.$$.fragment),ge=g(),A(pe.$$.fragment),je=g(),A(_e.$$.fragment),this.h()},l(a){e=B(a,"DIV",{class:!0});var c=D(e);t=B(c,"HEADER",{class:!0});var W=D(t);P(r.$$.fragment,W),$=p(W),P(s.$$.fragment,W),W.forEach(h),i=p(c),o=B(c,"TABLE",{class:!0});var ve=D(o);v=B(ve,"THEAD",{});var we=D(v);u=B(we,"TR",{});var L=D(u);P(E.$$.fragment,L),R=p(L),P(_.$$.fragment,L),z=p(L),P(V.$$.fragment,L),le=p(L),P(G.$$.fragment,L),ce=p(L),P(U.$$.fragment,L),se=p(L),P(J.$$.fragment,L),de=p(L),P(M.$$.fragment,L),oe=p(L),P(Q.$$.fragment,L),L.forEach(h),me=p(we),y=B(we,"TR",{});var H=D(y);K=B(H,"TH",{class:!0});var Ae=D(K);ie=O(Ae,te),Ae.forEach(h),ne=p(H),P(Z.$$.fragment,H),q=p(H),P(x.$$.fragment,H),ke=p(H),P(fe.$$.fragment,H),ee=p(H),P(d.$$.fragment,H),De=p(H),P(b.$$.fragment,H),f=p(H),P(m.$$.fragment,H),ue=p(H),P(re.$$.fragment,H),H.forEach(h),we.forEach(h),Be=p(ve),$e=B(ve,"TBODY",{});var Pe=D($e);for(let Se=0;Se<S.length;Se+=1)S[Se].l(Pe);Pe.forEach(h),ve.forEach(h),ye=p(c),Y=B(c,"FOOTER",{class:!0});var N=D(Y);P(ae.$$.fragment,N),ge=p(N),P(pe.$$.fragment,N),je=p(N),P(_e.$$.fragment,N),N.forEach(h),c.forEach(h),this.h()},h(){j(t,"class","flex justify-between gap-4"),j(K,"class","text-center"),j(o,"class","table table-hover table-compact w-full table-auto"),j(Y,"class","flex justify-between"),j(e,"class","overflow-x-auto space-y-4")},m(a,c){X(a,e,c),l(e,t),F(r,t,null),l(t,$),F(s,t,null),l(e,i),l(e,o),l(o,v),l(v,u),F(E,u,null),l(u,R),F(_,u,null),l(u,z),F(V,u,null),l(u,le),F(G,u,null),l(u,ce),F(U,u,null),l(u,se),F(J,u,null),l(u,de),F(M,u,null),l(u,oe),F(Q,u,null),l(v,me),l(v,y),l(y,K),l(K,ie),l(y,ne),F(Z,y,null),l(y,q),F(x,y,null),l(y,ke),F(fe,y,null),l(y,ee),F(d,y,null),l(y,De),F(b,y,null),l(y,f),F(m,y,null),l(y,ue),F(re,y,null),l(o,Be),l(o,$e);for(let W=0;W<S.length;W+=1)S[W]&&S[W].m($e,null);l(e,ye),l(e,Y),F(ae,Y,null),l(Y,ge),F(pe,Y,null),l(Y,je),F(_e,Y,null),Ne=!0},p(a,[c]){const W={};c&65536&&(W.$$scope={dirty:c,ctx:a}),_.$set(W);const ve={};c&65536&&(ve.$$scope={dirty:c,ctx:a}),V.$set(ve);const we={};c&65536&&(we.$$scope={dirty:c,ctx:a}),G.$set(we);const L={};c&65536&&(L.$$scope={dirty:c,ctx:a}),U.$set(L);const H={};c&65536&&(H.$$scope={dirty:c,ctx:a}),J.$set(H);const Ae={};c&65536&&(Ae.$$scope={dirty:c,ctx:a}),M.$set(Ae);const Pe={};if(c&65536&&(Pe.$$scope={dirty:c,ctx:a}),Q.$set(Pe),(!Ne||c&1)&&te!==(te=a[0].length+"")&&he(ie,te),c&35){be=Le(a[1]);let N;for(N=0;N<be.length;N+=1){const Se=Ue(a,be,N);S[N]?(S[N].p(Se,c),w(S[N],1)):(S[N]=Je(Se),S[N].c(),w(S[N],1),S[N].m($e,null))}for(Ye(),N=be.length;N<S.length;N+=1)Ke(N);ze()}},i(a){if(!Ne){w(r.$$.fragment,a),w(s.$$.fragment,a),w(E.$$.fragment,a),w(_.$$.fragment,a),w(V.$$.fragment,a),w(G.$$.fragment,a),w(U.$$.fragment,a),w(J.$$.fragment,a),w(M.$$.fragment,a),w(Q.$$.fragment,a),w(Z.$$.fragment,a),w(x.$$.fragment,a),w(fe.$$.fragment,a),w(d.$$.fragment,a),w(b.$$.fragment,a),w(m.$$.fragment,a),w(re.$$.fragment,a);for(let c=0;c<be.length;c+=1)w(S[c]);w(ae.$$.fragment,a),w(pe.$$.fragment,a),w(_e.$$.fragment,a),Ne=!0}},o(a){T(r.$$.fragment,a),T(s.$$.fragment,a),T(E.$$.fragment,a),T(_.$$.fragment,a),T(V.$$.fragment,a),T(G.$$.fragment,a),T(U.$$.fragment,a),T(J.$$.fragment,a),T(M.$$.fragment,a),T(Q.$$.fragment,a),T(Z.$$.fragment,a),T(x.$$.fragment,a),T(fe.$$.fragment,a),T(d.$$.fragment,a),T(b.$$.fragment,a),T(m.$$.fragment,a),T(re.$$.fragment,a),S=S.filter(Boolean);for(let c=0;c<S.length;c+=1)T(S[c]);T(ae.$$.fragment,a),T(pe.$$.fragment,a),T(_e.$$.fragment,a),Ne=!1},d(a){a&&h(e),I(r),I(s),I(E),I(_),I(V),I(G),I(U),I(J),I(M),I(Q),I(Z),I(x),I(fe),I(d),I(b),I(m),I(re),Qe(S,a),I(ae),I(pe),I(_e)}}}function pt(n,e,t){let r,$,s;Fe(n,Re,_=>t(7,$=_));const i=$.features,o=new nt(i,{rowsPerPage:5}),v=o.getRows();Fe(n,v,_=>t(1,s=_));const u=o.getSelected();Fe(n,u,_=>t(0,r=_)),o.on("change",()=>{u.set($.filteredFeatures.map(_=>_._id))}),Re.subscribe(_=>{u.set(_.filteredFeatures.map(z=>z._id))});function E(_){o.select(_),Re.setFilteredFeatures(r)}return[r,s,o,v,u,E,_=>E(_._id)]}class _t extends Ce{constructor(e){super(),Oe(this,e,pt,gt,He,{})}}function bt(n){let e,t,r='<h1 class="h1 mb-1">Features &amp; annotations</h1> <p>Explore and filter the features and annotations that will be used for downstream analysis.</p>',$,s,i;return s=new _t({}),{c(){e=k("div"),t=k("div"),t.innerHTML=r,$=g(),A(s.$$.fragment),this.h()},l(o){e=B(o,"DIV",{class:!0});var v=D(e);t=B(v,"DIV",{class:!0,"data-svelte-h":!0}),We(t)!=="svelte-1fc3wog"&&(t.innerHTML=r),$=p(v),P(s.$$.fragment,v),v.forEach(h),this.h()},h(){j(t,"class","mb-4"),j(e,"class","m-4")},m(o,v){X(o,e,v),l(e,t),l(e,$),F(s,e,null),i=!0},p:Ie,i(o){i||(w(s.$$.fragment,o),i=!0)},o(o){T(s.$$.fragment,o),i=!1},d(o){o&&h(e),I(s)}}}class Bt extends Ce{constructor(e){super(),Oe(this,e,null,bt,He,{})}}export{Bt as component};
