import{s as Q,e as b,t as ee,a as D,c as w,b as $,d as te,f as v,g as C,l as U,m as E,u as M,i as L,h as g,j as ae,k as X,H as ne,I as oe,n as se,J as re}from"../chunks/fdk2rqUP.js";import{S as Y,i as Z,t as y,g as V,a as k,c as H,b as R,d as j,m as q,e as z}from"../chunks/CdCg8B6F.js";import{e as G}from"../chunks/CHHpUjtn.js";import{i as le}from"../chunks/CMe-kOzu.js";import{D as ie,a as ce}from"../chunks/BR__UL2w.js";import{a as fe}from"../chunks/kbGllwMu.js";import{g as de,P as T}from"../chunks/CT0txMk3.js";import"../chunks/1N5xdIk4.js";import{P as me}from"../chunks/DTMBj-cl.js";function N(d){let e,a;return e=new ce({props:{handler:d[1],filename:`${d[0]}.csv`}}),{c(){R(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,n){q(e,t,n),a=!0},p(t,n){const l={};n&2&&(l.handler=t[1]),n&1&&(l.filename=`${t[0]}.csv`),e.$set(l)},i(t){a||(y(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){z(e,t)}}}function J(d){let e,a,t;return a=new me({props:{value:void 0,width:"w-14",strokeLinecap:"round"}}),{c(){e=b("div"),R(a.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var l=$(e);j(a.$$.fragment,l),l.forEach(v),this.h()},h(){E(e,"class","flex items-center justify-center align-middle m-12")},m(n,l){L(n,e,l),q(a,e,null),t=!0},p:se,i(n){t||(y(a.$$.fragment,n),t=!0)},o(n){k(a.$$.fragment,n),t=!1},d(n){n&&v(e),z(a)}}}function ue(d){let e,a,t,n,l,I,u,r,p,s,o,i,h,P="The insert index is the number of inserts in a feature divided by the feature length.",x,c=d[1]&&N(d),f=d[2]&&J();return{c(){e=b("div"),a=b("header"),t=b("div"),n=b("h2"),l=ee(d[0]),I=D(),u=b("div"),c&&c.c(),r=D(),p=b("section"),s=b("div"),o=D(),f&&f.c(),i=D(),h=b("footer"),h.textContent=P,this.h()},l(m){e=w(m,"DIV",{class:!0});var _=$(e);a=w(_,"HEADER",{class:!0});var O=$(a);t=w(O,"DIV",{class:!0});var S=$(t);n=w(S,"H2",{class:!0});var A=$(n);l=te(A,d[0]),A.forEach(v),I=C(S),u=w(S,"DIV",{});var F=$(u);c&&c.l(F),F.forEach(v),S.forEach(v),O.forEach(v),r=C(_),p=w(_,"SECTION",{class:!0});var B=$(p);s=w(B,"DIV",{id:!0,style:!0}),$(s).forEach(v),o=C(B),f&&f.l(B),B.forEach(v),i=C(_),h=w(_,"FOOTER",{class:!0,"data-svelte-h":!0}),U(h)!=="svelte-1sqs8gt"&&(h.textContent=P),_.forEach(v),this.h()},h(){E(n,"class","h3"),E(t,"class","flex justify-between align-middle"),E(a,"class","card-header"),E(s,"id",d[3]),M(s,"width","100%"),M(s,"height","100%"),E(p,"class","p-4"),E(h,"class","card-footer"),E(e,"class","card")},m(m,_){L(m,e,_),g(e,a),g(a,t),g(t,n),g(n,l),g(t,I),g(t,u),c&&c.m(u,null),g(e,r),g(e,p),g(p,s),g(p,o),f&&f.m(p,null),g(e,i),g(e,h),x=!0},p(m,[_]){(!x||_&1)&&ae(l,m[0]),m[1]?c?(c.p(m,_),_&2&&y(c,1)):(c=N(m),c.c(),y(c,1),c.m(u,null)):c&&(V(),k(c,1,1,()=>{c=null}),H()),m[2]?f?(f.p(m,_),_&4&&y(f,1)):(f=J(),f.c(),y(f,1),f.m(p,null)):f&&(V(),k(f,1,1,()=>{f=null}),H())},i(m){x||(y(c),y(f),x=!0)},o(m){k(c),k(f),x=!1},d(m){m&&v(e),c&&c.d(),f&&f.d()}}}function he(d,e,a){let t;X(d,fe,o=>a(5,t=o));let{filename:n}=e,{data:l}=e,I,u=`plotly-${n}`,r=!0;const p=()=>{const o=document.getElementById(u);o&&T.relayout(o,{width:o.clientWidth,height:o.clientHeight})},s=()=>{T.downloadImage(document.getElementById(u),{format:"svg",filename:n||"plot"})};return ne(async()=>{const o=await de(t.filteredFeatures,l);a(1,I=new ie(o,{rowsPerPage:5}));const i=o.reduce((c,f)=>{const m=f.seqId;return c[m]||(c[m]=[]),c[m].push(f),c},{});let h=[];for(const[c,f]of Object.entries(i))h.push({x:f.map(m=>m.start),y:f.map(m=>m.insIndex),text:f.map(m=>m.name),textfont:{family:"Times New Roman"},textposition:"bottom center",type:"scatter",mode:"markers",name:c});const P={yaxis:{title:"Insert Index"},xaxis:{zeroline:!1,rangemode:"nonnegative"},margin:{b:25,t:25,r:25},barmode:"overlay",modebar:{orientation:"v"},legend:{x:1,xanchor:"right",y:1}},x={modeBarButtonsToRemove:["autoScale2d"],responsive:!0,displaylogo:!1,modeBarButtonsToAdd:[{name:"Download plot as svg",icon:T.Icons.camera,click:s}]};T.newPlot(u,h,P,x),window.addEventListener("resize",p),a(2,r=!1)}),oe(()=>{window.removeEventListener("resize",p)}),d.$$set=o=>{"filename"in o&&a(0,n=o.filename),"data"in o&&a(4,l=o.data)},[n,I,r,u,l]}class ge extends Y{constructor(e){super(),Z(this,e,he,ue,Q,{filename:0,data:4})}}function W(d,e,a){const t=d.slice();return t[1]=e[a][0],t[2]=e[a][1],t[4]=a,t}function K(d){let e,a;return e=new ge({props:{filename:d[1],data:d[2].chromosomes}}),{c(){R(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,n){q(e,t,n),a=!0},p(t,n){const l={};n&1&&(l.filename=t[1]),n&1&&(l.data=t[2].chromosomes),e.$set(l)},i(t){a||(y(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){z(e,t)}}}function pe(d){let e,a,t='<h1 class="h1 mb-1">Chromosomal location bias</h1> <p>Explore the chromosomal location bias of the insertions in your dataset. For more detailed analysis and bias correction see <a class="anchor" href="https://github.com/BarquistLab/ChromoCorrect" target="_blank">ChromoCorrect</a>.</p>',n,l,I,u=G(d[0]),r=[];for(let s=0;s<u.length;s+=1)r[s]=K(W(d,u,s));const p=s=>k(r[s],1,1,()=>{r[s]=null});return{c(){e=b("div"),a=b("div"),a.innerHTML=t,n=D(),l=b("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=w(s,"DIV",{class:!0});var o=$(e);a=w(o,"DIV",{class:!0,"data-svelte-h":!0}),U(a)!=="svelte-1rxbwma"&&(a.innerHTML=t),n=C(o),l=w(o,"DIV",{class:!0});var i=$(l);for(let h=0;h<r.length;h+=1)r[h].l(i);i.forEach(v),o.forEach(v),this.h()},h(){E(a,"class","mb-4"),E(l,"class","grid grid-cols-1 xl:grid-cols-2 gap-4"),E(e,"class","m-4")},m(s,o){L(s,e,o),g(e,a),g(e,n),g(e,l);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(l,null);I=!0},p(s,[o]){if(o&1){u=G(s[0]);let i;for(i=0;i<u.length;i+=1){const h=W(s,u,i);r[i]?(r[i].p(h,o),y(r[i],1)):(r[i]=K(h),r[i].c(),y(r[i],1),r[i].m(l,null))}for(V(),i=u.length;i<r.length;i+=1)p(i);H()}},i(s){if(!I){for(let o=0;o<u.length;o+=1)y(r[o]);I=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)k(r[o]);I=!1},d(s){s&&v(e),re(r,s)}}}function _e(d,e,a){let t;return X(d,le,n=>a(0,t=n)),[t]}class De extends Y{constructor(e){super(),Z(this,e,_e,pe,Q,{})}}export{De as component};
