import{s as re,y as Z,A as _e,e as S,a as U,c as z,b as P,g as B,f as w,a8 as ue,m as b,v as K,i as M,h as D,Q as A,B as ve,C as pe,D as be,E as He,a9 as de,w as Ge,z as he,aa as j,O as Le,t as J,l as Y,d as Q,n as X,ab as Qe,G as qe,j as me,ac as Oe,J as Xe,k as oe,H as Ye,K as We}from"../chunks/fdk2rqUP.js";import{S as ae,i as ie,t as N,g as q,a as R,c as O,f as Ke,b as x,d as $,m as ee,e as te}from"../chunks/CdCg8B6F.js";import{e as Se}from"../chunks/CHHpUjtn.js";import{g as xe}from"../chunks/CrrjleLN.js";import"../chunks/1N5xdIk4.js";import{g as Ze}from"../chunks/CN4WR7uZ.js";import{P as $e}from"../chunks/DTMBj-cl.js";import{a as fe}from"../chunks/kbGllwMu.js";import{i as ne}from"../chunks/CMe-kOzu.js";import{r as le,i as ce,t as Fe}from"../chunks/DWU0AGj2.js";const et=s=>({}),ze=s=>({}),tt=s=>({}),De=s=>({}),st=s=>({}),Pe=s=>({});function Ne(s){let e,t,r;const n=s[18].lead,l=_e(n,s,s[17],Pe);return{c(){e=S("div"),l&&l.c(),this.h()},l(a){e=z(a,"DIV",{class:!0});var i=P(e);l&&l.l(i),i.forEach(w),this.h()},h(){b(e,"class",t="dropzone-lead "+s[5])},m(a,i){M(a,e,i),l&&l.m(e,null),r=!0},p(a,i){l&&l.p&&(!r||i[0]&131072)&&ve(l,n,a,a[17],r?be(n,a[17],i,st):pe(a[17]),Pe),(!r||i[0]&32&&t!==(t="dropzone-lead "+a[5]))&&b(e,"class",t)},i(a){r||(N(l,a),r=!0)},o(a){R(l,a),r=!1},d(a){a&&w(e),l&&l.d(a)}}}function nt(s){let e,t="Upload a file",r;return{c(){e=S("strong"),e.textContent=t,r=J(" or drag and drop")},l(n){e=z(n,"STRONG",{"data-svelte-h":!0}),Y(e)!=="svelte-13uz6lq"&&(e.textContent=t),r=Q(n," or drag and drop")},m(n,l){M(n,e,l),M(n,r,l)},p:X,d(n){n&&(w(e),w(r))}}}function Ve(s){let e,t,r;const n=s[18].meta,l=_e(n,s,s[17],ze);return{c(){e=S("small"),l&&l.c(),this.h()},l(a){e=z(a,"SMALL",{class:!0});var i=P(e);l&&l.l(i),i.forEach(w),this.h()},h(){b(e,"class",t="dropzone-meta "+s[7])},m(a,i){M(a,e,i),l&&l.m(e,null),r=!0},p(a,i){l&&l.p&&(!r||i[0]&131072)&&ve(l,n,a,a[17],r?be(n,a[17],i,et):pe(a[17]),ze),(!r||i[0]&128&&t!==(t="dropzone-meta "+a[7]))&&b(e,"class",t)},i(a){r||(N(l,a),r=!0)},o(a){R(l,a),r=!1},d(a){a&&w(e),l&&l.d(a)}}}function lt(s){let e,t,r,n,l,a,i,h,_,I,y,E,k,L,W,F,m=[{type:"file"},{name:s[2]},{class:r="dropzone-input "+s[9]},s[11]()],c={};for(let d=0;d<m.length;d+=1)c=Z(c,m[d]);let f=s[13].lead&&Ne(s);const g=s[18].message,v=_e(g,s,s[17],De),p=v||nt();let o=s[13].meta&&Ve(s);return{c(){e=S("div"),t=S("input"),n=U(),l=S("div"),a=S("div"),f&&f.c(),i=U(),h=S("div"),p.c(),I=U(),o&&o.c(),this.h()},l(d){e=z(d,"DIV",{class:!0,"data-testid":!0});var T=P(e);t=z(T,"INPUT",{type:!0,name:!0,class:!0}),n=B(T),l=z(T,"DIV",{class:!0});var V=P(l);a=z(V,"DIV",{class:!0});var C=P(a);f&&f.l(C),i=B(C),h=z(C,"DIV",{class:!0});var H=P(h);p.l(H),H.forEach(w),I=B(C),o&&o.l(C),C.forEach(w),V.forEach(w),T.forEach(w),this.h()},h(){ue(t,c),b(h,"class",_="dropzone-message "+s[6]),b(a,"class",y="dropzone-interface-text "+s[4]),b(l,"class",E="dropzone-interface "+s[8]+" "+s[3]),b(e,"class",k="dropzone "+s[10]),b(e,"data-testid","file-dropzone"),K(e,"opacity-50",s[12].disabled)},m(d,T){M(d,e,T),D(e,t),t.autofocus&&t.focus(),s[32](t),D(e,n),D(e,l),D(l,a),f&&f.m(a,null),D(a,i),D(a,h),p.m(h,null),D(a,I),o&&o.m(a,null),L=!0,W||(F=[A(t,"change",s[31]),A(t,"change",s[19]),A(t,"dragenter",s[20]),A(t,"dragover",s[21]),A(t,"dragleave",s[22]),A(t,"drop",s[23]),A(t,"click",s[24]),A(t,"keydown",s[25]),A(t,"keyup",s[26]),A(t,"keypress",s[27]),A(t,"focus",s[28]),A(t,"focusin",s[29]),A(t,"focusout",s[30])],W=!0)},p(d,T){ue(t,c=Ze(m,[{type:"file"},(!L||T[0]&4)&&{name:d[2]},(!L||T[0]&512&&r!==(r="dropzone-input "+d[9]))&&{class:r},d[11]()])),d[13].lead?f?(f.p(d,T),T[0]&8192&&N(f,1)):(f=Ne(d),f.c(),N(f,1),f.m(a,i)):f&&(q(),R(f,1,1,()=>{f=null}),O()),v&&v.p&&(!L||T[0]&131072)&&ve(v,g,d,d[17],L?be(g,d[17],T,tt):pe(d[17]),De),(!L||T[0]&64&&_!==(_="dropzone-message "+d[6]))&&b(h,"class",_),d[13].meta?o?(o.p(d,T),T[0]&8192&&N(o,1)):(o=Ve(d),o.c(),N(o,1),o.m(a,null)):o&&(q(),R(o,1,1,()=>{o=null}),O()),(!L||T[0]&16&&y!==(y="dropzone-interface-text "+d[4]))&&b(a,"class",y),(!L||T[0]&264&&E!==(E="dropzone-interface "+d[8]+" "+d[3]))&&b(l,"class",E),(!L||T[0]&1024&&k!==(k="dropzone "+d[10]))&&b(e,"class",k),(!L||T[0]&5120)&&K(e,"opacity-50",d[12].disabled)},i(d){L||(N(f),N(p,d),N(o),L=!0)},o(d){R(f),R(p,d),R(o),L=!1},d(d){d&&w(e),s[32](null),f&&f.d(),p.d(d),o&&o.d(),W=!1,He(F)}}}const rt="textarea relative flex justify-center items-center",at="w-full absolute top-0 left-0 right-0 bottom-0 z-[1] opacity-0 disabled:!opacity-0 cursor-pointer",it="flex justify-center items-center text-center";function ot(s,e,t){let r,n,l;const a=["files","fileInput","name","border","padding","rounded","regionInterface","regionInterfaceText","slotLead","slotMessage","slotMeta"];let i=de(e,a),{$$slots:h={},$$scope:_}=e;const I=Ge(h);let{files:y=void 0}=e,{fileInput:E=void 0}=e,{name:k}=e,{border:L="border-2 border-dashed"}=e,{padding:W="p-4 py-8"}=e,{rounded:F="rounded-container-token"}=e,{regionInterface:m=""}=e,{regionInterfaceText:c=""}=e,{slotLead:f="mb-4"}=e,{slotMessage:g=""}=e,{slotMeta:v="opacity-75"}=e;function p(){return delete i.class,i}function o(u){j.call(this,s,u)}function d(u){j.call(this,s,u)}function T(u){j.call(this,s,u)}function V(u){j.call(this,s,u)}function C(u){j.call(this,s,u)}function H(u){j.call(this,s,u)}function G(u){j.call(this,s,u)}function se(u){j.call(this,s,u)}function ke(u){j.call(this,s,u)}function we(u){j.call(this,s,u)}function Ee(u){j.call(this,s,u)}function ye(u){j.call(this,s,u)}function Ie(){y=this.files,t(0,y)}function Te(u){Le[u?"unshift":"push"](()=>{E=u,t(1,E)})}return s.$$set=u=>{t(33,e=Z(Z({},e),he(u))),t(12,i=de(e,a)),"files"in u&&t(0,y=u.files),"fileInput"in u&&t(1,E=u.fileInput),"name"in u&&t(2,k=u.name),"border"in u&&t(14,L=u.border),"padding"in u&&t(15,W=u.padding),"rounded"in u&&t(16,F=u.rounded),"regionInterface"in u&&t(3,m=u.regionInterface),"regionInterfaceText"in u&&t(4,c=u.regionInterfaceText),"slotLead"in u&&t(5,f=u.slotLead),"slotMessage"in u&&t(6,g=u.slotMessage),"slotMeta"in u&&t(7,v=u.slotMeta),"$$scope"in u&&t(17,_=u.$$scope)},s.$$.update=()=>{t(10,r=`${rt} ${L} ${W} ${F} ${e.class??""}`)},t(9,n=`${at}`),t(8,l=`${it}`),e=he(e),[y,E,k,m,c,f,g,v,l,n,r,p,i,I,L,W,F,_,h,o,d,T,V,C,H,G,se,ke,we,Ee,ye,Ie,Te]}class ct extends ae{constructor(e){super(),ie(this,e,ot,lt,re,{files:0,fileInput:1,name:2,border:14,padding:15,rounded:16,regionInterface:3,regionInterfaceText:4,slotLead:5,slotMessage:6,slotMeta:7},null,[-1,-1])}}function Ae(s){let e,t;const r=s[22].default,n=_e(r,s,s[21],null);return{c(){e=S("div"),n&&n.c(),this.h()},l(l){e=z(l,"DIV",{class:!0});var a=P(e);n&&n.l(a),a.forEach(w),this.h()},h(){b(e,"class","slide-toggle-text ml-3")},m(l,a){M(l,e,a),n&&n.m(e,null),t=!0},p(l,a){n&&n.p&&(!t||a[0]&2097152)&&ve(n,r,l,l[21],t?be(r,l[21],a,null):pe(l[21]),null)},i(l){t||(N(n,l),t=!0)},o(l){R(n,l),t=!1},d(l){l&&w(e),n&&n.d(l)}}}function ft(s){let e,t,r,n,l,a,i,h,_,I,y,E,k,L,W,F=[{type:"checkbox"},{class:"slide-toggle-input hidden"},{name:s[1]},s[8](),{disabled:n=s[9].disabled}],m={};for(let f=0;f<F.length;f+=1)m=Z(m,F[f]);let c=s[10].default&&Ae(s);return{c(){e=S("div"),t=S("label"),r=S("input"),l=U(),a=S("div"),i=S("div"),I=U(),c&&c.c(),this.h()},l(f){e=z(f,"DIV",{id:!0,class:!0,"data-testid":!0,role:!0,"aria-label":!0,"aria-checked":!0,tabindex:!0});var g=P(e);t=z(g,"LABEL",{class:!0});var v=P(t);r=z(v,"INPUT",{type:!0,class:!0,name:!0}),l=B(v),a=z(v,"DIV",{class:!0});var p=P(a);i=z(p,"DIV",{class:!0}),P(i).forEach(w),p.forEach(w),I=B(v),c&&c.l(v),v.forEach(w),g.forEach(w),this.h()},h(){ue(r,m),b(i,"class",h="slide-toggle-thumb "+s[3]),K(i,"cursor-not-allowed",s[9].disabled),b(a,"class",_="slide-toggle-track "+s[4]),K(a,"cursor-not-allowed",s[9].disabled),b(t,"class",y="slide-toggle-label "+s[5]),b(e,"id",s[2]),b(e,"class",E="slide-toggle "+s[6]),b(e,"data-testid","slide-toggle"),b(e,"role","switch"),b(e,"aria-label",s[2]),b(e,"aria-checked",s[0]),b(e,"tabindex","0")},m(f,g){M(f,e,g),D(e,t),D(t,r),r.autofocus&&r.focus(),r.checked=s[0],D(t,l),D(t,a),D(a,i),D(t,I),c&&c.m(t,null),k=!0,L||(W=[A(r,"change",s[31]),A(r,"click",s[23]),A(r,"keydown",s[24]),A(r,"keyup",s[25]),A(r,"keypress",s[26]),A(r,"mouseover",s[27]),A(r,"change",s[28]),A(r,"focus",s[29]),A(r,"blur",s[30]),A(e,"keydown",s[7])],L=!0)},p(f,g){ue(r,m=Ze(F,[{type:"checkbox"},{class:"slide-toggle-input hidden"},(!k||g[0]&2)&&{name:f[1]},f[8](),(!k||g[0]&512&&n!==(n=f[9].disabled))&&{disabled:n}])),g[0]&1&&(r.checked=f[0]),(!k||g[0]&8&&h!==(h="slide-toggle-thumb "+f[3]))&&b(i,"class",h),(!k||g[0]&520)&&K(i,"cursor-not-allowed",f[9].disabled),(!k||g[0]&16&&_!==(_="slide-toggle-track "+f[4]))&&b(a,"class",_),(!k||g[0]&528)&&K(a,"cursor-not-allowed",f[9].disabled),f[10].default?c?(c.p(f,g),g[0]&1024&&N(c,1)):(c=Ae(f),c.c(),N(c,1),c.m(t,null)):c&&(q(),R(c,1,1,()=>{c=null}),O()),(!k||g[0]&32&&y!==(y="slide-toggle-label "+f[5]))&&b(t,"class",y),(!k||g[0]&4)&&b(e,"id",f[2]),(!k||g[0]&64&&E!==(E="slide-toggle "+f[6]))&&b(e,"class",E),(!k||g[0]&4)&&b(e,"aria-label",f[2]),(!k||g[0]&1)&&b(e,"aria-checked",f[0])},i(f){k||(N(c),k=!0)},o(f){R(c),k=!1},d(f){f&&w(e),c&&c.d(),L=!1,He(W)}}}const ut="inline-block",dt="unstyled flex items-center",ht="flex transition-all duration-[200ms] cursor-pointer",mt="w-[50%] h-full scale-[0.8] transition-all duration-[200ms] shadow";function gt(s,e,t){let r,n,l,a,i,h,_,I;const y=["name","checked","size","background","active","border","rounded","label"];let E=de(e,y),{$$slots:k={},$$scope:L}=e;const W=Ge(k),F=Qe();let{name:m}=e,{checked:c=!1}=e,{size:f="md"}=e,{background:g="bg-surface-400 dark:bg-surface-700"}=e,{active:v="bg-surface-900 dark:bg-surface-300"}=e,{border:p=""}=e,{rounded:o="rounded-full"}=e,{label:d=""}=e,T;switch(f){case"sm":T="w-12 h-6";break;case"lg":T="w-20 h-10";break;default:T="w-16 h-8"}function V(u){["Enter","Space"].includes(u.code)&&(u.preventDefault(),F("keyup",u),u.currentTarget.firstChild.click())}function C(){return delete E.class,E}function H(u){j.call(this,s,u)}function G(u){j.call(this,s,u)}function se(u){j.call(this,s,u)}function ke(u){j.call(this,s,u)}function we(u){j.call(this,s,u)}function Ee(u){j.call(this,s,u)}function ye(u){j.call(this,s,u)}function Ie(u){j.call(this,s,u)}function Te(){c=this.checked,t(0,c)}return s.$$set=u=>{t(9,e=Z(Z({},e),he(u))),t(33,E=de(e,y)),"name"in u&&t(1,m=u.name),"checked"in u&&t(0,c=u.checked),"size"in u&&t(11,f=u.size),"background"in u&&t(12,g=u.background),"active"in u&&t(13,v=u.active),"border"in u&&t(14,p=u.border),"rounded"in u&&t(15,o=u.rounded),"label"in u&&t(2,d=u.label),"$$scope"in u&&t(21,L=u.$$scope)},s.$$.update=()=>{s.$$.dirty[0]&12289&&t(19,r=c?v:`${g} cursor-pointer`),s.$$.dirty[0]&1&&t(18,n=c?"bg-white/75":"bg-white"),s.$$.dirty[0]&1&&t(17,l=c?"translate-x-full":""),t(20,a=e.disabled===!0?"opacity-50":"hover:brightness-[105%] dark:hover:brightness-110 cursor-pointer"),t(6,i=`${ut} ${o} ${a} ${e.class??""}`),s.$$.dirty[0]&638976&&t(4,_=`${ht} ${p} ${o} ${T} ${r}`),s.$$.dirty[0]&425984&&t(3,I=`${mt} ${o} ${n} ${l}`)},t(5,h=`${dt}`),e=he(e),[c,m,d,I,_,h,i,V,C,e,W,f,g,v,p,o,T,l,n,r,a,L,k,H,G,se,ke,we,Ee,ye,Ie,Te]}class _t extends ae{constructor(e){super(),ie(this,e,gt,ft,re,{name:1,checked:0,size:11,background:12,active:13,border:14,rounded:15,label:2},null,[-1,-1])}}const ge=s=>s.replace(/\.[^/.]+$/,"");function vt(s){let e,t=s[0]?"Treatment":"Control",r,n;return{c(){e=S("span"),r=J(t),this.h()},l(l){e=z(l,"SPAN",{class:!0});var a=P(e);r=Q(a,t),a.forEach(w),this.h()},h(){b(e,"class",n=`chip ${s[0]?"variant-soft-primary":"variant-soft-surface"}`)},m(l,a){M(l,e,a),D(e,r)},p(l,a){a&1&&t!==(t=l[0]?"Treatment":"Control")&&me(r,t),a&1&&n!==(n=`chip ${l[0]?"variant-soft-primary":"variant-soft-surface"}`)&&b(e,"class",n)},d(l){l&&w(e)}}}function pt(s){let e,t,r,n,l=ge(s[1])+"",a,i,h,_,I,y,E,k='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',L,W,F;function m(f){s[4](f)}let c={active:"variant-soft-primary",size:"sm",class:"mr-2",name:"slide",$$slots:{default:[vt]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.checked=s[0]),_=new _t({props:c}),Le.push(()=>Ke(_,"checked",m)),_.$on("change",s[5]),{c(){e=S("div"),t=S("div"),r=S("div"),n=S("p"),a=J(l),i=U(),h=S("div"),x(_.$$.fragment),y=U(),E=S("button"),E.innerHTML=k,this.h()},l(f){e=z(f,"DIV",{class:!0});var g=P(e);t=z(g,"DIV",{class:!0});var v=P(t);r=z(v,"DIV",{class:!0});var p=P(r);n=z(p,"P",{class:!0});var o=P(n);a=Q(o,l),o.forEach(w),i=B(p),h=z(p,"DIV",{class:!0});var d=P(h);$(_.$$.fragment,d),y=B(d),E=z(d,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(E)!=="svelte-1m0ck3b"&&(E.innerHTML=k),d.forEach(w),p.forEach(w),v.forEach(w),g.forEach(w),this.h()},h(){b(n,"class","text-lg"),b(E,"type","button"),b(E,"class","btn-icon hover:variant-ringed-tertiary"),b(h,"class","flex justify-between items-center min-w-64"),b(r,"class","flex flex-col space-y-2 w-full"),b(t,"class","flex justify-center items-center space-x-2"),b(e,"class","card p-4")},m(f,g){M(f,e,g),D(e,t),D(t,r),D(r,n),D(n,a),D(r,i),D(r,h),ee(_,h,null),D(h,y),D(h,E),L=!0,W||(F=A(E,"click",function(){qe(s[2])&&s[2].apply(this,arguments)}),W=!0)},p(f,[g]){s=f,(!L||g&2)&&l!==(l=ge(s[1])+"")&&me(a,l);const v={};g&65&&(v.$$scope={dirty:g,ctx:s}),!I&&g&1&&(I=!0,v.checked=s[0],Oe(()=>I=!1)),_.$set(v)},i(f){L||(N(_.$$.fragment,f),L=!0)},o(f){R(_.$$.fragment,f),L=!1},d(f){f&&w(e),te(_),W=!1,F()}}}function bt(s,e,t){let{filename:r}=e,{onRemove:n}=e,{onToggle:l}=e,{isTreatment:a=!1}=e;function i(_){a=_,t(0,a)}const h=()=>l(a);return s.$$set=_=>{"filename"in _&&t(1,r=_.filename),"onRemove"in _&&t(2,n=_.onRemove),"onToggle"in _&&t(3,l=_.onToggle),"isTreatment"in _&&t(0,a=_.isTreatment)},[a,r,n,l,i,h]}class kt extends ae{constructor(e){super(),ie(this,e,bt,pt,re,{filename:1,onRemove:2,onToggle:3,isTreatment:0})}}function wt(s){let e,t,r,n,l=ge(s[0])+"",a,i,h,_,I,y,E,k,L='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',W,F;return{c(){e=S("div"),t=S("div"),r=S("div"),n=S("p"),a=J(l),i=U(),h=S("div"),_=S("span"),I=J(s[2]),E=U(),k=S("button"),k.innerHTML=L,this.h()},l(m){e=z(m,"DIV",{class:!0});var c=P(e);t=z(c,"DIV",{class:!0});var f=P(t);r=z(f,"DIV",{class:!0});var g=P(r);n=z(g,"P",{class:!0});var v=P(n);a=Q(v,l),v.forEach(w),i=B(g),h=z(g,"DIV",{class:!0});var p=P(h);_=z(p,"SPAN",{class:!0});var o=P(_);I=Q(o,s[2]),o.forEach(w),E=B(p),k=z(p,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Y(k)!=="svelte-1m0ck3b"&&(k.innerHTML=L),p.forEach(w),g.forEach(w),f.forEach(w),c.forEach(w),this.h()},h(){b(n,"class","text-lg"),b(_,"class",y=`chip ${s[3]}`),b(k,"type","button"),b(k,"class","btn-icon hover:variant-ringed-tertiary"),b(h,"class","flex justify-between items-center min-w-64"),b(r,"class","flex flex-col space-y-2 w-full"),b(t,"class","flex justify-center items-center space-x-2"),b(e,"class","card p-4")},m(m,c){M(m,e,c),D(e,t),D(t,r),D(r,n),D(n,a),D(r,i),D(r,h),D(h,_),D(_,I),D(h,E),D(h,k),W||(F=A(k,"click",function(){qe(s[1])&&s[1].apply(this,arguments)}),W=!0)},p(m,[c]){s=m,c&1&&l!==(l=ge(s[0])+"")&&me(a,l),c&4&&me(I,s[2]),c&8&&y!==(y=`chip ${s[3]}`)&&b(_,"class",y)},i:X,o:X,d(m){m&&w(e),W=!1,F()}}}function Et(s,e,t){let{filename:r}=e,{onRemove:n}=e,{type:l}=e,{chip:a="variant-soft-success"}=e;return s.$$set=i=>{"filename"in i&&t(0,r=i.filename),"onRemove"in i&&t(1,n=i.onRemove),"type"in i&&t(2,l=i.type),"chip"in i&&t(3,a=i.chip)},[r,n,l,a]}class Je extends ae{constructor(e){super(),ie(this,e,Et,wt,re,{filename:0,onRemove:1,type:2,chip:3})}}const yt=s=>{let e="+";s.startsWith("complement(")&&(e="-",s=s.replace("complement(","").replace(")","")),s=s.replace(/</g,"").replace(/>/g,"");const[t,r]=s.split(".."),n=parseInt(t,10),l=parseInt(r,10);if(isNaN(n)||isNaN(l))throw new Error(`Invalid location: ${s}`);return{start:n,end:l,strand:e}};function It(s){const e=s.split(`
`),t={features:[],currentFeature:null,multiline:!1},r=e.reduce((n,l)=>{const a=/^\s+([a-zA-Z_]+)\s+((?:complement\()?[<>]?\d+\.\.[<>]?\d+\)?)/;if(a.test(l)){n.currentFeature&&n.features.push(n.currentFeature);const i=l.match(a);if(i){const h=i[1],_=i[2],{start:I,end:y,strand:E}=yt(_);n.currentFeature={type:h,start:I,end:y,strand:E,attributes:{}}}n.multiline=!1}else if(l.trim().startsWith("/")){const i=l.trim().match(/^\/(\S+?)=(?:"([^"]+)"|(.+))/);if(i&&n.currentFeature){const[,h,_,I]=i,y=_||I||"";n.currentFeature.attributes[h]=y,n.multiline=y.startsWith('"')&&!y.endsWith('"')||y.startsWith("(")&&!y.endsWith(")")}}else if(n.multiline&&n.currentFeature&&/^\s+[^/]/.test(l)){const i=Object.keys(n.currentFeature.attributes),h=i[i.length-1];h&&(n.currentFeature.attributes[h]+=l.trim()),l.trim().endsWith('"')&&(n.multiline=!1)}else n.currentFeature&&(n.features.push(n.currentFeature),n.currentFeature=null,n.multiline=!1);return n},t);return r.currentFeature&&r.features.push(r.currentFeature),r.features}function Tt(s){const t=s.split(`
`).find(I=>I.startsWith("LOCUS")),r=t?t.split(/\s+/)[1]:"",n=s.match(/FEATURES\s+([\s\S]+?)ORIGIN/),l=n?n[1]:"",a=It(l),i=s.match(/ORIGIN\s+([\s\S]+)/),_=(i?i[1]:"").replace(/[^a-zA-Z]/g,"");return{locusId:r,sequence:_,features:a}}function Wt(s){const t=s.split(/\n(?=LOCUS)/).map(Tt),r=t.map(l=>{const a=[`>${l.locusId}`];for(let i=0;i<l.sequence.length;i+=60)a.push(l.sequence.slice(i,i+60));return a.join(`
`)}),n=["##gff-version 3"];return t.forEach(l=>{l.features.forEach(a=>{const i={...a.attributes};i.name||i.Name?i.Name=i.name||i.Name:i.gene?i.Name=i.gene:i.product?i.Name=i.product:i.locus_tag&&(i.Name=i.locus_tag),a.type==="source"&&i.organism&&(i.Name=i.organism);const h=Object.entries(i).map(([_,I])=>`${_}=${I.replace(/"/g,"").replace(/;/g,",")}`).join(";");n.push(`${l.locusId}	diana	${a.type}	${a.start}	${a.end}	.	${a.strand}	.	${h}`)})}),{gff:n.join(`
`),fasta:r.join(`
`)}}async function Ft(s,e,t=5e4){const r=[];r.push(`variableStep chrom=${e}`);const n=s.split(`
`);for(let l=0;l<n.length;l+=t)n.slice(l,l+t).forEach((i,h)=>{let[_,I]=i.split(/\s+/).map(y=>parseInt(y,10));isNaN(I)&&(I=0),isNaN(_)&&(_=0),_!==0&&r.push(`${l+h+1} ${_}`),I!==0&&r.push(`${l+h+1} -${I}`)}),await new Promise(i=>setTimeout(i,0));return r.join(`
`)}function Re(s,e,t){const r=s.slice();return r[14]=e[t][0],r[15]=e[t][1].isTreatment,r[17]=t,r}function Me(s){let e,t,r;return t=new Je({props:{type:"Reference",filename:s[3].filename,onRemove:le.reset}}),{c(){e=S("div"),x(t.$$.fragment),this.h()},l(n){e=z(n,"DIV",{class:!0});var l=P(e);$(t.$$.fragment,l),l.forEach(w),this.h()},h(){b(e,"class","m-2 w-full md:w-auto")},m(n,l){M(n,e,l),ee(t,e,null),r=!0},p(n,l){const a={};l&8&&(a.filename=n[3].filename),t.$set(a)},i(n){r||(N(t.$$.fragment,n),r=!0)},o(n){R(t.$$.fragment,n),r=!1},d(n){n&&w(e),te(t)}}}function je(s){let e,t,r;return t=new Je({props:{type:"Annotations",chip:"variant-soft-warning",filename:s[2].filename,onRemove:fe.reset}}),{c(){e=S("div"),x(t.$$.fragment),this.h()},l(n){e=z(n,"DIV",{class:!0});var l=P(e);$(t.$$.fragment,l),l.forEach(w),this.h()},h(){b(e,"class","m-2 w-full md:w-auto")},m(n,l){M(n,e,l),ee(t,e,null),r=!0},p(n,l){const a={};l&4&&(a.filename=n[2].filename),t.$set(a)},i(n){r||(N(t.$$.fragment,n),r=!0)},o(n){R(t.$$.fragment,n),r=!1},d(n){n&&w(e),te(t)}}}function Ce(s){let e,t,r,n;function l(...i){return s[6](s[14],...i)}function a(){return s[7](s[14])}return t=new kt({props:{isTreatment:s[15],onToggle:l,onRemove:a,filename:s[14]}}),{c(){e=S("div"),x(t.$$.fragment),r=U(),this.h()},l(i){e=z(i,"DIV",{class:!0});var h=P(e);$(t.$$.fragment,h),r=B(h),h.forEach(w),this.h()},h(){b(e,"class","m-2 w-full md:w-auto ")},m(i,h){M(i,e,h),ee(t,e,null),D(e,r),n=!0},p(i,h){s=i;const _={};h&16&&(_.isTreatment=s[15]),h&16&&(_.onToggle=l),h&16&&(_.onRemove=a),h&16&&(_.filename=s[14]),t.$set(_)},i(i){n||(N(t.$$.fragment,i),n=!0)},o(i){R(t.$$.fragment,i),n=!1},d(i){i&&w(e),te(t)}}}function Lt(s){let e,t,r;function n(a){s[8](a)}let l={padding:"py-4",name:"files",multiple:!0,$$slots:{meta:[Pt],message:[Dt],lead:[zt]},$$scope:{ctx:s}};return s[0]!==void 0&&(l.files=s[0]),e=new ct({props:l}),Le.push(()=>Ke(e,"files",n)),e.$on("change",s[5]),e.$on("click",Ue),e.$on("drop",Ue),{c(){x(e.$$.fragment)},l(a){$(e.$$.fragment,a)},m(a,i){ee(e,a,i),r=!0},p(a,i){const h={};i&262144&&(h.$$scope={dirty:i,ctx:a}),!t&&i&1&&(t=!0,h.files=a[0],Oe(()=>t=!1)),e.$set(h)},i(a){r||(N(e.$$.fragment,a),r=!0)},o(a){R(e.$$.fragment,a),r=!1},d(a){te(e,a)}}}function St(s){let e,t,r;return t=new $e({props:{value:void 0,width:"w-16",strokeLinecap:"round"}}),{c(){e=S("div"),x(t.$$.fragment),this.h()},l(n){e=z(n,"DIV",{class:!0});var l=P(e);$(t.$$.fragment,l),l.forEach(w),this.h()},h(){b(e,"class","flex items-center justify-center align-middle")},m(n,l){M(n,e,l),ee(t,e,null),r=!0},p:X,i(n){r||(N(t.$$.fragment,n),r=!0)},o(n){R(t.$$.fragment,n),r=!1},d(n){n&&w(e),te(t)}}}function zt(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-8"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"></path></svg>';return{c(){e=S("div"),e.innerHTML=t,this.h()},l(r){e=z(r,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-stz8rw"&&(e.innerHTML=t),this.h()},h(){b(e,"class","flex justify-center")},m(r,n){M(r,e,n)},p:X,d(r){r&&w(e)}}}function Dt(s){let e,t='<span class="font-semibold">Load files</span> or drag and drop';return{c(){e=S("p"),e.innerHTML=t,this.h()},l(r){e=z(r,"P",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-10rbgmq"&&(e.innerHTML=t),this.h()},h(){b(e,"class","text-xl ")},m(r,n){M(r,e,n)},p:X,d(r){r&&w(e)}}}function Pt(s){let e;return{c(){e=J("GENBANK, GFF, FASTA, WIG and UserPlot files allowed.")},l(t){e=Q(t,"GENBANK, GFF, FASTA, WIG and UserPlot files allowed.")},m(t,r){M(t,e,r)},d(t){t&&w(e)}}}function Nt(s){let e,t='<div class="flex flex-col items-center align-baseline justify-center max-w-5xl space-y-4 "><figure class="card-hover rounded-full svelte-ppo8by"><div><section class="img-bg svelte-ppo8by"></section></div> <img class="logo-img mt-8 svelte-ppo8by" src="/images/logo.webp" alt="Skeleton Logo"/></figure> <div class="text-center mx-2"><h1 class="text-6xl mb-1">Diana</h1> <p class="text-xl">A WebAssembly-Powered Tool for Transposon-Insertion Sequencing Data Exploration and Analysis</p></div></div>',r,n,l,a,i,h,_,I,y,E,k,L,W=s[3].filename&&Me(s),F=s[2].filename&&je(s),m=Se(Array.from(s[4].entries()).sort(Be)),c=[];for(let o=0;o<m.length;o+=1)c[o]=Ce(Re(s,m,o));const f=o=>R(c[o],1,1,()=>{c[o]=null}),g=[St,Lt],v=[];function p(o,d){return o[1]?0:1}return E=p(s),k=v[E]=g[E](s),{c(){e=S("div"),e.innerHTML=t,r=U(),n=S("div"),l=S("div"),W&&W.c(),a=U(),F&&F.c(),i=U(),h=S("div");for(let o=0;o<c.length;o+=1)c[o].c();_=U(),I=S("div"),y=S("div"),k.c(),this.h()},l(o){e=z(o,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1l91u86"&&(e.innerHTML=t),r=B(o),n=z(o,"DIV",{class:!0});var d=P(n);l=z(d,"DIV",{class:!0});var T=P(l);W&&W.l(T),a=B(T),F&&F.l(T),T.forEach(w),i=B(d),h=z(d,"DIV",{class:!0});var V=P(h);for(let G=0;G<c.length;G+=1)c[G].l(V);V.forEach(w),d.forEach(w),_=B(o),I=z(o,"DIV",{class:!0});var C=P(I);y=z(C,"DIV",{class:!0});var H=P(y);k.l(H),H.forEach(w),C.forEach(w),this.h()},h(){b(e,"class","flex justify-center mb-2"),b(l,"class","flex flex-wrap justify-center w-full"),b(h,"class","flex flex-wrap justify-center "),b(n,"class","flex flex-col justify-center items-center mb-4"),b(y,"class","w-full max-w-3xl mx-4 mb-4"),b(I,"class","flex justify-center ")},m(o,d){M(o,e,d),M(o,r,d),M(o,n,d),D(n,l),W&&W.m(l,null),D(l,a),F&&F.m(l,null),D(n,i),D(n,h);for(let T=0;T<c.length;T+=1)c[T]&&c[T].m(h,null);M(o,_,d),M(o,I,d),D(I,y),v[E].m(y,null),L=!0},p(o,[d]){if(o[3].filename?W?(W.p(o,d),d&8&&N(W,1)):(W=Me(o),W.c(),N(W,1),W.m(l,a)):W&&(q(),R(W,1,1,()=>{W=null}),O()),o[2].filename?F?(F.p(o,d),d&4&&N(F,1)):(F=je(o),F.c(),N(F,1),F.m(l,null)):F&&(q(),R(F,1,1,()=>{F=null}),O()),d&16){m=Se(Array.from(o[4].entries()).sort(Be));let V;for(V=0;V<m.length;V+=1){const C=Re(o,m,V);c[V]?(c[V].p(C,d),N(c[V],1)):(c[V]=Ce(C),c[V].c(),N(c[V],1),c[V].m(h,null))}for(q(),V=m.length;V<c.length;V+=1)f(V);O()}let T=E;E=p(o),E===T?v[E].p(o,d):(q(),R(v[T],1,1,()=>{v[T]=null}),O(),k=v[E],k?k.p(o,d):(k=v[E]=g[E](o),k.c()),N(k,1),k.m(y,null))},i(o){if(!L){N(W),N(F);for(let d=0;d<m.length;d+=1)N(c[d]);N(k),L=!0}},o(o){R(W),R(F),c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)R(c[d]);R(k),L=!1},d(o){o&&(w(e),w(r),w(n),w(_),w(I)),W&&W.d(),F&&F.d(),Xe(c,o),v[E].d()}}}function Vt(s){const e=s.split(`
`);let t="",r="",n=!1;for(const l of e){if(l.startsWith("##")&&l.includes("FASTA")){n=!0;continue}n&&(l.startsWith(">")?(r&&(t+=r+`
`),r=l+`
`):r+=l.trim())}return r&&(t+=r+`
`),t.trim()}function Ue(){const s=document.getElementsByName("files")[0];s.value=""}const Be=([s],[e])=>s.localeCompare(e);function At(s,e,t){let r,n,l,a;oe(s,fe,m=>t(2,r=m)),oe(s,ce,m=>t(9,n=m)),oe(s,le,m=>t(3,l=m)),oe(s,ne,m=>t(4,a=m));const i=xe();let h,_=!1;async function I(m,c){if(m.endsWith(".gb")||m.endsWith(".gbk")||m.endsWith(".genbank")){let f="",g="";try{const v=Wt(c);f=v.gff,g=v.fasta}catch(v){console.error("Error converting GenBank file:",v);const o={message:"Error converting GenBank file: "+v,background:"variant-glass-error"};throw i.trigger(o),new Error("Error converting GenBank file: "+v)}await fe.load(m,f),We(ce,n.locus=void 0,n),g.length>0&&(await le.load(m,g).catch(v=>{console.error("Error loading reference:",v);const o={message:"Error loading reference: "+v,background:"variant-glass-error"};i.trigger(o)}),await Fe.load(g))}else if(m.endsWith(".gff")||m.endsWith(".gff3")){await fe.load(m,c).catch(g=>{console.error("Error loading annotations:",g);const p={message:"Error loading annotations: "+g,background:"variant-glass-error"};throw i.trigger(p),new Error("Error loading annotations: "+g)}),We(ce,n.locus=void 0,n);const f=Vt(c);f.length>0&&(await le.load(m,f).catch(g=>{console.error("Error loading reference:",g);const p={message:"Error loading reference: "+g,background:"variant-glass-error"};i.trigger(p)}),await Fe.load(f))}else if(m.endsWith(".fasta")||m.endsWith(".fa")||m.endsWith(".fna"))await le.load(m,c),await Fe.load(c),We(ce,n.locus=void 0,n);else if(m.endsWith(".wig")||m.endsWith(".wiggle"))await ne.load(m,c);else if(m.endsWith(".userplot")||m.endsWith(".plot")){const f=r.chromosomes.keys().next().value;if(f){const g={message:`Converting UserPlot file '${m}' to Wig Format. Assuming the first chromosome in the annotations is the reference chromosome`,background:"variant-glass-warning"};i.trigger(g);const v=await Ft(c,f);await ne.load(m,v)}else{console.error("No chromosome found in annotations");const v={message:"Please load annotations before loading userplot files",background:"variant-glass-error"};throw i.trigger(v),new Error("No chromosome found in annotations")}}else{console.error("Unsupported file type:",m);const g={message:"Unsupported file type: "+m,background:"variant-glass-error"};throw i.trigger(g),new Error("Unsupported file type: "+m)}}async function y(m){try{const c=await fetch(m);if(!c.ok)throw new Error(`Failed to fetch ${m}: ${c.statusText}`);const f=await c.text(),g=m.split("/").pop()||m;await I(g,f)}catch(c){console.error("Error loading file from URL:",c);const g={message:"Error loading file from URL: "+c,background:"variant-glass-error"};throw i.trigger(g),c}}async function E(m){var c;t(1,_=!0);try{const f=[],g=[],v=[];for(const p of m){const o=((c=p.split("/").pop())==null?void 0:c.toLowerCase())||"";o.endsWith(".fasta")||o.endsWith(".fa")||o.endsWith(".fna")?f.push(p):o.endsWith(".gb")||o.endsWith(".gbk")||o.endsWith(".genbank")||o.endsWith(".gff")||o.endsWith(".gff3")?g.push(p):(o.endsWith(".wig")||o.endsWith(".wiggle")||o.endsWith(".userplot")||o.endsWith(".plot"),v.push(p))}await Promise.all([...f.map(p=>y(p)),...g.map(p=>y(p))]),await Promise.all(v.map(p=>y(p)))}catch(f){console.error("Error loading files from URLs:",f)}finally{t(1,_=!1)}}Ye(()=>{if(typeof window<"u"){const c=new URLSearchParams(window.location.search).get("data");if(c){const f=c.split(",").map(g=>g.trim()).filter(g=>g.length>0);f.length>0&&E(f)}}});function k(m){if(!h||h.length===0)return;t(1,_=!0);const c=[],f=[],g=[];for(let p=0;p<h.length;p++){const o=h[p],d=o.name.toLowerCase();d.endsWith(".fasta")||d.endsWith(".fa")||d.endsWith(".fna")?c.push(o):d.endsWith(".gb")||d.endsWith(".gbk")||d.endsWith(".genbank")||d.endsWith(".gff")||d.endsWith(".gff3")?f.push(o):g.push(o)}const v=p=>new Promise((o,d)=>{const T=new FileReader;T.onload=async V=>{var H,G;const C=(G=(H=V.target)==null?void 0:H.result)==null?void 0:G.toString();try{await I(p.name,C),o()}catch(se){d(se)}},T.readAsText(p)});Promise.all([...c.map(p=>v(p)),...f.map(p=>v(p))]).then(()=>Promise.all(g.map(p=>v(p)))).then(()=>{t(1,_=!1)}).catch(p=>{console.error("Error reading files:",p),t(1,_=!1)})}const L=(m,c)=>ne.setIsTreatment(m,c),W=m=>ne.remove(m);function F(m){h=m,t(0,h)}return[h,_,r,l,a,k,L,W,F]}class Zt extends ae{constructor(e){super(),ie(this,e,At,Nt,re,{})}}export{Zt as component};
