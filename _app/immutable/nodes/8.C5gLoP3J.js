import{s as Fe,c as fe,n as le,d as he,e as de}from"../chunks/scheduler.D4l2_50T.js";import{S as Le,i as Ae,e as N,m as R,s as P,c as q,a as V,n as B,f as F,d as v,l as ae,g as z,h,o as j,p as w,z as we,y as ke,q as k,r as O,w as ue,t as y,b as J,j as ie,u as be,v as Te}from"../chunks/index.GLNPzUOZ.js";import{e as Q}from"../chunks/each.bfnIeBsL.js";import{S as Ne,R as qe,T as ce,a as $e,b as Ve,P as ze,D as Me}from"../chunks/Datatable.svelte_svelte_type_style_lang.Btzh_oeY.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.Dyxst68F.js";import{T as Ye,a as ve}from"../chunks/Tab.DUXPhubS.js";import{i as ye}from"../chunks/insertStore.D6hhx-AE.js";import{g as Je}from"../chunks/generateGeneInsertSites.BfmONhhf.js";import{a as Ke}from"../chunks/annotationStore.B8SpThiG.js";import{t as Qe}from"../chunks/TAStore.CjcekbWH.js";function Se(r,e,t){const n=r.slice();return n[7]=e[t],n}function De(r,e,t){const n=r.slice();return n[10]=e[t],n}function Ce(r,e,t){const n=r.slice();return n[10]=e[t],n}function Re(r,e,t){const n=r.slice();return n[10]=e[t],n}function Ue(r){let e;return{c(){e=y("Name")},l(t){e=J(t,"Name")},m(t,n){z(t,e,n)},d(t){t&&v(e)}}}function We(r){let e;return{c(){e=y("Start")},l(t){e=J(t,"Start")},m(t,n){z(t,e,n)},d(t){t&&v(e)}}}function Xe(r){let e;return{c(){e=y("Length")},l(t){e=J(t,"Length")},m(t,n){z(t,e,n)},d(t){t&&v(e)}}}function Ze(r){let e=r[10]+"",t;return{c(){t=y(e)},l(n){t=J(n,e)},m(n,l){z(n,t,l)},p:le,d(n){n&&v(t)}}}function Be(r){let e,t;return e=new ce({props:{handler:r[2],orderBy:r[10],$$slots:{default:[Ze]},$$scope:{ctx:r}}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p(n,l){const u={};l&131072&&(u.$$scope={dirty:l,ctx:n}),e.$set(u)},i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function je(r){let e,t;return e=new $e({props:{handler:r[2],filterBy:r[10]}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p:le,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function Oe(r){let e,t=parseFloat(r[7][r[10]]).toFixed(2)+"",n;return{c(){e=N("td"),n=y(t)},l(l){e=q(l,"TD",{});var u=V(e);n=J(u,t),u.forEach(v)},m(l,u){z(l,e,u),h(e,n)},p(l,u){u&1&&t!==(t=parseFloat(l[7][l[10]]).toFixed(2)+"")&&ie(n,t)},d(l){l&&v(e)}}}function Pe(r){let e,t,n=r[7].name+"",l,u,$,_=r[7].start+"",i,g,p,S=r[7].length+"",C,m,D,L=Q(r[1]),o=[];for(let s=0;s<L.length;s+=1)o[s]=Oe(De(r,L,s));return{c(){e=N("tr"),t=N("td"),l=y(n),u=P(),$=N("td"),i=y(_),g=P(),p=N("td"),C=y(S),m=P();for(let s=0;s<o.length;s+=1)o[s].c();D=P()},l(s){e=q(s,"TR",{});var d=V(e);t=q(d,"TD",{});var b=V(t);l=J(b,n),b.forEach(v),u=F(d),$=q(d,"TD",{});var A=V($);i=J(A,_),A.forEach(v),g=F(d),p=q(d,"TD",{});var te=V(p);C=J(te,S),te.forEach(v),m=F(d);for(let M=0;M<o.length;M+=1)o[M].l(d);D=F(d),d.forEach(v)},m(s,d){z(s,e,d),h(e,t),h(t,l),h(e,u),h(e,$),h($,i),h(e,g),h(e,p),h(p,C),h(e,m);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);h(e,D)},p(s,d){if(d&1&&n!==(n=s[7].name+"")&&ie(l,n),d&1&&_!==(_=s[7].start+"")&&ie(i,_),d&1&&S!==(S=s[7].length+"")&&ie(C,S),d&3){L=Q(s[1]);let b;for(b=0;b<L.length;b+=1){const A=De(s,L,b);o[b]?o[b].p(A,d):(o[b]=Oe(A),o[b].c(),o[b].m(e,D))}for(;b<o.length;b+=1)o[b].d(1);o.length=L.length}},d(s){s&&v(e),ue(o,s)}}}function xe(r){let e,t,n,l,u,$,_,i,g,p,S,C,m,D,L,o,s,d,b,A,te,M,me,ge,ne,_e,K,U,pe,W,oe;n=new Ne({props:{handler:r[2]}}),u=new qe({props:{handler:r[2]}}),p=new ce({props:{handler:r[2],orderBy:"name",$$slots:{default:[Ue]},$$scope:{ctx:r}}}),C=new ce({props:{handler:r[2],orderBy:"start",$$slots:{default:[We]},$$scope:{ctx:r}}}),D=new ce({props:{handler:r[2],orderBy:"length",$$slots:{default:[Xe]},$$scope:{ctx:r}}});let X=Q(r[1]),E=[];for(let a=0;a<X.length;a+=1)E[a]=Be(Re(r,X,a));const Ge=a=>k(E[a],1,1,()=>{E[a]=null});d=new $e({props:{handler:r[2],filterBy:"name"}}),A=new $e({props:{handler:r[2],filterBy:"start"}}),M=new $e({props:{handler:r[2],filterBy:"length"}});let Z=Q(r[1]),I=[];for(let a=0;a<Z.length;a+=1)I[a]=je(Ce(r,Z,a));const He=a=>k(I[a],1,1,()=>{I[a]=null});let re=Q(r[0]),G=[];for(let a=0;a<re.length;a+=1)G[a]=Pe(Se(r,re,a));return U=new Ve({props:{handler:r[2]}}),W=new ze({props:{handler:r[2]}}),{c(){e=N("div"),t=N("header"),R(n.$$.fragment),l=P(),R(u.$$.fragment),$=P(),_=N("table"),i=N("thead"),g=N("tr"),R(p.$$.fragment),S=P(),R(C.$$.fragment),m=P(),R(D.$$.fragment),L=P();for(let a=0;a<E.length;a+=1)E[a].c();o=P(),s=N("tr"),R(d.$$.fragment),b=P(),R(A.$$.fragment),te=P(),R(M.$$.fragment),me=P();for(let a=0;a<I.length;a+=1)I[a].c();ge=P(),ne=N("tbody");for(let a=0;a<G.length;a+=1)G[a].c();_e=P(),K=N("footer"),R(U.$$.fragment),pe=P(),R(W.$$.fragment),this.h()},l(a){e=q(a,"DIV",{class:!0});var c=V(e);t=q(c,"HEADER",{class:!0});var T=V(t);B(n.$$.fragment,T),l=F(T),B(u.$$.fragment,T),T.forEach(v),$=F(c),_=q(c,"TABLE",{class:!0});var x=V(_);i=q(x,"THEAD",{});var ee=V(i);g=q(ee,"TR",{});var f=V(g);B(p.$$.fragment,f),S=F(f),B(C.$$.fragment,f),m=F(f),B(D.$$.fragment,f),L=F(f);for(let Y=0;Y<E.length;Y+=1)E[Y].l(f);f.forEach(v),o=F(ee),s=q(ee,"TR",{});var H=V(s);B(d.$$.fragment,H),b=F(H),B(A.$$.fragment,H),te=F(H),B(M.$$.fragment,H),me=F(H);for(let Y=0;Y<I.length;Y+=1)I[Y].l(H);H.forEach(v),ee.forEach(v),ge=F(x),ne=q(x,"TBODY",{});var Ie=V(ne);for(let Y=0;Y<G.length;Y+=1)G[Y].l(Ie);Ie.forEach(v),x.forEach(v),_e=F(c),K=q(c,"FOOTER",{class:!0});var se=V(K);B(U.$$.fragment,se),pe=F(se),B(W.$$.fragment,se),se.forEach(v),c.forEach(v),this.h()},h(){ae(t,"class","flex justify-between gap-4"),ae(_,"class","table table-hover table-compact w-full table-auto"),ae(K,"class","flex justify-between"),ae(e,"class","overflow-x-auto space-y-4")},m(a,c){z(a,e,c),h(e,t),j(n,t,null),h(t,l),j(u,t,null),h(e,$),h(e,_),h(_,i),h(i,g),j(p,g,null),h(g,S),j(C,g,null),h(g,m),j(D,g,null),h(g,L);for(let T=0;T<E.length;T+=1)E[T]&&E[T].m(g,null);h(i,o),h(i,s),j(d,s,null),h(s,b),j(A,s,null),h(s,te),j(M,s,null),h(s,me);for(let T=0;T<I.length;T+=1)I[T]&&I[T].m(s,null);h(_,ge),h(_,ne);for(let T=0;T<G.length;T+=1)G[T]&&G[T].m(ne,null);h(e,_e),h(e,K),j(U,K,null),h(K,pe),j(W,K,null),oe=!0},p(a,[c]){const T={};c&131072&&(T.$$scope={dirty:c,ctx:a}),p.$set(T);const x={};c&131072&&(x.$$scope={dirty:c,ctx:a}),C.$set(x);const ee={};if(c&131072&&(ee.$$scope={dirty:c,ctx:a}),D.$set(ee),c&6){X=Q(a[1]);let f;for(f=0;f<X.length;f+=1){const H=Re(a,X,f);E[f]?(E[f].p(H,c),w(E[f],1)):(E[f]=Be(H),E[f].c(),w(E[f],1),E[f].m(g,null))}for(we(),f=X.length;f<E.length;f+=1)Ge(f);ke()}if(c&6){Z=Q(a[1]);let f;for(f=0;f<Z.length;f+=1){const H=Ce(a,Z,f);I[f]?(I[f].p(H,c),w(I[f],1)):(I[f]=je(H),I[f].c(),w(I[f],1),I[f].m(s,null))}for(we(),f=Z.length;f<I.length;f+=1)He(f);ke()}if(c&3){re=Q(a[0]);let f;for(f=0;f<re.length;f+=1){const H=Se(a,re,f);G[f]?G[f].p(H,c):(G[f]=Pe(H),G[f].c(),G[f].m(ne,null))}for(;f<G.length;f+=1)G[f].d(1);G.length=re.length}},i(a){if(!oe){w(n.$$.fragment,a),w(u.$$.fragment,a),w(p.$$.fragment,a),w(C.$$.fragment,a),w(D.$$.fragment,a);for(let c=0;c<X.length;c+=1)w(E[c]);w(d.$$.fragment,a),w(A.$$.fragment,a),w(M.$$.fragment,a);for(let c=0;c<Z.length;c+=1)w(I[c]);w(U.$$.fragment,a),w(W.$$.fragment,a),oe=!0}},o(a){k(n.$$.fragment,a),k(u.$$.fragment,a),k(p.$$.fragment,a),k(C.$$.fragment,a),k(D.$$.fragment,a),E=E.filter(Boolean);for(let c=0;c<E.length;c+=1)k(E[c]);k(d.$$.fragment,a),k(A.$$.fragment,a),k(M.$$.fragment,a),I=I.filter(Boolean);for(let c=0;c<I.length;c+=1)k(I[c]);k(U.$$.fragment,a),k(W.$$.fragment,a),oe=!1},d(a){a&&v(e),O(n),O(u),O(p),O(C),O(D),ue(E,a),O(d),O(A),O(M),ue(I,a),ue(G,a),O(U),O(W)}}}function et(r,e,t){let n,{data:l}=e,{column:u}=e;console.log(l);const $=Object.keys(l[0]).sort();let _=[];for(const p of l){let S={};for(const[C,m]of Object.entries(p))S[C]=m[u],S.name=m.name,S.start=m.start,S.length=m.geneLength;_.push(S)}const i=new Me(_,{rowsPerPage:5}),g=i.getRows();return fe(r,g,p=>t(0,n=p)),r.$$set=p=>{"data"in p&&t(4,l=p.data),"column"in p&&t(5,u=p.column)},[n,$,i,g,l,u]}class Ee extends Le{constructor(e){super(),Ae(this,e,et,xe,Fe,{data:4,column:5})}}function tt(r){let e;return{c(){e=y("Read Counts")},l(t){e=J(t,"Read Counts")},m(t,n){z(t,e,n)},d(t){t&&v(e)}}}function nt(r){let e;return{c(){e=y("Insert Count")},l(t){e=J(t,"Insert Count")},m(t,n){z(t,e,n)},d(t){t&&v(e)}}}function rt(r){let e;return{c(){e=y("Insert Index")},l(t){e=J(t,"Insert Index")},m(t,n){z(t,e,n)},d(t){t&&v(e)}}}function at(r){let e,t,n,l,u,$,_,i,g;function p(o){r[2](o)}let S={name:"readCount",value:"readCount",$$slots:{default:[tt]},$$scope:{ctx:r}};r[0]!==void 0&&(S.group=r[0]),e=new ve({props:S}),he.push(()=>be(e,"group",p));function C(o){r[3](o)}let m={name:"insertCount",value:"insertCount",$$slots:{default:[nt]},$$scope:{ctx:r}};r[0]!==void 0&&(m.group=r[0]),l=new ve({props:m}),he.push(()=>be(l,"group",C));function D(o){r[4](o)}let L={name:"insertIndex",value:"insertIndex",$$slots:{default:[rt]},$$scope:{ctx:r}};return r[0]!==void 0&&(L.group=r[0]),_=new ve({props:L}),he.push(()=>be(_,"group",D)),{c(){R(e.$$.fragment),n=P(),R(l.$$.fragment),$=P(),R(_.$$.fragment)},l(o){B(e.$$.fragment,o),n=F(o),B(l.$$.fragment,o),$=F(o),B(_.$$.fragment,o)},m(o,s){j(e,o,s),z(o,n,s),j(l,o,s),z(o,$,s),j(_,o,s),g=!0},p(o,s){const d={};s&1024&&(d.$$scope={dirty:s,ctx:o}),!t&&s&1&&(t=!0,d.group=o[0],de(()=>t=!1)),e.$set(d);const b={};s&1024&&(b.$$scope={dirty:s,ctx:o}),!u&&s&1&&(u=!0,b.group=o[0],de(()=>u=!1)),l.$set(b);const A={};s&1024&&(A.$$scope={dirty:s,ctx:o}),!i&&s&1&&(i=!0,A.group=o[0],de(()=>i=!1)),_.$set(A)},i(o){g||(w(e.$$.fragment,o),w(l.$$.fragment,o),w(_.$$.fragment,o),g=!0)},o(o){k(e.$$.fragment,o),k(l.$$.fragment,o),k(_.$$.fragment,o),g=!1},d(o){o&&(v(n),v($)),O(e,o),O(l,o),O(_,o)}}}function lt(r){let e,t;return e=new Ee({props:{data:r[1],column:"readCount"}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p:le,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function ot(r){let e,t;return e=new Ee({props:{data:r[1],column:"insertCount"}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p:le,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function st(r){let e,t;return e=new Ee({props:{data:r[1],column:"insIndex"}}),{c(){R(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,l){j(e,n,l),t=!0},p:le,i(n){t||(w(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){O(e,n)}}}function ft(r){let e,t,n,l;const u=[st,ot,lt],$=[];function _(i,g){return i[0]=="insertIndex"?0:i[0]=="insertCount"?1:i[0]=="readCount"?2:-1}return~(e=_(r))&&(t=$[e]=u[e](r)),{c(){t&&t.c(),n=Te()},l(i){t&&t.l(i),n=Te()},m(i,g){~e&&$[e].m(i,g),z(i,n,g),l=!0},p(i,g){let p=e;e=_(i),e===p?~e&&$[e].p(i,g):(t&&(we(),k($[p],1,1,()=>{$[p]=null}),ke()),~e?(t=$[e],t?t.p(i,g):(t=$[e]=u[e](i),t.c()),w(t,1),t.m(n.parentNode,n)):t=null)},i(i){l||(w(t),l=!0)},o(i){k(t),l=!1},d(i){i&&v(n),~e&&$[e].d(i)}}}function ut(r){let e,t,n;return t=new Ye({props:{$$slots:{panel:[ft],default:[at]},$$scope:{ctx:r}}}),{c(){e=N("div"),R(t.$$.fragment),this.h()},l(l){e=q(l,"DIV",{class:!0});var u=V(e);B(t.$$.fragment,u),u.forEach(v),this.h()},h(){ae(e,"class","m-4")},m(l,u){z(l,e,u),j(t,e,null),n=!0},p(l,[u]){const $={};u&1025&&($.$$scope={dirty:u,ctx:l}),t.$set($)},i(l){n||(w(t.$$.fragment,l),n=!0)},o(l){k(t.$$.fragment,l),n=!1},d(l){l&&v(e),O(t)}}}function it(r,e,t){let n,l,u;fe(r,Qe,m=>t(6,n=m)),fe(r,Ke,m=>t(7,l=m)),fe(r,ye,m=>t(8,u=m));let $="insertIndex";const _={};for(const[m,D]of u){const L=D.map(s=>s.minus+s.plus),o=Je(l.features,L,n,0,0);_[m]=o}const i=Math.max(...Object.values(_).map(m=>m.length)),g=[];for(let m=0;m<i;m++){const D={};for(const[L,o]of Object.entries(_))o[m]&&(D[L]=o[m]);g.push(D)}console.log(g);function p(m){$=m,t(0,$)}function S(m){$=m,t(0,$)}function C(m){$=m,t(0,$)}return[$,g,p,S,C]}class wt extends Le{constructor(e){super(),Ae(this,e,it,ut,Fe,{})}}export{wt as component};
