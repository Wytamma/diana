import{s as W,c as z,o as X,d as Y,k as F,l as M}from"../chunks/scheduler.Cxdq5DjT.js";import{S as Z,i as x,e as w,w as y,c as P,a as D,x as R,d as _,l as J,g as b,y as A,q as G,u as V,z as q,A as N,s as B,f as H,B as K,C as tt,t as C,b as S,h as I,j as et}from"../chunks/index.Bp_61F_m.js";import{e as L}from"../chunks/each.J0AVf1RG.js";import{g as nt}from"../chunks/generateGeneInsertSites.ozbo97IV.js";import{a as ot}from"../chunks/annotationStore.D01fgoLY.js";import{i as at}from"../chunks/insertStore.DwlY1-2V.js";import{P as st}from"../chunks/plotly.cbd5aJyv.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.DkJRRaEQ.js";import{T as rt,a as U}from"../chunks/Tab.DS44ZU-k.js";import{t as it}from"../chunks/TAStore.BBwXKcJP.js";function O(r,e,t){const o=r.slice();return o[12]=e[t],o[14]=t,o}function lt(r){let e;return{c(){e=C("Read Counts")},l(t){e=S(t,"Read Counts")},m(t,o){b(t,e,o)},d(t){t&&_(e)}}}function ut(r){let e;return{c(){e=C("Insert Count")},l(t){e=S(t,"Insert Count")},m(t,o){b(t,e,o)},d(t){t&&_(e)}}}function ft(r){let e;return{c(){e=C("Insert Index")},l(t){e=S(t,"Insert Index")},m(t,o){b(t,e,o)},d(t){t&&_(e)}}}function pt(r){let e,t,o,n,i,s,f,c,g;function v(a){r[2](a)}let p={name:"readCount",value:"readCount",$$slots:{default:[lt]},$$scope:{ctx:r}};r[0]!==void 0&&(p.group=r[0]),e=new U({props:p}),F.push(()=>N(e,"group",v));function m(a){r[3](a)}let $={name:"insertCount",value:"insertCount",$$slots:{default:[ut]},$$scope:{ctx:r}};r[0]!==void 0&&($.group=r[0]),n=new U({props:$}),F.push(()=>N(n,"group",m));function j(a){r[4](a)}let l={name:"insertIndex",value:"insertIndex",$$slots:{default:[ft]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.group=r[0]),f=new U({props:l}),F.push(()=>N(f,"group",j)),{c(){y(e.$$.fragment),o=B(),y(n.$$.fragment),s=B(),y(f.$$.fragment)},l(a){R(e.$$.fragment,a),o=H(a),R(n.$$.fragment,a),s=H(a),R(f.$$.fragment,a)},m(a,u){A(e,a,u),b(a,o,u),A(n,a,u),b(a,s,u),A(f,a,u),g=!0},p(a,u){const d={};u&32768&&(d.$$scope={dirty:u,ctx:a}),!t&&u&1&&(t=!0,d.group=a[0],M(()=>t=!1)),e.$set(d);const h={};u&32768&&(h.$$scope={dirty:u,ctx:a}),!i&&u&1&&(i=!0,h.group=a[0],M(()=>i=!1)),n.$set(h);const E={};u&32768&&(E.$$scope={dirty:u,ctx:a}),!c&&u&1&&(c=!0,E.group=a[0],M(()=>c=!1)),f.$set(E)},i(a){g||(G(e.$$.fragment,a),G(n.$$.fragment,a),G(f.$$.fragment,a),g=!0)},o(a){V(e.$$.fragment,a),V(n.$$.fragment,a),V(f.$$.fragment,a),g=!1},d(a){a&&(_(o),_(s)),q(e,a),q(n,a),q(f,a)}}}function Q(r){let e,t,o=r[12]+"",n,i,s,f,c,g,v;return{c(){e=w("div"),t=w("h3"),n=C(o),i=C(" - "),s=C(r[0]),f=B(),c=w("div"),v=B(),this.h()},l(p){e=P(p,"DIV",{});var m=D(e);t=P(m,"H3",{});var $=D(t);n=S($,o),i=S($," - "),s=S($,r[0]),$.forEach(_),f=H(m),c=P(m,"DIV",{id:!0}),D(c).forEach(_),v=H(m),m.forEach(_),this.h()},h(){J(c,"id",g=`plotly-histogram-${r[0]}-${r[14]}`)},m(p,m){b(p,e,m),I(e,t),I(t,n),I(t,i),I(t,s),I(e,f),I(e,c),I(e,v)},p(p,m){m&1&&et(s,p[0]),m&1&&g!==(g=`plotly-histogram-${p[0]}-${p[14]}`)&&J(c,"id",g)},d(p){p&&_(e)}}}function mt(r){let e,t=L(r[1].sort()),o=[];for(let n=0;n<t.length;n+=1)o[n]=Q(O(r,t,n));return{c(){for(let n=0;n<o.length;n+=1)o[n].c();e=K()},l(n){for(let i=0;i<o.length;i+=1)o[i].l(n);e=K()},m(n,i){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(n,i);b(n,e,i)},p(n,i){if(i&3){t=L(n[1].sort());let s;for(s=0;s<t.length;s+=1){const f=O(n,t,s);o[s]?o[s].p(f,i):(o[s]=Q(f),o[s].c(),o[s].m(e.parentNode,e))}for(;s<o.length;s+=1)o[s].d(1);o.length=t.length}},d(n){n&&_(e),tt(o,n)}}}function ct(r){let e,t,o;return t=new rt({props:{$$slots:{panel:[mt],default:[pt]},$$scope:{ctx:r}}}),{c(){e=w("div"),y(t.$$.fragment),this.h()},l(n){e=P(n,"DIV",{class:!0});var i=D(e);R(t.$$.fragment,i),i.forEach(_),this.h()},h(){J(e,"class","m-4")},m(n,i){b(n,e,i),A(t,e,null),o=!0},p(n,[i]){const s={};i&32769&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(G(t.$$.fragment,n),o=!0)},o(n){V(t.$$.fragment,n),o=!1},d(n){n&&_(e),q(t)}}}function _t(r,e,t){let o,n,i;z(r,it,l=>t(5,o=l)),z(r,ot,l=>t(6,n=l)),z(r,at,l=>t(7,i=l));let s="insertIndex";const f=Array.from(i.keys()),c=Array.from(i.values());function g(l){const a=l.map(u=>u.minus+u.plus);return nt(n.features,a,o,0,0)}function v(l,a,u){const d={title:`Histogram of ${u}`,xaxis:{title:`${u}`},yaxis:{title:"Count"}};document.getElementById(l)&&st.newPlot(l,[a],d)}function p(l){c.forEach((a,u)=>{const d=g(a);let h;l==="readCount"?h={x:d.map(k=>k.readCount),type:"histogram"}:l==="insertCount"?h={x:d.map(k=>k.insertCount),type:"histogram"}:l==="insertIndex"&&(h={x:d.map(k=>k.insIndex),type:"histogram"});const E=`plotly-histogram-${l}-${u}`,T=f[u];v(E,h,T)})}X(()=>{p(s)}),Y(()=>{p(s)});function m(l){s=l,t(0,s)}function $(l){s=l,t(0,s)}function j(l){s=l,t(0,s)}return[s,f,m,$,j]}class kt extends Z{constructor(e){super(),x(this,e,_t,ct,W,{})}}export{kt as component};
