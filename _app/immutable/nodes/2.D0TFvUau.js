import{s as Y,y as Q,A as ce,e as E,a as N,c as y,b as A,g as W,f as p,O as ie,p as g,v as q,i as U,h as z,P as F,B as fe,C as ue,D as de,J as Be,Q as re,w as He,z as oe,R as B,F as Ie,t as Z,o as O,d as x,n as X,W as Oe,L as Ue,j as ze,G as Ne,I as qe,k as ke,S as Je}from"../chunks/scheduler.Cnzm-Pn7.js";import{S as $,i as ee,t as j,g as J,a as w,c as K,f as We,b as te,d as le,m as se,e as ne}from"../chunks/index.BWxcAyja.js";import{e as Ee}from"../chunks/each.SoU_5gPK.js";import{g as Ke}from"../chunks/stores.9yxo98nw.js";import"../chunks/ProgressBar.svelte_svelte_type_style_lang.aA2OJerz.js";import{g as Ge}from"../chunks/spread.CN4WR7uZ.js";import{P as Qe}from"../chunks/ProgressRadial.ILNWxSmG.js";import{a as Xe}from"../chunks/annotationStore.DGj68on5.js";import{i as ae}from"../chunks/insertStore.2CzxKJCQ.js";import{t as Ye}from"../chunks/TAStore.Br7d3jbf.js";import{r as Te}from"../chunks/refStore.BAK9rk7l.js";import{i as ye}from"../chunks/igvStore.BiOSav-K.js";const Ze=t=>({}),De=t=>({}),xe=t=>({}),Le=t=>({}),$e=t=>({}),Se=t=>({});function Ve(t){let e,l,s;const i=t[18].lead,n=ce(i,t,t[17],Se);return{c(){e=E("div"),n&&n.c(),this.h()},l(a){e=y(a,"DIV",{class:!0});var f=A(e);n&&n.l(f),f.forEach(p),this.h()},h(){g(e,"class",l="dropzone-lead "+t[5])},m(a,f){U(a,e,f),n&&n.m(e,null),s=!0},p(a,f){n&&n.p&&(!s||f[0]&131072)&&fe(n,i,a,a[17],s?de(i,a[17],f,$e):ue(a[17]),Se),(!s||f[0]&32&&l!==(l="dropzone-lead "+a[5]))&&g(e,"class",l)},i(a){s||(j(n,a),s=!0)},o(a){w(n,a),s=!1},d(a){a&&p(e),n&&n.d(a)}}}function et(t){let e,l="Upload a file",s;return{c(){e=E("strong"),e.textContent=l,s=Z(" or drag and drop")},l(i){e=y(i,"STRONG",{"data-svelte-h":!0}),O(e)!=="svelte-13uz6lq"&&(e.textContent=l),s=x(i," or drag and drop")},m(i,n){U(i,e,n),U(i,s,n)},p:X,d(i){i&&(p(e),p(s))}}}function Ce(t){let e,l,s;const i=t[18].meta,n=ce(i,t,t[17],De);return{c(){e=E("small"),n&&n.c(),this.h()},l(a){e=y(a,"SMALL",{class:!0});var f=A(e);n&&n.l(f),f.forEach(p),this.h()},h(){g(e,"class",l="dropzone-meta "+t[7])},m(a,f){U(a,e,f),n&&n.m(e,null),s=!0},p(a,f){n&&n.p&&(!s||f[0]&131072)&&fe(n,i,a,a[17],s?de(i,a[17],f,Ze):ue(a[17]),De),(!s||f[0]&128&&l!==(l="dropzone-meta "+a[7]))&&g(e,"class",l)},i(a){s||(j(n,a),s=!0)},o(a){w(n,a),s=!1},d(a){a&&p(e),n&&n.d(a)}}}function tt(t){let e,l,s,i,n,a,f,b,k,D,T,V,u,I,L,R,S=[{type:"file"},{name:t[2]},{class:s="dropzone-input "+t[9]},t[11]()],d={};for(let c=0;c<S.length;c+=1)d=Q(d,S[c]);let r=t[13].lead&&Ve(t);const _=t[18].message,v=ce(_,t,t[17],Le),M=v||et();let m=t[13].meta&&Ce(t);return{c(){e=E("div"),l=E("input"),i=N(),n=E("div"),a=E("div"),r&&r.c(),f=N(),b=E("div"),M&&M.c(),D=N(),m&&m.c(),this.h()},l(c){e=y(c,"DIV",{class:!0,"data-testid":!0});var h=A(e);l=y(h,"INPUT",{type:!0,name:!0,class:!0}),i=W(h),n=y(h,"DIV",{class:!0});var P=A(n);a=y(P,"DIV",{class:!0});var C=A(a);r&&r.l(C),f=W(C),b=y(C,"DIV",{class:!0});var H=A(b);M&&M.l(H),H.forEach(p),D=W(C),m&&m.l(C),C.forEach(p),P.forEach(p),h.forEach(p),this.h()},h(){ie(l,d),g(b,"class",k="dropzone-message "+t[6]),g(a,"class",T="dropzone-interface-text "+t[4]),g(n,"class",V="dropzone-interface "+t[8]+" "+t[3]),g(e,"class",u="dropzone "+t[10]),g(e,"data-testid","file-dropzone"),q(e,"opacity-50",t[12].disabled)},m(c,h){U(c,e,h),z(e,l),l.autofocus&&l.focus(),t[32](l),z(e,i),z(e,n),z(n,a),r&&r.m(a,null),z(a,f),z(a,b),M&&M.m(b,null),z(a,D),m&&m.m(a,null),I=!0,L||(R=[F(l,"change",t[31]),F(l,"change",t[19]),F(l,"dragenter",t[20]),F(l,"dragover",t[21]),F(l,"dragleave",t[22]),F(l,"drop",t[23]),F(l,"click",t[24]),F(l,"keydown",t[25]),F(l,"keyup",t[26]),F(l,"keypress",t[27]),F(l,"focus",t[28]),F(l,"focusin",t[29]),F(l,"focusout",t[30])],L=!0)},p(c,h){ie(l,d=Ge(S,[{type:"file"},(!I||h[0]&4)&&{name:c[2]},(!I||h[0]&512&&s!==(s="dropzone-input "+c[9]))&&{class:s},c[11]()])),c[13].lead?r?(r.p(c,h),h[0]&8192&&j(r,1)):(r=Ve(c),r.c(),j(r,1),r.m(a,f)):r&&(J(),w(r,1,1,()=>{r=null}),K()),v&&v.p&&(!I||h[0]&131072)&&fe(v,_,c,c[17],I?de(_,c[17],h,xe):ue(c[17]),Le),(!I||h[0]&64&&k!==(k="dropzone-message "+c[6]))&&g(b,"class",k),c[13].meta?m?(m.p(c,h),h[0]&8192&&j(m,1)):(m=Ce(c),m.c(),j(m,1),m.m(a,null)):m&&(J(),w(m,1,1,()=>{m=null}),K()),(!I||h[0]&16&&T!==(T="dropzone-interface-text "+c[4]))&&g(a,"class",T),(!I||h[0]&264&&V!==(V="dropzone-interface "+c[8]+" "+c[3]))&&g(n,"class",V),(!I||h[0]&1024&&u!==(u="dropzone "+c[10]))&&g(e,"class",u),(!I||h[0]&5120)&&q(e,"opacity-50",c[12].disabled)},i(c){I||(j(r),j(M,c),j(m),I=!0)},o(c){w(r),w(M,c),w(m),I=!1},d(c){c&&p(e),t[32](null),r&&r.d(),M&&M.d(c),m&&m.d(),L=!1,Be(R)}}}const lt="textarea relative flex justify-center items-center",st="w-full absolute top-0 left-0 right-0 bottom-0 z-[1] opacity-0 disabled:!opacity-0 cursor-pointer",nt="flex justify-center items-center text-center";function at(t,e,l){let s,i,n;const a=["files","fileInput","name","border","padding","rounded","regionInterface","regionInterfaceText","slotLead","slotMessage","slotMeta"];let f=re(e,a),{$$slots:b={},$$scope:k}=e;const D=He(b);let{files:T=void 0}=e,{fileInput:V=void 0}=e,{name:u}=e,{border:I="border-2 border-dashed"}=e,{padding:L="p-4 py-8"}=e,{rounded:R="rounded-container-token"}=e,{regionInterface:S=""}=e,{regionInterfaceText:d=""}=e,{slotLead:r="mb-4"}=e,{slotMessage:_=""}=e,{slotMeta:v="opacity-75"}=e;function M(){return delete f.class,f}function m(o){B.call(this,t,o)}function c(o){B.call(this,t,o)}function h(o){B.call(this,t,o)}function P(o){B.call(this,t,o)}function C(o){B.call(this,t,o)}function H(o){B.call(this,t,o)}function G(o){B.call(this,t,o)}function me(o){B.call(this,t,o)}function he(o){B.call(this,t,o)}function ge(o){B.call(this,t,o)}function _e(o){B.call(this,t,o)}function ve(o){B.call(this,t,o)}function be(){T=this.files,l(0,T)}function pe(o){Ie[o?"unshift":"push"](()=>{V=o,l(1,V)})}return t.$$set=o=>{l(33,e=Q(Q({},e),oe(o))),l(12,f=re(e,a)),"files"in o&&l(0,T=o.files),"fileInput"in o&&l(1,V=o.fileInput),"name"in o&&l(2,u=o.name),"border"in o&&l(14,I=o.border),"padding"in o&&l(15,L=o.padding),"rounded"in o&&l(16,R=o.rounded),"regionInterface"in o&&l(3,S=o.regionInterface),"regionInterfaceText"in o&&l(4,d=o.regionInterfaceText),"slotLead"in o&&l(5,r=o.slotLead),"slotMessage"in o&&l(6,_=o.slotMessage),"slotMeta"in o&&l(7,v=o.slotMeta),"$$scope"in o&&l(17,k=o.$$scope)},t.$$.update=()=>{l(10,s=`${lt} ${I} ${L} ${R} ${e.class??""}`)},l(9,i=`${st}`),l(8,n=`${nt}`),e=oe(e),[T,V,u,S,d,r,_,v,n,i,s,M,f,D,I,L,R,k,b,m,c,h,P,C,H,G,me,he,ge,_e,ve,be,pe]}class it extends ${constructor(e){super(),ee(this,e,at,tt,Y,{files:0,fileInput:1,name:2,border:14,padding:15,rounded:16,regionInterface:3,regionInterfaceText:4,slotLead:5,slotMessage:6,slotMeta:7},null,[-1,-1])}}function Re(t){let e,l;const s=t[22].default,i=ce(s,t,t[21],null);return{c(){e=E("div"),i&&i.c(),this.h()},l(n){e=y(n,"DIV",{class:!0});var a=A(e);i&&i.l(a),a.forEach(p),this.h()},h(){g(e,"class","slide-toggle-text ml-3")},m(n,a){U(n,e,a),i&&i.m(e,null),l=!0},p(n,a){i&&i.p&&(!l||a[0]&2097152)&&fe(i,s,n,n[21],l?de(s,n[21],a,null):ue(n[21]),null)},i(n){l||(j(i,n),l=!0)},o(n){w(i,n),l=!1},d(n){n&&p(e),i&&i.d(n)}}}function rt(t){let e,l,s,i,n,a,f,b,k,D,T,V,u,I,L,R=[{type:"checkbox"},{class:"slide-toggle-input hidden"},{name:t[1]},t[8](),{disabled:i=t[9].disabled}],S={};for(let r=0;r<R.length;r+=1)S=Q(S,R[r]);let d=t[10].default&&Re(t);return{c(){e=E("div"),l=E("label"),s=E("input"),n=N(),a=E("div"),f=E("div"),D=N(),d&&d.c(),this.h()},l(r){e=y(r,"DIV",{id:!0,class:!0,"data-testid":!0,role:!0,"aria-label":!0,"aria-checked":!0,tabindex:!0});var _=A(e);l=y(_,"LABEL",{class:!0});var v=A(l);s=y(v,"INPUT",{type:!0,class:!0,name:!0}),n=W(v),a=y(v,"DIV",{class:!0});var M=A(a);f=y(M,"DIV",{class:!0}),A(f).forEach(p),M.forEach(p),D=W(v),d&&d.l(v),v.forEach(p),_.forEach(p),this.h()},h(){ie(s,S),g(f,"class",b="slide-toggle-thumb "+t[3]),q(f,"cursor-not-allowed",t[9].disabled),g(a,"class",k="slide-toggle-track "+t[4]),q(a,"cursor-not-allowed",t[9].disabled),g(l,"class",T="slide-toggle-label "+t[5]),g(e,"id",t[2]),g(e,"class",V="slide-toggle "+t[6]),g(e,"data-testid","slide-toggle"),g(e,"role","switch"),g(e,"aria-label",t[2]),g(e,"aria-checked",t[0]),g(e,"tabindex","0")},m(r,_){U(r,e,_),z(e,l),z(l,s),s.autofocus&&s.focus(),s.checked=t[0],z(l,n),z(l,a),z(a,f),z(l,D),d&&d.m(l,null),u=!0,I||(L=[F(s,"change",t[31]),F(s,"click",t[23]),F(s,"keydown",t[24]),F(s,"keyup",t[25]),F(s,"keypress",t[26]),F(s,"mouseover",t[27]),F(s,"change",t[28]),F(s,"focus",t[29]),F(s,"blur",t[30]),F(e,"keydown",t[7])],I=!0)},p(r,_){ie(s,S=Ge(R,[{type:"checkbox"},{class:"slide-toggle-input hidden"},(!u||_[0]&2)&&{name:r[1]},r[8](),(!u||_[0]&512&&i!==(i=r[9].disabled))&&{disabled:i}])),_[0]&1&&(s.checked=r[0]),(!u||_[0]&8&&b!==(b="slide-toggle-thumb "+r[3]))&&g(f,"class",b),(!u||_[0]&520)&&q(f,"cursor-not-allowed",r[9].disabled),(!u||_[0]&16&&k!==(k="slide-toggle-track "+r[4]))&&g(a,"class",k),(!u||_[0]&528)&&q(a,"cursor-not-allowed",r[9].disabled),r[10].default?d?(d.p(r,_),_[0]&1024&&j(d,1)):(d=Re(r),d.c(),j(d,1),d.m(l,null)):d&&(J(),w(d,1,1,()=>{d=null}),K()),(!u||_[0]&32&&T!==(T="slide-toggle-label "+r[5]))&&g(l,"class",T),(!u||_[0]&4)&&g(e,"id",r[2]),(!u||_[0]&64&&V!==(V="slide-toggle "+r[6]))&&g(e,"class",V),(!u||_[0]&4)&&g(e,"aria-label",r[2]),(!u||_[0]&1)&&g(e,"aria-checked",r[0])},i(r){u||(j(d),u=!0)},o(r){w(d),u=!1},d(r){r&&p(e),d&&d.d(),I=!1,Be(L)}}}const ot="inline-block",ct="unstyled flex items-center",ft="flex transition-all duration-[200ms] cursor-pointer",ut="w-[50%] h-full scale-[0.8] transition-all duration-[200ms] shadow";function dt(t,e,l){let s,i,n,a,f,b,k,D;const T=["name","checked","size","background","active","border","rounded","label"];let V=re(e,T),{$$slots:u={},$$scope:I}=e;const L=He(u),R=Oe();let{name:S}=e,{checked:d=!1}=e,{size:r="md"}=e,{background:_="bg-surface-400 dark:bg-surface-700"}=e,{active:v="bg-surface-900 dark:bg-surface-300"}=e,{border:M=""}=e,{rounded:m="rounded-full"}=e,{label:c=""}=e,h;switch(r){case"sm":h="w-12 h-6";break;case"lg":h="w-20 h-10";break;default:h="w-16 h-8"}function P(o){["Enter","Space"].includes(o.code)&&(o.preventDefault(),R("keyup",o),o.currentTarget.firstChild.click())}function C(){return delete V.class,V}function H(o){B.call(this,t,o)}function G(o){B.call(this,t,o)}function me(o){B.call(this,t,o)}function he(o){B.call(this,t,o)}function ge(o){B.call(this,t,o)}function _e(o){B.call(this,t,o)}function ve(o){B.call(this,t,o)}function be(o){B.call(this,t,o)}function pe(){d=this.checked,l(0,d)}return t.$$set=o=>{l(9,e=Q(Q({},e),oe(o))),l(33,V=re(e,T)),"name"in o&&l(1,S=o.name),"checked"in o&&l(0,d=o.checked),"size"in o&&l(11,r=o.size),"background"in o&&l(12,_=o.background),"active"in o&&l(13,v=o.active),"border"in o&&l(14,M=o.border),"rounded"in o&&l(15,m=o.rounded),"label"in o&&l(2,c=o.label),"$$scope"in o&&l(21,I=o.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&12289&&l(19,s=d?v:`${_} cursor-pointer`),t.$$.dirty[0]&1&&l(18,i=d?"bg-white/75":"bg-white"),t.$$.dirty[0]&1&&l(17,n=d?"translate-x-full":""),l(20,a=e.disabled===!0?"opacity-50":"hover:brightness-[105%] dark:hover:brightness-110 cursor-pointer"),l(6,f=`${ot} ${m} ${a} ${e.class??""}`),t.$$.dirty[0]&638976&&l(4,k=`${ft} ${M} ${m} ${h} ${s}`),t.$$.dirty[0]&425984&&l(3,D=`${ut} ${m} ${i} ${n}`)},l(5,b=`${ct}`),e=oe(e),[d,S,c,D,k,b,f,P,C,e,L,r,_,v,M,m,h,n,i,s,a,I,u,H,G,me,he,ge,_e,ve,be,pe]}class mt extends ${constructor(e){super(),ee(this,e,dt,rt,Y,{name:1,checked:0,size:11,background:12,active:13,border:14,rounded:15,label:2},null,[-1,-1])}}function ht(t){let e,l=t[0]?"Treatment":"Control",s,i;return{c(){e=E("span"),s=Z(l),this.h()},l(n){e=y(n,"SPAN",{class:!0});var a=A(e);s=x(a,l),a.forEach(p),this.h()},h(){g(e,"class",i=`chip ${t[0]?"variant-soft-primary":"variant-soft-surface"}`)},m(n,a){U(n,e,a),z(e,s)},p(n,a){a&1&&l!==(l=n[0]?"Treatment":"Control")&&ze(s,l),a&1&&i!==(i=`chip ${n[0]?"variant-soft-primary":"variant-soft-surface"}`)&&g(e,"class",i)},d(n){n&&p(e)}}}function gt(t){let e,l,s,i,n,a,f,b,k,D,T,V='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',u,I,L;function R(d){t[4](d)}let S={active:"variant-soft-primary",size:"sm",class:"mr-2",name:"slide",$$slots:{default:[ht]},$$scope:{ctx:t}};return t[0]!==void 0&&(S.checked=t[0]),b=new mt({props:S}),Ie.push(()=>We(b,"checked",R)),b.$on("change",t[5]),{c(){e=E("div"),l=E("div"),s=E("div"),i=E("p"),n=Z(t[1]),a=N(),f=E("div"),te(b.$$.fragment),D=N(),T=E("button"),T.innerHTML=V,this.h()},l(d){e=y(d,"DIV",{class:!0});var r=A(e);l=y(r,"DIV",{class:!0});var _=A(l);s=y(_,"DIV",{class:!0});var v=A(s);i=y(v,"P",{class:!0});var M=A(i);n=x(M,t[1]),M.forEach(p),a=W(v),f=y(v,"DIV",{class:!0});var m=A(f);le(b.$$.fragment,m),D=W(m),T=y(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(T)!=="svelte-1m0ck3b"&&(T.innerHTML=V),m.forEach(p),v.forEach(p),_.forEach(p),r.forEach(p),this.h()},h(){g(i,"class","text-lg"),g(T,"type","button"),g(T,"class","btn-icon hover:variant-ringed-tertiary"),g(f,"class","flex justify-between items-center min-w-64"),g(s,"class","flex flex-col space-y-2"),g(l,"class","flex justify-center items-center space-x-2"),g(e,"class","card p-4 m-2")},m(d,r){U(d,e,r),z(e,l),z(l,s),z(s,i),z(i,n),z(s,a),z(s,f),se(b,f,null),z(f,D),z(f,T),u=!0,I||(L=F(T,"click",function(){Ue(t[2])&&t[2].apply(this,arguments)}),I=!0)},p(d,[r]){t=d,(!u||r&2)&&ze(n,t[1]);const _={};r&65&&(_.$$scope={dirty:r,ctx:t}),!k&&r&1&&(k=!0,_.checked=t[0],Ne(()=>k=!1)),b.$set(_)},i(d){u||(j(b.$$.fragment,d),u=!0)},o(d){w(b.$$.fragment,d),u=!1},d(d){d&&p(e),ne(b),I=!1,L()}}}function _t(t,e,l){let{filename:s}=e,{onRemove:i}=e,{onToggle:n}=e,{isTreatment:a=!1}=e;function f(k){a=k,l(0,a)}const b=()=>n(a);return t.$$set=k=>{"filename"in k&&l(1,s=k.filename),"onRemove"in k&&l(2,i=k.onRemove),"onToggle"in k&&l(3,n=k.onToggle),"isTreatment"in k&&l(0,a=k.isTreatment)},[a,s,i,n,f,b]}class vt extends ${constructor(e){super(),ee(this,e,_t,gt,Y,{filename:1,onRemove:2,onToggle:3,isTreatment:0})}}function bt(t){let e,l,s,i,n,a,f,b,k="Reference",D,T,V='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg>',u,I;return{c(){e=E("div"),l=E("div"),s=E("div"),i=E("p"),n=Z(t[0]),a=N(),f=E("div"),b=E("span"),b.textContent=k,D=N(),T=E("button"),T.innerHTML=V,this.h()},l(L){e=y(L,"DIV",{class:!0});var R=A(e);l=y(R,"DIV",{class:!0});var S=A(l);s=y(S,"DIV",{class:!0});var d=A(s);i=y(d,"P",{class:!0});var r=A(i);n=x(r,t[0]),r.forEach(p),a=W(d),f=y(d,"DIV",{class:!0});var _=A(f);b=y(_,"SPAN",{class:!0,"data-svelte-h":!0}),O(b)!=="svelte-190inea"&&(b.textContent=k),D=W(_),T=y(_,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(T)!=="svelte-1m0ck3b"&&(T.innerHTML=V),_.forEach(p),d.forEach(p),S.forEach(p),R.forEach(p),this.h()},h(){g(i,"class","text-lg"),g(b,"class","chip variant-soft-success"),g(T,"type","button"),g(T,"class","btn-icon hover:variant-ringed-tertiary"),g(f,"class","flex justify-between items-center min-w-64"),g(s,"class","flex flex-col space-y-2"),g(l,"class","flex justify-center items-center space-x-2"),g(e,"class","card p-4 m-2")},m(L,R){U(L,e,R),z(e,l),z(l,s),z(s,i),z(i,n),z(s,a),z(s,f),z(f,b),z(f,D),z(f,T),u||(I=F(T,"click",function(){Ue(t[1])&&t[1].apply(this,arguments)}),u=!0)},p(L,[R]){t=L,R&1&&ze(n,t[0])},i:X,o:X,d(L){L&&p(e),u=!1,I()}}}function pt(t,e,l){let{filename:s}=e,{onRemove:i}=e;return t.$$set=n=>{"filename"in n&&l(0,s=n.filename),"onRemove"in n&&l(1,i=n.onRemove)},[s,i]}class kt extends ${constructor(e){super(),ee(this,e,pt,bt,Y,{filename:0,onRemove:1})}}function Me(t,e,l){const s=t.slice();return s[12]=e[l][0],s[13]=e[l][1].isTreatment,s[15]=l,s}function Tt(t){let e,l='<span class="font-semibold">Load files</span> or drag and drop';return{c(){e=E("p"),e.innerHTML=l,this.h()},l(s){e=y(s,"P",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-10rbgmq"&&(e.innerHTML=l),this.h()},h(){g(e,"class","text-xl ")},m(s,i){U(s,e,i)},p:X,d(s){s&&p(e)}}}function It(t){let e;return{c(){e=Z("Only GFF+FASTA and .userplot files allowed.")},l(l){e=x(l,"Only GFF+FASTA and .userplot files allowed.")},m(l,s){U(l,e,s)},d(l){l&&p(e)}}}function Pe(t){let e,l;return e=new kt({props:{filename:t[2].name,onRemove:Te.reset}}),{c(){te(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,i){se(e,s,i),l=!0},p(s,i){const n={};i&4&&(n.filename=s[2].name),e.$set(n)},i(s){l||(j(e.$$.fragment,s),l=!0)},o(s){w(e.$$.fragment,s),l=!1},d(s){ne(e,s)}}}function je(t){let e,l;function s(...n){return t[6](t[12],...n)}function i(){return t[7](t[12])}return e=new vt({props:{isTreatment:t[13],onToggle:s,onRemove:i,filename:t[12]}}),{c(){te(e.$$.fragment)},l(n){le(e.$$.fragment,n)},m(n,a){se(e,n,a),l=!0},p(n,a){t=n;const f={};a&8&&(f.isTreatment=t[13]),a&8&&(f.onToggle=s),a&8&&(f.onRemove=i),a&8&&(f.filename=t[12]),e.$set(f)},i(n){l||(j(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){ne(e,n)}}}function Ae(t){let e,l,s;return l=new Qe({props:{value:void 0,width:"w-14",strokeLinecap:"round"}}),{c(){e=E("div"),te(l.$$.fragment),this.h()},l(i){e=y(i,"DIV",{class:!0});var n=A(e);le(l.$$.fragment,n),n.forEach(p),this.h()},h(){g(e,"class","flex items-center justify-center align-middle ml-8")},m(i,n){U(i,e,n),se(l,e,null),s=!0},p:X,i(i){s||(j(l.$$.fragment,i),s=!0)},o(i){w(l.$$.fragment,i),s=!1},d(i){i&&p(e),ne(l)}}}function zt(t){let e,l,s,i='<div><section class="img-bg svelte-cmzijy"></section></div> <img class="logo-img mt-16 svelte-cmzijy" src="/images/logo2.png" alt="Skeleton Logo"/>',n,a,f="Transposon Sequencing Data Visualiser",b,k,D,T,V,u,I,L,R;function S(c){t[5](c)}let d={name:"files",multiple:!0,$$slots:{meta:[It],message:[Tt]},$$scope:{ctx:t}};t[0]!==void 0&&(d.files=t[0]),D=new it({props:d}),Ie.push(()=>We(D,"files",S)),D.$on("change",t[4]),D.$on("click",Fe),D.$on("drop",Fe);let r=t[2].name&&Pe(t),_=Ee(Array.from(t[3].entries()).sort(we)),v=[];for(let c=0;c<_.length;c+=1)v[c]=je(Me(t,_,c));const M=c=>w(v[c],1,1,()=>{v[c]=null});let m=t[1]&&Ae();return{c(){e=E("div"),l=E("div"),s=E("figure"),s.innerHTML=i,n=N(),a=E("h1"),a.textContent=f,b=N(),k=E("div"),te(D.$$.fragment),V=N(),u=E("div"),r&&r.c(),I=N();for(let c=0;c<v.length;c+=1)v[c].c();L=N(),m&&m.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var h=A(e);l=y(h,"DIV",{class:!0});var P=A(l);s=y(P,"FIGURE",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-vpzkus"&&(s.innerHTML=i),n=W(P),a=y(P,"H1",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-1opypuh"&&(a.textContent=f),b=W(P),k=y(P,"DIV",{class:!0});var C=A(k);le(D.$$.fragment,C),C.forEach(p),P.forEach(p),h.forEach(p),V=W(c),u=y(c,"DIV",{class:!0});var H=A(u);r&&r.l(H),I=W(H);for(let G=0;G<v.length;G+=1)v[G].l(H);L=W(H),m&&m.l(H),H.forEach(p),this.h()},h(){g(s,"class","card-hover rounded-full svelte-cmzijy"),g(a,"class","text-center text-3xl"),g(k,"class","px-2 w-full"),g(l,"class","flex flex-col items-center align-baseline justify-center max-w-4xl space-y-10 "),g(e,"class","flex justify-center mb-6"),g(u,"class","flex flex-wrap space-4 justify-center")},m(c,h){U(c,e,h),z(e,l),z(l,s),z(l,n),z(l,a),z(l,b),z(l,k),se(D,k,null),U(c,V,h),U(c,u,h),r&&r.m(u,null),z(u,I);for(let P=0;P<v.length;P+=1)v[P]&&v[P].m(u,null);z(u,L),m&&m.m(u,null),R=!0},p(c,[h]){const P={};if(h&65536&&(P.$$scope={dirty:h,ctx:c}),!T&&h&1&&(T=!0,P.files=c[0],Ne(()=>T=!1)),D.$set(P),c[2].name?r?(r.p(c,h),h&4&&j(r,1)):(r=Pe(c),r.c(),j(r,1),r.m(u,I)):r&&(J(),w(r,1,1,()=>{r=null}),K()),h&8){_=Ee(Array.from(c[3].entries()).sort(we));let C;for(C=0;C<_.length;C+=1){const H=Me(c,_,C);v[C]?(v[C].p(H,h),j(v[C],1)):(v[C]=je(H),v[C].c(),j(v[C],1),v[C].m(u,L))}for(J(),C=_.length;C<v.length;C+=1)M(C);K()}c[1]?m?(m.p(c,h),h&2&&j(m,1)):(m=Ae(),m.c(),j(m,1),m.m(u,null)):m&&(J(),w(m,1,1,()=>{m=null}),K())},i(c){if(!R){j(D.$$.fragment,c),j(r);for(let h=0;h<_.length;h+=1)j(v[h]);j(m),R=!0}},o(c){w(D.$$.fragment,c),w(r),v=v.filter(Boolean);for(let h=0;h<v.length;h+=1)w(v[h]);w(m),R=!1},d(c){c&&(p(e),p(V),p(u)),ne(D),r&&r.d(),qe(v,c),m&&m.d()}}}function Et(t){const e=t.split(`
`);let l="",s="",i=!1;for(const n of e){if(n.startsWith("##FASTA")){i=!0;continue}i&&(n.startsWith(">")?(s&&(l+=s+`
`),s=n+`
`):s+=n.trim())}return s&&(l+=s+`
`),l.trim()}function Fe(){const t=document.getElementsByName("files")[0];t.value=""}const we=([t],[e])=>t.localeCompare(e);function yt(t,e,l){let s,i,n;ke(t,ye,u=>l(8,s=u)),ke(t,Te,u=>l(2,i=u)),ke(t,ae,u=>l(3,n=u));const a=Ke();let f,b=!1;function k(u){if(!f||f.length===0)return;l(1,b=!0);let I=[];for(let L=0;L<f.length;L++){const R=f[L],S=R.name,d=new FileReader;I.push(new Promise((r,_)=>{d.onload=async v=>{var m,c;let M=(c=(m=v.target)==null?void 0:m.result)==null?void 0:c.toString();if(S.endsWith(".gff")||S.endsWith(".gff3")){await Xe.load(M);const h=Et(M);await Te.load(S,h).catch(P=>{console.error("Error loading reference:",P);const H={message:"Error loading reference: "+P,background:"variant-glass-error"};a.trigger(H)}),Je(ye,s.locus=void 0,s),await Ye.load(h),r(0)}else if(S.endsWith(".userplot")||S.endsWith(".plot"))await ae.load(S,M);else{console.error("Unsupported file type:",S);const P={message:"Unsupported file type: "+S,background:"variant-glass-error"};a.trigger(P),_("Unsupported file type: "+S)}r(0)},d.onerror=_,d.readAsText(R)}))}Promise.all(I).then(L=>{l(1,b=!1)}).catch(L=>{console.error("Error reading files:",L),l(1,b=!1)})}function D(u){f=u,l(0,f)}return[f,b,i,n,k,D,(u,I)=>ae.setIsTreatment(u,I),u=>ae.remove(u)]}class Ht extends ${constructor(e){super(),ee(this,e,yt,zt,Y,{})}}export{Ht as component};
